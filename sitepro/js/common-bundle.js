/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});/*!
 * Generated using the Bootstrap Customizer (https://getbootstrap.com/docs/3.4/customize/)
 */

/*!
 * Bootstrap v5.3.2 (https://getbootstrap.com/)
 * Copyright 2011-2020 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".")}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="5.3.2",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),s="#"===s?[]:s;var a=t(document).find(s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="5.3.2",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target).closest(".btn");e.call(o,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),o.is("input,button")?o.trigger("focus"):o.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="5.3.2",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),"object"==typeof s&&s.length&&s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o=t(this),n=o.attr("href");n&&(n=n.replace(/.*(?=#[^\s]+$)/,""));var s=o.attr("data-target")||n,a=t(document).find(s);if(a.hasClass("carousel")){var r=t.extend({},a.data(),o.data()),l=o.attr("data-slide-to");l&&(r.interval=!1),e.call(a,r),l&&a.data("bs.carousel").to(l),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o="#"!==i?t(document).find(i):null;return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="5.3.2",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var r=" li:not(.disabled):visible a",l=n.find(".dropdown-menu"+r);if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="5.3.2",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+i),t(this.fixedContent).each(function(e,o){var n=o.style.paddingRight,s=t(o).css("padding-right");t(o).data("padding-right",n).css("padding-right",parseFloat(s)+i+"px")}))},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each(function(e,i){var o=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=o?o:""})},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(document).find(s),r=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},a.data(),o.data());o.is("a")&&i.preventDefault(),a.one("show.bs.modal",function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(a,r,this)})}(jQuery),+function(t){"use strict";function e(e,i){var o=e.nodeName.toLowerCase();if(-1!==t.inArray(o,i))return-1!==t.inArray(o,s)?Boolean(e.nodeValue.match(l)||e.nodeValue.match(h)):!0;for(var n=t(i).filter(function(t,e){return e instanceof RegExp}),a=0,r=n.length;r>a;a++)if(o.match(n[a]))return!0;return!1}function i(i,o,n){if(0===i.length)return i;if(n&&"function"==typeof n)return n(i);if(!document.implementation||!document.implementation.createHTMLDocument)return i;var s=document.implementation.createHTMLDocument("sanitization");s.body.innerHTML=i;for(var a=t.map(o,function(t,e){return e}),r=t(s.body).find("*"),l=0,h=r.length;h>l;l++){var d=r[l],p=d.nodeName.toLowerCase();if(-1!==t.inArray(p,a))for(var c=t.map(d.attributes,function(t){return t}),f=[].concat(o["*"]||[],o[p]||[]),u=0,g=c.length;g>u;u++)e(c[u],f)||d.removeAttribute(c[u].nodeName);else d.parentNode.removeChild(d)}return s.body.innerHTML}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),n="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.tooltip",o=new d(this,n)),"string"==typeof e&&o[e]())})}var n=["sanitize","whiteList","sanitizeFn"],s=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],a=/^aria-[\w-]*$/i,r={"*":["class","dir","id","lang","role",a],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},l=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,h=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,d=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};d.VERSION="5.3.2",d.TRANSITION_DURATION=150,d.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:r},d.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.getOptions=function(e){var o=this.$element.data();for(var s in o)o.hasOwnProperty(s)&&-1!==t.inArray(s,n)&&delete o[s];return e=t.extend({},this.getDefaults(),o,e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.sanitize&&(e.template=i(e.template,e.whiteList,e.sanitizeFn)),e},d.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},d.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},d.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},d.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},d.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,n=this.tip(),s=this.getUID(this.type);this.setContent(),n.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&n.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,l=r.test(a);l&&(a=a.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?n.appendTo(t(document).find(this.options.container)):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),p=n[0].offsetWidth,c=n[0].offsetHeight;if(l){var f=a,u=this.getPosition(this.$viewport);a="bottom"==a&&h.bottom+c>u.bottom?"top":"top"==a&&h.top-c<u.top?"bottom":"right"==a&&h.right+p>u.width?"left":"left"==a&&h.left-p<u.left?"right":a,n.removeClass(f).addClass(a)}var g=this.getCalculatedOffset(a,h,p,c);this.applyPlacement(g,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",m).emulateTransitionEnd(d.TRANSITION_DURATION):m()}},d.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},d.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},d.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=i(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},d.prototype.hide=function(e){function i(){"in"!=o.hoverState&&n.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,n=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(d.TRANSITION_DURATION):i(),this.hoverState=null,this)},d.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},d.prototype.hasContent=function(){return this.getTitle()},d.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=window.SVGElement&&i instanceof window.SVGElement,a=o?{top:0,left:0}:s?null:e.offset(),r={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,l,a)},d.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},d.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},d.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},d.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},d.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},d.prototype.enable=function(){this.enabled=!0},d.prototype.disable=function(){this.enabled=!1},d.prototype.toggleEnabled=function(){this.enabled=!this.enabled},d.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},d.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},d.prototype.sanitizeHtml=function(t){return i(t,this.options.whiteList,this.options.sanitizeFn)};var p=t.fn.tooltip;t.fn.tooltip=o,t.fn.tooltip.Constructor=d,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=p,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="5.3.2",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();if(this.options.html){var o=typeof i;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===o&&(i=this.sanitizeHtml(i))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===o?"html":"append"](i)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(i);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="5.3.2",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(document).find(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o);var n=this.options.target===i.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=n.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="5.3.2",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n?"top":!1;if("bottom"==this.affixed)return null!=i?n+this.unpin<=s.top?!1:"bottom":t-o>=n+a?!1:"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&i>=n?"top":null!=o&&l+h>=t-o?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="5.3.2",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),+function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="5.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);$(function(){if(document.location.hash){let anchor=$('div[data-plugin=Blog] a.wb_anchor[name='+document.location.hash.substring(1)+']')
if(anchor.length){let offset=anchor.offset();if(offset.top){window.scrollTo({top:offset.top,behavior:'instant'})}}}})
function wb_form_validateForm(formId,values,errors){var form=$("input[name='wb_form_id'][value='"+formId+"']").parent();if(!form||form.length===0||!errors)return;form.find("input[name],textarea[name]").css({backgroundColor:""});var elem;if(errors.required){for(var i=0;i<errors.required.length;i++){var name=errors.required[i];elem=form.find("input[name='"+name+"'],textarea[name='"+name+"'],select[name='"+name+"']");elem.css({backgroundColor:"#ff8c8c"})}}
if(Object.keys(errors).length){for(var k in values){elem=form.find("input[name='"+k+"'][type='radio'],input[name='"+k+"'][type='checkbox'],input[name='"+k+"[]'][type='checkbox']");if(elem.length){if(!Array.isArray(values[k]))values[k]=[values[k]];elem.each(function(key,item){if(values[k].indexOf($(item).val())>=0){$(item).attr('checked',!0)}})
continue}
elem=form.find("input[name='"+k+"'],textarea[name='"+k+"'],select[name='"+k+"']");if(elem.length){elem.val(values[k])}}}}
var _isTouchDevice;function isTouchDevice(){if(_isTouchDevice===undefined){_isTouchDevice=('ontouchstart' in document.documentElement)&&(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints>0)}
return _isTouchDevice}
var _baseUrl;function getBaseUrl(){if(_baseUrl===undefined){_baseUrl=$('base').attr('href')}
return _baseUrl}
function isIOS(){return('ontouchstart' in document.documentElement)&&(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints>0)}
function wb_show_alert(message,type){var prompt=$("<div>").addClass("alert alert-wb-form alert-"+type).append(message).prepend($("<button>").addClass("close").html("&nbsp;&times;").on("click",function(){$(this).parent().remove()})).appendTo("body");setTimeout(function(){prompt.animate({opacity:1,right:0},250)},250)}(function(){var popupInited=!1;var loader,container,popup,iframe,closeBtn,isVisible;var setPopupVisible=function(visible){isVisible=!!visible;if(isVisible){container.show();var options=container.data('options');if(options.height!=='auto'){popup.css('height',options.height)}
setTimeout(function(){container.addClass('visible')},10)}else{container.removeClass('visible');setTimeout(function(){container.hide()},300)}};window.wb_close_popup=function(){if(iframe&&iframe.length){iframe.attr('src','');setPopupVisible(!1);$(window).off('resize',popupLoaded);iframe.off('load',popupLoaded);iframe.data('options',{});$(document.body).css({overflow:''})}};function popupLoaded(init){var options=container.data('options');var d=iframe.get(0).contentDocument;window.postMessage(JSON.stringify({type:'popupIframeLoaded',data:{height:d?$(d).outerHeight():-1}}),$('base').attr('href'));$(document.body).css({overflow:options.height==='auto'?'hidden':''});container.css({overflow:options.height==='auto'?'auto':''});popup.css({height:''});popup.css({height:options.height==='auto'?(d?$(d.body).outerHeight():''):options.height,maxHeight:options.height==='auto'?'none':options.height,});if(options.pagePopup){var offset=Math.floor(0-popup[0].getBoundingClientRect().x-(popup[0].offsetParent?parseInt(getComputedStyle(popup[0].offsetParent)['padding-left']):0));var popupOverflowed=(sizeFormat(options.width).indexOf('px')>0&&options.width>$(popup).width())||(sizeFormat(options.minWidth).indexOf('px')>0&&options.minWidth>=$(popup).width());iframe.css({position:'absolute',left:!popupOverflowed?offset:0,right:!popupOverflowed?offset:0,width:!popupOverflowed?$(document.body).width():'',})}else{iframe.css({position:'relative',left:'',right:'',width:'',})}
setPopupVisible(!0);if(init!==!1){loader.hide();setTimeout(function(){popupLoaded(!1)},100);setTimeout(function(){popupLoaded(!1)},500);var observer=new MutationObserver(function(){if(options.height==='auto'){popup.css({height:options.height==='auto'?(d?$(d.body).outerHeight():''):options.height,maxHeight:options.height==='auto'?'none':options.height,})}});observer.observe(d,{attributes:!0,childList:!0,subtree:!0})}}
window.wb_show_popup=function(url,options){if(!options)options={};if(!popupInited){popupInited=!0;container=$('<div class="wb-popup-container">');popup=$('<div class="wb-popup">');loader=$('<div class="wb-popup-loader">').hide();$('<div class="ico-spin spinner">').appendTo(loader);var iframeWrapper=$('<div class="wb-iframe-wrapper">');iframeWrapper.css({overflow:'hidden'});iframe=$('<iframe>');closeBtn=$('<div class="wb-popup-btn-close">');closeBtn.on('click',wb_close_popup);popup.append(loader);popup.append(closeBtn);popup.append(iframeWrapper);iframeWrapper.append(iframe);popup.appendTo(container);container.appendTo('body');$(document).on('keydown',function(e){if(e.keyCode===27){if(isVisible)wb_close_popup();}});if(isIOS()){iframeWrapper.attr('style','-webkit-overflow-scrolling: touch; overflow-y: auto;')}}
loader.show();popup.css({width:options.width||400,height:options.height||320,minWidth:sizeFormat(options.minWidth),minHeight:sizeFormat(options.minHeight),maxWidth:sizeFormat(options.maxWidth),maxHeight:sizeFormat(options.maxHeight),});container.css({overflow:''});popup.css({height:'',maxHeight:''});container.data('options',options);$(window).on('resize',popupLoaded);iframe.on('load',popupLoaded);iframe.attr('src',url);setPopupVisible(!0)};function sizeFormat(size){if(size&&String(size||'').indexOf('%')>0){return size}
if(size&&String(size||'')==='auto'){return size}
if(size){return size+'px'}
return''}
$(window).on('message',function(e){var eData=e.originalEvent.data;if(eData&&typeof(eData)==='object'&&eData.data&&typeof(eData.data)==='object'){var event=eData.event,data=eData.data;if(event==='wb_contact_form_sent'){var type=data.type?data.type:'success';if(data.state)wb_show_alert(data.state,type);if(type==='success'){setPopupVisible(!1)}}
if(event==='wb_show_popup'){var url=data.url;var options=data.options||{};wb_show_popup(url,options)}}})})();(function(){var params=[];var i,part;var qs_parts=location.search.replace(/^\?/,'').split('&');for(i=0;i<qs_parts.length;i++){part=qs_parts[i].split('=');if(part.length===2){params[decodeURIComponent(part[0])]=decodeURIComponent(part[1])}}
window.wb_get_query_param=function(key){return(key&&(key in params))?params[key]:null}})();$(function(){if(navigator.userAgent.indexOf('Instagram')>-1){$('form').each(function(){if(this.method&&this.method.toLowerCase()==='post'&&this.target&&this.target==='_blank'){$(this).removeAttr('target')}})}(function(){var extractYoutubeId=function(url){var id=null;if(/^https?:\/\/.*youtube.*/i.test(url)){var parts=url.split('?');if(parts.length>1){var parts2=parts[1].split('&');for(var i=0;i<parts2.length;i++){var keyVal=parts2[i].split('=');if(keyVal.length>1){if(keyVal[0]==='v'&&keyVal[1]){id=keyVal[1];break}}}}}
if(!id&&/^(?:https?:\/\/|)(www\.)?youtu\.be\/(.+)$/i.test(url)){id=RegExp.$1}
if(!id&&/(?:^|")(?:https?:\/\/|)(?:www\.|music\.)?youtube\.com\/(?:embed\/|shorts\/|watch\?v=)(.+?)(?:[\?&].*)?(?:"|$)/i.test(url)){id=RegExp.$1}
if(id){id=id.replace(/[^a-zA-Z0-9\_\-]/,'')}
return id};$('.wb_video_background').each(function(){var videoContainer=$(this);var isSite=videoContainer.is('.wb_site_video_background');var url=videoContainer.data('video'),start=videoContainer.data('start'),end=videoContainer.data('end');if(!start)start=0;if(!end)end=null;if(url){var youtubeVideoId=extractYoutubeId(url);if(youtubeVideoId){if(!window.YT){$.getScript('https://www.youtube.com/iframe_api')}
var onAPIReady=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){if(typeof(onAPIReady)==='function')onAPIReady();var youtubeElementId=videoContainer.attr('id')+'_youtube_container';var player=$('<div class="wb-youtube-video">'+'<div class="youtube" id="'+youtubeElementId+'"></div>'+'</div>');videoContainer.append(player);var viewportCont=isSite?$(window):videoContainer;var lastWidth,lastHeight;var innerCont=null;var inited=!1;var resizer=function(){if(!innerCont)innerCont=player.children('iframe.youtube');if(!innerCont.length)return;var w=viewportCont.width(),h=viewportCont.height();if(lastWidth===w&&lastHeight===h)
return;lastWidth=w;lastHeight=h;if(w/h>16/9){youtube.setSize(w,w/16*9);innerCont.css('left',0)}else{youtube.setSize(h/9*16,h);innerCont.css('left',-(innerCont.outerWidth()-w)/2)}};var onfocus=function(){if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();}
$(window).on('resize',resizer);$(window).on('focus',onfocus);var initVideo=function(reload){player.addClass('visible');clearInterval(timer);timer=setInterval(function(){youtube.seekTo(start);if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();},((end?end:youtube.getDuration()-0.5)-start)*1000);if(reload){youtube.seekTo(start);if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();}};var timer;var youtube=new YT.Player(youtubeElementId,{events:{playerVars:{autoplay:0,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3},onReady:function(){youtube.loadVideoById({videoId:youtubeVideoId,startSeconds:start});youtube.mute();resizer()},onStateChange:function(e){if(e.data===YT.PlayerState.PLAYING){if(!inited){initVideo();inited=!0}}else if(e.data===YT.PlayerState.ENDED){initVideo(!0)}}}})}}else{var video=$('<video class="wb-video" muted playsinline>');var loaded=!1;var ratio;var lastWidth,lastHeight;videoContainer.append(video);var resizer=function(){if(!ratio)return;var ew=videoContainer.width();var eh=videoContainer.height();if(lastWidth&&lastWidth===ew&&lastHeight&&lastHeight===eh)
return;lastWidth=ew;lastHeight=eh;var er=ew/eh;var nw=0,nh=0,nl=0,nt=0;if(ratio>er){nh=eh;nw=nh*ratio;nl=(nw-ew)/2}else if(ratio<eh){nw=ew;nh=nw/ratio;nt=(nh-eh)/2}else{nw=ew;nh=eh}
video.css({width:nw,height:nh,left:-nl,top:-nt})};$(window).on('resize',resizer);video.get(0).autoplay=!0;video.on('loadeddata',function(){if(loaded)return;loaded=!0;setInterval(function(){video.get(0).currentTime=start;if(video.get(0).paused)video.get(0).play();},((end?end:video.get(0).duration)-start)*1000);video.get(0).currentTime=start;video.get(0).play();video.addClass('visible');ratio=(video.width()/video.height());resizer()});video.get(0).src=url}}})})();var currLang=(('currLang' in window)&&window.currLang)?window.currLang:null;var useTrailingSlashes=(!('useTrailingSlashes' in window)||window.useTrailingSlashes);var disableRightClick=(('disableRightClick' in window)&&window.disableRightClick);var isPopupMode=(parseInt(wb_get_query_param('wbPopupMode'))===1);var openPopupPageUrl=(('openPopupPageUrl' in window)&&window.openPopupPageUrl);var openPopupPageOptions=(('openPopupPageOptions' in window)&&window.openPopupPageOptions);var isMaintenance=$('body').attr('wb-maintenance-page')==='true';var href=wb_get_query_param('wbPopupOpen');if(href){var baseUrl=$('head base').attr('href');if(/^wb_popup:([^;]*);/.test(href)){var url=RegExp.$1,popupOptions={};var parts=href.split(';');for(var i=0;i<parts.length;i++){var pp=parts[i].split('=');if(pp.length!==2||(!parseInt(pp[1])&&pp[1]!=='auto'))continue;if(pp[0]==='w')popupOptions.width=pp[1];else if(pp[0]==='h')popupOptions.height=pp[1];else if(pp[0]==='wmin')popupOptions.minWidth=pp[1];else if(pp[0]==='wmax')popupOptions.maxWidth=pp[1];else if(pp[0]==='hmin')popupOptions.minHeight=pp[1];else if(pp[0]==='hmax')popupOptions.maxHeight=pp[1];else if(pp[0]==='pagePopup')popupOptions.pagePopup=pp[1]}
if(!/^https?:\/\//.test(url)){url=baseUrl+url}
if(!isPopupMode){wb_show_popup(url,popupOptions)}else if(window!==window.parent&&window.parent.postMessage){window.parent.postMessage({event:'wb_show_popup',data:{url:url,options:popupOptions}})}}}
if(disableRightClick){$(document).on('contextmenu',function(e){e.preventDefault()})}
var comboBoxes=$('.wb-combobox-controll');if(comboBoxes.length){comboBoxes.each(function(){var thisCombo=$(this);var clickFunc=function(){var input=thisCombo.find('input');var menu=thisCombo.find('.dropdown-menu');var w=input.outerWidth();var mw=menu.width();var mh=menu.height();var ew=thisCombo.parent().outerWidth();var eh=thisCombo.parent().outerHeight();var wW=$(document.body).outerWidth();var wH=$(document.body).outerHeight();var offset=thisCombo.parent().offset();if(mw<ew)menu.width(ew);let margin=-w;if(document.dir==='rtl'){if(mw>offset.left+ew)margin-=mw-ew}else{if(offset.left+mw>wW)margin-=mw-ew}
let css={};css[document.dir==='rtl'?'marginRight':'marginLeft']=margin+'px';menu.css(css);if(offset.top+eh+mh>wH)menu.css({top:'initial','bottom':'100%'});if(offset.top-mh<0)menu.css({top:'100%','bottom':'initial'});thisCombo.find('.btn-group').toggleClass('open')};$(this).find('input').bind('click',clickFunc);$(this).find('.dropdown-toggle').bind('click',clickFunc)});$(document).bind('click',function(e){var t=$(e.target);if(!t.is('.wb-combobox-controll')){t=t.parents('.wb-combobox-controll');$.each($('.wb-combobox-controll'),function(){if(t.get(0)!==$(this).get(0)){$(this).find('.btn-group').removeClass('open')}})}})}
if(currLang){$('.lang-selector').each(function(){var thisElem=$(this);var type=thisElem.attr('data-type');if(type==='flags'){thisElem.find('a[data-lang="'+currLang+'"]').addClass('active')}else if(type==='select'){var actLi=thisElem.find('li[data-lang="'+currLang+'"]');actLi.addClass('active');thisElem.find('input').val(actLi.find('a').html());thisElem.find('input').on('click',function(){setTimeout(function(){thisElem.find('.dropdown-toggle').click()},1)})}})}
$('.btn-group.dropdown').each(function(){var ddh=$(this).height();var ddm=$(this).children('.dropdown-menu');ddm.addClass('open');var ddmh=ddm.height();ddm.removeClass('open');var ddt=$(this).offset().top;var dh=$(document).height();if(ddt+ddh+ddmh+2>=dh){$(this).removeClass('dropdown').addClass('dropup')}});$('.dropdown').on('shown.bs.dropdown',function(){console.log('test');var ddm=$(this).children('.dropdown-menu');if(ddm.length){ddm.find('a').css({whiteSpace:''});ddm.css({width:'',left:'',right:''});var wWidth=$(window).width();var rect=ddm.get(0).getBoundingClientRect();if(rect.width>wWidth){ddm.css({width:wWidth});ddm.find('a').css({whiteSpace:'normal'})}
rect=ddm.get(0).getBoundingClientRect();if(ddm.has('.dropdown-menu-right')&&rect.left<0){ddm.css({right:rect.left})}
if(ddm.has('.dropdown-menu-left')&&wWidth<rect.right){ddm.css({left:rect.right-wWidth})}}});var menuList=[];var lastOpenMi=null;var closeMenus=function(ignoreMenu){for(var i=0;i<menuList.length;i++){var menu=menuList[i];if(ignoreMenu&&menu.menuId===ignoreMenu.menuId)continue;menu.closeAll()}};$('body').on('touchstart',function(e){var ignoreMenu=SpMenu.lookupMenu($(e.target).closest('.wb-menu,.wb-menu-det'));closeMenus(ignoreMenu)});var SpMenuItem=function(elem,parent){this.elem=elem;this.parent=parent;this.subMenu=(elem.children('ul').length>0)?new SpMenu(elem,this):null;var isOver=!1;this.isHover=function(){return isOver};this.isActive=function(){return elem.is('.active')};var linkElem=this.elem.children('a');var href=linkElem.attr('href');var clearAnchor=function(url){var anchorPos=url.indexOf('#');return anchorPos>-1?url.substring(0,url.indexOf('#')):url};var itemOnCurrPage;this.isAnchor=function(onCurrentPage){if(href&&href.indexOf('#')>-1){if(onCurrentPage!==undefined){if(itemOnCurrPage===undefined){var baseUrl=getBaseUrl();var currUrl=clearAnchor(location.href);var currUri=currUrl.replace(baseUrl,'');var itemUri=href.replace(baseUrl,'');itemOnCurrPage=(clearAnchor(itemUri)===currUri)}
return itemOnCurrPage===!!onCurrentPage}
return!0}
return!1};this.getText=function(){return linkElem.text()}
var _hto=0;this.setHover=function(over){this.cancelHoverTimeout();if(isOver==over)return;isOver=over;if(over){elem.addClass('over');if(isTouchDevice()){var pItems=this.parent.getItems();for(var i=0;i<pItems.length;i++){var item=pItems[i];if(item===this)continue;if(item.isHover())item.setHover(!1);}}}else{elem.removeClass('over')}
if(this.subMenu)this.subMenu.triggerHover(over);if(this.parent&&this.parent.isVertical()&&this.parent.parent){this.parent.parent.cancelHoverTimeout();if(!this.parent.isHover())this.parent.parent.setHover(over);}};this.setHoverTimeout=function(over){this.cancelHoverTimeout();var self=this;_hto=setTimeout(function(){self.setHover(over)},20)};this.cancelHoverTimeout=function(){if(_hto)clearTimeout(_hto);}};var SpMenu=function(elem,parent){this.menuId=(parent&&parent.parent)?parent.parent.menuId:elem[0].id;this.parent=parent;SpMenu.markMenu(elem,this.menuId);var menuElem=elem.children('ul');var isVertical=menuElem.is('.vmenu');var items=[];var rawItem=menuElem.children('li');for(var i=0,c=rawItem.length;i<c;i++){var el=rawItem.eq(i);el.data('spMi',i);items.push(new SpMenuItem(el,this))}
var fallbackActiveItem=null;var currentPageItems=menuElem.find("li.wb_this_page_menu_item");var anchorItemMap={};currentPageItems.each(function(){var item=$(this);if(!fallbackActiveItem)
fallbackActiveItem=item;var anchor=item.data("anchor")||"";if(!anchorItemMap.hasOwnProperty(anchor)){anchorItemMap[anchor]=item;anchorItemMap[encodeURIComponent(anchor)]=item;anchorItemMap[encodeURIComponent(anchor).replace(/%20/g,'+')]=item}});var _wrapperElem=null;var _wrapper=!1;this.isWrapper=function(){return this._wrapper?!0:!1};this.setWrapper=function(wrapper,mi){if(_wrapper==wrapper)return;_wrapper=wrapper;if(wrapper){if(!_wrapperElem){_wrapperElem=$('<div>').addClass('vmenu wb-menu-det').attr({id:this.menuId+'-det'}).css({position:'absolute',zIndex:9999,top:-20,left:-20,width:1}).appendTo(document.body);SpMenu.markMenu(_wrapperElem,this.menuId)}
var pos=mi.elem.offset();var width=mi.elem.outerWidth();_wrapperElem.css({left:pos.left+width-1,top:pos.top});_wrapperElem.append(menuElem)}else{elem.append(menuElem)}};this.triggerHover=function(over,mi){if(!over)this.setWrapper(!1,mi);};this.isVertical=function(){if(!this.parent){return isVertical}else if(this.parent.parent){return this.parent.parent.isVertical()}
return!1};var _openLeft=!1;this.isOpenLeft=function(){return _openLeft};this.setOpenLeft=function(openLeft){if(_openLeft==openLeft)return;_openLeft=openLeft;if(openLeft)menuElem.addClass('open-left');else menuElem.removeClass('open-left')};this.getLeft=function(){return menuElem.offset().left};this.getWidth=function(){return menuElem.outerWidth(!0)};var isExpanded=function(){return elem.is('.collapse-expanded')};var open=function(){elem.addClass('collapse-expanded');updateMenuPosition();if(isLanding)onResize();};var close=function(){elem.removeClass('collapse-expanded')};this.clearOpenLeft=function(){this.setOpenLeft(!1);for(var i=0;i<items.length;i++){if(items[i].subMenu)items[i].subMenu.clearOpenLeft();}};this.closeAll=function(){for(var i=0;i<items.length;i++){var mi=items[i];mi.setHover(!1);if(mi.subMenu)mi.subMenu.closeAll();}};this.getItems=function(){return items};this.updateActiveItems=function(anchorsAbove,anchorsBelow){if(currentPageItems.length<2){currentPageItems.addClass("active")}else{currentPageItems.removeClass("active");var searchFunc=function(anchorList){for(var i=0,il=anchorList.length;i<il;i++){var anchor=anchorList[i];if(!anchorItemMap.hasOwnProperty(anchor.name))
continue;anchorItemMap[anchor.name].addClass("active");return!0}
return!1};if(!searchFunc(anchorsAbove))
if(!searchFunc(anchorsBelow))
fallbackActiveItem.addClass("active");}};var isHover=!1;this.isHover=function(){return isHover};var onHover=function(mi,over){if(over){mi.setHover(!0);lastOpenMi=mi;if(isExpanded()){mi.parent.clearOpenLeft()}else if(mi.subMenu){var subLeft=mi.subMenu.getLeft();if(isVertical&&mi.parent.isOpenLeft()){mi.subMenu.setOpenLeft(!0)}else{var ww=$(window).width();var miParentLeft=mi.parent.getLeft();var offset=(mi.parent&&mi.parent.parent)?mi.elem.width():0;var sw=mi.subMenu.getWidth();var miLeft=mi.elem.position().left;mi.subMenu.setOpenLeft(miParentLeft+miLeft+offset+sw>ww)}
mi.subMenu.setWrapper(isVertical,mi)}}else{mi.setHoverTimeout(!1)}};var onClick=function(mi){if(mi.isAnchor(!0)){setTimeout(function(){close()},100)}};var self=this;var onHoverToggle=function(mi,e){var isOver=mi.isHover()||(isExpanded()&&mi.isActive());closeMenus(self);var parentMatch=!1;var mip=mi;while(!0){if(mip===lastOpenMi){parentMatch=!0;break}else if(mip.parent){mip=mip.parent}else{break}}
if(lastOpenMi&&!mi.parent&&!parentMatch){lastOpenMi.setHoverTimeout(!1)}
if(!isOver&&mi.subMenu){e.stopImmediatePropagation();e.preventDefault()}
onHover(mi,!isOver)};var inferMi=function(miElem){var idx=miElem.data('spMi');if(typeof idx!=='number'&&typeof idx!=='string')return null;if(idx<0||idx>=items.length)return null;return items[idx]};var ignoreHover=null;menuElem.on('mouseenter',function(){if(!self.parent)return;isHover=!0}).on('mouseleave',function(){if(!self.parent)return;isHover=!1;var hasHoverChild=!1;for(var i=0;i<items.length;i++){var item=items[i];if(item.isHover()){hasHoverChild=!0;break}}
if(!hasHoverChild){self.parent.setHover(!1)}}).on('click','> li',function(){var mi=inferMi($(this));onClick(mi)}).on('mouseover','> li',function(){if(ignoreHover)return;var mi=inferMi($(this));if(!mi)return;onHover(mi,!0)}).on('mouseout','> li',function(){if(ignoreHover)return;var mi=inferMi($(this));if(!mi)return;onHover(mi,!1)}).on('touchstart','> li > a',function(e){if(ignoreHover)clearTimeout(ignoreHover);ignoreHover=setTimeout(function(){ignoreHover=null},2000);var mi=inferMi($(this).parent());if(!mi)return;onHoverToggle(mi,e)});if(!parent)SpMenu.registerMenu(this);};var menuIdx={};SpMenu.registerMenu=function(menu){menuList.push(menu);menuIdx[menu.menuId]=menu};SpMenu.markMenu=function(elem,menuId){elem.data('spMenu',menuId)};SpMenu.lookupMenu=function(elem){var menuId=elem.data('spMenu');return(menuId in menuIdx)?menuIdx[menuId]:null};SpMenu.updateActiveItems=function(){var anchorsAbove=[],anchorsBelow=[];anchorsAbove.push({name:"",delta:$(window).scrollTop()});$("a.wb_anchor").each(function(){var $this=$(this);var anchor=$this.attr("name");var offset=Math.round(this.getBoundingClientRect().top);if(offset<=3)
anchorsAbove.push({name:anchor,delta:-offset});else anchorsBelow.push({name:anchor,delta:offset})});var sortFunc=function(a,b){if(a.delta===b.delta){if(a.name==="")return-1;if(b.name==="")return 1;return 0}
return(a.delta<b.delta)?-1:1};anchorsAbove.sort(sortFunc);anchorsBelow.sort(sortFunc);for(var i=0,il=menuList.length;i<il;i++)
menuList[i].updateActiveItems(anchorsAbove,anchorsBelow);};$(window).on("scroll orientationchange",SpMenu.updateActiveItems);if("ResizeObserver" in window){(new ResizeObserver(SpMenu.updateActiveItems)).observe(document.body)}else{var lastBodyHeight=null;setInterval(function(){if(document.body.clientHeight!==lastBodyHeight){lastBodyHeight=document.body.clientHeight;SpMenu.updateActiveItems()}},500)}
setTimeout(SpMenu.updateActiveItems,0);$('.wb-menu').each(function(){new SpMenu($(this),null)});$('.wb-menu-mobile').each(function(){var elem=$(this);var btn=elem.children('.btn-collapser').eq(0);var isHeaderFixed=(elem.parents('.wb_header_fixed').length>0);var onResize=function(){var ul=elem.children('ul');ul.css('max-height',($(window).scrollTop()-ul.offset().top+$(window).height()-20)+'px')};var updateMenuPosition=function(){var box=elem[0].getBoundingClientRect();elem.children(elem.is('.collapse-expanded')?'ul':'ul:not(.vmenu)').css({top:box.bottom,'max-height':'calc(98vh - '+box.bottom+'px)'});var collapser=elem.children('.btn-collapser');var ul=elem.children('ul');if(collapser.css('display')==='none'){ul.css({left:'',right:'',width:''})}else{var wWidth=$(document.body).width();ul.css('max-width','');var ulMaxW=parseInt(ul.css('max-width'));if(ulMaxW&&wWidth>ulMaxW+40){var align='left';if($(elem[0]).hasClass('wb-menu-mobile-left'))align='left';if($(elem[0]).hasClass('wb-menu-mobile-center'))align='center';if($(elem[0]).hasClass('wb-menu-mobile-right'))align='right';ul.css({left:align==='left'?box.left:(align==='right'?'unset':(box.left+box.width/2-ulMaxW/2)),right:align==='left'?'unset':(align==='right'?(wWidth-(box.left+box.width)):'unset'),width:'',});var ulBox=ul.get(0).getBoundingClientRect();if(ulBox.right+20>wWidth){ul.css('left',parseInt(ul.css('left'))-(ulBox.right-wWidth)-20)}
if(ulBox.left<20){ul.css('left',20)}}else{ul.css({left:'20px',right:'20px',width:'auto',})}}};btn.on('click',function(e){if(elem.hasClass('collapse-expanded')){elem.removeClass('collapse-expanded')}else{elem.addClass('collapse-expanded');updateMenuPosition();if(isHeaderFixed)onResize();}});$(document).on('click',function(e){if(!$(e.target).is('#'+elem.attr('id')+', #'+elem.attr('id')+' *')){if(elem.hasClass('collapse-expanded')){elem.removeClass('collapse-expanded')}
e.stopPropagation()}});$(window).on("resize orientationchange",function(){if(elem.hasClass('collapse-expanded')){elem.removeClass('collapse-expanded')}
updateMenuPosition();if(isHeaderFixed)
onResize();}).scroll(function(){updateMenuPosition()});if(isHeaderFixed){elem.find('li').on('click',function(){elem.removeClass('collapse-expanded')})}});(function(){if(!(typeof window.IntersectionObserver==='function'))return;var observer=new IntersectionObserver(function(entries){for(var i=0,c=entries.length;i<c;i++){if(!entries[i].isIntersecting)continue;var elem=$(entries[i].target);if(elem.data('wbAnimEntry'))continue;(function(elem){var time=elem.attr('data-wb-anim-entry-time')*1.0;var delay=elem.attr('data-wb-anim-entry-delay')*1.0;elem.removeAttr('data-wb-anim-entry-time');elem.removeAttr('data-wb-anim-entry-delay');var funcStart=function(){elem.data('wbAnimEntry','1').addClass('wb-anim-entry-on').removeClass('wb-anim-entry')};if(delay)setTimeout(funcStart,delay*1000);else funcStart();if(time&&!elem.hasClass('loop')){setTimeout(function(){elem.removeClass('wb-anim-entry-on')},(delay*1000+time*1000)+40)}})(elem)}},{});$('.wb-anim-entry').each(function(){observer.observe(this)})})();(function(){var $sticky=$(".wb-sticky");if($sticky.length){var $anchors=$(".wb_anchor");var html=$('html').get(0);var $root=$(".root");var watcher=0,retry=0,lastSize;var stickyUpdateCalled=!1;var stickyUpdate=function(){var clientWidth=html.clientWidth;var clientHeight=html.clientHeight;let padding={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};$sticky.each(function(){var $this=$(this);var hAlign=$this.data("hAlign"),vAlign=$this.data("vAlign");if(!hAlign||!vAlign)
return;var rect=this.getBoundingClientRect(),v;var margin={top:((v=parseFloat($sticky.css('margin-top')))&&!isNaN(v))?v:0,bottom:((v=parseFloat($sticky.css('margin-bottom')))&&!isNaN(v))?v:0,left:((v=parseFloat($sticky.css('margin-left')))&&!isNaN(v))?v:0,right:((v=parseFloat($sticky.css('margin-right')))&&!isNaN(v))?v:0};if((rect.top-margin.top)<=0&&(Math.round(rect.bottom)+margin.bottom)>=clientHeight){if(hAlign==="left")
padding.paddingLeft=Math.max(padding.paddingLeft,Math.round(rect.right));else if(hAlign==="right")
padding.paddingRight=Math.max(padding.paddingRight,Math.round(clientWidth-rect.left));}else if((rect.left-margin.left)<=0&&(Math.round(rect.right)+margin.right)>=clientWidth){if(vAlign==="top")
padding.paddingTop=Math.max(padding.paddingTop,Math.round(rect.bottom));else if(vAlign==="bottom")
padding.paddingBottom=Math.max(padding.paddingBottom,Math.round(clientHeight-rect.top));}});$anchors.css({position:"relative"});$anchors.data('sticky-padding',-padding.paddingTop);$root.css(padding);if(!stickyUpdateCalled)$root.addClass('root-padding-fixed');stickyUpdateCalled=!0;return clientWidth+","+clientHeight};var animationWatcherFunc=function(){var size=stickyUpdate();if(size!==lastSize){retry=0;watcher=requestAnimationFrame(animationWatcherFunc)}else if(++retry<=2)
watcher=requestAnimationFrame(animationWatcherFunc);else watcher=0;lastSize=size};var stickyUpdateCallback=function(){if(watcher)
cancelAnimationFrame(watcher);lastSize="";retry=0;watcher=requestAnimationFrame(animationWatcherFunc)};$(window).on("resize orientationchange",stickyUpdateCallback);stickyUpdateCallback();lastSize=stickyUpdate()}})();(function(){var header=null,main=null,footer=null;$("#wb_root").children().each(function(){var $this=$(this);var id=""+$this.attr("id");if(/^wb_header/.test(id))
header=$this;if(/^wb_main/.test(id))
main=$this;if(/^wb_footer/.test(id))
footer=$this});var updateMainBlockHeight=function(){if(!isMaintenance&&(!main||!header||!footer))return;var mainMargins=main.outerHeight(!0)-main.outerHeight(!1);var minMainBlockHeight=window.innerHeight-mainMargins;if(!isMaintenance){var headerHeight=header.hasClass('wb_header_fixed')?0:header.outerHeight(!0);minMainBlockHeight=minMainBlockHeight-headerHeight-footer.outerHeight(!0)}
var mainBlockHeight=parseInt(main.get(0).style.height);if(!mainBlockHeight)mainBlockHeight=0;main.css('min-height',Math.max(minMainBlockHeight,mainBlockHeight)+'px')};$(window).on('resize',updateMainBlockHeight);$(window).on('load',updateMainBlockHeight);updateMainBlockHeight();setTimeout(function(){updateMainBlockHeight()},100);setTimeout(function(){updateMainBlockHeight()},300);setTimeout(function(){updateMainBlockHeight()},1000)})();$(window).trigger('hashchange');$(document).on('mousedown','.ecwid a',function(){var href=$(this).attr('href');if(href&&href.indexOf('#!')===0){var url=decodeURIComponent(location.pathname)+href;$(this).attr('href',url)}});(function(){$('.wb_anchor').each(function(){try{var anchor=$(this);var target=$('[href="#'+this.name+'"]');if(!target.length)
target=$('[href="#'+decodeURIComponent(this.name)+'"]');if(!target.length)
target=$('[href="#'+encodeURIComponent(this.name)+'"]');if(target.length){target.each(function(){$(this).on('click',function(e){window.location.hash=anchor.get(0).name||'';$(window).scrollTop(anchor.offset().top+(anchor.data('sticky-padding')||0));e.preventDefault();return!1})})}}catch(e){}})})();(function(){var recaptchaList=$('.wb_form_captcha');var defaultRecaptchaWidth=304;if(recaptchaList.length){var resizeCaptcha=function(){recaptchaList.each(function(){var recaptcha=$(this);if(recaptcha.is(':visible')){var form=recaptcha.parents('.wb_form');var fw=form.outerWidth();var scale=Math.min(fw/defaultRecaptchaWidth,1);var scaleCss='scale('+scale+')';if(scale>0){recaptcha.css({'transform':scaleCss,'-o-transform':scaleCss,'-ms-transform':scaleCss,'-moz-transform':scaleCss,'-webkit-transform':scaleCss,'max-width':(fw*scale)+'px'})}}})};$(window).on('resize',resizeCaptcha);setTimeout(function(){resizeCaptcha()},500)}})();(function(){var updatePositionFixed=function(){if(isTouchDevice()){if(isIOS()&&!window.MSStream){$('body').addClass('wb_no_bg_fixed')}
var pageCssSheet,sheet;for(var i=0;i<document.styleSheets.length;i++){sheet=document.styleSheets[i];if(sheet.ownerNode&&sheet.ownerNode.getAttribute('id')==='wb-page-stylesheet'){pageCssSheet=sheet;break}}
if(!pageCssSheet)return;var rules=(!pageCssSheet.href||pageCssSheet.href.indexOf(location.origin)>-1)?(pageCssSheet.cssRules||pageCssSheet.rules):[];if(!rules)return;var fixedBgCss;for(i=0;i<rules.length;i++){if(rules[i].selectorText==='body.site::before'){if(/\bfixed\b/i.test(rules[i].cssText)){fixedBgCss=rules[i].cssText;pageCssSheet.deleteRule(i);break}}}
if(fixedBgCss){var css=fixedBgCss.match(/\{(.+)\}/)[1].replace(/\bfixed\b/i,'scroll');css+=' position: fixed';$('<div class="wb_fixed_bg_hack">').prependTo('body');pageCssSheet.addRule('.wb_fixed_bg_hack',css)}}};updatePositionFixed()})();(function(){var baseUrl=$('head base').attr('href');var convertLinks=function(link){$(link||'a[data-popup-processed!="true"]').each(function(){var a=$(this);var href=a.attr('href');if(/^wb_popup:([^;]*);/.test(href)){var url=RegExp.$1,popupOptions={};var parts=href.split(';');for(var i=0;i<parts.length;i++){var pp=parts[i].split('=');if(pp.length!==2||(!parseInt(pp[1])&&pp[1]!=='auto'))continue;if(pp[0]==='w')popupOptions.width=pp[1];else if(pp[0]==='h')popupOptions.height=pp[1];else if(pp[0]==='wmin')popupOptions.minWidth=pp[1];else if(pp[0]==='wmax')popupOptions.maxWidth=pp[1];else if(pp[0]==='hmin')popupOptions.minHeight=pp[1];else if(pp[0]==='hmax')popupOptions.maxHeight=pp[1];else if(pp[0]==='pagePopup')popupOptions.pagePopup=pp[1]}
if(!/^https?:\/\//.test(url)){url=baseUrl+url}(function(url,popupOptions){var func=function(e){e.stopImmediatePropagation();e.preventDefault();if(!isPopupMode){wb_show_popup(url,popupOptions)}else if(window!==window.parent&&window.parent.postMessage){window.parent.postMessage({event:'wb_show_popup',data:{url:url,options:popupOptions}})}};a.data("wbpopfunc",func).on('click',func)})(url,popupOptions);a.attr('data-popup-url',a.attr('href'));a.attr('href','javascript:void(0)');a.removeAttr('target');a.attr('data-is-popup','true')}else if(isPopupMode){var target=a.attr('target');if(!target||target==='_self'){a.attr('target','_parent')}}
a.attr('data-popup-processed','true')})};convertLinks();setTimeout(convertLinks,100);if(window.wbmodGalleryLib){setTimeout(function(){var galleryList=window.wbmodGalleryLib.getGalleryLibList();for(var i=0;i<galleryList.length;i++){galleryList[i].onImageDisplayed=function(){convertLinks()}}},500)}
if(openPopupPageUrl&&!isPopupMode){setTimeout(function(){wb_show_popup(openPopupPageUrl,openPopupPageOptions)},1000)}
window.initLink=function(link){var $link=$(link);var func=$link.data("wbpopfunc");if(func)
$link.off("click",func);$link.removeAttr("data-popup-processed").removeAttr("data-is-popup");convertLinks(link)}})();(function(){$("[data-enlarge-src]").css("cursor","pointer").on("click touchstart touchend touchmove",function(e){var $this=$(this);if(e.type==="touchstart"){$this.data("pswpDisabled",!1)}else if(e.type==="touchmove"){$this.data("pswpDisabled",!0)}
if((e.type==="click"||e.type==="touchend")&&!$(this).data("pswpDisabled")){if($this.data("clicked"))return;$this.data("clicked",!0);var img=new Image();img.onload=function(){(new PhotoSwipe($('.wb_pswp').get(0),PhotoSwipeUI_Default,[{src:this.src,w:this.width,h:this.height,msrc:this.src}],{index:0})).init();$this.data("clicked",!1)};img.src=$this.attr("data-enlarge-src")}})})();(function(){var ignoreTags=["A","FORM","INPUT","SELECT","TEXTAREA"];$(".wb-layout-link").each(function(){var $link=$(this);$link.parent().children(".wb_content").on("click",function(e){for(var target=e.target;target&&target!==this;target=target.parentNode){if(ignoreTags.indexOf(target.tagName)>=0||/wb-prevent-layout-click/.test(target.getAttribute("class")||""))
return}
e.stopImmediatePropagation();e.preventDefault();var href=$link.attr("href");if(href.indexOf(":")<0){var baseUrl=$("base").attr("href");href=baseUrl+href}
if(href==="javascript:void(0)")
$link.click();else if($link.attr("target")==="_blank"||(e.type==="click"&&(e.button===1||e.ctrlKey))||("wbPreview" in window&&window.wbPreview&&window.location.protocol==="https:"&&/http:/.test(href)))
window.open(href,void 0,"noopener");else window.location.href=href})})})();(function(){if((typeof window.IntersectionObserver==='function')){var observer=new IntersectionObserver(function(entries){for(var i=0,c=entries.length;i<c;i++){if(!entries[i].isIntersecting)continue;var elem=entries[i].target;var src=elem.getAttribute('data-src');if(src){elem.removeAttribute('data-defer-load');elem.removeAttribute('data-src');elem.src=src}}},{});$('[data-defer-load]').each(function(){observer.observe(this)})}else{$('[data-defer-load]').each(function(){var elem=this;var src=elem.getAttribute('data-src');if(src){elem.removeAttribute('data-defer-load');elem.removeAttribute('data-src');elem.src=src}})}})();(function(){setTimeout(function(){$('html').css('scroll-behavior','smooth')},500)})()});/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma=function(){return{x:0,y:0}},na=ma(),oa=ma(),pa=ma(),qa={},ra=0,sa={},ta=ma(),ua=0,va=!0,wa=[],xa={},ya=!1,za=function(a,b){e.extend(f,b.publicMethods),wa.push(a)},Aa=function(a){var b=ac();return a>b-1?a-b:a<0?b+a:a},Ba={},Ca=function(a,b){return Ba[a]||(Ba[a]=[]),Ba[a].push(b)},Da=function(a){var b=Ba[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Ea=function(){return(new Date).getTime()},Fa=function(a){ja=a,f.bg.style.opacity=a*i.bgOpacity},Ga=function(a,b,c,d,e){(!ya||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ha=function(a){ea&&(a&&(s>f.currItem.fitRatio?ya||(mc(f.currItem,!1,!0),ya=!0):ya&&(mc(f.currItem),ya=!1)),Ga(ea,pa.x,pa.y,s))},Ia=function(a){a.container&&Ga(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ja=function(a,b){b[E]=u+a+"px, 0px"+v},Ka=function(a,b){if(!i.loop&&b){var c=m+(ta.x*ra-a)/ta.x,d=Math.round(a-tb.x);(c<0&&d>0||c>=ac()-1&&d<0)&&(a=tb.x+d*i.mainScrollEndFriction)}tb.x=a,Ja(a,n)},La=function(a,b){var c=ub[a]-sa[a];return oa[a]+na[a]+c-c*(b/t)},Ma=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Na=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Oa=null,Pa=function(){Oa&&(e.unbind(document,"mousemove",Pa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Da("mouseUsed")),Oa=setTimeout(function(){Oa=null},100)},Qa=function(){e.bind(document,"keydown",f),N.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Pa),e.bind(window,"resize scroll orientationchange",f),Da("bindEvents")},Ra=function(){e.unbind(window,"resize scroll orientationchange",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Pa),N.transform&&e.unbind(f.scrollWrap,"click",f),V&&e.unbind(window,p,f),clearTimeout(O),Da("unbindEvents")},Sa=function(a,b){var c=ic(f.currItem,qa,a);return b&&(da=c),c},Ta=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ua=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Va=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=La(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Wa=function(){if(E){var b=N.perspective&&!G;return u="translate"+(b?"3d(":"("),void(v=N.perspective?", 0px)":")")}E="left",e.addClass(a,"pswp--ie"),Ja=function(a,b){b.left=a+"px"},Ia=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ha=function(){if(ea){var a=ea,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=pa.x+"px",a.top=pa.y+"px"}}},Xa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Ya=function(a){a&&(Y||X||fa||T)&&(a.preventDefault(),a.stopPropagation())},Za=function(){f.setScrollOffset(0,e.getScrollY())},$a={},_a=0,ab=function(a){$a[a]&&($a[a].raf&&I($a[a].raf),_a--,delete $a[a])},bb=function(a){$a[a]&&ab(a),$a[a]||(_a++,$a[a]={})},cb=function(){for(var a in $a)$a.hasOwnProperty(a)&&ab(a)},db=function(a,b,c,d,e,f,g){var h,i=Ea();bb(a);var j=function(){if($a[a]){if(h=Ea()-i,h>=d)return ab(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),$a[a].raf=H(j)}};j()},eb={shout:Da,listen:Ca,viewportSize:qa,options:i,isMainScrollAnimating:function(){return fa},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return V},isZooming:function(){return aa},setScrollOffset:function(a,b){sa.x=a,M=sa.y=b,Da("updateScrollOffset",sa)},applyZoomPan:function(a,b,c,d){pa.x=b,pa.y=c,s=a,Ha(d)},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",Wa(),r={resize:f.updateSize,orientationchange:function(){clearTimeout(O),O=setTimeout(function(){qa.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:Za,keydown:Xa,click:Ya};var d=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<wa.length;c++)f["init"+wa[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Da("firstUpdate"),m=m||i.index||0,(isNaN(m)||m<0||m>=ac())&&(m=0),f.currItem=_b(m),(N.isOldIOSPhone||N.isOldAndroid)&&(va=!1),a.setAttribute("aria-hidden","false"),i.modal&&(va?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Da("initialLayout"),M=K=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=G?"pswp--touch":"pswp--notouch",l+=N.animationName?" pswp--css_animation":"",l+=N.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ua=null,c=0;c<h;c++)Ja((c+o)*ta.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Ca("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Qa()}),f.setContent(y[1],m),f.updateCurrItem(),Da("afterInit"),va||(w=setInterval(function(){_a||V||aa||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Da("close"),Ra(),cc(f.currItem,null,!0,f.destroy))},destroy:function(){Da("destroy"),Xb&&clearTimeout(Xb),a.setAttribute("aria-hidden","true"),a.className=J,w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),zb(),cb(),Ba=null},panTo:function(a,b,c){c||(a>da.min.x?a=da.min.x:a<da.max.x&&(a=da.max.x),b>da.min.y?b=da.min.y:b<da.max.y&&(b=da.max.y)),pa.x=a,pa.y=b,Ha()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=Aa(a);var b=a-m;ua=b,m=a,f.currItem=_b(m),ra-=b,Ka(ta.x*ra),cb(),fa=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Da("beforeChange",0),y[1].el.children.length){var b=y[1].el.children[0];ea=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else ea=null;da=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,pa.x=da.center.x,pa.y=da.center.y,a&&Da("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;a<h;a++)y[a].item&&(y[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ua){var b,c=Math.abs(ua);if(!(a&&c<2)){f.currItem=_b(m),ya=!1,Da("beforeChange",ua),c>=h&&(o+=ua+(ua>0?-h:h),c=h);for(var d=0;d<c;d++)ua>0?(b=y.shift(),y[h-1]=b,o++,Ja((o+2)*ta.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Ja(o*ta.x,b.el.style),f.setContent(b,m+c-d-1-1));if(ea&&1===Math.abs(ua)){var e=_b(z);e.initialZoomLevel!==s&&(ic(e,qa),mc(e),Ia(e))}ua=0,f.updateCurrZoomItem(),z=m,Da("afterChange")}}},updateSize:function(b){if(!va&&i.modal){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&xa.x===window.innerWidth&&xa.y===window.innerHeight)return;xa.x=window.innerWidth,xa.y=window.innerHeight,a.style.height=xa.y+"px"}if(qa.x=f.scrollWrap.clientWidth,qa.y=f.scrollWrap.clientHeight,Za(),ta.x=qa.x+Math.round(qa.x*i.spacing),ta.y=qa.y,Ka(ta.x*ra),Da("beforeResize"),void 0!==o){for(var d,g,j,k=0;k<h;k++)d=y[k],Ja((k+o)*ta.x,d.el.style),j=m+k-1,i.loop&&ac()>2&&(j=Aa(j)),g=_b(j),g&&(x||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&j>=0&&f.setContent(d,j),g&&g.container&&(ic(g,qa),mc(g),Ia(g));x=!1}t=s=f.currItem.initialZoomLevel,da=f.currItem.bounds,da&&(pa.x=da.center.x,pa.y=da.center.y,Ha(!0)),Da("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,ub.x=Math.abs(b.x)-pa.x,ub.y=Math.abs(b.y)-pa.y,Ma(oa,pa));var g=Sa(a,!1),h={};Va("x",g,h,a),Va("y",g,h,a);var i=s,j={x:pa.x,y:pa.y};Na(h);var k=function(b){1===b?(s=a,pa.x=h.x,pa.y=h.y):(s=(a-i)*b+i,pa.x=(h.x-j.x)*b+j.x,pa.y=(h.y-j.y)*b+j.y),f&&f(b),Ha(1===b)};c?db("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},fb=30,gb=10,hb={},ib={},jb={},kb={},lb={},mb=[],nb={},ob=[],pb={},qb=0,rb=ma(),sb=0,tb=ma(),ub=ma(),vb=ma(),wb=function(a,b){return a.x===b.x&&a.y===b.y},xb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},yb=function(a,b){return pb.x=Math.abs(a.x-b.x),pb.y=Math.abs(a.y-b.y),Math.sqrt(pb.x*pb.x+pb.y*pb.y)},zb=function(){Z&&(I(Z),Z=null)},Ab=function(){V&&(Z=H(Ab),Qb())},Bb=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Cb=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:Cb(a.parentNode,b)))},Db={},Eb=function(a,b){return Db.prevent=!Cb(a.target,i.isClickableElement),Da("preventDragEvent",a,b,Db),Db.prevent},Fb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Gb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Hb=function(a,b,c){if(a-Q>50){var d=ob.length>2?ob.shift():{};d.x=b,d.y=c,ob.push(d),Q=a}},Ib=function(){var a=pa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(qa.y/2))},Jb={},Kb={},Lb=[],Mb=function(a){for(;Lb.length>0;)Lb.pop();return F?(la=0,mb.forEach(function(a){0===la?Lb[0]=a:1===la&&(Lb[1]=a),la++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Lb[0]=Fb(a.touches[0],Jb),a.touches.length>1&&(Lb[1]=Fb(a.touches[1],Kb))):(Jb.x=a.pageX,Jb.y=a.pageY,Jb.id="",Lb[0]=Jb),Lb},Nb=function(a,b){var c,d,e,g,h=0,j=pa[a]+b[a],k=b[a]>0,l=tb.x+b.x,m=tb.x-nb.x;return c=j>da.min[a]||j<da.max[a]?i.panEndFriction:1,j=pa[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(ea?"h"!==ga||"x"!==a||X||(k?(j>da.min[a]&&(c=i.panEndFriction,h=da.min[a]-j,d=da.min[a]-oa[a]),(d<=0||m<0)&&ac()>1?(g=l,m<0&&l>nb.x&&(g=nb.x)):da.min.x!==da.max.x&&(e=j)):(j<da.max[a]&&(c=i.panEndFriction,h=j-da.max[a],d=oa[a]-da.max[a]),(d<=0||m>0)&&ac()>1?(g=l,m>0&&l<nb.x&&(g=nb.x)):da.min.x!==da.max.x&&(e=j))):g=l,"x"!==a)?void(fa||$||s>f.currItem.fitRatio&&(pa[a]+=b[a]*c)):(void 0!==g&&(Ka(g,!0),$=g!==nb.x),da.min.x!==da.max.x&&(void 0!==e?pa.x=e:$||(pa.x+=b.x*c)),void 0!==g)},Ob=function(a){if(!("mousedown"===a.type&&a.button>0)){if($b)return void a.preventDefault();if(!U||"mousedown"!==a.type){if(Eb(a,!0)&&a.preventDefault(),Da("pointerDown"),F){var b=e.arraySearch(mb,a.pointerId,"id");b<0&&(b=mb.length),mb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Mb(a),d=c.length;_=null,cb(),V&&1!==d||(V=ha=!0,e.bind(window,p,f),S=ka=ia=T=$=Y=W=X=!1,ga=null,Da("firstTouchStart",c),Ma(oa,pa),na.x=na.y=0,Ma(kb,c[0]),Ma(lb,kb),nb.x=ta.x*ra,ob=[{x:kb.x,y:kb.y}],Q=P=Ea(),Sa(s,!0),zb(),Ab()),!aa&&d>1&&!fa&&!$&&(t=s,X=!1,aa=W=!0,na.y=na.x=0,Ma(oa,pa),Ma(hb,c[0]),Ma(ib,c[1]),Gb(hb,ib,vb),ub.x=Math.abs(vb.x)-pa.x,ub.y=Math.abs(vb.y)-pa.y,ba=ca=yb(hb,ib))}}},Pb=function(a){if(a.preventDefault(),F){var b=e.arraySearch(mb,a.pointerId,"id");if(b>-1){var c=mb[b];c.x=a.pageX,c.y=a.pageY}}if(V){var d=Mb(a);if(ga||Y||aa)_=d;else if(tb.x!==ta.x*ra)ga="h";else{var f=Math.abs(d[0].x-kb.x)-Math.abs(d[0].y-kb.y);Math.abs(f)>=gb&&(ga=f>0?"h":"v",_=d)}}},Qb=function(){if(_){var a=_.length;if(0!==a)if(Ma(hb,_[0]),jb.x=hb.x-kb.x,jb.y=hb.y-kb.y,aa&&a>1){if(kb.x=hb.x,kb.y=hb.y,!jb.x&&!jb.y&&wb(_[1],ib))return;Ma(ib,_[1]),X||(X=!0,Da("zoomGestureStarted"));var b=yb(hb,ib),c=Vb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ka=!0);var d=1,e=Ta(),g=Ua();if(c<e)if(i.pinchToClose&&!ka&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Fa(j),Da("onPinchClose",j),ia=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),ba=b,Gb(hb,ib,rb),na.x+=rb.x-vb.x,na.y+=rb.y-vb.y,Ma(vb,rb),pa.x=La("x",c),pa.y=La("y",c),S=c>s,s=c,Ha()}else{if(!ga)return;if(ha&&(ha=!1,Math.abs(jb.x)>=gb&&(jb.x-=_[0].x-lb.x),Math.abs(jb.y)>=gb&&(jb.y-=_[0].y-lb.y)),kb.x=hb.x,kb.y=hb.y,0===jb.x&&0===jb.y)return;if("v"===ga&&i.closeOnVerticalDrag&&!Bb()){na.y+=jb.y,pa.y+=jb.y;var k=Ib();return T=!0,Da("onVerticalDrag",k),Fa(k),void Ha()}Hb(Ea(),hb.x,hb.y),Y=!0,da=f.currItem.bounds;var l=Nb("x",jb);l||(Nb("y",jb),Na(pa),Ha())}}},Rb=function(a){if(N.isOldAndroid){if(U&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(U),U=setTimeout(function(){U=0},600))}Da("pointerUp"),Eb(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(mb,a.pointerId,"id");if(c>-1)if(b=mb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Mb(a),j=h.length;if("mouseup"===a.type&&(j=0),2===j)return _=null,!0;1===j&&Ma(lb,h[0]),0!==j||ga||fa||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Da("touchRelease",a,b));var k=-1;if(0===j&&(V=!1,e.unbind(window,p,f),zb(),aa?k=0:sb!==-1&&(k=Ea()-sb)),sb=1===j?Ea():-1,g=k!==-1&&k<150?"zoom":"swipe",aa&&j<2&&(aa=!1,1===j&&(g="zoomPointerUp"),Da("zoomGestureEnded")),_=null,Y||X||fa||T)if(cb(),R||(R=Sb()),R.calculateSwipeSpeed("x"),T){var l=Ib();if(l<i.verticalDragRange)f.close();else{var m=pa.y,n=ja;db("verticalDrag",0,1,300,e.easing.cubic.out,function(a){pa.y=(f.currItem.initialPosition.y-m)*a+m,Fa((1-n)*a+n),Ha()}),Da("onVerticalDrag",1)}}else{if(($||fa)&&0===j){var o=Ub(g,R);if(o)return;g="zoomPointerUp"}if(!fa)return"swipe"!==g?void Wb():void(!$&&s>f.currItem.fitRatio&&Tb(R))}},Sb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){ob.length>1?(a=Ea()-Q+50,b=ob[ob.length-2][d]):(a=Ea()-P,b=lb[d]),c.lastFlickOffset[d]=kb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(pa[a]>da.min[a]?c.backAnimDestination[a]=da.min[a]:pa[a]<da.max[a]&&(c.backAnimDestination[a]=da.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,db("bounceZoomPan"+a,pa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){pa[a]=b,Ha()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,pa[a]+=c.distanceOffset[a])},panAnimLoop:function(){if($a.zoomPan&&($a.zoomPan.raf=H(c.panAnimLoop),c.now=Ea(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ha(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return pa.x=Math.round(pa.x),pa.y=Math.round(pa.y),Ha(),void ab("zoomPan")}};return c},Tb=function(a){return a.calculateSwipeSpeed("y"),da=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(bb("zoomPan"),a.lastNow=Ea(),void a.panAnimLoop())},Ub=function(a,b){var c;fa||(qb=m);var d;if("swipe"===a){var g=kb.x-lb.x,h=b.lastFlickDist.x<10;g>fb&&(h||b.lastFlickOffset.x>20)?d=-1:g<-fb&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,m<0?(m=i.loop?ac()-1:0,j=!0):m>=ac()&&(m=i.loop?0:ac()-1,j=!0),j&&!i.loop||(ua+=d,ra-=d,c=!0));var k,l=ta.x*ra,n=Math.abs(l-tb.x);return c||l>tb.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,qb===m&&(c=!1),fa=!0,Da("mainScrollAnimStart"),db("mainScroll",tb.x,l,k,e.easing.cubic.out,Ka,function(){cb(),fa=!1,qb=-1,(c||qb!==m)&&f.updateCurrItem(),Da("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Vb=function(a){return 1/ca*a*t},Wb=function(){var a=s,b=Ta(),c=Ua();s<b?a=b:s>c&&(a=c);var d,g=1,h=ja;return ia&&!S&&!ka&&s<b?(f.close(),!0):(ia&&(d=function(a){Fa((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};za("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):N.touch?(a("touch","start","move","end","cancel"),G=!0):a("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,r[A]=Ob,r[B]=Pb,r[C]=Rb,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),G||(i.allowPanToNext=!1)}}});var Xb,Yb,Zb,$b,_b,ac,bc,cc=function(b,c,d,g){Xb&&clearTimeout(Xb),$b=!0,Zb=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){ab("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Fa(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Da("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),$b=!1};if(!j||!h||void 0===h.x)return Da("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,Ma(pa,b.initialPosition),Ha(),a.style.opacity=d?0:1,Fa(1),void(j?setTimeout(function(){k()},j):k());var n=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,pa.x=h.x,pa.y=h.y-K,f[g?"template":"bg"].style.opacity=.001,Ha()),bb("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Xb=setTimeout(function(){if(Da("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:pa.x,y:pa.y},l=s,m=ja,n=function(b){1===b?(s=f,pa.x=h.x,pa.y=h.y-M):(s=(f-l)*b+l,pa.x=(h.x-i.x)*b+i.x,pa.y=(h.y-M-i.y)*b+i.y),Ha(),g?a.style.opacity=1-b:Fa(m-b*m)};c?db("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Xb=setTimeout(k,j+20))}else s=b.initialZoomLevel,Ma(pa,b.initialPosition),Ha(),Fa(1),g?a.style.opacity=1:Fa(1),Xb=setTimeout(k,j+20)},d?25:90)};n()},dc={},ec=[],fc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yb.length}},gc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},hc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((dc.x-b)/2),d.center.y=Math.round((dc.y-c)/2)+a.vGap.top,d.max.x=b>dc.x?Math.round(dc.x-b):d.center.x,d.max.y=c>dc.y?Math.round(dc.y-c)+a.vGap.top:d.center.y,d.min.x=b>dc.x?0:d.center.x,d.min.y=c>dc.y?a.vGap.top:d.center.y},ic=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Da("parseVerticalMargin",a)),dc.x=b.x,dc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=dc.x/a.w,f=dc.y/a.h;a.fitRatio=e<f?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=gc())}if(!c)return;return hc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=gc(),a.initialPosition=a.bounds.center,a.bounds},jc=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,mc(b,d,b===f.currItem&&ya),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},kc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},lc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0},mc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},nc=function(){if(ec.length){for(var a,b=0;b<ec.length;b++)a=ec[b],a.holder.index===a.index&&jc(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);ec=[]}};za("Controller",{publicMethods:{lazyLoadItem:function(a){a=Aa(a);var b=_b(a);b&&(!b.loaded&&!b.loading||x)&&(Da("gettingData",a,b),b.src&&kc(b))},initController:function(){e.extend(i,fc,!0),f.items=Yb=c,_b=f.getItemAt,ac=i.getNumItemsFn,bc=i.loop,ac()<3&&(i.loop=!1),Ca("beforeChange",function(a){var b,c=i.preload,d=null===a||a>=0,e=Math.min(c[0],ac()),g=Math.min(c[1],ac());for(b=1;b<=(d?g:e);b++)f.lazyLoadItem(m+b);for(b=1;b<=(d?e:g);b++)f.lazyLoadItem(m-b)}),Ca("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Ca("mainScrollAnimComplete",nc),Ca("initialZoomInEnd",nc),Ca("destroy",function(){for(var a,b=0;b<Yb.length;b++)a=Yb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);ec=null})},getItemAt:function(a){return a>=0&&(void 0!==Yb[a]&&Yb[a])},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=Aa(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Da("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),lc(g),ic(g,qa),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,mc(g,d),jc(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(a&&a.index===b){if(lc(c,!0))return c.loadComplete=c.img=null,ic(c,qa),Ia(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!$b&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):N.transform&&(fa||$b)?ec.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):jc(b,c,h,c.img,fa||$b,!0)}c.loadComplete=null,c.img=null,Da("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),mc(g,l),h.appendChild(l),g.placeholder=l}g.loading||kc(g),f.allowProgressiveImg()&&(!Zb&&N.transform?ec.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):jc(b,g,h,g.img,!0,!0))}Zb||b!==m?Ia(g):(ea=h.style,cc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var oc,pc={},qc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};za("Tap",{publicMethods:{initTap:function(){Ca("firstTouchStart",f.onTapStart),Ca("touchRelease",f.onTapRelease),Ca("destroy",function(){pc={},oc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(oc),oc=null)},onTapRelease:function(a,b){if(b&&!Y&&!W&&!_a){var c=b;if(oc&&(clearTimeout(oc),oc=null,xb(c,pc)))return void Da("doubleTap",c);if("mouse"===b.type)return void qc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void qc(a,b);Ma(pc,c),oc=setTimeout(function(){qc(a,b),oc=null},300)}}}});var rc;za("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(G?Ca("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){rc={};var c="wheel mousewheel DOMMouseScroll";Ca("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Ca("unbindEvents",function(){rc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),s<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Ca("resize",g),Ca("afterChange",g),Ca("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Ca("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||_a||V?a.preventDefault():E&&Math.abs(a.deltaY)>2&&(l=!0,f.close())),!0;if(a.stopPropagation(),rc.x=0,"deltaX"in a)1===a.deltaMode?(rc.x=18*a.deltaX,rc.y=18*a.deltaY):(rc.x=a.deltaX,rc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(rc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?rc.y=-.16*a.wheelDeltaY:rc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;rc.y=a.detail}Sa(s,!0);var b=pa.x-rc.x,c=pa.y-rc.y;(i.modal||b<=da.min.x&&b>=da.max.x&&c<=da.min.y&&c>=da.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:qa.x/2+sa.x,y:qa.y/2+sa.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec={history:!0,galleryUID:1},Fc=function(){return Cc.hash.substring(1)},Gc=function(){sc&&clearTimeout(sc),uc&&clearTimeout(uc)},Hc=function(){var a=Fc(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Yb.length;c++)if(Yb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Ic=function(){if(uc&&clearTimeout(uc),_a||V)return void(uc=setTimeout(Ic,500));vc?clearTimeout(tc):vc=!0;var a=m+1,b=_b(m);b.hasOwnProperty("pid")&&(a=b.pid);var c=yc+"&gid="+i.galleryUID+"&pid="+a;zc||Cc.hash.indexOf(c)===-1&&(Bc=!0);var d=Cc.href.split("#")[0]+"#"+c;Dc?"#"+c!==window.location.hash&&history[zc?"replaceState":"pushState"]("",document.title,d):zc?Cc.replace(d):Cc.hash=c,zc=!0,tc=setTimeout(function(){vc=!1},60)};za("History",{publicMethods:{initHistory:function(){if(e.extend(i,Ec,!0),i.history){Cc=window.location,Bc=!1,Ac=!1,zc=!1,yc=Fc(),Dc="pushState"in history,yc.indexOf("gid=")>-1&&(yc=yc.split("&gid=")[0],yc=yc.split("?gid=")[0]),Ca("afterChange",f.updateURL),Ca("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){xc=!0,Ac||(Bc?history.back():yc?Cc.hash=yc:Dc?history.pushState("",document.title,Cc.pathname+Cc.search):Cc.hash=""),Gc()};Ca("unbindEvents",function(){l&&a()}),Ca("destroy",function(){xc||a()}),Ca("firstUpdate",function(){m=Hc().pid});var b=yc.indexOf("pid=");b>-1&&(yc=yc.substring(0,b),"&"===yc.slice(-1)&&(yc=yc.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Fc()===yc?(Ac=!0,void f.close()):void(vc||(wc=!0,f.goTo(Hc().pid),wc=!1))},updateURL:function(){Gc(),wc||(zc?sc=setTimeout(Ic,800):Ic())}}}),e.extend(f,eb)};return a});/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),!!c.href&&(!!c.hasAttribute("download")||(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1))},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){J++,2===J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&a<.95?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&b<.9?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;g<f;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a});(function(){var tmpRequire=this.require;this.require=function(module){return(module==="jquery")?$:(void 0)};this.exports={};this.module={exports:{}};var __assign=(this&&this.__assign)||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))
t[p]=s[p]}
return t};return __assign.apply(this,arguments)};var __spreadArray=(this&&this.__spreadArray)||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}
return to.concat(ar||Array.prototype.slice.call(from))};var __importDefault=(this&&this.__importDefault)||function(mod){return(mod&&mod.__esModule)?mod:{"default":mod}};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","jquery"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GalleryLib=exports.isVideoFile=void 0;var jquery_1=__importDefault(require("jquery"));function buildAnimName(val){return'wb-anim-'+val.effect+(val.direction?('-'+val.direction):'')}
function buildAnimCss(val){if(!val)
return{animation:'none'};return{animation:buildAnimName(val)+' '+val.duration+'s'+' '+val.timing+' '+val.delay+'s','animation-iteration-count':val.loop?'infinite':1,}}
var config={thumbWidth:290,thumbHeight:290,minWidth:320,minHeight:240};var win=window;var GoogleMapsApi=(function(){function GoogleMapsApi(){}
GoogleMapsApi.configure=function(apiKey,locale){GoogleMapsApi.apiKey=apiKey;GoogleMapsApi.locale=locale};GoogleMapsApi.addListener=function(callback){if(win['GoogleMapsApi_ScriptReady']){callback()}else{if(!win['GoogleMapsApi_Listeners'])
win['GoogleMapsApi_Listeners']=[];win['GoogleMapsApi_Listeners'].push(callback)}
if(!win['GoogleMapsApi_ScriptLoaded']){win['GoogleMapsApi_ScriptLoaded']=!0;win['GoogleMapsApi_clb_fn']=function(){return win['GoogleMapsApi_ScriptReady']=!0};var region=(GoogleMapsApi.locale.indexOf('_')>=0)?GoogleMapsApi.locale.split('_')[1].toUpperCase():null;jquery_1.default.getScript("//maps.googleapis.com/maps/api/js?v=3.exp&key="+GoogleMapsApi.apiKey+"&sensor=false"+(region?("&region="+region+"&language="+GoogleMapsApi.locale):'')+"&callback=GoogleMapsApi_clb_fn&libraries=places");var compleFunc_1=function(){if(!win['GoogleMapsApi_ScriptReady']){setTimeout(compleFunc_1,100)}else if(win['GoogleMapsApi_Listeners']){for(var _i=0,_a=win['GoogleMapsApi_Listeners'];_i<_a.length;_i++){var callback_1=_a[_i];callback_1()}}};compleFunc_1()}};GoogleMapsApi.apiKey='';GoogleMapsApi.locale='en_US';return GoogleMapsApi}());var isVideoFile=function(src){var tsParts=src.split("?ts=");var extParts=tsParts[0].split(".");var ext=(extParts.length>1)?extParts[(extParts.length-1)]:"";if("mp4,mpeg,avi,flv,mkv,mov".indexOf(ext.toLowerCase())>=0){return!0}
return!1};exports.isVideoFile=isVideoFile;var GalleryLib=(function(){function GalleryLib(data){var _this_1=this;this.type="thumbs";this.slideshowInterval=5;this.slideshowSpeed=400;this.images=[];this.imageIndex=0;this.slideshowTimer=0;this.displayedImage=null;this.loadingImage=null;this.listImgCont=null;this.thumbImgCont=null;this.fullThumbWidth=0;this.fullThumbHeight=0;this.bgColor="";this.padding=0;this.imageCover=!1;this.disablePopup=!1;this.slideOpacity=100;this.thumbWidth=config.thumbWidth;this.thumbHeight=config.thumbHeight;this.thumbAlign="left";this.thumbPadding=6;this.thumbAnim=null;this.thumbShadow=null;this.showPictureCaption="always";this.captionIncludeDescription=!1;this.imageElems={};this.lightBox=null;this.initialRender=!1;this.lightBoxDisplayed=!1;this.invalid=!1;this.resizeEventHandler=null;this.transitionendEventHandler=null;this.map=null;this.mapMarkers=[];this.mapInfowindows=[];this.mapDiv=null;this.pause=!1;this.delayedUpdateTimeout=0;this.metaUpdateTimeout=0;GalleryLib.galleryLibList.push(this);this.elem=(0,jquery_1.default)('<div>').addClass('wb_gallery');this.id=data.id?data.id:'wb-gallery-id';this.height=data.height?data.height:'';this.border=data.border?data.border:{border:'5px none #FFFFFF'};this.thumbWidth=(typeof data.thumbWidth==='number'&&data.thumbWidth>0)?data.thumbWidth:config.thumbWidth;this.thumbHeight=(typeof data.thumbHeight==='number'&&data.thumbHeight>0)?data.thumbHeight:config.thumbHeight;this.thumbAlign=data.thumbAlign?data.thumbAlign:this.thumbAlign;this.thumbPadding=(data.thumbPadding||data.thumbPadding===0)?data.thumbPadding:this.thumbPadding;if(data.thumbAnim)
this.thumbAnim=data.thumbAnim;if(data.thumbShadow)
this.thumbShadow=data.thumbShadow;this.padding=(data.padding||data.padding===0)?data.padding:0;this.type=data.type?data.type:this.type;this.slideshowInterval=(typeof data.interval==='number')?data.interval:10;this.imageCover=(typeof data.imageCover==='boolean')?data.imageCover:this.imageCover;this.disablePopup=(typeof data.disablePopup==='boolean')?data.disablePopup:this.disablePopup;this.slideOpacity=(typeof data.slideOpacity==='number')?data.slideOpacity:this.slideOpacity;this.slideshowSpeed=(typeof data.speed==='number')?data.speed:400;this.setBgColor(data.bgColor?data.bgColor:'transparent');this.showPictureCaption=(typeof data.showPictureCaption==='string')?data.showPictureCaption:this.showPictureCaption;this.captionIncludeDescription=!!data.captionIncludeDescription;if(data.captionBackground)
this.setCaptionBackground(data.captionBackground);if(data.captionPosition)
this.setCaptionPosition(data.captionPosition);if(data.captionTitleStyle)
this.setCaptionTitleStyle(data.captionTitleStyle);if(data.captionDescriptionStyle)
this.setCaptionDescriptionStyle(data.captionDescriptionStyle);if(data.controlsArrow)
this.setControlsArrow(data.controlsArrow);if(data.controlsArrowSize)
this.setControlsArrowSize(data.controlsArrowSize);if(data.controlsArrowStyle)
this.setControlsArrowStyle(data.controlsArrowStyle);this.mapTypeId=data.mapTypeId||null;this.markerIconTypeId=data.markerIconTypeId||null;this.zoom=data.zoom||16;this.mapCenter=data.mapCenter||null;this.key=data.key||null;this.theme=data.theme||'default';this.color=data.color||'#eeeeee';this.showSatellite=data.showSatellite||!1;this.showZoom=data.showZoom||!1;this.showStreetView=data.showStreetView||!1;this.showFullscreen=data.showFullscreen||!1;this.allowDragging=data.allowDragging||!1;this.showRoads=data.showRoads||!1;this.showLandmarks=data.showLandmarks||!1;this.showLabels=data.showLabels||!1;this.locale=data.locale||'en_US';if(this.key)
GoogleMapsApi.configure(this.key,this.locale);if(!('wb_builder' in window)){this.initialRender=!0}
this.setImages((data.images&&data.images.length)?data.images:[]);if(data.trackResize){this.resizeEventHandler=function(){return _this_1.handleResize()};(0,jquery_1.default)(window).on('resize',this.resizeEventHandler)}
this.transitionendEventHandler=function(e){if((0,jquery_1.default)(e.target).is(".wb-viewport-block"))
_this_1.handleResize();};(0,jquery_1.default)(window).on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',this.transitionendEventHandler);(0,jquery_1.default)(document).on('mousemove',function(e){if((0,jquery_1.default)(e.target).attr('data-plugin')=='Gallery'||(0,jquery_1.default)(e.target).parents('div[data-plugin="Gallery"]').length){_this_1.pause=!0;if(_this_1.currentType=='image'){clearInterval(_this_1.slideshowTimer);_this_1.slideshowTimer=0}}else{_this_1.pause=!1;if(_this_1.currentType=='image'){_this_1.reset()}}})}
GalleryLib.getGalleryLibList=function(){return GalleryLib.galleryLibList};GalleryLib.prototype.setVisible=function(visible){this.elem.css('display',visible?'block':'none')};GalleryLib.prototype.appendTo=function(container){(0,jquery_1.default)(container).append(this.elem);this.handleResize()};GalleryLib.prototype.destroy=function(){var _a;if(this.slideshowTimer)
clearInterval(this.slideshowTimer);if(this.type==="masonry"&&this.listImgCont)
this.listImgCont.masonry("destroy");(_a=this.lightBox)===null||_a===void 0?void 0:_a.destroy();if(this.resizeEventHandler)(0,jquery_1.default)(window).off('resize',this.resizeEventHandler);if(this.transitionendEventHandler)(0,jquery_1.default)(window).off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',this.transitionendEventHandler);this.elem.remove()};GalleryLib.prototype.reset=function(callback){var _this_1=this;if(this.slideshowTimer)
clearInterval(this.slideshowTimer);if(this.slideshowInterval&&this.images.length>1){this.slideshowTimer=setInterval(function(){return _this_1.slideshowNext(callback)},this.slideshowInterval*1000)}else this.slideshowTimer=0};GalleryLib.prototype.invalidate=function(){var _this_1=this;if(!this.invalid){this.invalid=!0;if("requestAnimationFrame" in window)
requestAnimationFrame(function(){return _this_1.revalidate()});else setTimeout(function(){return _this_1.revalidate()},0)}
return this};GalleryLib.prototype.revalidate=function(){this.invalid=!1;this.render();return this};GalleryLib.prototype.applyAnimation=function(img,i,layoutReady){img.css(buildAnimCss());if(this.thumbAnim&&this.thumbAnim.normal){var anim_1=this.thumbAnim.normal;img.addClass('wb-anim-entry').removeClass('wb-anim-entry-on');var func=function(){return setTimeout(function(){img.css(buildAnimCss(__assign(__assign({},anim_1),{delay:0})));setTimeout(function(){return img.addClass('wb-anim-entry-on').removeClass('wb-anim-entry')},40)},(anim_1.delay*1000*i))};if(layoutReady)
layoutReady.done(func);else func()}
if(this.thumbAnim&&this.thumbAnim.hover){var anim=this.thumbAnim.hover;var hoverOff_1=buildAnimCss();var hoverOn_1=buildAnimCss(anim);img.addClass(buildAnimName(anim)).off('mouseover').on('mouseover',function(){return img.css(hoverOn_1)}).off('mouseout').on('mouseout',function(){return img.css(hoverOff_1)});if(anim.loop)
img.addClass('loop');}};GalleryLib.prototype.render=function(){if(this.slideshowTimer)
clearInterval(this.slideshowTimer);this.slideshowTimer=0;this.listImgCont=null;this.displayedImage=null;this.loadingImage=null;this.elem.empty();if(this.images.length==0)
return;if(!this._initialHeight)
this._initialHeight=this.elem.parent().get(0).style.height;this.elem.parent().css('height',this._initialHeight);switch(this.type){case "slideshow":this.renderSlideshow();break;case "list":this.renderList();break;case "masonry":this.renderMasonry();break;case "map":this.renderMap();break;default:this.renderThumbs();break}};GalleryLib.prototype.getThemeDefaultStyle=function(){return[]};GalleryLib.prototype.getThemeLightStyle=function(color){return[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":(color?color:'#cccccc')},{"visibility":"on"}]}]};GalleryLib.prototype.getThemeDarkStyle=function(color){return[{"featureType":"all","elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#000000"},{"lightness":40}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#000000"},{"lightness":16}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":17},{"weight":1.2}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":21}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":16}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":19}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":(color?color:'#333333')},{"lightness":17}]}]};GalleryLib.prototype.getThemeMonochromeStyle=function(color){return[{"featureType":"all","elementType":"geometry","stylers":[{"color":(color?color:'#3e44b5')}]},{"featureType":"all","elementType":"labels.text.fill","stylers":[{"gamma":0.01},{"lightness":20}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"saturation":-31},{"lightness":-33},{"weight":2},{"gamma":0.8}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"lightness":30},{"saturation":30}]},{"featureType":"poi","elementType":"geometry","stylers":[{"saturation":20}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"lightness":20},{"saturation":-20}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":10},{"saturation":-30}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"saturation":25},{"lightness":25}]},{"featureType":"water","elementType":"all","stylers":[{"lightness":-20}]}]};GalleryLib.prototype.getThemeStyle=function(theme,color){if(theme==='light'){return this.getThemeLightStyle(color)}else if(theme==='dark'){return this.getThemeDarkStyle(color)}else if(theme==='monochrome'){return this.getThemeMonochromeStyle(color)}
return this.getThemeDefaultStyle()};GalleryLib.prototype.getStyles=function(){var styles=this.getThemeStyle(this.theme,this.color);var extraStyles=[{featureType:'road',stylers:[{visibility:(this.showRoads?'on':'off')}]},{featureType:'poi',stylers:[{visibility:(this.showLandmarks?'on':'off')}]},{elementType:'labels',stylers:[{visibility:(this.showLabels?'on':'off')}]}];return styles.concat(extraStyles)};GalleryLib.prototype.getLeftArrow=function(type,active){if(type===void 0){type=null}
if(active===void 0){active=!1}
var icon=(0,jquery_1.default)('<i class="fa fa-chevron-left"></i>');switch(type){case 'shevron':icon=(0,jquery_1.default)('<i class="fa fa-chevron-left"></i>');break;case 'shevron-circle':icon=(0,jquery_1.default)('<i class="fa fa-chevron-circle-left"></i>');break;case 'arrow':icon=(0,jquery_1.default)('<i class="fa fa-arrow-left"></i>');break;case 'arrow-circle':icon=(0,jquery_1.default)('<i class="fa fa-arrow-circle-left"></i>');break;case 'caret':icon=(0,jquery_1.default)('<i class="fa fa-caret-left"></i>');break;case 'circles':icon=(0,jquery_1.default)(active?'<i class="fa fa-circle"></i>':'<i class="fa fa-circle-o"></i>');break;case 'none':return null}
if(this.controlsArrowSize){icon.css('font-size',this.controlsArrowSize)}
return icon};GalleryLib.prototype.getRightArrow=function(type,active){if(type===void 0){type=null}
if(active===void 0){active=!1}
var icon=(0,jquery_1.default)('<i class="fa fa-chevron-right"></i>');switch(type){case 'shevron':icon=(0,jquery_1.default)('<i class="fa fa-chevron-right"></i>');break;case 'shevron-circle':icon=(0,jquery_1.default)('<i class="fa fa-chevron-circle-right"></i>');break;case 'arrow':icon=(0,jquery_1.default)('<i class="fa fa-arrow-right"></i>');break;case 'arrow-circle':icon=(0,jquery_1.default)('<i class="fa fa-arrow-circle-right"></i>');break;case 'caret':icon=(0,jquery_1.default)('<i class="fa fa-caret-right"></i>');break;case 'circles':icon=(0,jquery_1.default)(active?'<i class="fa fa-circle"></i>':'<i class="fa fa-circle-o"></i>');break;case 'none':return null}
if(this.controlsArrowSize){icon.css('font-size',this.controlsArrowSize)}
return icon};GalleryLib.prototype.renderThumbs=function(){this.elem.html('<div class="wb-thumbs-only" style="width: 100%; height: 100%; overflow: auto;"></div>');this.elem.css("text-align",this.thumbAlign);var elem=this.elem.children().first();for(var i=0,c=this.images.length;i<c;i++){if((0,exports.isVideoFile)(this.images[i].src)){continue}
var img=this.addImage(elem,this.images[i],i).wrp;this.applyAnimation(img,i)}
elem.children('.wb_thumb').css('padding',(this.thumbPadding/2)+'px');if(this.thumbShadow&&this.height==='auto'){this.elem.css('overflow','visible');this.elem.children('.wb-thumbs-only').css('overflow','visible');this.elem.parent('.wb_gallery').css('overflow','visible')}else{this.elem.css('overflow','');this.elem.parent('.wb_gallery').css('overflow','')}};GalleryLib.prototype.renderSlideshow=function(){var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
this.elem.html('<div class="gallery-slideshow">'+'<div class="gallery-slide-image" style="overflow: hidden;"></div>'+'</div>');var cont=this.elem.children().first();this.renderSlideshowControls(cont);this.listImgCont=cont.children(".gallery-slide-image");this.listImgCont.css('opacity',this.slideOpacity/100);this.reset();this.imageIndex=-1;this.slideshowNext()};GalleryLib.prototype.renderSlideshowControls=function(cont){var _this_1=this;var _a;var self=this;var toNormal=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_1.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.normal)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.normal.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.normal.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.normal.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.normal.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toHoverState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_1.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.hover)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.hover.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.hover.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.hover.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.hover.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toActiveState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_1.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.active)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.active.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.active.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.active.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.active.shadow.css['text-shadow']})}else $this.css('textShadow','')};if(this.controlsArrow==='circles'){cont.children('.gallery-slide-pagination').remove();var pageElem=(0,jquery_1.default)('<div class="gallery-slide-pagination"></div>');if(this.showPictureCaption!=='none'&&this.captionPosition==='center bottom')
pageElem.addClass('gallery-slide-pagination-top');else pageElem.addClass('gallery-slide-pagination-bottom');cont.append(pageElem);var _loop_1=function(i){var circleElem=(_a=this_1.getLeftArrow(this_1.controlsArrow,i===this_1.imageIndex))===null||_a===void 0?void 0:_a.clone().hover(toHoverState,function(){if(i===self.imageIndex)
toActiveState.apply(this);else toNormal.apply(this)}).click(function(){return _this_1.slideshowTo(i)});if(circleElem){(i===this_1.imageIndex?toActiveState:toNormal).apply(circleElem.get(0));pageElem.append(circleElem)}};var this_1=this;for(var i=0;i<this.getImages().length;i++){_loop_1(i)}}else{cont.children('.gallery-slide-left, .gallery-slide-right').remove();var larr=(0,jquery_1.default)('<div class="gallery-slide-left"></div>');cont.append(larr);var larrow=this.getLeftArrow(this.controlsArrow);if(larrow)
larr.append(larrow);var rarr=(0,jquery_1.default)('<div class="gallery-slide-right"></div>');cont.append(rarr);var rarrow=this.getRightArrow(this.controlsArrow);if(rarrow)
rarr.append(rarrow);larr.click(function(){return _this_1.slideshowPrev()});rarr.click(function(){return _this_1.slideshowNext()});larr.hover(toHoverState,toNormal);toNormal.apply(larr.get(0));rarr.hover(toHoverState,toNormal);toNormal.apply(rarr.get(0))}};GalleryLib.prototype.renderList=function(){var _this_1=this;var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
var h=this.elem.height();if(!h)
h=this.elem.parent().height();var tw=this.getThumbWidth();var th=this.getThumbHeight();var thumbcont=(0,jquery_1.default)("<div></div>");var callback=function(){var img=_this_1.imageElems[_this_1.imageIndex];if(!img.parentNode||!img.parentNode.parentNode||!img.parentNode.parentNode.parentNode)
return;(0,jquery_1.default)(img.parentNode.parentNode.parentNode).children(".tmb-selected").removeClass("tmb-selected");(0,jquery_1.default)(img.parentNode.parentNode).addClass("tmb-selected")};this.imageElems={};var _loop_2=function(i){var image=this_2.images[i];var img=this_2.addImage(thumbcont,image,i,!0).img;img.css({cursor:"pointer"});this_2.imageElems[i]=img.get(0);img.click(function(){if(!_this_1.listImgCont)
return;_this_1.imageIndex=_this_1.images.indexOf(image);_this_1.displayImage(_this_1.listImgCont,callback)});var par=img.parent().parent();if(i===this_2.imageIndex){par.addClass("tmb-selected");tw=this_2.getThumbWidth()+8;th=this_2.getThumbHeight()+8}};var this_2=this;for(var i=0;i<this.images.length;i++){_loop_2(i)}
var thumbs=thumbcont.children('.wb_thumb');thumbs.css('margin','0 '+(this.getThumbPadding()/2)+'px');(0,jquery_1.default)(thumbs.get(0)).css('margin','0 '+(this.getThumbPadding()/2)+'px 0 0');(0,jquery_1.default)(thumbs.get(thumbs.length-1)).css('margin','0 0 0 '+(this.getThumbPadding()/2)+'px');this.fullThumbWidth=tw;this.fullThumbHeight=th;var thumbsWidth=tw*this.images.length+this.getThumbPadding()*(this.images.length-1);thumbcont.css({position:"absolute",left:"0",top:"5px",width:thumbsWidth+"px",height:th+"px"});var galcont=document.createElement("DIV");(0,jquery_1.default)(galcont).css({position:"relative",height:h>0?(h+"px"):''});galcont.className="gallery-list";var imgcont=document.createElement("DIV");(0,jquery_1.default)(imgcont).css({position:"relative",height:h>0?((h-th-10)+"px"):'',overflow:"hidden"});imgcont.className="gallery-list-image";var icon;var thumbdiv_in1=document.createElement("DIV");(0,jquery_1.default)(thumbdiv_in1).css({position:"relative","float":"left",height:(th+10)+"px",cursor:"pointer"});thumbdiv_in1.className="gallery-list-left";(0,jquery_1.default)(thumbdiv_in1).click(function(){return _this_1.slideBy(-_this_1.fullThumbWidth*3)});icon=this.getLeftArrow(this.controlsArrow);if(icon)
thumbdiv_in1.appendChild(icon.get(0));var thumbdiv_in2=document.createElement("DIV");(0,jquery_1.default)(thumbdiv_in2).css({position:"relative","float":"none",margin:"0 auto",maxWidth:thumbsWidth+"px",height:(th+10)+"px",overflow:"hidden",});thumbdiv_in2.className="gallery-list-thumbs";var thumbdiv_in3=document.createElement("DIV");(0,jquery_1.default)(thumbdiv_in3).css({position:"relative","float":"right",height:(th+10)+"px",cursor:"pointer"});thumbdiv_in3.className="gallery-list-right";(0,jquery_1.default)(thumbdiv_in3).click(function(){return _this_1.slideBy(_this_1.fullThumbWidth*3)});icon=this.getRightArrow(this.controlsArrow);if(icon)
thumbdiv_in3.appendChild(icon.get(0));var self=this;var toHoverState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_1.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.hover)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.hover.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.hover.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.hover.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.hover.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toNormalState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_1.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.normal)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.normal.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.normal.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.normal.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.normal.shadow.css['text-shadow']})}else $this.css('textShadow','')};(0,jquery_1.default)(thumbdiv_in1).hover(toHoverState,toNormalState);toNormalState.apply(thumbdiv_in1);(0,jquery_1.default)(thumbdiv_in3).hover(toHoverState,toNormalState);toNormalState.apply(thumbdiv_in3);var thumbdiv=document.createElement("DIV");(0,jquery_1.default)(thumbdiv).css({position:"relative",height:(th+10)+"px",overflow:"hidden"});(0,jquery_1.default)(thumbdiv_in2).append(thumbcont);thumbdiv.appendChild(thumbdiv_in1);thumbdiv.appendChild(thumbdiv_in3);thumbdiv.appendChild(thumbdiv_in2);galcont.appendChild(imgcont);galcont.appendChild(thumbdiv);this.listImgCont=(0,jquery_1.default)(imgcont);this.thumbImgCont=(0,jquery_1.default)(thumbdiv_in2);this.elem.append(galcont);this.reset(callback);this.imageIndex=-1;this.slideshowNext(callback);if(((0,jquery_1.default)(thumbdiv_in1).outerWidth()+(0,jquery_1.default)(thumbdiv_in2).outerWidth()+(0,jquery_1.default)(thumbdiv_in3).outerWidth())<this.elem.width()){(0,jquery_1.default)(thumbdiv_in1).hide();(0,jquery_1.default)(thumbdiv_in3).hide()}};GalleryLib.prototype.renderMasonry=function(){var elem=(0,jquery_1.default)('<div class="wb-masonry-items"/>');var cont=(0,jquery_1.default)('<div class="wb-masonry" style="width: 100%; height: 100%; overflow: auto;"/>');cont.append(elem);this.elem.append(cont);if(this.thumbAlign==="left")
elem.css("float","left");else if(this.thumbAlign==="right")
elem.css("float","right");else elem.css("margin","0 auto");var layoutReady=jquery_1.default.Deferred();for(var i=0,c=this.images.length;i<c;i++){if((0,exports.isVideoFile)(this.images[i].src)){continue}
var img=this.addImage(elem,this.images[i],i).wrp;this.applyAnimation(img,i,layoutReady.promise())}
elem.children('.wb_thumb').css('padding',(this.thumbPadding/2)+'px');var brd=this.getBorder();elem.masonry({itemSelector:".wb_thumb",columnWidth:this.getThumbWidth()+(brd?this.getBorderWidth(brd,1)+this.getBorderWidth(brd,3):0)+this.thumbPadding,fitWidth:!0,transitionDuration:0}).masonry('once','layoutComplete',function(){return layoutReady.resolve()});this.listImgCont=elem;if(this.thumbShadow&&this.height==='auto'){this.elem.css('overflow','visible');this.elem.children('.wb-masonry').get(0).style.setProperty("overflow","visible","important");this.elem.parent('.wb_gallery').css('overflow','visible')}else{this.elem.css('overflow','');this.elem.parent('.wb_gallery').css('overflow','')}};GalleryLib.prototype.renderMap=function(){var _this_1=this;var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
this.elem.html('<div class="wb-gallery-map" style="width: 100%; height: 100%; overflow: auto; position: absolute;"></div>');this.elem.css("text-align",this.thumbAlign);var elem=this.elem.children().first();this.map=null;this.mapDiv=null;if(this.key){GoogleMapsApi.addListener(function(){var mapTypeId=_this_1.mapTypeId||google.maps.MapTypeId.ROADMAP;var thisClass=_this_1;if(!_this_1.map){if(!_this_1.mapDiv){_this_1.mapDiv=(0,jquery_1.default)('<div>').css({width:'100%',height:'100%'}).appendTo(elem)}
_this_1.mapDiv.css("display","block");setTimeout(function(){if(thisClass.mapDiv){thisClass.map=new google.maps.Map(thisClass.mapDiv.get(0),{zoom:thisClass.zoom,center:thisClass.mapCenter&&thisClass.mapCenter.latLng?thisClass.mapCenter.latLng:new google.maps.LatLng(0,0),mapTypeId:mapTypeId,mapTypeControl:thisClass.showSatellite,zoomControl:thisClass.showZoom,streetViewControl:thisClass.showStreetView,fullscreenControl:thisClass.showFullscreen,draggable:thisClass.allowDragging,styles:thisClass.getStyles()})}},50)}
var init=function(){if(!thisClass.map){setTimeout(init,10);return}
thisClass.map.setZoom(thisClass.zoom);thisClass.map.setCenter(new google.maps.LatLng(0,0));thisClass.map.setMapTypeId(mapTypeId);thisClass.map.setOptions({mapTypeControl:thisClass.showSatellite,zoomControl:thisClass.showZoom,streetViewControl:thisClass.showStreetView,fullscreenControl:thisClass.showFullscreen,draggable:thisClass.allowDragging,styles:thisClass.getStyles()});thisClass.map.addListener("click",function(){thisClass.mapInfowindows.map(function(item){item.close()})});thisClass.mapMarkers.map(function(item){return item.setMap(null)});thisClass.mapMarkers=[];thisClass.mapInfowindows=[];var latlngbounds=new google.maps.LatLngBounds();var _loop_3=function(i,c){var image=thisClass.images[i];if(image.address&&image.address.latLng){var content=(0,jquery_1.default)('<div class="gallery-map-image" style="position: relative">'+"<img src=\"".concat(thisClass.urlEncode(image.src||image.thumb||''),"\" alt=\"").concat(image.title,"\" style=\"max-width: 100%; max-height: 100%\"/>")+"</div>");if((image.title||image.description)&&thisClass.showPictureCaption!=='none'){caption=(0,jquery_1.default)('<div class="wb-picture-caption"/>');if(thisClass.captionBackground)
caption.css("background-color",thisClass.captionBackground);if(thisClass.captionPosition)
caption.addClass(thisClass.captionPosition.split(" ").join("-"));thisClass.fillCaptionContainer(caption,image,thisClass.captionIncludeDescription);content.append(caption)}
var infowindow_1=new google.maps.InfoWindow({content:content.get(0),});infowindow_1.addListener('domready',function(){var parent=(0,jquery_1.default)(this.getContent()).parent();var height=parent.parent().innerHeight()-parent.height();(0,jquery_1.default)(this.getContent()).children('img').css('max-height',parent.height()-height)});var position=new google.maps.LatLng(image.address.latLng);latlngbounds.extend(position);var icon=undefined;if(thisClass.markerIconTypeId==='thumbs'){icon={url:image.thumb||image.src,size:new google.maps.Size(35,35),scaledSize:new google.maps.Size(35,35)}}else if(thisClass.markerIconTypeId==='camera'){icon={path:'M960 864q119 0 203.5 -84.5t84.5 -203.5t-84.5 -203.5t-203.5 -84.5t-203.5 84.5t-84.5 203.5t84.5 203.5t203.5 84.5zM1664 1280q106 0 181 -75t75 -181v-896q0 -106 -75 -181t-181 -75h-1408q-106 0 -181 75t-75 181v896q0 106 75 181t181 75h224l51 136 q19 49 69.5 84.5t103.5 35.5h512q53 0 103.5 -35.5t69.5 -84.5l51 -136h224zM960 128q185 0 316.5 131.5t131.5 316.5t-131.5 316.5t-316.5 131.5t-316.5 -131.5t-131.5 -316.5t131.5 -316.5t316.5 -131.5z',anchor:new google.maps.Point(15,30),scale:0.01,rotation:180,fillColor:"#cecece",fillOpacity:0.5,strokeWeight:1,}}
var marker_1=new google.maps.Marker({position:position,map:thisClass.map,title:image.title,icon:icon});marker_1.addListener("click",function(){thisClass.mapInfowindows.map(function(item){return item.close()});var map=marker_1.getMap();if(map){infowindow_1.open(map,marker_1)}});thisClass.mapMarkers.push(marker_1);thisClass.mapInfowindows.push(infowindow_1)}};var caption;for(var i=0,c=thisClass.images.length;i<c;i++){_loop_3(i,c)}
if(thisClass.mapCenter&&thisClass.mapCenter.latLng&&thisClass.mapCenter.latLng.lat!==0&&thisClass.mapCenter.latLng.lng!==0){thisClass.map.setCenter(thisClass.mapCenter.latLng);thisClass.map.setZoom(thisClass.zoom)}else if(thisClass.mapMarkers.length===1){thisClass.map.setCenter(new google.maps.LatLng(0,0));thisClass.map.setZoom(thisClass.zoom)}else{thisClass.map.fitBounds(latlngbounds)}};setTimeout(init,50)})}};GalleryLib.prototype.onImageLoad=function(){var _this_1=this;if(this.type==="masonry"){this.elem.find(".wb-masonry-items").masonry();this.elem.trigger("elementviewchange")}
if(this.delayedUpdateTimeout)
clearTimeout(this.delayedUpdateTimeout);this.delayedUpdateTimeout=setTimeout(function(){_this_1.delayedUpdateTimeout=0;if(_this_1.type==="masonry"){_this_1.elem.find(".wb-masonry-items").masonry();_this_1.elem.trigger("elementviewchange")}},1000)};GalleryLib.prototype.getBorderWidth=function(css,side){if(side===void 0){side=0}
var border='';if(side==1&&typeof css.borderLeft==='string')
border=css.borderLeft;if(side==1&&typeof css['border-left']==='string')
border=css['border-left'];if(side==3&&typeof css.borderRight==='string')
border=css.borderRight;if(side==3&&typeof css['border-right']==='string')
border=css['border-right'];if(!border&&typeof css.border==='string')
border=css.border;if(border.indexOf('none')===-1){var res=border.match(/^([0-9]+)px(?:| .+)$/);if(res)
return parseFloat(res[1]);}
return 0};GalleryLib.prototype.slideBy=function(delta,instant){if(instant===void 0){instant=!1}
if(!this.thumbImgCont)
return;var cont=this.thumbImgCont;var div=cont.children().first();var pos=div.position();var x=pos.left;x-=delta;var minx=-(div.width()-cont.width());if(x<minx)
x=minx;if(x>0)
x=0;var css={left:x+"px"};if(instant)
div.stop(!0,!1).css(css);else div.animate(css)};GalleryLib.prototype.handleContinuousResize=function(){if(!this.listImgCont)
return;if(this.type==="masonry"){this.listImgCont.masonry()}};GalleryLib.prototype.handleResize=function(){if(!this.listImgCont)
return;if(this.type==="list"){var h=this.elem.height();var th=this.fullThumbHeight;this.listImgCont.css({height:(h-th-10)+"px"});this.slideBy(0,!0);var larr=(0,jquery_1.default)('.gallery-list-left',this.elem);var thumbs=(0,jquery_1.default)('.gallery-list-thumbs',this.elem);var rarr=(0,jquery_1.default)('.gallery-list-right',this.elem);if((larr.outerWidth()+thumbs.outerWidth()+rarr.outerWidth())<this.elem.width()){larr.hide();rarr.hide()}else{larr.show();rarr.show()}}else if(this.type==="masonry"){this.listImgCont.css('width','');this.listImgCont.masonry()}
if(this.displayedImage)
this.updateImageSize(this.displayedImage);if(this.loadingImage)
this.updateImageSize(this.loadingImage);};GalleryLib.prototype.updateImageSize=function(imageCont){if(!this.listImgCont)
return;if(this.type==='slideshow'||this.type==='list')
return;var size=imageCont.data("_wb_size_");var stl=this.calcImageStyles(this.listImgCont,size);imageCont.css({left:stl.x+"px",top:stl.y+"px"});var img=imageCont.children('img').first();if(img&&img.length){img.css({width:stl.width+"px",height:stl.height+"px"});var imgRaw=img.get(0);imgRaw.width=stl.width;imgRaw.height=stl.height}};GalleryLib.prototype.calcImageStyles=function(displayCont,image){if(!image)
return{x:0,y:0,width:0,height:0};var cover=this.imageCover;var pad=cover?0:this.padding;var maxWidth=displayCont.innerWidth()-pad*2;var maxHeight=displayCont.innerHeight()-pad*2;var w=image.width;var h=image.height;if(cover||w>maxWidth||h>maxHeight){var ratio1=w/maxWidth;var ratio2=h/maxHeight;var ratio=cover?Math.min(ratio1,ratio2):Math.max(ratio1,ratio2);w=Math.floor(w/ratio);h=Math.floor(h/ratio)}
return{x:Math.floor((maxWidth-w)/2+pad),y:Math.floor((maxHeight-h)/2+pad),width:w,height:h}};GalleryLib.prototype.parseHash=function(){var hash=window.location.hash.substring(1),params={gid:'',pid:''};if(hash.length<5){return params}
var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue}
var pair=vars[i].split('=');if(pair.length<2){continue}
if(i==1&&pair){params.gid=pair[1]}
if(i==2&&pair){params.pid=pair[1]}}
return params};GalleryLib.prototype.displayImage=function(displayCont,callback){var _this_1=this;if(typeof callback==='function')
callback();var image=this.images[this.imageIndex];if(!image)
return;var link=(this.type!=="thumbs"&&this.type!=="masonry"&&image.link)?image.link:undefined;var cont=(link?(0,jquery_1.default)('<a>'):(0,jquery_1.default)('<div>')).addClass("gallery-image");if(link){cont.attr('href',link.url);if(link.target)
cont.attr('target',link.target);}
if(image.title)
cont.attr('title',image.title);cont.data("image",image);cont.css({display:"none"});if(this.thumbShadow&&this.thumbShadow.css&&['thumbs','masonry'].indexOf(this.type)>=0){cont.css(this.thumbShadow.css)}
var img;var imgJq;if((0,exports.isVideoFile)(image.src)){this.currentType='video';imgJq=(0,jquery_1.default)('<video class="wb-video visible" controls="" playsinline muted controlslist="nodownload nofullscreen noremoteplayback" disablepictureinpicture preload="auto">');img=imgJq[0];imgJq.on('loadedmetadata',function(){var onloaded=function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();var parent=cont.parent();_this_1.displayedImage=(parent&&parent.length)?cont:null;_this_1.loadingImage=null;img.play()};imgJq.css({'object-fit':_this_1.imageCover?'cover':'contain'});cont.css({position:'absolute'});cont.append(img);var speed=_this_1.getTransitionSpeed();if(!speed){cont.show();onloaded()}else{cont.fadeIn(speed,function(){cont.css({position:''});onloaded()})}});if(this.slideshowTimer){clearInterval(this.slideshowTimer);this.slideshowTimer=0}
var _this_2=this;var firstPlay_1=!0;imgJq.on('timeupdate',function(){var curTime=Math.round(this.currentTime);var endTime=Math.round(this.duration);if(curTime>0&&endTime>0&&curTime>=endTime&&firstPlay_1&&!_this_2.pause){firstPlay_1=!1;if(_this_2.slideshowInterval&&_this_2.images.length>1){_this_2.reset();_this_2.slideshowNext(callback)}}})}else{this.currentType='image';img=new Image();img.alt="";if(image.title)
img.alt=image.title;imgJq=(0,jquery_1.default)(img);img.onload=function(){if(_this_1.displayedImage){var caption_1=_this_1.displayedImage.data("caption");_this_1.displayedImage.fadeOut(_this_1.getTransitionSpeed(),function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();});if(caption_1){caption_1.fadeOut(_this_1.getTransitionSpeed(),function(){return caption_1.remove()})}}
cont.append(img);imgJq.css({'object-fit':_this_1.imageCover?'cover':'contain'});cont.css({position:'absolute'});cont.fadeIn(_this_1.getTransitionSpeed(),function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();var parent=cont.parent();_this_1.displayedImage=(parent&&parent.length)?cont:null;_this_1.loadingImage=null;cont.css({position:''})})}}
imgJq.css((this.imageCover||!this.border)?{"border":"none"}:this.border);displayCont.append(cont);this.loadingImage=cont;(0,jquery_1.default)('.wb-picture-caption').remove();var caption=(0,jquery_1.default)('<div class="wb-picture-caption" style="display: none;"/>');if(this.captionBackground)
caption.css("background-color",this.captionBackground);if(this.captionPosition)
caption.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer(caption,image,this.captionIncludeDescription)){if(this.showPictureCaption==='always'){caption.fadeIn(this.getTransitionSpeed());displayCont.append(caption);cont.data("caption",caption)}else if(this.showPictureCaption==='hover'){displayCont.append(caption);cont.data("caption",caption);caption.css({display:'block',opacity:0,});displayCont.hover(function(){caption.css('opacity','1')},function(){caption.css('opacity','0')})}}else{}
img.src=this.urlEncode(image.src,!0,!0);if(!link)
this.initImageLightBox(imgJq,this.imageIndex);if(this.type==='slideshow')
this.renderSlideshowControls(this.elem.children().first());if(typeof this.onImageDisplayed==='function')
this.onImageDisplayed(img.src);};GalleryLib.prototype.slideshowTo=function(index,callback){if(this.images.length===0||!this.listImgCont||this.lightBoxDisplayed)
return;this.imageIndex=index;if(this.imageIndex>=this.images.length)
this.imageIndex=0;if(this.imageIndex<0)
this.imageIndex=this.images.length-1;this.displayImage(this.listImgCont,callback)};GalleryLib.prototype.slideshowNext=function(callback){if(this.images.length===0||!this.listImgCont||this.lightBoxDisplayed)
return;this.imageIndex++;if(this.imageIndex>=this.images.length)
this.imageIndex=0;this.displayImage(this.listImgCont,callback)};GalleryLib.prototype.slideshowPrev=function(){if(this.images.length===0||!this.listImgCont)
return;this.imageIndex--;if(this.imageIndex<0)
this.imageIndex=this.images.length-1;this.displayImage(this.listImgCont)};GalleryLib.prototype.addImage=function(cont,image,idx,noLightbox){var _this_1=this;if(noLightbox===void 0){noLightbox=!1}
var isThumbsOnlyMode=(this.type==="thumbs"||this.type==="masonry");var link=(isThumbsOnlyMode&&image.link)?image.link:undefined;var div=(link?(0,jquery_1.default)('<a>'):(0,jquery_1.default)('<div>')).addClass("wb_thumb");if(link){div.attr('href',link.url);if(link.target)
div.attr('target',link.target);}
if(image.title)
div.attr('title',image.title);var tw=this.getThumbWidth();var th=this.getThumbHeight();var wrp=(0,jquery_1.default)("<div/>");wrp.css({width:tw+"px",overflow:"hidden",boxSizing:"content-box",position:'relative'});if(this.thumbShadow&&this.thumbShadow.css&&['thumbs','masonry'].indexOf(this.type)>=0){wrp.css(this.thumbShadow.css)}
if(this.type!=='masonry')
wrp.css('height',th+"px");var brd=this.getBorder();if(isThumbsOnlyMode&&brd)
wrp.css(brd);div.append(wrp);div.data("image",image);var onloadcb=function(w,h){var k;if(_this_1.type==='masonry'){k=w/tw}else{var k1=w/tw;var k2=h/th;k=Math.min(k1,k2)}
if(_this_1.imageCover){w=w/k;h=h/k;var x=Math.round((tw-w)/2);var y=(_this_1.type==='masonry')?0:Math.round((th-h)/2);img.css({left:x+"px",top:y+"px",width:w+"px",height:h+"px",objectFit:"",border:""})}else{img.css({left:0,top:0,width:"100%",height:"100%",objectFit:"contain",border:"1px solid #888"})}
try{var anim=wrp.get(0).animate([{opacity:0},{opacity:1}],150);anim.onfinish=function(){wrp.css({opacity:''})};anim.play()}catch(e){wrp.css({opacity:''})}
setTimeout(function(){return _this_1.onImageLoad()},100)};var img;var imgRaw;if((0,exports.isVideoFile)(image.src)){img=(0,jquery_1.default)('<video class="wb-video visible" autoplay loop controls="" playsinline muted controlslist="nodownload nofullscreen noremoteplayback" disablepictureinpicture preload="auto">');imgRaw=img[0];img.on('loadedmetadata',function(){var w=imgRaw.videoWidth;var h=imgRaw.videoHeight;onloadcb(w,h);if(imgRaw instanceof HTMLVideoElement)
imgRaw.play();})}else{img=(0,jquery_1.default)('<img src="" alt="" />');if(image.title)
img.attr('alt',image.title);imgRaw=img.get(0);imgRaw.onload=function(){var w=imgRaw.width;var h=imgRaw.height;onloadcb(w,h)}}
wrp.css({opacity:0});imgRaw.src=this.urlEncode(image.thumb||image.src,!0,!0);img.css({display:"block",maxWidth:"auto",position:"relative"});wrp.append(img);if(isThumbsOnlyMode&&this.getThumbWidth()>=100&&this.showPictureCaption!=='none'){var descDiv_1=(0,jquery_1.default)('<div class="wb-picture-caption"/>');if(this.captionBackground)
descDiv_1.css("background-color",this.captionBackground);if(this.captionPosition)
descDiv_1.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer(descDiv_1,image,this.captionIncludeDescription)){wrp.append(descDiv_1);if(this.showPictureCaption==='hover'){descDiv_1.css({opacity:0,transition:"opacity "+(this.slideshowSpeed/1000).toFixed(3)+"s linear"});div.hover(function(){descDiv_1.css('opacity','1')},function(){descDiv_1.css('opacity','0')})}}}
cont.append(div);if(!noLightbox&&!link)
this.initImageLightBox(img,idx);return{img:img,wrp:wrp}};GalleryLib.prototype.fillCaptionContainer=function(cont,meta,createDescription,createLink){if(createLink===void 0){createLink=!1}
var hasAny=!1;if(meta.title!==""){hasAny=!0;var title=(0,jquery_1.default)('<h3 class="wb-lightbox-title">').append((createLink&&meta.link)?(0,jquery_1.default)('<a>').attr({href:meta.link.url,target:meta.link.target?meta.link.target:null}).text(meta.title):document.createTextNode(meta.title));if(this.captionTitleStyle)
title.css(this.captionTitleStyle);cont.append(title)}
if(createDescription&&meta.description!==""){hasAny=!0;var desc=(0,jquery_1.default)('<div class="wb-lightbox-description">').text(meta.description);if(this.captionDescriptionStyle)
desc.css(this.captionDescriptionStyle);cont.append(desc)}
return hasAny};GalleryLib.prototype.updateImageMeta=function(updateImage){for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if(image.src===updateImage.src){jquery_1.default.extend(!0,image,updateImage);this.onMetaChange();break}}};GalleryLib.prototype.renderMeta=function(image,createDescription,$container,$caption){var isNew;if($caption&&$caption.length){$caption.empty();isNew=!1}else{$caption=(0,jquery_1.default)('<div class="wb-picture-caption"/>');isNew=!0}
if(this.captionBackground)
$caption.css("background-color",this.captionBackground);if(this.captionPosition)
$caption.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer($caption,image,createDescription)){if(isNew){$caption.css("opacity",0);$container.append($caption);$caption.css("opacity",1)}
return $caption}else if(!isNew){$caption.detach()}
return null};GalleryLib.prototype.onMetaChange=function(){var _this_1=this;if(this.metaUpdateTimeout)
return;this.metaUpdateTimeout=requestAnimationFrame(function(){_this_1.metaUpdateTimeout=0;if(_this_1.type==='map'){_this_1.renderMap()}else if(_this_1.type==="thumbs"||_this_1.type==="masonry"){if(_this_1.getThumbWidth()>=100&&_this_1.showPictureCaption!=='none'){var thisClass_1=_this_1;_this_1.elem.find(".wb_thumb").each(function(){var $thumb=(0,jquery_1.default)(this);var image=$thumb.data("image");if(!image)
return;$thumb.attr('title',image.title||"");thisClass_1.renderMeta(image,!1,$thumb.children().first(),(0,jquery_1.default)(".wb-picture-caption",$thumb))})}}else{var renderListImageMeta=function($cont,fadeIn){var $parent=$cont.parent();if(!$parent||!$parent.length)
return;var image=$cont.data("image");if(!image)
return;$cont.attr('title',image.title||"");var $prevCaption=$cont.data("caption");var $caption=null;if(_this_1.showPictureCaption!=='none'){$caption=_this_1.renderMeta(image,!0,$parent,$prevCaption)}
$cont.data("caption",$caption);if($caption&&!$prevCaption){$caption.addClass("wb-no-transition");var opacity=parseFloat(getComputedStyle($cont[0]).opacity);if(opacity<1){$caption.css("opacity",opacity);if(fadeIn)
$caption.fadeTo(Math.floor((1-opacity)*_this_1.getTransitionSpeed()),1);else $caption.fadeOut(Math.floor(opacity*_this_1.getTransitionSpeed()),function(){return $caption===null||$caption===void 0?void 0:$caption.remove()})}}};if(_this_1.displayedImage)
renderListImageMeta(_this_1.displayedImage,!1);if(_this_1.loadingImage)
renderListImageMeta(_this_1.loadingImage,!0);if(_this_1.type==="list"){(0,jquery_1.default)(".wb_thumb",_this_1.elem).each(function(){var $thumb=(0,jquery_1.default)(this);var image=$thumb.data("image");$thumb.attr('title',image.title||"")})}}})};GalleryLib.prototype.constructImagesArray=function(){var images=[];for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if((0,exports.isVideoFile)(image.src)){continue}
images.push({src:image.src,w:image.width,h:image.height,msrc:null,title:(typeof image.title==='string'&&image.title.length>0)?image.title:" ",link:image.link?image.link:undefined,description:image.description?image.description:''})}
return images};GalleryLib.prototype.initImageLightBox=function(img,imageIndex){var _this_1=this;if(img.prop("tagName")=='VIDEO'){return}
var lightBoxInited=GalleryLib.lightBoxInited;GalleryLib.lightBoxInited=!0;var params;if(this.initialRender){params=this.parseHash();imageIndex=params.pid?parseInt(params.pid):imageIndex}
if((this.type==='slideshow'||this.type==='list'||this.type==='thumbs'||this.type==='masonry')&&this.disablePopup)
return;var lightBoxElem=(0,jquery_1.default)('.wb_pswp');if(!lightBoxInited&&this.initialRender&&params&&params.pid&&params.gid===this.id){this.lightBoxDisplayed=!0;var images=[];images=this.constructImagesArray();this.lightBox=(new PhotoSwipe(lightBoxElem.get(0),PhotoSwipeUI_Default,images,{index:imageIndex,galleryUID:this.id,addCaptionHTMLFn:function(item,captionElement){var cont=(0,jquery_1.default)(captionElement.children[0]);cont.empty();return _this_1.fillCaptionContainer(cont,item,!0,!0)},history:!0,}));this.lightBox.init();this.lightBox.listen('destroy',function(){_this_1.lightBoxDisplayed=!1});this.initialRender=!1}
img.css({cursor:"pointer"}).on("click touchstart touchend touchmove",function(e){var img=(0,jquery_1.default)(e.currentTarget);if(e.type==='touchstart'){img.data('pswpDisabled',!1)}else if(e.type==='touchmove'){img.data('pswpDisabled',!0)}
if((e.type==='click'||e.type==='touchend')&&!img.data('pswpDisabled')){_this_1.lightBoxDisplayed=!0;var images=[];images=_this_1.constructImagesArray();_this_1.lightBox=(new PhotoSwipe(lightBoxElem.get(0),PhotoSwipeUI_Default,images,{index:imageIndex,galleryUID:_this_1.id,addCaptionHTMLFn:function(item,captionElement){var cont=(0,jquery_1.default)(captionElement.children[0]);cont.empty();return _this_1.fillCaptionContainer(cont,item,!0,!0)},history:!0}));_this_1.lightBox.init();_this_1.lightBox.listen('destroy',function(){_this_1.lightBoxDisplayed=!1});lightBoxElem.attr('id',_this_1.id+'_pswp')}})};GalleryLib.prototype.urlEncode=function(url,quotes,hash){if(quotes===void 0){quotes=!1}
if(hash===void 0){hash=!1}
var url_=encodeURI(url).replace(/\(/g,"%28").replace(/\)/g,"%29");if(quotes){url_=url_.replace(/\'/g,"%27")}
if(hash){url_=url_.replace(/#/g,"%23")}
return url_};GalleryLib.prototype.getImages=function(){return __spreadArray([],this.images,!0)};GalleryLib.prototype.setImages=function(images){this.images=__spreadArray([],images,!0);this.invalidate()};GalleryLib.prototype.setHeight=function(height){this.height=height;this.invalidate()};GalleryLib.prototype.getType=function(){return this.type};GalleryLib.prototype.setType=function(type){this.type=type;this.invalidate()};GalleryLib.prototype.getSlideshowInterval=function(){return this.slideshowInterval};GalleryLib.prototype.getSlideshowSpeed=function(){return this.slideshowSpeed};GalleryLib.prototype.setSlideshowSpeed=function(speed){this.slideshowSpeed=speed};GalleryLib.prototype.getTransitionSpeed=function(){return(this.slideshowInterval>0)?Math.min(Math.max(0,this.slideshowInterval*1000-100),this.slideshowSpeed):0};GalleryLib.prototype.getBgColor=function(){return this.bgColor};GalleryLib.prototype.setBgColor=function(color){this.bgColor=color;this.elem.css("background-color",this.bgColor)};GalleryLib.prototype.getCaptionBackground=function(){return this.captionBackground};GalleryLib.prototype.setCaptionBackground=function(color){this.captionBackground=color;if(this.captionBackground)
this.elem.find(".wb-picture-caption").css("background-color",color);};GalleryLib.prototype.getCaptionPosition=function(){return this.captionPosition};GalleryLib.prototype.setCaptionPosition=function(position){this.captionPosition=position;if(this.captionPosition)
this.elem.find(".wb-picture-caption").removeClass("left-top center-top right-top left-center center-center right-center left-bottom center-bottom right-bottom").addClass(position.split(" ").join("-"));};GalleryLib.prototype.getCaptionTitleStyle=function(){return this.captionTitleStyle};GalleryLib.prototype.setCaptionTitleStyle=function(css){this.captionTitleStyle=css;this.elem.find(".wb-lightbox-title").css(css)};GalleryLib.prototype.getCaptionDescriptionStyle=function(){return this.captionDescriptionStyle};GalleryLib.prototype.setCaptionDescriptionStyle=function(css){this.captionDescriptionStyle=css;this.elem.find(".wb-lightbox-description").css(css)};GalleryLib.prototype.getControlsArrow=function(){return this.controlsArrow};GalleryLib.prototype.setControlsArrow=function(type){this.controlsArrow=type};GalleryLib.prototype.getControlsArrowSize=function(){return this.controlsArrowSize};GalleryLib.prototype.setControlsArrowSize=function(size){this.controlsArrowSize=size};GalleryLib.prototype.getControlsArrowStyle=function(){return this.controlsArrowStyle};GalleryLib.prototype.setControlsArrowStyle=function(style){this.controlsArrowStyle=style};GalleryLib.prototype.setFrequency=function(frequency){if(frequency>=0&&frequency<=10){this.slideshowInterval=frequency;this.reset()}};GalleryLib.prototype.getFrequency=function(){return this.slideshowInterval};GalleryLib.prototype.getBorder=function(){return this.border};GalleryLib.prototype.setBorder=function(border){this.border=border;this.elem.find('.gallery-image').css((this.imageCover||!this.border)?{"border":"none"}:this.border);this.invalidate()};GalleryLib.prototype.getPadding=function(){return this.padding};GalleryLib.prototype.getThumbWidth=function(){return this.thumbWidth?this.thumbWidth:config.thumbWidth};GalleryLib.prototype.getThumbHeight=function(){return this.thumbHeight?this.thumbHeight:config.thumbHeight};GalleryLib.prototype.getThumbAlign=function(){return this.thumbAlign};GalleryLib.prototype.getThumbPadding=function(){return this.thumbPadding};GalleryLib.prototype.setPadding=function(padding){this.padding=padding;this.invalidate()};GalleryLib.prototype.setThumbWidth=function(width){this.thumbWidth=width;this.invalidate()};GalleryLib.prototype.setThumbHeight=function(height){this.thumbHeight=height;this.invalidate()};GalleryLib.prototype.setThumbAlign=function(align){this.thumbAlign=align;this.invalidate()};GalleryLib.prototype.setThumbPadding=function(padding){this.thumbPadding=padding;this.invalidate()};GalleryLib.prototype.getThumbAnim=function(){return this.thumbAnim};GalleryLib.prototype.setThumbAnim=function(value){if(value&&('_preview' in value)&&value._preview){delete value._preview}
this.thumbAnim=value;this.invalidate()};GalleryLib.prototype.getThumbShadow=function(){return this.thumbShadow};GalleryLib.prototype.setThumbShadow=function(value){this.thumbShadow=value;this.invalidate()};GalleryLib.prototype.setImageCover=function(value){this.imageCover=value;this.invalidate()};GalleryLib.prototype.setDisablePopup=function(value){this.disablePopup=value;this.invalidate()};GalleryLib.prototype.setSlideOpacity=function(value){this.slideOpacity=value;if(this.type==="slideshow"&&this.listImgCont){this.listImgCont.css('opacity',this.slideOpacity/100)}};GalleryLib.prototype.getImageCover=function(){return this.imageCover};GalleryLib.prototype.getDisablePopup=function(){return this.disablePopup};GalleryLib.prototype.getSlideOpacity=function(){return this.slideOpacity};GalleryLib.prototype.setShowPictureCaption=function(value){this.showPictureCaption=value;this.invalidate()};GalleryLib.prototype.getShowPictureCaption=function(){return this.showPictureCaption};GalleryLib.prototype.setCaptionIncludeDescription=function(value){this.captionIncludeDescription=value;this.invalidate()};GalleryLib.prototype.getCaptionIncludeDescription=function(){return this.captionIncludeDescription};GalleryLib.prototype.getMapTypeId=function(){return this.mapTypeId};GalleryLib.prototype.setMapTypeId=function(value){this.mapTypeId=value;this.invalidate()};GalleryLib.prototype.getMarkerIconTypeId=function(){return this.markerIconTypeId};GalleryLib.prototype.setMarkerIconTypeId=function(value){this.markerIconTypeId=value;this.invalidate()};GalleryLib.prototype.getZoom=function(){return this.zoom};GalleryLib.prototype.setZoom=function(value){this.zoom=value;this.invalidate()};GalleryLib.prototype.getMapCenter=function(){return this.mapCenter};GalleryLib.prototype.setMapCenter=function(value){this.mapCenter=value;this.invalidate()};GalleryLib.prototype.getKey=function(){return this.key};GalleryLib.prototype.setKey=function(value){this.key=value;this.invalidate()};GalleryLib.prototype.getTheme=function(){return this.theme};GalleryLib.prototype.setTheme=function(value){this.theme=value;this.invalidate()};GalleryLib.prototype.getColor=function(){return this.color};GalleryLib.prototype.setColor=function(value){this.color=value;this.invalidate()};GalleryLib.prototype.getShowSatellite=function(){return this.showSatellite};GalleryLib.prototype.setShowSatellite=function(value){this.showSatellite=value;this.invalidate()};GalleryLib.prototype.getShowZoom=function(){return this.showZoom};GalleryLib.prototype.setShowZoom=function(value){this.showZoom=value;this.invalidate()};GalleryLib.prototype.getShowStreetView=function(){return this.showStreetView};GalleryLib.prototype.setShowStreetView=function(value){this.showStreetView=value;this.invalidate()};GalleryLib.prototype.getShowFullscreen=function(){return this.showFullscreen};GalleryLib.prototype.setShowFullscreen=function(value){this.showFullscreen=value;this.invalidate()};GalleryLib.prototype.getAllowDragging=function(){return this.allowDragging};GalleryLib.prototype.setAllowDragging=function(value){this.allowDragging=value;this.invalidate()};GalleryLib.prototype.getShowRoads=function(){return this.showRoads};GalleryLib.prototype.setShowRoads=function(value){this.showRoads=value;this.invalidate()};GalleryLib.prototype.getShowLandmarks=function(){return this.showLandmarks};GalleryLib.prototype.setShowLandmarks=function(value){this.showLandmarks=value;this.invalidate()};GalleryLib.prototype.getShowLabels=function(){return this.showLabels};GalleryLib.prototype.setShowLabels=function(value){this.showLabels=value;this.invalidate()};GalleryLib.lightBoxInited=!1;GalleryLib.galleryLibList=[];return GalleryLib}());exports.GalleryLib=GalleryLib});this.require=tmpRequire;delete this.module;if(this.exports&&this.exports.GalleryLib){this.wbmodGalleryLib=this.exports.GalleryLib}
delete this.exports}).call(window);!function(e){"use strict";function r(){function e(n){var i=this;return i instanceof e?(n instanceof e?(i.s=n.s,i.e=n.e,i.c=n.c.slice()):t(i,n),void(i.constructor=e)):n===m?r():new e(n)}return e.prototype=v,e.DP=s,e.RM=f,e.NE=h,e.PE=l,e.version="5.0.2",e}function t(e,r){var t,n,i;if(0===r&&0>1/r)r="-0";else if(!E.test(r+=""))throw Error(g+"number");for(e.s="-"==r.charAt(0)?(r=r.slice(1),-1):1,(t=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(0>t&&(t=n),t+=+r.slice(n+1),r=r.substring(0,n)):0>t&&(t=r.length),i=r.length,n=0;i>n&&"0"==r.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==r.charAt(--i););for(e.e=t-n-1,e.c=[],t=0;i>=n;)e.c[t++]=+r.charAt(n++)}return e}function n(e,r,t,n){var i=e.c,o=e.e+r+1;if(o<i.length){if(1===t)n=i[o]>=5;else if(2===t)n=i[o]>5||5==i[o]&&(n||0>o||i[o+1]!==m||1&i[o-1]);else if(3===t)n=n||i[o]!==m||0>o;else if(n=!1,0!==t)throw Error(w);if(1>o)i.length=1,n?(e.e=-r,i[0]=1):i[0]=e.e=0;else{if(i.length=o--,n)for(;++i[o]>9;)i[o]=0,o--||(++e.e,i.unshift(1));for(o=i.length;!i[--o];)i.pop()}}else if(0>t||t>3||t!==~~t)throw Error(w);return e}function i(e,r,t,i){var o,s,f=e.constructor,u=!e.c[0];if(t!==m){if(t!==~~t||(3==r)>t||t>c)throw Error(3==r?g+"precision":p);for(e=new f(e),t=i-e.e,e.c.length>++i&&n(e,t,f.RM),2==r&&(i=e.e+t+1);e.c.length<i;)e.c.push(0)}if(o=e.e,s=e.c.join(""),t=s.length,2!=r&&(1==r||3==r&&o>=i||o<=f.NE||o>=f.PE))s=s.charAt(0)+(t>1?"."+s.slice(1):"")+(0>o?"e":"e+")+o;else if(0>o){for(;++o;)s="0"+s;s="0."+s}else if(o>0)if(++o>t)for(o-=t;o--;)s+="0";else t>o&&(s=s.slice(0,o)+"."+s.slice(o));else t>1&&(s=s.charAt(0)+"."+s.slice(1));return e.s<0&&(!u||4==r)?"-"+s:s}var o,s=20,f=1,c=1e6,u=1e6,h=-7,l=21,a="[big.js] ",g=a+"Invalid ",p=g+"decimal places",w=g+"rounding mode",d=a+"Division by zero",v={},m=void 0,E=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;v.abs=function(){var e=new this.constructor(this);return e.s=1,e},v.cmp=function(e){var r,t=this,n=t.c,i=(e=new t.constructor(e)).c,o=t.s,s=e.s,f=t.e,c=e.e;if(!n[0]||!i[0])return n[0]?o:i[0]?-s:0;if(o!=s)return o;if(r=0>o,f!=c)return f>c^r?1:-1;for(s=(f=n.length)<(c=i.length)?f:c,o=-1;++o<s;)if(n[o]!=i[o])return n[o]>i[o]^r?1:-1;return f==c?0:f>c^r?1:-1},v.div=function(e){var r=this,t=r.constructor,i=r.c,o=(e=new t(e)).c,s=r.s==e.s?1:-1,f=t.DP;if(f!==~~f||0>f||f>c)throw Error(p);if(!o[0])throw Error(d);if(!i[0])return new t(0*s);var u,h,l,a,g,w=o.slice(),v=u=o.length,E=i.length,M=i.slice(0,u),P=M.length,b=e,D=b.c=[],R=0,A=f+(b.e=r.e-e.e)+1;for(b.s=s,s=0>A?0:A,w.unshift(0);P++<u;)M.push(0);do{for(l=0;10>l;l++){if(u!=(P=M.length))a=u>P?1:-1;else for(g=-1,a=0;++g<u;)if(o[g]!=M[g]){a=o[g]>M[g]?1:-1;break}if(!(0>a))break;for(h=P==u?o:w;P;){if(M[--P]<h[P]){for(g=P;g&&!M[--g];)M[g]=9;--M[g],M[P]+=10}M[P]-=h[P]}for(;!M[0];)M.shift()}D[R++]=a?l:++l,M[0]&&a?M[P]=i[v]||0:M=[i[v]]}while((v++<E||M[0]!==m)&&s--);return D[0]||1==R||(D.shift(),b.e--),R>A&&n(b,f,t.RM,M[0]!==m),b},v.eq=function(e){return!this.cmp(e)},v.gt=function(e){return this.cmp(e)>0},v.gte=function(e){return this.cmp(e)>-1},v.lt=function(e){return this.cmp(e)<0},v.lte=function(e){return this.cmp(e)<1},v.minus=v.sub=function(e){var r,t,n,i,o=this,s=o.constructor,f=o.s,c=(e=new s(e)).s;if(f!=c)return e.s=-c,o.plus(e);var u=o.c.slice(),h=o.e,l=e.c,a=e.e;if(!u[0]||!l[0])return l[0]?(e.s=-c,e):new s(u[0]?o:0);if(f=h-a){for((i=0>f)?(f=-f,n=u):(a=h,n=l),n.reverse(),c=f;c--;)n.push(0);n.reverse()}else for(t=((i=u.length<l.length)?u:l).length,f=c=0;t>c;c++)if(u[c]!=l[c]){i=u[c]<l[c];break}if(i&&(n=u,u=l,l=n,e.s=-e.s),(c=(t=l.length)-(r=u.length))>0)for(;c--;)u[r++]=0;for(c=r;t>f;){if(u[--t]<l[t]){for(r=t;r&&!u[--r];)u[r]=9;--u[r],u[t]+=10}u[t]-=l[t]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--a;return u[0]||(e.s=1,u=[a=0]),e.c=u,e.e=a,e},v.mod=function(e){var r,t=this,n=t.constructor,i=t.s,o=(e=new n(e)).s;if(!e.c[0])throw Error(d);return t.s=e.s=1,r=1==e.cmp(t),t.s=i,e.s=o,r?new n(t):(i=n.DP,o=n.RM,n.DP=n.RM=0,t=t.div(e),n.DP=i,n.RM=o,this.minus(t.times(e)))},v.plus=v.add=function(e){var r,t=this,n=t.constructor,i=t.s,o=(e=new n(e)).s;if(i!=o)return e.s=-o,t.minus(e);var s=t.e,f=t.c,c=e.e,u=e.c;if(!f[0]||!u[0])return u[0]?e:new n(f[0]?t:0*i);if(f=f.slice(),i=s-c){for(i>0?(c=s,r=u):(i=-i,r=f),r.reverse();i--;)r.push(0);r.reverse()}for(f.length-u.length<0&&(r=u,u=f,f=r),i=u.length,o=0;i;f[i]%=10)o=(f[--i]=f[i]+u[i]+o)/10|0;for(o&&(f.unshift(o),++c),i=f.length;0===f[--i];)f.pop();return e.c=f,e.e=c,e},v.pow=function(e){var r=this,t=new r.constructor(1),n=t,i=0>e;if(e!==~~e||-u>e||e>u)throw Error(g+"exponent");for(i&&(e=-e);1&e&&(n=n.times(r)),e>>=1,e;)r=r.times(r);return i?t.div(n):n},v.round=function(e,r){var t=this.constructor;if(e===m)e=0;else if(e!==~~e||0>e||e>c)throw Error(p);return n(new t(this),e,r===m?t.RM:r)},v.sqrt=function(){var e,r,t,i=this,o=i.constructor,s=i.s,f=i.e,c=new o(.5);if(!i.c[0])return new o(i);if(0>s)throw Error(a+"No square root");s=Math.sqrt(i.toString()),0===s||s===1/0?(r=i.c.join(""),r.length+f&1||(r+="0"),e=new o(Math.sqrt(r).toString()),e.e=((f+1)/2|0)-(0>f||1&f)):e=new o(s.toString()),f=e.e+(o.DP+=4);do t=e,e=c.times(t.plus(i.div(t)));while(t.c.slice(0,f).join("")!==e.c.slice(0,f).join(""));return n(e,o.DP-=4,o.RM)},v.times=v.mul=function(e){var r,t=this,n=t.constructor,i=t.c,o=(e=new n(e)).c,s=i.length,f=o.length,c=t.e,u=e.e;if(e.s=t.s==e.s?1:-1,!i[0]||!o[0])return new n(0*e.s);for(e.e=c+u,f>s&&(r=i,i=o,o=r,u=s,s=f,f=u),r=new Array(u=s+f);u--;)r[u]=0;for(c=f;c--;){for(f=0,u=s+c;u>c;)f=r[u]+o[c]*i[u-c-1]+f,r[u--]=f%10,f=f/10|0;r[u]=(r[u]+f)%10}for(f?++e.e:r.shift(),c=r.length;!r[--c];)r.pop();return e.c=r,e},v.toExponential=function(e){return i(this,1,e,e)},v.toFixed=function(e){return i(this,2,e,this.e+e)},v.toPrecision=function(e){return i(this,3,e,e-1)},v.toString=function(){return i(this)},v.valueOf=v.toJSON=function(){return i(this,4)},o=r(),o["default"]=o.Big=o,"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:e.Big=o}(this);/*!
	Zoom 1.7.18
	license: MIT
	http://www.jacklmoore.com/zoom
*/
(function(o){var t={url:!1,callback:!1,target:!1,duration:120,on:"mouseover",touch:!0,onZoomIn:!1,onZoomOut:!1,magnify:1};o.zoom=function(t,n,e,i){var u,c,a,r,m,l,s,f=o(t),h=f.css("position"),d=o(n);return t.style.position=/(absolute|fixed)/.test(h)?h:"relative",t.style.overflow="hidden",e.style.width=e.style.height="",o(e).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:e.width*i,height:e.height*i,border:"none",maxWidth:"none",maxHeight:"none"}).appendTo(t),{init:function(){c=f.outerWidth(),u=f.outerHeight(),n===t?(r=c,a=u):(r=d.outerWidth(),a=d.outerHeight()),m=(e.width-c)/r,l=(e.height-u)/a,s=d.offset()},move:function(o){var t=o.pageX-s.left,n=o.pageY-s.top;n=Math.max(Math.min(n,a),0),t=Math.max(Math.min(t,r),0),e.style.left=t*-m+"px",e.style.top=n*-l+"px"}}},o.fn.zoom=function(n){return this.each(function(){var e=o.extend({},t,n||{}),i=e.target&&o(e.target)[0]||this,u=this,c=o(u),a=document.createElement("img"),r=o(a),m="mousemove.zoom",l=!1,s=!1;if(!e.url){var f=u.querySelector("img");if(f&&(e.url=f.getAttribute("data-src")||f.currentSrc||f.src),!e.url)return}c.one("zoom.destroy",function(o,t){c.off(".zoom"),i.style.position=o,i.style.overflow=t,a.onload=null,r.remove()}.bind(this,i.style.position,i.style.overflow)),a.onload=function(){function t(t){f.init(),f.move(t),r.stop().fadeTo(o.support.opacity?e.duration:0,1,o.isFunction(e.onZoomIn)?e.onZoomIn.call(a):!1)}function n(){r.stop().fadeTo(e.duration,0,o.isFunction(e.onZoomOut)?e.onZoomOut.call(a):!1)}var f=o.zoom(i,u,a,e.magnify);"grab"===e.on?c.on("mousedown.zoom",function(e){1===e.which&&(o(document).one("mouseup.zoom",function(){n(),o(document).off(m,f.move)}),t(e),o(document).on(m,f.move),e.preventDefault())}):"click"===e.on?c.on("click.zoom",function(e){return l?void 0:(l=!0,t(e),o(document).on(m,f.move),o(document).one("click.zoom",function(){n(),l=!1,o(document).off(m,f.move)}),!1)}):"toggle"===e.on?c.on("click.zoom",function(o){l?n():t(o),l=!l}):"mouseover"===e.on&&(f.init(),c.on("mouseenter.zoom",t).on("mouseleave.zoom",n).on(m,f.move)),e.touch&&c.on("touchstart.zoom",function(o){o.preventDefault(),s?(s=!1,n()):(s=!0,t(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]))}).on("touchmove.zoom",function(o){o.preventDefault(),f.move(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0])}).on("touchend.zoom",function(o){o.preventDefault(),s&&(s=!1,n())}),o.isFunction(e.callback)&&e.callback.call(a)},a.src=e.url})},o.fn.zoom.defaults=t})(window.jQuery);/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
var wb_requirejs,wb_require,define;(function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}
function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,normalizedBaseParts,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=(map&&map['*'])||{};if(name){name=name.split('/');lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,'')}
if(name[0].charAt(0)==='.'&&baseParts){normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=normalizedBaseParts.concat(name)}
for(i=0;i<name.length;i++){part=name[i];if(part==='.'){name.splice(i,1);i-=1}else if(part==='..'){if(i===0||(i===1&&name[2]==='..')||name[i-1]==='..'){continue}else if(i>0){name.splice(i-1,2);i-=2}}}
name=name.join('/')}
if((baseParts||starMap)&&map){nameParts=name.split('/');for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join('/')];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break}}}}
if(foundMap){break}
if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i}}
if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}
if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join('/')}}
return name}
function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);if(typeof args[0]!=='string'&&args.length===1){args.push(null)}
return req.apply(undef,args.concat([relName,forceSync]))}}
function makeNormalize(relName){return function(name){return normalize(name,relName)}}
function makeLoad(depName){return function(value){defined[depName]=value}}
function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=!0;main.apply(undef,args)}
if(!hasProp(defined,name)&&!hasProp(defining,name)){throw new Error('No '+name)}
return defined[name]}
function splitPrefix(name){var prefix,index=name?name.indexOf('!'):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}
return[prefix,name]}
function makeRelParts(relName){return relName?splitPrefix(relName):[]}
makeMap=function(name,relParts){var plugin,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];name=parts[1];if(prefix){prefix=normalize(prefix,relResourceName);plugin=callDep(prefix)}
if(prefix){if(plugin&&plugin.normalize){name=plugin.normalize(name,makeNormalize(relResourceName))}else{name=normalize(name,relResourceName)}}else{name=normalize(name,relResourceName);parts=splitPrefix(name);prefix=parts[0];name=parts[1];if(prefix){plugin=callDep(prefix)}}
return{f:prefix?prefix+'!'+name:name,n:name,pr:prefix,p:plugin}};function makeConfig(name){return function(){return(config&&config.config&&config.config[name])||{}}}
handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];if(typeof e!=='undefined'){return e}else{return(defined[name]={})}},module:function(name){return{id:name,uri:'',exports:defined[name],config:makeConfig(name)}}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,args=[],callbackType=typeof callback,usingExports;relName=relName||name;relParts=makeRelParts(relName);if(callbackType==='undefined'||callbackType==='function'){deps=!deps.length&&callback.length?['require','exports','module']:deps;for(i=0;i<deps.length;i+=1){map=makeMap(deps[i],relParts);depName=map.f;if(depName==="require"){args[i]=handlers.require(name)}else if(depName==="exports"){args[i]=handlers.exports(name);usingExports=!0}else if(depName==="module"){cjsModule=args[i]=handlers.module(name)}else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName)){args[i]=callDep(depName)}else if(map.p){map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{});args[i]=defined[depName]}else{throw new Error(name+' missing '+depName)}}
ret=callback?callback.apply(defined[name],args):undefined;if(name){if(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]){defined[name]=cjsModule.exports}else if(ret!==undef||!usingExports){defined[name]=ret}}}else if(name){defined[name]=callback}};wb_requirejs=wb_require=req=function(deps,callback,relName,forceSync,alt){if(typeof deps==="string"){if(handlers[deps]){return handlers[deps](callback)}
return callDep(makeMap(deps,makeRelParts(callback)).f)}else if(!deps.splice){config=deps;if(config.deps){req(config.deps,config.callback)}
if(!callback){return}
if(callback.splice){deps=callback;callback=relName;relName=null}else{deps=undef}}
callback=callback||function(){};if(typeof relName==='function'){relName=forceSync;forceSync=alt}
if(!0||forceSync){main(undef,deps,callback,relName)}else{setTimeout(function(){main(undef,deps,callback,relName)},4)}
return req};req.config=function(cfg){return req(cfg)};wb_requirejs._defined=defined;define=function(name,deps,callback){if(typeof name!=='string'){throw new Error('See almond README: incorrect module build, no module name')}
if(!deps.splice){callback=deps;deps=[]}
if(!hasProp(defined,name)&&!hasProp(waiting,name)){waiting[name]=[name,deps,callback]}};define.amd={jQuery:!0}}());(function(z){'use strict';function ve(a){if(D(a))w(a.objectMaxDepth)&&(Xb.objectMaxDepth=Yb(a.objectMaxDepth)?a.objectMaxDepth:NaN),w(a.urlErrorParamsEnabled)&&Ga(a.urlErrorParamsEnabled)&&(Xb.urlErrorParamsEnabled=a.urlErrorParamsEnabled);else return Xb}function Yb(a){return X(a)&&0<a}function F(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/17.0.9/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function za(a){if(null==a||$a(a))return!1;if(H(a)||C(a)||x&&a instanceof x)return!0;var b="length"in Object(a)&&a.length;return X(b)&&(0<=b&&b-1 in a||"function"===typeof a.item)}function r(a,b,d){var c,e;if(a)if(B(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(H(a)||za(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,d,a);else if(Pc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ta.call(a,c)&&b.call(d,a[c],c,a);return a}function Qc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Zb(a){return function(b,d){a(d,b)}}function we(){return++qb}
function $b(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(D(g)||B(g))for(var k=Object.keys(g),h=0,l=k.length;h<l;h++){var m=k[h],p=g[m];d&&D(p)?ha(p)?a[m]=new Date(p.valueOf()):ab(p)?a[m]=new RegExp(p):p.nodeName?a[m]=p.cloneNode(!0):ac(p)?a[m]=p.clone():"__proto__"!==m&&(D(a[m])||(a[m]=H(p)?[]:{}),$b(a[m],[p],!0)):a[m]=p}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function S(a){return $b(a,Ha.call(arguments,1),!1)}function xe(a){return $b(a,Ha.call(arguments,1),!0)}function fa(a){return parseInt(a,10)}function bc(a,b){return S(Object.create(a),b)}function E(){}function Ta(a){return a}function ia(a){return function(){return a}}function cc(a){return B(a.toString)&&a.toString!==la}function A(a){return"undefined"===typeof a}function w(a){return"undefined"!==typeof a}function D(a){return null!==a&&"object"===typeof a}function Pc(a){return null!==a&&"object"===typeof a&&!Rc(a)}function C(a){return"string"===typeof a}function X(a){return"number"===typeof a}function ha(a){return"[object Date]"===la.call(a)}
function H(a){return Array.isArray(a)||a instanceof Array}function dc(a){switch(la.call(a)){case "[object Error]":return!0;case "[object Exception]":return!0;case "[object DOMException]":return!0;default:return a instanceof Error}}function B(a){return"function"===typeof a}function ab(a){return"[object RegExp]"===la.call(a)}function $a(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Ga(a){return"boolean"===typeof a}function ye(a){return a&&X(a.length)&&ze.test(la.call(a))}
function ac(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function Ae(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ua(a){return K(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function Ia(a,b,d){function c(a,b,c){c--;if(0>c)return"...";var d=b.$$hashKey,f;if(H(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Pc(a))for(f in a)b[f]=e(a[f],c);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=e(a[f],c));else for(f in a)ta.call(a,f)&&(b[f]=e(a[f],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function e(a,b){if(!D(a))return a;var d=g.indexOf(a);if(-1!==d)return k[d];if($a(a)||bb(a))throw oa("cpws");var d=!1,e=f(a);void 0===e&&(e=H(a)?[]:Object.create(Rc(a)),d=!0);g.push(a);k.push(e);return d?c(a,e,b):e}function f(a){switch(la.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(B(a.cloneNode))return a.cloneNode(!0)}
var g=[],k=[];d=Yb(d)?d:NaN;if(b){if(ye(b)||"[object ArrayBuffer]"===la.call(b))throw oa("cpta");if(a===b)throw oa("cpi");H(b)?b.length=0:r(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);k.push(b);return c(a,b,d)}return e(a,d)}function ec(a,b){return a===b||a!==a&&b!==b}function va(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(H(a)){if(!H(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!va(a[c],b[c]))return!1;return!0}}else{if(ha(a))return ha(b)?ec(a.getTime(),b.getTime()):!1;if(ab(a))return ab(b)?a.toString()===b.toString():!1;if(bb(a)||bb(b)||$a(a)||$a(b)||H(b)||ha(b)||ab(b))return!1;d=T();for(c in a)if("$"!==c.charAt(0)&&!B(a[c])){if(!va(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&w(b[c])&&!B(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(Ha.call(b,d))}function Va(a,b){var d=2<arguments.length?Ha.call(arguments,2):[];return!B(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Sc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:$a(b)?d="$WINDOW":b&&z.document===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE");return d}function eb(a,b){if(!A(a))return X(b)||(b=b?2:null),JSON.stringify(a,Sc,b)}function Tc(a){return C(a)?JSON.parse(a):a}function fc(a,b){a=a.replace(Be,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return Y(d)?b:d}function Uc(a,b){a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function gc(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=fc(b,c);return Uc(a,d*(b-c))}function Aa(a){a=x(a).clone().empty();var b=x("<div></div>").append(a).html();try{return a[0].nodeType===Pa?K(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(b)}}function Vc(a){try{return decodeURIComponent(a)}catch(b){}}function hc(a){var b={};r((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Vc(e),w(e)&&(f=w(f)?Vc(f):!0,ta.call(b,e)?H(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Ce(a){var b=[];r(a,function(a,c){H(a)?r(a,function(a){b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))}):b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))});return b.length?b.join("&"):""}function ic(a){return ba(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ba(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function De(a,b){var d,c,e=Qa.length;for(c=0;c<e;++c)if(d=Qa[c]+b,C(d=a.getAttribute(d)))return d;return null}function Ee(a,b){var d,c,e={};r(Qa,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});r(Qa,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(Fe?(e.strictDi=null!==De(d,"strict-di"),b(d,c?[c]:[],e)):z.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Wc(a,b,d){D(d)||(d={});d=S({strictDi:!1},d);var c=function(){a=x(a);if(a.injector()){var c=a[0]===z.document?"document":Aa(a);throw oa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"))}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=fb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;z&&e.test(z.name)&&(d.debugInfoEnabled=!0,z.name=z.name.replace(e,""));if(z&&!f.test(z.name))return c();z.name=z.name.replace(f,"");ca.resumeBootstrap=function(a){r(a,function(a){b.push(a)});return c()};B(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function Ge(){z.name="NG_ENABLE_DEBUG_INFO!"+z.name;z.location.reload()}function He(a){a=ca.element(a).injector();if(!a)throw oa("test");return a.get("$$testability")}function Xc(a,b){b=b||"_";return a.replace(Ie,function(a,c){return(c?b:"")+a.toLowerCase()})}function Je(){var a;if(!Yc){var b=rb();(sb=A(b)?z.jQuery:b?z[b]:void 0)&&sb.fn.on?(x=sb,S(sb.fn,{scope:Wa.scope,isolateScope:Wa.isolateScope,controller:Wa.controller,injector:Wa.injector,inheritedData:Wa.inheritedData})):x=U;a=x.cleanData;x.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=(x._data(f)||{}).events)&&c.$destroy&&x(f).triggerHandler("$destroy");a(b)};ca.element=x;Yc=!0}}function Ke(){U.legacyXHTMLReplacement=!0}function gb(a,b,d){if(!a)throw oa("areq",b||"?",d||"required");return a}function tb(a,b,d){d&&H(a)&&(a=a[a.length-1]);gb(B(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ja(a,b){if("hasOwnProperty"===a)throw oa("badname",b);}function Le(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&B(a)?Va(e,a):a}function ub(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=x(Ha.call(a,0,e))),c.push(b);return c||a}function T(){return Object.create(null)}function jc(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!cc(a)||H(a)||ha(a)?eb(a):a.toString()}return a}function Me(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=F("$injector"),c=F("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||F;return b(a,"module",function(){var a={};return function(f,g,k){var h={};if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return t}}function b(a,c,d){d||(d=e);return function(b,e){e&&B(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return t}}if(!g)throw d("nomod",f);var e=[],n=[],s=[],G=a("$injector","invoke","push",n),t={_invokeQueue:e,_configBlocks:n,_runBlocks:s,info:function(a){if(w(a)){if(!D(a))throw c("aobj","value");h=a;return this}return h},requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",n),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:G,run:function(a){s.push(a);return this}};k&&G(k);return t})}})}function ja(a,b){if(H(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(D(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function Ne(a,b){var d=[];Yb(b)&&(a=ca.copy(a,null,b));return JSON.stringify(a,function(a,b){b=Sc(a,b);if(D(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}
function Oe(a){S(a,{errorHandlingConfig:ve,bootstrap:Wc,copy:Ia,extend:S,merge:xe,equals:va,element:x,forEach:r,injector:fb,noop:E,bind:Va,toJson:eb,fromJson:Tc,identity:Ta,isUndefined:A,isDefined:w,isString:C,isFunction:B,isObject:D,isNumber:X,isElement:ac,isArray:H,version:Pe,isDate:ha,callbacks:{$$counter:0},getTestability:He,reloadWithDebugInfo:Ge,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ke,$$minErr:F,$$csp:Ba,$$encodeUriSegment:ic,$$encodeUriQuery:ba,$$lowercase:K,$$stringify:jc,$$uppercase:vb});lc=Me(z);lc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Qe});a.provider("$compile",Zc).directive({a:Re,input:$c,textarea:$c,form:Se,script:Te,select:Ue,option:Ve,ngBind:We,ngBindHtml:Xe,ngBindTemplate:Ye,ngClass:Ze,ngClassEven:$e,ngClassOdd:af,ngCloak:bf,ngController:cf,ngForm:df,ngHide:ef,ngIf:ff,ngInclude:gf,ngInit:hf,ngNonBindable:jf,ngPluralize:kf,ngRef:lf,ngRepeat:mf,ngShow:nf,ngStyle:of,ngSwitch:pf,ngSwitchWhen:qf,ngSwitchDefault:rf,ngOptions:sf,ngTransclude:tf,ngModel:uf,ngList:vf,ngChange:wf,pattern:ad,ngPattern:ad,required:bd,ngRequired:bd,minlength:cd,ngMinlength:cd,maxlength:dd,ngMaxlength:dd,ngValue:xf,ngModelOptions:yf}).directive({ngInclude:zf,input:Af}).directive(wb).directive(ed);a.provider({$anchorScroll:Bf,$animate:Cf,$animateCss:Df,$$animateJs:Ef,$$animateQueue:Ff,$$AnimateRunner:Gf,$$animateAsyncRun:Hf,$browser:If,$cacheFactory:Jf,$controller:Kf,$document:Lf,$$isDocumentHidden:Mf,$exceptionHandler:Nf,$filter:fd,$$forceReflow:Of,$interpolate:Pf,$interval:Qf,$$intervalFactory:Rf,$http:Sf,$httpParamSerializer:Tf,$httpParamSerializerJQLike:Uf,$httpBackend:Vf,$xhrFactory:Wf,$jsonpCallbacks:Xf,$location:Yf,$log:Zf,$parse:$f,$rootScope:ag,$q:bg,$$q:cg,$sce:dg,$sceDelegate:eg,$sniffer:fg,$$taskTrackerFactory:gg,$templateCache:hg,$templateRequest:ig,$$testability:jg,$timeout:kg,$window:lg,$$rAF:mg,$$jqLite:ng,$$Map:og,$$cookieReader:pg})}]).info({angularVersion:"17.0.9"})}function xb(a,b){return b.toUpperCase()}function yb(a){return a.replace(qg,xb)}function mc(a){a=a.nodeType;return 1===a||!a||9===a}function gd(a,b){var d,c,e,f=b.createDocumentFragment(),g=[],k;if(nc.test(a)){d=f.appendChild(b.createElement("div"));c=(rg.exec(a)||["",""])[1].toLowerCase();e=U.legacyXHTMLReplacement?a.replace(sg,"<$1></$2>"):a;if(10>wa)for(c=hb[c]||hb._default,d.innerHTML=c[1]+e+c[2],k=c[0];k--;)d=d.firstChild;else{c=qa[c]||[];for(k=c.length;-1<--k;)d.appendChild(z.document.createElement(c[k])),d=d.firstChild;d.innerHTML=e}g=db(g,d.childNodes);d=f.firstChild;d.textContent=""}else g.push(b.createTextNode(a));f.textContent="";f.innerHTML="";r(g,function(a){f.appendChild(a)});return f}function U(a){if(a instanceof U)return a;var b;C(a)&&(a=V(a),b=!0);if(!(this instanceof U)){if(b&&"<"!==a.charAt(0))throw oc("nosel");return new U(a)}if(b){b=z.document;var d;a=(d=tg.exec(a))?[b.createElement(d[1])]:(d=gd(a,b))?d.childNodes:[];pc(this,a)}else B(a)?hd(a):pc(this,a)}function qc(a){return a.cloneNode(!0)}function zb(a,b){!b&&mc(a)&&x.cleanData([a]);a.querySelectorAll&&x.cleanData(a.querySelectorAll("*"))}function id(a){for(var b in a)return!1;return!0}function jd(a){var b=a.ng339,d=b&&Ka[b],c=d&&d.events,d=d&&d.data;d&&!id(d)||c&&!id(c)||(delete Ka[b],a.ng339=void 0)}function kd(a,b,d,c){if(w(c))throw oc("offargs");var e=(c=Ab(a))&&c.events,f=c&&c.handle;if(f){if(b){var g=function(b){var c=e[b];w(d)&&cb(c||[],d);w(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};r(b.split(" "),function(a){g(a);Bb[a]&&g(Bb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b];jd(a)}}function rc(a,b){var d=a.ng339;if(d=d&&Ka[d])b?delete d.data[b]:d.data={},jd(a)}function Ab(a,b){var d=a.ng339,d=d&&Ka[d];b&&!d&&(a.ng339=d=++ug,d=Ka[d]={events:{},data:{},handle:void 0});return d}function sc(a,b,d){if(mc(a)){var c,e=w(d),f=!e&&b&&!D(b),g=!b;a=(a=Ab(a,!f))&&a.data;if(e)a[yb(b)]=d;else{if(g)return a;if(f)return a&&a[yb(b)];for(c in b)a[yb(c)]=b[c]}}}function Cb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Db(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=V(a);c=c.replace(" "+a+" "," ")});c!==d&&a.setAttribute("class",V(c))}}function Eb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=V(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});c!==d&&a.setAttribute("class",V(c))}}function pc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function ld(a,b){return Fb(a,"$"+(b||"ngController")+"Controller")}function Fb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=H(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(w(d=x.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function md(a){for(zb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Gb(a,b){b||zb(a);var d=a.parentNode;d&&d.removeChild(a)}function vg(a,b){b=b||z;if("complete"===b.document.readyState)b.setTimeout(a);else x(b).on("load",a)}function hd(a){function b(){z.document.removeEventListener("DOMContentLoaded",b);z.removeEventListener("load",b);a()}"complete"===z.document.readyState?z.setTimeout(a):(z.document.addEventListener("DOMContentLoaded",b),z.addEventListener("load",b))}function nd(a,b){var d=Hb[b.toLowerCase()];return d&&od[ua(a)]&&d}function wg(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(A(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();k&&k.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var h=f.specialHandlerWrapper||xg;1<g&&(f=ja(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||h(a,c,f[l])}};d.elem=a;return d}function xg(a,b,d){d.call(a,b)}function yg(a,b,d){var c=b.relatedTarget;c&&(c===a||zg.call(a,c))||d.call(a,b)}function ng(){this.$get=function(){return S(U,{hasClass:function(a,b){a.attr&&(a=a[0]);return Cb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Eb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)}})}}function La(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||we)():d+":"+a}function pd(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function qd(a){a=Function.prototype.toString.call(a).replace(Ag,"");return a.match(Bg)||a.match(Cg)}function Dg(a){return(a=qd(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,c){if(D(b))r(b,Zb(a));else return a(b,c)}}function c(a,b){Ja(a,"service");if(B(b)||H(b))b=n.instantiate(b);if(!b.$get)throw Ca("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=t.invoke(b,this);if(A(c))throw Ca("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){gb(A(a)||H(a),"modulesToLoad","not an array");var b=[],c;r(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=n.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{C(a)?(c=lc(a),t.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):B(a)?b.push(n.invoke(a)):H(a)?b.push(n.invoke(a)):tb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ca("modulerr",a,e.stack||e.message||e)}}});return b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===h)throw Ca("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=h,a[b]=c(b,e),a[b]}catch(f){throw a[b]===h&&delete a[b],f}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ca("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);H(a)&&(a=a[a.length-1]);d=a;if(wa||"function"!==typeof d)d=!1;else{var f=d.$$ngIsClass;Ga(f)||(f=d.$$ngIsClass=/^class\b/.test(Function.prototype.toString.call(d)));d=f}return d?(c.unshift(null),new(Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=H(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new(Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}
b=!0===b;var h={},l=[],m=new Ib,p={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ia(b),!1)}),constant:d(function(a,b){Ja(a,"constant");p[a]=b;s[a]=b}),decorator:function(a,b){var c=n.get(a+"Provider"),d=c.$get;c.$get=function(){var a=t.invoke(d,c);return t.invoke(b,null,{$delegate:a})}}}},n=p.$injector=k(p,function(a,b){ca.isString(b)&&l.push(b);throw Ca("unpr",l.join(" <- "))}),s={},G=k(s,function(a,b){var c=n.get(a+"Provider",b);return t.invoke(c.$get,c,void 0,a)}),t=G;p.$injectorProvider={$get:ia(G)};t.modules=n.modules=T();var N=g(a),t=G.get("$injector");t.strictDi=b;r(N,function(a){a&&t.invoke(a)});t.loadNewModules=function(a){r(g(a),function(a){a&&t.invoke(a)})};return t}function Bf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ua(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;B(c)?c=c():ac(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):X(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=C(a)?a:X(a)?a.toString():d.hash();var b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var k=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||vg(function(){c.$evalAsync(g)})});return g}]}function ib(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;H(a)&&(a=a.join(" "));H(b)&&(b=b.join(" "));return a+" "+b}function Eg(a){C(a)&&(a=a.split(" "));var b=T();r(a,function(a){a.length&&(b[a]=!0)});return b}function ra(a){return D(a)?a:{}}function Fg(a,b,d,c,e){function f(){pa=null;k()}function g(){t=y();t=A(t)?null:t;va(t,P)&&(t=P);N=P=t}function k(){var a=N;g();if(v!==h.url()||a!==t)v=h.url(),N=t,r(J,function(a){a(h.url(),t)})}
var h=this,l=a.location,m=a.history,p=a.setTimeout,n=a.clearTimeout,s={},G=e(d);h.isMock=!1;h.$$completeOutstandingRequest=G.completeTask;h.$$incOutstandingRequestCount=G.incTaskCount;h.notifyWhenNoOutstandingRequests=G.notifyWhenNoPendingTasks;var t,N,v=l.href,kc=b.find("base"),pa=null,y=c.history?function(){try{return m.state}catch(a){}}:E;g();h.url=function(b,d,e){A(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=N===e;b=ga(b).href;if(v===b&&(!c.history||f))return h;var k=v&&Da(v)===Da(b);v=b;N=e;!c.history||k&&f?(k||(pa=b),d?l.replace(b):k?(d=l,e=b,f=e.indexOf("#"),e=-1===f?"":e.substr(f),d.hash=e):l.href=b,l.href!==b&&(pa=b)):(m[d?"replaceState":"pushState"](e,"",b),g());pa&&(pa=b);return h}return(pa||l.href).replace(/#$/,"")};h.state=function(){return t};var J=[],I=!1,P=null;h.onUrlChange=function(b){if(!I){if(c.history)x(a).on("popstate",f);x(a).on("hashchange",f);I=!0}J.push(b);return b};h.$$applicationDestroyed=function(){x(a).off("hashchange popstate",f)};h.$$checkUrlChange=k;h.baseHref=function(){var a=kc.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};h.defer=function(a,b,c){var d;b=b||0;c=c||G.DEFAULT_TASK_TYPE;G.incTaskCount(c);d=p(function(){delete s[d];G.completeTask(a,c)},b);s[d]=c;return d};h.defer.cancel=function(a){if(s.hasOwnProperty(a)){var b=s[a];delete s[a];n(a);G.completeTask(E,b);return!0}return!1}}function If(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(a,b,d,c,e){return new Fg(a,c,b,d,e)}]}function Jf(){this.$get=function(){function a(a,c){function e(a){a!==p&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw F("$cacheFactory")("iid",a);var g=0,k=S({},c,{id:a}),h=T(),l=c&&c.capacity||Number.MAX_VALUE,m=T(),p=null,n=null;return b[a]={put:function(a,b){if(!A(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in h||g++;h[a]=b;g>l&&this.remove(n.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return h[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===p&&(p=b.p);b===n&&(n=b.n);f(b.n,b.p);delete m[a]}a in h&&(delete h[a],g--)},removeAll:function(){h=T();g=0;m=T();p=n=null},destroy:function(){m=k=h=null;delete b[a]},info:function(){return S({},k,{size:g})}}}var b={};a.info=function(){var a={};r(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function hg(){this.$get=["$cacheFactory",function(a){return a("templates")}]}
function Zc(a,b){function d(a,b,c){var d=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,e=T();r(a,function(a,f){a=a.trim();if(a in p)e[f]=p[a];else{var g=a.match(d);if(!g)throw $("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(p[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==K(b))throw $("baddir",a);if(a!==a.trim())throw $("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;!H(b)&&D(b)&&r(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,h=Ae("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,p=T();this.directive=function pa(b,d){gb(b,"name");Ja(b,"directive");C(b)?(c(b),gb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];r(f[b],function(f,g){try{var h=a.invoke(f);B(h)?h={compile:ia(h)}:!h.compile&&h.link&&(h.compile=ia(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!C(l)||!/[EACM]/.test(l)))throw $("badrestrict",l,b);k.restrict=l||"EA";h.$$moduleName=f.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):r(b,Zb(pa));return this};this.component=function y(a,b){function c(a){function e(b){return B(b)||H(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Gg(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};r(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}if(!C(a))return r(a,Zb(Va(this,y))),this;var d=b.controller||function(){};r(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,B(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationTrustedUrlList=function(a){return w(a)?(b.aHrefSanitizationTrustedUrlList(a),this):b.aHrefSanitizationTrustedUrlList()};Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(a){this.aHrefSanitizationTrustedUrlList=a}});this.imgSrcSanitizationTrustedUrlList=function(a){return w(a)?(b.imgSrcSanitizationTrustedUrlList(a),this):b.imgSrcSanitizationTrustedUrlList()};Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(a){this.imgSrcSanitizationTrustedUrlList=a}});var n=!0;this.debugInfoEnabled=function(a){return w(a)?(n=a,this):n};var s=!1;this.strictComponentBindingsEnabled=function(a){return w(a)?(s=a,this):s};var G=10;this.onChangesTtl=function(a){return arguments.length?(G=a,this):G};var t=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};var N=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(N=a,this):N};var v=T();this.addPropertySecurityContext=function(a,b,c){var d=a.toLowerCase()+"|"+b.toLowerCase();if(d in v&&v[d]!==c)throw $("ctxoverride",a,b,v[d],c);v[d]=c;return this};(function(){function a(b,c){r(c,function(a){v[a.toLowerCase()]=b})}a(W.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]);a(W.CSS,["*|style"]);a(W.URL,"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite".split(" "));a(W.MEDIA_URL,"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster".split(" "));a(W.RESOURCE_URL,"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src".split(" "))})();this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(a,b,c,e,p,M,L,u,R){function q(){try{if(!--Ja)throw Ua=void 0,$("infchng",G);L.$apply(function(){for(var a=0,b=Ua.length;a<b;++a)try{Ua[a]()}catch(d){c(d)}Ua=void 0})}finally{Ja++}}function ma(a,b){if(!a)return a;if(!C(a))throw $("srcset",b,a.toString());for(var c="",d=V(a),e=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,e=/\s/.test(d)?e:/(,)/,d=d.split(e),e=Math.floor(d.length/2),f=0;f<e;f++)var g=2*f,c=c+u.getTrustedMediaUrl(V(d[g])),c=c+(" "+V(d[g+1]));d=V(d[2*f]).split(/\s/);c+=u.getTrustedMediaUrl(V(d[0]));2===d.length&&(c+=" "+V(d[1]));return c}function w(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function O(a,b,c){Fa.innerHTML="<span "+b+">";b=Fa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function sa(a,b){try{a.addClass(b)}catch(c){}}function da(a,b,c,d,e){a instanceof x||(a=x(a));var f=Xa(a,b,a,c,d,e);da.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw $("multilink");gb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ua(d)&&la.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==g?x(ja(g,x("<div></div>").append(a).html())):c?Wa.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);da.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function Xa(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,I,t;if(n)for(t=Array(c.length),m=0;m<h.length;m+=3)f=h[m],t[f]=c[f];else t=c;m=0;for(p=h.length;m<p;)k=t[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),da.$$addScopeInfo(x(k),l)):l=a,I=c.transcludeOnThisElement?ka(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ka(a,b):null,c(f,l,k,d,I)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k=H(a)||a instanceof x,l,m,p,I,n,t=0;t<a.length;t++){l=new w;11===wa&&jb(a,t,k);m=tc(a[t],[],l,0===t?d:void 0,e);(f=m.length?aa(m,a[t],l,b,c,null,[],[],f):null)&&f.scope&&da.$$addScopeClass(l.$$element);l=f&&f.terminal||!(p=a[t].childNodes)||!p.length?null:Xa(p,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(t,f,l),I=!0,n=n||f;f=null}return I?g:null}function jb(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===Pa)for(;;){f=e?d.nextSibling:a[b+1];if(!f||f.nodeType!==Pa)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function ka(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=T(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ka(a,b.$$slots[f],c):null;return d}function tc(a,b,d,e,f){var g=d.$attr,h;switch(a.nodeType){case 1:h=ua(a);Y(b,xa(h),"E",e,f);for(var l,m,n,t,J,s=a.attributes,v=0,G=s&&s.length;v<G;v++){var P=!1,N=!1,r=!1,y=!1,u=!1,M;l=s[v];m=l.name;t=l.value;n=xa(m.toLowerCase());(J=n.match(Ra))?(r="Attr"===J[1],y="Prop"===J[1],u="On"===J[1],m=m.replace(rd,"").toLowerCase().substr(4+J[1].length).replace(/_(.)/g,function(a,b){return b.toUpperCase()})):(M=n.match(Sa))&&ca(M[1])&&(P=m,N=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6));if(y||u)d[n]=t,g[n]=l.name,y?Ea(a,b,n,m):b.push(sd(p,L,c,n,m,!1));else{n=xa(m.toLowerCase());g[n]=m;if(r||!d.hasOwnProperty(n))d[n]=t,nd(a,n)&&(d[n]=!0);Ia(a,b,t,n,r);Y(b,n,"A",e,f,P,N)}}"input"===h&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!Qa)break;g=a.className;D(g)&&(g=g.animVal);if(C(g)&&""!==g)for(;a=k.exec(g);)n=xa(a[2]),Y(b,n,"C",e,f)&&(d[n]=V(a[3])),g=g.substr(a.index+a[0].length);break;case Pa:na(b,a.nodeValue);break;case 8:if(!Oa)break;F(a,b,d,e,f)}b.sort(ia);return b}function F(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=xa(f[1]);Y(b,h,"M",d,e)&&(c[h]=V(f[2]))}}catch(k){}}function U(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw $("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return x(d)}function W(a,b,c){return function(d,e,f,g,h){e=U(e[0],b,c);return a(d,e,f,g,h)}}function Z(a,b,c,d,e,f){var g;return a?da(b,c,d,e,f):function(){g||(g=da(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function aa(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=W(a,c,d));a.require=u.require;a.directiveName=Q;if(s===u||u.$$isolateScope)a=Ba(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=W(b,c,d));b.require=u.require;b.directiveName=Q;if(s===u||u.$$isolateScope)b=Ba(b,{isolateScope:!0});k.push(b)}}function p(a,e,f,g,l){function m(a,b,c,d){var e;bb(a)||(d=c,c=b,b=a,a=void 0);N&&(e=P);c||(c=N?Q.parent():Q);if(d){var f=l.$$slots[d];if(f)return f(a,b,e,c,R);if(A(f))throw $("noslot",d,Aa(Q));}else return l(a,b,e,c,R)}var n,u,L,y,G,P,M,Q;b===f?(g=d,Q=d.$$element):(Q=x(f),g=new w(Q,d));G=e;s?y=e.$new(!0):t&&(G=e.$parent);l&&(M=m,M.$$boundTransclude=l,M.isSlotFilled=function(a){return!!l.$$slots[a]});J&&(P=ea(Q,g,M,J,y,e,s));s&&(da.$$addScopeInfo(Q,y,!0,!(v&&(v===s||v===s.$$originalDirective))),da.$$addScopeClass(Q,!0),y.$$isolateBindings=s.$$isolateBindings,u=Da(e,g,y,y.$$isolateBindings,s),u.removeWatches&&y.$on("$destroy",u.removeWatches));for(n in P){u=J[n];L=P[n];var Hg=u.$$bindings.bindToController;L.instance=L();Q.data("$"+u.name+"Controller",L.instance);L.bindingInfo=Da(G,g,L.instance,Hg,u)}r(J,function(a,b){var c=a.require;a.bindToController&&!H(c)&&D(c)&&S(P[b].instance,X(b,c,Q,P))});r(P,function(a){var b=a.instance;if(B(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(B(b.$onInit))try{b.$onInit()}catch(e){c(e)}B(b.$doCheck)&&(G.$watch(function(){b.$doCheck()}),b.$doCheck());B(b.$onDestroy)&&G.$on("$destroy",function(){b.$onDestroy()})});n=0;for(u=h.length;n<u;n++)L=h[n],Ca(L,L.isolateScope?y:e,Q,g,L.require&&X(L.directiveName,L.require,Q,P),M);var R=e;s&&(s.template||null===s.templateUrl)&&(R=y);a&&a(R,f.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)L=k[n],Ca(L,L.isolateScope?y:e,Q,g,L.require&&X(L.directiveName,L.require,Q,P),M);r(P,function(a){a=a.instance;B(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,t=l.newScopeDirective,J=l.controllerDirectives,s=l.newIsolateScopeDirective,v=l.templateDirective,L=l.nonTlbTranscludeDirective,G=!1,P=!1,N=l.hasElementTranscludeDirective,y=d.$$element=x(b),u,Q,M,R=e,q,ma=!1,Jb=!1,O,sa=0,C=a.length;sa<C;sa++){u=a[sa];var E=u.$$start,jb=u.$$end;E&&(y=U(b,E,jb));M=void 0;if(n>u.priority)break;if(O=u.scope)u.templateUrl||(D(O)?(ba("new/isolated scope",s||t,u,y),s=u):ba("new/isolated scope",s,u,y)),t=t||u;Q=u.name;if(!ma&&(u.replace&&(u.templateUrl||u.template)||u.transclude&&!u.$$tlb)){for(O=sa+1;ma=a[O++];)if(ma.transclude&&!ma.$$tlb||ma.replace&&(ma.templateUrl||ma.template)){Jb=!0;break}ma=!0}!u.templateUrl&&u.controller&&(J=J||T(),ba("'"+Q+"' controller",J[Q],u,y),J[Q]=u);if(O=u.transclude)if(G=!0,u.$$tlb||(ba("transclusion",L,u,y),L=u),"element"===O)N=!0,n=u.priority,M=y,y=d.$$element=x(da.$$createComment(Q,d[Q])),b=y[0],oa(f,Ha.call(M,0),b),R=Z(Jb,M,e,n,g&&g.name,{nonTlbTranscludeDirective:L});else{var ka=T();if(D(O)){M=z.document.createDocumentFragment();var Xa=T(),F=T();r(O,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Xa[a]=b;ka[b]=null;F[b]=c});r(y.contents(),function(a){var b=Xa[xa(ua(a))];b?(F[b]=!0,ka[b]=ka[b]||z.document.createDocumentFragment(),ka[b].appendChild(a)):M.appendChild(a)});r(F,function(a,b){if(!a)throw $("reqslot",b);});for(var K in ka)ka[K]&&(R=x(ka[K].childNodes),ka[K]=Z(Jb,R,e));M=x(M.childNodes)}else M=x(qc(b)).contents();y.empty();R=Z(Jb,M,e,void 0,void 0,{needsNewScope:u.$$isolateScope||u.$$newScope});R.$$slots=ka}if(u.template)if(P=!0,ba("template",v,u,y),v=u,O=B(u.template)?u.template(y,d):u.template,O=Na(O),u.replace){g=u;M=nc.test(O)?td(ja(u.templateNamespace,V(O))):[];b=M[0];if(1!==M.length||1!==b.nodeType)throw $("tplrt",Q,"");oa(f,y,b);C={$attr:{}};O=tc(b,[],C);var Ig=a.splice(sa+1,a.length-(sa+1));(s||t)&&fa(O,s,t);a=a.concat(O).concat(Ig);ga(d,C);C=a.length}else y.html(O);if(u.templateUrl)P=!0,ba("template",v,u,y),v=u,u.replace&&(g=u),p=ha(a.splice(sa,a.length-sa),y,d,f,G&&R,h,k,{controllerDirectives:J,newScopeDirective:t!==u&&t,newIsolateScopeDirective:s,templateDirective:v,nonTlbTranscludeDirective:L}),C=a.length;else if(u.compile)try{q=u.compile(y,d,R);var Y=u.$$originalDirective||u;B(q)?m(null,Va(Y,q),E,jb):q&&m(Va(Y,q.pre),Va(Y,q.post),E,jb)}catch(ca){c(ca,Aa(y))}u.terminal&&(p.terminal=!0,n=Math.max(n,u.priority))}p.scope=t&&!0===t.scope;p.transcludeOnThisElement=G;p.templateOnThisElement=P;p.transclude=R;l.hasElementTranscludeDirective=N;return p}function X(a,b,c,d){var e;if(C(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e="^^"===g&&c[0]&&9===c[0].nodeType?null:g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw $("ctreq",b,a);}else if(H(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=X(a,b[g],c,d);else D(b)&&(e={},r(b,function(b,f){e[f]=X(a,b,c,d)}));return e||null}function ea(a,b,c,d,e,f,g){var h=T(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"===p&&(p=b[l.name]);m=M(p,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function fa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=bc(a[d],{$$isolateScope:b,$$newScope:c})}function Y(b,c,e,g,h,k,l){if(c===h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var p=0,n=h.length;p<n;p++)if(c=h[p],(A(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=bc(c,{$$start:k,$$end:l}));if(!c.$$bindings){var I=m=c,t=c.name,u={isolateScope:null,bindToController:null};D(I.scope)&&(!0===I.bindToController?(u.bindToController=d(I.scope,t,!0),u.isolateScope={}):u.isolateScope=d(I.scope,t,!1));D(I.bindToController)&&(u.bindToController=d(I.bindToController,t,!0));if(u.bindToController&&!I.controller)throw $("noctrl",t);m=m.$$bindings=u;D(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function ca(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function ga(a,b){var c=b.$attr,d=a.$attr;r(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ha(a,b,d,f,g,h,k,l){var m=[],p,n,t=b[0],u=a.shift(),J=bc(u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),s=B(u.templateUrl)?u.templateUrl(b,d):u.templateUrl,L=u.templateNamespace;b.empty();e(s).then(function(c){var e,I;c=Na(c);if(u.replace){c=nc.test(c)?td(ja(L,V(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw $("tplrt",u.name,s);c={$attr:{}};oa(f,b,e);var v=tc(e,[],c);D(u.scope)&&fa(v,!0);a=v.concat(a);ga(d,c)}else e=t,b.html(c);a.unshift(J);p=aa(a,e,d,g,b,u,h,k,l);r(f,function(a,c){a===e&&(f[c]=b[0])});for(n=Xa(b[0].childNodes,g);m.length;){c=m.shift();I=m.shift();var y=m.shift(),P=m.shift(),v=b[0];if(!c.$$destroyed){if(I!==t){var G=I.className;l.hasElementTranscludeDirective&&u.replace||(v=qc(e));oa(y,x(I),v);sa(x(v),G)}I=p.transcludeOnThisElement?ka(c,p.transclude,P):P;p(n,c,v,f,I)}}m=null}).catch(function(a){dc(a)&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,c,d,a):(p.transcludeOnThisElement&&(a=ka(b,p.transclude,e)),p(n,b,c,d,a)))}}function ia(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ba(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw $("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Aa(d));}function na(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&da.$$addBindingClass(a);return function(a,c){var e=c.parent();b||da.$$addBindingClass(e);da.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ja(a,b){a=K(a||"html");switch(a){case "svg":case "math":var c=z.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function qa(a,b){if("srcdoc"===b)return u.HTML;if("src"===b||"ngSrc"===b)return-1===["img","video","audio","source","track"].indexOf(a)?u.RESOURCE_URL:u.MEDIA_URL;if("xlinkHref"===b)return"image"===a?u.MEDIA_URL:"a"===a?u.URL:u.RESOURCE_URL;if("form"===a&&"action"===b||"base"===a&&"href"===b||"link"===a&&"href"===b)return u.RESOURCE_URL;if("a"===a&&("href"===b||"ngHref"===b))return u.URL}function ya(a,b){var c=b.toLowerCase();return v[a+"|"+c]||v["*|"+c]}function za(a){return ma(u.valueOf(a),"ng-prop-srcset")}function Ea(a,b,c,d){if(m.test(d))throw $("nodomevents");a=ua(a);var e=ya(a,d),f=Ta;"srcset"!==d||"img"!==a&&"source"!==a?e&&(f=u.getTrusted.bind(u,e)):f=za;b.push({priority:100,compile:function(a,b){var e=p(b[c]),g=p(b[c],function(a){return u.valueOf(a)});return{pre:function(a,b){function c(){var g=e(a);b[0][d]=f(g)}c();a.$watch(g,c)}}}})}function Ia(a,c,d,e,f){var g=ua(a),k=qa(g,e),l=h[e]||f,p=b(d,!f,k,l);if(p){if("multiple"===e&&"select"===g)throw $("selmulti",Aa(a));if(m.test(e))throw $("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=T());var g=f[e];g!==d&&(p=g&&b(g,!0,k,l),d=g);p&&(f[e]=p(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(p,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function oa(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=z.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);x.hasData(d)&&(x.data(c,x.data(d)),x(d).off("$destroy"));x.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function Ba(a,b){return S(function(){return a.apply(null,arguments)},a,b)}function Ca(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,Aa(d))}}function ra(a,b){if(s)throw $("missingattr",a,b);}function Da(a,c,d,e,f){function g(b,c,e){B(d.$onChanges)&&!ec(c,e)&&(Ua||(a.$$postDigest(q),Ua=[]),m||(m={},Ua.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Kb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;r(e,function(e,h){var m=e.attrName,n=e.optional,I,t,u,s;switch(e.mode){case "@":n||ta.call(c,m)||(ra(m,f.name),d[h]=c[m]=void 0);n=c.$observe(m,function(a){if(C(a)||Ga(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;I=c[m];C(I)?d[h]=b(I)(a):Ga(I)&&(d[h]=I);l[h]=new Kb(uc,d[h]);k.push(n);break;case "=":if(!ta.call(c,m)){if(n)break;ra(m,f.name);c[m]=void 0}if(n&&!c[m])break;t=p(c[m]);s=t.literal?va:ec;u=t.assign||function(){I=d[h]=t(a);throw $("nonassign",c[m],m,f.name)};I=d[h]=t(a);n=function(b){s(b,d[h])||(s(b,I)?u(a,b=d[h]):d[h]=b);return I=b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(p(c[m],n),null,t.literal);k.push(n);break;case "<":if(!ta.call(c,m)){if(n)break;ra(m,f.name);c[m]=void 0}if(n&&!c[m])break;t=p(c[m]);var v=t.literal,L=d[h]=t(a);l[h]=new Kb(uc,d[h]);n=a[e.collection?"$watchCollection":"$watch"](t,function(a,b){if(b===a){if(b===L||v&&va(b,L))return;b=L}g(h,a,b);d[h]=a});k.push(n);break;case "&":n||ta.call(c,m)||ra(m,f.name);t=c.hasOwnProperty(m)?p(c[m]):E;if(t===E&&n)break;d[h]=function(b){return t(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ma=/^\w/,Fa=z.document.createElement("div"),Oa=t,Qa=N,Ja=G,Ua;w.prototype={$normalize:xa,$addClass:function(a){a&&0<a.length&&R.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&R.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=ud(a,b);c&&c.length&&R.addClass(this.$$element,c);(c=ud(b,a))&&c.length&&R.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=nd(this.$$element[0],a),g=vd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Xc(a,"-"));"img"===ua(this.$$element)&&"srcset"===a&&(this[a]=b=ma(b,"$set('srcset', value)"));!1!==d&&(null===b||A(b)?this.$$element.removeAttr(e):Ma.test(e)?f&&!1===b?this.$$element.removeAttr(e):this.$$element.attr(e,b):O(this.$$element[0],e,b));(a=this.$$observers)&&r(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=T()),e=d[a]||(d[a]=[]);e.push(b);L.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||A(c[a])||b(c[a])});return function(){cb(e,b)}}};var Ka=b.startSymbol(),La=b.endSymbol(),Na="{{"===Ka&&"}}"===La?Ta:function(a){return a.replace(/\{\{/g,Ka).replace(/}}/g,La)},Ra=/^ng(Attr|Prop|On)([A-Z].*)$/,Sa=/^(.+)Start$/;da.$$addBindingInfo=n?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:E;da.$$addBindingClass=n?function(a){sa(a,"ng-binding")}:E;da.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:E;da.$$addScopeClass=n?function(a,b){sa(a,b?"ng-isolate-scope":"ng-scope")}:E;da.$$createComment=function(a,b){var c="";n&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return z.document.createComment(c)};return da}]}function Kb(a,b){this.previousValue=a;this.currentValue=b}function xa(a){return a.replace(rd,"").replace(Jg,function(a,d,c){return c?d.toUpperCase():d})}function ud(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],k=0;k<e.length;k++)if(g===e[k])continue a;d+=(0<d.length?" ":"")+g}return d}function td(a){a=x(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Pa&&""===d.nodeValue.trim())&&Kg.call(a,b,1)}return a}
function Gg(a,b){if(b&&C(b))return b;if(C(a)){var d=wd.exec(a);if(d)return d[3]}}function Kf(){var a={};this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,d){Ja(b,"controller");D(b)?S(a,b):a[b]=d};this.$get=["$injector",function(b){function d(a,b,d,g){if(!a||!D(a.$scope))throw F("$controller")("noscp",g,b);a.$scope[b]=d}return function(c,e,f,g){var k,h,l;f=!0===f;g&&C(g)&&(l=g);if(C(c)){g=c.match(wd);if(!g)throw xd("ctrlfmt",c);h=g[1];l=l||g[3];c=a.hasOwnProperty(h)?a[h]:Le(e.$scope,h,!0);if(!c)throw xd("ctrlreg",h);tb(c,h,!0)}if(f)return f=(H(c)?c[c.length-1]:c).prototype,k=Object.create(f||null),l&&d(e,l,k,h||c.name),S(function(){var a=b.invoke(c,k,e,h);a!==k&&(D(a)||B(a))&&(k=a,l&&d(e,l,k,h||c.name));return k},{instance:k,identifier:l});k=b.instantiate(c,e,h);l&&d(e,l,k,h||c.name);return k}}]}function Lf(){this.$get=["$window",function(a){return x(a.document)}]}function Mf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}function Nf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function vc(a){return D(a)?ha(a)?a.toISOString():eb(a):a}function Tf(){this.$get=function(){return function(a){if(!a)return"";var b=[];Qc(a,function(a,c){null===a||A(a)||B(a)||(H(a)?r(a,function(a){b.push(ba(c)+"="+ba(vc(a)))}):b.push(ba(c)+"="+ba(vc(a))))});return b.join("&")}}}function Uf(){this.$get=function(){return function(a){function b(a,e,f){H(a)?r(a,function(a,c){b(a,e+"["+(D(a)?c:"")+"]")}):D(a)&&!ha(a)?Qc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):(B(a)&&(a=a()),d.push(ba(e)+"="+(null==a?"":ba(vc(a)))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function wc(a,b){if(C(a)){var d=a.replace(Lg,"").trim();if(d){var c=b("Content-Type"),c=c&&0===c.indexOf(yd),e;(e=c)||(e=(e=d.match(Mg))&&Ng[e[0]].test(d));if(e)try{a=Tc(d)}catch(f){if(!c)return a;throw Lb("baddata",a,f)}}}return a}
function zd(a){var b=T(),d;C(a)?r(a.split("\n"),function(a){d=a.indexOf(":");var e=K(V(a.substr(0,d)));a=V(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):D(a)&&r(a,function(a,d){var f=K(d),g=V(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function Ad(a){var b;return function(d){b||(b=zd(a));return d?(d=b[K(d)],void 0===d&&(d=null),d):b}}function Bd(a,b,d,c){if(B(c))return c(a,b,d);r(c,function(c){a=c(a,b,d)});return a}function Sf(){var a=this.defaults={transformResponse:[wc],transformRequest:[function(a){return D(a)&&"[object File]"!==la.call(a)&&"[object Blob]"!==la.call(a)&&"[object FormData]"!==la.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ja(xc),put:ja(xc),patch:ja(xc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return w(a)?(b=!!a,this):b};var d=this.interceptors=[],c=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(a){this.xsrfTrustedOrigins=a}});this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(e,f,g,k,h,l,m,p){function n(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,g)}b.length=0;return a}function d(a,b){var c,e={};r(a,function(a,d){B(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a});return e}function f(a){var b=S({},a);b.data=Bd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:l.reject(b)}if(!D(b))throw F("$http")("badreq",b);if(!C(p.valueOf(b.url)))throw F("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);g.headers=function(b){var c=a.headers,e=S({},b.headers),f,g,h,c=S({},c.common,c[K(b.method)]);a:for(f in c){g=K(f);for(h in e)if(K(h)===g)continue a;e[f]=c[f]}return d(e,ja(b))}(b);g.method=vb(g.method);g.paramSerializer=C(g.paramSerializer)?m.get(g.paramSerializer):g.paramSerializer;e.$$incOutstandingRequestCount("$http");var h=[],k=[];b=l.resolve(g);r(v,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});b=c(b,h);b=b.then(function(b){var c=b.headers,d=Bd(b.data,Ad(c),void 0,b.transformRequest);A(d)&&r(c,function(a,b){"content-type"===K(b)&&delete c[b]});A(b.withCredentials)&&!A(a.withCredentials)&&(b.withCredentials=a.withCredentials);return s(b,d).then(f,f)});b=c(b,k);return b=b.finally(function(){e.$$completeOutstandingRequest(E,"$http")})}function s(c,d){function e(a){if(a){var c={};r(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function k(a,c,d,e,f){function g(){m(c,a,d,e,f)}R&&(200<=a&&300>a?R.put(O,[a,c,zd(d),e,f]):R.remove(O));b?h.$applyAsync(g):(g(),h.$$phase||h.$apply())}function m(a,b,d,e,f){b=-1<=b?b:0;(200<=b&&300>b?L.resolve:L.reject)({data:a,status:b,headers:Ad(d),config:c,statusText:e,xhrStatus:f})}function s(a){m(a.data,a.status,ja(a.headers()),a.statusText,a.xhrStatus)}function v(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var L=l.defer(),u=L.promise,R,q,ma=c.headers,x="jsonp"===K(c.method),O=c.url;x?O=p.getTrustedResourceUrl(O):C(O)||(O=p.valueOf(O));O=G(O,c.paramSerializer(c.params));x&&(O=t(O,c.jsonpCallbackParam));n.pendingRequests.push(c);u.then(v,v);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(R=D(c.cache)?c.cache:D(a.cache)?a.cache:N);R&&(q=R.get(O),w(q)?q&&B(q.then)?q.then(s,s):H(q)?m(q[1],q[0],ja(q[2]),q[3],q[4]):m(q,200,{},"OK","complete"):R.put(O,u));A(q)&&((q=kc(c.url)?g()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(ma[c.xsrfHeaderName||a.xsrfHeaderName]=q),f(c.method,O,d,k,ma,c.timeout,c.withCredentials,c.responseType,e(c.eventHandlers),e(c.uploadEventHandlers)));return u}function G(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function t(a,b){var c=a.split("?");if(2<c.length)throw Lb("badjsonp",a);c=hc(c[1]);r(c,function(c,d){if("JSON_CALLBACK"===c)throw Lb("badjsonp",a);if(d===b)throw Lb("badjsonp",b,a);});return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var N=k("$http");a.paramSerializer=C(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var v=[];r(d,function(a){v.unshift(C(a)?m.get(a):m.invoke(a))});var kc=Og(c);n.pendingRequests=[];(function(a){r(arguments,function(a){n[a]=function(b,c){return n(S({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){n[a]=function(b,c,d){return n(S({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function Wf(){this.$get=function(){return function(){return new z.XMLHttpRequest}}}function Vf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return Pg(a,c,a.defer,b,d[0])}]}function Pg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",m);e.body.removeChild(f);f=null;var g=-1,s="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),s=a.type,g="error"===a.type?404:200);d&&d(g,s)};f.addEventListener("load",m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,k,h,l,m,p,n,s,G,t){function N(a){J="timeout"===a;pa&&pa();y&&y.abort()}function v(a,b,c,e,f,g){w(P)&&d.cancel(P);pa=y=null;a(b,c,e,f,g)}k=k||a.url();if("jsonp"===K(e))var q=c.createCallback(k),pa=f(k,q,function(a,b){var d=200===a&&c.getResponse(q);v(l,a,d,"",b,"complete");c.removeCallback(q)});else{var y=b(e,k),J=!1;y.open(e,k,!0);r(m,function(a,b){w(a)&&y.setRequestHeader(b,a)});y.onload=function(){var a=y.statusText||"",b="response"in y?y.response:y.responseText,c=1223===y.status?204:y.status;0===c&&(c=b?200:"file"===ga(k).protocol?404:0);v(l,c,b,y.getAllResponseHeaders(),a,"complete")};y.onerror=function(){v(l,-1,null,null,"","error")};y.ontimeout=function(){v(l,-1,null,null,"","timeout")};y.onabort=function(){v(l,-1,null,null,"",J?"timeout":"abort")};r(G,function(a,b){y.addEventListener(b,a)});r(t,function(a,b){y.upload.addEventListener(b,a)});n&&(y.withCredentials=!0);if(s)try{y.responseType=s}catch(I){if("json"!==s)throw I}y.send(A(h)?null:h)}if(0<p)var P=d(function(){N("timeout")},p);else p&&B(p.then)&&p.then(function(){N(w(p.$$timeoutId)?"timeout":"abort")})}}function Pf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(p,a).replace(n,b)}function k(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function h(f,h,n,p){function v(a){try{return a=n&&!r?e.getTrusted(n,a):e.valueOf(a),p&&!w(a)?a:jc(a)}catch(b){c(Ma.interr(f,b))}}var r=n===e.URL||n===e.MEDIA_URL;if(!f.length||-1===f.indexOf(a)){if(h)return;h=g(f);r&&(h=e.getTrusted(n,h));h=ia(h);h.exp=f;h.expressions=[];h.$$watchDelegate=k;return h}p=!!p;for(var q,y,J=0,I=[],P,Q=f.length,M=[],L=[],u;J<Q;)if(-1!==(q=f.indexOf(a,J))&&-1!==(y=f.indexOf(b,q+l)))J!==q&&M.push(g(f.substring(J,q))),J=f.substring(q+l,y),I.push(J),J=y+m,L.push(M.length),M.push("");else{J!==Q&&M.push(g(f.substring(J)));break}u=1===M.length&&1===L.length;var R=r&&u?void 0:v;P=I.map(function(a){return d(a,R)});if(!h||I.length){var x=function(a){for(var b=0,c=I.length;b<c;b++){if(p&&A(a[b]))return;M[L[b]]=a[b]}if(r)return e.getTrusted(n,u?M[0]:M.join(""));n&&1<M.length&&Ma.throwNoconcat(f);return M.join("")};return S(function(a){var b=0,d=I.length,e=Array(d);try{for(;b<d;b++)e[b]=P[b](a);return x(e)}catch(g){c(Ma.interr(f,g))}},{exp:f,expressions:I,$$watchDelegate:function(a,b){var c;return a.$watchGroup(P,function(d,e){var f=x(d);b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,p=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");h.startSymbol=function(){return a};h.endSymbol=function(){return b};return h}]}function Qf(){this.$get=["$$intervalFactory","$window",function(a,b){var d={},c=function(a){b.clearInterval(a);delete d[a]},e=a(function(a,c,e){a=b.setInterval(a,c);d[a]=e;return a},c);e.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$intervalId"))throw Qg("badprom");if(!d.hasOwnProperty(a.$$intervalId))return!1;a=a.$$intervalId;var b=d[a],e=b.promise;e.$$state&&(e.$$state.pur=!0);b.reject("canceled");c(a);return!0};return e}]}function Rf(){this.$get=["$browser","$q","$$q","$rootScope",function(a,b,d,c){return function(e,f){return function(g,k,h,l){function m(){p?g.apply(null,n):g(s)}var p=4<arguments.length,n=p?Ha.call(arguments,4):[],s=0,G=w(l)&&!l,t=(G?d:b).defer(),r=t.promise;h=w(h)?h:0;r.$$intervalId=e(function(){G?a.defer(m):c.$evalAsync(m);t.notify(s++);0<h&&s>=h&&(t.resolve(s),f(r.$$intervalId));G||c.$apply()},k,t,G);return r}}}]}function Cd(a,b){var d=ga(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=fa(d.port)||Rg[d.protocol]||null}function Dd(a,b,d){if(Sg.test(a))throw kb("badpath",a);var c="/"!==a.charAt(0);c&&(a="/"+a);a=ga(a);for(var c=(c&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split("/"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\//g,"%2F"));d=c.join("/");b.$$path=d;b.$$search=hc(a.search);b.$$hash=decodeURIComponent(a.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function yc(a,b){return a.slice(0,b.length)===b}function ya(a,b){if(yc(b,a))return b.substr(a.length)}function Da(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function zc(a,b,d){this.$$html5=!0;d=d||"";Cd(a,this);this.$$parse=function(a){var d=ya(b,a);if(!C(d))throw kb("ipthprfx",a,b);Dd(d,this,!0);this.$$path||(this.$$path="/");this.$$compose()};this.$$normalizeUrl=function(a){return b+a.substr(1)};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;w(f=ya(a,c))?(g=f,g=d&&w(f=ya(d,f))?b+(ya("/",f)||f):a+g):w(f=ya(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function Ac(a,b,d){Cd(a,this);this.$$parse=function(c){var e=ya(a,c)||ya(b,c),f;A(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",A(e)&&(a=c,this.replace())):(f=ya(d,e),A(f)&&(f=e));Dd(f,this,!1);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;yc(f,e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$normalizeUrl=function(b){return a+(b?d+b:"")};this.$$parseLinkUrl=function(b,d){return Da(a)===Da(b)?(this.$$parse(b),!0):!1}}function Ed(a,b,d){this.$$html5=!0;Ac.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===Da(c)?f=c:(g=ya(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$normalizeUrl=function(b){return a+d+b}}function Mb(a){return function(){return this[a]}}function Fd(a,b){return function(d){if(A(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Yf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):a};this.html5Mode=function(a){if(Ga(a))return b.enabled=a,this;if(D(a)){Ga(a.enabled)&&(b.enabled=a.enabled);Ga(a.requireBase)&&(b.requireBase=a.requireBase);if(Ga(a.rewriteLinks)||C(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function k(a,b){return a===b||ga(a).href===ga(b).href}function h(a,b,d){var e=m.url(),f=m.$$state;try{c.url(a,b,d),m.$$state=c.state()}catch(g){throw m.url(e),m.$$state=f,g}}function l(a,b){d.$broadcast("$locationChangeSuccess",m.absUrl(),a,m.$$state,b)}var m,p;p=c.baseHref();var n=c.url(),s;if(b.enabled){if(!p&&b.requireBase)throw kb("nobase");s=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(p||"/");p=e.history?zc:Ed}else s=Da(n),p=Ac;var r=s.substr(0,Da(s).lastIndexOf("/")+1);m=new p(s,r,"#"+a);m.$$parseLinkUrl(n,n);m.$$state=c.state();var t=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var g=x(a.target);"a"!==ua(g[0]);)if(g[0]===f[0]||!(g=g.parent())[0])return;if(!C(e)||!A(g.attr(e))){var e=g.prop("href"),h=g.attr("href")||g.attr("xlink:href");D(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ga(e.animVal).href);t.test(e)||!e||g.attr("target")||a.isDefaultPrevented()||!m.$$parseLinkUrl(e,h)||(a.preventDefault(),m.absUrl()!==c.url()&&d.$apply())}}});m.absUrl()!==n&&c.url(m.absUrl(),!0);var N=!0;c.onUrlChange(function(a,b){yc(a,r)?(d.$evalAsync(function(){var c=m.absUrl(),e=m.$$state,f;m.$$parse(a);m.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;m.absUrl()===a&&(f?(m.$$parse(c),m.$$state=e,h(c,!1,e)):(N=!1,l(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(N||m.$$urlUpdatedByLocation){m.$$urlUpdatedByLocation=!1;var a=c.url(),b=m.absUrl(),f=c.state(),g=m.$$replace,n=!k(a,b)||m.$$html5&&e.history&&f!==m.$$state;if(N||n)N=!1,d.$evalAsync(function(){var b=m.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,m.$$state,f).defaultPrevented;m.absUrl()===b&&(c?(m.$$parse(a),m.$$state=f):(n&&h(b,g,f===m.$$state?null:m.$$state),l(a,f)))})}m.$$replace=!1});return m}]}function Zf(){var a=!0,b=this;this.debugEnabled=function(b){return w(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){dc(a)&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||E;return function(){var a=[];r(arguments,function(b){a.push(c(b))});return Function.prototype.apply.call(e,b,a)}}var f=wa||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Tg(a){return a+""}function Ug(a,b){return"undefined"!==typeof a?a:b}function Gd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Vg(a,b){switch(a.type){case q.MemberExpression:if(a.computed)return!1;break;case q.UnaryExpression:return 1;case q.BinaryExpression:return"+"!==a.operator?1:!1;case q.CallExpression:return!1}return void 0===b?Hd:b}function Z(a,b,d){var c,e,f=a.isPure=Vg(a,d);switch(a.type){case q.Program:c=!0;r(a.body,function(a){Z(a.expression,b,f);c=c&&a.expression.constant});a.constant=c;break;case q.Literal:a.constant=!0;a.toWatch=[];break;case q.UnaryExpression:Z(a.argument,b,f);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case q.BinaryExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:Z(a.test,b,f);Z(a.alternate,b,f);Z(a.consequent,b,f);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1;a.toWatch=[a];break;case q.MemberExpression:Z(a.object,b,f);a.computed&&Z(a.property,b,f);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case q.CallExpression:c=d=a.filter?!b(a.callee.name).$stateful:!1;e=[];r(a.arguments,function(a){Z(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=d?e:[a];break;case q.AssignmentExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case q.ArrayExpression:c=!0;e=[];r(a.elements,function(a){Z(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=e;break;case q.ObjectExpression:c=!0;e=[];r(a.properties,function(a){Z(a.value,b,f);c=c&&a.value.constant;e.push.apply(e,a.value.toWatch);a.computed&&(Z(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,a.key.toWatch))});a.constant=c;a.toWatch=e;break;case q.ThisExpression:a.constant=!1;a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Id(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Jd(a){return a.type===q.Identifier||a.type===q.MemberExpression}function Kd(a){if(1===a.body.length&&Jd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}function Ld(a){this.$filter=a}function Md(a){this.$filter=a}function Nb(a,b,d){this.ast=new q(a,d);this.astCompiler=d.csp?new Md(b):new Ld(b)}function Bc(a){return B(a.valueOf)?a.valueOf():Wg.call(a)}function $f(){var a=T(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(b,c){var d,f;switch(typeof b){case "string":return f=b=b.trim(),d=a[f],d||(d=new Ob(G),d=(new Nb(d,e,G)).parse(b),a[f]=p(d)),s(d,c);case "function":return s(b,c);default:return s(E,c)}}function g(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=Bc(a),"object"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function k(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&Bc(b));return h},b,c,e)}for(var l=[],m=[],n=0,p=f.length;n<p;n++)l[n]=g,m[n]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var k=f[c](a);if(b||(b=!g(k,l[c],f[c].isPure)))m[c]=k,l[c]=k&&Bc(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function f(){h(m)&&k()}function g(a,b,c,d){m=u&&d?d[0]:n(a,b,c,d);h(m)&&a.$$postDigest(f);return s(m)}var h=d.literal?l:w,k,m,n=d.$$intercepted||d,s=d.$$interceptor||Ta,u=d.inputs&&!n.inputs;g.literal=d.literal;g.constant=d.constant;g.inputs=d.inputs;p(g);return k=a.$watch(g,b,c,e)}function l(a){var b=!0;r(a,function(a){w(a)||(b=!1)});return b}function m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function p(a){a.constant?a.$$watchDelegate=m:a.oneTime?a.$$watchDelegate=h:a.inputs&&(a.$$watchDelegate=k);return a}function n(a,b){function c(d){return b(a(d))}c.$stateful=a.$stateful||b.$stateful;c.$$pure=a.$$pure&&b.$$pure;return c}function s(a,b){if(!b)return a;a.$$interceptor&&(b=n(a.$$interceptor,b),a=a.$$intercepted);var c=!1,d=function(d,e,f,g){d=c&&g?g[0]:a(d,e,f,g);return b(d)};d.$$intercepted=a;d.$$interceptor=b;d.literal=a.literal;d.oneTime=a.oneTime;d.constant=a.constant;b.$stateful||(c=!a.inputs,d.inputs=a.inputs?a.inputs:[a],b.$$pure||(d.inputs=d.inputs.map(function(a){return a.isPure===Hd?function(b){return a(b)}:a})));return p(d)}var G={csp:Ba().noUnsafeEval,literals:Ia(b),isIdentifierStart:B(d)&&d,isIdentifierContinue:B(c)&&c};f.$$getAst=function(a){var b=new Ob(G);return(new Nb(b,e,G)).getAst(a).ast};return f}]}function bg(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Nd(function(a){b.$evalAsync(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function cg(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Nd(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function Nd(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){h(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!w&&x.length;){var a=x.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,""):A(c)?"undefined":"string"!==typeof c?Ne(c,void 0):c);dc(a.value)?b(a.value,c):b(c)}}}function k(c){!d||c.pending||2!==c.status||c.pur||(0===w&&0===x.length&&a(g),x.push(c));!c.processScheduled&&c.pending&&(c.processScheduled=!0,++w,a(function(){var e,f,k;k=c.pending;c.processScheduled=!1;c.pending=void 0;try{for(var l=0,n=k.length;l<n;++l){c.pur=!0;f=k[l][0];e=k[l][c.status];try{B(e)?h(f,e(c.value)):1===c.status?h(f,c.value):m(f,c.value)}catch(p){m(f,p),p&&!0===p.$$passToExceptionHandler&&b(p)}}}finally{--w,d&&0===w&&a(g)}}))}function h(a,b){a.$$state.status||(b===a?p(a,v("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){n(a,b)}var f,g=!1;try{if(D(b)||B(b))f=b.then;B(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function m(a,b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b;a.$$state.status=2;k(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{n(c,B(a)?a(d):d)}catch(h){b(h)}}})}function s(a){var b=new f;m(b,a);return b}function G(a,b,c){var d=null;try{B(c)&&(d=c())}catch(e){return s(e)}return d&&B(d.then)?d.then(function(){return b(a)},s):b(a)}function t(a,b,c,d){var e=new f;h(e,a);return e.then(b,c,d)}function q(a){if(!B(a))throw v("norslvr",a);var b=new f;a(function(a){h(b,a)},function(a){m(b,a)});return b}
var v=F("$q",TypeError),w=0,x=[];S(f.prototype,{then:function(a,b,c){if(A(a)&&A(b)&&A(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&k(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return G(b,y,a)},function(b){return G(b,s,a)},b)}});var y=t;q.prototype=f.prototype;q.defer=c;q.reject=s;q.when=t;q.resolve=y;q.all=function(a){var b=new f,c=0,d=H(a)?[]:{};r(a,function(a,e){c++;t(a).then(function(a){d[e]=a;--c||h(b,d)},function(a){m(b,a)})});0===c&&h(b,d);return b};q.race=function(a){var b=c();r(a,function(a){t(a).then(b.resolve,b.reject)});return b.promise};return q}function mg(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function ag(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++qb;this.$$ChildScope=null;this.$$suspended=!1}b.prototype=a;return b}var b=10,d=F("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,k){function h(a){a.currentScope.$$destroyed=!0}function l(a){9===wa&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$suspended=this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function p(a){if(v.$$phase)throw d("inprog",v.$$phase);v.$$phase=a}function n(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function G(){}function t(){for(;y.length;)try{y.shift()()}catch(a){f(a)}e=null}function q(){null===e&&(e=k.defer(function(){v.$apply(t)},null,"$applyAsync"))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",h);return d},$watch:function(a,b,d,e){var f=g(a);b=B(b)?b:E;if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:G,get:f,exp:e||a,eq:!!d};c=null;k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;n(this,1);return function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;try{k?(k=!1,b(e,e,g)):b(e,d,g)}finally{for(var f=0;f<a.length;f++)d[f]=e[f]}}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});r(a,function(a,b){var d=g.$watch(a,function(a){e[b]=a;h||(h=!0,g.$evalAsync(c))});f.push(d)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!A(e)){if(D(e))if(za(e))for(f!==n&&(f=n,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},t=0,l++);a=0;for(b in e)ta.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ta.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$$pure=g(a).literal;c.$stateful=!c.$$pure;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),n=[],p={},s=!0,t=0;return this.$watch(m,function(){s?(s=!1,b(e,e,d)):b(e,h,d);if(k)if(D(e))if(za(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ta.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,h,l,m,n,s,r=b,q,y=w.length?v:this,N=[],A,z;p("$digest");k.$$checkUrlChange();this===v&&null!==e&&(k.defer.cancel(e),t());c=null;do{s=!1;q=y;for(n=0;n<w.length;n++){try{z=w[n],l=z.fn,l(z.scope,z.locals)}catch(C){f(C)}c=null}w.length=0;a:do{if(n=!q.$$suspended&&q.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(h=a.last)&&!(a.eq?va(g,h):Y(g)&&Y(h)))s=!0,c=a,a.last=a.eq?Ia(g,null):g,l=a.fn,l(g,h===G?g:h,q),5>r&&(A=4-r,N[A]||(N[A]=[]),N[A].push({msg:B(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:h}));else if(a===c){s=!1;break a}}catch(E){f(E)}if(!(n=!q.$$suspended&&q.$$watchersCount&&q.$$childHead||q!==y&&q.$$nextSibling))for(;q!==y&&!(n=q.$$nextSibling);)q=q.$parent}while(q=n);if((s||w.length)&&!r--)throw v.$$phase=null,d("infdig",b,N);}while(s||w.length);for(v.$$phase=null;J<x.length;)try{x[J++]()}catch(D){f(D)}x.length=J=0;k.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===v&&k.$$applicationDestroyed();n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=E;this.$on=this.$watch=this.$watchGroup=function(){return E};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){v.$$phase||w.length||k.defer(function(){w.length&&v.$digest()},null,"$evalAsync");w.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){x.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{v.$$phase=null}}catch(b){f(b)}finally{try{v.$digest()}catch(c){throw f(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&y.push(b);a=g(a);q()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],s(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var v=new m,w=v.$$asyncQueue=[],x=v.$$postDigestQueue=[],y=v.$$applyAsyncQueue=[],J=0;return v}]}function Qe(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(b){return w(b)?(a=b,this):a};this.imgSrcSanitizationTrustedUrlList=function(a){return w(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f=ga(d&&d.trim()).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Xg(a){if("self"===a)return a;if(C(a)){if(-1<a.indexOf("***"))throw Ea("iwcard",a);a=Od(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if(ab(a))return new RegExp("^"+a.source+"$");throw Ea("imatcher")}function Pd(a){var b=[];w(a)&&r(a,function(a){b.push(Xg(a))});return b}function eg(){this.SCE_CONTEXTS=W;var a=["self"],b=[];this.trustedResourceUrlList=function(b){arguments.length&&(a=Pd(b));return a};Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(a){this.trustedResourceUrlList=a}});this.bannedResourceUrlList=function(a){arguments.length&&(b=Pd(a));return b};Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(a){this.bannedResourceUrlList=a}});this.$get=["$injector","$$sanitizeUri",function(d,c){function e(a,b){var c;"self"===a?(c=Cc(b,Qd))||(z.document.baseURI?c=z.document.baseURI:(Na||(Na=z.document.createElement("a"),Na.href=".",Na=Na.cloneNode(!1)),c=Na.href),c=Cc(b,c)):c=!!a.exec(b.href);return c}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var g=function(a){throw Ea("unsafe")};d.has("$sanitize")&&(g=d.get("$sanitize"));var k=f(),h={};h[W.HTML]=f(k);h[W.CSS]=f(k);h[W.MEDIA_URL]=f(k);h[W.URL]=f(h[W.MEDIA_URL]);h[W.JS]=f(k);h[W.RESOURCE_URL]=f(h[W.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ea("icontext",a,b);if(null===b||A(b)||""===b)return b;if("string"!==typeof b)throw Ea("itype",a);return new c(b)},getTrusted:function(d,f){if(null===f||A(f)||""===f)return f;var k=h.hasOwnProperty(d)?h[d]:null;if(k&&f instanceof k)return f.$$unwrapTrustedValue();B(f.$$unwrapTrustedValue)&&(f=f.$$unwrapTrustedValue());if(d===W.MEDIA_URL||d===W.URL)return c(f.toString(),d===W.MEDIA_URL);if(d===W.RESOURCE_URL){var k=ga(f.toString()),n,s,r=!1;n=0;for(s=a.length;n<s;n++)if(e(a[n],k)){r=!0;break}if(r)for(n=0,s=b.length;n<s;n++)if(e(b[n],k)){r=!1;break}if(r)return f;throw Ea("insecurl",f.toString())}if(d===W.HTML)return g(f);throw Ea("unsafe")},valueOf:function(a){return a instanceof k?a.$$unwrapTrustedValue():a}}}]}function dg(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>wa)throw Ea("iequirks");var c=ja(W);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ta);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;r(W,function(a,b){var d=K(b);c[("parse_as_"+d).replace(Dc,xb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(Dc,xb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(Dc,xb)]=function(b){return g(a,b)}});return c}]}function fg(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=fa((/android (\d+)/.exec(K((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},k=g.body&&g.body.style,h=!1,l=!1;k&&(h=!!("transition"in k||"webkitTransition"in k),l=!!("animation"in k||"webkitAnimation"in k));return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&wa)return!1;if(A(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ba(),transitions:h,animations:l,android:e}}]}function gg(){this.$get=ia(function(a){return new Yg(a)})}function Yg(a){function b(){var a=e.pop();return a&&a.cb}function d(a){for(var b=e.length-1;0<=b;--b){var c=e[b];if(c.type===a)return e.splice(b,1),c.cb}}var c={},e=[],f=this.ALL_TASKS_TYPE="$$all$$",g=this.DEFAULT_TASK_TYPE="$$default$$";this.completeTask=function(e,h){h=h||g;try{e()}finally{var l;l=h||g;c[l]&&(c[l]--,c[f]--);l=c[h];var m=c[f];if(!m||!l)for(l=m?d:b;m=l(h);)try{m()}catch(p){a.error(p)}}};this.incTaskCount=function(a){a=a||g;c[a]=(c[a]||0)+1;c[f]=(c[f]||0)+1};this.notifyWhenNoPendingTasks=function(a,b){b=b||f;c[b]?e.push({type:b,cb:a}):a()}}function ig(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(k,h){g.totalPendingRequests++;if(!C(k)||A(d.get(k)))k=f.getTrustedResourceUrl(k);var l=c.defaults&&c.defaults.transformResponse;H(l)?l=l.filter(function(a){return a!==wc}):l===wc&&(l=null);return c.get(k,S({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){return d.put(k,a.data)},function(a){h||(a=Zg("tpload",k,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function jg(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];r(a,function(a){var c=ca.element(a).data("$binding");c&&r(c,function(c){d?(new RegExp("(^|\\s)"+Od(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],k=0;k<g.length;++k){var h=a.querySelectorAll("["+g[k]+"model"+(d?"=":"*=")+'"'+b+'"]');if(h.length)return h}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function kg(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,h,l){B(f)||(l=h,h=f,f=E);var m=Ha.call(arguments,3),p=w(l)&&!l,n=(p?c:d).defer(),s=n.promise,r;r=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[s.$$timeoutId]}p||a.$apply()},h,"$timeout");s.$$timeoutId=r;g[r]=n;return s}var g={};f.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$timeoutId"))throw $g("badprom");if(!g.hasOwnProperty(a.$$timeoutId))return!1;a=a.$$timeoutId;var c=g[a],d=c.promise;d.$$state&&(d.$$state.pur=!0);c.reject("canceled");delete g[a];return b.defer.cancel(a)};return f}]}function ga(a){if(!C(a))return a;wa&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);a=aa.hostname;!ah&&-1<a.indexOf(":")&&(a="["+a+"]");return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):"",hostname:a,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function Og(a){var b=[Qd].concat(a.map(ga));return function(a){a=ga(a);return b.some(Cc.bind(null,a))}}function Cc(a,b){a=ga(a);b=ga(b);return a.protocol===b.protocol&&a.host===b.host}function lg(){this.$get=ia(z)}function Rd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,k,h,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},k=0;k<a.length;k++)g=a[k],h=g.indexOf("="),0<h&&(l=b(g.substring(0,h)),A(c[l])&&(c[l]=b(g.substring(h+1))));return c}}function pg(){this.$get=Rd}function fd(a){function b(d,c){if(D(d)){var e={};r(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Sd);b("date",Td);b("filter",bh);b("json",ch);b("limitTo",dh);b("lowercase",eh);b("number",Ud);b("orderBy",Vd);b("uppercase",fh)}function bh(){return function(a,b,d,c){if(!za(a)){if(null==a)return a;throw F("filter")("notarray",a)}c=c||"$";var e;switch(Ec(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=gh(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function gh(a,b,d,c){var e=D(a)&&d in a;!0===b?b=va:B(b)||(b=function(a,b){if(A(a))return!1;if(null===a||null===b)return a===b;if(D(b)||D(a)&&!cc(a))return!1;a=K(""+a);b=K(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!D(f)?Fa(f,a[d],b,d,!1):Fa(f,a,b,d,c)}}function Fa(a,b,d,c,e,f){var g=Ec(a),k=Ec(b);if("string"===k&&"!"===b.charAt(0))return!Fa(a,b.substring(1),d,c,e);if(H(a))return a.some(function(a){return Fa(a,b,d,c,e)});switch(g){case "object":var h;if(e){for(h in a)if(h.charAt&&"$"!==h.charAt(0)&&Fa(a[h],b,d,c,!0))return!0;return f?!1:Fa(a,b,d,c,!1)}if("object"===k){for(h in b)if(f=b[h],!B(f)&&!A(f)&&(g=h===c,!Fa(g?a:a[h],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function Ec(a){return null===a?"null":typeof a}function Sd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){A(c)&&(c=b.CURRENCY_SYM);A(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\u00A4/g:/\s*\u00A4\s*/g;return null==a?a:Wd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Ud(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Wd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function hh(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Xd))&&(a=a.replace(Xd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===Fc;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Fc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Yd&&(d=d.splice(0,Yd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function ih(a,b,d,c){var e=a.d,f=e.length-a.i;b=A(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Wd(a,b,d,c,e){if(!C(a)&&!X(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,k=Math.abs(a)+"",h="";if(f)h="\u221e";else{g=hh(k);ih(g,e,b.minFrac,b.maxFrac);h=g.d;k=g.i;e=g.e;f=[];for(g=h.reduce(function(a,b){return a&&!b},!0);0>k;)h.unshift(0),k++;0<k?f=h.splice(k,h.length):(f=h,h=[0]);k=[];for(h.length>=b.lgSize&&k.unshift(h.splice(-b.lgSize,h.length).join(""));h.length>b.gSize;)k.unshift(h.splice(-b.gSize,h.length).join(""));h.length&&k.unshift(h.join(""));h=k.join(d);f.length&&(h+=c+f.join(""));e&&(h+="e+"+e)}return 0>a&&!g?b.negPre+h+b.negSuf:b.posPre+h+b.posSuf}function Pb(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=Fc+a;d&&(a=a.substr(a.length-b));return e+a}function ea(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Pb(f,b,c,e)}}function lb(a,b,d){return function(c,e){var f=c["get"+a](),g=vb((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Zd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function $d(a){return function(b){var d=Zd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Pb(b,a)}}function Gc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Td(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=fa(b[9]+b[10]),g=fa(b[9]+b[11]));k.call(a,fa(b[1]),fa(b[2])-1,fa(b[3]));f=fa(b[4]||0)-f;g=fa(b[5]||0)-g;k=fa(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));h.call(a,f,g,k,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",k=[],h,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;C(c)&&(c=jh.test(c)?fa(c):b(c));X(c)&&(c=new Date(c));if(!ha(c)||!isFinite(c.getTime()))return c;for(;d;)(l=kh.exec(d))?(k=db(k,l,1),d=k.pop()):(k.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=fc(f,m),c=gc(c,f,!0));r(k,function(b){h=lh[b];g+=h?h(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function ch(){return function(a,b){A(b)&&(b=2);return eb(a,b)}}function dh(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):fa(b);if(Y(b))return a;X(a)&&(a=a.toString());if(!za(a))return a;d=!d||isNaN(d)?0:fa(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?Hc(a,d,d+b):0===d?Hc(a,b,a.length):Hc(a,Math.max(0,d+b),d)}}function Hc(a,b,d){return C(a)?a.slice(b,d):Ha.call(a,b,d)}function Vd(a){function b(b){return b.map(function(b){var c=1,d=Ta;if(B(b))d=b;else if(C(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,h=b.type;if(d===h){var h=a.value,l=b.value;"string"===d?(h=h.toLowerCase(),l=l.toLowerCase()):"object"===d&&(D(h)&&(h=a.index),D(l)&&(l=b.index));h!==l&&(c=h<l?-1:1)}else c="undefined"===d?1:"undefined"===h?-1:"null"===d?1:"null"===h?-1:d<h?-1:1;return c}return function(a,f,g,k){if(null==a)return a;if(!za(a))throw F("orderBy")("notarray",a);H(f)||(f=[f]);0===f.length&&(f=["+"]);var h=b(f),l=g?-1:1,m=B(k)?k:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:h.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="null";else if("object"===c)a:{if(B(e.valueOf)&&(e=e.valueOf(),d(e)))break a;cc(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var d=0,e=h.length;d<e;d++){var f=m(a.predicateValues[d],b.predicateValues[d]);if(f)return f*h[d].descending*l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l});return a=a.map(function(a){return a.value})}}function Ra(a){B(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ia(a)}function Qb(a,b,d,c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=mb;this.$$element=a;this.$$animate=c;ae(this)}function ae(a){a.$$classCache={};a.$$classCache[be]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function ce(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Xc(c,"-"):"";b(a,nb+c,!0===d);b(a,be+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,k){A(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,k)):(this.$pending&&e(this.$pending,a,k),de(this.$pending)&&(this.$pending=void 0));Ga(g)?g?(e(this.$error,a,k),c(this.$$success,a,k)):(c(this.$error,a,k),e(this.$$success,a,k)):(e(this.$error,a,k),e(this.$$success,a,k));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=de(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,g,this)}}function de(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Ic(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Sa(a,b,d,c,e,f){var g=K(b[0].type);if(!e.android){var k=!1;b.on("compositionstart",function(){k=!0});b.on("compositionupdate",function(a){if(A(a.data)||""===a.data)k=!1});b.on("compositionend",function(){k=!1;l()})}var h,l=function(a){h&&(f.defer.cancel(h),h=null);if(!k){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=V(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){h||(h=f.defer(function(){h=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut drop",m)}b.on("change",l);if(ee[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!h){var b=this.validity,c=b.badInput,d=b.typeMismatch;h=f.defer(function(){h=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Rb(a,b){return function(d,c){var e,f;if(ha(d))return d;if(C(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(mh.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),e=new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0),100>f.yyyy&&e.setFullYear(f.yyyy),e}return NaN}}function ob(a,b,d,c){return function(e,f,g,k,h,l,m,p){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return w(a)&&!ha(a)?r(a)||void 0:a}function r(a,b){var c=k.$options.getOption("timezone");v&&v!==c&&(b=Uc(b,fc(v)));var e=d(a,b);!isNaN(e)&&c&&(e=gc(e,c));return e}Jc(e,f,g,k,a);Sa(e,f,g,k,h,l);var t="time"===a||"datetimelocal"===a,q,v;k.$parsers.push(function(c){if(k.$isEmpty(c))return null;if(b.test(c))return r(c,q);k.$$parserName=a});k.$formatters.push(function(a){if(a&&!ha(a))throw pb("datefmt",a);if(n(a)){q=a;var b=k.$options.getOption("timezone");b&&(v=b,q=gc(q,b,!0));var d=c;t&&C(k.$options.getOption("timeSecondsFormat"))&&(d=c.replace("ss.sss",k.$options.getOption("timeSecondsFormat")).replace(/:$/,""));a=m("date")(a,d,b);t&&k.$options.getOption("timeStripZeroSeconds")&&(a=a.replace(/(?::00)?(?:\.000)?$/,""));return a}v=q=null;return""});if(w(g.min)||g.ngMin){var x=g.min||p(g.ngMin)(e),z=s(x);k.$validators.min=function(a){return!n(a)||A(z)||d(a)>=z};g.$observe("min",function(a){a!==x&&(z=s(a),x=a,k.$validate())})}if(w(g.max)||g.ngMax){var y=g.max||p(g.ngMax)(e),J=s(y);k.$validators.max=function(a){return!n(a)||A(J)||d(a)<=J};g.$observe("max",function(a){a!==y&&(J=s(a),y=a,k.$validate())})}}}function Jc(a,b,d,c,e){(c.$$hasNativeValidators=D(b[0].validity))&&c.$parsers.push(function(a){var d=b.prop("validity")||{};if(d.badInput||d.typeMismatch)c.$$parserName=e;else return a})}function fe(a){a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(nh.test(b))return parseFloat(b);a.$$parserName="number"});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!X(b))throw pb("numfmt",b);b=b.toString()}return b})}function na(a){w(a)&&!X(a)&&(a=parseFloat(a));return Y(a)?void 0:a}function Kc(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ge(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Kc(a):0,k=e?Kc(b):0,h=f?Kc(d):0,g=Math.max(g,k,h),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function he(a,b,d,c,e){if(w(c)){a=a(c);if(!a.constant)throw pb("constexpr",d,c);return a(b)}return e}function Lc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){if(!a)return a;var b=a;H(a)?b=a.map(c).join(" "):D(a)?b=Object.keys(a).filter(function(b){return a[b]}).join(" "):C(a)||(b=a+"");return b}a="ngClass"+a;var e;return["$parse",function(f){return{restrict:"AC",link:function(g,k,h){function l(a,b){var c=[];r(a,function(a){if(0<b||p[a])p[a]=(p[a]||0)+b,p[a]===+(0<b)&&c.push(a)});return c.join(" ")}function m(a){if(a===b){var c=s,c=l(c&&c.split(" "),1);h.$addClass(c)}else c=s,c=l(c&&c.split(" "),-1),h.$removeClass(c);n=a}var p=k.data("$classCounts"),n=!0,s;p||(p=T(),k.data("$classCounts",p));"ngClass"!==a&&(e||(e=f("$index",function(a){return a&1})),g.$watch(e,m));g.$watch(f(h[a],c),function(a){if(n===b){var c=s&&s.split(" "),e=a&&a.split(" "),f=d(c,e),c=d(e,c),f=l(f,-1),c=l(c,1);h.$addClass(c);h.$removeClass(f)}s=a})}}}]}function sd(a,b,d,c,e,f){return{restrict:"A",compile:function(g,k){var h=a(k[c]);return function(a,c){c.on(e,function(c){var e=function(){h(a,{$event:c})};if(b.$$phase)if(f)a.$evalAsync(e);else try{e()}catch(g){d(g)}else a.$apply(e)})}}}}function Sb(a,b,d,c,e,f,g,k,h){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=h(d.name||"",!1)(a);this.$$parentForm=mb;this.$options=Tb;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$parserName="parse";this.$$currentValidationRunId=0;this.$$scope=a;this.$$rootScope=a.$root;this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=k;this.$$exceptionHandler=b;ae(this);oh(this)}function oh(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b);return b})}function Mc(a){this.$$options=a}function ie(a,b){r(b,function(b,c){w(a[c])||(a[c]=b)})}
function Oa(a,b){a.prop("selected",b);a.attr("selected",b)}function je(a,b,d){if(a){C(a)&&(a=new RegExp("^"+a+"$"));if(!a.test)throw F("ngPattern")("noregexp",b,a,Aa(d));return a}}function Ub(a){a=fa(a);return Y(a)?-1:a}var Xb={objectMaxDepth:5,urlErrorParamsEnabled:!0},ke=/^\/(.+)\/([a-z]*)$/,ta=Object.prototype.hasOwnProperty,K=function(a){return C(a)?a.toLowerCase():a},vb=function(a){return C(a)?a.toUpperCase():a},wa,x,sb,Ha=[].slice,Kg=[].splice,ph=[].push,la=Object.prototype.toString,Rc=Object.getPrototypeOf,oa=F("ng"),ca=z.angular||(z.angular={}),lc,qb=0;wa=z.document.documentMode;var Y=Number.isNaN||function(a){return a!==a};E.$inject=[];Ta.$inject=[];var ze=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,V=function(a){return C(a)?a.trim():a},Od=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ba=function(){if(!w(Ba.rules)){var a=z.document.querySelector("[ng-csp]")||z.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ba.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ba;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ba.rules},rb=function(){if(w(rb.name_))return rb.name_;var a,b,d=Qa.length,c,e;for(b=0;b<d;++b)if(c=Qa[b],a=z.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},Be=/:/g,Qa=["ng-","data-ng-","ng:","x-ng-"],Fe=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof z.HTMLScriptElement||b instanceof z.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");c.href=b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(z.document),Ie=/[A-Z]/g,Yc=!1,Pa=3,Pe={full:"17.0.9",major:1,minor:8,dot:2,codeName:"meteoric-mining"};U.expando="ng339";var Ka=U.cache={},ug=1;U._data=function(a){return this.cache[a[this.expando]]||{}};var qg=/-([a-z])/g,qh=/^-ms-/,Bb={mouseleave:"mouseout",mouseenter:"mouseover"},oc=F("jqLite"),tg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,nc=/<|&#?\w+;/,rg=/<([\w:-]+)/,sg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qa={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};qa.tbody=qa.tfoot=qa.colgroup=qa.caption=qa.thead;qa.th=qa.td;var hb={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]},Nc;for(Nc in qa){var le=qa[Nc],me=le.slice().reverse();hb[Nc]=[me.length,"<"+me.join("><")+">","</"+le.join("></")+">"]}hb.optgroup=hb.option;var zg=z.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Wa=U.prototype={ready:hd,toString:function(){var a=[];r(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?x(this[a]):x(this[this.length+a])},length:0,push:ph,sort:[].sort,splice:[].splice},Hb={};r("multiple selected checked disabled readOnly required open".split(" "),function(a){Hb[K(a)]=a});var od={};r("input select option textarea button form details".split(" "),function(a){od[a]=!0});var vd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};r({data:sc,removeData:rc,hasData:function(a){for(var b in Ka[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)rc(a[b]),kd(a[b])}},function(a,b){U[b]=a});r({data:sc,inheritedData:Fb,scope:function(a){return x.data(a,"$scope")||Fb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return x.data(a,"$isolateScope")||x.data(a,"$isolateScopeNoTemplate")},controller:ld,injector:function(a){return Fb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Cb,css:function(a,b,d){b=yb(b.replace(qh,"ms-"));if(w(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Pa&&2!==c&&8!==c&&a.getAttribute){var c=K(b),e=Hb[c];if(w(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(w(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(A(d)){var c=a.nodeType;return 1===c||c===Pa?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(A(b)){if(a.multiple&&"select"===ua(a)){var d=[];r(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(A(b))return a.innerHTML;zb(a,!0);a.innerHTML=b},empty:md},function(a,b){U.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==md&&A(2===a.length&&a!==Cb&&a!==ld?b:c)){if(D(b)){for(e=0;e<g;e++)if(a===sc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=A(e)?Math.min(g,1):g;for(f=0;f<g;f++){var k=a(this[f],b,c);e=e?e+k:k}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});r({removeData:rc,on:function(a,b,d,c){if(w(c))throw oc("onargs");if(mc(a)){c=Ab(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=wg(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,k=function(b,c,g){var k=e[b];k||(k=e[b]=[],k.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));k.push(d)};g--;)b=c[g],Bb[b]?(k(Bb[b],yg),k(b,void 0,!0)):k(b)}},off:kd,one:function(a,b,d){a=x(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;zb(a);r(new U(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];r(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new U(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;r(new U(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=x(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Gb,detach:function(a){Gb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new U(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Eb,removeClass:Db,toggleClass:function(a,b,d){b&&r(b.split(" "),function(b){var e=d;A(e)&&(e=!Cb(a,b));(e?Eb:Db)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:qc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=Ab(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:E,type:f,target:a},b.type&&(c=S(c,b)),b=ja(g),e=d?[c].concat(d):[c],r(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){U.prototype[b]=function(b,c,e){for(var f,g=0,k=this.length;g<k;g++)A(f)?(f=a(this[g],b,c,e),w(f)&&(f=x(f))):pc(f,a(this[g],b,c,e));return w(f)?f:this}});U.prototype.bind=U.prototype.on;U.prototype.unbind=U.prototype.off;var rh=Object.create(null);pd.prototype={_idx:function(a){a!==this._lastKey&&(this._lastKey=a,this._lastIndex=this._keys.indexOf(a));return this._lastIndex},_transformKey:function(a){return Y(a)?rh:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},has:function(a){a=this._transformKey(a);return-1!==this._idx(a)},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Ib=pd,og=[function(){this.$get=[function(){return Ib}]}],Bg=/^([^(]+?)=>/,Cg=/^[^(]*\(\s*([^)]*)\)/m,sh=/,/,th=/^\s*(_?)(\S+?)\1\s*$/,Ag=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ca=F("$injector");fb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw C(d)&&d||(d=a.name||Dg(a)),Ca("strictdi",d);b=qd(a);r(b[1].split(sh),function(a){a.replace(th,function(a,b,d){c.push(d)})})}a.$inject=c}}else H(a)?(b=a.length-1,tb(a[b],"fn"),c=a.slice(0,b)):tb(a,"fn",!0);return c};var ne=F("$animate"),Ef=function(){this.$get=E},Ff=function(){var a=new Ib,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=C(b)?b.split(" "):H(b)?b:[],r(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){r(b,function(b){var c=a.get(b);if(c){var d=Eg(b.attr("class")),e="",f="";r(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});r(b,function(a){e&&Eb(a,e);f&&Db(a,f)});a.delete(b)}});b.length=0}return{enabled:E,on:E,off:E,pin:E,push:function(g,k,h,l){l&&l();h=h||{};h.from&&g.css(h.from);h.to&&g.css(h.to);if(h.addClass||h.removeClass)if(k=h.addClass,l=h.removeClass,h=a.get(g)||{},k=e(h,k,!0),l=e(h,l,!1),k||l)a.set(g,h),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},Cf=["$provide",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw ne("notcsel",c);var g=c+"-animation";b.$$registeredAnimations[c.substr(1)]=g;a.factory(g,d)};this.customFilter=function(a){1===arguments.length&&(c=B(a)?a:null);return c};this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,ne("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.cancel&&a.cancel()},enter:function(c,d,h,l){d=d&&x(d);h=h&&x(h);d=d||h.parent();b(c,d,h);return a.push(c,"enter",ra(l))},move:function(c,d,h,l){d=d&&x(d);h=h&&x(h);d=d||h.parent();b(c,d,h);return a.push(c,"move",ra(l))},leave:function(b,c){return a.push(b,"leave",ra(c),function(){b.remove()})},addClass:function(b,c,d){d=ra(d);d.addClass=ib(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=ra(d);d.removeClass=ib(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,f){f=ra(f);f.addClass=ib(f.addClass,c);f.removeClass=ib(f.removeClass,d);return a.push(b,"setClass",f)},animate:function(b,c,d,f,m){m=ra(m);m.from=m.from?S(m.from,c):c;m.to=m.to?S(m.to,d):d;m.tempClasses=ib(m.tempClasses,f||"ng-inline-animate");return a.push(b,"animate",m)}}}]}],Hf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},Gf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;r(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:E,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(r(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},Df=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);k||h.complete();k=!0});return h}var g=e||{};g.$$prepared||(g=Ia(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var k,h=new d;return{start:f,end:f}}}]},$=F("$compile"),uc=new function(){};Zc.$inject=["$provide","$$sanitizeUriProvider"];Kb.prototype.isFirstChange=function(){return this.previousValue===uc};var rd=/^((?:x|data)[:\-_])/i,Jg=/[:\-_]+(.)/g,xd=F("$controller"),wd=/^(\S+)(\s+as\s+([\w$]+))?$/,Of=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof x&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},yd="application/json",xc={"Content-Type":yd+";charset=utf-8"},Mg=/^\[|^\{(?!\{)/,Ng={"[":/]$/,"{":/}$/},Lg=/^\)]\}',?\n/,Lb=F("$http"),Ma=ca.$interpolateMinErr=F("$interpolate");Ma.throwNoconcat=function(a){throw Ma("noconcat",a)};Ma.interr=function(a,b){return Ma("interr",a,b.toString())};var Qg=F("$interval"),Xf=function(){this.$get=function(){function a(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ca.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},uh=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Rg={http:80,https:443,ftp:21},kb=F("$location"),Sg=/^\s*[\\/]{2,}/,vh={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){for(var a=this.$$path,b=this.$$hash,d=Ce(this.$$search),b=b?"#"+ic(b):"",a=a.split("/"),c=a.length;c--;)a[c]=ic(a[c].replace(/%2F/g,"/"));this.$$url=a.join("/")+(d?"?"+d:"")+b;this.$$absUrl=this.$$normalizeUrl(this.$$url);this.$$urlUpdatedByLocation=!0},absUrl:Mb("$$absUrl"),url:function(a){if(A(a))return this.$$url;var b=uh.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Mb("$$protocol"),host:Mb("$$host"),port:Mb("$$port"),path:Fd("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(C(a)||X(a))a=a.toString(),this.$$search=hc(a);else if(D(a))a=Ia(a,{}),r(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw kb("isrcharg");break;default:A(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Fd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};r([Ed,Ac,zc],function(a){a.prototype=Object.create(vh);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zc||!this.$$html5)throw kb("nostate");this.$$state=A(b)?null:b;this.$$urlUpdatedByLocation=!0;return this}});var Ya=F("$parse"),Wg={}.constructor.prototype.valueOf,Vb=T();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Vb[a]=!0});var wh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ob=function(a){this.options=a};Ob.prototype={constructor:Ob,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Vb[b],e=Vb[d];Vb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Ya("lexerr",a,b,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=wh[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=a;this.options=b};q.Program="Program";q.ExpressionStatement="ExpressionStatement";q.AssignmentExpression="AssignmentExpression";q.ConditionalExpression="ConditionalExpression";q.LogicalExpression="LogicalExpression";q.BinaryExpression="BinaryExpression";q.UnaryExpression="UnaryExpression";q.CallExpression="CallExpression";q.MemberExpression="MemberExpression";q.Identifier="Identifier";q.Literal="Literal";q.ArrayExpression="ArrayExpression";q.Property="Property";q.ObjectExpression="ObjectExpression";q.ThisExpression="ThisExpression";q.LocalsExpression="LocalsExpression";q.NGValueParameter="NGValueParameter";q.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Jd(a))throw Ya("lval");a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Ia(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:q.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:q.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:q.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw Ya("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw Ya("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ya("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:q.ThisExpression},$locals:{type:q.LocalsExpression}}};var Hd=2;Ld.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};Z(a,b.$filter);var d="",c;this.stage="assign";if(c=Kd(a))this.state.computing="assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Id(a.body);b.stage="inputs";r(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var k=b.nextId();b.recurse(a,k);b.return_(k);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,Tg,Ug,Gd);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;r(b,function(b){a.push("var "+b.name+"="+d.generateFunction(b.name,"s"));b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")});b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;r(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,k,h=this,l,m,p;c=c||E;if(!f&&w(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case q.Program:r(a.body,function(b,c){h.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?h.current().body.push(k,";"):h.return_(k)});break;case q.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case q.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});m=a.operator+"("+this.ifDefined(k,0)+")";this.assign(b,m);c(m);break;case q.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){k=a});m="+"===a.operator?this.plus(g,k):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(k,0):"("+g+")"+a.operator+"("+k+")";this.assign(b,m);c(m);break;case q.LogicalExpression:b=b||this.nextId();h.recurse(a.left,b);h.if_("&&"===a.operator?b:h.not(b),h.lazyRecurse(a.right,b));c(b);break;case q.ConditionalExpression:b=b||this.nextId();h.recurse(a.test,b);h.if_(b,h.lazyRecurse(a.alternate,b),h.lazyRecurse(a.consequent,b));c(b);break;case q.Identifier:b=b||this.nextId();d&&(d.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",a.name)),function(){h.if_("inputs"===h.stage||"s",function(){e&&1!==e&&h.if_(h.isNull(h.nonComputedMember("s",a.name)),h.lazyAssign(h.nonComputedMember("s",a.name),"{}"));h.assign(b,h.nonComputedMember("s",a.name))})},b&&h.lazyAssign(b,h.nonComputedMember("l",a.name)));c(b);break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();h.recurse(a.object,g,void 0,function(){h.if_(h.notNull(g),function(){a.computed?(k=h.nextId(),h.recurse(a.property,k),h.getStringValue(k),e&&1!==e&&h.if_(h.not(h.computedMember(g,k)),h.lazyAssign(h.computedMember(g,k),"{}")),m=h.computedMember(g,k),h.assign(b,m),d&&(d.computed=!0,d.name=k)):(e&&1!==e&&h.if_(h.isNull(h.nonComputedMember(g,a.property.name)),h.lazyAssign(h.nonComputedMember(g,a.property.name),"{}")),m=h.nonComputedMember(g,a.property.name),h.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){h.assign(b,"undefined")});c(b)},!!e);break;case q.CallExpression:b=b||this.nextId();a.filter?(k=h.filter(a.callee.name),l=[],r(a.arguments,function(a){var b=h.nextId();h.recurse(a,b);l.push(b)}),m=k+"("+l.join(",")+")",h.assign(b,m),c(b)):(k=h.nextId(),g={},l=[],h.recurse(a.callee,k,g,function(){h.if_(h.notNull(k),function(){r(a.arguments,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m=g.name?h.member(g.context,g.name,g.computed)+"("+l.join(",")+")":k+"("+l.join(",")+")";h.assign(b,m)},function(){h.assign(b,"undefined")});c(b)}));break;case q.AssignmentExpression:k=this.nextId();g={};this.recurse(a.left,void 0,g,function(){h.if_(h.notNull(g.context),function(){h.recurse(a.right,k);m=h.member(g.context,g.name,g.computed)+a.operator+k;h.assign(b,m);c(b||m)})},1);break;case q.ArrayExpression:l=[];r(a.elements,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case q.ObjectExpression:l=[];p=!1;r(a.properties,function(a){a.computed&&(p=!0)});p?(b=b||this.nextId(),this.assign(b,"{}"),r(a.properties,function(a){a.computed?(g=h.nextId(),h.recurse(a.key,g)):g=a.key.type===q.Identifier?a.key.name:""+a.key.value;k=h.nextId();h.recurse(a.value,k);h.assign(h.member(b,g,a.computed),k)})):(r(a.properties,function(b){h.recurse(b.value,a.constant?void 0:h.nextId(),void 0,function(a){l.push(h.escape(b.key.type===q.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case q.ThisExpression:this.assign(b,"s");c(b||"s");break;case q.LocalsExpression:this.assign(b,"l");c(b||"l");break;case q.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(C(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(X(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ya("esc")},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Md.prototype={compile:function(a){var b=this;Z(a,b.$filter);var d,c;if(d=Kd(a))c=this.recurse(d);d=Id(a.body);var e;d&&(e=[],r(d,function(a,c){var d=b.recurse(a);d.isPure=a.isPure;a.input=d;e.push(d);a.watchId=c}));var f=[];r(a.body,function(a){f.push(b.recurse(a.expression))});a=0===a.body.length?E:1===a.body.length?f[0]:function(a,b){var c;r(f,function(d){c=d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case q.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return f.identifier(a.name,b,d);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,e,b,d);case q.CallExpression:return g=[],r(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var p=[],n=0;n<g.length;++n)p.push(g[n](a,c,d,f));a=e.apply(void 0,p,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var p=e(a,c,d,f),n;if(null!=p.value){n=[];for(var s=0;s<g.length;++s)n.push(g[s](a,c,d,f));n=p.value.apply(p.context,n)}return b?{value:n}:n};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var p=c(a,d,f,g);a=e(a,d,f,g);p.context[p.name]=a;return b?{value:a}:a};case q.ArrayExpression:return g=[],r(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=[],r(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=w(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=w(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=Gd(k,c);return d?{value:k}:k}},"binary-":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=(w(k)?k:0)-(w(c)?c:0);return d?{value:k}:k}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k)?b(e,f,g,k):d(e,f,g,k);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]={});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,k){var h=a(e,f,g,k),l,m;null!=h&&(l=b(e,f,g,k),l+="",c&&1!==c&&h&&!h[l]&&(h[l]={}),m=h[l]);return d?{context:h,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};Nb.prototype={constructor:Nb,parse:function(a){a=this.getAst(a);var b=this.astCompiler.compile(a.ast),d=a.ast;b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===q.Literal||d.body[0].expression.type===q.ArrayExpression||d.body[0].expression.type===q.ObjectExpression);b.constant=a.ast.constant;b.oneTime=a.oneTime;return b},getAst:function(a){var b=!1;a=a.trim();":"===a.charAt(0)&&":"===a.charAt(1)&&(b=!0,a=a.substring(2));return{ast:this.ast.ast(a),oneTime:b}}};var Ea=F("$sce"),W={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Dc=/_([a-z])/g,Zg=F("$templateRequest"),$g=F("$timeout"),aa=z.document.createElement("a"),Qd=ga(z.location.href),Na;aa.href="http://[::1]";var ah="[::1]"===aa.hostname;Rd.$inject=["$document"];fd.$inject=["$provide"];var Yd=22,Xd=".",Fc="0";Sd.$inject=["$locale"];Ud.$inject=["$locale"];var lh={yyyy:ea("FullYear",4,0,!1,!0),yy:ea("FullYear",2,0,!0,!0),y:ea("FullYear",1,0,!1,!0),MMMM:lb("Month"),MMM:lb("Month",!0),MM:ea("Month",2,1),M:ea("Month",1,1),LLLL:lb("Month",!1,!0),dd:ea("Date",2),d:ea("Date",1),HH:ea("Hours",2),H:ea("Hours",1),hh:ea("Hours",2,-12),h:ea("Hours",1,-12),mm:ea("Minutes",2),m:ea("Minutes",1),ss:ea("Seconds",2),s:ea("Seconds",1),sss:ea("Milliseconds",3),EEEE:lb("Day"),EEE:lb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Pb(Math[0<a?"floor":"ceil"](a/60),2)+Pb(Math.abs(a%60),2))},ww:$d(2),w:$d(1),G:Gc,GG:Gc,GGG:Gc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},kh=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,jh=/^-?\d+$/;Td.$inject=["$locale"];var eh=ia(K),fh=ia(vb);Vd.$inject=["$parse"];var Re=ia({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===la.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),wb={};r(Hb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=xa("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});wb[c]=function(){return{restrict:"A",priority:100,link:e}}}});r(vd,function(a,b){wb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(ke))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});r(["src","srcset","href"],function(a){var b=xa("ng-"+a);wb[b]=["$sce",function(d){return{priority:99,link:function(c,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===la.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$set(b,d.getTrustedMediaUrl(f[b]));f.$observe(b,function(b){b?(f.$set(k,b),wa&&g&&e.prop(g,f[k])):"href"===a&&f.$set(k,null)})}}}]});var mb={$addControl:E,$getControls:ia([]),$$renameControl:function(a,b){a.$name=b},$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E,$setSubmitted:E,$$setSubmitted:E};Qb.$inject=["$element","$attrs","$scope","$animate","$interpolate"];Qb.prototype={$rollbackViewValue:function(){r(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ja(a.$name,"input");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$getControls:function(){return ja(this.$$controls)},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];r(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);r(this.$error,function(b,d){this.$setValidity(d,null,a)},this);r(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);cb(this.$$controls,a);a.$$parentForm=mb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Wb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Za,Wb+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;r(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){for(var a=this;a.$$parentForm&&a.$$parentForm!==mb;)a=a.$$parentForm;a.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;r(this.$$controls,function(a){a.$$setSubmitted&&a.$$setSubmitted()})}};ce({clazz:Qb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var oe=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||E}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Qb,compile:function(d,f){d.addClass(Za).addClass(nb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var p=f[0];if(!("action"in e)){var n=function(b){a.$apply(function(){p.$commitViewValue();p.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",n);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",n)},0,!1)})}(f[1]||p.$$parentForm).$addControl(p);var s=g?c(p.$name):E;g&&(s(a,p),e.$observe(g,function(b){p.$name!==b&&(s(a,void 0),p.$$parentForm.$$renameControl(p,b),s=c(p.$name),s(a,p))}));d.on("$destroy",function(){p.$$parentForm.$removeControl(p);s(a,void 0);S(p,mb)})}}}}}]},Se=oe(),df=oe(!0),mh=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,xh=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,yh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,nh=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,pe=/^(\d{4,})-(\d{2})-(\d{2})$/,qe=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Oc=/^(\d{4,})-W(\d\d)$/,re=/^(\d{4,})-(\d\d)$/,se=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ee=T();r(["date","datetime-local","month","time","week"],function(a){ee[a]=!0});var te={text:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Ic(c)},date:ob("date",pe,Rb(pe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",qe,Rb(qe,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",se,Rb(se,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Oc,function(a,b){if(ha(a))return a;if(C(a)){Oc.lastIndex=0;var d=Oc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,k=0,h=Zd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),k=b.getMilliseconds());return new Date(c,0,h.getDate()+e,d,f,g,k)}}return NaN},"yyyy-Www"),month:ob("month",re,Rb(re,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f,g,k){Jc(a,b,d,c,"number");fe(c);Sa(a,b,d,c,e,f);var h;if(w(d.min)||d.ngMin){var l=d.min||k(d.ngMin)(a);h=na(l);c.$validators.min=function(a,b){return c.$isEmpty(b)||A(h)||b>=h};d.$observe("min",function(a){a!==l&&(h=na(a),l=a,c.$validate())})}if(w(d.max)||d.ngMax){var m=d.max||k(d.ngMax)(a),p=na(m);c.$validators.max=function(a,b){return c.$isEmpty(b)||A(p)||b<=p};d.$observe("max",function(a){a!==m&&(p=na(a),m=a,c.$validate())})}if(w(d.step)||d.ngStep){var n=d.step||k(d.ngStep)(a),s=na(n);c.$validators.step=function(a,b){return c.$isEmpty(b)||A(s)||ge(b,h||0,s)};d.$observe("step",function(a){a!==n&&(s=na(a),n=a,c.$validate())})}},url:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Ic(c);c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||xh.test(d)}},email:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Ic(c);c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||yh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==V(d.ngTrim);A(d.name)&&b.attr("name",++qb);b.on("change",function(a){var g;b[0].checked&&(g=d.value,e&&(g=V(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=V(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);var e=d[a];d.$observe(a,function(a){a!==e&&(e=a,c(a))})}function k(a){p=na(a);Y(c.$modelValue)||(m?(a=b.val(),p>a&&(a=p,b.val(a)),c.$setViewValue(a)):c.$validate())}function h(a){n=na(a);Y(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<p?p:n),c.$setViewValue(a)):c.$validate())}function l(a){s=na(a);Y(c.$modelValue)||(m?c.$viewValue!==b.val()&&c.$setViewValue(b.val()):c.$validate())}Jc(a,b,d,c,"range");fe(c);Sa(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,p=m?0:void 0,n=m?100:void 0,s=m?1:void 0,r=b[0].validity;a=w(d.min);e=w(d.max);f=w(d.step);var q=c.$render;c.$render=m&&w(r.rangeUnderflow)&&w(r.rangeOverflow)?function(){q();c.$setViewValue(b.val())}:q;a&&(p=na(d.min),c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||A(p)||b>=p},g("min",k));e&&(n=na(d.max),c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||A(n)||b<=n},g("max",h));f&&(s=na(d.step),c.$validators.step=m?function(){return!r.stepMismatch}:function(a,b){return c.$isEmpty(b)||A(s)||ge(b,p||0,s)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,k){var h=he(k,a,"ngTrueValue",d.ngTrueValue,!0),l=he(k,a,"ngFalseValue",d.ngFalseValue,!1);b.on("change",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return va(a,h)});c.$parsers.push(function(a){return a?h:l})},hidden:E,button:E,submit:E,reset:E,file:E},$c=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,k){k[0]&&(te[K(g.type)]||te.text)(e,f,g,k[0],b,a,d,c)}}}}],Af=function(){var a={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(a){this.setAttribute("value",a)}};return{restrict:"E",priority:200,compile:function(b,d){if("hidden"===K(d.type))return{pre:function(b,d,f,g){b=d[0];b.parentNode&&b.parentNode.insertBefore(b,b.nextSibling);Object.defineProperty&&Object.defineProperty(b,"value",a)}}}}},zh=/^(true|false|\d+)$/,xf=function(){function a(a,d,c){var e=w(c)?c:9===wa?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return zh.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},We=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=jc(a)})}}}}],Ye=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=A(a)?"":a})}}}}],Xe=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],wf=ia({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ze=Lc("",!0),af=Lc("Odd",0),$e=Lc("Even",1),bf=Ra({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),cf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ed={},Ah={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=xa("ng-"+a);ed[b]=["$parse","$rootScope","$exceptionHandler",function(d,c,e){return sd(d,c,e,b,a,Ah[a])}]});var ff=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var k,h,l;d.$watch(e.ngIf,function(d){d?h||g(function(d,f){h=f;d[d.length++]=b.$$createComment("end ngIf",e.ngIf);k={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=ub(k.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),k=null))})}}}],gf=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",k=e.autoscroll;return function(c,e,m,p,n){var r=0,q,t,x,v=function(){t&&(t.remove(),t=null);q&&(q.$destroy(),q=null);x&&(d.leave(x).done(function(a){!1!==a&&(t=null)}),t=x,x=null)};c.$watch(f,function(f){var m=function(a){!1===a||!w(k)||k&&!c.$eval(k)||b()},t=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&t===r){var b=c.$new();p.template=a;a=n(b,function(a){v();d.enter(a,null,e).done(m)});q=b;x=a;q.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||t!==r||(v(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(v(),p.template=null)})}}}}],zf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){la.call(d[0]).match(/SVG/)?(d.empty(),a(gd(e.template,z.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],hf=Ra({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),vf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?V(e):e;c.$parsers.push(function(a){if(!A(a)){var b=[];a&&r(a.split(g),function(a){a&&b.push(f?V(a):a)});return b}});c.$formatters.push(function(a){if(H(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",be="ng-invalid",Za="ng-pristine",Wb="ng-dirty",pb=F("ngModel");Sb.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");Sb.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);B(c)&&(c=a(b));return c};this.$$ngModelSet=function(a,c){B(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,Aa(this.$$element));},$render:E,$isEmpty:function(a){return A(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Wb);this.$$animate.addClass(this.$$element,Za)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Wb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!Y(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;r(h.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(r(h.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;r(h.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!B(h.then))throw pb("nopromise",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?h.$$q.all(c).then(function(){g(d)},E):g(!0)}function f(a,b){k===h.$$currentValidationRunId&&h.$setValidity(a,b)}function g(a){k===h.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,h=this;(function(){var a=h.$$parserName;if(A(h.$$parserValid))f(a,null);else return h.$$parserValid||(r(h.$validators,function(a,b){f(b,null)}),r(h.$asyncValidators,function(a,b){f(b,null)})),f(a,h.$$parserValid),h.$$parserValid;return!0})()?c()?e():g(!1):g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;this.$$parserValid=A(a)?void 0:!0;this.$setValidity(this.$$parserName,null);this.$$parserName="parse";if(this.$$parserValid)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),A(a)){this.$$parserValid=!1;break}Y(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);r(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");X(b[a])?b=b[a]:X(b["default"])&&-1===this.$options.getOption("updateOn").indexOf(a)?b=b["default"]:X(b["*"])&&(b=b["*"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a);this.$$setUpdateOnEvents()},$processModelValue:function(){var a=this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,E))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a;this.$$parserValid=void 0;this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler);if(this.$$updateEvents=this.$options.getOption("updateOn"))this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}};ce({clazz:Sb,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var uf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Sb,priority:1,compile:function(b){b.addClass(Za).addClass("ng-untouched").addClass(nb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){k.$setTouched()}var k=f[0];k.$$setUpdateOnEvents();c.on("blur",function(){k.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Tb,Bh=/(\s+|^)default(\s+|$)/;Mc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;a=S({},a);r(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=V(d.replace(Bh,function(){a.updateOnDefault=!0;return" "})))},this);b&&(delete a["*"],ie(a,this.$$options));ie(a,Tb.$$options);return new Mc(a)}};Tb=new Mc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var yf=function(){function a(a,d){this.$$attrs=a;this.$$scope=d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Tb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},jf=Ra({terminal:!0,priority:1E3}),Ch=F("ngOptions"),Dh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,sf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!r&&za(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var p=a.match(Dh);if(!p)throw Ch("iexp",a,Aa(b));var n=p[5]||p[7],r=p[6];a=/ as /.test(p[0])&&p[1];var q=p[9];b=d(p[2]?p[1]:n);var t=a&&d(a)||b,w=q&&d(q),v=q?function(a,b){return w(c,b)}:function(a){return La(a)},x=function(a,b){return v(a,B(a,b))},A=d(p[2]||p[1]),y=d(p[3]||""),J=d(p[4]||""),I=d(p[8]),z={},B=r?function(a,b){z[r]=b;z[n]=a;return z}:function(a){z[n]=a;return z};return{trackBy:q,getTrackByValue:x,getWatchables:d(I,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var k=a===d?g:d[g],l=a[k],k=B(l,k),l=v(l,k);b.push(l);if(p[2]||p[1])l=A(c,k),b.push(l);p[4]&&(k=J(c,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},d=I(c)||[],g=f(d),k=g.length,n=0;n<k;n++){var p=d===g?n:g[n],r=B(d[p],p),s=t(c,r),p=v(s,r),w=A(c,r),z=y(c,r),r=J(c,r),s=new e(p,s,w,z,r);a.push(s);b[p]=s}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[x(a)]},getViewValueFromOption:function(a){return q?Ia(a.viewValue):a.viewValue}}}}}var e=z.document.createElement("option"),f=z.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=E},post:function(d,k,h,l){function m(a){var b=(a=v.getOptionFromViewValue(a))&&a.element;b&&!b.selected&&(b.selected=!0);return a}function p(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var n=l[0],q=l[1],A=h.multiple;l=0;for(var t=k.children(),z=t.length;l<z;l++)if(""===t[l].value){n.hasEmptyOption=!0;n.emptyOption=t.eq(l);break}k.empty();l=!!n.emptyOption;x(e.cloneNode(!1)).val("?");var v,B=c(h.ngOptions,k,d),C=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"};A?(n.writeValue=function(a){if(v){var b=a&&a.map(m)||[];v.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=k.val()||[],b=[];r(a,function(a){(a=v.selectValueMap[a])&&!a.disabled&&b.push(v.getViewValueFromOption(a))});return b},B.trackBy&&d.$watchCollection(function(){if(H(q.$viewValue))return q.$viewValue.map(function(a){return B.getTrackByValue(a)})},function(){q.$render()})):(n.writeValue=function(a){if(v){var b=k[0].options[k[0].selectedIndex],c=v.getOptionFromViewValue(a);b&&b.removeAttribute("selected");c?(k[0].value!==c.selectValue&&(n.removeUnknownOption(),k[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):n.selectUnknownOrEmptyOption(a)}},n.readValue=function(){var a=v.selectValueMap[k.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),v.getViewValueFromOption(a)):null},B.trackBy&&d.$watch(function(){return B.getTrackByValue(q.$viewValue)},function(){q.$render()}));l&&(a(n.emptyOption)(d),k.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),q.$render(),b.on("$destroy",function(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1;n.emptyOption=void 0;a&&q.$render()}))}):n.emptyOption.removeClass("ng-scope"));d.$watchCollection(B.getWatchables,function(){var a=v&&n.readValue();if(v)for(var b=v.items.length-1;0<=b;b--){var c=v.items[b];w(c.group)?Gb(c.element.parentNode):Gb(c.element)}v=B.getOptions();var d={};v.items.forEach(function(a){var b;if(w(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),C.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=e.cloneNode(!1);b.appendChild(c);p(a,c)}else b=e.cloneNode(!1),C.appendChild(b),p(a,b)});k[0].appendChild(C);q.$render();q.$isEmpty(a)||(b=n.readValue(),(B.trackBy||A?va(a,b):a===b)||(q.$setViewValue(b),q.$render()))})}}}}],kf=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,k){function h(a){g.text(a||"")}var l=k.count,m=k.$attr.when&&g.attr(k.$attr.when),p=k.offset||0,n=f.$eval(m)||{},q={},w=b.startSymbol(),t=b.endSymbol(),x=w+l+"-"+p+t,v=ca.noop,z;r(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+K(c[2]),n[c]=g.attr(k.$attr[b]))});r(n,function(a,d){q[d]=b(a.replace(c,x))});f.$watch(l,function(b){var c=parseFloat(b),e=Y(c);e||c in n||(c=a.pluralCat(c-p));c===z||e&&Y(z)||(v(),e=q[c],A(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),v=E,h()):v=f.$watch(e,h),z=c)})}}}],ue=F("ngRef"),lf=["$parse",function(a){return{priority:-1,restrict:"A",compile:function(b,d){var c=xa(ua(b)),e=a(d.ngRef),f=e.assign||function(){throw ue("nonassign",d.ngRef)};return function(a,b,h){var l;if(h.hasOwnProperty("ngRefRead"))if("$element"===h.ngRefRead)l=b;else{if(l=b.data("$"+h.ngRefRead+"Controller"),!l)throw ue("noctrl",h.ngRefRead,d.ngRef);}else l=b.data("$"+c+"Controller");l=l||b;f(a,l);b.on("$destroy",function(){e(a)===l&&f(a,null)})}}}}],mf=["$parse","$animate","$compile",function(a,b,d){var c=F("ngRepeat"),e=function(a,b,c,d,e,f,g){a[c]=d;e&&(a[e]=f);a.$index=b;a.$first=0===b;a.$last=b===g-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))},f=function(a,b,c){return La(c)},g=function(a,b){return b};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(k,h){var l=h.ngRepeat,m=d.$$createComment("end ngRepeat",l),p=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw c("iexp",l);var n=p[1],q=p[2],w=p[3],t=p[4],p=n.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!p)throw c("iidexp",n);var x=p[3]||p[1],v=p[2];if(w&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(w)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(w)))throw c("badident",w);var A;if(t){var z={$id:La},y=a(t);A=function(a,b,c,d){v&&(z[v]=b);z[x]=c;z.$index=d;return y(a,z)}}return function(a,d,h,k,n){var p=T();a.$watchCollection(q,function(h){var k,q,t=d[0],s,y=T(),B,C,E,D,H,F,K;w&&(a[w]=h);if(za(h))H=h,q=A||f;else for(K in q=A||g,H=[],h)ta.call(h,K)&&"$"!==K.charAt(0)&&H.push(K);B=H.length;K=Array(B);for(k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],D=q(a,C,E,k),p[D])F=p[D],delete p[D],y[D]=F,K[k]=F;else{if(y[D])throw r(K,function(a){a&&a.scope&&(p[a.id]=a)}),c("dupes",l,D,E);K[k]={id:D,scope:void 0,clone:void 0};y[D]=!0}z&&(z[x]=void 0);for(s in p){F=p[s];D=ub(F.clone);b.leave(D);if(D[0].parentNode)for(k=0,q=D.length;k<q;k++)D[k].$$NG_REMOVED=!0;F.scope.$destroy()}for(k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],F=K[k],F.scope){s=t;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);F.clone[0]!==s&&b.move(ub(F.clone),null,t);t=F.clone[F.clone.length-1];e(F.scope,k,x,E,v,C,B)}else n(function(a,c){F.scope=c;var d=m.cloneNode(!1);a[a.length++]=d;b.enter(a,null,t);t=d;F.clone=a;y[F.id]=F;e(F.scope,k,x,E,v,C,B)});p=y})}}}}],nf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ef=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],of=Ra(function(a,b,d){a.$watchCollection(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,c){b.css(c,"")});a&&b.css(a)})}),pf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],k=[],h=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;h.length;)a.cancel(h.pop());d=0;for(e=l.length;d<e;++d){var q=ub(k[d].clone);l[d].$destroy();(h[d]=a.leave(q)).done(m(h,d))}k.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&r(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],qf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});r(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),rf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),Eh=F("ngTransclude"),tf=["$compile",function(a){return{restrict:"EAC",compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,k){function h(){d(a,function(a){b.append(a)})}if(!k)throw Eh("orphan",Aa(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;k(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Pa||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(h(),c.$destroy())},null,f);f&&!k.isSlotFilled(f)&&h()}}}}],Te=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],Fh={$setViewValue:E,$render:E},Gh=["$element","$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){k||(k=!0,b.$$postDigest(function(){b.$$destroyed||(k=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Ib;e.selectValueMap={};e.ngModelCtrl=Fh;e.multiple=!1;e.unknownOption=x(z.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);a.prepend(e.unknownOption);Oa(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Oa(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=function(a){return"? "+La(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Oa(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&Oa(e.emptyOption,!1)};b.$on("$destroy",function(){e.renderUnknownOption=E});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Oa(x(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=La(b),a.val(c in e.selectValueMap?c:b),Oa(x(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ja(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};e.$hasEmptyOption=function(){return e.hasEmptyOption};e.$isUnknownOptionSelected=function(){return a[0].options[0]===e.unknownOption[0]};e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]};e.selectUnknownOrEmptyOption=function(a){null==a&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,k=!1;e.registerOption=function(a,b,f,g,k){if(f.$attr.ngValue){var q,r;f.$observe("value",function(a){var d,f=b.prop("selected");w(r)&&(e.removeOption(q),delete e.selectValueMap[r],d=!0);r=La(a);q=a;e.selectValueMap[r]=a;e.addOption(a,b);b.attr("value",r);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");w(q)&&(e.removeOption(q),d=!0);q=a;e.addOption(a,b);d&&f&&c()}):k?a.$watch(k,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Ue=function(){return{restrict:"E",require:["select","?ngModel"],controller:Gh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];r(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){r(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Oa(x(b),c)})};var g,k=NaN;a.$watch(function(){k!==f.$viewValue||va(g,f.$viewValue)||(g=ja(f.$viewValue),f.$render());k=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=E},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Ve=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;w(d.ngValue)||(w(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var h=b.parent();(h=h.data("$selectController")||h.parent().data("$selectController"))&&h.registerOption(a,b,d,c,e)}}}}],bd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.hasOwnProperty("required")||a(c.ngRequired)(b);c.ngRequired||(c.required=!0);e.$validators.required=function(a,b){return!f||!e.$isEmpty(b)};c.$observe("required",function(a){f!==a&&(f=a,e.$validate())})}}}}],ad=["$parse",function(a){return{restrict:"A",require:"?ngModel",compile:function(b,d){var c,e;d.ngPattern&&(c=d.ngPattern,e="/"===d.ngPattern.charAt(0)&&ke.test(d.ngPattern)?function(){return d.ngPattern}:a(d.ngPattern));return function(a,b,d,h){if(h){var l=d.pattern;d.ngPattern?l=e(a):c=d.pattern;var m=je(l,c,b);d.$observe("pattern",function(a){var d=m;m=je(a,c,b);(d&&d.toString())!==(m&&m.toString())&&h.$validate()});h.$validators.pattern=function(a,b){return h.$isEmpty(b)||A(m)||m.test(b)}}}}}}],dd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.maxlength||a(c.ngMaxlength)(b),g=Ub(f);c.$observe("maxlength",function(a){f!==a&&(g=Ub(a),f=a,e.$validate())});e.$validators.maxlength=function(a,b){return 0>g||e.$isEmpty(b)||b.length<=g}}}}}],cd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.minlength||a(c.ngMinlength)(b),g=Ub(f)||-1;c.$observe("minlength",function(a){f!==a&&(g=Ub(a)||-1,f=a,e.$validate())});e.$validators.minlength=function(a,b){return e.$isEmpty(b)||b.length>=g}}}}}];z.angular.bootstrap?z.console&&console.log("WARNING: Tried to load AngularJS more than once."):(Je(),Oe(ca),ca.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),x(function(){Ee(z.document,Wc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var __extends=(this&&this.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){if(typeof b!=="function"&&b!==null)
throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var __spreadArray=(this&&this.__spreadArray)||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}
return to.concat(ar||Array.prototype.slice.call(from))};var __assign=(this&&this.__assign)||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))
t[p]=s[p]}
return t};return __assign.apply(this,arguments)};var __setFunctionName=(this&&this.__setFunctionName)||function(f,name,prefix){if(typeof name==="symbol")name=name.description?"[".concat(name.description,"]"):"";return Object.defineProperty(f,"name",{configurable:!0,value:prefix?"".concat(prefix," ",name):name})};define("js/Serializable",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Serializable=void 0;var Serializable=(function(){function Serializable(){}
Serializable.copy=function(value,target,skipSerializable,filter){if(target===void 0){target=null}
if(skipSerializable===void 0){skipSerializable=!1}
if(filter===void 0){filter=null}
if(!skipSerializable&&value instanceof Serializable){var res=value.serialize();if(target){res=Serializable.copy(res,target)}
return res}else if(value instanceof Array){var arr=[];for(var i=0;i<value.length;i++){if(!filter||filter.call(value,i,value[i])){arr.push(Serializable.copy(value[i]))}}
return arr}else if(value instanceof Object){var obj=target?target:{};for(var k in value){if(value.hasOwnProperty(k)&&typeof value[k]!=='function'&&(!filter||filter.call(value,k,value[k]))){obj[k]=Serializable.copy(value[k])}}
return obj}else if(typeof value==='function'){return null}
return value};Serializable.deserializeArray=function(valueType,data,target){if(data===void 0){data=null}
if(target===void 0){target=null}
var arr=target?target:[];if(data instanceof Array){for(var i=0;i<data.length;i++){var item=new valueType();item.deserialize(data[i]);arr.push(item)}}
return arr};Serializable.serializeValue=function(data,target,filter,skipSerializable){if(target===void 0){target=null}
if(filter===void 0){filter=null}
if(skipSerializable===void 0){skipSerializable=!1}
return Serializable.copy(data,target,skipSerializable,filter)};Serializable.prototype.deserialize=function(data){if(data===void 0){data=null}
if(data&&typeof data==='object')
Serializable.copy(data,this);};Serializable.prototype.serialize=function(){return Serializable.copy(this,null,!0)};return Serializable}());exports.Serializable=Serializable});define("js/util/UID",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UID=void 0;if(typeof String.prototype.padStart!=="function"){String.prototype.padStart=function(targetLength,padString){if(padString===void 0){padString=" "}
var padLength=padString.length;if(padLength===0||this.length>=targetLength)
return this;var pad="";var i=this.length;for(;i+padLength<=targetLength;i+=padLength)
pad+=padString;if(padLength>1&&i<targetLength)
pad+=padString.substring(0,targetLength-i);return pad+this}}
var UID=exports.UID=(function(){function UID(value){if(value===void 0){value=UID.create()}
this.value=(typeof value==="string")?value:value.value}
UID.create=function(){var t=Date.now();if(t!==UID.seqTime){UID.seqTime=t;UID.seqNum=0}
var ts=t.toString(16).padStart(11,"0");var seq=((UID.seqNum++)&0xFF).toString(16).padStart(2,"0");var i;var arr=new Uint8Array(31-ts.length-seq.length);if("Crypto" in window&&typeof crypto.getRandomValues==="function"){crypto.getRandomValues(arr)}else{for(i=arr.length-1;i>=0;i--)
arr[i]=Math.floor(Math.random()*16);}
var rnd="";for(i=arr.length-1;i>=0;i--)
rnd+=(arr[i]&0xF).toString(16);return'a'+ts+seq+rnd};UID.seqTime=0;UID.seqNum=0;return UID}())});define("js/UIBuildable",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})});define("js/Service",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Service=void 0;var TmpBase=(function(){function TmpBase(){}
return TmpBase}());var Tmp=(function(_super){__extends(Tmp,_super);function Tmp(){return _super!==null&&_super.apply(this,arguments)||this}
return Tmp}(TmpBase));(new Tmp());window.__extends=__extends;exports.Service={};exports.default=exports.Service});define("js/UserInput",["require","exports","jquery"],function(require,exports,jquery_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UserInput=void 0;var UserInputType=(function(){function UserInputType(){this.hotKeysMap={27:'esc',9:'tab',32:'space',13:'return',8:'backspace',145:'scroll',20:'capslock',144:'numlock',19:'pause',45:'insert',36:'home',46:'del',35:'end',33:'pageup',34:'pagedown',37:'left',38:'up',39:'right',40:'down',109:'-',107:'+',112:'f1',113:'f2',114:'f3',115:'f4',116:'f5',117:'f6',118:'f7',119:'f8',120:'f9',121:'f10',122:'f11',123:'f12',191:'/'};this.hotKeysMod={shift:!1,ctrl:!1,alt:!1,win:!1,meta:!1};this.hotKeysListeners={};this.initialized=!1;this.blockNextMouseUpDeselect=!1;for(var i=65;i<=90;i++){this.hotKeysMap[i]=String.fromCharCode(i).toLowerCase()}
for(var i=96;i<=105;i++){this.hotKeysMap[i]=String.fromCharCode(i-48).toLowerCase()}}
UserInputType.prototype.resyncKeys=function(e){if(typeof e.shiftKey==='boolean')
this.hotKeysMod.shift=e.shiftKey;if(typeof e.ctrlKey==='boolean')
this.hotKeysMod.ctrl=e.ctrlKey;if(typeof e.altKey==='boolean')
this.hotKeysMod.alt=e.altKey;if(typeof e.metaKey==='boolean')
this.hotKeysMod.meta=e.metaKey};UserInputType.prototype.init=function(doc){var _this=this;if(this.initialized)
return;this.initialized=!0;(0,jquery_1.default)(doc).on('keydown',function(e){if((0,jquery_1.default)(e.target).is('body')&&e.which===8){e.preventDefault();return!1}
if(e.keyCode===16){_this.hotKeysMod.shift=!0}else if(e.keyCode===17){_this.hotKeysMod.ctrl=!0}else if(e.keyCode===18){_this.hotKeysMod.alt=!0}else{_this.resyncKeys(e)}
var key=_this.hotKeysMap[e.keyCode],_key='',listeners=_this.hotKeysListeners[_key];if(_this.hotKeysMod.shift&&key!=='shift')
_key+='shift+';if(_this.hotKeysMod.ctrl&&key!=='ctrl')
_key+='ctrl+';if(_this.hotKeysMod.alt&&key!=='alt')
_key+='alt+';if(_this.hotKeysMod.meta&&key!=='meta')
_key+='meta+';_key+=key;listeners=_this.hotKeysListeners[_key];if(listeners&&listeners.length>0){if(!e.data)
e.data={};e.data.hotKey=_key;var body=(0,jquery_1.default)(document.body);var inBuilder=!(body.hasClass("modal-open")||body.hasClass("wb-properties-focus"));for(var _i=0,listeners_1=listeners;_i<listeners_1.length;_i++){var listener=listeners_1[_i];if(!inBuilder&&listener.builderOnly)
continue;listener.callback(e)}}
return!0}).on('keyup',function(e){if(e.keyCode===16){_this.hotKeysMod.shift=!1}else if(e.keyCode===17){_this.hotKeysMod.ctrl=!1}else if(e.keyCode===18){_this.hotKeysMod.alt=!1}}).on('mouseenter',function(e){return _this.resyncKeys(e)})};UserInputType.prototype.addHotKey=function(comb,func,builderOnly){if(builderOnly===void 0){builderOnly=!1}
var lComb=comb.toLowerCase();if(!this.hotKeysListeners.hasOwnProperty(lComb))
this.hotKeysListeners[lComb]=[];this.hotKeysListeners[lComb].push({builderOnly:builderOnly,callback:func})};return UserInputType}());exports.UserInput=new UserInputType()});define("js/Confirm",["require","exports","jquery","Dialog","js/UserInput"],function(require,exports,jquery_2,Dialog_1,UserInput_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Confirm=void 0;var Confirm=exports.Confirm=(function(){function Confirm(){}
Confirm.showPopover=function(title,message,buttons,width,parent,placement){if(placement===void 0){placement=''}
if(!Confirm.hasHotkey){Confirm.hasHotkey=function(){if(Confirm.popover){Confirm.popover.popover('hide');Confirm.popover.popover('destroy')}};UserInput_1.UserInput.addHotKey('esc',Confirm.hasHotkey)}
if(Confirm.popover){Confirm.popover.popover('hide');Confirm.popover.popover('destroy')}
if(!buttons)
buttons=[{title:__('OK')}];if(!placement)
placement='bottom';var panel=(0,jquery_2.default)('<div>');panel.css({textAlign:'center'});var msg=null;panel.append(msg=(0,jquery_2.default)('<div>').css({textAlign:'left',marginBottom:'20px'}));msg.html(message.split("\n").join('<br />'));var buttonPanel=(0,jquery_2.default)('<div>').addClass('clearfix');panel.append(buttonPanel);var _loop_1=function(i){var cfg=buttons[i];var btn=(0,jquery_2.default)('<button>').addClass('btn');if(cfg.cssClass)
btn.addClass(cfg.cssClass);btn.html(cfg.title?cfg.title:__('Untitled'));if(i>0)
btn.css({marginLeft:'10px'});(function(func,validateFunc){btn.on('click',function(){if((typeof validateFunc==='function')&&!validateFunc(Confirm.popover))
return;if(Confirm.popover&&!cfg.noClose)
Confirm.popover.popover('hide');if(typeof func==='function')
func(Confirm.popover);panel.empty();if(Confirm.popover)
Confirm.popover.popover('destroy');Confirm.popover=null})})(cfg.func,cfg.validateFunc);buttonPanel.append(btn)};for(var i=0;i<buttons.length;i++){_loop_1(i)}
Confirm.popover=parent;Confirm.popover.popover({html:!0,title:title,content:function(){return panel},trigger:'manual',placement:placement});Confirm.popover.popover('show');if(width&&!isNaN(width*1))
parent.next('.popover').width(width*1);};Confirm.showDialog=function(title,message,buttons,width,onCancel,centerButtons){if(width===void 0){width=0}
if(centerButtons===void 0){centerButtons=!1}
var cancelState=!1;if(!Confirm.hasHotkey){Confirm.hasHotkey=function(){if(Confirm.dialog)
Confirm.dialog.hide();};UserInput_1.UserInput.addHotKey('esc',Confirm.hasHotkey)}
if(Confirm.dialog){Confirm.dialog.hide()}else{Confirm.dialog=new Dialog_1.default();Confirm.dialog.fields.panel=(0,jquery_2.default)('<div></div>');Confirm.dialog.setContent(Confirm.dialog.fields.panel)}
Confirm.dialog.setCenterButtons(centerButtons);if(!buttons)
buttons=[{title:__('OK')}];Confirm.dialog.setTitle(title);Confirm.dialog.fields.panel.empty();var msg=(typeof message==='string')?message.split("\n").join('<br />'):message;Confirm.dialog.fields.panel.append(msg);Confirm.dialog.removeAllButtons();var _loop_2=function(i){var cfg=buttons[i];(function(func,validateFunc){Confirm.dialog.addButton((cfg.title?cfg.title:__('Untitled')),function(){if((typeof validateFunc==='function')&&!validateFunc(Confirm.dialog))
return;if(Confirm.dialog&&!cfg.noClose)
Confirm.dialog.hide();if(typeof func==='function'){cancelState=!1;func(Confirm.dialog)}},undefined,cfg.cssClass)})(cfg.func,cfg.validateFunc)};for(var i=0;i<buttons.length;i++){_loop_2(i)}
if(width&&!isNaN(width*1))
Confirm.dialog.setSize(width*1);if(typeof onCancel==="function"){var cancelCallback_1=onCancel;Confirm.dialog.setOnClose(function(){cancelState=!0;setTimeout(function(){if(cancelState&&typeof cancelCallback_1==="function")
cancelCallback_1();},0)})}
Confirm.dialog.show()};Confirm.closeDialog=function(){var _a;(_a=Confirm.dialog)===null||_a===void 0?void 0:_a.hide()};Confirm.popover=null;Confirm.dialog=null;Confirm.hasHotkey=null;return Confirm}())});define("js/MenuConfirmDialog",["require","exports","jquery","js/Confirm"],function(require,exports,jquery_3,Confirm_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.confirmDelete=void 0;function confirmDelete(onConfirm,onCancel){Confirm_1.Confirm.showDialog(__("Delete menu"),(0,jquery_3.default)('<div class="wb_change_template_dlg">'+'<div class="qq">'+__("Are you sure you want to delete this menu?")+'</div>'+'<div class="red">'+__("Once deleted all pages this menu links to will also be deleted.")+'</div>'+'</div>'),[{title:__("No, keep current menu")},{title:__("Yes, delete menu"),cssClass:"btn-danger",func:onConfirm}],480,onCancel);if(Confirm_1.Confirm.dialog)
Confirm_1.Confirm.dialog.setCenterButtons(!0);}
exports.confirmDelete=confirmDelete});define("js/util/EventUtil",["require","exports","jquery"],function(require,exports,jquery_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.moveEventDiff=exports.triggerEvent=exports.clientPosFromEvent=exports.posFromEvent=void 0;function posFromEvent(e,includeScroll){if(includeScroll===void 0){includeScroll=!1}
var mx='pageX' in e?e.pageX:0;var my='pageY' in e?e.pageY:0;var oe=('originalEvent' in e)?e.originalEvent:((window.TouchEvent&&e instanceof TouchEvent)?e:null);if(oe&&oe.changedTouches&&oe.changedTouches.length>0){var te=oe.changedTouches[0];mx=te.pageX;my=te.pageY}
if(includeScroll&&window.scrollX!==undefined&&window.scrollY!==undefined){mx-=window.scrollX;my-=window.scrollY}
return{left:mx,top:my}}
exports.posFromEvent=posFromEvent;function clientPosFromEvent(e){var mx='clientX' in e?e.clientX:0;var my='clientY' in e?e.clientY:0;var oe=('originalEvent' in e)?e.originalEvent:((window.TouchEvent&&e instanceof TouchEvent)?e:null);if(oe&&oe.changedTouches&&oe.changedTouches.length>0){var te=oe.changedTouches[0];mx=te.clientX;my=te.clientY}
return{left:mx,top:my}}
exports.clientPosFromEvent=clientPosFromEvent;function triggerEvent(target,type,refEvent){var _a,_b;var event=jquery_4.default.Event(type);(_a=posFromEvent(refEvent),event.pageX=_a.left,event.pageY=_a.top);(_b=clientPosFromEvent(refEvent),event.clientX=_b.left,event.clientY=_b.top);target.trigger(event)}
exports.triggerEvent=triggerEvent;function moveEventDiff(startEvent,moveEvent){var p1=posFromEvent(moveEvent),p2=posFromEvent(startEvent),pa=p1.left-p2.left,pb=p1.top-p2.top;return Math.sqrt(pa*pa+pb*pb)}
exports.moveEventDiff=moveEventDiff});define("js/util/TextUtil",["require","exports","jquery"],function(require,exports,jquery_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.truncateText=exports.fixEditorHtml=exports.copyMultilangValue=exports.setMultilangValue=exports.stripScriptTags=exports.stripTags=exports.escapeHtml=exports.escapeHtmlChars=exports.trim=exports.aliasToHumanReadableName=exports.sanitizeAlias=exports.urlEncode=exports.TextUtil=void 0;var TextUtil=exports.TextUtil=(function(){function TextUtil(){}
TextUtil.detectCharacterDimensions=function(fontFamily,character){if(this.sizeDetector===null||!this.sizeDetectorSpan||!this.sizeDetectorBaseLine){this.sizeDetector=(0,jquery_5.default)('<div>').css({position:"fixed",left:0,top:0,width:"auto",height:"auto",visibility:"hidden",whiteSpace:"nowrap"});this.sizeDetectorSpan=(0,jquery_5.default)('<span>').css({display:"inline-block",verticalAlign:"baseline",fontSize:"1000px",lineHeight:"1em",whiteSpace:"nowrap"});this.sizeDetectorBaseLine=(0,jquery_5.default)('<div>').css({display:"inline-block",width:0,height:0,verticalAlign:"baseline",});this.sizeDetector.append(this.sizeDetectorSpan)}
this.sizeDetectorSpan.css("font-family",fontFamily).html(character);(0,jquery_5.default)(document.body).append(this.sizeDetector);var box=this.sizeDetectorSpan[0].getBoundingClientRect();var dim={width:box.width,height:box.height,baseLine:box.height};this.sizeDetectorSpan.append(this.sizeDetectorBaseLine);var box2=this.sizeDetectorBaseLine[0].getBoundingClientRect();dim.baseLine=box2.top-box.top;this.sizeDetectorBaseLine.detach();this.sizeDetector.detach();return dim};TextUtil.sizeDetector=null;TextUtil.sizeDetectorSpan=null;TextUtil.sizeDetectorBaseLine=null;return TextUtil}());function urlEncode(url,quotes,hash){if(quotes===void 0){quotes=!1}
if(hash===void 0){hash=!1}
var url_=encodeURI(url).replace(/\(/g,"%28").replace(/\)/g,"%29");if(quotes){url_=url_.replace(/\'/g,"%27")}
if(hash){url_=url_.replace(/#/g,"%23")}
return url_}
exports.urlEncode=urlEncode;function sanitizeAlias(alias){var sepSym='-';alias=alias.replace(/<\/?[^>]+>/gi,'').replace(/%([a-fA-F0-9][a-fA-F0-9])/g,'---$1---').replace('%','').replace(/---([a-fA-F0-9][a-fA-F0-9])--/,'%$1').replace(/&.+?;/,'').replace('.',sepSym).replace(/—|–/g,sepSym).replace(/¡|¿|«|»|‹|›|‘|’|“|”|‚|‛|„|‟|©|®|°|…|™|̀|́|̄|̌|×|\!|@|#|\$|%|\^|&|\*|\(|\)|"|'|;|:|\|/g,'').replace(/\s+/g,sepSym).replace(/-+/g,sepSym).replace(/^-*(.*)-*$/,'$1');return decodeURIComponent(alias)}
exports.sanitizeAlias=sanitizeAlias;function aliasToHumanReadableName(alias){var parts=alias.replace(/[_\-]/g," ").replace(/\s\s+/g," ").split(" ");var out=[];for(var _i=0,parts_1=parts;_i<parts_1.length;_i++){var part=parts_1[_i];out.push(part.charAt(0).toUpperCase()+part.slice(1))}
return out.join(" ")}
exports.aliasToHumanReadableName=aliasToHumanReadableName;function trim(str,customSymbols){var symIdx={};var symbols=(typeof customSymbols!=='undefined')?customSymbols.split(''):[' '];for(var i=0;i<symbols.length;i++){symIdx[symbols[i]]=!0}
var cont=!0;while(cont){cont=!1;var a=str.substring(0,1);var b=str.substring(str.length-1);if(a in symIdx){str=str.substring(1);cont=!0}
if(b in symIdx){str=str.substring(0,str.length-1);cont=!0}}
return str}
exports.trim=trim;function escapeHtmlChars(text){if(!text||typeof(text)!=='string')
return text;return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}
exports.escapeHtmlChars=escapeHtmlChars;function escapeHtml(text){if(!text||typeof(text)!=='string')
return text;return escapeHtmlChars(text).replace(/\\/g,"&#x2F;").replace(/\ /g,"&nbsp;")}
exports.escapeHtml=escapeHtml;function stripTags(html){return(html&&(typeof(html)==='string'||html.hasOwnProperty('replace')))?jquery_5.default.trim(html.replace(/<\/?[^>]+(>|$)|<br>/g,'')):html}
exports.stripTags=stripTags;function stripScriptTags(text){return text.replace(/<script(.*?)>(.*?)<\/script>/is,'')}
exports.stripScriptTags=stripScriptTags;function setMultilangValue(mlValue,value,lang){var defaultLang=wb_builder.site.getLastDefLang()||'';if(!lang&&wb_builder.site.currSelLang){lang=wb_builder.site.currSelLang}
if(!lang&&defaultLang)
lang=defaultLang;if(lang){if(typeof mlValue==='string'){var val={};if(defaultLang)
val[defaultLang]=mlValue;mlValue=val}
mlValue[lang]=value}else{mlValue=value}
return mlValue}
exports.setMultilangValue=setMultilangValue;function copyMultilangValue(value){var result='';if(typeof value==='object'){result={};for(var ln in value)
result[ln]=value[ln]}else{result=value}
return result}
exports.copyMultilangValue=copyMultilangValue;function fixEditorHtml(html,forBuilder){if(forBuilder===void 0){forBuilder=!1}
if(typeof html==='string'){html=html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*(?:<\/script>|$)/gi,'').replace(/<(\/*(?:script|iframe|object|embed|audio|video|source|canvas)[^>]*\/*)>/g,'&lt;$1&gt;').replace(/[\r\t]/g,'');if(jquery_5.default.browser.msie){html=html.replace(/(<p[^>]*>)(?:&shy;|&shy;&shy;|&shy;&shy;&shy;)(<\/p>)/ig,'$1&nbsp;$2')}
var m=void 0,pattern=/(<img[^>]+src=")([^"]+)("[^>]*>)/ig;var result=html;while((m=pattern.exec(html))!==null){result=result.replace(m[0],m[1]+(forBuilder?wb_builder.makeLocalUrl(m[2]):wb_builder.makeRelUrl(m[2]))+m[3])}
html=result}else{for(var ln in html){html[ln]=fixEditorHtml(html[ln],forBuilder)}}
return html}
exports.fixEditorHtml=fixEditorHtml;function truncateText(text,maxLength){if(maxLength>0&&text&&text.length>maxLength)
text=text.substring(0,maxLength)+'...';return text}
exports.truncateText=truncateText});define("js/ContextMenu",["require","exports","js/jquery-builder","js/Service","MobileToolbar","js/util/EventUtil","js/util/TextUtil"],function(require,exports,jquery_builder_1,Service_1,MobileToolbar_1,EventUtil,TextUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ContextMenu=exports.hideAllContextMenus=void 0;(0,jquery_builder_1.default)(function(){(0,jquery_builder_1.default)('#site').on('mouseup touchstart',function(e){if(e.button===2)
return;hideAllMenus()});(0,jquery_builder_1.default)(window).on('scroll',function(){if((0,jquery_builder_1.default)(window).width()>mobileLimit){hideAllMenus()}})});Service_1.Service.contextMenu={hideAll:function(){hideAllMenus()},cleanup:function(){for(var _i=0,menuList_1=menuList;_i<menuList_1.length;_i++){var menu=menuList_1[_i];menu.dispose()}
menuList=[]}};var bindCont=null;var menuList=[];var lastIndex=0;var mobileLimit=485;function hideAllMenus(){MobileToolbar_1.Drawer.open(null,null,!0);for(var _i=0,menuList_2=menuList;_i<menuList_2.length;_i++){var menu=menuList_2[_i];menu.hide()}}
exports.hideAllContextMenus=hideAllMenus;var ContextMenu=(function(){function ContextMenu(id){this.parentMenu=null;this.bindBtn=null;this.passiveBindElements=[];this.onShow=null;this.pageX=0;this.pageY=0;this.mobileDrawer=null;this.isVisible=!1;this.hideTime=0;this.id="wb_context_menu_"+lastIndex++;if(id)
this.id=id;this.menu=(0,jquery_builder_1.default)('<ul></ul>').attr('id',(id?id:null));this.menu.addClass("dropdown-menu wb-contextmenu");this.menu.wbSetClassInstance(this);this.items=[];menuList.push(this)}
ContextMenu.prototype.dispose=function(){this.hide();this.menu.wbUnsetClassInstance();this.menu.remove();this.onShow=null;for(var _i=0,_a=this.passiveBindElements;_i<_a.length;_i++){var el=_a[_i];el.oncontextmenu=null}
this.passiveBindElements=[];this.unbind();var idx=menuList.indexOf(this);if(idx>=0)
menuList.splice(idx,1);};ContextMenu.prototype.show=function(e,isSubmenu){if(isSubmenu===void 0){isSubmenu=!1}
var i;if((0,jquery_builder_1.default)(window).width()<=mobileLimit){hideAllMenus();if(typeof(this.onShow)==="function"){if(this.onShow(this,e)===!1)
return}
if(!this.mobileDrawer){this.mobileDrawer=new MobileToolbar_1.Drawer('list');for(i=0;i<this.items.length;i++){this.mobileDrawer.addItem(MobileToolbar_1.Toolbar.buildDrawerItem(this.items[i],this.mobileDrawer))}
this.mobileDrawer.addItem(MobileToolbar_1.Toolbar.buildDrawerItem({type:'-'},this.mobileDrawer));this.mobileDrawer.addItem(MobileToolbar_1.Toolbar.buildDrawerItem({name:__("Properties"),icon:'fa fa-gears',click:function(e){wb_builder.sidebarPanel.setVisible(!0)}},this.mobileDrawer));(0,jquery_builder_1.default)(document.body).append(this.mobileDrawer.getElem())}
wb_builder.sidebarPanel.setVisible(!1);MobileToolbar_1.Drawer.open(this.mobileDrawer,null,!0);return}
if(e){for(var _i=0,menuList_3=menuList;_i<menuList_3.length;_i++){var menu=menuList_3[_i];if(this.id===menu.id)
continue;menu.hide()}}
if(!bindCont){bindCont=(0,jquery_builder_1.default)('<div>').addClass('dropdown-btn-body').appendTo(document.body)}
if(typeof(this.onShow)==="function"){if(this.onShow(this,e)===!1)
return}
if(this.items.length==0)
return;if(!this.isVisible){this.isVisible=!0;if(this.parentMenu){this.menu.parent().addClass("open")}else{bindCont.addClass("open").append(this.menu)}}
var vw=(0,jquery_builder_1.default)(window).width();var vh=(0,jquery_builder_1.default)(window).height();var mw=this.menu.outerWidth(!0);var mh=this.menu.outerHeight(!0);var px=0,py=0;var parentElem=this.menu.parent();if(e){var mpos=EventUtil.posFromEvent(e);this.pageX=mpos.left;this.pageY=mpos.top;px=mpos.left+10;py=mpos.top+10;if(wb_builder.rtl){if((px-mw)<0){px=mpos.left+10+mw}}else{if((px+mw)>vw){px=mpos.left-10-mw}}
if((py+mh)>vh){py=mpos.top-10-mh;if(py<window.scrollY)
py=window.scrollY}
parentElem.css({left:px+"px",top:py+"px"})}else if(isSubmenu){var off=parentElem.offset();var prw=parentElem.width();px=90;py=0;if((off.left+Math.ceil(prw*0.9)+mw)>vw){px=-90}
if((off.top+mh)>vh){py=-mh+10}
this.menu.css({left:px+"%",top:py+"px"})}};ContextMenu.prototype.setGridView=function(value){if(value===void 0){value=!0}
if(value){this.menu.addClass('grid')}else{this.menu.removeClass('grid')}};ContextMenu.prototype.getGridView=function(){return this.menu.hasClass('grid')};ContextMenu.prototype.hide=function(){if(!this.isVisible)
return;this.isVisible=!1;this.hideTime=(new Date()).getTime();if(this.parentMenu){this.menu.parent().removeClass("open")}else{this.menu.detach();if(bindCont)
bindCont.removeClass("open");}};ContextMenu.prototype.isJustHidden=function(){return Math.abs((new Date()).getTime()-this.hideTime)<500};ContextMenu.prototype.getIsVisible=function(){return this.isVisible};ContextMenu.prototype.linkDrawer=function(drawer){this.mobileDrawer=drawer};ContextMenu.prototype.bind=function(elem,noClick){var _this=this;if(noClick===void 0){noClick=!1}
var btn=(0,jquery_builder_1.default)('<span>').addClass('dropdown-toggle-body').appendTo(elem);if(!noClick){btn.on("click",function(e){_this.show(e);e.stopPropagation();return!1})}
this.pasiveBind(btn);this.bindBtn=btn};ContextMenu.prototype.unbind=function(){if(this.bindBtn){var btn=this.bindBtn;btn.off("click");this.pasiveUnbind(btn);btn.remove();this.bindBtn=null}
if(bindCont){bindCont.remove();bindCont=null}
this.menu.detach()};ContextMenu.prototype.pasiveBind=function(elem){var _this=this;var rawElem=elem.get(0);this.passiveBindElements.push(rawElem);rawElem.oncontextmenu=function(e){if(!e){e=window.event}
var ne=wb_builder.normalizeEvent(e);ne.type="click";_this.show(ne);e.stopPropagation();return!1}};ContextMenu.prototype.pasiveUnbind=function(elem){var rawElem=elem.get(0);rawElem.oncontextmenu=null;var idx=this.passiveBindElements.indexOf(rawElem);if(idx>=0)
this.passiveBindElements.splice(idx,1);};ContextMenu.prototype.setHeight=function(height){var h=height?parseInt(''+height):0;if(!h){this.menu.css({maxHeight:'',overflow:'',overflowY:''})}else{this.menu.css({maxHeight:h+'px',overflow:'hidden',overflowY:'auto'})}};ContextMenu.prototype.removeAllItems=function(){this.items.splice(0,this.items.length);this.menu.children().each(function(){(0,jquery_builder_1.default)(this).remove()})};ContextMenu.prototype.insertItemAt=function(index,id,name,submenu,selected,disabled,param,ico,multi,padding,encodeName,premium){var _this=this;if(selected===void 0){selected=!1}
if(disabled===void 0){disabled=!1}
if(ico===void 0){ico=''}
if(multi===void 0){multi=!1}
if(padding===void 0){padding=0}
if(encodeName===void 0){encodeName=!0}
if(premium===void 0){premium=!1}
if(encodeName){name=(0,TextUtil_1.escapeHtmlChars)(name)}
var item={id:id,name:name,checked:(selected?!0:!1),disabled:(selected?!0:!1),premium:!!premium,visible:!0,icon:ico};if(submenu instanceof ContextMenu){item.drawer={type:'list',items:submenu.items,linkTo:submenu}}else if(typeof(submenu)==='function'){(function(thisSelf,func,param){item.click=function(e){func.call(thisSelf,e,param)}})(this,submenu,param)}
if(index>=0&&index<this.items.length){this.items.splice(index,0,item)}else{this.items.push(item)}
var mi=(0,jquery_builder_1.default)('<li><a href="javascript:void(0)"></a></li>');mi.attr("iid",id);if(multi){mi.addClass("wb-multi-mi");if(multi==="only")
mi.addClass("wb-multi-mi-only");}
if(!name)
name='---';if(typeof(selected)==="undefined")
selected=!1;if(typeof(disabled)==="undefined")
disabled=!1;if(ico){mi.children("a").append('<i class="'+ico+'"></i>')}
mi.children("a").append((0,jquery_builder_1.default)('<span>').html(name));if(padding>0){mi.children("a").children("i").css({paddingLeft:padding+'em'})}
if(selected)
mi.addClass("active");if(disabled)
mi.addClass("disabled");if(submenu instanceof ContextMenu)
this.initItemSubmenuOnHover(mi,submenu);if(typeof(submenu)==="function"){var _callback=submenu;var _callback_param=param?param:null;mi.data("__WB_MI_DATA__",_callback_param);mi.children("a").bind("click",(function(e,prm){var res=_callback(e,(typeof(prm)==="undefined")?_callback_param:prm);if(res!==!1){_this.hide();if(_this.parentMenu){_this.parentMenu.hide();if(_this.parentMenu.parentMenu){_this.parentMenu.parentMenu.hide()}}}}))}
if(premium)
mi.append((0,jquery_builder_1.default)('<i class="premium-marker fa fa-star"></i>'));if(index>=0&&index<this.menu.children("li").length){this.menu.children("li").eq(index).before(mi)}else{this.menu.append(mi)}
return mi};ContextMenu.prototype.getIndexById=function(id){var items=this.menu.children("[iid],.divider");var idx=0;jquery_builder_1.default.each(items,function(i,item){if((0,jquery_builder_1.default)(item).attr('iid')===id){idx=parseInt(i,10);return}});return++idx};ContextMenu.prototype.addItem=function(id,name,submenu,selected,disabled,param,ico,multi,encodeName,premium){if(multi===void 0){multi=!1}
if(encodeName===void 0){encodeName=!0}
if(premium===void 0){premium=!1}
return this.insertItemAt(-1,id,name,submenu,selected,disabled,param,ico,multi,0,encodeName,premium)};ContextMenu.prototype.removeItem=function(id){for(var i=(this.items.length-1);i>=0;i--){if('id' in this.items[i]&&this.items[i].id===id){this.items.splice(i,1);break}}
var item=this.getItem(id);if(item){item.removeData();item.remove()}};ContextMenu.prototype.addSeparator=function(index){if(index===void 0){index=-1}
var item={type:'-'};if(index>=0&&index<this.items.length){this.items.splice(index,0,item)}else{this.items.push(item)}
var mi=(0,jquery_builder_1.default)('<li class="divider"></li>');if(!isNaN(index*1)&&index>=0&&index<this.menu.children("li").length){this.menu.children("li").eq(index).before(mi)}else{this.menu.append(mi)}};ContextMenu.prototype.fixSeparators=function(){var items=this.menu.children('li'),wasElement=!1,lastVisibleDivider=null;for(var i=0,c=items.length;i<c;i++){var el=items.eq(i);if(el.hasClass('divider')){if(wasElement){wasElement=!1;lastVisibleDivider=el;el.show()}else el.hide()}else if(el.get(0).style.display!=='none'){wasElement=!0}}
if(!wasElement&&lastVisibleDivider)
lastVisibleDivider.hide();};ContextMenu.prototype.getSize=function(){return this.menu.children("li").length};ContextMenu.prototype.getItem=function(id){var items=this.menu.children("[iid="+id+"]");if(items.length==0)
return null;return items.eq(0)};ContextMenu.prototype.getItems=function(){var items=[];this.menu.children('[iid]').each(function(){items.push({id:(0,jquery_builder_1.default)(this).attr('iid'),elem:(0,jquery_builder_1.default)(this)})});return items};ContextMenu.prototype.setName=function(id,name,icon){var item=null;for(var i=this.items.length-1;i>=0;i--){if(!('id' in this.items[i])||this.items[i].id!==id)
continue;item=this.items[i];break}
if(!item)
return;item.name=name;var mi=this.getItem(id);mi=mi?(0,jquery_builder_1.default)(mi).children("a"):null;if(!mi||mi.length===0)
return;var ico=mi.children("i");if(ico.length>0)
ico.detach();if(typeof icon==="string"){item.icon=icon;if(icon===""){ico.remove();ico=null}else{if(!ico.length)
ico=(0,jquery_builder_1.default)('<i>');ico.attr("class",icon)}}
mi.empty();if(ico&&ico.length>0)
mi.append(ico);mi.append('<span>'+name+'</span>');if(this.mobileDrawer){var drawerItem=this.mobileDrawer.getItemById(id);if(drawerItem)
drawerItem.setTitle(name,icon);}};ContextMenu.prototype.setAction=function(id,act,unbind){var _this=this;if(unbind===void 0){unbind=!1}
var mi=this.getItem(id);if(!mi||mi.length===0)
return;if(act instanceof ContextMenu){mi.append(act.menu)}
if(typeof(act)==="function"){var _callback_param=mi.data("__WB_MI_DATA__");if(unbind){mi.children("a").unbind("click");mi.children("a").bind("click",function(){_this.hide();if(_this.parentMenu)
_this.parentMenu.hide();})}
var callback_1=(function(e,prm){act(e,(typeof(prm)==="undefined")?_callback_param:prm)});mi.children("a").bind("click",callback_1);this.items.forEach(function(item){if(item.id===id){item.click=callback_1}})}};ContextMenu.prototype.hasSubmenu=function(id){var mi=this.getItem(id);if(!mi||mi.length===0)
return!1;return(0,jquery_builder_1.default)(mi).find("ul").length>0};ContextMenu.prototype.getSubmenu=function(id){var mi=this.getItem(id);if(!mi||mi.length===0)
return null;var menu=(0,jquery_builder_1.default)(mi).find("ul");return menu.length?menu.wbGetClassInstance():null};ContextMenu.prototype.setSubmenu=function(id,submenu){var mi=this.getItem(id);if(!mi||mi.length===0)
return;if(submenu instanceof ContextMenu){this.removeSubmenu(id);submenu.parentMenu=this;mi.addClass("dropdown-submenu");mi.append(submenu.menu);this.initItemSubmenuOnHover(mi,submenu)}};ContextMenu.prototype.removeSubmenu=function(id){var mi=this.getItem(id);if(!mi||mi.length===0)
return;(0,jquery_builder_1.default)(mi).find(".icon-chevron-right, ul").remove()};ContextMenu.prototype.getLocation=function(){var loc=this.menu.parent().is("li")?this.menu.position():this.menu.parent().position();return loc};ContextMenu.prototype.setSelected=function(id,selected){var mi=this.getItem(id);if(!mi||mi.length===0)
return;if(selected)
mi.addClass("active");else mi.removeClass("active")};ContextMenu.prototype.setDisabled=function(id,disabled){var mi=this.getItem(id);if(!mi||mi.length===0)
return;if(disabled){if(mi.children('.cover').length===0){mi.css({position:'relative'});mi.prepend((0,jquery_builder_1.default)('<div>').addClass('cover cover-disabler').on('mousedown mouseup',function(e){e.stopPropagation();e.preventDefault();return!1}))}}else{mi.children('.cover').remove()}};ContextMenu.prototype.setVisible=function(id,visible){var mi=this.getItem(id);if(!mi||mi.length===0)
return;mi.css("display",visible?"block":"none");for(var _i=0,_a=this.items;_i<_a.length;_i++){var item=_a[_i];if(item&&'id' in item&&item.id===id){item.visible=visible}}
if(this.mobileDrawer){var item=this.mobileDrawer.getItemById(id);if(item){item.setVisible(visible)}}};ContextMenu.prototype.trigger=function(id,param){var mi=this.getItem(id);if(!mi||mi.length===0)
return;mi.trigger("click",[param])};ContextMenu.prototype.setMultiMode=function(value){if(value){this.menu.children("li").hide();this.menu.children(".wb-multi-mi").show()}else{this.menu.children("li").show();this.menu.children(".wb-multi-mi-only").hide()}};ContextMenu.prototype.initItemSubmenuOnHover=function(mi,submenu){submenu.parentMenu=this;mi.addClass("dropdown-submenu");mi.append(submenu.menu);mi.hover(function(){var vw=(0,jquery_builder_1.default)(window).width();var mw=submenu.menu.outerWidth(!0);var off=mi.offset();var prw=mi.width();var smenu=mi.children("ul.dropdown-menu");if((off.left+prw+mw)>vw){mi.addClass("pull-left")}else{mi.removeClass("pull-left")}
smenu.children('li').each(function(i){if((0,jquery_builder_1.default)(this).hasClass('active')){var ih=(0,jquery_builder_1.default)(this).outerHeight(!0);var mh=smenu.height();smenu.scrollTop(ih*i-mh/2+ih/2);return!1}
return undefined})},function(){});mi.children('a').on('click',function(e){e.stopPropagation()})};return ContextMenu}());exports.ContextMenu=ContextMenu;var ContextMenuItem=(function(){function ContextMenuItem(name,icon,id,onClick){var _this=this;this._selected=!1;this._disabled=!1;this._multiSomething=!1;this._metaData=null;this._onClick=null;this.id=id;this.name=name;this.elem=(0,jquery_builder_1.default)('<li>');this.elemA=(0,jquery_builder_1.default)('<a>').appendTo(this.elem);this._elemIcon=(0,jquery_builder_1.default)('<i>').attr('href','javascript:void(0)');this._elemText=(0,jquery_builder_1.default)(document.createTextNode(name)).appendTo(this.elemA);this._elemSubmenu=(0,jquery_builder_1.default)('<ul>').addClass('dropdown-menu');if(icon)
this.setIcon(icon);this._items=[];this._onClick=(typeof onClick==='function')?onClick:null;if(this._onClick){this.elemA.on('click',function(e){if(_this._disabled)
return!1;if(_this._onClick)
_this._onClick.call(_this,e);return!0})}}
ContextMenuItem.prototype.removeAllItems=function(){var items=this._items.splice(0,this._items.length);for(var _i=0,items_1=items;_i<items_1.length;_i++){var item=items_1[_i];item.elem.detach()}
this._elemSubmenu.detach()};ContextMenuItem.prototype.removeItem=function(item){if(!(item instanceof ContextMenuItem))
return;var idx=this._items.indexOf(item);if(idx>=0){this._items.splice(idx,1);item.elem.detach();if(this._items.length<=0){this._elemSubmenu.detach()}}};ContextMenuItem.prototype.setItems=function(items){for(var _i=0,items_2=items;_i<items_2.length;_i++){var item=items_2[_i];this.addItem(item)}};ContextMenuItem.prototype.addItem=function(item){this.insertItemAt(-1,item)};ContextMenuItem.prototype.insertItemAt=function(index,item){var _this=this;if(!(item instanceof ContextMenuItem))
return;this._items.push(item);if(this._items.length>0){this._elemSubmenu.appendTo(this.elem)}
this.elem.hover(function(){if(_this._disabled)
return!1;var vw=(0,jquery_builder_1.default)(window).width();var mw=_this._elemSubmenu.outerWidth(!0);var off=_this.elem.offset();var prw=_this.elem.width();if((off.left+prw+mw)>vw){_this.elem.addClass('pull-left');_this._elemSubmenu.css({left:(-_this._elemSubmenu.width())+'px'})}else{_this.elem.removeClass('pull-left')}
return!0},function(){return!_this._disabled});if(index>=0&&index<this._elemSubmenu.children('li').length){this._elemSubmenu.children('li').eq(index).before(item.elem)}else{this._elemSubmenu.append(item.elem)}};ContextMenuItem.prototype.setMetaData=function(data){this._metaData=data};ContextMenuItem.prototype.setMultiSomethind=function(multiSomething){this._multiSomething=multiSomething;if(multiSomething){this.elem.addClass('wb-multi-mi')}else{this.elem.removeClass('wb-multi-mi')}};ContextMenuItem.prototype.setEnabled=function(enabled){this._disabled=!enabled;if(enabled){this.elem.removeClass('disabled')}else{this.elem.addClass('disabled')}};ContextMenuItem.prototype.setSelected=function(selected){this._selected=selected;if(selected){this.elem.addClass('active')}else{this.elem.removeClass('active')}};ContextMenuItem.prototype.setIcon=function(icon){this.icon=icon;this._elemIcon.addClass(icon);if(icon){this._elemIcon.detach()}else{this._elemIcon.prependTo(this.elemA)}};ContextMenuItem.prototype.setName=function(name){this.name=name;this._elemText.text(name)};return ContextMenuItem}())});define("js/element/ZIndexHandle",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ZIndexHandle=exports.reset=void 0;var globalMinZIndex=99;var globalZLayers={};var globalZLayerElements={};function reset(){globalZLayers={};globalZLayerElements={}}
exports.reset=reset;var ZIndexHandle=(function(){function ZIndexHandle(container,minZIndex){if(minZIndex===void 0){minZIndex=2}
this.container=container;this.minZIndex=minZIndex;this.zLayers={}}
ZIndexHandle.prototype.remove=function(elem){if(elem.id in globalZLayerElements)
delete globalZLayerElements[elem.id]};ZIndexHandle.prototype.assignLayer=function(elem,noReset){if(noReset===void 0){noReset=!1}
var idx=0,isGlobal=elem.isGlobalZIndex(),inGlobals=(elem.id in globalZLayerElements);if(elem.isZIndexEnabled()){idx=this.getValidZIndex(elem.getZIndex(),!1,isGlobal)}
if(inGlobals&&!isGlobal){delete globalZLayerElements[elem.id]}else if(!inGlobals&&isGlobal){globalZLayerElements[elem.id]=elem}
elem.setZIndex(idx);if(isGlobal)
globalZLayers["z"+elem.getZIndex()]=!0;else this.zLayers["z"+elem.getZIndex()]=!0;if(!noReset)
this.changeLayer();};ZIndexHandle.prototype.getValidZIndex=function(zIndex,topMost,isGlobal){if(topMost===void 0){topMost=!1}
if(isGlobal===void 0){isGlobal=!1}
var i=0;var layers=isGlobal?globalZLayers:this.zLayers;var minZIndex=isGlobal?globalMinZIndex:this.minZIndex;topMost=(topMost||isNaN(parseInt(''+zIndex,10))||parseInt(''+zIndex,10)<=1);if(topMost){var maxIdx=minZIndex;for(var k in layers){var idx=parseInt(k.substring(1),10);if(isNaN(idx))
idx=0;if(idx>maxIdx)
maxIdx=idx}
i=maxIdx+1}else{i=zIndex*1+(isGlobal?0:minZIndex);if(i<minZIndex)
i=minZIndex;while(layers["z"+i]&&i<10000)
i++}
return i};ZIndexHandle.prototype.buildElementLists=function(){var listRaw=this.container.getChildren(),elements=[],i,c,indexes=[],idx;for(i=0,c=listRaw.length;i<c;i++){if(listRaw[i].isGlobalZIndex())
continue;elements.push(listRaw[i])}
elements.sort(function(a,b){return(a.getZIndex()-b.getZIndex())});for(i=0,c=elements.length;i<c;i++){indexes.push(elements[i].getZIndex())}
var maxLocalZIndex=Math.max.apply(Math,__spreadArray([0],indexes,!1));var globalElements=[],globalIndexes=[];for(var key in globalZLayerElements){if(!globalZLayerElements[key].isGlobalZIndex())
continue;globalElements.push(globalZLayerElements[key])}
globalElements.sort(function(a,b){return(a.getZIndex()-b.getZIndex())});for(i=0,c=globalElements.length;i<c;i++){globalIndexes.push(maxLocalZIndex+i+1000)}
return{local:{elements:elements,indexes:indexes},global:{elements:globalElements,indexes:globalIndexes}}};ZIndexHandle.prototype.applyElementLists=function(lists){this.zLayers=ZIndexHandle.applyElementList(lists.local,this.minZIndex);globalZLayers=ZIndexHandle.applyElementList(lists.global,globalMinZIndex)};ZIndexHandle.applyElementList=function(list,minZIndex){var zLayers={};var idx,i,c,off=0;for(i=0,c=list.elements.length;i<c;i++){idx=parseInt(''+list.indexes[i],10);if(i===0&&idx<minZIndex)
off=minZIndex-idx;idx+=off;if(!list.elements[i].isZIndexEnabled())
idx=0;list.elements[i].setZIndex(idx);zLayers["z"+idx]=!0}
return zLayers};ZIndexHandle.prototype.changeLayer=function(elem,dir){var lists=this.buildElementLists();if(elem){var elemList=elem.isGlobalZIndex()?lists.global.elements:lists.local.elements;var idx=elemList.indexOf(elem);if(idx<0)
return;if(dir==="top"&&idx<elemList.length){elemList.splice(idx,1);elemList.push(elem)}else if(dir==="bottom"&&idx>0){elemList.splice(idx,1);elemList.unshift(elem)}else if(dir==="up"&&idx<elemList.length){elemList.splice(idx,1);elemList.splice(idx+1,0,elem)}else if(dir==="down"&&idx>0){elemList.splice(idx,1);elemList.splice(idx-1,0,elem)}
var historyData={element:elem.id,idx:idx};var swapZIndex=function(historyData){var element=window.getElementById(historyData.element);if(!element){console.error("Unable to undo '"+this.type+"': can't find element "+historyData.element);return}
var parent=element.parent||wb_builder.getCurrentContextCanvas();if(!parent||!parent.zIndexHandle){console.error("Unable to undo '"+this.type+"': invalid parent");return}
var lists=parent.zIndexHandle.buildElementLists();var elemList=elem.isGlobalZIndex()?lists.global.elements:lists.local.elements;var idx=elemList.indexOf(elem);if(idx<0){console.error("Unable to undo '"+this.type+"': element "+historyData.element+" is no longer a part of the layer");return}
elemList.splice(idx,1);elemList.splice(historyData.idx,0,element);parent.zIndexHandle.applyElementLists(lists);historyData.idx=idx};wb_builder.historyAdd("changeZIndex",historyData,swapZIndex,swapZIndex)}
this.applyElementLists(lists)};return ZIndexHandle}());exports.ZIndexHandle=ZIndexHandle});define("js/UIContainer",["require","exports","js/UIComponent"],function(require,exports,UIComponent_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UIContainer=void 0;var UIContainer=(function(_super){__extends(UIContainer,_super);function UIContainer(tagType){var _this=_super.call(this,tagType)||this;_this._children=[];_this._container=null;if(tagType==='%inherit%')
return _this;_this._children=[];return _this}
UIContainer.prototype._appendChild=function(child){this._elem.append(child.getElem())};UIContainer.prototype._detachChild=function(child){child.getElem().detach()};UIContainer.prototype.addChild=function(child){var idx=this._children.indexOf(child);if(idx<0){this._children.push(child);this._appendChild(child)}
return this};UIContainer.prototype.removeChild=function(child){var idx=this._children.indexOf(child);if(idx>=0){this._children.splice(idx,1);this._detachChild(child)}
return this};UIContainer.prototype.addAllChildren=function(children){for(var _i=0,children_1=children;_i<children_1.length;_i++){var child=children_1[_i];this.addChild(child)}
return this};UIContainer.prototype.removeAllChildren=function(){for(var i=0;i<this._children.length;i++){this._detachChild(this._children[i])}
this._children.splice(0,this._children.length);return this};UIContainer.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);for(var i=0;i<this._children.length;i++){this._children[i].setEnabled(enabled)}};return UIContainer}(UIComponent_1.UIComponent));exports.UIContainer=UIContainer});define("js/FlowLayout",["require","exports","jquery","js/UIContainer"],function(require,exports,jquery_6,UIContainer_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FlowLayout=void 0;var FlowLayout=(function(_super){__extends(FlowLayout,_super);function FlowLayout(inh){var _this=_super.call(this,(inh==='%inherit%')?inh:'div')||this;_this.spacing='default';_this.wrap=!0;_this.horizontalAlign='left';_this.verticalAlign='bottom';if(inh==='%inherit%')
return _this;_this._elem.addClass('wb-flow-layout-ctrl');return _this}
FlowLayout.prototype.buildInit=function(data,fields){if(typeof data.spacing!=='undefined'){this.setSpacing(data.spacing)}else{this.setSpacing('default')}
if(data.align){this.setHorizontalAlign(data.align)}
if(data.verticalAlign){this.setVerticalAlign(data.verticalAlign)}else{this.setVerticalAlign('top')}
if(data.wrap)
this.setWrap(data.wrap);};FlowLayout.prototype._appendChild=function(child){this._elem.append(child.getElem());this.updateSpacing(this.spacing)};FlowLayout.prototype._detachChild=function(child){var childElem=child.getElem();childElem.detach()};FlowLayout.prototype.applyLayoutCellCss=function(idx,css){this._elem.children().eq(idx).css(css);return this};FlowLayout.prototype.setSpacing=function(spacing){if(this.spacing==spacing)
return this;this.spacing=spacing;this.updateSpacing(spacing);return this};FlowLayout.prototype.setWrap=function(wrap){if(wrap){this._elem.css('flex-wrap','')}else{this._elem.css('flex-wrap','nowrap')}
return this};FlowLayout.prototype.updateSpacing=function(spacing){var css={};if((0,jquery_6.default)('html').eq(0).attr('dir')==='rtl'){css.marginLeft=(typeof spacing!=='number')?'':(spacing+'px');css.marginRight=(typeof spacing!=='number')?'':0}else{css.marginRight=(typeof spacing!=='number')?'':(spacing+'px');css.marginLeft=(typeof spacing!=='number')?'':0}
if(spacing==='full'){this._elem.addClass('wb-spfull-ctrl')}else{this._elem.removeClass('wb-spfull-ctrl')}
this._elem.children(':not(:last-child)').css(css)};FlowLayout.prototype.setHorizontalAlign=function(horizontalAlign){if(this.horizontalAlign==horizontalAlign)
return this;var val=this.horizontalAlign;this.horizontalAlign=horizontalAlign;if(val)
this._elem.removeClass('wb-ctrl-'+val);this._elem.addClass('wb-ctrl-'+this.horizontalAlign);return this};FlowLayout.prototype.setVerticalAlign=function(verticalAlign){if(this.verticalAlign==verticalAlign)
return this;var val=this.verticalAlign;this.verticalAlign=verticalAlign;if(val)
this._elem.removeClass('wb-ctrl-'+val);this._elem.addClass('wb-ctrl-'+this.verticalAlign);return this};return FlowLayout}(UIContainer_1.UIContainer));exports.FlowLayout=FlowLayout});define("js/VerticalLayout",["require","exports","js/UIContainer","jquery"],function(require,exports,UIContainer_2,jquery_7){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.VerticalLayout=void 0;var VerticalLayout=(function(_super){__extends(VerticalLayout,_super);function VerticalLayout(fluid,rowStyleClass){if(fluid===void 0){fluid=!1}
if(rowStyleClass===void 0){rowStyleClass=[]}
var _this=_super.call(this,(fluid==='%inherit%')?fluid:'div')||this;_this._spacing=0;_this._childCount=0;if(fluid==='%inherit%')
return _this;_this.addClass('wb-vertical-layout');if(fluid)
_this.addClass('row-fluid');_this._rowStyleClass=(rowStyleClass&&(typeof rowStyleClass==='object')&&('length' in rowStyleClass))?rowStyleClass:[];return _this}
VerticalLayout.prototype.buildInit=function(data,fields){if(data.fluid)
this.addClass('row-fluid');if(data.rowStyleClass&&data.rowStyleClass instanceof Array)
this._rowStyleClass=data.rowStyleClass;if(data.spacing||data.spacing===0)
this.setSpacing(data.spacing);};VerticalLayout.prototype._appendChild=function(child){var div=(0,jquery_7.default)('<div>').append(child.getElem());if(this._childCount>0)
div.css({marginTop:this._spacing+'px'});this._elem.append(div);if(this._childCount>=0&&this._childCount<this._rowStyleClass.length&&this._rowStyleClass[this._childCount]){div.addClass(this._rowStyleClass[this._childCount])}
this._childCount++};VerticalLayout.prototype._detachChild=function(child){var childElem=child.getElem();var div=childElem.parent();childElem.detach();div.remove();this._childCount--};VerticalLayout.prototype.setLayoutCellCssClass=function(idx,cssClass){this._elem.children().eq(idx).attr("class",cssClass);return this};VerticalLayout.prototype.applyLayoutCellCss=function(idx,css){this._elem.children().eq(idx).css(css);return this};VerticalLayout.prototype.setSpacing=function(spacing){this._spacing=spacing;return this};return VerticalLayout}(UIContainer_2.UIContainer));exports.VerticalLayout=VerticalLayout});define("js/HorizontalLayout",["require","exports","jquery","js/UIContainer"],function(require,exports,jquery_8,UIContainer_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HorizontalLayout=void 0;var HorizontalLayout=(function(_super){__extends(HorizontalLayout,_super);function HorizontalLayout(tagType){var _this=_super.call(this,(tagType==='%inherit%')?tagType:'div')||this;_this.columnWeights={};_this.columnWeightsSmall={};_this.columnWeightsXs={};if(tagType==='%inherit%')
return _this;_this._elem.addClass('row');return _this}
HorizontalLayout.prototype.buildInit=function(data,fields){if(data.columnWeights&&typeof data.columnWeights==='object'&&data.columnWeights.length){for(var n=0;n<data.columnWeights.length;n++){this.setColWeight(n,data.columnWeights[n])}}
if(data.columnWeightsSmall&&typeof data.columnWeightsSmall==='object'&&data.columnWeightsSmall.length){for(var n=0;n<data.columnWeightsSmall.length;n++){this.setColWeight(n,data.columnWeightsSmall[n],1)}}
if(data.columnWeightsXs&&typeof data.columnWeightsXs==='object'&&data.columnWeightsXs.length){for(var n=0;n<data.columnWeightsXs.length;n++){this.setColWeight(n,data.columnWeightsXs[n],2)}}
if(('noPadding' in data)&&data.noPadding){this.setNoPadding(!0)}};HorizontalLayout.prototype._appendChild=function(child){var div=(0,jquery_8.default)('<div>').append(child.getElem());this._elem.append(div);var c=Math.floor(12/this._elem.children().length);if(c<1)
c=1;var idx=(this._elem.children().length-1);if(('#'+idx)in this.columnWeights){this._elem.children().eq(idx).attr('class','wb-horiz-lay-item col-md-'+this.columnWeights['#'+idx])}else{this._elem.children().attr('class','wb-horiz-lay-item col-md-'+c)}
if(('#'+idx)in this.columnWeightsSmall){this._elem.children().eq(idx).addClass('col-sm-'+this.columnWeightsSmall['#'+idx])}
if(('#'+idx)in this.columnWeightsXs){this._elem.children().eq(idx).addClass('col-xs-'+this.columnWeightsXs['#'+idx])}};HorizontalLayout.prototype._detachChild=function(child){var childElem=child.getElem(),div=childElem.parent();childElem.detach();div.remove();var c=Math.floor(12/this._elem.children().length);if(c<1)
c=1;this._elem.children().attr('class','wb-horiz-lay-item col-md-'+c)};HorizontalLayout.prototype.applyLayoutCellCss=function(idx,css){this._elem.children().eq(idx).css(css);return this};HorizontalLayout.prototype.setColWeight=function(idx,weight,size){if(size===void 0){size=0}
var oldWeight=Math.floor(12/this._elem.children().length);if(size===2){if(('#'+idx)in this.columnWeightsXs){oldWeight=this.columnWeightsXs['#'+idx]}
this.columnWeightsXs['#'+idx]=weight;this._elem.children().eq(idx).removeClass('col-xs-'+oldWeight).addClass('col-xs-'+weight)}else if(size===1){if(('#'+idx)in this.columnWeightsSmall){oldWeight=this.columnWeightsSmall['#'+idx]}
this.columnWeightsSmall['#'+idx]=weight;this._elem.children().eq(idx).removeClass('col-sm-'+oldWeight).addClass('col-sm-'+weight)}else{if(('#'+idx)in this.columnWeights){oldWeight=this.columnWeights['#'+idx]}
this.columnWeights['#'+idx]=weight;this._elem.children().eq(idx).removeClass('col-md-'+oldWeight).addClass('col-md-'+weight)}
return this};HorizontalLayout.prototype.setColWeightAll=function(wieghts){for(var n=0;n<wieghts.length;n++){this.setColWeight(n,wieghts[n])}
return this};HorizontalLayout.prototype.setNoPadding=function(noPadding){if(noPadding){this._elem.addClass('wb-horiz-lay-no-padding')}else{this._elem.removeClass('wb-horiz-lay-no-padding')}};return HorizontalLayout}(UIContainer_3.UIContainer));exports.HorizontalLayout=HorizontalLayout});define("js/ui/ThumbEditorControl",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_2,jquery_9){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ThumbEditorControl=exports.ThumbMessageType=exports.ThumbSize=void 0;var ThumbSize;(function(ThumbSize){ThumbSize[ThumbSize.Small=0]="Small";ThumbSize[ThumbSize.Normal=1]="Normal";ThumbSize[ThumbSize.Big=2]="Big"})(ThumbSize||(exports.ThumbSize=ThumbSize={}));var ThumbMessageType;(function(ThumbMessageType){ThumbMessageType[ThumbMessageType.Overlay=0]="Overlay";ThumbMessageType[ThumbMessageType.BottomOverlay=1]="BottomOverlay";ThumbMessageType[ThumbMessageType.FullOverlay=2]="FullOverlay"})(ThumbMessageType||(exports.ThumbMessageType=ThumbMessageType={}));var ThumbEditorControl=(function(_super){__extends(ThumbEditorControl,_super);function ThumbEditorControl(){var _this=_super.call(this)||this;_this.size=ThumbSize.Normal;_this.controlsElem=null;_this.msgElem=null;_this.message='';_this.messageType=ThumbMessageType.Overlay;_this.previewValue='';_this.hasEdit=!1;_this.removeControl=null;_this.removeControlVisible=!0;_this.thumbElem=(0,jquery_9.default)('<div>').addClass('thumbnail wb-ctrl-cont');_this.previewElem=(0,jquery_9.default)('<div>').addClass('wb-ctrl-preview').appendTo(_this.thumbElem);_this._elem.addClass('wb-thumb-editor-control').append(_this.thumbElem);return _this}
ThumbEditorControl.prototype.addControl=function(icon,func){var _this=this;if(!this.controlsElem){this.controlsElem=(0,jquery_9.default)('<div>').addClass('btn-group'+((this.size==ThumbSize.Small)?'':'-vertical')+' btn-group-sm wb-ctrl-ctrl').appendTo(this._elem)}
return(0,jquery_9.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_9.default)('<span>').addClass(icon)).on('click',function(e){return func.call(_this,e)}).appendTo(this.controlsElem)};ThumbEditorControl.prototype.setEnabled=function(enabled){var _a,_b;this._enabled=enabled;if(this._enabled){this.thumbElem.removeClass('disabled');(_a=this.controlsElem)===null||_a===void 0?void 0:_a.find('button').removeAttr('disabled')}else{this.thumbElem.addClass('disabled');(_b=this.controlsElem)===null||_b===void 0?void 0:_b.find('button').attr('disabled','disabled')}};ThumbEditorControl.prototype.onEdit=function(func){var _this=this;this.addControl('fa fa-pencil',func);if(!this.hasEdit){this.hasEdit=!0;this.thumbElem.on('click',function(e){return func.call(_this,e)})}
return this};ThumbEditorControl.prototype.triggerEdit=function(){this.thumbElem.trigger('click')};ThumbEditorControl.prototype.onRemove=function(func){this.removeControl=this.addControl('fa fa-remove',func);return this};ThumbEditorControl.prototype.setRemoveControlVisible=function(visible){if(!this.removeControl)
return;if(this.removeControlVisible==visible)
return;this.removeControlVisible=visible;if(visible){this.removeControl.show()}else{this.removeControl.hide()}};ThumbEditorControl.prototype.setSize=function(size){if(this.size==size)
return;this.size=size;if(size==ThumbSize.Big)
this._elem.addClass('wb-ctrl-big');else this._elem.removeClass('wb-ctrl-big');if(size==ThumbSize.Small)
this._elem.addClass('wb-ctrl-small');else this._elem.removeClass('wb-ctrl-small');if(this.controlsElem){if(size==ThumbSize.Small){this.controlsElem.addClass('btn-group').removeClass('btn-group-vertical')}else{this.controlsElem.addClass('btn-group-vertical').removeClass('btn-group')}}};ThumbEditorControl.prototype.setMessage=function(message,type){if(type===void 0){type=ThumbMessageType.Overlay}
var forceType=!1;if(this.message!=message){this.message=message;if(message){if(!this.msgElem){this.msgElem=(0,jquery_9.default)('<span>').addClass('wb-ctrl-msg');this.thumbElem.prepend(this.msgElem);forceType=!0}else{this.msgElem.show()}
this.msgElem.html(message)}else if(this.msgElem){this.msgElem.hide();this.msgElem.empty()}}
if(this.messageType!=type||forceType){this.messageType=type;if(this.msgElem){this.msgElem.removeClass('wb-ctrl-bottom wb-ctrl-full-overlay');if(type==ThumbMessageType.BottomOverlay){this.msgElem.addClass('wb-ctrl-bottom')}
if(type==ThumbMessageType.FullOverlay){this.msgElem.addClass('wb-ctrl-full-overlay')}}}
return this};ThumbEditorControl.prototype.setPreview=function(value,html){if(html===void 0){html=!1}
if(this.previewValue==value)
return this;this.previewValue=value;if(html)
this.previewElem.html(value);else this.previewElem.text(value);return this};ThumbEditorControl.prototype.getPreviewElem=function(){return this.previewElem};ThumbEditorControl.prototype.getThumbElem=function(){return this.thumbElem};return ThumbEditorControl}(UIComponent_2.UIComponent));exports.ThumbEditorControl=ThumbEditorControl});define("js/ui/Popover",["require","exports","js/Service","jquery"],function(require,exports,Service_2,jquery_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Popover=exports.closeAll=void 0;var visiblePops=[];function closeAll(){for(var i=visiblePops.length-1;i>=0;i--){if(visiblePops[i].getMouseDowned()===!1){visiblePops[i].setVisible(!1)}}}
exports.closeAll=closeAll;Service_2.Service.popover={init:function(){},closeAll:function(){return closeAll()}};var popIdx=0;var Popover=(function(){function Popover(triggerBtn,title,content,styleClass){if(content===void 0){content=null}
var _this=this;this.content=content;this.styleClass=styleClass;this.initialized=!1;this.elem=null;this.arrowElem=null;this.visible=!1;this.isContentDetached=!1;this.mouseDowned=!1;this.waitTriggerDeferred=null;this.hideFunctions=[];this.trigger=triggerBtn;this.id='wb-popover-ctrl-'+(popIdx++);this.trigger.popover({title:title,content:"<div id=\"".concat(this.id,"\"></div>"),html:!0,placement:'left',trigger:'manual',container:'body',}).on('inserted.bs.popover',function(){if(_this.content&&!_this.isContentDetached)(0,jquery_10.default)('#'+_this.id).append(_this.content);_this.init();_this.onDom()}).on('shown.bs.popover',function(){_this.updatePosition();_this.onShown()}).on('show.bs.popover',function(){_this.visible=!0}).on('hidden.bs.popover',function(){_this.visible=!1;if(_this.content&&!_this.isContentDetached)
_this.content.detach();});addToGlobalScroll(this)}
Popover.prototype.getElem=function(){return this.elem};Popover.prototype.setMouseDowned=function(downed){this.mouseDowned=downed};Popover.prototype.getMouseDowned=function(){return this.mouseDowned};Popover.prototype.updatePosition=function(){if(!this.initialized||this.isContentDetached||!this.isVisible()||!this.elem)
return;this.elem.css({bottom:''});if((0,jquery_10.default)(window).width()<=768){this.elem.css({top:'',bottom:''});var winHeight=(0,jquery_10.default)(window).height();var h=this.elem.outerHeight();if(h>=winHeight){this.elem.css({top:10,bottom:10})}else{var offset=(winHeight-h)/2-1;this.elem.css({top:offset,bottom:offset})}}else{var winHeight=(0,jquery_10.default)(window).height();var scrollY_1=window.scrollY;var off=this.trigger.offset();var th=this.trigger.outerHeight();var w=this.elem.outerWidth();var h=this.elem.outerHeight();var py=off.top-(h/2)+(th/2);var arrowYOffset=0;if((py+h-scrollY_1)>winHeight){arrowYOffset=(py+h-scrollY_1)-winHeight;py=winHeight-h+scrollY_1}
if(py<scrollY_1){arrowYOffset=py-scrollY_1;py=scrollY_1}
if(this.arrowElem){var ah=this.arrowElem.outerHeight();this.arrowElem.css({top:Math.min(Math.max((h/2)+arrowYOffset,42),h-14)})}
this.elem.css({left:Math.max(off.left-w,0),top:py,})}};Popover.prototype.dispose=function(){removeFromGlobalScroll(this);this.trigger.popover('destroy')};Popover.prototype.setContentDetached=function(detach,target){if(this.isContentDetached==detach)
return;this.isContentDetached=detach;if(this.content){this.content.detach();if(detach){target.append(this.content);this.onDom()}}};Popover.prototype.triggerOnDom=function(){this.onDom()};Popover.prototype.onInit=function(){};Popover.prototype.onDom=function(){};Popover.prototype.onShown=function(){};Popover.prototype.onBodyClick=function(){};Popover.prototype.getContent=function(){return this.content};Popover.prototype.setContent=function(content){if(this.initialized&&this.content){console.error("Can't change content after initialization");return}
this.content=content};Popover.prototype.onHide=function(func){this.hideFunctions.push(func);return this};Popover.prototype.isInitialized=function(){return this.initialized};Popover.prototype.isVisible=function(){return this.visible};Popover.prototype.waitTrigger=function(){var _this=this;this.cancelWaitTrigger();var def=this.waitTriggerDeferred=jquery_10.default.Deferred();var retryCounter=0;var lastPosition="";var waitStable=function(){if(def.state()!=="pending"){return}
var box=_this.trigger.get(0).getBoundingClientRect();var position=box.left+"|"+box.top+"|"+box.width+"|"+box.height;if(lastPosition===position){_this.waitTriggerDeferred=null;def.resolve()}else if(++retryCounter>=60){_this.waitTriggerDeferred=null;def.reject()}else{lastPosition=position;requestAnimationFrame(waitStable)}};var waitVisible=function(){if(def.state()!=="pending"){return}
if(_this.trigger.is(":visible")){retryCounter=0;waitStable()}else if(++retryCounter>=60){_this.waitTriggerDeferred=null;def.reject()}else{requestAnimationFrame(waitVisible)}};waitVisible();return def.promise()};Popover.prototype.cancelWaitTrigger=function(){if(this.waitTriggerDeferred){this.waitTriggerDeferred.reject();this.waitTriggerDeferred=null}};Popover.prototype.setVisible=function(visible,noEvent){var _this=this;if(noEvent===void 0){noEvent=!1}
if(this.visible==visible)
return;this.cancelWaitTrigger();if(visible){this.waitTrigger().then(function(){if(visiblePops.indexOf(_this)<0){visiblePops.push(_this)}
_this.trigger.popover('show')})}else{var idx=visiblePops.indexOf(this);if(idx>=0)
visiblePops.splice(idx,1);this.trigger.popover('hide');if(!noEvent){for(var _i=0,_a=this.hideFunctions;_i<_a.length;_i++){var func=_a[_i];func.call(this)}}}};Popover.prototype.init=function(){var _this=this;if(this.initialized||!this.content||this.isContentDetached)
return;this.initialized=!0;this.elem=this.content.parents('.popover').addClass('wb-popover-ctrl'+(this.styleClass?" ".concat(this.styleClass):'')).css({maxWidth:'inherit'}).append((0,jquery_10.default)('<span>').addClass('close').text('×').on('click',function(){return _this.setVisible(!1)})).on('click',function(e){_this.onBodyClick();e.stopImmediatePropagation();e.stopPropagation()});this.arrowElem=this.elem.children('.arrow');this.onInit()};return Popover}());exports.Popover=Popover;var globalScrollInitiated=!1;var globalScrollItems=[];function removeFromGlobalScroll(pop){var idx=globalScrollItems.indexOf(pop);if(idx>=0)
globalScrollItems.splice(idx,1);}
function addToGlobalScroll(pop){globalScrollItems.push(pop);if(globalScrollInitiated)
return;globalScrollInitiated=!0;window.addEventListener('scroll',function(e){var _a;for(var _i=0,globalScrollItems_1=globalScrollItems;_i<globalScrollItems_1.length;_i++){var pop_1=globalScrollItems_1[_i];if(e.target&&e.target.parentElement!==((_a=pop_1.getElem())===null||_a===void 0?void 0:_a.get(0)))
pop_1.updatePosition();}},!0);window.addEventListener('resize',function(e){for(var _i=0,globalScrollItems_2=globalScrollItems;_i<globalScrollItems_2.length;_i++){var pop_2=globalScrollItems_2[_i];pop_2.updatePosition()}},!0)}});define("js/ToolTipControl",["require","exports","jquery"],function(require,exports,jquery_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ToolTipControl=exports.parseHelpText=void 0;function parseHelpText(helpText){var text=helpText;var icon='?';if(helpText.substring(0,5)=='warn:'){text=helpText.substring(5);icon='warn'}else if(helpText.substring(0,6)=='error:'){text=helpText.substring(6);icon='error'}else if(helpText.substring(0,5)=='open:'){text=helpText.substring(5);icon='open'}
return{text:text,icon:icon}}
exports.parseHelpText=parseHelpText;var ToolTipControl=(function(){function ToolTipControl(label,tip,placement){var _this=this;this.onScrollTimer=0;this.tooltipSize=0;this.tipOver=!1;this.originalPlacement='auto';this.elem=(0,jquery_11.default)('<span class="badge wb_badge_help">?</span>');var thisSelf=this;this._observer=new MutationObserver(function(mutations,observer){for(var _i=0,mutations_1=mutations;_i<mutations_1.length;_i++){var mutation=mutations_1[_i];if(mutation.target&&(0,jquery_11.default)(mutation.target).hasClass('wb_badge_help')){return}}
thisSelf.onScroll()});var tooltipClass='tooltip'+Math.round(Math.random()*100000000);this.setLabel(label);this.elem.removeAttr('title');this.elem.css({marginLeft:'6px',cursor:'default'});var tipOver=!1,initiated=!1,closeTimeout=0;var tooltipElem=null,tooltipOver=!1;this.elem.on('mouseover focus',function(){if(tipOver)
return;tipOver=!0;setTimeout(function(){if(!tooltipElem||!tooltipElem.length)
tooltipElem=(0,jquery_11.default)('.'+tooltipClass);tooltipElem.on('mouseover',function(){tooltipOver=!0});tooltipElem.on('mouseout',function(){tooltipOver=!1;if(!tipOver){if(closeTimeout)
clearTimeout(closeTimeout);closeTimeout=setTimeout(function(){if(!tipOver&&!tooltipOver)
_this.elem.tooltip('hide');},100)}})},0);var placement=_this.originalPlacement;if(window.innerWidth<768)
placement='auto';var data=_this.elem.data('bs.tooltip');data.options=Object.assign({},data.options,{placement:placement});_this.elem.data('bs.tooltip',data);_this.elem.tooltip('show')}).on('mouseout blur',function(){if(!tipOver)
return;tipOver=!1;if(closeTimeout)
clearTimeout(closeTimeout);closeTimeout=setTimeout(function(){if(!tipOver&&!tooltipOver)
_this.elem.tooltip('hide');},100)}).on('shown.bs.tooltip',function(){if(initiated)
return;initiated=!0;var tip=(0,jquery_11.default)(this).parent().children('.tooltip').eq(0);var tooltip=(0,jquery_11.default)('#'+thisSelf.elem.attr('aria-describedby'));thisSelf.tooltipSize=tooltip.length?tooltip.outerHeight():thisSelf.tooltipSize;tip.on('mouseout',function(){if(!tipOver)
return;tipOver=!1;if(closeTimeout)
clearTimeout(closeTimeout);closeTimeout=setTimeout(function(){if(!tipOver&&!tooltipOver)
thisSelf.elem.tooltip('hide');},100)}).on('mouseover',function(){tipOver=!0})});if(wb_builder.rtl){if(placement==='left')
placement='right';else if(placement==='right')
placement='left'}
this.originalPlacement=(placement?placement:'top');this.elem.tooltip({container:'body',trigger:'manual',template:'<div class="tooltip '+tooltipClass+'" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',html:!0,title:tip,placement:this.originalPlacement})}
ToolTipControl.prototype.onScroll=function(){var _this=this;(0,jquery_11.default)('#'+this.elem.attr('aria-describedby')).hide();this.elem.tooltip('hide');if(this.onScrollTimer)
clearTimeout(this.onScrollTimer);this.onScrollTimer=setTimeout(function(){var cont=_this.elem.parents('.wb-sidebar-item-content');if(cont.length){var offset=(0,jquery_11.default)(_this.elem).offset().top-cont.offset().top-_this.tooltipSize;_this.elem.tooltip((offset>0&&!_this.tipOver)?'show':'hide')}},200)};ToolTipControl.prototype.remove=function(){this._observer.disconnect();this.elem.parents('.wb-sidebar-item-content, body').off('scroll',this.onScroll.bind(this));this.elem.parents('#builder_canvas').children('.wb-sidebar-toggle').off('click',this.onScroll.bind(this));(0,jquery_11.default)(document).off('scroll',this.onScroll.bind(this));(0,jquery_11.default)(window).off("resize",this.onScroll.bind(this));(0,jquery_11.default)(window).off("orientationchange",this.onScroll.bind(this));this.elem.tooltip("destroy");this.elem.remove()};ToolTipControl.prototype.setLabel=function(label){var _this=this;this._observer.disconnect();this.elem.parents('.wb-sidebar-item-content, body').off('scroll',this.onScroll.bind(this));this.elem.parents('#builder_canvas').children('.wb-sidebar-toggle').off('click',this.onScroll.bind(this));(0,jquery_11.default)(document).off('scroll',this.onScroll.bind(this));(0,jquery_11.default)(window).off("resize",this.onScroll.bind(this));(0,jquery_11.default)(window).off("orientationchange",this.onScroll.bind(this));if(label=='warn'){this.elem.addClass('wb-badge-warn fa fa-exclamation-triangle').removeClass('fa-times-circle wb-badge-info');this.elem.html('')}else if(label=='error'){this.elem.addClass('wb-badge-error fa fa-times-circle').removeClass('fa-exclamation-triangle wb-badge-info');this.elem.html('')}else if(label=='?'){this.elem.addClass('wb-badge-info fa fa-question-circle').removeClass('fa-times-circle fa-exclamation-triangle');this.elem.html('')}else if(label=='open'){this.elem.addClass('wb-badge-info wb-badge-open');this.elem.html('');this.elem.parents('.wb-sidebar-item-content, body').on('scroll',this.onScroll.bind(this));this.elem.parents('#builder_canvas').children('.wb-sidebar-toggle').on('click',this.onScroll.bind(this));(0,jquery_11.default)(document).on('scroll',this.onScroll.bind(this));(0,jquery_11.default)(window).on("resize",this.onScroll.bind(this));(0,jquery_11.default)(window).on("orientationchange",this.onScroll.bind(this));setTimeout(function(){_this.elem.tooltip('show');var tooltipClass=_this.elem.attr('aria-describedby');(0,jquery_11.default)('#'+tooltipClass).addClass('warn').click(function(){_this.elem.tooltip('hide');_this.tipOver=!0})},200);setTimeout(function(){var container=_this.elem.parents('.wb-sidebar').get(0);if(container){_this._observer.observe(container,{subtree:!0,attributes:!0})}},1000)}else{this.elem.removeClass('wb-badge-warn wb-badge-error fa fa-exclamation-triangle fa-times-circle fa-question-circle');this.elem.html(label)}};ToolTipControl.prototype.setTitle=function(title,html){this.elem.attr('data-original-title',title);this.elem.tooltip({html:html})};ToolTipControl.prototype.setPlacement=function(placement){this.originalPlacement=placement;this.elem.tooltip({placement:placement})};return ToolTipControl}());exports.ToolTipControl=ToolTipControl});define("js/Label",["require","exports","jquery","js/UIComponent","js/ToolTipControl"],function(require,exports,jquery_12,UIComponent_3,ToolTipControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Label=void 0;var Label=(function(_super){__extends(Label,_super);function Label(text,helpText,align){if(helpText===void 0){helpText=''}
var _this=_super.call(this,(text==='%inherit%')?text:undefined)||this;_this.toolTip=null;_this.toolTipValidate=null;_this.alignment='left';if(text!=='%inherit%'){_this.setText(text);if(helpText)
_this.setHelpText(helpText);if(align)
_this.setAlignment(align);}
return _this}
Label.prototype.buildInit=function(data,fields){if(data.value)
this.setText(data.value);else if(data.text)
this.setText(data.text);else if(data.html)
this.setHtml(data.html);if(data.helpText){this.setHelpText(data.helpText,(data.helpPlacement?data.helpPlacement:'right'))}
if(data.align)
this.setAlignment(data.align);};Label.prototype._createElem=function(){return(0,jquery_12.default)('<label>').addClass('wb-label-ctrl')};Label.prototype.setAlignment=function(alignment){if(this.alignment==alignment)
return this;this.alignment=alignment;this.css({textAlign:alignment});return this};Label.prototype.setHelpText=function(helpText,placement,asHtml){if(helpText===void 0){helpText=null}
if(placement===void 0){placement="top"}
if(asHtml===void 0){asHtml=!1}
if(!this.toolTip&&helpText){var _a=(0,ToolTipControl_1.parseHelpText)(helpText),text=_a.text,icon=_a.icon;this.toolTip=new ToolTipControl_1.ToolTipControl(icon,text,placement);this._elem.append(this.toolTip.elem)}else if(this.toolTip&&helpText){var _b=(0,ToolTipControl_1.parseHelpText)(helpText),text=_b.text,icon=_b.icon;this.toolTip.setLabel(icon);this.toolTip.setTitle(text,asHtml);this.toolTip.setPlacement(placement)}else if(this.toolTip&&!helpText){this.toolTip.elem.remove();this.toolTip=null}
return this};Label.prototype.setValidateText=function(validateText,placement){if(validateText===void 0){validateText=null}
if(placement===void 0){placement="top"}
if(!this.toolTipValidate&&validateText){this.toolTipValidate=new ToolTipControl_1.ToolTipControl('?',validateText,placement);this._elem.append(this.toolTipValidate.elem)}else if(this.toolTipValidate&&validateText){this.toolTipValidate.setTitle(validateText,!1);this.toolTipValidate.setPlacement(placement)}else if(this.toolTipValidate&&!validateText){this.toolTipValidate.elem.remove();this.toolTipValidate=null}
return this};Label.prototype.setSystemTitle=function(text){this._elem.attr("title",text);return this};Label.prototype.setText=function(text){this._elem.text(text);if(this.toolTip)
this._elem.append(this.toolTip.elem);if(this.toolTipValidate)
this._elem.append(this.toolTipValidate.elem);return this};Label.prototype.getText=function(){return this._elem.text()};Label.prototype.setHtml=function(html){if(typeof html==='string'){this._elem.html(html)}else{this._elem.empty().append(html)}
if(this.toolTip)
this._elem.append(this.toolTip.elem);if(this.toolTipValidate)
this._elem.append(this.toolTipValidate.elem);return this};Label.prototype.getHtml=function(){return this._elem.html()};return Label}(UIComponent_3.UIComponent));exports.Label=Label});define("js/ui/NumControl",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_4,jquery_13){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.NumControl=exports.NumControlStyle=void 0;var NumControlStyle;(function(NumControlStyle){NumControlStyle[NumControlStyle.Normal=0]="Normal";NumControlStyle[NumControlStyle.WidePostfix=1]="WidePostfix";NumControlStyle[NumControlStyle.Compact=2]="Compact"})(NumControlStyle||(exports.NumControlStyle=NumControlStyle={}));var NumControl=(function(_super){__extends(NumControl,_super);function NumControl(unit,maxValue,onChange,step){if(step===void 0){step=1}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.value=-1;_this.style=NumControlStyle.Normal;_this.maxValue=100;_this.step=1;_this.updateTimeout=0;_this.lastInputValue='';_this.input=(0,jquery_13.default)('<input>').addClass('form-control').attr({type:'text'}).on('change',function(e){return _this.onValueChange(e)}).on('keydown',function(e){return _this.onValueChange(e,!1)}).on('keyup',function(e){return _this.onValueChange(e,!0)});_this.unitElem=(0,jquery_13.default)('<span>');_this._elem.addClass('wb-numeric-ctrl').append(_this.input).append(_this.unitElem);_this.setUnit(unit,maxValue);_this.setStep(step);return _this}
NumControl.prototype.setStyle=function(style){if(this.style==style)
return this;this.style=style;if(style==NumControlStyle.Normal){this.removeClass('wb-numeric-wide-ctrl wb-numeric-compact-ctrl')}else if(style==NumControlStyle.WidePostfix){this.removeClass('wb-numeric-compact-ctrl').addClass('wb-numeric-wide-ctrl')}else if(style==NumControlStyle.Compact){this.removeClass('wb-numeric-wide-ctrl').addClass('wb-numeric-compact-ctrl')}
return this};NumControl.prototype.onValueChange=function(e,up){var _this=this;if(up===void 0){up=!1}
var ch=e.keyCode;var key=e.key;var val=this.input.val();if(!up&&key!='.'&&!((ch==8||ch==9||ch==13||ch==27)||(ch>=16&&ch<=18)||(ch>=33&&ch<=36)||(ch>=37&&ch<=40)||(ch>=45&&ch<=46)||(ch>=48&&ch<=57&&!e.shiftKey)||(ch>=96&&ch<=105)||(e.ctrlKey))){e.preventDefault();return!1}
if(up&&(ch==38||ch==40)){var num=parseFloat(val.trim());if(isNaN(num))
num=this.value;else if(num<0)
num=0;else if(num>this.maxValue)
num=this.maxValue;if(ch==38&&num<this.maxValue)
num+=this.step;else if(ch==40&&num>0)
num-=this.step;var floatPart=this.step.toString().split('.')[1];num=parseFloat(num.toFixed(floatPart?floatPart.length:0));this.value=num;this.input.val(''+num);this.onChange(num);e.preventDefault();return!1}
if(up&&this.lastInputValue!=val){this.lastInputValue=val;if(this.updateTimeout)
clearTimeout(this.updateTimeout);this.updateTimeout=setTimeout(function(){var oval=_this.input.val();var val=oval.trim().toLowerCase();var num=parseFloat(val);var floatPart=_this.step.toString().split('.')[1];num=parseFloat(num.toFixed(floatPart?floatPart.length:0));if(isNaN(num))
num=_this.value;else if(num<0)
num=0;else if(num>_this.maxValue)
num=_this.maxValue;_this.value=num;val=''+num;if(val!=oval)
_this.input.val(val);_this.onChange(num)},500)}
return!0};NumControl.prototype.setValue=function(value){if(isNaN(value)||value<0)
value=0;else if(value>this.maxValue)
value=this.maxValue;if(this.value==value)
return;this.value=value;this.input.val(value)};NumControl.prototype.setUnit=function(unit,maxValue){if(this.unit==unit&&this.maxValue==maxValue)
return;this.unit=unit;this.maxValue=maxValue;this.unitElem.text(unit)};NumControl.prototype.setStep=function(step){this.step=step};NumControl.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1;if(this._enabled){this.input.removeClass('disabled');this.input.removeAttr('disabled')}else{this.input.addClass('disabled');this.input.attr({disabled:'disabled'})}};return NumControl}(UIComponent_4.UIComponent));exports.NumControl=NumControl});define("js/ui/ColorPickerPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/Label","js/FlowLayout","js/UIComponent","js/util/EventUtil","js/ui/NumControl","jquery"],function(require,exports,Popover_1,VerticalLayout_1,Label_1,FlowLayout_1,UIComponent_5,EventUtil_1,NumControl_1,jquery_14){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ColorPickerPopover=void 0;var transparentColor={r:255,g:255,b:255,a:0};var ColorPickerPopover=(function(_super){__extends(ColorPickerPopover,_super);function ColorPickerPopover(triggerBtn,onChange,title){if(title===void 0){title=__('Color')}
var _this=_super.call(this,triggerBtn,title,null,'wb-color-picker-pop')||this;_this.onChange=onChange;_this.value=new HSVColor();_this.useTransparent=!0;_this.satValElem=new SaturationValueControl(function(color){_this.fixupColor(color);_this.setColor(color,!0);_this.onChange(roundColor(hsvToColor(color)))},function(){return _super.prototype.setMouseDowned.call(_this,!0)},function(){return _super.prototype.setMouseDowned.call(_this,!1)});_this.hueElem=new HueControl(function(color){_this.fixupColor(color);_this.setColor(color,!0);_this.onChange(roundColor(hsvToColor(color)))});_this.opacityElem=new OpacityControl(function(color){_this.setColor(color,!0);_this.onChange(roundColor(hsvToColor(color)))});_this.hexElem=new HexControl(function(color,clear){if(!clear)
_this.fixupColor(color);_this.setColor(colorToHSV(color),!0);_this.onChange(roundColor(color))});_this.colorPreviewElem=new ColorPreviewControl(function(color){return _this.onFavorite(color)},function(color){_this.setColor(colorToHSV(color),!0);_this.onChange(roundColor(color))});_this.rgbFields=new RGBNumControl(function(color){_this.fixupColor(color);_this.setColor(color,!0);_this.onChange(roundColor(hsvToColor(color)))});_this.recentColors=new ColorGridControl(10,function(color){_this.setColor(colorToHSV(color),!0);_this.onChange(roundColor(color))});_this.favoriteColors=new ColorGridControl(10,function(color){_this.setColor(colorToHSV(color),!0);_this.onChange(roundColor(color))});_this.setContent(new VerticalLayout_1.VerticalLayout().addClass('wb-color-picker-popc').setSpacing(12).addAllChildren([new VerticalLayout_1.VerticalLayout().addAllChildren([new Label_1.Label(__('Color')),new FlowLayout_1.FlowLayout().addAllChildren([_this.satValElem,new VerticalLayout_1.VerticalLayout().setSpacing(15).addAllChildren([_this.colorPreviewElem,_this.hexElem,]),]),]),_this.hueElem,_this.opacityBlock=new VerticalLayout_1.VerticalLayout().addAllChildren([new Label_1.Label(__('Opacity')),_this.opacityElem,]),new VerticalLayout_1.VerticalLayout().addAllChildren([new Label_1.Label(__('Recent')),_this.recentColors,]),new VerticalLayout_1.VerticalLayout().addAllChildren([new Label_1.Label(__('Favourite')),_this.favoriteColors,]),_this.rgbFields,]).getElem());return _this}
ColorPickerPopover.prototype.setUseTransparent=function(useTransparent){if(this.useTransparent==useTransparent)
return;this.useTransparent=useTransparent;if(useTransparent){this.opacityBlock.setVisible(!0)}else{this.opacityBlock.setVisible(!1)}
this.hexElem.setUseTransparent(useTransparent)};ColorPickerPopover.prototype.edit=function(value){this.setColor(colorToHSV(value));this.updateColorGrid();if(!this.isContentDetached)
this.setVisible(!0);};ColorPickerPopover.prototype.triggerOnClose=function(){var _this=this;var rgb=hsvToColor(this.value);var color=colorToRGBACss(rgb,!this.useTransparent);wb_builder.prependColor('recent',color,function(){return _this.updateColorGrid()})};ColorPickerPopover.prototype.setVisible=function(visible){_super.prototype.setVisible.call(this,visible);if(!visible)
this.triggerOnClose();};ColorPickerPopover.prototype.onFavorite=function(rgb){var _this=this;var color=colorToRGBACss(rgb,!this.useTransparent);if(this.isFavored(color)){this.colorPreviewElem.setFavored(!1);wb_builder.removeColor('custom',color,function(){return _this.updateColorGrid()})}else{this.colorPreviewElem.setFavored(!0);wb_builder.appendColor('custom',color,function(){return _this.updateColorGrid()})}};ColorPickerPopover.prototype.isFavored=function(color){var pls=wb_builder.getColorPalettes();return pls&&pls.custom&&(pls.custom.indexOf(color.toLowerCase())>=0||pls.custom.indexOf(color.toUpperCase())>=0)};ColorPickerPopover.prototype.fixupColor=function(color){if(color.a==0&&this.value.a==0)
color.a=1};ColorPickerPopover.prototype.updateColorGrid=function(){var pls=wb_builder.getColorPalettes();this.recentColors.setCells((pls&&pls.recent instanceof Array)?pls.recent:[]);this.favoriteColors.setCells((pls&&pls.custom instanceof Array)?pls.custom:[])};ColorPickerPopover.prototype.dispose=function(){if(this.isVisible())
this.triggerOnClose();this.satValElem.destroy();this.hueElem.destroy();this.opacityElem.destroy();this.hexElem.destroy();this.colorPreviewElem.destroy();this.recentColors.destroy();this.favoriteColors.destroy();this.rgbFields.destroy();_super.prototype.dispose.call(this)};ColorPickerPopover.prototype.setColor=function(color,change){if(change===void 0){change=!1}
this.value=color;var rgb=hsvToColor(color);this.colorPreviewElem.setColor(rgb);this.colorPreviewElem.setFavored(this.isFavored(colorToRGBACss(rgb,!this.useTransparent)));if(!change)
this.colorPreviewElem.setPrevColor(rgb);this.hexElem.setColor(rgb);this.opacityElem.setColor(color);this.satValElem.setColor(color);this.hueElem.setColor(color);this.rgbFields.setColor(color)};ColorPickerPopover.prototype.onDom=function(){this.satValElem.onDom();this.hueElem.onDom();this.opacityElem.onDom()};return ColorPickerPopover}(Popover_1.Popover));exports.ColorPickerPopover=ColorPickerPopover;var SaturationValueControl=(function(_super){__extends(SaturationValueControl,_super);function SaturationValueControl(onChange,onStart,onEnd){var _this=_super.call(this)||this;_this.onChange=onChange;_this.onStart=onStart;_this.size={w:0,h:0};_this.color=new HSVColor(0,0,0,-1);_this.addClass('wb-sat-val-ctrl');_this.cursor=(0,jquery_14.default)('<div>').addClass('wb-cur-ctrl');_this._elem.append(_this.cursor).append((0,jquery_14.default)('<div>').addClass('wb-brd-ctrl'));moveHandler.bind(_this._elem,function(x,y){_this.color.s=(_this.size.w>2)?Math.max(Math.min((Math.round((x-1)*100/(_this.size.w-2)*100)/100),100),0):0;_this.color.v=(_this.size.h>2)?Math.max(Math.min((100-(Math.round((y-1)*100/(_this.size.h-2)*100)/100)),100),0):0;_this.setColor(_this.color,!0);_this.onChange(__assign({},_this.color))},_this.onStart,onEnd);return _this}
SaturationValueControl.prototype.onDom=function(){this.size.w=this._elem.outerWidth();this.size.h=this._elem.outerHeight();this.setColor(this.color,!0)};SaturationValueControl.prototype.setColor=function(color,force){if(force===void 0){force=!1}
if(this.color.h==color.h&&this.color.s==color.s&&this.color.v==color.v&&this.color.a==color.a&&!force)
return;this.color=__assign({},color);this._elem[0].style.backgroundColor=colorToRGBACss(hsvToColor(__assign(__assign({},color),{s:100,v:100,a:1})));this.cursor[0].style.left="".concat(((color.s*(this.size.w-2)/100)+1),"px");this.cursor[0].style.top="".concat((((100-color.v)*(this.size.h-2)/100)+1),"px")};return SaturationValueControl}(UIComponent_5.UIComponent));var HueControl=(function(_super){__extends(HueControl,_super);function HueControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.size={w:0,h:0};_this.color=new HSVColor(0,0,0,-1);_this.addClass('wb-hue-ctrl');_this.caret=(0,jquery_14.default)('<span>').addClass('fa fa-caret-up wb-caret-ctrl');_this._elem.append(_this.caret);moveHandler.bind(_this._elem,function(x){_this.color.h=(_this.size.w>2)?Math.max(Math.min((Math.round((x-1)*360/(_this.size.w-2)*10)/10),359),0):0;_this.setColor(_this.color,!0);_this.onChange(__assign({},_this.color))});return _this}
HueControl.prototype.onDom=function(){this.size.w=this._elem.outerWidth();this.size.h=this._elem.outerHeight();this.setColor(this.color,!0)};HueControl.prototype.setColor=function(color,force){if(force===void 0){force=!1}
if(this.color.h==color.h&&this.color.s==color.s&&this.color.v==color.v&&this.color.a==color.a&&!force)
return;this.color=__assign({},color);this.caret[0].style.left="".concat(((color.h*(this.size.w-2)/360.0)+1),"px")};return HueControl}(UIComponent_5.UIComponent));var OpacityControl=(function(_super){__extends(OpacityControl,_super);function OpacityControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.size={w:0,h:0};_this.color=new HSVColor(0,0,0,-1);_this.numElem=new NumControl_1.NumControl('%',100,function(value){_this.color.a=value/100;_this.setColor(_this.color,!0);_this.onChange(__assign({},_this.color))}).setStyle(NumControl_1.NumControlStyle.WidePostfix);_this.addClass('wb-opacity-ctrl');_this.bg=(0,jquery_14.default)('<div>').addClass('wb-color-ctrl');_this.caret=(0,jquery_14.default)('<span>').addClass('fa fa-caret-up wb-caret-ctrl');_this.pal=(0,jquery_14.default)('<div>').addClass('wb-pal-ctrl').append(_this.bg).append(_this.caret);_this._elem.append(_this.pal).append(_this.numElem.getElem());moveHandler.bind(_this.pal,function(x){_this.color.a=(_this.size.w>2)?Math.max(Math.min((Math.round((x-1)/(_this.size.w-2)*100)/100),1),0):0;_this.setColor(_this.color,!0);_this.onChange(__assign({},_this.color))});return _this}
OpacityControl.prototype.onDom=function(){this.size.w=this.pal.outerWidth();this.size.h=this.pal.outerHeight();this.setColor(this.color,!0)};OpacityControl.prototype.setColor=function(color,force){if(force===void 0){force=!1}
if(this.color.h==color.h&&this.color.s==color.s&&this.color.v==color.v&&this.color.a==color.a&&!force)
return;this.color=__assign({},color);var a=(typeof color.a!=='undefined')?color.a:1;this.bg[0].style.background=colorToGradCss(hsvToColor(color));this.caret[0].style.left="".concat(((a*(this.size.w-2))+1),"px");this.numElem.setValue(Math.round(a*100))};return OpacityControl}(UIComponent_5.UIComponent));var ColorPreviewControl=(function(_super){__extends(ColorPreviewControl,_super);function ColorPreviewControl(onFavorite,onReset){var _this=_super.call(this)||this;_this.color={r:0,g:0,b:0,a:1};_this.prevColor={r:0,g:0,b:0,a:1};_this.isFavored=!1;_this.addClass('wb-color-preview-ctrl');_this.currElem=(0,jquery_14.default)('<div>').addClass('wb-color-ctrl');_this.prevElem=(0,jquery_14.default)('<div>').addClass('wb-color-ctrl');_this.favBtn=(0,jquery_14.default)('<span>').addClass('fa wb-fav-ctrl').on('click',function(){return onFavorite(__assign({},_this.color))});_this._elem.append((0,jquery_14.default)('<div>').addClass('wb-curr-ctrl').append(_this.currElem)).append((0,jquery_14.default)('<div>').addClass('wb-prev-ctrl').on('click',function(){return onReset(__assign({},_this.prevColor))}).append(_this.prevElem)).append(_this.favBtn);_this.isFavored=!_this.isFavored;_this.setFavored(!_this.isFavored);return _this}
ColorPreviewControl.prototype.setFavored=function(favored){if(this.isFavored==favored)
return;this.isFavored=favored;if(favored){this.favBtn.removeClass('fa-star-o').addClass('fa-star')}else{this.favBtn.removeClass('fa-star').addClass('fa-star-o')}};ColorPreviewControl.prototype.setColor=function(color){this.color=__assign({},color);this.currElem[0].style.backgroundColor=colorToRGBACss(color)};ColorPreviewControl.prototype.setPrevColor=function(color){this.prevColor=__assign({},color);this.prevElem[0].style.backgroundColor=colorToRGBACss(color)};return ColorPreviewControl}(UIComponent_5.UIComponent));var HexControl=(function(_super){__extends(HexControl,_super);function HexControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.color={r:0,g:0,b:0,a:-1};_this.updateTimeout=0;_this.lastInputValue='';_this.useTransparent=!0;_this.input=(0,jquery_14.default)('<input>').addClass('form-control').attr({type:'text'}).on('change',function(e){return _this.onValueChange(e)}).on('paste',function(e){return _this.onValueChange(e,!0)}).on('keydown',function(e){return _this.onValueChange(e,!1)}).on('keyup',function(e){return _this.onValueChange(e,!0)});_this.clearBtn=(0,jquery_14.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_14.default)('<span>').addClass('fa fa-remove')).on('click',function(){return _this.onClear()});_this._elem.addClass('input-group wb-hex-ctrl').append(_this.input).append((0,jquery_14.default)('<span>').addClass('input-group-btn').append(_this.clearBtn));return _this}
HexControl.prototype.onValueChange=function(e,up){var _this=this;if(up===void 0){up=!1}
var ch=e.keyCode;var val=this.input.val();if(!up&&!((ch==8||ch==9||ch==13||ch==27)||(ch>=112&&ch<=123)||(ch>=16&&ch<=18)||(ch>=33&&ch<=36)||(ch>=37&&ch<=40)||(ch>=45&&ch<=46)||(ch>=48&&ch<=57&&!e.shiftKey)||(ch>=65&&ch<=70)||(ch>=96&&ch<=105)||(e.ctrlKey)||(e.metaKey))){e.preventDefault();return!1}
if(up&&this.lastInputValue!=val){this.lastInputValue=val;if(this.updateTimeout)
clearTimeout(this.updateTimeout);this.updateTimeout=setTimeout(function(){var _a;var oval=_this.input.val();var val;(_a=hexToColor(oval,_this.color),_this.color=_a.color,val=_a.val);if(val!=oval&&oval.length>=6)
_this.input.val(val);_this.onChange(__assign({},_this.color),!1)},500)}
return!0};HexControl.prototype.onClear=function(){;this.onChange(__assign({},transparentColor),!0)};HexControl.prototype.setUseTransparent=function(useTransparent){if(this.useTransparent==useTransparent)
return;this.useTransparent=useTransparent;if(useTransparent){this.removeClass('wb-noclear-ctrl')}else{this.addClass('wb-noclear-ctrl')}};HexControl.prototype.setColor=function(color){var clr=roundColor(__assign({},color));if(this.color.r==clr.r&&this.color.g==clr.g&&this.color.b==clr.b&&this.color.a==clr.a)
return;this.color=__assign({},color);this.input.val(colorToHex(color))};return HexControl}(UIComponent_5.UIComponent));var RGBNumControl=(function(_super){__extends(RGBNumControl,_super);function RGBNumControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.color=new HSVColor(0,0,0,-1);_this.isRgb=!0;_this.rhElem=new NumControl_1.NumControl('R',255,function(value){if(_this.isRgb){var rgb=hsvToColor(_this.color);rgb.r=value;_this.color=colorToHSV(rgb)}else _this.color.h=value;_this.onChange(__assign({},_this.color))}).setStyle(NumControl_1.NumControlStyle.Compact);_this.gsElem=new NumControl_1.NumControl('G',255,function(value){if(_this.isRgb){var rgb=hsvToColor(_this.color);rgb.g=value;_this.color=colorToHSV(rgb)}else _this.color.s=value;_this.onChange(__assign({},_this.color))}).setStyle(NumControl_1.NumControlStyle.Compact);_this.bvElem=new NumControl_1.NumControl('B',255,function(value){if(_this.isRgb){var rgb=hsvToColor(_this.color);rgb.b=value;_this.color=colorToHSV(rgb)}else _this.color.v=value;_this.onChange(__assign({},_this.color))}).setStyle(NumControl_1.NumControlStyle.Compact);_this.addClass('wb-rgb-hsv-ctrl');_this._elem.append(_this.rhElem.getElem()).append(_this.gsElem.getElem()).append(_this.bvElem.getElem()).append((0,jquery_14.default)('<div>').addClass('wb-chbtn-ctrl').append((0,jquery_14.default)('<span>').addClass('fa fa-caret-up')).append((0,jquery_14.default)('<span>').addClass('fa fa-caret-down')).on('click',function(){return _this.toggleType()}));return _this}
RGBNumControl.prototype.toggleType=function(){this.isRgb=!this.isRgb;if(this.isRgb){this.rhElem.setUnit('R',255);this.gsElem.setUnit('G',255);this.bvElem.setUnit('B',255)}else{this.rhElem.setUnit('H',359);this.gsElem.setUnit('S',100);this.bvElem.setUnit('V',100)}
this.updateByType()};RGBNumControl.prototype.updateByType=function(){if(this.isRgb){var rgb=hsvToColor(this.color);this.rhElem.setValue(Math.round(rgb.r));this.gsElem.setValue(Math.round(rgb.g));this.bvElem.setValue(Math.round(rgb.b))}else{this.rhElem.setValue(Math.round(this.color.h));this.gsElem.setValue(Math.round(this.color.s));this.bvElem.setValue(Math.round(this.color.v))}};RGBNumControl.prototype.setColor=function(color){if(this.color.h==color.h&&this.color.s==color.s&&this.color.v==color.v&&this.color.a==color.a)
return;this.color=__assign({},color);this.updateByType()};return RGBNumControl}(UIComponent_5.UIComponent));var ColorGridControl=(function(_super){__extends(ColorGridControl,_super);function ColorGridControl(num,onSelect){if(num===void 0){num=10}
var _this=_super.call(this)||this;_this.onSelect=onSelect;_this.cells=[];_this.colors=[];_this.emptyColor={r:255,g:255,b:255,a:1};_this.emptyColorStr=colorToRGBACss(_this.emptyColor);_this.addClass('wb-color-grid-ctrl');var _loop_3=function(i){var cellColor=(0,jquery_14.default)('<div>').addClass('wb-color-ctrl');var cell=(0,jquery_14.default)('<div>').append(cellColor).on('click',function(){return _this.selectColor(i)});this_1.cells.push(cellColor);this_1.colors.push(this_1.emptyColorStr);this_1._elem.append(cell)};var this_1=this;for(var i=0;i<num;i++){_loop_3(i)}
return _this}
ColorGridControl.prototype.selectColor=function(idx){var color;(color=hexToColor(this.colors[idx],this.emptyColor).color);this.onSelect(color)};ColorGridControl.prototype.setCells=function(colors){var cc=colors.length;for(var i=0,c=this.cells.length;i<c;i++){var color=(i<cc)?colors[i]:this.emptyColorStr;this.cells[i][0].style.backgroundColor=color;this.colors[i]=color}};return ColorGridControl}(UIComponent_5.UIComponent));var MoveHandler=(function(){function MoveHandler(){this.init=!1;this.event=null}
MoveHandler.prototype.bind=function(elem,onMove,onStart,onEnd){var _this=this;this.setup();elem.on('mousedown touchstart',function(e){return _this.start(e,onMove,onStart,onEnd)})};MoveHandler.prototype.setup=function(){var _this=this;if(this.init)
return;this.init=!0;var body=(0,jquery_14.default)(document.body);body.on('mousemove touchmove',function(e){return _this.onMove(e)});body.on('mouseup touchend touchcancel',function(e){return _this.onUp(e)})};MoveHandler.prototype.start=function(e,onMove,onStart,onEnd){if(e.button!==0&&e.button!==undefined)
return!0;if(this.event)
return!0;if(onStart){onStart()}
this.event={pos:(0,EventUtil_1.posFromEvent)(e),off:(0,jquery_14.default)(e.target).offset(),onMove:onMove,onEnd:onEnd,};e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();return!1};MoveHandler.prototype.onMove=function(e){if(!this.event)
return;var mPos=(0,EventUtil_1.posFromEvent)(e);this.event.onMove(mPos.left-this.event.off.left,mPos.top-this.event.off.top)};MoveHandler.prototype.onUp=function(e){if(!this.event)
return;var mPos=(0,EventUtil_1.posFromEvent)(e);this.event.onMove(mPos.left-this.event.off.left,mPos.top-this.event.off.top);if(this.event.onEnd){var onEndFunc_1=this.event.onEnd;window.requestAnimationFrame(function(){return onEndFunc_1()})}
this.event=null};return MoveHandler}());var moveHandler=new MoveHandler();var HSVColor=(function(){function HSVColor(h,s,v,a){if(h===void 0){h=0}
if(s===void 0){s=0}
if(v===void 0){v=0}
if(a===void 0){a=1}
this.h=h;this.s=s;this.v=v;this.a=a}
return HSVColor}());function roundColor(color){color.r=Math.round(color.r);color.g=Math.round(color.g);color.b=Math.round(color.b);color.a=(typeof color.a!=='undefined')?(Math.round(color.a*100)/100):1;return color}
function hexToColor(hexColor,defColor){var val=hexColor.trim().toLowerCase();if(val.length>5&&(val.substring(0,4)==='rgb('||val.substring(0,5)==='rgba(')){var rgb=val.split('(')[1].split(')')[0].split(',');var color_1=__assign({},defColor);if(rgb.length>0)
color_1.r=parseInt(rgb[0],10);if(rgb.length>1)
color_1.g=parseInt(rgb[1],10);if(rgb.length>2)
color_1.b=parseInt(rgb[2],10);if(rgb.length>3)
color_1.a=parseFloat(rgb[3]);return{color:color_1,val:val}}else if(val==='transparent'){return{color:__assign({},transparentColor),val:val}}
while(val[0]=='#')
val=val.substring(1);if(val.length<=3){while(val.length<3)
val='0'+val;val=val.substring(0,1)+val.substring(0,1)+val.substring(1,2)+val.substring(1,2)+val.substring(2,3)+val.substring(2,3)+'ff'}else if(val.length<=6){while(val.length<6)
val='0'+val;val+='ff'}else if(val.length<8){val=val.substring(0,6)+'ff'}
var r=parseInt(val.substring(0,2),16);var g=parseInt(val.substring(2,4),16);var b=parseInt(val.substring(4,6),16);var a=Math.round(parseInt(val.substring(6,8),16)/255*100)/100;var color=__assign({},defColor);if(isNaN(r)||isNaN(g)||isNaN(b)||isNaN(a)){val=colorToHex(color)}else{color.r=r;color.g=g;color.b=b;color.a=a;val=val.substring(0,6)}
return{color:color,val:val}}
function colorToHex(color){var rs=Math.max(Math.min(Math.round(color.r),255),0).toString(16).toLowerCase();var gs=Math.max(Math.min(Math.round(color.g),255),0).toString(16).toLowerCase();var bs=Math.max(Math.min(Math.round(color.b),255),0).toString(16).toLowerCase();return(rs.length<2?"0".concat(rs):rs)+(gs.length<2?"0".concat(gs):gs)+(bs.length<2?"0".concat(bs):bs)}
function colorToRGBACss(color,noTransparent){if(noTransparent===void 0){noTransparent=!1}
var val=roundColor(__assign({},color));var a=(typeof val.a!=='undefined')?val.a:1;if(noTransparent||a==1)
return'#'+colorToHex(color);return"rgba(".concat(val.r,", ").concat(val.g,", ").concat(val.b,", ").concat(a,")")}
function colorToGradCss(color){var a=colorToRGBACss(__assign(__assign({},color),{a:0}));var b=colorToRGBACss(__assign(__assign({},color),{a:1}));return"linear-gradient(to right, ".concat(a," 0%, ").concat(b," 100%)")}
function colorToHSV(color){var h=0,s;var rabs=color.r/255;var gabs=color.g/255;var babs=color.b/255;var v=Math.max(rabs,gabs,babs);var diff=v-Math.min(rabs,gabs,babs);var diffc=function(c){return(v-c)/6/diff+1/2};if(diff==0)
h=s=0;else{s=diff/v;var rr=diffc(rabs);var gg=diffc(gabs);var bb=diffc(babs);if(rabs===v)
h=bb-gg;else if(gabs===v)
h=(1/3)+rr-bb;else if(babs===v)
h=(2/3)+gg-rr;if(h<0)
h+=1;else if(h>1)
h-=1}
return{h:Math.round(h*360*100)/100,s:Math.round(s*100*100)/100,v:Math.round(v*100*100)/100,a:((typeof color.a!=='undefined')?color.a:1),}}
function hsvToColor(hsv){var rgb={r:0,g:0,b:0};var h=Math.round(hsv.h*100)/100;var s=Math.round(hsv.s*255/100*100)/100;var v=Math.round(hsv.v*255/100*100)/100;if(s===0)
rgb.r=rgb.g=rgb.b=v;else{var t1=v;var t2=(255-s)*v/255;var t3=(t1-t2)*(h%60)/60;if(h===360)
h=0;if(h<60){rgb.r=t1;rgb.b=t2;rgb.g=t2+t3}else if(h<120){rgb.g=t1;rgb.b=t2;rgb.r=t1-t3}else if(h<180){rgb.g=t1;rgb.r=t2;rgb.b=t2+t3}else if(h<240){rgb.b=t1;rgb.r=t2;rgb.g=t1-t3}else if(h<300){rgb.b=t1;rgb.g=t2;rgb.r=t2+t3}else if(h<360){rgb.r=t1;rgb.g=t2;rgb.b=t1-t3}else{rgb.r=0;rgb.g=0;rgb.b=0}}
return{r:Math.round(rgb.r*100)/100,g:Math.round(rgb.g*100)/100,b:Math.round(rgb.b*100)/100,a:hsv.a,}}});define("js/ColorPicker",["require","exports","js/jquery-builder","js/ui/ThumbEditorControl","js/UIComponent","js/ui/ColorPickerPopover"],function(require,exports,jquery_builder_2,ThumbEditorControl_1,UIComponent_6,ColorPickerPopover_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ColorPicker=exports.blendColor=void 0;function blendColor(color1,color2){var c1=ColorPicker.colorTextToObject(color1);if(c1.a===undefined)
c1.a=1;var c2=ColorPicker.colorTextToObject(color2);if(c2.a===undefined)
c2.a=1;var alpha=Math.round((1-(1-c2.a)*(1-c1.a))*100)/100;var result={r:0,g:0,b:0,a:alpha};if(alpha>0){result.r=Math.round((c2.r*c2.a/alpha)+(c1.r*c1.a*(1-c2.a)/alpha));result.g=Math.round((c2.g*c2.a/alpha)+(c1.g*c1.a*(1-c2.a)/alpha));result.b=Math.round((c2.b*c2.a/alpha)+(c1.b*c1.a*(1-c2.a)/alpha))}
return ColorPicker.colorObjectToText(result)}
exports.blendColor=blendColor;var ColorPicker=(function(_super){__extends(ColorPicker,_super);function ColorPicker(noTransparent,noAlpha,big){if(noTransparent===void 0){noTransparent=!1}
if(noAlpha===void 0){noAlpha=!1}
if(big===void 0){big=!1}
var _this=_super.call(this)||this;_this.noTransparent=noTransparent;_this.noAlpha=noAlpha;_this.color=null;_this.onChange=null;_this.colorSelectorClass=null;_this.popover=null;_this.isBig=!0;_this.inPlace=!1;_this.thumbCtrl=new ThumbEditorControl_1.ThumbEditorControl().onEdit(function(){return _this.onEdit()}).onRemove(function(){return _this.onClear()});_this._elem.addClass('wb-colorpicker-controll').append(_this.thumbCtrl.getElem());_this.alphaOverlay=(0,jquery_builder_2.default)('<span>').addClass('bg-transparent');_this.thumbCtrl.getPreviewElem().append(_this.alphaOverlay);if(_this.noTransparent||_this.noAlpha){_this.alphaOverlay.css('opacity',0)}
_this.setBig(big);return _this}
ColorPicker.readableColor=function(color){var col=ColorPicker.colorTextToObject(color);if("h" in col){if("b" in col)
col=ColorPicker.HSB2RGB(col);else col=ColorPicker.HSL2RGB(col)}
var a=(typeof col.a!=='undefined')?col.a:1;var na=1-a;col.r=col.r*a+127.5*na;col.g=col.g*a+127.5*na;col.b=col.b*a+127.5*na;var r=Math.pow(col.r/255,2.2);var g=Math.pow(col.g/255,2.2);var b=Math.pow(col.b/255,2.2);var Y=0.2126*r+0.7151*g+0.0721*b;return(Y>0.5)?"#000000":"#ffffff"};ColorPicker.colorTextToObject=function(text){var color,matches;if(text&&typeof text==="object"){color=jquery_builder_2.default.extend(!0,{r:0,g:0,b:0,a:1},text)}else if(!text||text==="transparent"){color={r:255,g:255,b:255,a:0}}else{text=text.trim();if(matches=text.match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i))
color={r:parseInt(matches[1]+matches[1],16),g:parseInt(matches[2]+matches[2],16),b:parseInt(matches[3]+matches[3],16),a:1};else if(matches=text.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i)){color={r:parseInt(matches[1],16),g:parseInt(matches[2],16),b:parseInt(matches[3],16),a:1}}else if(matches=text.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i)){color={r:parseInt(matches[1],16),g:parseInt(matches[2],16),b:parseInt(matches[3],16),a:Math.round(parseInt(matches[4],16)/255*100)/100,}}else if(matches=text.match(/^rgb\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i)){color={r:parseFloat(matches[1]),g:parseFloat(matches[2]),b:parseFloat(matches[3]),a:1}}else if(matches=text.match(/^rgba\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)$/i)){color={r:parseFloat(matches[1]),g:parseFloat(matches[2]),b:parseFloat(matches[3]),a:parseFloat(matches[4])}}else if(matches=text.match(/^hsl\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*\)$/i)){color=ColorPicker.HSL2RGB({h:parseFloat(matches[1])/360,s:parseFloat(matches[2])/100,l:parseFloat(matches[3])/100,a:1})}else if(matches=text.match(/^hsla\s*\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)%\s*,\s*([0-9\.]+)\s*\)$/i)){color=ColorPicker.HSL2RGB({h:parseFloat(matches[1])/360,s:parseFloat(matches[2])/100,l:parseFloat(matches[3])/100,a:parseFloat(matches[4])})}else{color={r:255,g:255,b:255,a:1}}}
return color};ColorPicker.HSB2RGB=function(hsb){var rgb={r:0,g:0,b:0};var h=Math.round(hsb.h);var s=Math.round(hsb.s*255/100);var b=Math.round(hsb.b*255/100);if(s===0)
rgb.r=rgb.g=rgb.b=b;else{var t1=b;var t2=(255-s)*b/255;var t3=(t1-t2)*(h%60)/60;if(h===360)
h=0;if(h<60){rgb.r=t1;rgb.b=t2;rgb.g=t2+t3}else if(h<120){rgb.g=t1;rgb.b=t2;rgb.r=t1-t3}else if(h<180){rgb.g=t1;rgb.r=t2;rgb.b=t2+t3}else if(h<240){rgb.b=t1;rgb.r=t2;rgb.g=t1-t3}else if(h<300){rgb.b=t1;rgb.g=t2;rgb.r=t2+t3}else if(h<360){rgb.r=t1;rgb.g=t2;rgb.b=t1-t3}else{rgb.r=0;rgb.g=0;rgb.b=0}}
return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b),a:(typeof hsb.a!=='undefined')?Math.round(hsb.a*100)/100:1}};ColorPicker.HSL2RGB=function(hsl){var rgb={r:0,g:0,b:0,a:(typeof hsl.a!=='undefined')?Math.round(hsl.a*100)/100:1};if(hsl.s===0){rgb.r=rgb.g=rgb.b=hsl.l}else{var hue2rgb=function hue2rgb(p,q,t){if(t<0)
t+=1;if(t>1)
t-=1;if(t<1/6)
return p+(q-p)*6*t;if(t<1/2)
return q;if(t<2/3)
return p+(q-p)*(2/3-t)*6;return p};var q=hsl.l<0.5?hsl.l*(1+hsl.s):hsl.l+hsl.s-hsl.l*hsl.s;var p=2*hsl.l-q;rgb.r=hue2rgb(p,q,hsl.h+1/3);rgb.g=hue2rgb(p,q,hsl.h);rgb.b=hue2rgb(p,q,hsl.h-1/3)}
rgb.r=Math.round(rgb.r*255);rgb.g=Math.round(rgb.g*255);rgb.b=Math.round(rgb.b*255);return rgb};ColorPicker.colorObjectToText=function(color,noAlpha){if(noAlpha===void 0){noAlpha=!1}
if(!noAlpha&&(typeof color.a!=='undefined')&&color.a<0.998047){if(color.a<0.001953)
color.a=0;if(color.a===0)
return"transparent";if("h" in color){if("b" in color)
color=ColorPicker.HSB2RGB(color);else color=ColorPicker.HSL2RGB(color)}
return"rgba("+color.r+", "+color.g+", "+color.b+", "+color.a+")"}
if("h" in color)
return"hsb("+color.h+", "+color.s+", "+color.b+")";var r=Math.round(color.r).toString(16);var g=Math.round(color.g).toString(16);var b=Math.round(color.b).toString(16);if(r.length===1)
r='0'+r;if(g.length===1)
g='0'+g;if(b.length===1)
b='0'+b;return'#'+r+g+b};ColorPicker.getColorPalettes=function(){return wb_builder.getColorPalettes()};ColorPicker.prependColor=function(paletteId,color,successCallback){wb_builder.prependColor(paletteId,color,successCallback)};ColorPicker.appendColor=function(paletteId,color,successCallback){wb_builder.appendColor(paletteId,color,successCallback)};ColorPicker.removeColor=function(paletteId,color,successCallback){wb_builder.removeColor(paletteId,color,successCallback)};ColorPicker.prototype.buildInit=function(data,fields){if(typeof data.noTransparant!=='undefined')
this.setNoTransparent(data.noTransparant?!0:!1);if(typeof data.noAlpha!=='undefined')
this.setNoAlpha(data.noAlpha?!0:!1);if(typeof data.big!=='undefined')
this.setBig(data.big?!0:!1);if(typeof data.inPlace!=='undefined')
this.setInPlace(data.inPlace?!0:!1);if(typeof data.enabled!=='undefined')
this.setEnabled(data.enabled?!0:!1);if(data.value)
this.setValue(data.value);if(data.colorSelectorClass)
this.setColorSelectorClass(data.colorSelectorClass);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){el.onChange=function(){func.call(el,fields)}})(this,data.change)}};ColorPicker.prototype.onEdit=function(createOnly){var _this=this;if(createOnly===void 0){createOnly=!1}
if(!createOnly){if(!this._enabled||!this.color)
return;if(this.popover&&this.popover.isVisible()){this.popover.setVisible(!1);return}}
if(!this.popover){this.popover=new ColorPickerPopover_1.ColorPickerPopover(this.thumbCtrl.getPreviewElem(),function(color){_this.applyValue(color,!0);_this.onValueChanged()})}
this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha);if(!createOnly&&this.color){this.popover.edit(this.color)}};ColorPicker.prototype.onClear=function(){var emptyColor={r:255,g:255,b:255,a:(this.noTransparent||this.noAlpha)?1:0};this.applyValue(emptyColor,!0);this.onValueChanged()};ColorPicker.prototype.setOnChange=function(func){this.onChange=func;return this};ColorPicker.prototype.setInPlace=function(inPlace){if(this.inPlace==inPlace)
return this;this.inPlace=inPlace;if(inPlace){this.onEdit(!0);this.thumbCtrl.getElem().detach();if(this.popover)
this.popover.setContentDetached(!0,this._elem);}else{if(this.popover)
this.popover.setContentDetached(!1,this._elem);this._elem.append(this.thumbCtrl.getElem())}
return this};ColorPicker.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);if(enabled)
this._elem.removeClass("disabled");else this._elem.addClass("disabled")};ColorPicker.prototype.setNoTransparent=function(value){if(this.noTransparent===value)
return this;this.noTransparent=value;this.alphaOverlay.css('opacity',(this.noTransparent||this.noAlpha)?0:1);if(this.inPlace&&this.popover)
this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha);return this};ColorPicker.prototype.setNoAlpha=function(value){if(this.noAlpha===value)
return;this.noAlpha=value;this.alphaOverlay.css('opacity',(this.noTransparent||this.noAlpha)?0:1);if(this.inPlace&&this.popover)
this.popover.setUseTransparent(!this.noTransparent&&!this.noAlpha);};ColorPicker.prototype.setBig=function(value){if(this.isBig==value)
return;this.isBig=value;this.thumbCtrl.setSize(value?ThumbEditorControl_1.ThumbSize.Normal:ThumbEditorControl_1.ThumbSize.Small);this.thumbCtrl.setRemoveControlVisible(value)};ColorPicker.prototype.getValue=function(){return ColorPicker.colorObjectToText(this.color||{r:0,g:0,b:0},this.noTransparent)};ColorPicker.prototype.setValue=function(value){this.applyValue(value,!1);if(this.inPlace)
this.onEdit();};ColorPicker.prototype.applyValue=function(value,change){var color=ColorPicker.colorTextToObject(value);if(this.noAlpha||this.noTransparent)
color.a=1;if("h" in color){if("b" in color)
color=ColorPicker.HSB2RGB(color);else color=ColorPicker.HSL2RGB(color)}
this.color=color;if(typeof color.a!=='undefined'&&color.a>=0.001953){this.alphaOverlay.css('opacity',1-color.a);this.thumbCtrl.getPreviewElem().css({backgroundColor:ColorPicker.colorObjectToText(color,!0),color:ColorPicker.readableColor(color)})}else{this.alphaOverlay.css('opacity',1);this.thumbCtrl.getPreviewElem().css({backgroundColor:'',color:''})}
if(change&&typeof this.onChange==='function'){this.onChange.call(this)}};ColorPicker.prototype.getColor=function(){return this.getValue()};ColorPicker.prototype.setColor=function(color){this.setValue(color)};ColorPicker.prototype.showPicker=function(){if(this.inPlace)
return;this.onEdit()};ColorPicker.prototype.hidePicker=function(){if(this.popover&&!this.inPlace){this.popover.setVisible(!1)}};ColorPicker.prototype.setColorSelectorClass=function(colorSelectorClass){this.colorSelectorClass=colorSelectorClass};ColorPicker.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};ColorPicker.supportsMultipleObjectBindings=function(){return!1};ColorPicker.prototype.setComponentOptions=function(options){if("noTransparent" in options)
this.setNoTransparent(!!options.noTransparent);if("noAlpha" in options)
this.setNoAlpha(!!options.noAlpha);_super.prototype.setComponentOptions.call(this,options)};ColorPicker.prototype.triggerOnDom=function(){if(this.popover)
this.popover.triggerOnDom();};ColorPicker.prototype.getPopover=function(){return this.popover};ColorPicker.prototype.triggerOnClose=function(){if(this.popover){this.popover.triggerOnClose()}};return ColorPicker}(UIComponent_6.UIComponent));exports.ColorPicker=ColorPicker});define("js/SliderControl",["require","exports","jquery","js/UIComponent","js/ui/NumControl"],function(require,exports,jquery_15,UIComponent_7,NumControl_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SliderControl=void 0;var SliderControl=(function(_super){__extends(SliderControl,_super);function SliderControl(_min,_max,_step,_unit){if(_min===void 0){_min=0}
if(_max===void 0){_max=100}
if(_step===void 0){_step=1}
if(_unit===void 0){_unit='%'}
var _this=_super.call(this,'div')||this;_this._min=_min;_this._max=_max;_this._step=_step;_this._unit=_unit;_this.options=null;_this.uiFields=null;_this.sliding=!1;_this._elem.addClass('wb-slider-control');_this._slider=(0,jquery_15.default)('<div>');_this._handle=(0,jquery_15.default)('<div class="ui-slider-handle">');_this._input=new NumControl_2.NumControl(_this._unit,_this._max,function(value){if(!value&&value!==0)
value=0;value=Math.max(_this._min,Math.min(_this._max,value));_this._input.setValue(value);_this._slider.slider('value',value);_this.onValueChanged()},_this._step).setStyle(NumControl_2.NumControlStyle.WidePostfix);_this._slider.append(_this._handle);_this._elem.append(_this._slider);_this._elem.append(_this._input.getElem());_this._slider.slider({start:function(){_this.sliding=!0},stop:function(){_this.sliding=!1},create:function(){_this._input.setValue(_this._slider.slider('value'))},slide:function(e,ui){_this._input.setValue(ui.value);setTimeout(function(){_this.onValueChanged();if(_this.options&&_this.uiFields&&_this.onSlide&&typeof(_this.onSlide)==='function'){_this.onSlide.call(_this,_this.options,_this.uiFields)}},0)},change:function(){if(_this.options&&_this.uiFields&&_this.onChange&&typeof(_this.onChange)==='function'){_this.onChange.call(_this,_this.options,_this.uiFields)}},range:'min',min:_this._min,max:_this._max,step:_this._step,});return _this}
SliderControl.prototype.buildInit=function(data,fields){this.options=data;this.uiFields=fields;this._min=(data.min||data.min===0)?data.min:0;this._max=(data.max||data.max===0)?data.max:100;this._step=(data.step||data.step===0)?data.step:1;this._unit=data.unit?data.unit:'%';this.onChange=data.change;this.onSlide=data.slide;if("width" in data){this._slider.css("width",(data.width?data.width:120))}
this.setMin(this._min);this.setMax(this._max);this.setStep(this._step);this.setUnit(this._unit)};SliderControl.prototype.setOnChange=function(func){var _this=this;this.options={};this.uiFields={};this.onChange=function(){return func(_this.getValue())};return this};SliderControl.prototype.setOnSlide=function(func){var _this=this;this.options={};this.uiFields={};this.onSlide=function(){return func(_this.getValue())};return this};SliderControl.prototype.getValue=function(){return this._slider.slider('value')};SliderControl.prototype.setValue=function(value){this._slider.slider('value',value);this._input.setValue(value)};SliderControl.prototype.setMin=function(value){this._min=value;this._slider.slider("option","min",this._min)};SliderControl.prototype.setMax=function(value){this._max=value;this._slider.slider("option","max",this._max)};SliderControl.prototype.setStep=function(value){this._min=value;this._slider.slider("option","step",this._step)};SliderControl.prototype.setUnit=function(value){this._unit=value;this._input.setUnit(this._unit,this._max)};SliderControl.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1;if(this._enabled){this._elem.removeClass('disabled');this._slider.slider('enable');this._input.removeClass('disabled')}else{this._elem.addClass('disabled');this._slider.slider('disable');this._input.addClass('disabled')}
this._input.setEnabled(this._enabled)};SliderControl.supportsMultipleObjectBindings=function(){return!1};SliderControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("min" in options)
this.setMin(options.min);if("max" in options)
this.setMax(options.max);if("step" in options)
this.setStep(options.step);if("unit" in options)
this.setUnit(options.unit);};SliderControl.prototype.setCombinedBindingsValue=function(valueInfo){if(!this.sliding)
_super.prototype.setCombinedBindingsValue.call(this,valueInfo);};SliderControl.prototype.destroy=function(){if(this._slider&&this._slider.data("slider"))
this._slider.slider("destroy");_super.prototype.destroy.call(this)};return SliderControl}(UIComponent_7.UIComponent));exports.SliderControl=SliderControl});define("js/AlignSelector",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_8,jquery_16){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AlignSelector=exports.HorizontalAlignment=exports.VerticalAlignment=void 0;var VerticalAlignment;(function(VerticalAlignment){VerticalAlignment.TOP="top";VerticalAlignment.MIDDLE="center";VerticalAlignment.BOTTOM="bottom"})(VerticalAlignment||(exports.VerticalAlignment=VerticalAlignment={}));var HorizontalAlignment;(function(HorizontalAlignment){HorizontalAlignment.LEFT="left";HorizontalAlignment.CENTER="center";HorizontalAlignment.RIGHT="right"})(HorizontalAlignment||(exports.HorizontalAlignment=HorizontalAlignment={}));var AlignSelector=exports.AlignSelector=(function(_super){__extends(AlignSelector,_super);function AlignSelector(value){if(value===void 0){value=''}
var _this=_super.call(this,(value==='%inherit%')?value:undefined)||this;_this.hAlign=HorizontalAlignment.LEFT;_this.vAlign=VerticalAlignment.TOP;_this.visibleOffset=!1;AlignSelector.index++;if(value&&value!=='%inherit%')
_this.setValue(value);var thisClass=_this;var tds=_this._elem.find(".wb-cell-ctrl");tds.bind("click",function(){var $this=(0,jquery_16.default)(this);if($this.is(".disabled"))
return;tds.removeClass("active");$this.addClass("active");var x=$this.index()*1;var y=$this.parent().data('row')*1;thisClass.hAlign=(x>0)?((x===1)?HorizontalAlignment.CENTER:HorizontalAlignment.RIGHT):HorizontalAlignment.LEFT;thisClass.vAlign=(y>0)?((y===1)?VerticalAlignment.MIDDLE:VerticalAlignment.BOTTOM):VerticalAlignment.TOP;thisClass.trigger('change');thisClass.onValueChanged()});return _this}
AlignSelector.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.on('change',function(){func.call(el,fields)})})(this,data.change)}};AlignSelector.prototype.setOnChange=function(func){var _this=this;this.on('change',function(){return func(_this.getValue())});return this};AlignSelector.prototype._createElem=function(){return(0,jquery_16.default)('<div>').addClass('wb-align-controll').append((0,jquery_16.default)('<div>').data('row',0).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','left top')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','center top')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','right top'))).append((0,jquery_16.default)('<div>').data('row',1).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','left center')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','center center')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','right center'))).append((0,jquery_16.default)('<div>').data('row',2).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','left bottom')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','center bottom')).append((0,jquery_16.default)('<div>').addClass('wb-cell-ctrl').data('value','right bottom')))};AlignSelector.prototype.update=function(){var x=(this.hAlign===HorizontalAlignment.RIGHT)?2:((this.hAlign===HorizontalAlignment.CENTER)?1:0);var y=(this.vAlign===VerticalAlignment.BOTTOM)?2:((this.vAlign===VerticalAlignment.MIDDLE)?1:0);var tds=this._elem.find(".wb-cell-ctrl");tds.removeClass("active");tds.eq(y*3+x).addClass("active");tds.removeClass("highlight");if(this.highlight){for(var index in this.highlight){tds.eq(this.highlight[parseInt(index)]).addClass("highlight")}}
tds.removeClass('offset offset-top offset-bottom offset-left offset-right');if(this.visibleOffset){var classes='offset ';if(y===0)
classes+='offset-top ';if(y===2)
classes+='offset-bottom ';if(x===0)
classes+='offset-left ';if(x===2)
classes+='offset-right ';tds.eq(y*3+x).addClass(classes)}};AlignSelector.prototype.getVerticalAlignment=function(){return this.vAlign};AlignSelector.prototype.getHorizontalAlignment=function(){return this.hAlign};AlignSelector.prototype.setVerticalAlignment=function(value){this.vAlign=value;this.update()};AlignSelector.prototype.setHorizontalAlignment=function(value){this.hAlign=value;this.update()};AlignSelector.prototype.getValue=function(){return this.hAlign+" "+this.vAlign};AlignSelector.prototype.setValue=function(align){var a=(align+"").split(" ");this.hAlign=(a[0]&&[HorizontalAlignment.LEFT,HorizontalAlignment.CENTER,HorizontalAlignment.RIGHT].indexOf(a[0])>-1)?a[0]:HorizontalAlignment.LEFT;this.vAlign=(a.length>1&&a[1]&&[VerticalAlignment.TOP,VerticalAlignment.MIDDLE,VerticalAlignment.BOTTOM].indexOf(a[1])>-1)?a[1]:VerticalAlignment.TOP;this.update()};AlignSelector.prototype.getAlign=function(){return this.getValue()};AlignSelector.prototype.setAlign=function(align){this.setValue(align)};AlignSelector.prototype.setHightlight=function(hightlight){this.highlight=hightlight;this.update()};AlignSelector.prototype.setVisiblePositionOffset=function(value){this.visibleOffset=value;this.update()};AlignSelector.prototype.getHightlight=function(){return this.highlight};AlignSelector.prototype.setDisabledOptions=function(options){this._elem.find(".wb-cell-ctrl").each(function(){var $this=(0,jquery_16.default)(this);if(options.indexOf($this.data("value"))>=0)
$this.addClass("disabled");else $this.removeClass("disabled")});return this};AlignSelector.supportsMultipleObjectBindings=function(){return!1};AlignSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("disableOptions" in options)
this.setDisabledOptions(options.disableOptions);if("highlight" in options)
this.setHightlight(options.highlight);};AlignSelector.index=0;return AlignSelector}(UIComponent_8.UIComponent))});define("js/CheckBox",["require","exports","jquery","js/UIComponent","js/ToolTipControl"],function(require,exports,jquery_17,UIComponent_9,ToolTipControl_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CheckBox=(function(_super){__extends(CheckBox,_super);function CheckBox(label,value,inline){var _this=_super.call(this)||this;_this._label=null;_this._inline=!1;_this._iconElem=null;_this._value=!1;_this._visibleValueWhenDisabled=null;_this._inline=!!(inline&&!(label instanceof UIComponent_9.UIComponent));_this._elem=_this._createElem2();var id='ui_checkbox_id'+CheckBox._elemIndex;CheckBox._elemIndex++;_this._elem.attr({'for':id});_this._input=(0,jquery_17.default)('<input>').attr({type:'checkbox',id:id});var thisClass=_this;_this._input.on("change",function(){if(thisClass.canUpdateValue()){thisClass._value=thisClass._input.is(":checked");thisClass.onValueChanged()}});_this._input.on("click",function(){if(thisClass.canUpdateValue())
thisClass._value=thisClass._input.is(":checked");});if(label instanceof UIComponent_9.UIComponent){_this._elem.addClass('wb-compo-cbr');_this._elem.append((0,jquery_17.default)('<label>').append(_this._input));_this._labelComp=label;_this._labelComp.addClass('wb-compo-cbr-label');_this._labelComp.getElem().appendTo(_this._elem)}else{_this._labelElem=(0,jquery_17.default)('<span>');if(_this._inline){_this._elem.append(_this._input).append(_this._labelElem)}else{_this._elem.append((0,jquery_17.default)('<label>').append(_this._input).append(_this._labelElem))}
_this.setLabel(label)}
_this.setValue(!!value);return _this}
CheckBox.prototype._createElem2=function(){return(this._inline?(0,jquery_17.default)('<label>').addClass('checkbox-inline wb-checkbox-ctrl'):(0,jquery_17.default)('<div>').addClass('checkbox wb-checkbox-ctrl'))};CheckBox.prototype.onChange=function(func){var self=this;this._input.on('change',function(){return func(self._input[0].checked?!0:!1)});return this};CheckBox.prototype.setLabel=function(label){this._label=label;if(this._labelElem)
this._labelElem.text(label?label:'');return this};CheckBox.prototype.getLabel=function(){return this._label};CheckBox.prototype.setValue=function(value){this._value=Boolean(value);if(this.canUpdateValue())
this._input.prop("checked",Boolean(value));};CheckBox.prototype.getValue=function(){return this._value};CheckBox.prototype.setVisibleValueWhenDisabled=function(value){this._visibleValueWhenDisabled=value;this._input.prop("checked",!!(this.canUpdateValue()?this._value:this._visibleValueWhenDisabled))};CheckBox.prototype.setIcon=function(icon){if(!icon||icon===""){if(this._iconElem){this._iconElem.remove();this._iconElem=null}}else{if(!this._iconElem&&this._labelElem){this._iconElem=(0,jquery_17.default)('<i/>');this._iconElem.insertBefore(this._labelElem);this._iconElem.attr("class","wb-checkbox-icon "+icon)}}};CheckBox.prototype.setEnabled=function(enabled){if(this._input.is(".disabled")===!enabled)
return;_super.prototype.setEnabled.call(this,enabled);if(enabled){this._input.removeClass('disabled');this._input.removeAttr('disabled')}else{this._input.addClass('disabled');this._input.attr('disabled','disabled')}
this.setVisibleValueWhenDisabled(this._visibleValueWhenDisabled)};CheckBox.prototype.canUpdateValue=function(){return!this._input.is(".disabled")||typeof this._visibleValueWhenDisabled!=="boolean"};CheckBox.prototype.setHelpText=function(helpText,placement){var _a;if(helpText===void 0){helpText=null}
if(placement===void 0){placement="top"}
if(this._helpText!==helpText){if(helpText===null||helpText===""){if(this._helpTextElem){this._helpTextElem.remove();this._helpTextElem=null}}else{var text=helpText;var icon='?';if(helpText&&helpText.substring(0,5)=='warn:'){text=helpText.substring(5);icon='warn'}else if(helpText&&helpText.substring(0,6)=='error:'){text=helpText.substring(6);icon='error'}
if(!this._helpTextElem){this._helpTextElem=new ToolTipControl_2.ToolTipControl(icon,text,placement)}
var cont=this._labelElem||((_a=this._labelComp)===null||_a===void 0?void 0:_a.getElem());if(cont){this._helpTextElem.elem.insertAfter(cont)}
if(wb_builder.rtl){if(placement==='left')
placement='right';else if(placement==='right')
placement='left'}
this._helpTextElem.setLabel(icon);this._helpTextElem.setTitle(text,!0);this._helpTextElem.setPlacement(placement)}
this._helpText=helpText}
return this};CheckBox.prototype.on=function(event,callback){if(event==='change'){this._input.on(event,callback)}else{_super.prototype.on.call(this,event,callback)}
return this};CheckBox.prototype.off=function(event,callback){if(event==='change'){this._input.off(event,callback)}else{_super.prototype.off.call(this,event,callback)}
return this};CheckBox.prototype.trigger=function(event,extraParameters){if(event==='change'){this._input.trigger(event,extraParameters)}else{_super.prototype.trigger.call(this,event,extraParameters)}
return this};CheckBox.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("icon" in options)
this.setIcon(options.icon);if("visibleValueWhenDisabled" in options)
this.setVisibleValueWhenDisabled(options.visibleValueWhenDisabled);};CheckBox.prototype.buildInit=function(data,fields){if("icon" in data&&data.icon!==undefined)
this.setIcon(data.icon);if("visibleValueWhenDisabled" in data&&data.visibleValueWhenDisabled!==undefined)
this.setVisibleValueWhenDisabled(data.visibleValueWhenDisabled);};CheckBox._elemIndex=0;return CheckBox}(UIComponent_9.UIComponent));exports.default=CheckBox});define("js/util/ComparisonUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ComparisonUtil=void 0;var ComparisonUtil=(function(){function ComparisonUtil(){}
ComparisonUtil.checkEqualsRecursive=function(valueA,valueB){if(valueA===valueB)
return!0;var tA=(valueA===null)?"null":typeof valueA;var tB=(valueB===null)?"null":typeof valueB;if(tA!=="object"||tB!=="object")
return!1;if(tA==="object"&&Array.isArray(valueA))
tA="array";if(tB==="object"&&Array.isArray(valueB))
tB="array";if(tA!==tB)
return!1;if(tA==="array"){if(valueA.length!==valueB.length)
return!1;for(var i=valueA.length-1;i>=0;i--){if(!this.checkEqualsRecursive(valueA[i],valueB[i]))
return!1}}else{var keysA=Object.keys(valueA);var keysB=Object.keys(valueB);if(keysA.length!==keysB.length)
return!1;for(var i=keysA.length-1;i>=0;i--){if(keysA[i]!==keysB[i]||!this.checkEqualsRecursive(valueA[keysA[i]],valueB[keysB[i]]))
return!1}}
return!0};return ComparisonUtil}());exports.ComparisonUtil=ComparisonUtil});define("js/DropdownBox",["require","exports","jquery","js/UIComponent","js/util/ComparisonUtil"],function(require,exports,jquery_18,UIComponent_10,ComparisonUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Item=exports.DropdownBox=void 0;var currentlyOpen=null,docCallback=null,searchIdx=-1;var DropdownBox=exports.DropdownBox=(function(_super){__extends(DropdownBox,_super);function DropdownBox(options){var _this_1=_super.call(this)||this;_this_1.editBtn=null;_this_1._footerBlockElem=null;_this_1._editBtn=null;_this_1._newItemBtn=null;_this_1._open=!1;_this_1._items=[];_this_1._itemsIndex={};_this_1._selectedItem=null;_this_1._itemMouseEnterFunc=null;_this_1._itemMouseLeaveFunc=null;_this_1.fields={};_this_1.onSelect=null;_this_1.optionsSource=null;_this_1.multiselect=!1;_this_1.addSelectAll=!1;_this_1.multilevel=!1;_this_1.parentMustBeSelected=!1;_this_1.noSearch=!1;_this_1.searchFromStart=!1;_this_1.placeholder=null;_this_1.autoSelectFirst=!0;_this_1.useHtmlInput=!1;_this_1.onEditFunc=null;_this_1.onNewItemFunc=null;_this_1.selectAllItems={};_this_1.alignment='left';_this_1.isSmall=!1;_this_1.isMenuRel=!1;var _this=_this_1;_this_1._editBtnText=__("Edit");_this_1._newItemBtnText=__("New Item");_this_1._dropdown=(0,jquery_18.default)('<div/>').addClass('input-group wb-combobox-controll').on('keydown',function(e){if(!_this_1._open)
return undefined;if(_this_1._searchInput&&_this_1._searchInput.is(':focus'))
return;var nItem,itemTop,itemHeight,menuScrollTop=_this_1._menu.scrollTop(),menuHeight=_this_1._menu.outerHeight(),item=Item.fromElem(_this_1._menu.children('li.hover').eq(0));if(!item&&_this_1._selectedItem){item=_this_1._selectedItem}else if(!item&&_this_1._items.length>0){item=_this_1._items[0]}else if(!item){return undefined}
if(e.which===13){_this_1.setOpen(!1);_this_1.selectItem(item);_this_1.onValueChanged();e.preventDefault();e.stopPropagation();return!1}else if(e.which===27){_this_1.setOpen(!1);e.preventDefault();e.stopPropagation();return!1}else if(e.which===38){nItem=Item.fromElem(item._elem.prev('li'));if(nItem){item._elem.removeClass('hover');nItem._elem.addClass('hover');itemTop=nItem._elem.get(0).offsetTop;if(itemTop<=menuScrollTop){_this_1._menu.scrollTop(itemTop)}}
e.preventDefault();e.stopPropagation();return!1}else if(e.which===40){nItem=Item.fromElem(item._elem.next('li'));if(nItem){item._elem.removeClass('hover');nItem._elem.addClass('hover');itemTop=nItem._elem.get(0).offsetTop;itemHeight=nItem._elem.outerHeight();if((itemTop+itemHeight)>=(menuScrollTop+menuHeight)){_this_1._menu.scrollTop(itemTop-menuHeight+itemHeight)}}
e.preventDefault();e.stopPropagation();return!1}
return undefined}).on('keypress',function(e){if(!_this_1._open)
return undefined;if(_this_1._searchInput&&_this_1._searchInput.is(':focus'))
return;var n,i=((searchIdx>=0)?searchIdx:0),ch=String.fromCharCode(e.which).toLowerCase(),itemTop,itemHeight,menuScrollTop=_this_1._menu.scrollTop(),menuHeight=_this_1._menu.outerHeight();for(n=0;n<_this_1._items.length;n++){var title=_this_1._items[i].getTitle();if(title&&title.toLowerCase().charAt(0)===ch&&searchIdx!==i){_this_1._items[i]._elem.parent().children('li').removeClass('hover');_this_1._items[i]._elem.addClass('hover');itemTop=_this_1._items[i]._elem.get(0).offsetTop;itemHeight=_this_1._items[i]._elem.outerHeight();if(itemTop<=menuScrollTop){_this_1._menu.scrollTop(itemTop)}else if((itemTop+itemHeight)>=(menuScrollTop+menuHeight)){_this_1._menu.scrollTop(itemTop-menuHeight+itemHeight)}
searchIdx=i;break}
i++;if(i>=_this_1._items.length)
i=0}
e.preventDefault();e.stopPropagation();return!1});_this_1._group=(0,jquery_18.default)('<div>').addClass('input-group-btn').appendTo(_this_1._dropdown);_this_1._btn=(0,jquery_18.default)('<button>').addClass('btn btn-default dropdown-toggle').attr({type:'button'}).append((0,jquery_18.default)('<span>').addClass('caret')).appendTo(_this_1._group).on('click',function(e){_this_1.onOpen();e.stopPropagation();return!1});_this_1._menuWrapper=(0,jquery_18.default)('<div>').addClass('dropdown-menu-wrapper').appendTo(_this_1._group);if(!_this_1.noSearch){var thisClass_1=_this_1;_this_1._searchInputBlock=(0,jquery_18.default)('<div>').appendTo(_this_1._menuWrapper);_this_1._searchInput=(0,jquery_18.default)('<input>').addClass('form-control input-sm input-search').attr('placeholder',__('Search')).on('change keyup',function(e){if(e.keyCode===27)
this.value='';var noSubElementFilter=thisClass_1.parentMustBeSelected?!0:!1;var input=this.value.toLowerCase();for(var _i=0,_a=thisClass_1._items;_i<_a.length;_i++){var item=_a[_i];if(!item.getTitle())
continue;var searchBlob=item.getTitle().toLowerCase();var ok=!_this.searchFromStart?searchBlob.indexOf(input)>=0:searchBlob.indexOf(input)==0;if(noSubElementFilter&&item.getIndent()>0)
ok=!0;item.setFilteredOut(!ok)}}).on('click',function(e){e.stopPropagation()}).appendTo(_this_1._searchInputBlock)}
_this_1._menu=(0,jquery_18.default)('<ul>').addClass('dropdown-menu').appendTo(_this_1._menuWrapper);_this_1._menu=(0,jquery_18.default)('<ul>').addClass('dropdown-menu').appendTo(_this_1._menuWrapper);_this_1._itemMouseEnterFunc=function(){var li=(0,jquery_18.default)(this);li.parent().children('li').removeClass('hover');li.addClass('hover')};_this_1._itemMouseLeaveFunc=function(){var li=(0,jquery_18.default)(this);li.removeClass('hover')};if(!docCallback){(0,jquery_18.default)(document.body).on('click',docCallback=function(){if(currentlyOpen)
currentlyOpen.setOpen(!1);})}
if(options&&options.length){for(var i=0;i<options.length;i++){_this_1.addItem(options[i])}}
_this_1._elem.append(_this_1._dropdown);_this_1._dropdown.on("change",function(){if(_this_1.multilevel&&_this_1.parentMustBeSelected)
_this_1.setMultilevel(_this_1.multilevel);_this_1.onValueChanged()});_this_1.buildInput();return _this_1}
DropdownBox.prototype.setOnSelect=function(func){this.onSelect=function(item){return func(item)};return this};DropdownBox.prototype.buildInit=function(data,fields){this.fields=fields;if(data.css&&typeof data.css==='object'&&data.css.width){this.inputWidth=data.css.width}
if('dropdownWidth' in data&&data.dropdownWidth){this.dropdownWidth=data.dropdownWidth}
if('editable' in data){this.setEditable(!!data.editable)}
if('alignment' in data&&data.alignment){this.setAlignment(data.alignment)}
if('small' in data)
this.setSmall(data.small?!0:!1);if('menuRel' in data)
this.setMenuRel(data.menuRel?!0:!1);if(('edit' in data)&&(typeof data.edit==='function')){this.onEditFunc=data.edit}
if(('newItem' in data)&&(typeof data.newItem==='function')){this.onNewItemFunc=data.newItem}
if('editBtnText' in data&&data.editBtnText){this.setEditBtnText(data.editBtnText)}
if('newItemBtnText' in data&&data.newItemBtnText){this.setNewItemBtnText(data.newItemBtnText)}
if(this.onEditFunc||this.onEdit!==DropdownBox.prototype.onEdit){if(this._editBtn)
this._editBtn.show();if(this.editBtn)
this.editBtn[0].style.display='inline-block'}else{if(this._editBtn)
this._editBtn.hide();if(this.editBtn)
this.editBtn[0].style.display='none'}
if(this._newItemBtn){if(this.onNewItemFunc)
this._newItemBtn.show();else this._newItemBtn.hide()}
if('multiselect' in data){this.multiselect=!!data.multiselect}
if('addSelectAll' in data){this.addSelectAll=!!data.addSelectAll}
if('parentMustBeSelected' in data){this.parentMustBeSelected=!!data.parentMustBeSelected}
this.useHtmlInput=(!this.multiselect&&('useHtmlInput' in data)&&data.useHtmlInput);if('autoSelectFirst' in data){this.autoSelectFirst=!!data.autoSelectFirst}
if('placeholder' in data){this.placeholder=data.placeholder||null}
if('footerLink' in data){this.footerLink=data.footerLink||null}
this.buildInput();if(data.options&&data.options instanceof Array){this.optionsSource=data.options}
this.reload();if('multilevel' in data){this.setMultilevel(!!data.multilevel)}
if(('change' in data)&&(typeof data.change==='function')){(function(el,func){el.on('change',function(){func.call(el,fields)})})(this,data.change)}
if(('select' in data)&&(typeof data.select==='function')){(function(el,func){el.onSelect=function(item){func.call(el,item,fields)}})(this,data.select)}
if('noSearch' in data){this.setNoSearch(!!data.noSearch)}
if('searchFromStart' in data){this.setSearchFromStart(!!data.searchFromStart)}
if(data.value)
this.setValue(data.value);};DropdownBox.prototype.getValue=function(multiSelect){if(multiSelect===void 0){multiSelect=!1}
if(multiSelect){var i=void 0,list=[],items=this.getSelectedItems();for(i=0;i<items.length;i++){list.push(items[i].getId())}
return list}else{var item=this.getSelectedItem();return item?item.getId():null}};DropdownBox.prototype.setValue=function(value,multiSelect){if(multiSelect===void 0){multiSelect=!1}
var i,item;if(multiSelect){this.selectItem(null,!1,!1);for(i=0;i<value.length;i++){item=this.getItemById(value[i]);if(item)
this.selectItem(item,!0,!1);}
this.updateValueText();this.setMultilevel(this.multilevel)}else{item=this.getItemById(value);if(!item)
item=this.getItem(0);this.selectItem(item)}};DropdownBox.prototype.buildInput=function(){var _this_1=this;if(this._input){this._input.detach();this._input.remove()}
if(this.useHtmlInput){this._input=(0,jquery_18.default)('<div>').css({height:34,border:'1px solid #ccc',padding:'6px 12px',cursor:'hover'}).on('click',function(e){_this_1.onOpen();e.stopPropagation();return!1})}else{this._input=(0,jquery_18.default)('<input>').attr('placeholder',this.placeholder).addClass('form-control').attr({type:'text',readonly:'readonly'}).on('click',function(e){_this_1.onOpen();e.stopPropagation();return!1})}
this._input.insertBefore(this._group);if(this.inputWidth){this._input.css({width:this.inputWidth-(24-1)})}
if(this.footerLink){this._footerLinkElem=(0,jquery_18.default)('<a href="#">').on('click',function(e){var _a;e.preventDefault();e.stopPropagation();(_a=_this_1.footerLink)===null||_a===void 0?void 0:_a.action();return!1}).text(this.footerLink.text).addClass('dropdown-footer dropdown-menu btn btn-default btn-link').appendTo(this._menuWrapper)}};DropdownBox.prototype.setEditable=function(editable){var _this_1=this;if(editable&&!this._footerBlockElem&&!this.editBtn){this._footerBlockElem=(0,jquery_18.default)('<div class="wb-dropdown-footer"></div>');this._editBtn=(0,jquery_18.default)('<a class="wb-dropdown-footer-btn btn-link"></a>');this._newItemBtn=(0,jquery_18.default)('<a class="wb-dropdown-footer-btn btn-link"></a>');this.setEditBtnText(this._editBtnText);this.setNewItemBtnText(this._newItemBtnText);this._footerBlockElem.append(this._newItemBtn,this._editBtn);this._menuWrapper.append(this._footerBlockElem);if(!this.onNewItemFunc)
this._newItemBtn.hide();if(!this.onEditFunc&&!this.onNewItemFunc)
this._footerBlockElem.hide();this._editBtn.on("click",function(e){e.stopImmediatePropagation();e.preventDefault();_this_1.onEdit(_this_1.fields)});this._newItemBtn.on("click",function(e){e.stopImmediatePropagation();e.preventDefault();_this_1.onNewItem(_this_1.fields)});this.editBtn=(0,jquery_18.default)('<button>').addClass('btn btn-default wb-ctrl-edit').attr({type:'button'}).append((0,jquery_18.default)('<span>').addClass('fa fa-pencil')).appendTo(this._group).on('click',function(){_this_1.onEdit(_this_1.fields);return!1});if(!this.onEditFunc&&this.onEdit===DropdownBox.prototype.onEdit){this._editBtn.hide();this.editBtn[0].style.display='none'}}else if(!editable&&this._footerBlockElem&&this.editBtn){this._footerBlockElem.remove();this._footerBlockElem=null;this._editBtn=null;this._newItemBtn=null;this.editBtn.remove();this.editBtn=null}};DropdownBox.prototype.setEditBtnText=function(text){this._editBtnText=text;if(this._editBtn)
this._editBtn.text(this._editBtnText).prepend((0,jquery_18.default)('<i class="fa fa-pencil"></i>'));};DropdownBox.prototype.setNewItemBtnText=function(text){this._newItemBtnText=text;if(this._newItemBtn)
this._newItemBtn.text(this._newItemBtnText).prepend((0,jquery_18.default)('<i class="fa fa-plus"></i>'));};DropdownBox.prototype.setAlignment=function(alignment){this.alignment=alignment;if(alignment=='right'){this._menu.addClass('dropdown-menu-right')}else{this._menu.removeClass('dropdown-menu-right')}};DropdownBox.prototype.setSmall=function(small){this.isSmall=small;if(small){this._dropdown.addClass('input-group-sm')}else{this._dropdown.removeClass('input-group-sm')}};DropdownBox.prototype.setMenuRel=function(rel){if(this.isMenuRel==rel)
return;this.isMenuRel=rel;if(rel){this._menu.addClass('rel')}else{this._menu.removeClass('rel')}};DropdownBox.prototype.onSelectAllClick=function(e){e.stopImmediatePropagation();e.preventDefault();var data=e.target?(0,jquery_18.default)(e.target).data():null;if(data&&data.hasOwnProperty("action")&&data.hasOwnProperty("parentId")){for(var _i=0,_a=this._items;_i<_a.length;_i++){var item=_a[_i];if(!item.multiSelect||item.nonSelectable)
continue;var original=item.getOriginal();if(!original||!this.isItemChildOf(original,data.parentId))
continue;item.setChecked(data.action==="select")}
if(this.parentMustBeSelected)
this.setMultilevel(this.multilevel);this.updateValueText()}};DropdownBox.prototype.setOptions=function(fromSource){this.reload(fromSource);return this};DropdownBox.prototype.reload=function(fromSource){if(fromSource===void 0){fromSource=null}
var selItems=this.getValue(this.multiselect);var elItem,saItem;this.removeAllItems();if(fromSource instanceof Array)
this.optionsSource=fromSource;if(this.optionsSource instanceof Array){for(var n=0;n<this.optionsSource.length;n++){if(typeof this.optionsSource[n]==='object'&&this.optionsSource[n]){if(this.multiselect&&this.addSelectAll){var parentId=(this.optionsSource[n].hasOwnProperty("parentId")?this.optionsSource[n].parentId:0);var parentKey="#"+parentId;if(!this.selectAllItems.hasOwnProperty(parentKey)){saItem=new Item(__("Select all")+" / "+__("Deselect all"),"__select_all__"+parentId,{parentId:parentId},"<small><a data-action=\"select\" data-parent-id=\""+parentId+"\">"+__("Select all")+"</a> / <a data-action=\"deselect\" data-parent-id=\""+parentId+"\">"+__("Deselect all")+"</a></small>","",!1,'',!0);saItem.on("click",this.onSelectAllClick.bind(this));this.selectAllItems[parentKey]=saItem;this.addItem(saItem)}}
elItem=new Item(__tr(this.optionsSource[n].name),this.optionsSource[n].id,this.optionsSource[n],this.optionsSource[n].html,'',this.multiselect,this.optionsSource[n].backgroundColor,this.optionsSource[n].nonSelectable);this.addItem(elItem)}}}
if(this.multilevel)
this.setMultilevel(this.multilevel);this.setValue(selItems,this.multiselect)};DropdownBox.prototype.isItemChildOf=function(item,parentId){if(!parentId)
return!0;if(!item||!item.hasOwnProperty("parentId"))
return null;if(""+item.parentId===""+parentId)
return!0;if(!item.parentId)
return!1;var parent=this.getItemById(item.parentId);if(!parent)
return null;return this.isItemChildOf(parent.getOriginal(),parentId)};DropdownBox.prototype.getLevel=function(item,lvl){if(!item)
return lvl;var key='#'+item.parentId;return(item.parentId&&(key in this._itemsIndex))?this.getLevel(this._itemsIndex[key].getOriginal(),lvl+1):lvl};DropdownBox.prototype.setMultilevel=function(multilevel){this.multilevel=multilevel;if(multilevel){for(var _i=0,_a=this._items;_i<_a.length;_i++){var item=_a[_i];var original=item.getOriginal();var parent_1=(this.parentMustBeSelected&&original&&original.parentId)?this.getItemById(original.parentId):null;if(!parent_1||parent_1.getChecked())
item.setVisible(!0);else item.setVisible(!1);item.setIndent(this.getLevel(original,0))}}else{for(var _b=0,_c=this._items;_b<_c.length;_b++){var item=_c[_b];item.getElem().css({paddingLeft:0})}}};DropdownBox.prototype.setNoSearch=function(value){this.noSearch=value;if(value){this._searchInputBlock.hide()}else{this._searchInputBlock.show()}};DropdownBox.prototype.setSearchFromStart=function(value){this.searchFromStart=value};DropdownBox.prototype.onEdit=function(fields){if(typeof this.onEditFunc==='function')
this.onEditFunc.call(this,fields);};DropdownBox.prototype.onNewItem=function(fields){if(typeof this.onNewItemFunc==='function')
this.onNewItemFunc.call(this,fields);};DropdownBox.prototype.onOpen=function(){if(!this._enabled)
return;this.setOpen(!this._open)};DropdownBox.prototype.getItems=function(){return this._items};DropdownBox.prototype.getItemById=function(id){var k='#'+id;return(k in this._itemsIndex)?this._itemsIndex[k]:null};DropdownBox.prototype.getItem=function(index){return(index>=0&&index<this._items.length)?this._items[index]:null};DropdownBox.prototype.selectItem=function(item,select,updateValueAndStyles){var _a,_b,_c;if(select===void 0){select=!1}
if(updateValueAndStyles===void 0){updateValueAndStyles=!0}
var i,idx,value='';if(!item){(_a=this._selectedItem)===null||_a===void 0?void 0:_a.setSelected(!1);this._selectedItem=null;if(updateValueAndStyles){(this.useHtmlInput)?this._input.html(''):this._input.val('')}
if(select===!1){for(i=0;i<this._items.length;i++){if(this._items[i].multiSelect)
this._items[i].setChecked(!1);}}
if(typeof this.onSelect==='function')
this.onSelect(this._selectedItem);}else if(!item.nonSelectable){if(item.multiSelect){(_b=this._selectedItem)===null||_b===void 0?void 0:_b.setSelected(!1);this._selectedItem=null;if(this._items.indexOf(item)>=0){item.setChecked((select||select===null||typeof select==='undefined'))}
if(updateValueAndStyles)
this.updateValueText();if(typeof this.onSelect==='function')
this.onSelect(this._selectedItem);}else{idx=this._items.indexOf(item);if(idx>=0){(_c=this._selectedItem)===null||_c===void 0?void 0:_c.setSelected(!1);this._selectedItem=item;this._selectedItem.setSelected(!0);if(updateValueAndStyles)
this.updateValueText();if(typeof this.onSelect==='function')
this.onSelect(this._selectedItem);}}}
if(updateValueAndStyles&&this.multilevel&&this.parentMustBeSelected)
this.setMultilevel(this.multilevel);};DropdownBox.prototype.updateValueText=function(){var i,value="";if(this.multiselect){for(i=0;i<this._items.length;i++){if(this._items[i].getChecked()){if(this.parentMustBeSelected){var original=this._items[i].getOriginal();if(original&&original.parentId){var parent_2=this.getItemById(original.parentId);if(parent_2&&!parent_2.getChecked())
continue}}
value+=(value.length?'; ':'')+this._items[i].getTitle()}}
this._input.val(value)}else{var item=this.getSelectedItem();if(this.useHtmlInput){this._input.html(item?(item.getHtmlTitle()?item.getHtmlTitle():item.getTitle()):(this.placeholder||""))}else{this._input.val(item?item.getTitle():"")}}};DropdownBox.prototype.getSelectedItem=function(){return this._selectedItem};DropdownBox.prototype.getSelectedItems=function(){var i,list=[];for(i=0;i<this._items.length;i++){if(this._items[i].getChecked())
list.push(this._items[i]);}
return list};DropdownBox.prototype.addItem=function(item){var _this_1=this;var idx=this._items.indexOf(item);if(idx<0){this._items.push(item);if(item._id)
this._itemsIndex['#'+item._id]=item;this._menu.append(item._elem);item._selectFunc=function(){if(item.multiSelect){_this_1.selectItem(item,!item.getChecked())}else{_this_1.selectItem(item)}
if(!item.multiSelect)
_this_1.setOpen(!1);_this_1.trigger('change');if(item.multiSelect)
return!1;return undefined};item.on('click',item._selectFunc);item.on('mouseenter',this._itemMouseEnterFunc);item.on('mouseleave',this._itemMouseLeaveFunc);if(this.autoSelectFirst&&this._items.length===1){this.selectItem(item)}
if(this._searchInputBlock){this._searchInputBlock.css('display',(this._items.length>=DropdownBox.minOptionsNumberForSearchShowing?'block':'none'))}}};DropdownBox.prototype.removeItem=function(item){var idx=this._items.indexOf(item);if(idx>=0){this._items.splice(idx,1);if(item._id){delete this._itemsIndex['#'+item._id]}
item._elem.detach();if(item._selectFunc){item.off('click',item._selectFunc);item.off('mouseenter',this._itemMouseEnterFunc);item.off('mouseleave',this._itemMouseLeaveFunc)}}};DropdownBox.prototype.removeAllItem=function(){this.removeAllItems()};DropdownBox.prototype.removeAllItems=function(){for(var i=0;i<this._items.length;i++){this._items[i]._elem.detach();if(this._items[i]._selectFunc){this._items[i].off('click',this._items[i]._selectFunc);this._items[i].off('mouseenter',this._itemMouseEnterFunc);this._items[i].off('mouseleave',this._itemMouseLeaveFunc)}}
this._items.splice(0,this._items.length);this._itemsIndex={};this.selectAllItems={};this.selectItem(null)};DropdownBox.prototype.setOpen=function(open){this._open=!!open;if(this._open){if(currentlyOpen&&currentlyOpen!==this)
currentlyOpen.setOpen(!1);currentlyOpen=this;var w=this._input.outerWidth(!1),css={width:(this._input.outerWidth(!1)+this._group.outerWidth(!1))+'px'};if(this.dropdownWidth){css.width=this.dropdownWidth+'px'}
if(wb_builder.rtl){if(this.alignment=='right'){css.left='inherit';css.right='0px'}else{css.left='';css.right=('-'+w+'px')}}else{if(this.alignment=='right'){css.left='';css.right='0px'}else{css.left=('-'+w+'px');css.right=''}}
this._menuWrapper.css(css);var rawMenuWrapper=this._menuWrapper.get(0);this._group.addClass('open');if(this._selectedItem){var mi=this._selectedItem._elem;mi.addClass('hover');if(rawMenuWrapper.scrollHeight>rawMenuWrapper.clientHeight){mi.get(0).scrollIntoView(!1)}
searchIdx=this._items.indexOf(this._selectedItem)}else{searchIdx=-1}
if(this._searchInput){this._searchInput.val('');this._searchInput.trigger('change');this._searchInput.trigger('focus')}
var viewport=this._elem.parents('.wb-sidebar-item-content');var viewportH=viewport.height();var viewportScroll=viewport.scrollTop();var elementPosition=0;var offsetElem=this._menuWrapper;do{elementPosition+=offsetElem.position().top;offsetElem=offsetElem.offsetParent()}while(offsetElem.get(0).tagName!=='HTML'&&!offsetElem.hasClass('wb-properties-panel'));if(elementPosition<viewportScroll){viewport.scrollTop(elementPosition-20)}else if(elementPosition+this._menuWrapper.height()>viewportScroll+viewportH){viewport.scrollTop(elementPosition+this._menuWrapper.height()+this._dropdown.height()-viewportH)}}else{this._group.removeClass('open');if(currentlyOpen===this)
currentlyOpen=null}};DropdownBox.prototype.getOpen=function(){return this._open};DropdownBox.prototype.addMenuStyleClass=function(styleClass){this._menu.addClass(styleClass)};DropdownBox.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);if(this._enabled){this._btn.removeClass('disabled');this._input.removeClass("disabled");this._dropdown.removeClass('disabled').css({cursor:''})}else{this.setOpen(!1);this._btn.addClass('disabled');this._input.addClass("disabled");this._dropdown.addClass('disabled').css({cursor:'not-allowed'})}};DropdownBox.prototype.on=function(event,func){if(event==='change'){this._input.on(event,func)}else{_super.prototype.on.call(this,event,func)}
return this};DropdownBox.prototype.off=function(event,func){if(event==='change'){this._input.off(event,func)}else{_super.prototype.off.call(this,event,func)}
return this};DropdownBox.prototype.trigger=function(event,extraParameters){if(event==='change'){this._input.trigger(event,extraParameters)}else{_super.prototype.trigger.call(this,event,extraParameters)}
return this};DropdownBox.prototype.setMultiselect=function(multiselect){if(this.multiselect===multiselect)
return;this.multiselect=multiselect;this.reload()};DropdownBox.prototype.setAddSelectAll=function(addSelectAll){if(this.addSelectAll===addSelectAll)
return;this.addSelectAll=addSelectAll;this.reload()};DropdownBox.prototype.setParentMustBeSelected=function(parentMustBeSelected){if(this.parentMustBeSelected===parentMustBeSelected)
return;this.parentMustBeSelected=parentMustBeSelected};DropdownBox.supportsMultipleObjectBindings=function(){return!1};DropdownBox.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("editable" in options)
this.setEditable(!!options.editable);if('alignment' in options&&options.alignment)
this.setAlignment(options.alignment);if('small' in options)
this.setSmall(options.small?!0:!1);if('menuRel' in options)
this.setMenuRel(options.menuRel?!0:!1);if("multiselect" in options)
this.setMultiselect(!!options.multiselect);if("addSelectAll" in options)
this.setAddSelectAll(!!options.addSelectAll);if("parentMustBeSelected" in options)
this.setParentMustBeSelected(!!options.parentMustBeSelected);if("multilevel" in options)
this.setMultilevel(!!options.multilevel);if("options" in options){if(!ComparisonUtil_1.ComparisonUtil.checkEqualsRecursive(options.options,this.optionsSource))
this.reload(options.options);}};DropdownBox.minOptionsNumberForSearchShowing=8;return DropdownBox}(UIComponent_10.UIComponent));var Item=(function(){function Item(title,id,original,htmlTitle,icon,multiSelect,backgroundColor,nonSelectable){if(original===void 0){original=null}
if(htmlTitle===void 0){htmlTitle=''}
if(icon===void 0){icon=''}
if(multiSelect===void 0){multiSelect=!1}
if(backgroundColor===void 0){backgroundColor=''}
if(nonSelectable===void 0){nonSelectable=!1}
this._original=null;this._cbwElem=null;this._cbElem=null;this._iconElem=null;this._selectFunc=null;this._selected=!1;this._checked=!1;this.multiSelect=!1;this.nonSelectable=!1;this.indent=0;this.isVisible=!0;this.isFilteredOut=!1;this._id=id;this._elem=(0,jquery_18.default)('<li>');this._elem.data('__META_INST__',this);if(multiSelect){this.multiSelect=!0;this._cbElem=(0,jquery_18.default)('<input>').attr({type:'checkbox'});this._cbwElem=(0,jquery_18.default)('<div>').addClass('wb-combobox-controll-cb').append(this._cbElem).appendTo(this._elem)}
if(icon){this._iconElem=(0,jquery_18.default)('<span>').addClass('wb-combobox-controll-icon').addClass(icon)}
this.nonSelectable=!!nonSelectable;this._aElem=(0,jquery_18.default)('<a>').attr({href:'javascript:void(0)'}).appendTo(this._elem);this.setTitle(title);if(htmlTitle)
this.setHtmlTitle(htmlTitle);this._original=original;if(backgroundColor){this._elem.css('background-color',backgroundColor+'!important')}}
Item.fromElem=function(elem){return elem.data('__META_INST__')};Item.prototype.setNonSelectable=function(nonSelectable){this.nonSelectable=nonSelectable;return this};Item.prototype.addClass=function(cssClass){this._elem.addClass(cssClass);return this};Item.prototype.removeClass=function(cssClass){this._elem.removeClass(cssClass);return this};Item.prototype.css=function(cssValues){this._aElem.css(cssValues);return this};Item.prototype.getElem=function(){return this._elem};Item.prototype.getId=function(){return this._id};Item.prototype.getOriginal=function(){return this._original};Item.prototype.setFilteredOut=function(filteredOut){if(this.isFilteredOut==filteredOut)
return this;this.isFilteredOut=filteredOut;this.setVisible(!filteredOut,!0);return this};Item.prototype.getIndent=function(){return this.indent};Item.prototype.setIndent=function(indent){if(this.indent==indent)
return this;this.indent=indent;this._elem.css('paddingLeft',(20*indent)+'px');return this};Item.prototype.setVisible=function(visible,force){if(force===void 0){force=!1}
if(this.isFilteredOut&&!force)
return this;if(this.isVisible==visible)
return this;this.isVisible=visible;if(visible){this._elem.css('display','')}else{this._elem.css('display','none')}
return this};Item.prototype.setSelected=function(selected){this._selected=!!selected;if(this._selected){this._elem.addClass('active')}else{this._elem.removeClass('active')}};Item.prototype.getSelected=function(){return this._selected};Item.prototype.setChecked=function(checked){this._checked=!!checked;if(this._cbElem)
this._cbElem.get(0).checked=this._checked};Item.prototype.getChecked=function(){return this._checked};Item.prototype.setTitle=function(title){this._title=title;if(this._iconElem)
this._iconElem.detach();this._aElem.text((this._title||this._id===0)?(this._title?this._title:'\xA0'):('['+__('no name')+']'));if(this._iconElem)
this._aElem.prepend(this._iconElem);};Item.prototype.setIcon=function(icon){this._iconElem=(0,jquery_18.default)('<span>').addClass('wb-combobox-controll-icon').addClass(icon);this.setTitle('New Title')};Item.prototype.setHtmlTitle=function(title){if(this._iconElem)
this._iconElem.detach();this._aElem.html(title?title:'');if(this._iconElem)
this._aElem.prepend(this._iconElem);};Item.prototype.getTitle=function(){return this._title};Item.prototype.getHtmlTitle=function(){return this._aElem.html()};Item.prototype.on=function(event,func){if(event==='click'){this._aElem.on(event,func);if(this._cbwElem)
this._cbwElem.on(event,func);}else{this._elem.on(event,func)}
return this};Item.prototype.off=function(event,func){if(event==='click'){this._aElem.off(event,func)}else{this._elem.off(event,func)}
return this};return Item}());exports.Item=Item;DropdownBox.Item=Item});define("js/SizeSelector",["require","exports","js/UIComponent","js/Service","jquery"],function(require,exports,UIComponent_11,Service_3,jquery_19){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SizeSelector=void 0;var SizeSelector=(function(_super){__extends(SizeSelector,_super);function SizeSelector(noUnits,minValue,maxValue,step,noRepeat,noFixedWidth,units){if(noUnits===void 0){noUnits=!0}
if(minValue===void 0){minValue=1}
if(maxValue===void 0){maxValue=9999}
if(step===void 0){step=1}
if(noRepeat===void 0){noRepeat=!1}
if(noFixedWidth===void 0){noFixedWidth=!1}
if(units===void 0){units="px"}
var _this=_super.call(this)||this;_this.unitsDropdown=null;_this.unitsVisible=!1;_this.minValue=1;_this.maxValue=9999;_this.noRepeat=!1;_this.precision=0;_this.clearTrailingZeroes=!0;_this._enabled=!0;_this.step=1;_this.buttonHoldData=null;_this.onConfirmFunc=null;_this.onCancelFunc=null;_this.units=[];_this.currentUnit=null;_this.unitsWidth=20;_this.isFixed=!1;_this.fixedWidth=0;_this.unitsDropdownAlignment='left';_this.isSmall=!1;_this.isSpinnerVisible=!1;_this.isActive=!1;if(!step){step=1}
if(minValue!==null&&minValue!==undefined){_this.minValue=minValue}
if(maxValue!==null&&maxValue!==undefined){_this.maxValue=maxValue}
_this.noRepeat=(noRepeat===undefined)?(maxValue===undefined?!0:_this.noRepeat):noRepeat;_this.step=step;_this.input=(0,jquery_19.default)('<input type="text" class="form-control form-control-with-suffix" value="1" />');_this.upDownButtons=(0,jquery_19.default)('<div class="input-group-btn buttons">'+'<button class="btn btn-default btn-arrow arrow-up" type="button"><span class="caret"></span></button>'+'<button class="btn btn-default btn-arrow arrow-down" type="button"><span class="caret"></span></button>'+'</div>');_this.unitsElem=(0,jquery_19.default)('<span class="units input-group-addon"></span>');_this.groupElem=(0,jquery_19.default)('<div class="input-group">').append(_this.input,_this.upDownButtons);_this._elem.addClass('wb-size-selector').append(_this.groupElem);_this.setFixedWidth(!noFixedWidth);_this.setUnits(units);_this.setUnitsVisible(!noUnits);_this.input.on('change',function(e){var elem=_this.input[0];var val=parseFloat(elem.value.replace(",","."));if(isNaN(val))
val=0;val=Math.max(val,_this.getCurrentUnitMinValue());val=Math.min(val,_this.getCurrentUnitMaxValue());elem.value=_this.numberToText(val);_this.onValueChanged()});_this.input.on('keydown',function(e){var keyCode=e.keyCode||e.which;if(_this.buttonHoldData&&(keyCode===38||keyCode===40)){e.stopImmediatePropagation();e.preventDefault();return}
if(keyCode===38)
_this.onArrowUp(!0,e);else if(keyCode===40)
_this.onArrowDown(!0,e);else if(keyCode===13&&typeof _this.onConfirmFunc==='function'){_this.onConfirmFunc.call(_this,e)}else if(keyCode===27&&typeof _this.onCancelFunc==='function'){_this.onCancelFunc.call(_this,e)}});_this.input.on('keyup',function(e){_this.onValueChanged()});_this.input.on('paste cut',function(e){setTimeout(function(){return _this.input.trigger("change")},0)});(0,jquery_19.default)('button',_this._elem).first().bind('mousedown touchstart',_this.onArrowUp.bind(_this,!1));(0,jquery_19.default)('button',_this._elem).last().bind('mousedown touchstart',_this.onArrowDown.bind(_this,!1));return _this}
SizeSelector.toCSS=function(size){var css="";if((typeof(size)==="object")&&size.length){for(var i=0;i<Math.min(size.length,4);i++){css+=(css?" ":"")+size[i]+"px"}}else{css=size+"px"}
return css};SizeSelector.prototype.buildInit=function(data,fields){var _this=this;if("unitConverter" in data&&data.unitConverter)
this.unitConverter=data.unitConverter;if('unitsWidth' in data&&data.unitsWidth)
this.unitsWidth=data.unitsWidth;if('unitsDropdownAlignment' in data&&data.unitsDropdownAlignment)
this.setUnitsDropdownAlignment(data.unitsDropdownAlignment);if('units' in data)
this.setUnitsVisible(data.units?!0:!1);if('min' in data)
this.minValue=parseFloat(''+data.min);if('max' in data&&data.max)
this.maxValue=data.max;if('step' in data&&data.step)
this.step=data.step;if('repeat' in data)
this.noRepeat=!data.repeat;if('noFixedWidth' in data)
this.setFixedWidth(!data.noFixedWidth);if('fixedWidth' in data&&data.fixedWidth)
this.setFixedWidth(data.fixedWidth);if('small' in data)
this.setSmall(data.small?!0:!1);if('hideSpinner' in data)
this.setSpinnerVisible(data.hideSpinner?!1:!0,data.units?!0:!1);if(data.value)
this.setValue(data.value);if(data.units)
this.setUnits(data.units);if(data.precision)
this.setPrecision(data.precision);if(data.clearTrailingZeroes)
this.setClearTrailingZeroes(data.clearTrailingZeroes);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.input.on('change',function(){func.call(el,fields)})})(this,data.change)}};SizeSelector.prototype.setActive=function(active){if(this.isActive==active)
return;this.isActive=active;if(active){this._elem.addClass('wb-size-selector-active')}else{this._elem.removeClass('wb-size-selector-active')}};SizeSelector.prototype.setSmall=function(small){this.isSmall=small;if(small){this.groupElem.addClass('input-group-sm')}else{this.groupElem.removeClass('input-group-sm')}
if(this.unitsDropdown)
this.unitsDropdown.setSmall(small);};SizeSelector.prototype.setSpinnerVisible=function(visible,unitsVisible){if(unitsVisible===void 0){unitsVisible=!0}
this.isSpinnerVisible=visible;this.upDownButtons.css({display:visible?'':'none'});if(visible){this._elem.removeClass('wb-size-selector-ns')}else{this._elem.addClass('wb-size-selector-ns');if(!unitsVisible){this.input.removeClass('form-control-with-suffix')}}
return this};SizeSelector.prototype.setFixedWidth=function(fixed){if(typeof fixed==='number'){this.fixedWidth=fixed;this.isFixed=!0;this.groupElem.removeClass("fixed-width")}else{this.isFixed=fixed;if(fixed)
this.groupElem.addClass("fixed-width");else this.groupElem.removeClass("fixed-width")}
this.groupElem.css({width:(this.fixedWidth>0&&this.isFixed)?(this.fixedWidth+'px'):''});return this};SizeSelector.prototype.setUnitsVisible=function(visible){if(this.unitsVisible==visible)
return this;this.unitsVisible=visible;if(visible&&this.currentUnit){this.upDownButtons.before(this.unitsElem)}else{this.unitsElem.detach()}
return this};SizeSelector.prototype.setUnitsDropdownAlignment=function(alignment){this.unitsDropdownAlignment=alignment;if(this.unitsDropdown)
this.unitsDropdown.setAlignment(alignment);};SizeSelector.prototype.setNoRepeat=function(noRepeat){this.noRepeat=noRepeat;return this};SizeSelector.prototype.onArrowUp=function(isKeyboard,e){if(!this._enabled)
return!1;e.stopImmediatePropagation();e.preventDefault();this.onButtonPress(isKeyboard,1);return!0};SizeSelector.prototype.onArrowDown=function(isKeyboard,e){if(!this._enabled)
return!1;e.stopImmediatePropagation();e.preventDefault();this.onButtonPress(isKeyboard,-1);return!0};SizeSelector.prototype.getValueAsObject=function(){var val=this.input.val()*1;val=Math.min(Math.max(isNaN(val)?0:val,this.getCurrentUnitMinValue()),this.getCurrentUnitMaxValue());return{value:val,unit:this.currentUnit}};SizeSelector.prototype.applyUnitToValue=function(value,unit){if(!unit)
return value;if("fixedValue" in unit)
return unit.fixedValue;if("suffix" in unit&&unit.suffix!=="")
return value+unit.suffix;return value};SizeSelector.prototype.modifyByStep=function(direction){var val=this.input.val()*1+this.getCurrentUnitStep()*direction;var min=this.getCurrentUnitMinValue();var max=this.getCurrentUnitMaxValue();if(isNaN(val))
val=Math.min(Math.max(0,min),max);else if(val<min)
val=(!this.noRepeat&&direction)?max:min;else if(val>max)
val=(!this.noRepeat&&direction)?min:max;this.input.val(this.numberToText(val));this.input.trigger('change')};SizeSelector.prototype.onButtonPress=function(isKeyboard,direction){if(this.buttonHoldData)
this.onButtonRelease();this.buttonHoldData={nextTime:500,direction:direction,eventHandler:this.onButtonRelease.bind(this),timeoutHandler:this.onButtonHold.bind(this)};(0,jquery_19.default)(document.body).on(isKeyboard?"keyup":"mouseup touchend touchcancel",this.buttonHoldData.eventHandler);this.buttonHoldData.timer=setTimeout(this.buttonHoldData.timeoutHandler,this.buttonHoldData.nextTime);this.modifyByStep(direction)};SizeSelector.prototype.onButtonHold=function(){if(!this.buttonHoldData)
return;this.modifyByStep(this.buttonHoldData.direction);this.buttonHoldData.nextTime=Math.max(10,this.buttonHoldData.nextTime*0.66);this.buttonHoldData.timer=setTimeout(this.buttonHoldData.timeoutHandler,this.buttonHoldData.nextTime)};SizeSelector.prototype.onButtonRelease=function(e){if(!this.buttonHoldData)
return;if(e&&e.type==='keyup'){var keyCode=e.keyCode||e.which;if(keyCode!==38&&keyCode!==40)
return}
if(e){e.stopImmediatePropagation();e.preventDefault()}(0,jquery_19.default)(document.body).off("keyup mouseup touchend touchcancel",this.buttonHoldData.eventHandler);clearTimeout(this.buttonHoldData.timer);this.buttonHoldData=null};SizeSelector.prototype.setMinValue=function(minValue){if(minValue>=this.maxValue)
return this;this.minValue=minValue;return this};SizeSelector.prototype.setMaxValue=function(maxValue){if(maxValue<=this.minValue)
return this;this.maxValue=maxValue;return this};SizeSelector.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1;if(this.unitsDropdown)
this.unitsDropdown.setEnabled(enabled);if(this._enabled){this.input.removeClass('disabled');this.input.removeAttr('disabled');(0,jquery_19.default)('button',this._elem).removeClass('disabled');this.unitsElem.removeClass('disabled')}else{this.input.addClass('disabled');this.input.attr({disabled:'disabled'});(0,jquery_19.default)('button',this._elem).addClass('disabled');this.unitsElem.addClass('disabled')}};SizeSelector.prototype.getEnabled=function(){return this._enabled};SizeSelector.prototype.setCss=function(css){this._elem.css(css);return this};SizeSelector.prototype.setUnits=function(units){var oldValue=this.getValueAsObject();if(units===null)
this.units=[];else if(typeof units==="string")
this.units=[{suffix:'',label:units}];else this.units=jquery_19.default.extend([],units);if(this.units.length){if(this.currentUnit){if('suffix' in this.currentUnit)
this.currentUnit=this.findUnitBySuffix(this.currentUnit.suffix);else if('fixedValue' in this.currentUnit)
this.currentUnit=this.findUnitByFixedValue(this.currentUnit.fixedValue);else this.currentUnit=null}
if(!this.currentUnit)
this.currentUnit=this.findUnitBySuffix('');}else this.currentUnit=null;this.updateUnitsBox();if(typeof this.unitConverter==="function"&&(!this.currentUnit||!("fixedValue" in this.currentUnit))&&!this.compareUnits(oldValue.unit,this.currentUnit))
oldValue.value=this.unitConverter.call(this,oldValue.value,oldValue.unit,this.currentUnit);this.setValue(this.applyUnitToValue(oldValue.value,this.currentUnit));return this};SizeSelector.prototype.compareUnits=function(unitA,unitB){if(!unitA&&!unitB)
return!0;if(!unitA||!unitB)
return!1;if("fixedValue" in unitA){if(!("fixedValue" in unitB))
return!1;if(unitA.fixedValue!==unitB.fixedValue)
return!1}else{if("fixedValue" in unitB)
return!1;if(unitA.suffix!==unitB.suffix)
return!1}
return!0};SizeSelector.prototype.getPrecision=function(){return this.precision};SizeSelector.prototype.setPrecision=function(precision){this.precision=precision;this.setValue(this.getValue())};SizeSelector.prototype.getClearTrailingZeroes=function(){return this.clearTrailingZeroes};SizeSelector.prototype.setClearTrailingZeroes=function(clear){this.clearTrailingZeroes=clear;this.setValue(this.getValue())};SizeSelector.prototype.setUnitsWidth=function(width){this.unitsWidth=width;this.updateUnitsElemWidth();if(this.unitsDropdown)
this.unitsDropdown.getElem().css("width",this.unitsWidth);return this};SizeSelector.prototype.getValue=function(){var res=parseFloat(this.input.val().replace(",","."));var num=(isNaN(res)?this.getCurrentUnitMinValue()||0:res);return this.applyUnitToValue(num,this.currentUnit)};SizeSelector.prototype.setValue=function(value){if(value===void 0){value=0}
var val=0,suffix='';if(value===null)
value=0;else if(typeof value==="object"&&'length' in value)
value=value.length?value[0]:0;if(typeof value==="number"){val=value}else{if(this.findUnitByFixedValue(value,!1)){this.selectUnitByFixedValue(value);suffix=null}else{var matches=value.match(/^(-?[0-9]+(?:\.[0-9]+)?)(.*)$/i);if(matches){value=matches[1];suffix=matches[2]}
val=parseFloat(value)}}
if(suffix!==null)
this.selectUnitBySuffix(suffix);if(isNaN(val))
val=this.getCurrentUnitMinValue();this.input.val(this.numberToText(val))};SizeSelector.prototype.selectUnitBySuffix=function(suffix){if(this.units.length<=1)
return;this.currentUnit=this.findUnitBySuffix(suffix);this.updateUnitsBox(!1)};SizeSelector.prototype.selectUnitByFixedValue=function(fixedValue){if(this.units.length<=1)
return;this.currentUnit=this.findUnitByFixedValue(fixedValue);this.updateUnitsBox(!1)};SizeSelector.prototype.updateUnitsElemWidth=function(){if(this.unitsElem)
this.unitsElem.css("width",(this.currentUnit&&"fixedValue" in this.currentUnit)?"":this.unitsWidth);};SizeSelector.prototype.updateUnitsBox=function(updateDropdownOptions){var _this=this;if(updateDropdownOptions===void 0){updateDropdownOptions=!0}
if(!this.unitsElem||!this.unitsElem.length)
return;if(this.units.length<=1){this.unitsElem.removeClass("has-dropdown");var label="";if(this.currentUnit){if(this.currentUnit.label)
label=this.currentUnit.label;else if("suffix" in this.currentUnit)
label=this.currentUnit.suffix;else if("fixedValue" in this.currentUnit)
label=this.currentUnit.fixedValue}
if(label==="")
this.unitsElem.detach();else{if(this.unitsDropdown)
this.unitsDropdown.getElem().detach();this.unitsElem.text(label);if(this.unitsVisible)
this.upDownButtons.before(this.unitsElem);}}else{if(!this.currentUnit)
this.currentUnit=this.units[0];this.unitsElem.addClass("has-dropdown");if(!this.unitsDropdown||!this.unitsElem[0].contains(this.unitsDropdown.getElem()[0]))
this.unitsElem.html("");if(!this.unitsDropdown){var fields={};Service_3.Service.UIBuilder.buildLayout({type:"DropdownBox",id:"unitsDropdown",css:{width:this.unitsWidth},enabled:this._enabled,alignment:this.unitsDropdownAlignment,small:this.isSmall,change:function(){if(!_this.unitsDropdown)
return;var oldValue=_this.getValueAsObject();var selectedItem=_this.unitsDropdown.getSelectedItem();var selectedOption=selectedItem&&selectedItem.getOriginal();_this.currentUnit=selectedOption&&selectedOption.unit;if(!_this.currentUnit){_this.currentUnit=_this.findUnitBySuffix('');_this.updateUnitsBox(!1)}else _this.updateMainInputs();_this.updateUnitsElemWidth();if(typeof _this.unitConverter==="function"&&(!_this.currentUnit||!("fixedValue" in _this.currentUnit))&&!_this.compareUnits(oldValue.unit,_this.currentUnit))
oldValue.value=_this.unitConverter.call(_this,oldValue.value,oldValue.unit,_this.currentUnit);_this.setValue(_this.applyUnitToValue(oldValue.value,_this.currentUnit));_this.modifyByStep(0)}},this.unitsElem,fields);this.unitsDropdown=fields.unitsDropdown;updateDropdownOptions=!0}
if(this.unitsDropdown){if(!this.unitsElem[0].contains(this.unitsDropdown.getElem()[0])){this.unitsElem.append(this.unitsDropdown.getElem());updateDropdownOptions=!0}
if(updateDropdownOptions){var options=[];for(var _i=0,_a=this.units;_i<_a.length;_i++){var unit=_a[_i];if("suffix" in unit)
options.push({id:"s-"+unit.suffix,name:unit.label||unit.suffix,unit:unit});else if("fixedValue" in unit)
options.push({id:"f-"+unit.fixedValue,name:unit.label||unit.fixedValue,unit:unit})}
this.unitsDropdown.reload(options)}
if("suffix" in this.currentUnit){this.unitsDropdown.setValue("s-"+this.currentUnit.suffix)}else if("fixedValue" in this.currentUnit){this.unitsDropdown.setValue("f-"+this.currentUnit.fixedValue)}}}
this.updateUnitsElemWidth();this.updateMainInputs()};SizeSelector.prototype.updateMainInputs=function(){if(this.currentUnit&&'fixedValue' in this.currentUnit){if(this.groupElem[0].contains(this.input[0])){this.input.detach();this.upDownButtons.detach();if(this.unitsDropdown)
this.unitsDropdown.getElem().addClass("wb-max-width");}}else{if(!this.groupElem[0].contains(this.input[0])){this.groupElem.prepend(this.input,this.upDownButtons);if(this.unitsDropdown)
this.unitsDropdown.getElem().removeClass("wb-max-width");}}};SizeSelector.prototype.findUnitBySuffix=function(suffix,returnDefaultIfNotFound){if(returnDefaultIfNotFound===void 0){returnDefaultIfNotFound=!0}
var defaultUnit=null;for(var _i=0,_a=this.units;_i<_a.length;_i++){var unit=_a[_i];if('suffix' in unit){if(unit.suffix===suffix)
return unit;if(unit.suffix==='')
defaultUnit=unit}}
return returnDefaultIfNotFound?(defaultUnit||(this.units.length?this.units[0]:null)):null};SizeSelector.prototype.findUnitByFixedValue=function(fixedValue,returnDefaultIfNotFound){if(returnDefaultIfNotFound===void 0){returnDefaultIfNotFound=!0}
var defaultUnit=null;for(var _i=0,_a=this.units;_i<_a.length;_i++){var unit=_a[_i];if('fixedValue' in unit){if(unit.fixedValue===fixedValue)
return unit}else if('suffix' in unit&&unit.suffix==='')
defaultUnit=unit}
return returnDefaultIfNotFound?(defaultUnit||(this.units.length?this.units[0]:null)):null};SizeSelector.prototype.getCurrentUnit=function(){return this.currentUnit};SizeSelector.prototype.getCurrentUnitMinValue=function(){return(this.currentUnit&&'min' in this.currentUnit&&typeof this.currentUnit.min==="number")?this.currentUnit.min:this.minValue};SizeSelector.prototype.getCurrentUnitMaxValue=function(){return(this.currentUnit&&"max" in this.currentUnit&&typeof this.currentUnit.max==="number")?this.currentUnit.max:this.maxValue};SizeSelector.prototype.getCurrentUnitPrecision=function(){return(this.currentUnit&&"precision" in this.currentUnit&&typeof this.currentUnit.precision==="number")?this.currentUnit.precision:this.precision};SizeSelector.prototype.getCurrentUnitStep=function(){return(this.currentUnit&&"step" in this.currentUnit&&typeof this.currentUnit.step==="number")?this.currentUnit.step:this.step};SizeSelector.prototype.roundValue=function(value){var mul=Math.pow(10,this.getCurrentUnitPrecision());return Math.round(value*mul)/mul};SizeSelector.prototype.numberToText=function(val){var valSrt=this.roundValue(val).toFixed(this.getCurrentUnitPrecision());if(this.clearTrailingZeroes)
valSrt=valSrt.replace(/\.0+$/,'').replace(/(\.[0-9]*?)0+$/,'$1');return valSrt};SizeSelector.prototype.focus=function(selectAll){if(selectAll===void 0){selectAll=!1}
this.input.focus();if(selectAll)
this.input.select();};SizeSelector.prototype.on=function(event,callback){if(event==='confirm'){this.onConfirmFunc=callback}else if(event==='cancel'){this.onCancelFunc=callback}else _super.prototype.on.call(this,event,callback);return this};SizeSelector.prototype.onChange=function(func){var _this=this;this.input.on('change',function(){return func.call(_this,_this.getValue())});var val=this.input.val();var valTimeout=0;this.input.on('keyup',function(){var currVal=_this.input.val();if(val!=currVal){if(valTimeout)
clearTimeout(valTimeout);valTimeout=setTimeout(function(){val=currVal;func.call(_this,_this.getValue())},800)}});return this};SizeSelector.prototype.bind=function(eventType,eventData,preventBubble){if(preventBubble===void 0){preventBubble=!1}
this.input.bind(eventType,eventData,preventBubble)};SizeSelector.prototype.unbind=function(eventType){this.input.unbind(eventType)};SizeSelector.supportsMultipleObjectBindings=function(){return!1};SizeSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("unitConverter" in options)
this.unitConverter=options.unitConverter;if("unitsWidth" in options)
this.setUnitsWidth(options.unitsWidth);if('unitsDropdownAlignment' in options&&options.unitsDropdownAlignment)
this.setUnitsDropdownAlignment(options.unitsDropdownAlignment);if("min" in options)
this.setMinValue(options.min);if("max" in options)
this.setMaxValue(options.max);if("step" in options)
this.step=options.step;this.noRepeat=!("repeat" in options)||!options.repeat;if("noFixedWidth" in options)
this.setFixedWidth(!options.noFixedWidth);if('fixedWidth' in options&&options.fixedWidth)
this.setFixedWidth(options.fixedWidth);if("small" in options)
this.setSmall(!!options.small);if('hideSpinner' in options)
this.setSpinnerVisible(options.hideSpinner?!1:!0,options.units?!0:!1);if("units" in options){this.setUnitsVisible(!!options.units);this.setUnits(options.units)}
if("precision" in options)
this.setPrecision(options.precision);if("clearTrailingZeroes" in options)
this.setClearTrailingZeroes(options.clearTrailingZeroes);if("css" in options)
this.setCss(options.css);};return SizeSelector}(UIComponent_11.UIComponent));exports.SizeSelector=SizeSelector});define("js/ui/ContainmentControl",["require","exports","js/UIComponent"],function(require,exports,UIComponent_12){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ContainmentControl=exports.SizeType=void 0;var SizeType;(function(SizeType){SizeType[SizeType.Auto=0]="Auto";SizeType[SizeType.Contain=1]="Contain";SizeType[SizeType.Cover=2]="Cover"})(SizeType||(exports.SizeType=SizeType={}));var ContainmentControl=(function(_super){__extends(ContainmentControl,_super);function ContainmentControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.value=SizeType.Contain;var elem=_this._elem[0];elem.className="wb-containment-ctrl";var wrapper=document.createElement("div");wrapper.className="wb-wrapper";_this.containButton=document.createElement("div");_this.containButton.title=__("Fit");_this.containButton.addEventListener("click",function(){return _this.onValueChange(SizeType.Contain)});wrapper.appendChild(_this.containButton);_this.coverButton=document.createElement("div");_this.coverButton.title=__("Fill");_this.coverButton.addEventListener("click",function(){return _this.onValueChange(SizeType.Cover)});wrapper.appendChild(_this.coverButton);elem.appendChild(wrapper);_this.onValueChange(_this.value,!0);return _this}
ContainmentControl.prototype.buildInit=function(_data,_fields){};ContainmentControl.prototype.onValueChange=function(value,force){if(force===void 0){force=!1}
if(this.value===value&&!force)
return;var changed=this.value!==value;this.value=value;if(value==SizeType.Contain){this.containButton.className="wb-contain-ctrl active";this.coverButton.className="wb-cover-ctrl"}else if(value==SizeType.Cover){this.containButton.className="wb-contain-ctrl";this.coverButton.className="wb-cover-ctrl active"}
if(changed){if(this.onChange)
this.onChange.call(this,value);this.onValueChanged()}};ContainmentControl.prototype.getValue=function(){return this.value};ContainmentControl.prototype.setValue=function(value){this.onValueChange(value)};return ContainmentControl}(UIComponent_12.UIComponent));exports.ContainmentControl=ContainmentControl});define("js/util/ChangeUpdateUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.waitForChangeEndToUpdate=exports.ChangeUpdateState=void 0;var ChangeUpdateState=(function(){function ChangeUpdateState(func,elem,timeout){if(timeout===void 0){timeout=800}
this.func=func;this.elem=elem;this.timeout=timeout}
return ChangeUpdateState}());exports.ChangeUpdateState=ChangeUpdateState;function waitForChangeEndToUpdate(state){if(state.timerId)
clearTimeout(state.timerId);state.timerId=setTimeout(function(){return state.func(state.elem)},state.timeout)}
exports.waitForChangeEndToUpdate=waitForChangeEndToUpdate});define("js/TextField",["require","exports","jquery","js/UIComponent"],function(require,exports,jquery_20,UIComponent_13){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TextField=void 0;var TextField=(function(_super){__extends(TextField,_super);function TextField(text,placeholder,textArea,resizable,prepend,append,ace){if(textArea===void 0){textArea=!1}
if(resizable===void 0){resizable=!1}
if(ace===void 0){ace=!1}
var _this=_super.call(this)||this;_this.textArea=!1;_this.isAceEditor=!1;_this.inputField=null;_this.inputTextArea=null;_this.aceEditorCont=null;_this.aceEditor=null;_this.inputIsRoot=!1;_this.isWrapped=!1;_this.aceMode='html';_this.setIsAceEditor(ace);_this.setTextArea(textArea,!0);if(text)
_this.setText(text);if(placeholder)
_this.setPlaceholder(placeholder);_this.setResizable(resizable);if(prepend||append){_this.inputIsRoot=!1;_this._elem=(0,jquery_20.default)('<div>');_this._elem.append(_this.input);if(prepend){_this._elem.addClass("input-prepend");_this._elem.prepend(_this.prepareAdOn(prepend))}
if(append){_this._elem.addClass("input-append");_this._elem.append(_this.prepareAdOn(append))}}else{_this.inputIsRoot=!0;_this._elem=_this.input}
_this.elem=_this._elem;_this._elem.addClass('wb-textfield-ctrl');return _this}
TextField.prototype.buildInit=function(data,fields){var _this=this;if(data.ace)
this.setIsAceEditor(data.ace?!0:!1);if(data.aceMode)
this.aceMode=data.aceMode;this.setTextArea(data.textArea?!0:!1);if(data.placeholder)
this.setPlaceholder(data.placeholder);this.setResizable(data.resizable?data.resizable:!1);if(data.value)
this.setText(data.value);else if(data.text)
this.setText(data.text);if(data.password)
this.setAsPassword(data.password?!0:!1);if(data.inputType)
this.setType(data.inputType);if(data.title)
this.setTitle(data.title);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.on('change',function(){func.call(el,fields)})})(this,data.change)}};TextField.prototype.initAceEditor=function(){var _this=this;if(this.aceEditor)
return;var mode='ace/mode/html';if(this.aceMode=='htaccess'){mode='ace/mode/apache_conf'}
this.aceEditor=window.ace.edit(this.aceEditorCont.get(0));this.aceEditor.setTheme('ace/theme/chrome');this.aceEditor.getSession().setMode(mode);this.aceEditor.$blockScrolling=Infinity;this.aceEditor.resize(!0);this.aceEditor.getSession().setUseWrapMode(!0);this.aceEditor.on('change',function(){_this.input.trigger("change")})};TextField.prototype.setIsAceEditor=function(isAceEditor){this.isAceEditor=isAceEditor};TextField.prototype.setTextArea=function(textArea,force){var _this=this;if(force===void 0){force=!1}
if(this.textArea===textArea&&!force)
return;this.textArea=!!textArea;var newInput;var lastValue='';if(textArea){if(this.isAceEditor){if(!this.aceEditorCont){this.aceEditorCont=(0,jquery_20.default)('<div>').addClass('wb-ace-editor-container').css('height',this.elem.height());this.initAceEditor();this.aceEditorCont.data('ace',this.aceEditor)}
newInput=this.aceEditorCont}else{if(!this.inputTextArea){this.inputTextArea=(0,jquery_20.default)('<textarea>').addClass('form-control').on("change keyup",function(e){_this.onValueChanged();var value=_this.input.val();if(e.type=='keyup'&&lastValue!=value){_this.input.trigger("change")}
lastValue=value}).on("paste cut",function(){setTimeout(function(){return _this.input.trigger("change")},0)})}
newInput=this.inputTextArea}}else{if(!this.inputField){this.inputField=(0,jquery_20.default)('<input>').addClass('form-control').attr('type','text').on("change keyup",function(e){_this.onValueChanged();var value=_this.input.val();if(e.type=='keyup'&&lastValue!=value){_this.input.trigger("change")}
lastValue=value}).on("paste cut",function(){setTimeout(function(){return _this.input.trigger("change")},0)})}
newInput=this.inputField}
if(this.aceEditorCont){this.aceEditorCont.detach()}
if(this.input){this.input.before(newInput);this.input.detach()}
this.input=newInput;if(this.inputIsRoot)
this._elem=this.elem=this.input};TextField.prototype.setResizable=function(resizable){if(this.textArea&&!this.isAceEditor){if(!resizable){this.input.css({resize:'none'})}else if(resizable==='vertical'||resizable==='horizontal'||resizable==='both'){this.input.css({resize:resizable})}else if(resizable===!0){this.input.css({resize:'both'})}}};TextField.prototype.setName=function(name){if(this.isAceEditor){this.aceEditorCont.attr('name',name)}else{this.input.attr('name',name)}};TextField.prototype.setText=function(text){return this.setValue(text)};TextField.prototype.getText=function(){return this.getValue()};TextField.prototype.setValue=function(text){if(this.isAceEditor){this.aceEditor.setValue(''+(text!==null&&text!==void 0?text:''));this.aceEditor.clearSelection();this.aceEditor.blur()}else{this.input.val(text)}
return this};TextField.prototype.getValue=function(){if(this.isAceEditor){return this.aceEditor.getValue()}else{return this.input.val()}};TextField.prototype.setPlaceholder=function(text){if(this.isAceEditor)
return;this.input.attr('placeholder',text);return this};TextField.prototype.getPlaceholder=function(){if(this.isAceEditor)
return'';return this.input.attr('placeholder')};TextField.prototype.setAsPassword=function(asPassword){if(!this.textArea&&!this.isAceEditor){this.input.attr('type',(asPassword?'password':'text'))}
return this};TextField.prototype.setType=function(type){if(!this.textArea&&!this.isAceEditor){this.input.attr('type',type)}
return this};TextField.prototype.setMinWidth=function(minWidth){this.input.css("min-width",minWidth);return this};TextField.prototype.setMinHeight=function(minWHeight){if(this.textArea){this.input.css("min-height",minWHeight)}else if(this.isAceEditor){this.aceEditorCont.css("min-height",minWHeight)}
return this};TextField.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);if(this.isAceEditor){this.aceEditor.setReadOnly(!enabled)}else{if(enabled){this.input.removeClass('disabled');this.input.removeAttr('disabled')}else{this.input.addClass('disabled');this.input.attr('disabled','disabled')}}
return this};TextField.prototype.focus=function(){if(this.isAceEditor){this.aceEditor.focus()}else{this.input.focus()}};TextField.prototype.insertAtCursor=function(text){if(this.isAceEditor){var aceEditor=this.aceEditor;aceEditor.getSession().replace(aceEditor.getSelection().getRange(),text)}else{var el=this.input.get(0),val=el.value;el.focus();if(el.selectionStart!==undefined&&el.selectionStart!==null&&el.selectionEnd!==null){el.value=val.substring(0,el.selectionStart)+text+val.substring(el.selectionEnd)}else if(typeof el.createTextRange){var rng=el.createTextRange();if(rng)
rng.text=text}else{el.value=val+text}}};TextField.prototype.prepareAdOn=function(el){var wrp=null;if(typeof(el)!=="object"||typeof(el.hasClass)!=="function"||!el.className){wrp=(0,jquery_20.default)('<span class="add-on"></span>');wrp.append(el)}else{wrp=(0,jquery_20.default)(el);if(!el.hasClass("add-on")&&!el.hasClass("btn")){wrp.addClass("add-on")}}
return wrp};TextField.prototype.onEnter=function(func){this.input.on('keydown',function(e){if(e.keyCode==10||e.keyCode==13)
func();});return this};TextField.prototype.prepareForPropertyPanel=function(){if(!this.isWrapped){this.isWrapped=!0;this.inputIsRoot=!1;var oriElem=this._elem;this._elem=this.elem=(0,jquery_20.default)('<div>');this._elem.append(oriElem)}
return _super.prototype.prepareForPropertyPanel.call(this)};TextField.supportsMultipleObjectBindings=function(){return!1};TextField.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("ace" in options)
this.setIsAceEditor(!!options.ace);if("textArea" in options)
this.setTextArea(!!options.textArea);if("placeholder" in options)
this.setPlaceholder(options.placeholder);if("resizable" in options)
this.setResizable(options.resizable);if("password" in options)
this.setAsPassword(!!options.password);if("inputType" in options)
this.setType(options.inputType);if("title" in options)
this.setTitle(options.title);if("minWidth" in options)
this.setMinWidth(options.minWidth);if("minHeight" in options)
this.setMinHeight(options.minHeight);};return TextField}(UIComponent_13.UIComponent));exports.TextField=TextField});define("js/element/ElementBackground",["require","exports","js/BackgroundControl","jquery"],function(require,exports,BackgroundControl_1,jquery_21){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.apply=exports.dispose=exports.isFixedBgSupported=void 0;function isIOS(){return('ontouchstart' in document.documentElement)&&(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints>0)}
function isFixedBgSupported(){return(!isIOS()||window.MSStream)}
exports.isFixedBgSupported=isFixedBgSupported;function dispose(cont){var bgVideoElem=cont.children('.wb_video_background');(0,BackgroundControl_1.disposeVideoBackground)(bgVideoElem)}
exports.dispose=dispose;function apply(elem,bgData,cont,hardReset,videoStyleClass,borderRadius){if(hardReset===void 0){hardReset=!1}
if(videoStyleClass===void 0){videoStyleClass=''}
if(borderRadius===void 0){borderRadius=null}
if(!bgData||typeof(bgData)!=='object')
return;var background=jquery_21.default.extend(!0,{},bgData);var css=background.css;if(css.background&&background.image&&background.image!=='none'){css.background=css.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(background.image)+'")')}
if(!isFixedBgSupported()){if(css['background-attachment']&&css['background-attachment']=='fixed'){css['background-attachment']='scroll'}
if(css.background){css.background=css.background.replace(/ fixed( |$)/i,' scroll$1')}}
var bgElem=cont.children('.wb_detach_background');var bgVideoElem=cont.children('.wb_video_background');if(background.isVideo&&background.image){bgElem.hide();if(!bgVideoElem.length){bgVideoElem=(0,jquery_21.default)('<div>').addClass('wb_video_background').attr('id',elem.id+'_video_background');if(videoStyleClass)
bgVideoElem.addClass(videoStyleClass);cont.prepend(bgVideoElem)}
bgVideoElem.show();(0,BackgroundControl_1.runVideoByBackground)(background,bgVideoElem,elem,hardReset);cont.css('background-color',background.color?background.color:'');if(typeof background.opacity==='number'){bgVideoElem.css('opacity',(background.opacity/100))}}else if(background.css&&typeof(background.css)==='object'){(0,BackgroundControl_1.runVideoByBackground)(null,bgVideoElem,elem);bgVideoElem.hide();if(!bgElem.length){bgElem=(0,jquery_21.default)('<div>').addClass('wb_detach_background').css({position:'absolute',width:'100%',height:'100%',top:0,left:0});cont.prepend(bgElem)}
bgElem.show();var css_1=jquery_21.default.extend(!0,{},background.css);css_1.background=css_1.background.replace(background.color,'transparent');bgElem.css(css_1);cont.css('background-color',background.color?background.color:'')}
if(elem&&borderRadius&&borderRadius.css){bgElem.css(borderRadius.css);bgVideoElem.css(borderRadius.css)}}
exports.apply=apply});define("js/FlexLayout",["require","exports","js/UIContainer"],function(require,exports,UIContainer_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FlexLayout=void 0;var DEFAULT_JUSTIFY_CONTENT='flex-start';var DEFAULT_ALIGN_ITEMS='stretch';var DEFAULT_WRAP='nowrap';var FlexLayout=(function(_super){__extends(FlexLayout,_super);function FlexLayout(direction,justifyContent,alignItems,spacing,tagType){if(direction===void 0){direction='row'}
if(justifyContent===void 0){justifyContent=DEFAULT_JUSTIFY_CONTENT}
if(alignItems===void 0){alignItems=DEFAULT_ALIGN_ITEMS}
if(spacing===void 0){spacing='auto'}
var _this=_super.call(this,(tagType==='%inherit%')?tagType:'div')||this;_this.direction=direction;_this.justifyContent=justifyContent;_this.alignItems=alignItems;_this.spacing=spacing;_this.wrap=DEFAULT_WRAP;_this.leftSidebarPairWidth=0;if(tagType==='%inherit%')
return _this;_this.rawElem=_this.getElem()[0];_this.setDirection(direction,!0);_this.setJustifyContent(justifyContent,!0);_this.setAlignItems(alignItems,!0);_this.setWrap(_this.wrap,!0);_this.setSpacing(spacing,!0);return _this}
FlexLayout.prototype.buildInit=function(data,fields){if(data.direction)
this.setDirection(data.direction);if(data.justifyContent)
this.setJustifyContent(data.justifyContent);if(data.alignItems)
this.setAlignItems(data.alignItems);if(data.wrap)
this.setWrap(data.wrap);if(data.spacing)
this.setSpacing(data.spacing);if(data.leftSidebarPair)
this.setLeftSidebarPair(data.leftSidebarPair);};FlexLayout.prototype.setDirection=function(direction,force){if(force===void 0){force=!1}
if(this.direction===direction&&!force)
return this;this.direction=direction;if(this.direction=='row'){this.getElem().addClass('wb-ctrl-flex-row').removeClass('wb-ctrl-flex-col')}else{this.getElem().addClass('wb-ctrl-flex-col').removeClass('wb-ctrl-flex-row')}
this.updateSpacing();return this};FlexLayout.prototype.setJustifyContent=function(justifyContent,force){if(force===void 0){force=!1}
if(this.justifyContent===justifyContent&&!force)
return this;this.justifyContent=justifyContent;if(this.justifyContent==DEFAULT_JUSTIFY_CONTENT){this.rawElem.style.justifyContent=''}else{this.rawElem.style.justifyContent=this.justifyContent}
return this};FlexLayout.prototype.setAlignItems=function(alignItems,force){if(force===void 0){force=!1}
if(this.alignItems===alignItems&&!force)
return this;this.alignItems=alignItems;if(this.alignItems==DEFAULT_ALIGN_ITEMS){this.rawElem.style.alignItems=''}else{this.rawElem.style.alignItems=this.alignItems}
return this};FlexLayout.prototype.setWrap=function(wrap,force){if(force===void 0){force=!1}
if(this.wrap===wrap&&!force)
return this;this.wrap=wrap;if(this.wrap==DEFAULT_WRAP){this.rawElem.style.flexWrap=''}else{this.rawElem.style.flexWrap=this.wrap}
return this};FlexLayout.prototype.setSpacing=function(spacing,force){if(force===void 0){force=!1}
if(this.spacing===spacing&&!force)
return this;this.spacing=spacing;this.updateSpacing();return this};FlexLayout.prototype._appendChild=function(child){_super.prototype._appendChild.call(this,child);this.updateSpacing();this.finishLeftSidebarPair()};FlexLayout.prototype._detachChild=function(child){_super.prototype._detachChild.call(this,child);this.updateSpacing()};FlexLayout.prototype.updateSpacing=function(){this._elem.removeClass('wb-ctrl-spacing-field-default wb-ctrl-spacing-field-default-sm');if(this.spacing=='auto'){return}else if(this.spacing=='field-default'){this._elem.addClass('wb-ctrl-spacing-field-default');return}else if(this.spacing=='field-default-sm'){this._elem.addClass('wb-ctrl-spacing-field-default-sm');return}
var items=this.rawElem.children;var idx=0;for(var i=0,c=items.length;i<c;i++){var item=items[i];if(item.style.display=='none')
continue;if(this.direction=='row'){item.style.marginLeft=(idx>0)?(this.spacing+'px'):'';item.style.marginTop=''}else{item.style.marginLeft='';item.style.marginTop=(idx>0)?(this.spacing+'px'):''}
idx++}};FlexLayout.prototype.setLeftSidebarPair=function(sidebarWidth){this.getElem().addClass('wb-ctrl-flex-left-sidebar');this.leftSidebarPairWidth=sidebarWidth;return this};FlexLayout.prototype.finishLeftSidebarPair=function(){if(this.leftSidebarPairWidth<=0||this.rawElem.children.length!=2)
return;this.rawElem.children[0].style.maxWidth=this.leftSidebarPairWidth+'px';this.setItemFlex(0,0,0,this.leftSidebarPairWidth+'px').setItemFlex(1,1,1)};FlexLayout.prototype.setItemFlex=function(idx,grow,shrink,basis){if(basis===void 0){basis='auto'}
if(idx<0||idx>=this.rawElem.children.length)
return this;this.rawElem.children[idx].style.flex=grow+' '+shrink+' '+basis;return this};FlexLayout.prototype.setItemCss=function(idx,css){var item=this.rawElem.children[idx];for(var rule in css){item.style[rule]=css[rule]}
return this};return FlexLayout}(UIContainer_4.UIContainer));exports.FlexLayout=FlexLayout});define("js/CustomContainer",["require","exports","js/UIContainer"],function(require,exports,UIContainer_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CustomContainer=void 0;var CustomContainer=(function(_super){__extends(CustomContainer,_super);function CustomContainer(tag){return _super.call(this,(tag!=='%inherit%')?tag:'div')||this}
CustomContainer.prototype.buildInit=function(data,fields){if(data.tag&&this.tagType!==data.tag){this.tagType=data.tag;this._elem=this._createElem()}
if(data.content){this._elem.append(data.content)}else if(data.text){this._elem.text(data.text)}};CustomContainer.prototype.setContent=function(content){this._elem.empty().append(content);return this};CustomContainer.prototype.setText=function(text){this._elem.text(text);return this};return CustomContainer}(UIContainer_5.UIContainer));exports.CustomContainer=CustomContainer});define("js/ui/controls/OffsetSelector",["require","exports","js/UIComponent","js/VerticalLayout","js/Label","js/SizeSelector","js/FlexLayout","jquery","js/CustomContainer"],function(require,exports,UIComponent_14,VerticalLayout_2,Label_2,SizeSelector_1,FlexLayout_1,jquery_22,CustomContainer_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OffsetSelector=void 0;var OffsetSelector=(function(_super){__extends(OffsetSelector,_super);function OffsetSelector(){var _this=_super.call(this)||this;_this.offsetWarning=!1;_this.updating=!1;var units=[{suffix:'px',label:'px',min:-10000,max:10000},{suffix:'%',min:-100,max:100,precision:2,step:1}];_this.top=new SizeSelector_1.SizeSelector().setMinValue(0).onChange(function(){return _this.handleChange()});_this.right=new SizeSelector_1.SizeSelector().setMinValue(0).onChange(function(){return _this.handleChange()});_this.bottom=new SizeSelector_1.SizeSelector().setMinValue(0).onChange(function(){return _this.handleChange()});_this.left=new SizeSelector_1.SizeSelector().setMinValue(0).onChange(function(){return _this.handleChange()});_this.top.setComponentOptions({fixedWidth:100,hideSpinner:!0,unitsWidth:47,units:units,unitsDropdownAlignment:'right',});_this.right.setComponentOptions({fixedWidth:100,hideSpinner:!0,unitsWidth:47,units:units,unitsDropdownAlignment:'right',});_this.bottom.setComponentOptions({fixedWidth:100,hideSpinner:!0,unitsWidth:47,units:units,unitsDropdownAlignment:'right',});_this.left.setComponentOptions({fixedWidth:100,hideSpinner:!0,unitsWidth:47,units:units,unitsDropdownAlignment:'right',});_this.previewCornerBlock=new CustomContainer_1.CustomContainer().addClass('wb-offset-selector-preview');_this.previewCornerBlock.getElem().append((0,jquery_22.default)('<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n'+'<rect width="34" height="34" fill="#2A97F0"/>\n'+'<rect x="3.12109" y="1" width="19" height="3" transform="rotate(45 3.12109 1)" fill="black"/>\n'+'<path d="M18 12V18H12L18 12Z" fill="black"/>\n'+'<rect width="34" height="5" fill="#FD6E1E"/>\n'+'<rect width="5" height="34" fill="#FD6E1E"></rect>\n'+'</svg>'));_this.previewBlock=new CustomContainer_1.CustomContainer().addClass('wb-offset-selector-preview');_this.previewBlock.getElem().append((0,jquery_22.default)('<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n'+'<rect width="34" height="34" fill="#2A97F0"></rect>\n'+'<rect x="3.12109" y="15" width="14" height="3" transform="rotate(0 3.12109 1)" fill="black"></rect>\n'+'<path d="M 14 12.5 L 19.5 16.5 L 14 20.5 L 14 12.5 Z" fill="black"></path>\n'+'<rect width="5" height="34" fill="#FD6E1E"></rect>\n'+'</svg>'));var content=new VerticalLayout_2.VerticalLayout().setSpacing(12).addAllChildren([new FlexLayout_1.FlexLayout().setAlignItems('center').setJustifyContent('center').addAllChildren([_this.topLayout=new VerticalLayout_2.VerticalLayout().addAllChildren([_this.topLabel=new Label_2.Label(__('Top')),_this.top,]),]),new FlexLayout_1.FlexLayout().setAlignItems('center').setJustifyContent('center').addAllChildren([new FlexLayout_1.FlexLayout().setAlignItems('flex-end').setJustifyContent('center').addAllChildren([_this.leftLayout=new VerticalLayout_2.VerticalLayout().addAllChildren([_this.leftLabel=new Label_2.Label(__('Left')),_this.left,]),_this.previewCornerBlock,_this.previewBlock,_this.rightLayout=new VerticalLayout_2.VerticalLayout().addAllChildren([_this.rightLabel=new Label_2.Label(__('Right')),_this.right,]),]),]),new FlexLayout_1.FlexLayout().setAlignItems('center').setJustifyContent('center').addAllChildren([_this.bottomLayout=new VerticalLayout_2.VerticalLayout().addAllChildren([_this.bottomLabel=new Label_2.Label(__('Bottom')),_this.bottom,]),]),]);_this._elem.addClass('wb-offset-selector-control').append(content.getElem()).css({minWidth:350});return _this}
OffsetSelector.prototype.handleChange=function(){if(!this.updating){this.onValueChanged();if(typeof this.onChange==='function'){this.onChange()}
this.updateVisibility()}};OffsetSelector.prototype.updateVisibility=function(){this.topLabel.setHelpText(null);this.rightLabel.setHelpText(null);this.bottomLabel.setHelpText(null);this.leftLabel.setHelpText(null);if(this.offsetWarning){var helpText="warn:"+__("When size is not set as manual — background offset in percentage depends on image proportions and may not be applied");var value=this.getValue();if(value&&this.top.getEnabled()&&typeof value.top==='string'&&value.top.indexOf('%')>=0)
this.topLabel.setHelpText(helpText);if(value&&this.right.getEnabled()&&typeof value.right==='string'&&value.right.indexOf('%')>=0)
this.rightLabel.setHelpText(helpText);if(value&&this.bottom.getEnabled()&&typeof value.bottom==='string'&&value.bottom.indexOf('%')>=0)
this.bottomLabel.setHelpText(helpText);if(value&&this.left.getEnabled()&&typeof value.left==='string'&&value.left.indexOf('%')>=0)
this.leftLabel.setHelpText(helpText);}};OffsetSelector.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_1=data.change;this.onChange=function(){return changeFunc_1.call(_this,fields)}}
if(data.value)
this.setValue(data.value);this.setOffsetsEnabled({useTop:data.useTop===undefined?!0:data.useTop,useRight:data.useRight===undefined?!0:data.useRight,useBottom:data.useBottom===undefined?!0:data.useBottom,useLeft:data.useLeft===undefined?!0:data.useLeft})};OffsetSelector.prototype.setOffsetsWarning=function(value){this.offsetWarning=value};OffsetSelector.prototype.setOffsetsEnabled=function(options){this.top.setEnabled(options.useTop);this.right.setEnabled(options.useRight);this.bottom.setEnabled(options.useBottom);this.left.setEnabled(options.useLeft);if((options.useTop||options.useBottom)&&(options.useLeft||options.useRight)){this.previewBlock.setVisible(!1);this.previewCornerBlock.setVisible(!0);var angle=0;if(options.useLeft&&options.useTop)
angle=0;else if(options.useTop&&options.useRight)
angle=90;else if(options.useRight&&options.useBottom)
angle=180;else if(options.useBottom&&options.useLeft)
angle=270;this.previewCornerBlock.getElem().css({transform:"rotate(".concat(angle,"deg)")})}else{this.previewBlock.setVisible(!0);this.previewCornerBlock.setVisible(!1);var angle=0;if(options.useLeft)
angle=0;else if(options.useTop)
angle=90;else if(options.useRight)
angle=180;else if(options.useBottom)
angle=270;this.previewBlock.getElem().css({transform:"rotate(".concat(angle,"deg)")})}
return this};OffsetSelector.createValue=function(fromValue){if(fromValue&&(!(fromValue.top==0||fromValue.top=='0px')||!(fromValue.right==0||fromValue.right=='0px')||!(fromValue.bottom==0||fromValue.bottom=='0px')||!(fromValue.left==0||fromValue.left=='0px'))){return{top:(fromValue&&fromValue.top)?fromValue.top:0,right:(fromValue&&fromValue.right)?fromValue.right:0,bottom:(fromValue&&fromValue.bottom)?fromValue.bottom:0,left:(fromValue&&fromValue.left)?fromValue.left:0,}}
return null};OffsetSelector.prototype.getValue=function(){return OffsetSelector.createValue({top:this.top.getValue(),right:this.right.getValue(),bottom:this.bottom.getValue(),left:this.left.getValue(),})};OffsetSelector.prototype.setValue=function(value){this.updating=!0;if(!value){value={top:0,right:0,bottom:0,left:0,}}
this.top.setValue(value.top);this.right.setValue(value.right);this.bottom.setValue(value.bottom);this.left.setValue(value.left);this.updating=!1;this.handleChange()};OffsetSelector.supportsMultipleObjectBindings=function(){return!1};OffsetSelector.prototype.setOnChange=function(callback){this.onChange=callback;return this};OffsetSelector.prototype.destroy=function(){this.top.destroy();this.right.destroy();this.bottom.destroy();this.left.destroy();_super.prototype.destroy.call(this)};return OffsetSelector}(UIComponent_14.UIComponent));exports.OffsetSelector=OffsetSelector});define("js/ui/controls/popovers/OffsetControlPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/FlowLayout","js/ui/controls/OffsetSelector"],function(require,exports,Popover_2,VerticalLayout_3,FlowLayout_2,OffsetSelector_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OffsetControlPopover=void 0;var OffsetControlPopover=(function(_super){__extends(OffsetControlPopover,_super);function OffsetControlPopover(triggerBtn,onChange,title){if(title===void 0){title=__('Offset')}
var _this=_super.call(this,triggerBtn,title,null,'wb-offset-pop')||this;_this.onChange=onChange;_this.options=null;_this.offsetElem=new OffsetSelector_1.OffsetSelector();_this.offsetElem.setOnChange(function(){_this.onChange(_this.offsetElem.getValue())});_this.setContent(new FlowLayout_2.FlowLayout().setSpacing('full').addClass('wb-offset-dialog').addAllChildren([new VerticalLayout_3.VerticalLayout().addClass('wb-offset-dialog-offset-block').setSpacing(12).addAllChildren([_this.offsetElem,]),]).getElem());return _this}
OffsetControlPopover.prototype.setOffsetsEnabled=function(options){this.offsetElem.setOffsetsEnabled(options);return this};OffsetControlPopover.prototype.setOffsetsWarning=function(value){this.offsetElem.setOffsetsWarning(value);return this};OffsetControlPopover.prototype.updateOptionsVisibility=function(){if(!this.options)
return;var opt=this.options};OffsetControlPopover.prototype.edit=function(options){this.options=__assign({},options);this.updateOptionsVisibility();this.setVisible(!0)};OffsetControlPopover.prototype.setValue=function(value){this.offsetElem.setValue(value)};OffsetControlPopover.prototype.getValue=function(){return this.offsetElem.getValue()};OffsetControlPopover.prototype.dispose=function(){this.offsetElem.destroy();_super.prototype.dispose.call(this)};return OffsetControlPopover}(Popover_2.Popover));exports.OffsetControlPopover=OffsetControlPopover});define("js/ui/BackgroundPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/Label","js/FlowLayout","js/UIComponent","ImagePicker","js/ColorPicker","js/SliderControl","js/AlignSelector","js/CheckBox","js/SizeSelector","js/ui/ContainmentControl","js/util/ChangeUpdateUtil","js/TextField","js/element/ElementBackground","js/UIButton","js/FlexLayout","js/ui/controls/popovers/OffsetControlPopover"],function(require,exports,Popover_3,VerticalLayout_4,Label_3,FlowLayout_3,UIComponent_15,ImagePicker_1,ColorPicker_1,SliderControl_1,AlignSelector_1,CheckBox_1,SizeSelector_2,ContainmentControl_1,ChangeUpdateUtil_1,TextField_1,ElementBackground_1,UIButton_1,FlexLayout_2,OffsetControlPopover_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BackgroundPopover=void 0;var BackgroundPopover=(function(_super){__extends(BackgroundPopover,_super);function BackgroundPopover(triggerBtn,onChange,title){if(title===void 0){title=__('Background')}
var _this=_super.call(this,triggerBtn,title,null,'wb-background-pop')||this;_this.onChange=onChange;_this.value={};_this.options=null;_this.colorElem=new ColorPicker_1.ColorPicker(!1,!1,!0).setInPlace(!0).setOnChange(function(){_this.value.color=_this.colorElem.getValue();_this.onChange(__assign({},_this.value))});_this.imageElem=UIComponent_15.UIComponent.wrapControl(new ImagePicker_1.default(null,63,!1,!0).setOnOpen(function(){if(_this.isVisible())
_this.setVisible(!1);}).setOnClose(function(){if(!_this.isVisible())
_this.setVisible(!0);}).setOnChange(function(value){_this.value.image=(!value||value==='null')?'none':value;_this.value.isVideo=(_this.imageElem._control.getValueFileType()==='video');_this.updateOptionsVisibility();_this.onChange(__assign({},_this.value));if(!_this.isVisible())
_this.setVisible(!0);}));_this.opacityElem=new SliderControl_1.SliderControl(0,100).setOnChange(function(value){_this.value.opacity=value;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility()}).setOnSlide(function(value){_this.value.opacity=value;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility()});_this.positionElem=new AlignSelector_1.AlignSelector().setOnChange(function(value){_this.offsetPopover.setVisible(!1);_this.value.position=value;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility();_this.updatePositionHightlight(_this.value.repeat)});_this.repeatElem=new RepeatControl(function(value){_this.value.repeat=value.repeat;_this.value.attachment=value.attachment;_this.onChange(__assign({},_this.value));_this.updatePositionHightlight(value.repeat)});_this.containmentElem=new SizeControl(function(value){_this.offsetPopover.setVisible(!1);_this.value.size=value;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility()});_this.timeStartElem=new TextField_1.TextField('','mm:ss').on('change',function(){_this.validateTime('start');var val=_this.timeStartElem.getValue();_this.value.timeStartAt=(val?(''+time2sec(val)):null);_this.onChange(__assign({},_this.value))});_this.timeEndElem=new TextField_1.TextField('','mm:ss').on('change',function(){_this.validateTime('end');var val=_this.timeEndElem.getValue();_this.value.timeEndAt=(val?(''+time2sec(val)):null);_this.onChange(__assign({},_this.value))});_this.fullWidthElem=new CheckBox_1.default(__('Full screen width')).on('change',function(){_this.value.fullWidth=_this.fullWidthElem.getValue();_this.onChange(__assign({},_this.value))});_this.attaElem=new CheckBox_1.default(__("Don't scroll background")).on('change',function(){_this.value.attachment=_this.attaElem.getValue()?'fixed':'scroll';_this.onChange(__assign({},_this.value))});_this.offsetEnableElem=new CheckBox_1.default(__('Offset')).onChange(function(value){_this.value.useOffset=value;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility();_this.setVisiblePositionOffset(value)});_this.offsetEditBtn=new UIButton_1.UIButton('',null,'fa fa-pencil').setButtonSize(UIButton_1.UIButton.SIZE_TINY).on('click',function(){if(_this.offsetPopover.isVisible()){_this.offsetPopover.setVisible(!1);return}
var value={left:0,top:0,right:0,bottom:0};var offsetEnable={useTop:!1,useLeft:!1,useRight:!1,useBottom:!1};if(_this.positionElem.getVerticalAlignment()===AlignSelector_1.VerticalAlignment.TOP){value.top=_this.value.offsetV||0;offsetEnable.useTop=!0}
if(_this.positionElem.getVerticalAlignment()===AlignSelector_1.VerticalAlignment.BOTTOM){value.bottom=_this.value.offsetV||0;offsetEnable.useBottom=!0}
if(_this.positionElem.getHorizontalAlignment()===AlignSelector_1.HorizontalAlignment.LEFT){value.left=_this.value.offsetH||0;offsetEnable.useLeft=!0}
if(_this.positionElem.getHorizontalAlignment()===AlignSelector_1.HorizontalAlignment.RIGHT){value.right=_this.value.offsetH||0;offsetEnable.useRight=!0}
_this.offsetPopover.setOffsetsEnabled(offsetEnable);_this.offsetPopover.setOffsetsWarning(_this.value.size==='cover'||_this.value.size==='contain');_this.offsetPopover.setValue(value);_this.offsetPopover.setVisible(!0)});if(!(0,ElementBackground_1.isFixedBgSupported)()){_this.attaElem.setHelpText("warn:"+__("iOS devices don't support this option"))}
_this.offsetPopover=new OffsetControlPopover_1.OffsetControlPopover(_this.offsetEditBtn.getElem(),function(value){if(_this.positionElem.getVerticalAlignment()===AlignSelector_1.VerticalAlignment.TOP)
_this.value.offsetV=value===null||value===void 0?void 0:value.top;if(_this.positionElem.getVerticalAlignment()===AlignSelector_1.VerticalAlignment.BOTTOM)
_this.value.offsetV=value===null||value===void 0?void 0:value.bottom;if(_this.positionElem.getHorizontalAlignment()===AlignSelector_1.HorizontalAlignment.LEFT)
_this.value.offsetH=value===null||value===void 0?void 0:value.left;if(_this.positionElem.getHorizontalAlignment()===AlignSelector_1.HorizontalAlignment.RIGHT)
_this.value.offsetH=value===null||value===void 0?void 0:value.right;_this.onChange(__assign({},_this.value));_this.updateOptionsVisibility();_this.setVisiblePositionOffset(_this.value.useOffset||!0)});_this.setContent(new FlowLayout_3.FlowLayout().setSpacing('full').addClass('wb-bgcontrol-popc').addAllChildren([_this.colorBlock=new VerticalLayout_4.VerticalLayout().addClass('wb-bgcontrol-color-block').addAllChildren([_this.colorElem,]),_this.imageMainBlock=new VerticalLayout_4.VerticalLayout().setSpacing(12).addClass('wb-bgcontrol-image-block').addAllChildren([_this.imageBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([_this.imageLabel=new Label_3.Label(__('Image')),_this.imageElem,]),_this.optsBlock=new VerticalLayout_4.VerticalLayout().setSpacing(12).addAllChildren([_this.opacityBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([new Label_3.Label(__('Opacity')),_this.opacityElem,]),_this.sizeBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([new Label_3.Label(__('Filling')),_this.containmentElem,]),_this.imageOptsBlock=new VerticalLayout_4.VerticalLayout().setSpacing(12).addAllChildren([new FlowLayout_3.FlowLayout().addAllChildren([_this.positionBlock=new VerticalLayout_4.VerticalLayout().css({verticalAlign:'top'}).addAllChildren([new Label_3.Label(__('Position')),_this.positionElem,]),new VerticalLayout_4.VerticalLayout().addAllChildren([_this.repeatBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([new Label_3.Label('&nbsp;').setHtml('&nbsp;'),_this.repeatElem,]),_this.offsetOptsBlock=new FlexLayout_2.FlexLayout().css({marginTop:8}).setSpacing(4).setAlignItems('center').addAllChildren([_this.offsetEnableElem,_this.offsetEditBtn,]),]),]),_this.attaElem,]),_this.videoOptsBlock=new FlowLayout_3.FlowLayout().addClass('wb-bgcontrol-time').addAllChildren([_this.positionBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([new Label_3.Label(__('Start at')),_this.timeStartElem,]),_this.repeatBlock=new VerticalLayout_4.VerticalLayout().addAllChildren([new Label_3.Label(__('End at')),_this.timeEndElem,]),]),]),_this.fullWidthElem,])]).getElem());return _this}
BackgroundPopover.prototype.validateTime=function(updateTimeType){var startValue=this.timeStartElem.getValue();var endValue=this.timeEndElem.getValue();if(updateTimeType==='start'&&startValue===''||updateTimeType==='end'&&endValue==='')
return;var startTime=any2time(startValue);var endTime=any2time(endValue);if(updateTimeType){var secStart=startTime?time2sec(startTime):0;var secEnd=endTime?time2sec(endTime):2147483647;if(updateTimeType==='start'){if(secStart>secEnd){startTime=any2time(Math.max(secEnd-1,0))}}else if(updateTimeType==='end'){if(secEnd<secStart){endTime=any2time(secStart+1)}}}
this.timeStartElem.setValue(startTime);this.timeEndElem.setValue(endTime)};BackgroundPopover.prototype.getMouseDowned=function(){var colorPopover=this.colorElem.getPopover();return colorPopover?colorPopover.getMouseDowned():_super.prototype.getMouseDowned.call(this)};BackgroundPopover.prototype.updateOptionsVisibility=function(full){if(full===void 0){full=!1}
if(!this.options)
return;var opt=this.options;this.optsBlock.setVisible((opt.useImage&&this.value.image!='none')?!0:!1);this.imageOptsBlock.setVisible(opt.useImage&&!this.value.isVideo);this.offsetOptsBlock.setVisible(opt.useOffset&&this.value.position!='center center');var offsetValue=[this.positionElem.getHorizontalAlignment()===AlignSelector_1.HorizontalAlignment.CENTER?'':typeof this.value.offsetH==='string'?this.value.offsetH:((this.value.offsetH||0)+'px'),this.positionElem.getVerticalAlignment()===AlignSelector_1.VerticalAlignment.MIDDLE?'':typeof this.value.offsetV==='string'?this.value.offsetV:((this.value.offsetV||0)+'px'),];this.offsetEnableElem.setLabel(__('Offset')+((this.value.useOffset)?(' ('+offsetValue.join(' ').trim()+')'):''));this.offsetEditBtn.setVisible(!!this.value.useOffset);this.offsetOptsBlock.css({marginTop:!!this.value.useOffset?7:10});if(this.value.useOffset&&['cover','contain'].indexOf(""+this.value.size)>=0&&((typeof this.value.offsetV==='string'&&this.value.offsetV.indexOf('%')>=0)||(typeof this.value.offsetH==='string'&&this.value.offsetH.indexOf('%')>=0))){this.offsetEnableElem.setHelpText("warn:"+__("When size is not set as manual — background offset in percentage depends on image proportions and may not be applied"))}else{this.offsetEnableElem.setHelpText(null)}
this.videoOptsBlock.setVisible((opt.allowVideo&&this.value.isVideo)?!0:!1);this.sizeBlock.setVisible(opt.useSize&&!this.value.isVideo);this.imageElem._control.setOpacity(this.value.opacity||null);this.imageElem._control.setSizeMode(this.value.size||null);if(full){this.colorBlock.setVisible(opt.useColor);this.imageBlock.setVisible(opt.useImage);if(!opt.useImage)
this.optsBlock.setVisible(!1);this.positionBlock.setVisible(opt.usePosition);this.repeatBlock.setVisible(opt.useRepeat);this.attaElem.setVisible(opt.useAttachment);this.sizeBlock.setVisible(opt.useSize&&!this.value.isVideo);this.opacityBlock.setVisible(opt.useOpacity);this.fullWidthElem.setVisible(opt.useFullWidth);this.imageLabel.setText(opt.allowVideo?(__('Image')+' / '+__('Video')):__('Image'));this.imageElem._control.setMode(opt.allowVideo?'image+video':'image');if(!opt.allowVideo)
this.videoOptsBlock.setVisible(!1);if(!opt.useImage&&!opt.useFullWidth){this.imageMainBlock.setVisible(!1)}}};BackgroundPopover.prototype.onDom=function(){this.colorElem.triggerOnDom();_super.prototype.onDom.call(this)};BackgroundPopover.prototype.edit=function(value,options){this.value=__assign({},value);this.options=__assign({},options);this.colorElem.setValue(value.color||'transparent');this.imageElem._control.setValueFileType((value.isVideo?'video':'image'));this.imageElem._control.setValue(value.image||'none');this.offsetEnableElem.setValue(value.useOffset||!1);this.offsetPopover.setValue({left:value.offsetH||0,top:value.offsetV||0,right:value.offsetH||0,bottom:value.offsetV||0});this.optsBlock.setVisible((value.image&&value.image!='none')?!0:!1);this.opacityElem.setValue(value.opacity||100);this.positionElem.setValue(value.position||'left top');this.updatePositionHightlight(value.repeat||'repeat');this.repeatElem.setValue(value);this.containmentElem.setValue(value.size||'auto auto');this.attaElem.setValue((value.attachment==='fixed'));this.fullWidthElem.setValue(value.fullWidth?!0:!1);this.timeStartElem.setValue(value.timeStartAt!==null?any2time(value.timeStartAt||''):'');this.timeEndElem.setValue(value.timeEndAt!==null?any2time(value.timeEndAt||''):'');this.setVisiblePositionOffset(this.value.useOffset||!1);this.updateOptionsVisibility(!0);this.setVisible(!0)};BackgroundPopover.prototype.setVisible=function(visible){_super.prototype.setVisible.call(this,visible);if(!visible)
this.colorElem.triggerOnClose();};BackgroundPopover.prototype.updatePositionHightlight=function(value){this.positionElem.setHightlight([]);if(value==='repeat'){this.positionElem.setHightlight([0,1,2,3,4,5,6,7,8])}else if(value==='repeat-x'){var align=this.positionElem.getVerticalAlignment();if(align===AlignSelector_1.VerticalAlignment.TOP)
this.positionElem.setHightlight([0,1,2]);else if(align===AlignSelector_1.VerticalAlignment.BOTTOM)
this.positionElem.setHightlight([6,7,8]);else this.positionElem.setHightlight([3,4,5])}else if(value==='repeat-y'){var align=this.positionElem.getHorizontalAlignment();if(align===AlignSelector_1.HorizontalAlignment.LEFT)
this.positionElem.setHightlight([0,3,6]);else if(align===AlignSelector_1.HorizontalAlignment.RIGHT)
this.positionElem.setHightlight([2,5,8]);else this.positionElem.setHightlight([1,4,7])}};BackgroundPopover.prototype.setVisiblePositionOffset=function(value){this.positionElem.setVisiblePositionOffset(value)};BackgroundPopover.prototype.dispose=function(){this.colorElem.destroy();this.imageElem.destroy();this.opacityElem.destroy();this.positionElem.destroy();this.repeatElem.destroy();this.containmentElem.destroy();this.offsetPopover.dispose();_super.prototype.dispose.call(this)};return BackgroundPopover}(Popover_3.Popover));exports.BackgroundPopover=BackgroundPopover;var RepeatControl=(function(_super){__extends(RepeatControl,_super);function RepeatControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.value={};_this.horiElem=new CheckBox_1.default(__('Repeat')+' '+__('Horizontally')).on('change',function(){return _this.onValueChange()});_this.vertElem=new CheckBox_1.default(__('Repeat')+' '+__('Vertically')).on('change',function(){return _this.onValueChange()});_this.addClass('wb-bgcontrol-repeat');_this._elem.append(_this.horiElem.getElem()).append(_this.vertElem.getElem());return _this}
RepeatControl.prototype.onValueChange=function(){var h=this.horiElem.getValue();var v=this.vertElem.getValue();if(h&&v)
this.value.repeat='repeat';else if(!h&&!v)
this.value.repeat='no-repeat';else this.value.repeat=(h?'repeat-x':'repeat-y');this.onChange(__assign({},this.value))};RepeatControl.prototype.setValue=function(value){this.value=__assign({},value);var r=value.repeat||'repeat';this.horiElem.setValue((r==='repeat'||r==='repeat-x'));this.vertElem.setValue((r==='repeat'||r==='repeat-y'))};return RepeatControl}(UIComponent_15.UIComponent));var SizeControl=(function(_super){__extends(SizeControl,_super);function SizeControl(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.value='';_this.manualElem=new CheckBox_1.default(__('Manual'),!0).on('change',function(){return _this.onValueChange(_this.manualElem.getValue()?ContainmentControl_1.SizeType.Auto:ContainmentControl_1.SizeType.Contain,!0)});_this.containmentElem=new ContainmentControl_1.ContainmentControl(function(value){return _this.onValueChange(value,!0)});_this.widthElem=new SizeSelector_2.SizeSelector().setSpinnerVisible(!1).setUnitsVisible(!0).setUnits([{suffix:'px',label:'px'},{suffix:'%',min:1,max:100,precision:2,step:1},{fixedValue:'auto',label:__('auto')},]).setUnitsWidth(50).setFixedWidth(!1).on('change keyup',function(e){return _this.onChangeSize((e&&e.type=='keyup')?!0:!1)});_this.heightElem=new SizeSelector_2.SizeSelector().setSpinnerVisible(!1).setUnitsVisible(!0).setUnits([{suffix:'px',label:'px'},{suffix:'%',min:1,max:100,precision:2,step:1},{fixedValue:'auto',label:__('auto')},]).setUnitsWidth(50).setFixedWidth(!1).on('change keyup',function(e){return _this.onChangeSize((e&&e.type=='keyup')?!0:!1)});_this.waitToUpdateSize=new ChangeUpdateUtil_1.ChangeUpdateState(function(){return _this.onChangeSize(!1)},undefined,500);_this.addClass('wb-bgcontrol-size');_this.addAllChildren([_this.containmentElem,_this.widthElem,_this.heightElem,_this.manualElem,]);_this.setValue('auto auto');return _this}
SizeControl.prototype.onChangeSize=function(keyEvent){if(keyEvent){(0,ChangeUpdateUtil_1.waitForChangeEndToUpdate)(this.waitToUpdateSize);return}
var val=this.widthElem.getValue()+' '+this.heightElem.getValue();if(this.value!=val)
this.handleChange();};SizeControl.prototype.onValueChange=function(value,triggerChange){if(triggerChange===void 0){triggerChange=!1}
if(this.sizeValue===value)
return;this.sizeValue=value;if(value==ContainmentControl_1.SizeType.Auto){this.containmentElem.setVisible(!1);this.widthElem.setVisible(!0);this.heightElem.setVisible(!0)}else{this.containmentElem.setValue(value);this.containmentElem.setVisible(!0);this.widthElem.setVisible(!1);this.heightElem.setVisible(!1)}
if(triggerChange)
this.handleChange();};SizeControl.prototype.handleChange=function(){if(this.sizeValue==ContainmentControl_1.SizeType.Contain){this.value='contain'}else if(this.sizeValue==ContainmentControl_1.SizeType.Cover){this.value='cover'}else{this.value=this.widthElem.getValue()+' '+this.heightElem.getValue()}
this.onChange(this.value)};SizeControl.prototype.setValue=function(value){if(this.value==value)
return;this.value=value;var sizeValue;if(value=='contain'){sizeValue=ContainmentControl_1.SizeType.Contain;this.widthElem.setValue('auto');this.heightElem.setValue('auto');this.manualElem.setValue(!1)}else if(value=='cover'){sizeValue=ContainmentControl_1.SizeType.Cover;this.widthElem.setValue('auto');this.heightElem.setValue('auto');this.manualElem.setValue(!1)}else{sizeValue=ContainmentControl_1.SizeType.Auto;var val=(value||'auto auto').trim().split(' ');this.widthElem.setValue(val[0]||'auto');this.heightElem.setValue((val.length>1&&val[1])?val[1]:'auto');this.manualElem.setValue(!0)}
this.onValueChange(sizeValue)};return SizeControl}(FlowLayout_3.FlowLayout));function time2sec(time){var sec=0;time=any2time(time);if(time){var parts=time.split(':');sec=parseInt(parts[0])*60+parseInt(parts[1])}
return sec}
function any2time(value){if(/^[0-9]+\:[0-5][0-9]$/.test(''+value)||value===''){return''+value}
var time='';var hr=null,min=null,sec=null;var parts=(''+value).split(':');if(parts.length===1){sec=parseInt(parts[0])}else if(parts.length===2){min=parseInt(parts[0]);sec=parseInt(parts[1])}else if(parts.length===3){hr=parseInt(parts[0]);min=parseInt(parts[1]);sec=parseInt(parts[2])}
if(isNaN(hr)||isNaN(min)||isNaN(sec)){time=''}else if(hr!==null||min!==null||sec!==null){if(!min)
min=0;if(hr){min+=hr*60;hr=null}
if(!sec)
sec=0;if(sec>59){min+=Math.floor(sec/60);sec=sec%60}
time=min+':'+((sec<10?'0':'')+sec)}
return time}});define("js/util/VideoThumbGenerator",["require","exports","jquery","js/core/BuilderConfig","js/BackgroundControl"],function(require,exports,jquery_23,BuilderConfig_1,BackgroundControl_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.lookupThumb=exports.generateThumb=void 0;var thumbSize={width:130,height:114};var thumbIndex={};var VideoThumbGenerator=(function(){function VideoThumbGenerator(fileName,thumbElem,deferred){var _this=this;this.fileName=fileName;this.thumbElem=thumbElem;this.deferred=deferred;this.videoElem=document.createElement('video');this.videoElem.muted=!0;this.videoElem.autoplay=!1;this.videoElem.loop=!1;this.videoElem.addEventListener('loadeddata',function(){return _this.onFirstFrame()});this.videoElem.addEventListener('seeked',function(){return _this.onSeekDone()});this.videoElem.addEventListener('error',function(){return _this.onError()});this.videoElem.style.position='absolute';this.videoElem.style.left='0px';this.videoElem.style.top='0px';this.videoElem.style.width=thumbSize.width+'px';this.videoElem.style.height=thumbSize.height+'px';this.videoElem.src=wb_builder.makeLocalUrl(wb_builder.userGalleryUrl+fileName);thumbElem.append(this.videoElem);this.loaderElem=(0,jquery_23.default)('<span>').addClass('fa fa-spinner fa-pulse').css({position:'absolute',top:2,left:2});thumbElem.append(this.loaderElem)}
VideoThumbGenerator.prototype.dispose=function(){this.thumbElem[0].removeChild(this.videoElem);this.loaderElem.detach()};VideoThumbGenerator.prototype.onError=function(){this.deferred.reject();this.dispose()};VideoThumbGenerator.prototype.onFirstFrame=function(){if(this.videoElem.duration<=0){this.onError();return}
this.videoElem.currentTime=Math.min(5,this.videoElem.duration)};VideoThumbGenerator.prototype.onSeekDone=function(){if(this.videoElem.currentTime<=0)
return;var canvas=document.createElement('canvas');canvas.width=thumbSize.width;canvas.height=thumbSize.height;var ctx=canvas.getContext('2d');if(ctx){ctx.drawImage(this.videoElem,0,0,thumbSize.width,thumbSize.height);var img=canvas.toDataURL('image/png');var fileName_1=this.fileName;jquery_23.default.post(BuilderConfig_1.wbConfig.getLnUrl('upload/set-thumb'),JSON.stringify({file:fileName_1,thumbData:img})).done(function(r){if(r&&r.ok&&r.thumbUrl&&typeof r.thumbUrl==='string'){thumbIndex[fileName_1]=r.thumbUrl}});if(img)
this.deferred.resolve(img);else this.deferred.reject()}else{this.deferred.reject()}
this.dispose()};return VideoThumbGenerator}());function generateThumb(fileName,thumbElem){var deferred=jquery_23.default.Deferred();new VideoThumbGenerator(fileName,thumbElem,deferred);return deferred.promise()}
exports.generateThumb=generateThumb;function lookupThumb(file,thumbElem){var isExternal=file.indexOf('https://')==0||file.indexOf('http://')==0;var fileParts=file.split('/');var fileName=fileParts[fileParts.length-1];var deferred=jquery_23.default.Deferred();if(fileName in thumbIndex){deferred.resolve(thumbIndex[fileName])}else if(isExternal){if(file.indexOf('/youtube.com/')){var id=(0,BackgroundControl_2.extractYoutubeId)(file);if(id){deferred.resolve('https://img.youtube.com/vi/'+id+'/0.jpg')}else{deferred.reject()}}else{deferred.reject()}}else{jquery_23.default.post(BuilderConfig_1.wbConfig.getLnUrl('upload/get-thumb'),JSON.stringify({file:fileName})).done(function(r){if(r&&r.ok&&r.thumbUrl&&typeof r.thumbUrl==='string'){thumbIndex[fileName]=r.thumbUrl;deferred.resolve(r.thumbUrl)}else if(thumbElem){new VideoThumbGenerator(fileName,thumbElem,deferred)}else{deferred.reject()}}).fail(function(){deferred.reject()})}
return deferred.promise()}
exports.lookupThumb=lookupThumb});define("js/BackgroundControl",["require","exports","js/UIComponent","js/ui/ThumbEditorControl","js/ui/BackgroundPopover","js/util/VideoThumbGenerator","js/util/TextUtil","jquery"],function(require,exports,UIComponent_16,ThumbEditorControl_2,BackgroundPopover_1,VideoThumbGenerator_1,TextUtil_2,jquery_24){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.disposeVideoBackground=exports.runVideoByBackground=exports.extractYoutubeId=exports.isSet=exports.BackgroundControl=exports.buildCss=exports.compareValue=void 0;var defaultOptions={useColor:!0,useImage:!0,useOffset:!0,usePosition:!0,useRepeat:!0,useAttachment:!1,useSize:!1,useFullWidth:!1,useOpacity:!1,allowVideo:!1};function compareValue(a,b){return(a.color===b.color&&a.image===b.image&&a.repeat===b.repeat&&a.position===b.position&&a.size===b.size&&a.isVideo===b.isVideo&&a.opacity===b.opacity&&a.timeEndAt===b.timeEndAt&&a.timeStartAt===b.timeStartAt&&a.fullWidth===b.fullWidth)}
exports.compareValue=compareValue;function buildCss(val,opt,forBuilder){if(forBuilder===void 0){forBuilder=!1}
opt=jquery_24.default.extend(!0,{},defaultOptions,opt||{});var color=val.color||'transparent';var img=val.image||'none';var position=[];if(opt.usePosition){position=val.position?val.position.split(" "):[];if(opt.useOffset&&val.useOffset&&position.length===2){if(position[0]!=='center'&&val.offsetH)
position[0]+=' '+val.offsetH;if(position[1]!=='center'&&val.offsetV)
position[1]+=' '+val.offsetV}}
var positionStr=position.join(" ");var css=val.css={background:((opt.useColor?(color+" "):"")+(opt.useImage?((img==="none")?img:("url('"+(0,TextUtil_2.urlEncode)(forBuilder?wb_builder.makeLocalUrl(img):wb_builder.makeRelUrl(img),!0)+"')"))+" ":"")+((opt.useRepeat&&val.repeat)?(val.repeat+" "):"")+((opt.useAttachment&&val.attachment)?(val.attachment+" "):"")+positionStr+" ").trim()};if(opt.useSize)
css["background-size"]=val.size;if(opt.useOpacity)
css.opacity=val.opacity/100;return val}
exports.buildCss=buildCss;var BackgroundControl=(function(_super){__extends(BackgroundControl,_super);function BackgroundControl(options){var _this=_super.call(this)||this;_this.onChange=null;_this.value={};_this.popover=null;_this.options=jquery_24.default.extend(!0,{},defaultOptions,options);_this.thumbCtrl=new ThumbEditorControl_2.ThumbEditorControl().onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});_this.thumbElem=_this.thumbCtrl.getThumbElem();var preview=_this.thumbCtrl.getPreviewElem();preview.append((0,jquery_24.default)('<div>').addClass('wb-color-ctrl').append(_this.colorElem=(0,jquery_24.default)('<span>'))).append((_this.emptyIconElem=(0,jquery_24.default)('<span>').addClass('fa fa-image')));_this._elem.addClass('wb-bgcontrol-ctrl').append(_this.thumbCtrl.getElem());return _this}
BackgroundControl.prototype.buildInit=function(data,fields){this.setOptions(data);if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){el.onChange=function(){func.call(el,fields)}})(this,data.change)}};BackgroundControl.prototype.setOptions=function(data){if("useColor" in data)
this.options.useColor=data.useColor?!0:!1;if("useImage" in data)
this.options.useImage=data.useImage?!0:!1;if("useOffset" in data)
this.options.useOffset=data.useOffset?!0:!1;if("usePosition" in data)
this.options.usePosition=data.usePosition?!0:!1;if("useRepeat" in data)
this.options.useRepeat=data.useRepeat?!0:!1;if("useAttachment" in data)
this.options.useAttachment=data.useAttachment?!0:!1;if("useSize" in data)
this.options.useSize=data.useSize?!0:!1;if("useOpacity" in data)
this.options.useOpacity=data.useOpacity?!0:!1;if("useFullWidth" in data)
this.options.useFullWidth=data.useFullWidth?!0:!1;if("allowVideo" in data)
this.options.allowVideo=data.allowVideo?!0:!1};BackgroundControl.prototype.setOnChange=function(onChange){this.onChange=onChange;return this};BackgroundControl.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};BackgroundControl.prototype.clear=function(){this.setValue(null);this.handleChange()};BackgroundControl.prototype.edit=function(){var _this=this;if(this.popover&&this.popover.isVisible()){this.popover.setVisible(!1);return}
if(!this.popover){this.popover=new BackgroundPopover_1.BackgroundPopover(this.thumbCtrl.getElem(),function(value){_this.value=value;_this.handleChange()})}
this.popover.edit(this.value,this.options)};BackgroundControl.prototype.updatePreview=function(){var img=this.value?(this.value.image||'none'):'none';var isVideo=(this.value&&this.value.isVideo&&img!=='none')?!0:!1;var preview=this.thumbCtrl.getPreviewElem();if(isVideo){(0,VideoThumbGenerator_1.lookupThumb)(img,preview).done(function(thumbUrl){if(!thumbUrl)
return;preview[0].style.backgroundImage="url('"+(0,TextUtil_2.urlEncode)(thumbUrl,!0)+"')"})}else{preview[0].style.backgroundImage=(img!=='none')?"url('".concat((0,TextUtil_2.urlEncode)(wb_builder.makeLocalUrl(img),!0),"')"):'none'}
if(img!=='none'){this.thumbElem.addClass('wb-ctrl-has-img')}else{this.thumbElem.removeClass('wb-ctrl-has-img')}
this.emptyIconElem[0].style.display=(img!=='none')?'none':'block';this.colorElem[0].style.backgroundColor=(this.value&&this.value.color)?this.value.color:'transparent'};BackgroundControl.prototype.handleChange=function(){this.updatePreview();if(this.onChange&&typeof this.onChange==='function'){this.onChange.call(this,{})}
this.onValueChanged()};BackgroundControl.prototype.triggerChange=function(){this.handleChange()};BackgroundControl.prototype.updatePosition=function(){if(this.popover)
this.popover.updatePosition();};BackgroundControl.prototype.getValue=function(){return buildCss(__assign({},this.value),this.options)};BackgroundControl.prototype.setValue=function(obj){if(!obj)
obj={};if(typeof obj==="string")
obj={color:obj};if(typeof obj.color==='undefined')
obj.color="transparent";if(typeof obj.image==='undefined')
obj.image="none";if(typeof obj.position==='undefined')
obj.position="left top";if(typeof obj.attachment==='undefined')
obj.attachment="scroll";if(typeof obj.repeat==='undefined')
obj.repeat="repeat";if(typeof obj.size==='undefined')
obj.size="auto auto";if(typeof obj.fullWidth==='undefined')
obj.fullWidth=!1;if(typeof obj.opacity==='undefined')
obj.opacity=100;if(typeof obj.isVideo==='undefined')
obj.isVideo=!1;if(typeof obj.timeStartAt==='undefined')
obj.timeStartAt=null;if(typeof obj.timeEndAt==='undefined')
obj.timeEndAt=null;this.value=obj;this.updatePreview()};BackgroundControl.prototype.isSet=function(){return isSet(this.getValue())};BackgroundControl.supportsMultipleObjectBindings=function(){return!1};BackgroundControl.prototype.setComponentOptions=function(options){this.setOptions(options)};return BackgroundControl}(UIComponent_16.UIComponent));exports.BackgroundControl=BackgroundControl;function isSet(data){if(data===null||typeof data!=="object")
return!1;var img=data.image;if(!img||img==="null"||img==="none")
img=null;var color=data.color;if(!color||color==="transparent")
color=null;return(img||color)}
exports.isSet=isSet;function extractYoutubeId(url){var id=null;if(/(?:^|")(?:https?:\/\/|)(?:(?:www|music)\.)?youtube(?:\.co)?\.[a-z]+\/(?:embed\/|shorts\/|watch\?v=)(.+?)(?:[\?&].*)?(?:"|$)/i.test(url)){id=RegExp.$1}else if(/youtube/i.test(url)){var parts=url.split('?');if(parts.length>1){var parts2=parts[1].split('&');for(var i=0;i<parts2.length;i++){var keyVal=parts2[i].split('=');if(keyVal.length>1){if(keyVal[0]==='v'&&keyVal[1]){id=keyVal[1];break}}}}}else if(/^(?:https?:\/\/|)youtu\.be\/(.+)$/i.test(url)){id=RegExp.$1}
if(id){id=id.replace(/[^a-zA-Z0-9\_\-]/,'')}
return id}
exports.extractYoutubeId=extractYoutubeId;function runVideoByBackground(background,container,element,hardReset,dispose){if(hardReset===void 0){hardReset=!1}
if(dispose===void 0){dispose=!1}
if(!container)
return;if(background&&typeof(background)==='object'&&background.image){var youtubeVideoId=extractYoutubeId(background.image);if(youtubeVideoId){setVideo(null,container);if(hardReset)
setYoutubeVideo(null,container,undefined,undefined,undefined,!0);setYoutubeVideo(youtubeVideoId,container,background.timeStartAt,background.timeEndAt,element)}else{setYoutubeVideo(null,container);setVideo(wb_builder.makeLocalUrl(background.image),container,background.timeStartAt,background.timeEndAt,element)}}else{setYoutubeVideo(null,container,null,null,element,dispose);setVideo(null,container,null,null,element,dispose)}}
exports.runVideoByBackground=runVideoByBackground;function disposeVideoBackground(container){runVideoByBackground(null,container,undefined,!1,!0)}
exports.disposeVideoBackground=disposeVideoBackground;function setVideo(url,container,startAt,endAt,element,dispose){if(element===void 0){element=null}
if(dispose===void 0){dispose=!1}
var video=container.children('video');if(url){if(!video.length){video=(0,jquery_24.default)('<video class="wb-video" muted playsinline>');container.append(video)}else if(video.get(0).src===url&&video.data('startAt')===startAt&&video.data('endAt')===endAt){return}
video.data('startAt',startAt);video.data('endAt',endAt);video.removeClass('visible');video.css({width:'',height:'',left:'',top:''});var videoElem_1=video.get(0);var timer=video.data('timer');clearInterval(timer);element=element?element:null;video.data('element',element);var resizer=video.data('resizer');if(resizer){if(element){element.elem.off('elementresize',resizer)}else{(0,jquery_24.default)(window).off('resize',resizer)}}
var lastWidth_1,lastHeight_1;resizer=function(){setTimeout(function(){var ratio=video.data('ratio');if(!ratio)
return;var ew=container.width();var eh=container.height();if(lastWidth_1===ew&&lastHeight_1===eh)
return;lastWidth_1=ew;lastHeight_1=eh;var er=ew/eh;var nw=0,nh=0,nl=0,nt=0;if(ratio>er){nh=eh;nw=nh*ratio;nl=(nw-ew)/2}else if(ratio<eh){nw=ew;nh=nw/ratio;nt=(nh-eh)/2}else{nw=ew;nh=eh}
video.css({width:nw,height:nh,left:-nl,top:-nt})},500)};video.data('resizer',resizer);if(element){element.elem.on('elementresize',resizer)}else{(0,jquery_24.default)(window).on('resize',resizer)}
var loaded_1=!1;(function(start,end){var clb=function(){if(loaded_1)
return;loaded_1=!0;var timer=video.data('timer');clearInterval(timer);timer=setInterval(function(){videoElem_1.currentTime=start;if(videoElem_1.paused)
videoElem_1.play();},((end?end:videoElem_1.duration)-start)*1000);videoElem_1.currentTime=start;videoElem_1.play();video.data('timer',timer);video.data('ratio',(video.width()/video.height()));var resizer=video.data('resizer');if(resizer)
resizer();};videoElem_1.autoplay=!0;video.data('loaded',clb);video.on('loadeddata',clb)})(startAt,endAt);video.data('resizer',resizer);videoElem_1.src=url;video.show().addClass('visible')}else{var videoElem=video.get(0);if(video.length&&videoElem){var loaded=video.data('loaded');if(loaded)
video.off('loadeddata',loaded);var timer=video.data('timer');clearInterval(timer);var elem=video.data('element');if(elem){var resizer=video.data('resizer');if(resizer)
elem.elem.off('elementresize',resizer);}
videoElem.pause();video.attr('src','');video.removeClass('visible').hide();if(dispose){video.removeData();video.remove()}}}}
function setYoutubeVideo(videoId,container,startAt,endAt,element,dispose){if(element===void 0){element=null}
if(dispose===void 0){dispose=!1}
wb_builder.addYoutubeAPIListener(function(){var player=container.children('.wb-youtube-video');if(videoId){var elemId=container.attr('id')||(''+Math.random()).substring(2);var youtubeElemId=elemId+'_youtube_container';if(!player.length){player=(0,jquery_24.default)('<div class="wb-youtube-video">'+'<div class="youtube" id="'+youtubeElemId+'"></div>'+'</div>');container.append(player)}else if(player.data('videoId')===videoId&&player.data('startAt')===startAt&&player.data('endAt')===endAt){return}
player.removeClass('visible').show();player.data('videoId',videoId);player.data('startAt',startAt);player.data('endAt',endAt);player.data('inited',!1);var timer_1=player.data('timer');clearInterval(timer_1);element=element?element:null;player.data('element',element);if(!player.data('resizer')){var viewportCont_1=element?element.elem:(0,jquery_24.default)(window);var lastWidth_2,lastHeight_2;var innerCont_1=null;var resizer=function(){setTimeout(function(){if(!innerCont_1)
innerCont_1=player.children('iframe.youtube');if(!innerCont_1.length)
return;var youtube=player.data('youtube');if(!youtube)
return;var w=viewportCont_1.width(),h=viewportCont_1.height();if(lastWidth_2===w&&lastHeight_2===h)
return;lastWidth_2=w;lastHeight_2=h;if(w/h>16/9){youtube.setSize(w,w/16*9);innerCont_1.css('left',0)}else{youtube.setSize(h/9*16,h);innerCont_1.css('left',-(innerCont_1.outerWidth()-w)/2)}},500)};var onfocus_1=function(){var youtube=player.data('youtube');if(!youtube)
return;if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();};player.data('resizer',resizer);player.data('onfocus',onfocus_1);if(element){element.elem.on('elementresize',resizer)}else{(0,jquery_24.default)(window).on('resize',resizer)}(0,jquery_24.default)(window).on('focus',onfocus_1)}
var readyTimer;var onYoutubeReady=function(callback){if(!player.data('ready')){clearTimeout(readyTimer);readyTimer=setTimeout(function(){onYoutubeReady(callback)},200)}else{callback()}};var initVideo=function(player,reload){if(reload===void 0){reload=!1}
var start=player.data('startAt');var end=player.data('endAt');var timer=player.data('timer');var youtube=player.data('youtube');if(!start)
start=0;if(!end)
end=null;clearInterval(timer);timer=setInterval(function(){youtube.seekTo(start);if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();},((end?end:youtube.getDuration()-0.5)-start)*1000);if(reload){youtube.seekTo(start);if(youtube.getPlayerState()!==YT.PlayerState.PLAYING)
youtube.playVideo();}
player.data('timer',timer);player.addClass('visible')};if(!player.data('youtube')){player.data('youtube',new YT.Player(youtubeElemId,{events:{playerVars:{autoplay:0,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3},onReady:function(){player.data('ready',!0)},onStateChange:function(e){if(e.data===YT.PlayerState.PLAYING){if(!player.data('inited')){initVideo(player);player.data('inited',!0)}}else if(e.data===YT.PlayerState.ENDED){initVideo(player,!0)}}}}))}
onYoutubeReady(function(){var youtube=player.data('youtube');var resizer=player.data('resizer');youtube.loadVideoById({videoId:videoId,startSeconds:startAt});youtube.mute();if(resizer)
resizer();})}else{if(player.length){var timer=player.data('timer');clearInterval(timer);var youtube=player.data('youtube');if(youtube&&typeof youtube.pauseVideo==='function')
youtube.pauseVideo();var onfocus=player.data('onfocus');if(onfocus){(0,jquery_24.default)(window).off('focus',onfocus)}
var clb=player.data('resizer');if(clb){var elem=player.data('element');if(elem){elem.elem.off('elementresize',clb)}else{(0,jquery_24.default)(window).off('resize',clb)}}
player.data('inited',!1);player.data('videoId',null);player.data('startAt',null);player.data('endAt',null);player.hide();if(dispose){player.removeData();player.remove()}}}})}});define("js/CheckBoxControl",["require","exports","jquery"],function(require,exports,jquery_25){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CheckBoxControl=void 0;var CheckBoxControl=(function(){function CheckBoxControl(label,name,value){if(label===void 0){label=''}
if(name===void 0){name=''}
if(value===void 0){value=!1}
this.elem=(0,jquery_25.default)('<div class="checkbox"></div>');var labelElem=(0,jquery_25.default)('<label>').appendTo(this.elem);this.input=(0,jquery_25.default)('<input type="checkbox" />').appendTo(labelElem);if(label)
labelElem.append(label);if(name)
this.input.attr("name",name);if(value)
this.setValue(value);}
CheckBoxControl.prototype.getValue=function(){return this.input.get(0).checked?!0:!1};CheckBoxControl.prototype.setValue=function(value){this.input.get(0).checked=value?!0:!1};return CheckBoxControl}());exports.CheckBoxControl=CheckBoxControl});define("js/ui/LineStyleControl",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_17,jquery_26){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.LineStyleControl=void 0;var LineStyleControl=(function(_super){__extends(LineStyleControl,_super);function LineStyleControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.lastBtn=null;_this.btns={};_this.useNone=!0;_this._elem.addClass('wb-line-style-control').append((_this.group=(0,jquery_26.default)('<div>')).addClass('btn-group').append(_this.buildButton('none')).append(_this.buildButton('solid')).append(_this.buildButton('dashed')).append(_this.buildButton('dotted')).append(_this.buildButton('double')));_this.setUseNone(!1);return _this}
LineStyleControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(typeof data.useNone==='boolean')
this.setUseNone(data.useNone);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}};LineStyleControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(typeof options.useNone==='boolean')
this.setUseNone(options.useNone);};LineStyleControl.prototype.setUseNone=function(use){if(this.useNone==use)
return this;this.useNone=use;if(use){this.group.prepend(this.btns.none)}else{this.btns.none.detach()}
return this};LineStyleControl.prototype.setActiveButton=function(style){var btn=this.btns[style];if(!btn)
return;if(this.value==style)
return;this.value=style;if(this.lastBtn)
this.lastBtn.removeClass('active');btn.addClass('active');this.lastBtn=btn};LineStyleControl.prototype.buildButton=function(style){var _this=this;var title=style.substring(0,1).toUpperCase()+style.substring(1);var icon=(0,jquery_26.default)('<span>').addClass("wbico wbico-line-".concat(style));if(style=='none')
icon.css({color:'#ccc'});this.btns[style]=(0,jquery_26.default)('<button>').addClass('btn btn-default').append(icon).attr({title:__(title)}).on('click',function(){_this.setActiveButton(style);if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});return this.btns[style]};LineStyleControl.prototype.getValue=function(){return this.value};LineStyleControl.prototype.setValue=function(value){this.setActiveButton(value)};return LineStyleControl}(UIComponent_17.UIComponent));exports.LineStyleControl=LineStyleControl});define("js/util/StyleUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stringifyCss=void 0;function stringifyCss(css){var result=[];for(var rule in css){if(!/-wb-/.test(rule)&&css.hasOwnProperty(rule)){result.push(rule+': '+css[rule])}}
return(result.length>0)?(result.join('; ')+';'):''}
exports.stringifyCss=stringifyCss});define("js/BorderControl",["require","exports","js/UIComponent","js/SizeSelector","js/ColorPicker","js/Label","js/VerticalLayout","js/ui/ThumbEditorControl","js/ui/Popover","js/FlowLayout","js/ui/LineStyleControl","js/CheckBox","js/util/ChangeUpdateUtil","jquery","js/util/StyleUtil"],function(require,exports,UIComponent_18,SizeSelector_3,ColorPicker_2,Label_4,VerticalLayout_5,ThumbEditorControl_3,Popover_4,FlowLayout_4,LineStyleControl_1,CheckBox_2,ChangeUpdateUtil_2,jquery_27,StyleUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.applyRadiusValue=exports.toRadiusValue=exports.BorderControl=exports.getBorderWidth=exports.buildCss=void 0;function normalizeStylePropertyValue(value,defaultValue){if(value===null||value===undefined)
return[defaultValue,defaultValue,defaultValue,defaultValue];if(typeof value!=="object")
return[value,value,value,value];if("length" in value){if(value.length===0)
return[defaultValue,defaultValue,defaultValue,defaultValue];if(value.length===1)
return[value[0],value[0],value[0],value[0]];if(value.length===2)
return[value[0],value[1],value[0],value[1]];if(value.length===3)
return[value[0],value[1],value[2],value[1]];return[value[0],value[1],value[2],value[3]]}
return[value.top,value.right,value.bottom,value.left]}
function buildCss(styleDef,differentBorders,borderColor,borderStyle,borderWeight,borderRadius){var style=(styleDef?styleDef:{}),res={differ:(style.differ?style.differ:!1),differRadius:((typeof style.differRadius!=='undefined')?(style.differRadius?!0:!1):(style.differ?!0:!1)),color:(style.color?normalizeStylePropertyValue(style.color,null):'#000000'),style:(style.style?normalizeStylePropertyValue(style.style,'none;'):'none'),weight:(style.weight?normalizeStylePropertyValue(style.weight,0):0),radius:((typeof style.radius==='undefined'||style.radius===null)?null:(style.radius?normalizeStylePropertyValue(style.radius,0):0)),};res.css={};if(differentBorders)
res.differ=differentBorders.getValue();if(borderColor)
res.color=[borderColor[0].getValue(),borderColor[1].getValue(),borderColor[2].getValue(),borderColor[3].getValue()];if(borderStyle)
res.style=[borderStyle[0].getValue(),borderStyle[1].getValue(),borderStyle[2].getValue(),borderStyle[3].getValue()];if(borderWeight)
res.weight=[borderWeight[0].getValue(),borderWeight[1].getValue(),borderWeight[2].getValue(),borderWeight[3].getValue()];if(borderRadius)
res.radius=[borderRadius[0].getValue(),borderRadius[1].getValue(),borderRadius[2].getValue(),borderRadius[3].getValue()];if(res.differ){res.css["border-top"]=idxVal(res.weight||0,0)+'px '+idxVal(res.style||'none',0)+' '+idxVal(res.color||'#000',0);res.css["border-right"]=idxVal(res.weight||0,1)+'px '+idxVal(res.style||'none',1)+' '+idxVal(res.color||'#000',1);res.css["border-bottom"]=idxVal(res.weight||0,2)+'px '+idxVal(res.style||'none',2)+' '+idxVal(res.color||'#000',2);res.css["border-left"]=idxVal(res.weight||0,3)+'px '+idxVal(res.style||'none',3)+' '+idxVal(res.color||'#000',3)}else{res.css.border=idxVal(res.weight||0,-1)+'px '+idxVal(res.style||'none',-1)+' '+idxVal(res.color||'#000',-1)}
if(res.differRadius){if(typeof res.radius!=='undefined'&&res.radius!==null){res.css['border-radius']=res.css['-webkit-border-radius']=res.css['-moz-border-radius']=idxVal(res.radius||0,0)+'px '+idxVal(res.radius||0,1)+'px '+idxVal(res.radius||0,2)+'px '+idxVal(res.radius||0,3)+'px'}}else{if(typeof res.radius!=='undefined'&&res.radius!==null){res.css['border-radius']=res.css['-webkit-border-radius']=res.css['-moz-border-radius']=idxVal(res.radius||0,-1)+'px'}}
res.cssRaw=(0,StyleUtil_1.stringifyCss)(res.css);return jquery_27.default.extend(!0,{},res)}
exports.buildCss=buildCss;function getBorderWidth(b,side){var style=(typeof b.style==="object")?(b.differ?b.style[side]:b.style[0]):b.style;if(style==="none")
return 0;return 1*((typeof b.weight==="object")?(b.differ?b.weight[side]:b.weight[0]):b.weight)}
exports.getBorderWidth=getBorderWidth;var BorderControl=(function(_super){__extends(BorderControl,_super);function BorderControl(placement,showRadius,noTransparent){if(placement===void 0){placement='bottom'}
if(showRadius===void 0){showRadius=!1}
if(noTransparent===void 0){noTransparent=!0}
var _this=_super.call(this)||this;_this.absPopover=!1;_this.placement="bottom";_this.showRadius=!1;_this.noTransparent=!0;_this.onChange=null;_this.popover=null;_this.value=buildCss(null);_this.configSuplier=null;_this.thumbCtrl=new ThumbEditorControl_3.ThumbEditorControl().onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});_this._elem.addClass('wb-border-controll').append(_this.thumbCtrl.getElem());_this.showRadius=showRadius?showRadius:_this.showRadius;_this.noTransparent=(noTransparent!==null)?noTransparent:_this.noTransparent;_this.setPlacement(placement?placement:_this.placement,!0);return _this}
BorderControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(data.placement)
this.setPlacement(data.placement);if('showRadius' in data)
this.setShowRadius(data.showRadius?!0:!1);if('noTransparent' in data)
this.setNoTransparent(data.noTransparent?!0:!1);if('absPopover' in data)
this.setAbsPopover(data.absPopover?!0:!1);this.configSuplier=(typeof data.configSuplier==='function')?data.configSuplier:null;if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}};BorderControl.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};BorderControl.prototype.edit=function(){var _this=this;if(!this.popover){this.popover=new BorderPopover(this.thumbCtrl.getElem(),function(value){_this.value=buildCss(jquery_27.default.extend({},value));_this.updatePreview();_this._triggerOnChange()});this.popover.setNoRadius(!this.showRadius);this.popover.setNoTransparent(this.noTransparent)}
if(this.popover.isVisible()){this.popover.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.popover.edit(this.value,config||{width:200,height:200})};BorderControl.prototype.clear=function(){this.value=buildCss({weight:0,style:'none',color:'#000000'});this.updatePreview();this._triggerOnChange()};BorderControl.prototype._triggerOnChange=function(){if(typeof this.onChange==='function'){this.onChange.call(this)}
this.onValueChanged()};BorderControl.prototype.setOnChange=function(onChange){this.onChange=onChange};BorderControl.prototype.setPlacement=function(placement,force){if(force===void 0){force=!1}
if(this.placement!=placement&&!force)
return;this.placement=placement};BorderControl.prototype.setNoTransparent=function(value){this.noTransparent=value;if(this.popover)
this.popover.setNoTransparent(value);};BorderControl.prototype.setShowRadius=function(value){this.showRadius=value;if(this.popover)
this.popover.setNoRadius(!value);};BorderControl.prototype.setAbsPopover=function(value){this.absPopover=value};BorderControl.prototype.getValue=function(){return buildCss(jquery_27.default.extend({},this.value))};BorderControl.prototype.setValue=function(value){this.value=buildCss(jquery_27.default.extend({},value));this.updatePreview()};BorderControl.prototype.updatePreview=function(){applyPreviewStyles(this.value,this.thumbCtrl.getPreviewElem())};BorderControl.supportsMultipleObjectBindings=function(){return!1};BorderControl.prototype.setComponentOptions=function(options){if("noTransparent" in options)
this.setNoTransparent(!!options.noTransparent);if("showRadius" in options)
this.setShowRadius(!!options.showRadius);if('absPopover' in options)
this.setAbsPopover(options.absPopover?!0:!1);this.configSuplier=(typeof options.configSuplier==='function')?options.configSuplier:null};return BorderControl}(UIComponent_18.UIComponent));exports.BorderControl=BorderControl;var BorderPopover=(function(_super){__extends(BorderPopover,_super);function BorderPopover(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Border'))||this;_this.onChange=onChange;_this.value=null;_this.config={width:200,height:200};_this.selector=new BorderPartSelector(function(a,b,dbl){return _this.selectComponent(a,b,dbl)});_this.color=new ColorPicker_2.ColorPicker().setNoTransparent(!0).setOnChange(function(){return _this.onChangeColor()});_this.width=new SizeSelector_3.SizeSelector().setMinValue(0).setUnits('px').setUnitsVisible(!0).setSpinnerVisible(!1).setNoRepeat(!0).on('change keyup',function(e){return _this.onChangeWidth((e&&e.type=='keyup')?!0:!1)});_this.radius=new SizeSelector_3.SizeSelector().setMinValue(0).setUnits('px').setUnitsVisible(!0).setSpinnerVisible(!1).setNoRepeat(!0).on('change keyup',function(e){return _this.onChangeRadius((e&&e.type=='keyup')?!0:!1)});_this.style=new LineStyleControl_1.LineStyleControl(function(){return _this.onChangeStyle()}).setUseNone(!0);_this.borderStuff=new VerticalLayout_5.VerticalLayout();_this.radiusStuff=new VerticalLayout_5.VerticalLayout();_this.diffBorders=new CheckBox_2.default(__('Use different borders')).on('change',function(){return _this.onChangeDiffBorders()});_this.diffCorners=new CheckBox_2.default(__('Use different corners')).on('change',function(){return _this.onChangeDiffCorners()});_this.presets=new Presets(function(value){if(!_this.value)
return;var val=(typeof value==='function')?value(_this.config):value;var idx=(_this.diffCorners.getValue()?_this.idxCorner:-1);_this.value.radius=idxValSet(_this.value.radius||0,idx,val);_this.radius.setValue(idxVal(_this.value.radius,idx));_this.handleChange()});_this.idxBorder=-1;_this.idxCorner=-1;_this.waitToUpdateWidth=new ChangeUpdateUtil_2.ChangeUpdateState(function(){return _this.onChangeWidth(!1)},undefined,500);_this.waitToUpdateRadius=new ChangeUpdateUtil_2.ChangeUpdateState(function(){return _this.onChangeRadius(!1)},undefined,500);var main=new VerticalLayout_5.VerticalLayout().setSpacing(12).addAllChildren([new FlowLayout_4.FlowLayout().setSpacing('full').addAllChildren([_this.selector,new VerticalLayout_5.VerticalLayout().css({minWidth:166}).addAllChildren([_this.borderStuff.setSpacing(11).addAllChildren([new FlowLayout_4.FlowLayout().setSpacing('full').addAllChildren([wLabel(__('Width'),_this.width),wLabel(__('Color'),_this.color),]),wLabel(__('Style'),_this.style),]),_this.radiusStuff.setSpacing(11).addAllChildren([wLabel(__('Radius'),_this.radius),wLabel(__('Style'),_this.presets),])]),]),new VerticalLayout_5.VerticalLayout().setSpacing(10).addAllChildren([_this.diffBorders,_this.diffCorners,]),]);_this.setContent(main.getElem());return _this}
BorderPopover.prototype.dispose=function(){this.selector.destroy();this.color.destroy();this.width.destroy();this.radius.destroy();this.style.destroy();_super.prototype.dispose.call(this)};BorderPopover.prototype.setVisible=function(visible){if(!visible)
this.color.hidePicker();_super.prototype.setVisible.call(this,visible)};BorderPopover.prototype.onBodyClick=function(){this.color.hidePicker()};BorderPopover.prototype.updatePreview=function(){if(!this.value)
return;applyPreviewStyles(this.value,this.selector.getPreviewElem())};BorderPopover.prototype.edit=function(value,config){this.value=value;if(config)
this.config=config;this.selectComponent(0,-1);this.diffBorders.setValue(value.differ||!1);this.diffCorners.setValue((typeof value.differRadius!=='undefined')?(value.differRadius||!1):(value.differ||!1));this.selector.select(0,-1);this.selector.setDiffBorders(this.diffBorders.getValue());this.selector.setDiffCorners(this.diffCorners.getValue());this.setVisible(!0);this.updatePreview()};BorderPopover.prototype.handleChange=function(){if(this.value){this.value.differ=this.diffBorders.getValue();this.value.differRadius=this.diffCorners.getValue()}
this.onChange.call(this,this.value);this.updatePreview()};BorderPopover.prototype.onChangeColor=function(){if(!this.value)
return;this.value.color=idxValSet(this.value.color,(this.diffBorders.getValue()?this.idxBorder:-1),this.color.getValue());this.handleChange()};BorderPopover.prototype.onChangeWidth=function(keyEvent){if(!this.value)
return;var idx=(this.diffBorders.getValue()?this.idxBorder:-1);var val=this.width.getValue();var oval=idxVal(this.value.weight,idx);if(keyEvent){if(oval==val)
return;(0,ChangeUpdateUtil_2.waitForChangeEndToUpdate)(this.waitToUpdateWidth);return}
this.value.weight=idxValSet(this.value.weight,idx,val);var style=idxVal(this.value.style,idx);var width=idxVal(this.value.weight,idx);if(width>0&&style=='none'){this.value.style=idxValSet(this.value.style,idx,'solid');this.selectComponent(this.idxBorder,this.idxCorner)}
this.handleChange()};BorderPopover.prototype.onChangeRadius=function(keyEvent){if(!this.value)
return;var idx=(this.diffCorners.getValue()?this.idxCorner:-1);var val=this.radius.getValue();var oval=idxVal(this.value.radius,idx);if(keyEvent){if(oval==val)
return;(0,ChangeUpdateUtil_2.waitForChangeEndToUpdate)(this.waitToUpdateRadius);return}
this.value.radius=idxValSet(this.value.radius||0,idx,val);this.handleChange()};BorderPopover.prototype.onChangeStyle=function(){if(!this.value)
return;var idx=this.diffBorders.getValue()?this.idxBorder:-1;this.value.style=idxValSet(this.value.style,idx,this.style.getValue());var style=idxVal(this.value.style,idx);var width=idxVal(this.value.weight,idx);if(style=='double'&&width<3){this.value.weight=idxValSet(this.value.weight,idx,3);this.selectComponent(this.idxBorder,this.idxCorner)}else if(style!='none'&&width==0){this.value.weight=idxValSet(this.value.weight,idx,1);this.selectComponent(this.idxBorder,this.idxCorner)}
this.handleChange()};BorderPopover.prototype.onChangeDiffBorders=function(){if(!this.value)
return;var diff=this.diffBorders.getValue();this.selector.setDiffBorders(diff);this.selectComponent(this.idxBorder,this.idxCorner);this.handleChange()};BorderPopover.prototype.onChangeDiffCorners=function(){if(!this.value)
return;var diff=this.diffCorners.getValue();this.selector.setDiffCorners(diff);this.selectComponent(this.idxBorder,this.idxCorner);this.handleChange()};BorderPopover.prototype.selectComponent=function(idxBorder,idxCorner,doubleClick){if(doubleClick===void 0){doubleClick=!1}
if(doubleClick){if(idxBorder>=0){this.diffBorders.setValue(!this.diffBorders.getValue());this.onChangeDiffBorders()}else if(idxCorner>=0){this.diffCorners.setValue(!this.diffCorners.getValue());this.onChangeDiffCorners()}}
this.idxBorder=idxBorder;this.idxCorner=idxCorner;if(this.value){if(idxBorder>=0){var diff=this.diffBorders.getValue();this.width.setValue(idxVal(this.value.weight,diff?idxBorder:-1));this.style.setValue(idxVal(this.value.style,diff?idxBorder:-1));this.color.setValue(idxVal(this.value.color,diff?idxBorder:-1))}
if(idxCorner>=0){var diffCorners=this.diffCorners.getValue();this.radius.setValue(idxVal(this.value.radius,diffCorners?idxCorner:-1))}}
this.borderStuff.setVisible(idxBorder>=0);this.radiusStuff.setVisible(idxCorner>=0)};BorderPopover.prototype.setNoRadius=function(noRadius){this.selector.setNoRadius(noRadius);this.diffCorners.setVisible(!noRadius)};BorderPopover.prototype.setNoTransparent=function(noTransparent){this.color.setNoTransparent(noTransparent)};BorderPopover.prototype.getMouseDowned=function(){var colorPopover=this.color.getPopover();return colorPopover?colorPopover.getMouseDowned():_super.prototype.getMouseDowned.call(this)};return BorderPopover}(Popover_4.Popover));var BorderPartSelector=(function(_super){__extends(BorderPartSelector,_super);function BorderPartSelector(onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.cells=[];_this.noRadius=!1;_this.diffBorders=!1;_this.diffCorners=!1;_this.idxBorder=-1;_this.idxCorner=-1;_this._elem.addClass('wb-border-part-ctrl');var _loop_4=function(y){var row=(0,jquery_27.default)('<div>');var _loop_5=function(x){var cell=(0,jquery_27.default)('<span>').addClass('wb-cell-ctrl').on('click dblclick',function(e){return _this.onClick(y*3+x,e.type=='dblclick')});if(x==1&&y==1)
cell.addClass('wb-cell-na-ctrl');this_2.cells.push(cell);row.append(cell)};for(var x=0;x<3;x++){_loop_5(x)}
this_2._elem.append(row)};var this_2=this;for(var y=0;y<3;y++){_loop_4(y)}
_this._elem.append((_this.previewElem=(0,jquery_27.default)('<span>')).addClass('wb-brd-ctrl wb-ethereal'));return _this}
BorderPartSelector.prototype.getPreviewElem=function(){return this.previewElem};BorderPartSelector.prototype.select=function(idxBorder,idxCorner){this.idxBorder=idxBorder;this.idxCorner=idxCorner;this.updateSelection()};BorderPartSelector.prototype.setNoRadius=function(noRadius){if(this.noRadius==noRadius)
return;this.noRadius=noRadius;if(noRadius){this.cells[0].addClass('wb-cell-na-ctrl');this.cells[2].addClass('wb-cell-na-ctrl');this.cells[6].addClass('wb-cell-na-ctrl');this.cells[8].addClass('wb-cell-na-ctrl')}else{this.cells[0].removeClass('wb-cell-na-ctrl');this.cells[2].removeClass('wb-cell-na-ctrl');this.cells[6].removeClass('wb-cell-na-ctrl');this.cells[8].removeClass('wb-cell-na-ctrl')}};BorderPartSelector.prototype.setDiffBorders=function(diff){if(this.diffBorders==diff)
return;this.diffBorders=diff;this.updateSelection()};BorderPartSelector.prototype.setDiffCorners=function(diff){if(this.diffCorners==diff)
return;this.diffCorners=diff;this.updateSelection()};BorderPartSelector.prototype.updateSelection=function(){this.setCell(1,(!this.diffBorders&&this.idxBorder>=0)||this.idxBorder==0);this.setCell(3,(!this.diffBorders&&this.idxBorder>=0)||this.idxBorder==3);this.setCell(5,(!this.diffBorders&&this.idxBorder>=0)||this.idxBorder==1);this.setCell(7,(!this.diffBorders&&this.idxBorder>=0)||this.idxBorder==2);this.setCell(0,(!this.diffCorners&&this.idxCorner>=0)||this.idxCorner==0);this.setCell(2,(!this.diffCorners&&this.idxCorner>=0)||this.idxCorner==1);this.setCell(6,(!this.diffCorners&&this.idxCorner>=0)||this.idxCorner==3);this.setCell(8,(!this.diffCorners&&this.idxCorner>=0)||this.idxCorner==2)};BorderPartSelector.prototype.setCell=function(cell,val){if(this.cells[cell].hasClass('active')==val)
return;if(val){this.cells[cell].addClass('active')}else{this.cells[cell].removeClass('active')}};BorderPartSelector.prototype.onClick=function(cell,doubleClick){if(this.noRadius&&(cell==0||cell==2||cell==6||cell==8)){return}
if(cell==1){this.idxBorder=0;this.idxCorner=-1}else if(cell==3){this.idxBorder=3;this.idxCorner=-1}else if(cell==5){this.idxBorder=1;this.idxCorner=-1}else if(cell==7){this.idxBorder=2;this.idxCorner=-1}else if(cell==0){this.idxBorder=-1;this.idxCorner=0}else if(cell==2){this.idxBorder=-1;this.idxCorner=1}else if(cell==6){this.idxBorder=-1;this.idxCorner=3}else if(cell==8){this.idxBorder=-1;this.idxCorner=2}
this.onChange.call(this,this.idxBorder,this.idxCorner,doubleClick);this.updateSelection()};return BorderPartSelector}(UIComponent_18.UIComponent));var Presets=(function(_super){__extends(Presets,_super);function Presets(onSelect){var _this=_super.call(this)||this;_this.onSelect=onSelect;_this._elem.addClass('btn-group wb-border-preset-ctrl');var presets=[{preview:0,value:0},{preview:4,value:3},{preview:8,value:10},{preview:10,value:function(c){return(Math.min(c.width,c.height)/4)}},{preview:100,value:function(c){return(Math.min(c.width,c.height)/2)}},];for(var _i=0,presets_1=presets;_i<presets_1.length;_i++){var p=presets_1[_i];_this._elem.append(_this.buildButton(buildCss({differ:!0,weight:[2,2,0,0],style:'solid',color:'#333',differRadius:!0,radius:[0,p.preview,0,0],}),p.value))}
return _this}
Presets.prototype.buildButton=function(style,radius){var _this=this;var css=__assign({},style.css);if(style.style=='none'||style.style[0]=='none'){css.border='1px dashed #cccccc'}
return(0,jquery_27.default)('<button>').addClass('btn btn-default').append((0,jquery_27.default)('<span>').css(css)).on('click',function(){return _this.onSelect.call(_this,radius)})};return Presets}(UIComponent_18.UIComponent));function wLabel(label,elem){return new VerticalLayout_5.VerticalLayout().addAllChildren([new Label_4.Label(label),elem,])}
function idxValSet(value,idx,newVal){if(!(value instanceof Array))
value=[value,value,value,value];if(value.length<2)
value=[value[0],value[0],value[0],value[0]];if(idx<0){value=[newVal,newVal,newVal,newVal]}else{value[idx]=newVal}
return value}
function idxVal(value,idx){if(!(value instanceof Array))
return value;if(value.length<2)
return value[0];return value[(value.length>idx&&idx>=0)?idx:0]}
function applyPreviewStyles(value,elem){var val=jquery_27.default.extend(!0,{},value);if(val.weight instanceof Array)
val.weight=__spreadArray([],val.weight,!0);for(var i=0;i<4;i++){val.weight=idxValSet(val.weight,i,Math.min(idxVal(val.weight,i),10))}
val=buildCss(val);var brdDiff=val.differ||!1;var css=__assign({},val.css);if(idxVal(val.weight,brdDiff?0:-1)==0||idxVal(val.style,brdDiff?0:-1)=='none'){css['border-top']='1px dashed #cccccc'}
if(idxVal(val.weight,brdDiff?1:-1)==0||idxVal(val.style,brdDiff?1:-1)=='none'){css['border-right']='1px dashed #cccccc'}
if(idxVal(val.weight,brdDiff?2:-1)==0||idxVal(val.style,brdDiff?2:-1)=='none'){css['border-bottom']='1px dashed #cccccc'}
if(idxVal(val.weight,brdDiff?3:-1)==0||idxVal(val.style,brdDiff?3:-1)=='none'){css['border-left']='1px dashed #cccccc'}
elem.css(css)}
function toRadiusValue(border){var diff=border?((typeof border.differRadius!=='undefined')?border.differRadius:border.differ):!1;var value=(border&&typeof border.radius!=='undefined')?border.radius:0;var rad=diff?("".concat(idxVal(value,0),"px")+" ".concat(idxVal(value,1),"px")+" ".concat(idxVal(value,2),"px")+" ".concat(idxVal(value,3),"px")):"".concat(idxVal(value,-1),"px");var css={"border-radius":rad,"-moz-border-radius":rad,"-webkit-border-radius":rad};return{lt:idxVal(value,0),rt:idxVal(value,1),rb:idxVal(value,2),lb:idxVal(value,3),differ:diff,css:css,cssRaw:(0,StyleUtil_1.stringifyCss)(css)}}
exports.toRadiusValue=toRadiusValue;function applyRadiusValue(border,radiusValue){var value=radiusValue||toRadiusValue();border.differRadius=value.differ?!0:!1;border.radius=[value.lt||0,value.rt||0,value.rb||0,value.lb||0]}
exports.applyRadiusValue=applyRadiusValue});define("js/RoundCornersControl",["require","exports","jquery","js/SizeSelector","js/CheckBox","js/UIComponent","js/util/StyleUtil"],function(require,exports,jquery_28,SizeSelector_4,CheckBox_3,UIComponent_19,StyleUtil_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.RoundCornersControl=void 0;var RoundCornersControl=(function(_super){__extends(RoundCornersControl,_super);function RoundCornersControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.differ=!1;var table=(0,jquery_28.default)('<table class="wb-roundcorner-control">'+"<tr><td></td><td></td><td></td><td></td></tr>"+"<tr><td></td><td></td><td></td><td></td></tr>"+"</table>");_this.differInput=new CheckBox_3.default(__('Use different corners'),!1,!0);_this.differInput.css({marginTop:10});_this._elem.append(table);_this._elem.append(_this.differInput.getElem());_this.square=(0,jquery_28.default)('<div class="smaller-square"></div>');var tds=table.find("td"),idx=0,td=null;td=tds.eq(idx++);td.append((_this._lt=new SizeSelector_4.SizeSelector()).getElem());_this._lt.setMinValue(0);_this._lt.on("change keyup",function(){_this.updateStyle();_this._triggerOnChange()});_this._lt.on("cut paste",function(){setTimeout(function(){_this.updateStyle();_this._triggerOnChange()},0)});td.append(_this.square);td=tds.eq(idx++);td.append(_this._lt_p=(0,jquery_28.default)('<div class="wb-roundcorner-control-clt"></div>'));td=tds.eq(idx++);td.append(_this._rt_p=(0,jquery_28.default)('<div class="wb-roundcorner-control-crt"></div>'));td=tds.eq(idx++);td.append((_this._rt=new SizeSelector_4.SizeSelector()).getElem());_this._rt.setMinValue(0);_this._rt.on("change keyup",function(){_this.updateStyle();_this._triggerOnChange()});_this._rt.on("cut paste",function(){setTimeout(function(){_this.updateStyle();_this._triggerOnChange()},0)});td=tds.eq(idx++);td.append((_this._lb=new SizeSelector_4.SizeSelector()).getElem());_this._lb.setMinValue(0);_this._lb.on("change keyup",function(){_this.updateStyle();_this._triggerOnChange()});_this._lb.on("cut paste",function(){setTimeout(function(){_this.updateStyle();_this._triggerOnChange()},0)});td=tds.eq(idx++);td.append(_this._lb_p=(0,jquery_28.default)('<div class="wb-roundcorner-control-clb"></div>'));td=tds.eq(idx++);td.append(_this._rb_p=(0,jquery_28.default)('<div class="wb-roundcorner-control-crb"></div>'));td=tds.eq(idx++);td.append((_this._rb=new SizeSelector_4.SizeSelector()).getElem());_this._rb.setMinValue(0);_this._rb.on("change keyup",function(){_this.updateStyle();_this._triggerOnChange()});_this._rb.on("cut paste",function(){setTimeout(function(){_this.updateStyle();_this._triggerOnChange()},0)});_this.input=_this._elem.find("input");_this.differInput.on('change',function(){_this.differ=_this.differInput.getValue();_this.updateView()});_this.updateView();return _this}
RoundCornersControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){return func.call(el,fields)}})(this,data.change)}};RoundCornersControl.prototype.updateView=function(){if(this.differ){this.square.css('display','none');this._rt.getElem().show();this._rb.getElem().show();this._lb.getElem().show();this._lt_p.show();this._rt_p.show();this._rb_p.show();this._lb_p.show()}else{this.square.css('display','inline-block');this._rt.getElem().hide();this._rb.getElem().hide();this._lb.getElem().hide();this._lt_p.hide();this._rt_p.hide();this._rb_p.hide();this._lb_p.hide()}};RoundCornersControl.prototype._triggerOnChange=function(){if(typeof this.onChange==='function'){this.onChange.call(this)}
this.onValueChanged()};RoundCornersControl.prototype.updateStyle=function(){this._lt_p.css("border-radius",this._lt.getValue()+"px 0 0 0");this._rt_p.css("border-radius","0 "+this._rt.getValue()+"px 0 0");this._rb_p.css("border-radius","0 0 "+this._rb.getValue()+"px 0");this._lb_p.css("border-radius","0 0 0 "+this._lb.getValue()+"px");this.square.css("border-radius",this._lt.getValue()+"px")};RoundCornersControl.prototype.getValue=function(){var rad;if(this.differ){rad=this._lt.getValue()+"px"+" "+this._rt.getValue()+"px"+" "+this._rb.getValue()+"px"+" "+this._lb.getValue()+"px"}else{rad=this._lt.getValue()+"px"+" "+this._lt.getValue()+"px"+" "+this._lt.getValue()+"px"+" "+this._lt.getValue()+"px"}
var css={"border-radius":rad,"-moz-border-radius":rad,"-webkit-border-radius":rad};return{lt:this._lt.getValue(),rt:this._rt.getValue(),rb:this._rb.getValue(),lb:this._lb.getValue(),differ:this.differ,css:css,cssRaw:(0,StyleUtil_2.stringifyCss)(css)}};RoundCornersControl.prototype.setValue=function(value){var obj=value;if(!obj)
obj={lt:0,rt:0,rb:0,lb:0,differ:!1};this._lt.setValue(obj.lt);this._rt.setValue(obj.rt);this._rb.setValue(obj.rb);this._lb.setValue(obj.lb);if(!('differ' in obj)){this.differ=(obj.lt!==obj.rt||obj.lt!==obj.rb||obj.lt!==obj.lb||obj.rt!==obj.rb||obj.rt!==obj.lb||obj.rb!==obj.lb)}else{this.differ=obj.differ?!0:!1}
this.differInput.setValue(this.differ);this.updateView();this.updateStyle()};RoundCornersControl.supportsMultipleObjectBindings=function(){return!1};RoundCornersControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return RoundCornersControl}(UIComponent_19.UIComponent));exports.RoundCornersControl=RoundCornersControl});define("js/UIModeScaleFactors",["require","exports","jquery","js/UIComponent","js/SizeSelector","js/Service","js/CustomContainer","js/BuilderEvent"],function(require,exports,jquery_29,UIComponent_20,SizeSelector_5,Service_4,CustomContainer_2,BuilderEvent_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UIModeScaleFactors=void 0;var UIModeScaleFactors=exports.UIModeScaleFactors=(function(_super){__extends(UIModeScaleFactors,_super);function UIModeScaleFactors(tagType){var _this=_super.call(this,tagType)||this;if(tagType==='%inherit%')
return _this;var labelList={};var label=function(ico,mode){var title=Service_4.Service.modeManager.getModeName(mode);return{type:CustomContainer_2.CustomContainer,content:"<span class=\"fa fa-".concat(ico,"\"></span>"),attr:{title:title},css:{textAlign:'center'},init:function(){labelList[mode]=this}}};var lastMode='';var labelUpate=function(mode){if(lastMode==mode)
return;if(lastMode&&lastMode in labelList){labelList[lastMode].getElem().css({color:''})}
if(mode&&mode in labelList){labelList[mode].getElem().css({color:'#ff7100'})}
if(lastMode&&lastMode in _this.uiFields){_this.uiFields[lastMode].setActive(!1)}
if(mode&&mode in _this.uiFields){_this.uiFields[mode].setActive(!0)}
lastMode=mode};Service_4.Service.UIBuilder.buildLayout({type:"HorizontalLayout",noPadding:!0,columnWeights:[3,3,3,3],columnWeightsXs:[3,3,3,3],children:[{type:'VerticalLayout',children:[label('desktop',Service_4.Service.modeManager.MODE_TV),{type:SizeSelector_5.SizeSelector,id:'tv',units:'%',noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return _this.triggerOnChange()}},]},{type:'VerticalLayout',enabled:!1,children:[label('laptop',Service_4.Service.modeManager.MODE_DESKTOP),{type:SizeSelector_5.SizeSelector,id:'desktop',units:'%',noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return _this.triggerOnChange()}},]},{type:'VerticalLayout',children:[label('tablet',Service_4.Service.modeManager.MODE_TABLET),{type:SizeSelector_5.SizeSelector,id:'tablet',units:'%',noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return _this.triggerOnChange()}},]},{type:'VerticalLayout',children:[label('mobile',Service_4.Service.modeManager.MODE_PHONE),{type:SizeSelector_5.SizeSelector,id:'phone',units:'%',noFixedWidth:!0,hideSpinner:!0,unitsWidth:22,noRepeat:!0,min:0,max:500,change:function(){return _this.triggerOnChange()}},]},]},_this.getElem(),_this.uiFields={});BuilderEvent_1.GlobalEvents.on('modes.changed',function(e){return labelUpate(e.mode)});labelUpate(Service_4.Service.modeManager.getMode());_this.uiFields.phone.on("keyup",function(){return _this.onValueChanged()});_this.uiFields.phone.on("cut paste",function(){return setTimeout(function(){return _this.onValueChanged()},0)});_this.uiFields.tablet.on("keyup",function(){return _this.onValueChanged()});_this.uiFields.tablet.on("cut paste",function(){return setTimeout(function(){return _this.onValueChanged()},0)});_this.uiFields.desktop.on("keyup",function(){return _this.onValueChanged()});_this.uiFields.desktop.on("cut paste",function(){return setTimeout(function(){return _this.onValueChanged()},0)});_this.uiFields.tv.on("keyup",function(){return _this.onValueChanged()});_this.uiFields.tv.on("cut paste",function(){return setTimeout(function(){return _this.onValueChanged()},0)});return _this}
UIModeScaleFactors.prototype.buildInit=function(def,fields){this.setMin(def.min||0).setMax(def.max||500);this.setValue(def.value||null);this.setOnChange(def.change||null)};UIModeScaleFactors.prototype.setMin=function(value){this.uiFields.phone.setMinValue(value);this.uiFields.tablet.setMinValue(value);this.uiFields.desktop.setMinValue(value);this.uiFields.tv.setMinValue(value);return this};UIModeScaleFactors.prototype.setMax=function(value){this.uiFields.phone.setMaxValue(value);this.uiFields.tablet.setMaxValue(value);this.uiFields.desktop.setMaxValue(value);this.uiFields.tv.setMaxValue(value);return this};UIModeScaleFactors.prototype.setOnChange=function(onChange){this.onChange=onChange};UIModeScaleFactors.prototype.getValue=function(){return{tv:this.uiFields.tv.getValue(),desktop:this.uiFields.desktop.getValue(),tablet:this.uiFields.tablet.getValue(),phone:this.uiFields.phone.getValue(),}};UIModeScaleFactors.prototype.setValue=function(value){var val=jquery_29.default.extend({},UIModeScaleFactors.defaultValue,value);this.uiFields.tv.setValue(val.tv);this.uiFields.desktop.setValue(val.desktop);this.uiFields.tablet.setValue(val.tablet);this.uiFields.phone.setValue(val.phone)};UIModeScaleFactors.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);this.uiFields.tv.setEnabled(enabled);this.uiFields.desktop.setEnabled(enabled);this.uiFields.tablet.setEnabled(enabled);this.uiFields.phone.setEnabled(enabled)};UIModeScaleFactors.prototype.triggerOnChange=function(){if(typeof this.onChange==="function")
this.onChange.call(this);this.onValueChanged()};UIModeScaleFactors.supportsMultipleObjectBindings=function(){return!1};UIModeScaleFactors.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("min" in options)
this.setMin(options.min);if("max" in options)
this.setMax(options.max);};UIModeScaleFactors.defaultValue={tv:100,desktop:100,tablet:100,phone:100,};return UIModeScaleFactors}(UIComponent_20.UIComponent))});define("js/element/ControlsSelectionBorder",["require","exports","js/CommonTypes","js/util/EventUtil","jquery"],function(require,exports,CommonTypes_1,EventUtil_2,jquery_30){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SelectionBorder=exports.isDoingResize=exports.ValueType=exports.SelectionBorderType=void 0;var SelectionBorderType;(function(SelectionBorderType){SelectionBorderType[SelectionBorderType.TOP=0]="TOP";SelectionBorderType[SelectionBorderType.RIGHT=1]="RIGHT";SelectionBorderType[SelectionBorderType.BOTTOM=2]="BOTTOM";SelectionBorderType[SelectionBorderType.LEFT=3]="LEFT"})(SelectionBorderType||(exports.SelectionBorderType=SelectionBorderType={}));var ValueType;(function(ValueType){ValueType[ValueType.PADDING=0]="PADDING";ValueType[ValueType.MARGIN=1]="MARGIN";ValueType[ValueType.PARENT_MARGIN=2]="PARENT_MARGIN"})(ValueType||(exports.ValueType=ValueType={}));function getDirection(valType,type,align){if(valType==ValueType.MARGIN){if(type==SelectionBorderType.TOP){return-1}else if(type==SelectionBorderType.RIGHT){return(align==CommonTypes_1.FlexAlignItems.Center)?2:1}else if(type==SelectionBorderType.BOTTOM){return 1}else if(type==SelectionBorderType.LEFT){return(align==CommonTypes_1.FlexAlignItems.Center)?-2:-1}}else if(valType==ValueType.PADDING){if(type==SelectionBorderType.TOP){return 1}else if(type==SelectionBorderType.RIGHT){return-1}else if(type==SelectionBorderType.BOTTOM){return-1}else if(type==SelectionBorderType.LEFT){return 1}}
return 1}
var DragTarget=(function(){function DragTarget(border,valueType,e,valueChangeHandler){this.border=border;this.valueType=valueType;this.valueChangeHandler=valueChangeHandler;this.pos=DragTarget.posFromEvent(e,{left:0,top:0});if(valueType==ValueType.PADDING){this.value=border.getPadding();this.border.setPaddingActive(!0)}else if(valueType==ValueType.MARGIN){this.value=border.getMargin();this.border.setMarginActive(!0)}}
DragTarget.prototype.dispose=function(){if(this.valueType==ValueType.PADDING){this.border.setPaddingActive(!1)}else if(this.valueType==ValueType.MARGIN){this.border.setMarginActive(!1)}};DragTarget.prototype.update=function(e){var diff=DragTarget.posFromEvent(e,this.pos);var value=this.value;if(this.border.type==SelectionBorderType.TOP||this.border.type==SelectionBorderType.BOTTOM){value+=diff.top*getDirection(this.valueType,this.border.type,this.border.vAlign)}else if(this.border.type==SelectionBorderType.RIGHT||this.border.type==SelectionBorderType.LEFT){value+=diff.left*getDirection(this.valueType,this.border.type,this.border.hAlign)}
if(value<0)
value=0;if(this.valueType==ValueType.PADDING){this.border.setPadding(value,this.border.getPaddingStart(),this.border.getPaddingEnd())}else if(this.valueType==ValueType.MARGIN){this.border.setMargin(value)}
if(typeof this.valueChangeHandler==='function'){this.valueChangeHandler(this.border.type,value,this.valueType)}};DragTarget.posFromEvent=function(e,rel){var pos=(0,EventUtil_2.posFromEvent)(e);pos.left-=rel.left;pos.top-=rel.top;return pos};return DragTarget}());var dragTarget=null;(0,jquery_30.default)(function(){(0,jquery_30.default)(document).on('mousemove touchmove',function(e){if(!dragTarget)
return;dragTarget.update(e)}).on('mouseup touchend touchcancel',function(){if(!dragTarget)
return;dragTarget.dispose();dragTarget=null})});function isDoingResize(){return dragTarget?!0:!1}
exports.isDoingResize=isDoingResize;var SelectionBorder=(function(){function SelectionBorder(type,valueChangeHandler){var _this=this;this.type=type;this.valueChangeHandler=valueChangeHandler;this.paddingActive=!1;this.marginActive=!1;this.parentMarginActive=!1;this.active=!1;this.visible=!1;this.paddingVisible=!1;this.parentMarginVisible=!1;this.marginVisible=!1;this.padding=0;this.paddingStart=0;this.paddingEnd=0;this.margin=0;this.parentMargin=0;this.paddingNone=!1;this.marginNone=!1;this.hAlign=CommonTypes_1.FlexAlignItems.Start;this.vAlign=CommonTypes_1.FlexAlignItems.Start;this.elem=(0,jquery_30.default)('<div>');var dir='_';if(type==SelectionBorderType.TOP)
dir='top';else if(type==SelectionBorderType.RIGHT)
dir='right';else if(type==SelectionBorderType.BOTTOM)
dir='bottom';else if(type==SelectionBorderType.LEFT)
dir='left';this.elem.addClass('sel-'+dir);this.rawElem=this.elem[0];this.paddingElem=(0,jquery_30.default)('<div>').addClass('sel-padding-'+dir).on('mousedown touchstart',function(e){dragTarget=new DragTarget(_this,ValueType.PADDING,e,_this.valueChangeHandler)});this.rawPaddingElem=this.paddingElem[0];this.paddingTextElem=(0,jquery_30.default)('<span>').addClass('sel-padding-text').appendTo(this.paddingElem);this.rawPaddingTextElem=this.paddingTextElem[0];this.marginElem=(0,jquery_30.default)('<div>').addClass('sel-margin-'+dir).on('mousedown touchstart',function(e){dragTarget=new DragTarget(_this,ValueType.MARGIN,e,_this.valueChangeHandler)});this.rawMarginElem=this.marginElem[0];this.marginTextElem=(0,jquery_30.default)('<span>').addClass('sel-margin-text').appendTo(this.marginElem);this.parentMarginElem=(0,jquery_30.default)('<div>').addClass('sel-margin-'+dir+' sel-ambient').on('mousedown touchstart',function(e){dragTarget=new DragTarget(_this,ValueType.PARENT_MARGIN,e,_this.valueChangeHandler)});this.rawParentMarginElem=this.parentMarginElem[0];this.parentMarginTextElem=(0,jquery_30.default)('<span>').addClass('sel-margin-text').appendTo(this.parentMarginElem);(function(val){_this.paddingVisible=!val;_this.setPaddingVisible(val)})(this.paddingVisible);(function(val){_this.marginVisible=!val;_this.setMarginVisible(val)})(this.marginVisible)}
SelectionBorder.prototype.appendTo=function(elem){elem.append(this.elem);elem.append(this.paddingElem);elem.append(this.marginElem);elem.append(this.parentMarginElem);if(this.type===SelectionBorderType.BOTTOM&&Math.ceil(elem.offset().top+elem.height())>=document.body.scrollHeight){this.marginElem.addClass('hide')}};SelectionBorder.prototype.detach=function(){this.elem.detach();this.paddingElem.detach();this.marginElem.detach();this.parentMarginElem.detach()};SelectionBorder.prototype.dispose=function(){this.elem.remove();this.paddingElem.remove();this.marginElem.remove();this.parentMarginElem.remove()};SelectionBorder.prototype.setValueChangeHandler=function(valueChangeHandler){this.valueChangeHandler=valueChangeHandler};SelectionBorder.prototype.getPadding=function(){return this.padding};SelectionBorder.prototype.getPaddingStart=function(){return this.paddingStart};SelectionBorder.prototype.getPaddingEnd=function(){return this.paddingEnd};SelectionBorder.prototype.setPadding=function(padding,paddingStart,paddingEnd){if(paddingStart===void 0){paddingStart=0}
if(paddingEnd===void 0){paddingEnd=0}
var oriPadding=padding;if(padding<8+2&&!this.paddingActive){padding=8+2}
if(this.padding==padding&&this.paddingStart==paddingStart&&this.paddingEnd==paddingEnd)
return;this.padding=padding;this.paddingStart=paddingStart;this.paddingEnd=paddingEnd;var txt=oriPadding.toFixed(0)+'px';if(oriPadding==0){txt='';this.setPaddingNone(!0)}else{this.setPaddingNone(!1)}
if(this.supportPadding&&this.supportPadding()){this.paddingElem.removeClass('sel-not-support')}else{this.paddingElem.addClass('sel-not-support')}
if(padding<30&&this.spacingOverflow&&!this.spacingOverflow()){txt=''}
this.paddingTextElem.text(txt);if(this.type==SelectionBorderType.TOP||this.type==SelectionBorderType.BOTTOM){this.rawPaddingElem.style.height=(padding-2)+'px'}else if(this.type==SelectionBorderType.RIGHT||this.type==SelectionBorderType.LEFT){this.rawPaddingElem.style.width=(padding-2)+'px'}
if(paddingStart>0||paddingEnd>0){this.paddingElem.addClass('sel-bm');this.rawPaddingElem.style.border='';if(this.type==SelectionBorderType.TOP){this.rawPaddingElem.style.borderTopWidth=(padding-2)+'px';this.rawPaddingElem.style.borderRightWidth=(paddingEnd-2)+'px';this.rawPaddingElem.style.borderLeftWidth=(paddingStart-2)+'px';this.rawPaddingTextElem.style.left='';this.rawPaddingTextElem.style.top='-'+((padding-2)/2)+'px';this.rawPaddingTextElem.style.width=''}else if(this.type==SelectionBorderType.RIGHT){this.rawPaddingElem.style.borderTopWidth=(paddingStart-2)+'px';this.rawPaddingElem.style.borderRightWidth=(padding-2)+'px';this.rawPaddingElem.style.borderBottomWidth=(paddingEnd-2)+'px';this.rawPaddingTextElem.style.left='';this.rawPaddingTextElem.style.top='';this.rawPaddingTextElem.style.width=(padding-2)+'px'}else if(this.type==SelectionBorderType.BOTTOM){this.rawPaddingElem.style.borderRightWidth=(paddingEnd-2)+'px';this.rawPaddingElem.style.borderBottomWidth=(padding-2)+'px';this.rawPaddingElem.style.borderLeftWidth=(paddingStart-2)+'px';this.rawPaddingTextElem.style.left='';this.rawPaddingTextElem.style.top=((padding-2)/2)+'px';this.rawPaddingTextElem.style.width=''}else if(this.type==SelectionBorderType.LEFT){this.rawPaddingElem.style.borderTopWidth=(paddingStart-2)+'px';this.rawPaddingElem.style.borderBottomWidth=(paddingEnd-2)+'px';this.rawPaddingElem.style.borderLeftWidth=(padding-2)+'px';this.rawPaddingTextElem.style.left='-'+(padding-2)+'px';this.rawPaddingTextElem.style.top='';this.rawPaddingTextElem.style.width=(padding-2)+'px'}}else{this.paddingElem.removeClass('sel-bm');this.rawPaddingElem.style.borderTopWidth='0px';this.rawPaddingElem.style.borderRightWidth='0px';this.rawPaddingElem.style.borderBottomWidth='0px';this.rawPaddingElem.style.borderLeftWidth='0px';this.rawPaddingTextElem.style.left='';this.rawPaddingTextElem.style.top='';this.rawPaddingTextElem.style.width=''}};SelectionBorder.prototype.setPaddingActive=function(active){if(this.paddingActive==active)
return;this.paddingActive=active;if(active)
this.paddingElem.addClass('sel-active');else this.paddingElem.removeClass('sel-active');this.setPadding(this.padding,this.paddingStart,this.paddingEnd)};SelectionBorder.prototype.setPaddingNone=function(isNone){if(this.paddingNone==isNone)
return;this.paddingNone=isNone;if(isNone)
this.paddingElem.addClass('sel-none');else this.paddingElem.removeClass('sel-none')};SelectionBorder.prototype.setSupportPadding=function(value){this.supportPadding=value};SelectionBorder.prototype.setSupportMargin=function(value){this.supportMargin=value};SelectionBorder.prototype.setSpacingOverflow=function(value){this.spacingOverflow=value};SelectionBorder.prototype.getMargin=function(){return this.margin};SelectionBorder.prototype.setMargin=function(margin){var oriMargin=margin;if(margin<8&&!this.marginActive){margin=8}
if(this.margin==margin)
return;this.margin=margin;var txt=oriMargin.toFixed(0)+'px';if(oriMargin==0){txt='';this.setMarginNone(!0)}else{this.setMarginNone(!1)}
if(this.supportMargin&&this.supportMargin()){this.marginElem.removeClass('sel-not-support')}else{this.marginElem.addClass('sel-not-support')}
if(margin<30&&this.spacingOverflow&&!this.spacingOverflow()){txt=''}
this.marginTextElem.text(txt);if(this.type==SelectionBorderType.TOP||this.type==SelectionBorderType.BOTTOM){var val={height:margin};val['margin-'+(this.type==SelectionBorderType.TOP?'top':'bottom')]=-margin;this.marginElem.css(val)}else if(this.type==SelectionBorderType.RIGHT||this.type==SelectionBorderType.LEFT){var val={width:margin};val['margin-'+(this.type==SelectionBorderType.RIGHT?'right':'left')]=-margin;this.marginElem.css(val)}
if(this.type==SelectionBorderType.TOP){this.rawParentMarginElem.style.top=(-margin)+'px'}else if(this.type==SelectionBorderType.RIGHT){this.rawParentMarginElem.style.right=(-margin)+'px'}else if(this.type==SelectionBorderType.BOTTOM){this.rawParentMarginElem.style.bottom=(-margin)+'px'}else if(this.type==SelectionBorderType.LEFT){this.rawParentMarginElem.style.left=(-margin)+'px'}};SelectionBorder.prototype.setMarginActive=function(active){if(this.marginActive==active)
return;this.marginActive=active;if(active)
this.marginElem.addClass('sel-active');else this.marginElem.removeClass('sel-active');this.setMargin(this.margin)};SelectionBorder.prototype.setMarginNone=function(isNone){if(this.marginNone==isNone)
return;this.marginNone=isNone;if(isNone)
this.marginElem.addClass('sel-none');else this.marginElem.removeClass('sel-none')};SelectionBorder.prototype.setParentMargin=function(margin){if(this.parentMargin==margin)
return;this.parentMargin=margin;this.parentMarginTextElem.text(margin.toFixed(0)+'px');if(this.type==SelectionBorderType.TOP||this.type==SelectionBorderType.BOTTOM){var val={height:margin};val['margin-'+(this.type==SelectionBorderType.TOP?'top':'bottom')]=-margin;this.parentMarginElem.css(val)}else if(this.type==SelectionBorderType.RIGHT||this.type==SelectionBorderType.LEFT){var val={width:margin};val['margin-'+(this.type==SelectionBorderType.RIGHT?'right':'left')]=-margin;this.parentMarginElem.css(val)}};SelectionBorder.prototype.setParentMarginActive=function(active){if(this.parentMarginActive==active)
return;this.parentMarginActive=active;if(active)
this.parentMarginElem.addClass('sel-active');else this.parentMarginElem.removeClass('sel-active')};SelectionBorder.prototype.setActive=function(active){if(this.active==active)
return;this.active=active;if(active)
this.elem.addClass('sel-active');else this.elem.removeClass('sel-active')};SelectionBorder.prototype.setVisible=function(visible){if(this.visible==visible)
return;this.visible=visible;this.rawElem.style.display=visible?'block':'none';this.rawPaddingElem.style.display=visible?'block':'none';this.rawPaddingElem.style.pointerEvents=visible?'':'none';this.rawPaddingElem.style.touchAction=visible?'':'none';this.rawMarginElem.style.display=visible?'block':'none'};SelectionBorder.prototype.setPaddingVisible=function(visible){if(this.paddingVisible==visible)
return;this.paddingVisible=visible;this.rawPaddingElem.style.display=(this.paddingVisible||this.visible)?'block':'none';this.rawPaddingElem.style.pointerEvents=this.visible?'':'none';this.rawPaddingElem.style.touchAction=this.visible?'':'none'};SelectionBorder.prototype.setMarginVisible=function(visible){if(this.marginVisible==visible)
return;this.marginVisible=visible;this.rawMarginElem.style.display=(this.marginVisible||this.visible)?'block':'none'};SelectionBorder.prototype.setParentMarginVisible=function(visible){this.parentMarginVisible=visible;this.rawParentMarginElem.style.display=(this.parentMarginVisible||this.visible)?'block':'none'};SelectionBorder.prototype.setAlignment=function(hAlign,vAlign){this.hAlign=hAlign;this.vAlign=vAlign};return SelectionBorder}());exports.SelectionBorder=SelectionBorder});define("js/element/ControlsButton",["require","exports","jquery"],function(require,exports,jquery_31){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ControlsButton=exports.ControlsButtonAlign=void 0;var ControlsButtonAlign;(function(ControlsButtonAlign){ControlsButtonAlign[ControlsButtonAlign.NONE=0]="NONE";ControlsButtonAlign[ControlsButtonAlign.LEFT_TOP=1]="LEFT_TOP";ControlsButtonAlign[ControlsButtonAlign.RIGHT_TOP=2]="RIGHT_TOP";ControlsButtonAlign[ControlsButtonAlign.CENTER_TOP=3]="CENTER_TOP";ControlsButtonAlign[ControlsButtonAlign.LEFT_BOTTOM=4]="LEFT_BOTTOM"})(ControlsButtonAlign||(exports.ControlsButtonAlign=ControlsButtonAlign={}));var ControlsButton=(function(){function ControlsButton(styleClass,icon,align,cursor){if(align===void 0){align=ControlsButtonAlign.LEFT_TOP}
if(cursor===void 0){cursor=''}
this.iconValue='';this.cursor='';this.visible=!0;this.active=!0;this.locked=!1;this.currentlyVisible=!0;this.elem=(0,jquery_31.default)('<div>').addClass(styleClass);this.elem.addClass('wb-ctrl-btn');this.iconElem=icon?(0,jquery_31.default)('<span>').appendTo(this.elem):null;this.align=align;if(icon)
this.setIcon(icon);if(cursor)
this.setCursor(cursor);}
ControlsButton.prototype.setLabel=function(label){this.elem.text(label)};ControlsButton.prototype.setIcon=function(icon){this.iconValue=icon;if(!this.locked)
this.setIconPrivate(icon);};ControlsButton.prototype.setIconPrivate=function(icon){if(!this.iconElem)
return;if(icon=='?'){this.iconElem.attr('class','');this.iconElem.text(icon)}else{this.iconElem.attr('class',icon);this.iconElem.text('')}};ControlsButton.prototype.setCursor=function(cursor){this.cursor=cursor;if(!this.locked)
this.setCursorPrivate(cursor);};ControlsButton.prototype.setCursorPrivate=function(cursor){this.elem.css({cursor:cursor})};ControlsButton.prototype.setLocked=function(lock){if(!this.locked&&lock){this.locked=!0;this.setIconPrivate('glyphicon glyphicon-lock');this.setCursorPrivate('pointer');this.elem.attr({'data-html':!0,'data-placement':'right','data-trigger':'hover','title':__('Unlock this element to move\n(click icon to unlock)').replace(/\n/g,'<br />'),});this.elem.tooltip({trigger:'hover',placement:'right',html:!0})}else if(this.locked&&!lock){this.locked=!1;this.setIconPrivate(this.iconValue);this.setCursorPrivate(this.cursor);this.elem.removeAttr('title');this.elem.tooltip('destroy')}};ControlsButton.prototype.isCurrentlyVisible=function(){return this.currentlyVisible};ControlsButton.prototype.isVisible=function(){return this.visible};ControlsButton.prototype.setVisible=function(visible){this.visible=visible;this.updateVisibility()};ControlsButton.prototype.isActive=function(){return this.active};ControlsButton.prototype.setActive=function(active){this.active=active;this.updateVisibility()};ControlsButton.prototype.setAdditionalVisibilityTestCallback=function(callback){this.visibilityTestCallback=callback;this.updateVisibility()};ControlsButton.prototype.updateVisibility=function(){var visible=this.active&&this.visible&&(typeof this.visibilityTestCallback!=="function"||this.visibilityTestCallback());if(visible&&!this.currentlyVisible){this.currentlyVisible=!0;this.elem.show()}else if(!visible&&this.currentlyVisible){this.currentlyVisible=!1;this.elem.hide()}};ControlsButton.prototype.updateAlign=function(compact,offset,bottom){if(offset===void 0){offset=0}
if(bottom===void 0){bottom=!1}
var align=this.align;if(compact){if(align!=ControlsButtonAlign.NONE){var val={left:(offset*22)+'px',right:'',top:'',bottom:'',margin:0,};if(bottom)
val.bottom='-22px';else val.top='-22px';this.elem.css(val)}
return}
var off=4;if(align==ControlsButtonAlign.LEFT_TOP){this.elem.css({left:off+(offset*22)+'px',right:'',top:off,bottom:'',margin:0,})}else if(align==ControlsButtonAlign.RIGHT_TOP){this.elem.css({left:'',right:off+(offset*22)+'px',top:off,bottom:'',margin:0,})}else if(align==ControlsButtonAlign.CENTER_TOP){this.elem.css({left:'50%',right:'',top:off,bottom:'',margin:'0 0 0 -10px',})}else if(align==ControlsButtonAlign.LEFT_BOTTOM){this.elem.css({left:off+(offset*22)+'px',right:'',top:'',bottom:off,margin:0,})}};return ControlsButton}());exports.ControlsButton=ControlsButton});define("js/element/ControlsCircleButton",["require","exports","jquery"],function(require,exports,jquery_32){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CircleButton=exports.CircleButtonType=void 0;var CircleButtonType;(function(CircleButtonType){CircleButtonType[CircleButtonType.TOP=0]="TOP";CircleButtonType[CircleButtonType.RIGHT=1]="RIGHT";CircleButtonType[CircleButtonType.BOTTOM=2]="BOTTOM";CircleButtonType[CircleButtonType.LEFT=3]="LEFT"})(CircleButtonType||(exports.CircleButtonType=CircleButtonType={}));var CircleButton=(function(){function CircleButton(type,handler){this.type=type;this.visible=!0;this.active=!0;this.elem=(0,jquery_32.default)('<div>').text('+');var dir='_';if(type==CircleButtonType.TOP)
dir='top';else if(type==CircleButtonType.RIGHT)
dir='right';else if(type==CircleButtonType.BOTTOM)
dir='bottom';else if(type==CircleButtonType.LEFT)
dir='left';this.elem.addClass('wb-circle-btn-'+dir);this.setHandler(handler)}
CircleButton.prototype.setHandler=function(handler){var _this=this;if(this.handler)
this.elem.off('click',this.handler);if(handler){this.handler=function(e){if(handler)
handler(_this.type,e);};this.elem.on('click',this.handler)}else{this.handler=undefined}};CircleButton.prototype.setVisible=function(visible){if(this.visible==visible)
return;this.visible=visible;if(visible){if(this.active)
this.elem.show();}else{if(this.active)
this.elem.hide();}};CircleButton.prototype.isActive=function(){return this.active};CircleButton.prototype.setActive=function(active){if(this.active==active)
return;this.active=active;if(active){if(this.visible)
this.elem.show();}else{if(this.visible)
this.elem.hide();}};CircleButton.prototype.dispose=function(){if(this.handler){this.elem.off('click',this.handler);this.handler=undefined}
this.elem.remove()};return CircleButton}());exports.CircleButton=CircleButton});define("js/util/ExtendedResizable",["require","exports","jquery"],function(require,exports,jquery_33){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.buildResizeHandleElem=exports.ExtendedResizable=exports.ExtendedResizableParams=exports.resizeHandleTypes=exports.VDirection=exports.HDirection=void 0;var HDirection;(function(HDirection){HDirection[HDirection.Left=-1]="Left";HDirection[HDirection.None=0]="None";HDirection[HDirection.Right=1]="Right"})(HDirection||(exports.HDirection=HDirection={}));var VDirection;(function(VDirection){VDirection[VDirection.Up=-1]="Up";VDirection[VDirection.None=0]="None";VDirection[VDirection.Down=1]="Down"})(VDirection||(exports.VDirection=VDirection={}));exports.resizeHandleTypes=['nw','n','ne','w','e','sw','s','se'];function getPointerPosition(e){var epx=e.pageX;var epy=e.pageY;var oe=e.originalEvent;if(oe.changedTouches&&oe.changedTouches.length>0){var te=oe.changedTouches[0];epx=te.pageX;epy=te.pageY}
return{x:epx,y:epy}}
var ExtendedResizableParams=(function(){function ExtendedResizableParams(element,e,handle){this.data=null;this.element=element;this.disableElementSizeUpdates=!1;this.axis=handle.id;this.hDirection=handle.hDirection;this.vDirection=handle.vDirection;var ppos=getPointerPosition(e);this.initialPointerPosition={left:ppos.x,top:ppos.y};this.pointerPosition={left:ppos.x,top:ppos.y};this.delta={left:0,top:0};this.minSize={width:0,height:0};this.maxSize={width:null,height:null};var dynamicSize={width:this.element[0].style.width,height:this.element[0].style.height};var pxMatch=/^(-?[0-9.]+)px$/;var matches;if(typeof dynamicSize.width!=="number"){if((matches=dynamicSize.width.match(pxMatch))!==null)
dynamicSize.width=parseFloat(matches[1]);else if(!dynamicSize.width||dynamicSize.width==="")
dynamicSize.width="auto"}
if(typeof dynamicSize.height!=="number"){if((matches=dynamicSize.height.match(pxMatch))!==null)
dynamicSize.height=parseFloat(matches[1]);else if(!dynamicSize.height||dynamicSize.height==="")
dynamicSize.height="auto"}
var size={width:this.element.outerWidth(!1),height:this.element.outerHeight(!1),};var position=this.element.position();var parentContentSize=this.getElementContentSize(this.element.parent());this.originalParentContentSize=parentContentSize;this.parentContentSize=jquery_33.default.extend({},parentContentSize);this.originalPosition=position;this.position=jquery_33.default.extend({},position);this.originalDynamicSize=dynamicSize;this.dynamicSize=jquery_33.default.extend({},dynamicSize);this.originalSize=size;this.size=jquery_33.default.extend({},size);this.clearCache()}
ExtendedResizableParams.prototype.getElementContentSize=function(element){var stl=getComputedStyle(element[0]);return{width:element.innerWidth()-parseFloat(stl.paddingLeft)-parseFloat(stl.paddingRight),height:element.innerHeight()-parseFloat(stl.paddingLeft)-parseFloat(stl.paddingRight),}};ExtendedResizableParams.prototype.clearCache=function(){this.sizeCache={width:{},height:{}};this.inverseSizeCache={width:{},height:{}}};return ExtendedResizableParams}());exports.ExtendedResizableParams=ExtendedResizableParams;var globalResizing=!1;var ExtendedResizable=exports.ExtendedResizable=(function(){function ExtendedResizable(element,options){this.element=element;this.handles={};this.extHandles=!1;this.currentResizeParams=null;this.options=jquery_33.default.extend({},ExtendedResizable.defaultOptions,options);this.extHandles=this.options.extHandles?!0:!1;(0,jquery_33.default)(element).addClass("wb-ext-resizable").data("resizableExt",this);this.update()}
ExtendedResizable.isResizing=function(){return globalResizing};ExtendedResizable.prototype.update=function(){this.updateInsetHandles();this.updateHandles()};ExtendedResizable.prototype.updateInsetHandles=function(){if(this.options.insetHandles)
this.element.addClass("wb-ext-resizable-inset");else this.element.removeClass("wb-ext-resizable-inset")};ExtendedResizable.prototype.updateHandles=function(){var handles=this.options.handles;if(!handles)
handles="";else if(handles===!0)
handles="nw,n,ne,w,e,sw,s,se";var removeHandles=Object.keys(this.handles);for(var _i=0,_a=handles.split(",");_i<_a.length;_i++){var handle=_a[_i];handle=handle.trim();if(handle==="")
continue;if(!ExtendedResizable.handleOptions.hasOwnProperty(handle)){console.error("Unknown handle: "+handle);continue}
var idx=removeHandles.indexOf(handle);if(idx>=0)
removeHandles.splice(idx,1);if(!this.handles.hasOwnProperty(handle))
this.handles[handle]=new ExtendedResizableHandle(this,handle,this.extHandles,ExtendedResizable.handleOptions[handle]);}
for(var _b=0,removeHandles_1=removeHandles;_b<removeHandles_1.length;_b++){var handle=removeHandles_1[_b];this.handles[handle].destroy();delete this.handles[handle]}};ExtendedResizable.prototype.attachHandles=function(elems){for(var handle in elems){if(handle in this.handles){this.handles[handle].attach(elems[handle])}}};ExtendedResizable.prototype.detachHandles=function(){for(var handle in this.handles)
this.handles[handle].detach();};ExtendedResizable.prototype.destroy=function(){for(var handle in this.handles){this.handles[handle].destroy();delete this.handles[handle]}
this.element.removeClass("wb-ext-resizable wb-ext-resizable-inset").removeData("resizableExt")};ExtendedResizable.prototype.disable=function(){this.element.addClass("wb-ext-resizable-disabled")};ExtendedResizable.prototype.enable=function(){this.element.removeClass("wb-ext-resizable-disabled")};ExtendedResizable.prototype.processCommands=function(command){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}
if(command==="option"){if(args.length<1||typeof args[0]!=="string"){console.error("Invalid arguments");return void 0}
var optionName=args[0];if(optionName==="disabled"){if(args.length<2)
return this.element.is(".wb-ext-resizable-disabled");else if(args[1])
this.disable();else this.enable()}else if(ExtendedResizable.expectOptionTypes.hasOwnProperty(optionName)){if(args.length<2)
return this.options.hasOwnProperty(optionName)?this.options[optionName]:ExtendedResizable.defaultOptions[optionName];if(ExtendedResizable.expectOptionTypes[optionName].indexOf(typeof args[1])<0){console.error("Invalid '"+optionName+"' option value type ("+(typeof args[1])+"). Allowed types: "+ExtendedResizable.expectOptionTypes[optionName].join(", "));return void 0}
this.options[optionName]=args[1];this.update()}else console.error.apply(console,__spreadArray(["Unknown extended resizable option",optionName],args,!1))}else if(command==="destroy"){this.destroy()}else if(command==="disable"){this.disable()}else if(command==="enable"){this.enable()}else if(command==="instance"){return this}else console.error.apply(console,__spreadArray(["Unknown extended resizable command",command],args,!1));return void 0};ExtendedResizable.prototype.OnHandleStart=function(e,handle){if(this.currentResizeParams)
return;this.currentResizeParams=new ExtendedResizableParams(this.element,e,handle);globalResizing=!0;this.handleEvent("resizestart",e,"start","afterStart");(0,jquery_33.default)(document.body).addClass("wb-ext-resizable-resizing-"+this.currentResizeParams.axis)};ExtendedResizable.prototype.OnHandleResize=function(e,handle){if(!this.currentResizeParams)
return;this.handleEvent("resize",e,"resize","afterResize")};ExtendedResizable.prototype.OnHandleStop=function(e,handle){if(!this.currentResizeParams)
return;this.handleEvent("resizestop",e,"stop","afterStop");(0,jquery_33.default)(document.body).removeClass("wb-ext-resizable-resizing-"+this.currentResizeParams.axis);this.currentResizeParams=null;globalResizing=!1};ExtendedResizable.prototype.handleEvent=function(type,e,preCallback,postCallback){if(!this.currentResizeParams)
return;var ev=jquery_33.default.Event(type,{shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,which:e.which,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,view:e.view,originalEvent:e.originalEvent,target:e.target,relatedTarget:e.relatedTarget,currentTarget:e.currentTarget,fromElement:e.fromElement,toElement:e.toElement,});var opts=this.options;this.updateResizeParams(ev);if(typeof opts[preCallback]==="function")
opts[preCallback].call(this.element[0],ev,this.currentResizeParams);if(!ev.isDefaultPrevented()){this.updateElementSize();if(typeof opts[postCallback]==="function")
opts[postCallback].call(this.element[0],ev,this.currentResizeParams);}};ExtendedResizable.prototype.needToPreserveAutoWidth=function(p){return((this.options.keepAutoWidth||!1)&&p.originalDynamicSize.width=='auto')};ExtendedResizable.prototype.needToPreserveAutoHeight=function(p){return((this.options.keepAutoHeight||!1)&&p.originalDynamicSize.height=='auto')};ExtendedResizable.prototype.updateResizeParams=function(e){var _a,_b,_c;if(!this.currentResizeParams)
return;var p=this.currentResizeParams;p.position=p.element.position();(_a=getPointerPosition(e),p.pointerPosition.left=_a.x,p.pointerPosition.top=_a.y);_b=this.getElementMinMaxSize(p.element,"width",this.options.minWidth,this.options.maxWidth),p.minSize.width=_b[0],p.maxSize.width=_b[1];_c=this.getElementMinMaxSize(p.element,"height",this.options.minHeight,this.options.maxHeight),p.minSize.height=_c[0],p.maxSize.height=_c[1];if(this.needToPreserveAutoWidth(p)){var a=p.vDirection*(p.pointerPosition.top-p.initialPointerPosition.top);p.delta.top=a;p.size.height=p.originalSize.height+p.delta.top;if(p.size.height<0)
p.size.height=0;if(p.vDirection<0)
p.position.top=p.originalPosition.top-p.delta.top;if(p.size.height>0&&p.originalSize.height>0){p.size.width=p.originalSize.width*p.size.height/p.originalSize.height}
return}else if(this.needToPreserveAutoHeight(p)){var a=p.hDirection*(p.pointerPosition.left-p.initialPointerPosition.left);p.delta.left=a;p.size.width=p.originalSize.width+p.delta.left;if(p.size.width<0)
p.size.width=0;if(p.hDirection<0)
p.position.left=p.originalPosition.left-p.delta.left;if(p.size.width>0&&p.originalSize.width>0){p.size.height=p.originalSize.height*p.size.width/p.originalSize.width}
return}
if(p.hDirection){p.delta.left=p.hDirection*(p.pointerPosition.left-p.initialPointerPosition.left);p.size.width=p.originalSize.width+p.delta.left;if(p.size.width<0)
p.size.width=0;if(p.hDirection<0)
p.position.left=p.originalPosition.left-p.delta.left}
if(p.vDirection){p.delta.top=p.vDirection*(p.pointerPosition.top-p.initialPointerPosition.top);p.size.height=p.originalSize.height+p.delta.top;if(p.size.height<0)
p.size.height=0;if(p.vDirection<0)
p.position.top=p.originalPosition.top-p.delta.top}};ExtendedResizable.prototype.getElementMinMaxSize=function(element,cssProp,sysMinSize,sysMaxSize){var minSize=0,maxSize=null;var minSizeStyle=element.css("min-"+cssProp);if(minSizeStyle!="auto")
minSize=Math.round(parseFloat(minSizeStyle));if(typeof sysMinSize==="number"&&minSize<sysMinSize)
minSize=sysMinSize;var maxSizeStyle=element.css("max-"+cssProp);if(maxSizeStyle!="none"&&maxSizeStyle!="100%")
maxSize=Math.round(parseFloat(maxSizeStyle));if(typeof sysMaxSize==="number"&&(maxSize===null||maxSize>sysMaxSize))
maxSize=sysMaxSize;return[minSize,maxSize]};ExtendedResizable.prototype.updateElementSize=function(){if(!this.currentResizeParams)
return;var p=this.currentResizeParams;var keepAutoWidth=this.needToPreserveAutoWidth(p);var keepAutoHeight=this.needToPreserveAutoHeight(p);if(p.hDirection&&!keepAutoWidth){var width=p.size.width;if(keepAutoHeight&&p.maxSize.height&&(width*p.originalSize.height/p.originalSize.width)>p.maxSize.height){width=p.maxSize.height*p.originalSize.width/p.originalSize.height}
if(keepAutoHeight&&p.minSize.height&&(width*p.originalSize.height/p.originalSize.width)<p.minSize.height){width=p.minSize.height*p.originalSize.width/p.originalSize.height}
p.dynamicSize.width=this.calcRequiredSize(p.element,"width",!!this.options.allowPercentageWidth,p.originalParentContentSize.width,p.originalDynamicSize.width,p.originalSize.width,width,p.minSize.width,p.maxSize.width,p.sizeCache.width,p.inverseSizeCache.width,p.disableElementSizeUpdates);if(p.hDirection<0&&!p.disableElementSizeUpdates&&p.element[0].style.left!==""){p.element.css("left",p.position.left)}}else if(p.vDirection&&keepAutoHeight){var height=p.originalSize.height+(p.pointerPosition.top-p.initialPointerPosition.top)*(p.axis=='n'?-1:1);if(p.minSize.height&&height<p.minSize.height)
height=p.minSize.height;if(p.maxSize.height&&height>p.maxSize.height)
height=p.maxSize.height;p.dynamicSize.width=this.calcRequiredSize(p.element,"width",!!this.options.allowPercentageWidth,p.originalParentContentSize.width,p.originalDynamicSize.width,p.originalSize.width,height*p.originalSize.width/p.originalSize.height,p.minSize.width,p.maxSize.width,p.sizeCache.width,p.inverseSizeCache.width,p.disableElementSizeUpdates);if(p.hDirection<0&&!p.disableElementSizeUpdates&&p.element[0].style.left!==""){p.element.css("left",p.position.left)}}
if(p.vDirection&&!keepAutoHeight){var height=p.size.height;if(keepAutoWidth&&p.maxSize.width&&(height*p.originalSize.width/p.originalSize.height)>p.maxSize.width){height=p.maxSize.width*p.originalSize.height/p.originalSize.width}
if(keepAutoWidth&&p.minSize.width&&(height*p.originalSize.width/p.originalSize.height)<p.minSize.width){height=p.minSize.width*p.originalSize.height/p.originalSize.width}
p.dynamicSize.height=this.calcRequiredSize(p.element,"height",!!this.options.allowPercentageHeight,p.originalParentContentSize.height,p.originalDynamicSize.height,p.originalSize.height,height,p.minSize.height,p.maxSize.height,p.sizeCache.height,p.inverseSizeCache.height,p.disableElementSizeUpdates);if(p.vDirection<0&&!p.disableElementSizeUpdates&&p.element[0].style.top!==""){p.element.css("top",p.position.top)}}else if(p.hDirection&&keepAutoWidth){var width=p.originalSize.width+(p.pointerPosition.left-p.initialPointerPosition.left)*(p.axis=='w'?-1:1);if(p.minSize.width&&width<p.minSize.width)
width=p.minSize.width;if(p.maxSize.width&&width>p.maxSize.width)
width=p.maxSize.width;p.dynamicSize.height=this.calcRequiredSize(p.element,"height",!!this.options.allowPercentageHeight,p.originalParentContentSize.height,p.originalDynamicSize.height,p.originalSize.height,width*p.originalSize.height/p.originalSize.width,p.minSize.height,p.maxSize.height,p.sizeCache.height,p.inverseSizeCache.height,p.disableElementSizeUpdates);if(p.vDirection<0&&!p.disableElementSizeUpdates&&p.element[0].style.top!==""){p.element.css("top",p.position.top)}}};ExtendedResizable.prototype.calcRequiredSize=function(element,cssProp,allowPercentage,originalParentContentSize,originalDynamicSize,originalSize,size,minSize,maxSize,cache,inverseCache,revert){if(size<minSize)
size=minSize;if(maxSize!==null&&size>maxSize)
size=maxSize;size=Math.round(size);var revertSize=element[0].style[cssProp];var dynamicSize;var sizeKey=size+"px";var allowAdjustments=!0;var isPercentage=allowPercentage&&typeof originalDynamicSize!=="number";if(inverseCache.hasOwnProperty(sizeKey)){dynamicSize=inverseCache[sizeKey];allowAdjustments=!1}else if(!allowPercentage||!isPercentage){dynamicSize=size}else{dynamicSize=this.calcPercentageSize(originalParentContentSize,size)}
if(allowAdjustments){var sizeFunc=((cssProp==="width")?element.outerWidth:element.outerHeight);var iteration=0;var delta=void 0,absDelta=void 0,currentSize=void 0,secondaryDelta=void 0;var numDynamicSize=(typeof dynamicSize==="number")?dynamicSize:parseFloat(dynamicSize);var initialNumDynamicSize=numDynamicSize;var stepSize=isPercentage?10:100;var minStepSize=isPercentage?0.01:1;var lastDeltaSgn=0;var closestDelta=null,closestSecondaryDelta=0,closestSize=dynamicSize;var maxSize_1=(cssProp==="width")?(0,jquery_33.default)(window).width():((0,jquery_33.default)(window).height()*2);do{currentSize=this.getRealElementSize(element,cssProp,sizeFunc,dynamicSize,cache,inverseCache);delta=currentSize-size;secondaryDelta=Math.abs(numDynamicSize-initialNumDynamicSize);absDelta=Math.abs(delta);if(closestDelta===null||absDelta<closestDelta||(absDelta===closestDelta&&secondaryDelta<closestSecondaryDelta)){closestDelta=absDelta;closestSize=dynamicSize;closestSecondaryDelta=secondaryDelta}
if(absDelta<1)
break;if(delta<0){if(lastDeltaSgn>0){stepSize/=2;if(stepSize<minStepSize/10)
break}
lastDeltaSgn=-1;if(numDynamicSize>=(isPercentage?100:maxSize_1))
break;numDynamicSize+=stepSize;if(isPercentage&&numDynamicSize>100)
numDynamicSize=100}else{if(lastDeltaSgn<0){stepSize/=2;if(stepSize<minStepSize/10)
break}
lastDeltaSgn=1;if(numDynamicSize<=0)
break;numDynamicSize-=stepSize;if(numDynamicSize<0)
numDynamicSize=0}
dynamicSize=isPercentage?Math.round(numDynamicSize*100)/100+"%":Math.round(numDynamicSize)}while(++iteration<500);dynamicSize=closestSize;if(!inverseCache.hasOwnProperty(sizeKey))
inverseCache[sizeKey]=dynamicSize}
if(revert){if(allowAdjustments)
element[0].style[cssProp]=revertSize}else{element.css(cssProp,dynamicSize)}
return dynamicSize};ExtendedResizable.prototype.getRealElementSize=function(element,cssProp,sizeFunc,dynamicSize,cache,inverseCache){var dynamicSizeKey=(typeof dynamicSize==="number")?dynamicSize+"px":dynamicSize;if(cache.hasOwnProperty(dynamicSizeKey))
return cache[dynamicSizeKey];element.css(cssProp,dynamicSize).offset();var currentSize=sizeFunc.call(element);currentSize=Math.round(currentSize);cache[dynamicSizeKey]=currentSize;var currentSizeKey=currentSize+"px";if(!inverseCache.hasOwnProperty(currentSizeKey))
inverseCache[currentSizeKey]=dynamicSize;return currentSize};ExtendedResizable.prototype.calcPercentageSize=function(parentContentSize,size){return Math.round(10000*Math.min(Math.max(size/parentContentSize,0),1))/100+"%"};ExtendedResizable.defaultOptions={handles:"nw,n,ne,w,e,sw,s,se",insetHandles:!0,};ExtendedResizable.expectOptionTypes={handles:["string"],insetHandles:["boolean"],minWidth:["number"],maxWidth:["number"],minHeight:["number"],maxHeight:["number"],allowPercentageWidth:["boolean"],allowPercentageHeight:["boolean"],keepAutoWidth:["boolean"],keepAutoHeight:["boolean"],start:["function"],resize:["function"],stop:["function"],afterStart:["function"],afterResize:["function"],afterStop:["function"],};ExtendedResizable.handleOptions={nw:{hDirection:HDirection.Left,vDirection:VDirection.Up},n:{hDirection:HDirection.None,vDirection:VDirection.Up},ne:{hDirection:HDirection.Right,vDirection:VDirection.Up},w:{hDirection:HDirection.Left,vDirection:VDirection.None},e:{hDirection:HDirection.Right,vDirection:VDirection.None},sw:{hDirection:HDirection.Left,vDirection:VDirection.Down},s:{hDirection:HDirection.None,vDirection:VDirection.Down},se:{hDirection:HDirection.Right,vDirection:VDirection.Down},};return ExtendedResizable}());function buildResizeHandleElem(handle){var result=(0,jquery_33.default)('<div>').addClass('wb-ext-resizable-handle wb-ext-resizable-handle-'+handle);if(('ontouchstart' in window)||navigator.maxTouchPoints>0){result.addClass('wb-ext-resizable-handle-touch')}
return result}
exports.buildResizeHandleElem=buildResizeHandleElem;var ExtendedResizableHandle=(function(){function ExtendedResizableHandle(resizable,id,extElem,options){this.resizable=resizable;this.id=id;this.extElem=extElem;this.element=null;this.hDirection=options.hDirection;this.vDirection=options.vDirection;this.mouseMoveListener=this.OnMouseMove.bind(this);this.mouseUpListener=this.OnMouseUp.bind(this);this.mouseDownListener=this.OnMouseDown.bind(this);if(!this.extElem){this.attach(buildResizeHandleElem(this.id));if(this.element)
this.resizable.element.append(this.element);}}
ExtendedResizableHandle.prototype.attach=function(elem){if(this.element)
return;this.element=elem.on("mousedown touchstart",this.mouseDownListener)};ExtendedResizableHandle.prototype.detach=function(){if(!this.element)
return;this.element.off("mousedown touchstart",this.mouseDownListener);this.element=null};ExtendedResizableHandle.prototype.destroy=function(){if(this.extElem)
this.detach();else if(this.element)
this.element.remove();};ExtendedResizableHandle.prototype.isPrimaryButton=function(e){return(e.button===undefined||e.button===0)};ExtendedResizableHandle.prototype.OnMouseDown=function(e){if(!this.isPrimaryButton(e))
return;e.preventDefault();e.stopImmediatePropagation();(0,jquery_33.default)(window).on("mousemove touchmove",this.mouseMoveListener).on("mouseup touchend touchcancel",this.mouseUpListener);this.resizable.OnHandleStart(e,this)};ExtendedResizableHandle.prototype.OnMouseMove=function(e){if(!this.isPrimaryButton(e))
return;e.preventDefault();e.stopImmediatePropagation();this.resizable.OnHandleResize(e,this)};ExtendedResizableHandle.prototype.OnMouseUp=function(e){if(!this.isPrimaryButton(e))
return;e.preventDefault();e.stopImmediatePropagation();(0,jquery_33.default)(window).off("mousemove touchmove",this.mouseMoveListener).off("mouseup touchend touchcancel",this.mouseUpListener);this.resizable.OnHandleStop(e,this)};return ExtendedResizableHandle}());jquery_33.default.fn.extend({resizableExt:function(optCmd){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}
var retVal=this;this.each(function(){if(typeof optCmd==="string"){var inst=(0,jquery_33.default)(this).data("resizableExt");if(inst){var ret=inst.processCommands.apply(inst,__spreadArray([optCmd],args,!1));if(ret!==void 0)
retVal=ret}else if(optCmd==='instance')
retVal=null;else console.error("Extended resizable is not initialized.")}else new ExtendedResizable((0,jquery_33.default)(this),optCmd)});return retVal},})});define("js/ui/FlexLayoutControl",["require","exports","js/UIComponent","js/CommonTypes","js/Service","RadioBox","js/FlowLayout","js/VerticalLayout","js/CheckBox","js/Label","jquery"],function(require,exports,UIComponent_21,CommonTypes_2,Service_5,RadioBox_1,FlowLayout_5,VerticalLayout_6,CheckBox_4,Label_5,jquery_34){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FlexLayoutControlValue=exports.FlexLayoutControl=void 0;var hSpacingOptions=[{id:CommonTypes_2.FlexAlignContent.Start,name:__("Start"),icon:'wbico wbico-align-left'},{id:CommonTypes_2.FlexAlignContent.Center,name:__("Center"),icon:'wbico wbico-align-center'},{id:CommonTypes_2.FlexAlignContent.End,name:__("End"),icon:'wbico wbico-align-right'},{id:CommonTypes_2.FlexAlignContent.SpaceBetween,name:__("Space between"),icon:'wbico wbico-align-space-between-horizontal'},{id:CommonTypes_2.FlexAlignContent.SpaceAround,name:__("Space around"),icon:'wbico wbico-align-space-around-horizontal'},];var vSpacingOptions=[{id:CommonTypes_2.FlexAlignContent.Start,name:__("Start"),icon:'wbico wbico-align-top'},{id:CommonTypes_2.FlexAlignContent.Center,name:__("Center"),icon:'wbico wbico-align-middle'},{id:CommonTypes_2.FlexAlignContent.End,name:__("End"),icon:'wbico wbico-align-bottom'},{id:CommonTypes_2.FlexAlignContent.Stretch,name:__("Stretch"),icon:'wbico wbico-align-stretch-vertical'},{id:CommonTypes_2.FlexAlignContent.SpaceBetween,name:__("Space between"),icon:'wbico wbico-align-space-between-vertical'},{id:CommonTypes_2.FlexAlignContent.SpaceAround,name:__("Space around"),icon:'wbico wbico-align-space-around-vertical'},];var hAlignOptions=[{id:CommonTypes_2.FlexAlignItems.Start,name:__("Start"),icon:'wbico wbico-align-left'},{id:CommonTypes_2.FlexAlignItems.Center,name:__("Center"),icon:'wbico wbico-align-center'},{id:CommonTypes_2.FlexAlignItems.End,name:__("End"),icon:'wbico wbico-align-right'},{id:CommonTypes_2.FlexAlignItems.Stretch,name:__("Stretch"),icon:'wbico wbico-align-stretch-horizontal'}];var vAlignOptions=[{id:CommonTypes_2.FlexAlignItems.Start,name:__("Start"),icon:'wbico wbico-align-top'},{id:CommonTypes_2.FlexAlignItems.Center,name:__("Center"),icon:'wbico wbico-align-middle'},{id:CommonTypes_2.FlexAlignItems.End,name:__("End"),icon:'wbico wbico-align-bottom'},{id:CommonTypes_2.FlexAlignItems.Stretch,name:__("Stretch"),icon:'wbico wbico-align-stretch-vertical'}];function iconName(icon,name){return'<span class="'+icon+'"></span> '+name}
var FlexLayoutControl=(function(_super){__extends(FlexLayoutControl,_super);function FlexLayoutControl(){var _this=_super.call(this)||this;_this.value=null;_this.lastWrapRes=Service_5.Service.modeManager.MODE_PHONE;_this.typeHorizontal=new RadioBox_1.default('',!1,"LayoutType").setLabelHtml(iconName('wbico wbico-horizontal-layout',__("Horizontal Layout"))).onChange(function(v){if(v)
_this.onLayoutChange(CommonTypes_2.ChildrenLayoutType.Horizontal);});_this.typeVertical=new RadioBox_1.default('',!1,"LayoutType").setLabelHtml(iconName('wbico wbico-vertical-layout',__("Vertical Layout"))).onChange(function(v){if(v)
_this.onLayoutChange(CommonTypes_2.ChildrenLayoutType.Vertical);});_this.typeAbsolute=new RadioBox_1.default('',!1,"LayoutType").setLabelHtml(iconName('wbico wbico-block-layout',__("Floating Block"))).onChange(function(v){if(v)
_this.onLayoutChange(CommonTypes_2.ChildrenLayoutType.Absolute);});_this.hSpacingButtons=new FlexLayoutControlButtonRow(hSpacingOptions,function(v){return _this.onHorizontalSpacing(v)});_this.vSpacingButtons=new FlexLayoutControlButtonRow(vSpacingOptions,function(v){return _this.onVerticalSpacing(v)});_this.hAlignButtons=new FlexLayoutControlButtonRow(hAlignOptions,function(v){return _this.onHorizontalAlign(v)});_this.vAlignButtons=new FlexLayoutControlButtonRow(vAlignOptions,function(v){return _this.onVerticalAlign(v)});_this.wrappedHAlignButtons=new FlexLayoutControlButtonRow(hAlignOptions,function(v){return _this.onWrappedAlign(v)});_this.wrap=new CheckBox_4.default(__("Allow items to wrap")).onChange(function(v){return _this.onWrapChange(v)});_this.wrapResNever=new CheckBox_4.default(__("Switch to vertical layout on smaller screens")).onChange(function(v){return _this.onWrapMode(v?_this.lastWrapRes:'')});_this.wrapResDesktop=new RadioBox_1.default(__("Desktop"),!1,"layoutElementWrapResolution").onChange(function(v){if(v)
_this.onWrapMode(Service_5.Service.modeManager.MODE_DESKTOP);});_this.wrapResTablet=new RadioBox_1.default(__("Tablet"),!1,"layoutElementWrapResolution").onChange(function(v){if(v)
_this.onWrapMode(Service_5.Service.modeManager.MODE_TABLET);});_this.wrapResPhone=new RadioBox_1.default(__("Phone"),!1,"layoutElementWrapResolution").onChange(function(v){if(v)
_this.onWrapMode(Service_5.Service.modeManager.MODE_PHONE);});_this.preview=new PreviewBlock();_this._elem.addClass('wb-flex-layout-ctrl').append(new VerticalLayout_6.VerticalLayout().setSpacing(12).addAllChildren([new VerticalLayout_6.VerticalLayout().setSpacing(8).addAllChildren([_this.typeHorizontal,_this.typeVertical,_this.typeAbsolute,]),new FlowLayout_5.FlowLayout().setSpacing(10).addAllChildren([new VerticalLayout_6.VerticalLayout().setSpacing(10).addAllChildren([_this.hSpacingButtons,_this.vAlignButtons,_this.hAlignButtons,]).css({minWidth:166}).applyLayoutCellCss(2,{marginTop:-10}),_this.preview,]),_this.wrapGroup=new VerticalLayout_6.VerticalLayout().setSpacing(12).addAllChildren([_this.wrap,_this.vSpacingButtons,]),_this.visibilityLimits=new VerticalLayout_6.VerticalLayout().addAllChildren([_this.wrapResNever,_this.visibilityOpts=new VerticalLayout_6.VerticalLayout().setSpacing(12).css({marginLeft:22,marginTop:12}).addAllChildren([new VerticalLayout_6.VerticalLayout().addAllChildren([new Label_5.Label(__("Starts on")),new FlowLayout_5.FlowLayout().addAllChildren([_this.wrapResDesktop,_this.wrapResTablet,_this.wrapResPhone,]),]),new VerticalLayout_6.VerticalLayout().addAllChildren([new Label_5.Label(__("Alignment")),_this.wrappedHAlignButtons,]),]),]),]).getElem());return _this}
FlexLayoutControl.prototype.buildInit=function(data,fields){};FlexLayoutControl.prototype.onHorizontalSpacing=function(value){if(!this.value)
return;this.value.hSpacing=value;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onVerticalSpacing=function(value){if(!this.value)
return;this.value.vSpacing=value;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onHorizontalAlign=function(value){if(!this.value)
return;this.value.hAlign=value;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onVerticalAlign=function(value){if(!this.value)
return;this.value.vAlign=value;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onWrappedAlign=function(value){if(!this.value)
return;this.value.hAlign=value;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onWrapChange=function(wrap){if(!this.value)
return;this.value.wrap=wrap?CommonTypes_2.FlexWrap.Wrap:CommonTypes_2.FlexWrap.NoWrap;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onWrapMode=function(mode){if(!this.value)
return;this.value.wrapRes=mode;if(mode!='')
this.lastWrapRes=mode;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.onLayoutChange=function(layout){if(!this.value)
return;this.value.type=layout;this.updateInterface();this.onValueChanged()};FlexLayoutControl.prototype.updateInterface=function(){if(!this.value)
return;var layoutConfigurable=(this.value.type!=CommonTypes_2.ChildrenLayoutType.Absolute);var isHorizontal=(this.value.type==CommonTypes_2.ChildrenLayoutType.Horizontal);var noWrap=(this.value.wrap==CommonTypes_2.FlexWrap.NoWrap);var wrapResNever=(this.value.wrapRes=='');if(layoutConfigurable){if(isHorizontal&&!wrapResNever){this.hAlignButtons.setValue(this.value.hAlign)}else{this.wrappedHAlignButtons.setValue(this.value.hAlign)}}
this.visibilityLimits.setVisible(isHorizontal);this.wrapGroup.setVisible(isHorizontal);this.hSpacingButtons.setVisible(layoutConfigurable&&isHorizontal);this.vSpacingButtons.setVisible(layoutConfigurable&&isHorizontal&&!noWrap);this.hAlignButtons.setVisible(layoutConfigurable&&!isHorizontal);this.vAlignButtons.setVisible(layoutConfigurable&&isHorizontal);this.visibilityOpts.setVisible(layoutConfigurable&&isHorizontal&&!wrapResNever);this.preview.setVisible(layoutConfigurable);this.preview.setValue(this.value)};FlexLayoutControl.prototype.setValue=function(value){var val=__assign({},value.serialize());if(this.value&&this.value.type==val.type&&this.value.hAlign==val.hAlign&&this.value.vAlign==val.vAlign&&this.value.hSpacing==val.hSpacing&&this.value.vSpacing==val.vSpacing&&this.value.wrap==val.wrap&&this.value.wrapRes==val.wrapRes)
return;this.value=val;this.typeAbsolute.setValue(value.type==CommonTypes_2.ChildrenLayoutType.Absolute);this.typeHorizontal.setValue(value.type==CommonTypes_2.ChildrenLayoutType.Horizontal);this.typeVertical.setValue(value.type==CommonTypes_2.ChildrenLayoutType.Vertical);this.wrapResNever.setValue(value.wrapRes!="");this.wrapResDesktop.setValue(value.wrapRes==Service_5.Service.modeManager.MODE_DESKTOP);this.wrapResTablet.setValue(value.wrapRes==Service_5.Service.modeManager.MODE_TABLET);this.wrapResPhone.setValue(value.wrapRes==Service_5.Service.modeManager.MODE_PHONE||value.wrapRes=="");this.lastWrapRes=(value.wrapRes!="")?value.wrapRes:Service_5.Service.modeManager.MODE_PHONE;this.wrap.setValue(value.wrap!=CommonTypes_2.FlexWrap.NoWrap);this.hSpacingButtons.setValue(value.hSpacing);this.vSpacingButtons.setValue(value.vSpacing);this.hAlignButtons.setValue(value.hAlign);this.vAlignButtons.setValue(value.vAlign);this.wrappedHAlignButtons.setValue(value.hAlign);this.updateInterface()};FlexLayoutControl.prototype.getValue=function(){return new FlexLayoutControlValue(this.value)};FlexLayoutControl.supportsMultipleObjectBindings=function(){return!1};FlexLayoutControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return FlexLayoutControl}(UIComponent_21.UIComponent));exports.FlexLayoutControl=FlexLayoutControl;var FlexLayoutControlButtonRow=(function(_super){__extends(FlexLayoutControlButtonRow,_super);function FlexLayoutControlButtonRow(buttons,onChange){var _this=_super.call(this)||this;_this.onChange=onChange;_this.buttons={};_this.selectedButton=null;_this._elem.addClass('btn-group');var _loop_6=function(def){var btn=(0,jquery_34.default)('<button>').attr({type:'button'}).addClass('btn btn-default').append((0,jquery_34.default)('<span>').addClass(def.icon)).attr({title:def.name}).on('click',function(){return _this.onClick(def)});this_3._elem.append(btn);this_3.buttons[def.id]={def:def,elem:btn}};var this_3=this;for(var _i=0,buttons_1=buttons;_i<buttons_1.length;_i++){var def=buttons_1[_i];_loop_6(def)}
_this.setValue(CommonTypes_2.FlexAlignContent.Start);return _this}
FlexLayoutControlButtonRow.prototype.setValue=function(value){if(this.value===value)
return;if(!(value in this.buttons)){if(value==CommonTypes_2.FlexAlignContent.SpaceEvenly&&(CommonTypes_2.FlexAlignContent.SpaceAround in this.buttons)){value=CommonTypes_2.FlexAlignContent.SpaceAround}else{console.warn('Unknown value: '+value);for(var key in this.buttons){value=key;break}}}
this.value=value;if(this.selectedButton)
this.selectedButton.removeClass('active');this.selectedButton=this.buttons[value].elem;this.selectedButton.addClass('active')};FlexLayoutControlButtonRow.prototype.onClick=function(def){this.setValue(def.id);this.onChange(def.id)};return FlexLayoutControlButtonRow}(UIComponent_21.UIComponent));var PreviewBlock=(function(_super){__extends(PreviewBlock,_super);function PreviewBlock(){var _this=_super.call(this)||this;_this._elem.addClass('wb-flex-layout-ctrl-preview').append(_this.rowTop=(0,jquery_34.default)('<div>').addClass('wb-r1').append((0,jquery_34.default)('<div>').addClass('wb-c1')).append((0,jquery_34.default)('<div>').addClass('wb-c2')).append((0,jquery_34.default)('<div>').addClass('wb-c3'))).append(_this.rowBottom=(0,jquery_34.default)('<div>').addClass('wb-r2').append((0,jquery_34.default)('<div>').addClass('wb-c1')).append((0,jquery_34.default)('<div>').addClass('wb-c2')));return _this}
PreviewBlock.prototype.setValue=function(value){var val=new FlexLayoutControlValue(value);var isHorizontal=(value.type==CommonTypes_2.ChildrenLayoutType.Horizontal);var noWrap=(value.wrap==CommonTypes_2.FlexWrap.NoWrap);var css=val.getContainerCss(isHorizontal);css.flexDirection=isHorizontal?"row":"column";if(!isHorizontal||noWrap){this.rowBottom.hide();this._elem.css({'align-content':((isHorizontal&&noWrap)?CommonTypes_2.FlexAlignContent.Stretch:CommonTypes_2.FlexAlignContent.Start)})}else{this.rowBottom.show();this._elem.css({'align-content':value.vSpacing})}
var rowCss=__assign(__assign({},css),{'flex-wrap':CommonTypes_2.FlexWrap.NoWrap});this.rowTop.css(rowCss);this.rowBottom.css(rowCss)};return PreviewBlock}(UIComponent_21.UIComponent));var FlexLayoutControlValue=(function(){function FlexLayoutControlValue(value){this.type=CommonTypes_2.ChildrenLayoutType.Absolute;this.wrapRes=Service_5.Service.modeManager.MODE_PHONE;this.wrap=CommonTypes_2.FlexWrap.NoWrap;this.hAlign=CommonTypes_2.FlexAlignItems.Center;this.vAlign=CommonTypes_2.FlexAlignItems.Center;this.hSpacing=CommonTypes_2.FlexAlignContent.SpaceAround;this.vSpacing=CommonTypes_2.FlexAlignContent.SpaceAround;if(value){this.type=("type" in value)?value.type:this.type;this.wrapRes=("wrapRes" in value)?value.wrapRes:this.wrapRes;this.wrap=("wrap" in value)?value.wrap:this.wrap;this.hAlign=("hAlign" in value)?value.hAlign:this.hAlign;this.vAlign=("vAlign" in value)?value.vAlign:this.vAlign;this.hSpacing=("hSpacing" in value)?value.hSpacing:this.hSpacing;this.vSpacing=("vSpacing" in value)?value.vSpacing:this.vSpacing}}
FlexLayoutControlValue.prototype.serialize=function(){return{type:this.type,wrapRes:this.wrapRes,wrap:this.wrap,hAlign:this.hAlign,vAlign:this.vAlign,hSpacing:this.hSpacing,vSpacing:this.vSpacing,}};FlexLayoutControlValue.prototype.getContainerCss=function(isHorizontalNow){return{"justify-items":isHorizontalNow?this.hAlign:CommonTypes_2.FlexAlignItems.Start,"align-items":isHorizontalNow?this.vAlign:this.hAlign,"justify-content":isHorizontalNow?this.hSpacing:CommonTypes_2.FlexAlignContent.Start,"align-content":isHorizontalNow?this.vSpacing:CommonTypes_2.FlexAlignContent.Stretch,"flex-wrap":isHorizontalNow?this.wrap:"nowrap"}};return FlexLayoutControlValue}());exports.FlexLayoutControlValue=FlexLayoutControlValue});define("js/element/ControlsAlignmentToolbar",["require","exports","js/BuilderEvent","js/CommonTypes","jquery"],function(require,exports,BuilderEvent_2,CommonTypes_3,jquery_35){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ControlsAlignmentToolbar=exports.updatePosition=void 0;var Button=(function(){function Button(icon,title,full,func,disabled,tooltip){if(disabled===void 0){disabled=!1}
var _this=this;this.isVisible=!0;this.isEnabled=!0;this.isActive=!1;this.elem=(0,jquery_35.default)('<span>').attr('title',tooltip||title).on('click',function(e){e.preventDefault();e.stopPropagation();if(_this.isEnabled)
func(e);});if(full){this.elem.addClass('wb-ctrl-text').text(title);if(icon)
this.elem.prepend((0,jquery_35.default)('<span>').addClass(icon));}else{this.elem.addClass('wbico wbico-'+icon)}
if(disabled)
this.elem.addClass('disabled');}
Button.prototype.setVisible=function(visible){if(this.isVisible==visible)
return;this.isVisible=visible;if(visible){this.elem.show()}else{this.elem.hide()}};Button.prototype.setEnabled=function(enabled){if(this.isEnabled==enabled)
return;this.isEnabled=enabled;if(enabled){this.elem.removeClass('disabled')}else{this.elem.addClass('disabled')}};Button.prototype.setActive=function(active){if(this.isActive==active)
return this;this.isActive=active;if(active){this.elem.addClass('active')}else{this.elem.removeClass('active')}
return this};Button.prototype.getElem=function(){return this.elem};Button.prototype.dispose=function(){this.elem.off('click');this.elem.remove()};return Button}());var ButtonGroup=(function(){function ButtonGroup(buttons,onChange){this.onChange=onChange;this.isVisible=!0;this.value='';this.buttons={};this.elem=(0,jquery_35.default)('<div>');this.updateButtons(buttons)}
ButtonGroup.prototype.updateButtons=function(buttons){var _this=this;this.elem.empty();var _loop_7=function(type,icon,title,full,disabled,disabledTooltip){var button=new Button(icon,title,full||!1,function(e){return _this.setValue(type,e)},disabled,disabled?disabledTooltip:undefined);this_4.buttons[type]=button;this_4.elem.append(button.getElem())};var this_4=this;for(var _i=0,buttons_2=buttons;_i<buttons_2.length;_i++){var _a=buttons_2[_i],type=_a[0],icon=_a[1],title=_a[2],full=_a[3],disabled=_a[4],disabledTooltip=_a[5];_loop_7(type,icon,title,full,disabled,disabledTooltip)}};ButtonGroup.prototype.setValue=function(value,e){if(this.value==value)
return;if(this.value&&(this.value in this.buttons)){this.buttons[this.value].setActive(!1)}
this.value=value;if(value in this.buttons){this.buttons[value].setActive(!0)}
this.onChange(value,e)};ButtonGroup.prototype.getValue=function(){return this.value};ButtonGroup.prototype.setButtonVisible=function(value,visible){if(value in this.buttons)
this.buttons[value].setVisible(visible);};ButtonGroup.prototype.setButtonEnabled=function(value,enabled){if(value in this.buttons)
this.buttons[value].setEnabled(enabled);};ButtonGroup.prototype.setVisible=function(visible){if(this.isVisible==visible)
return this;this.isVisible=visible;if(visible){this.elem.show()}else{this.elem.hide()}
return this};ButtonGroup.prototype.getElem=function(){return this.elem};ButtonGroup.prototype.dispose=function(){for(var type in this.buttons){this.buttons[type].dispose();delete this.buttons[type]}
this.elem.remove()};return ButtonGroup}());var initiated=!1;var rootElem=null;var selectedElem=null;function updatePosition(){if(!rootElem||!selectedElem)
return;var selElem=selectedElem.getElem();var spb=selectedElem.getOwnerBounds();if(!spb)
return;var reb=rootElem.getBoundingClientRect();if(selectedElem.layoutHandler&&selectedElem.layoutHandler.positionMargins){var pm=selectedElem.layoutHandler.positionMargins();spb={top:spb.top+pm.top,right:spb.right+pm.right,bottom:spb.bottom+pm.bottom,left:spb.left+pm.left,}}
var minWidth=5+2+1;for(var _i=0,_a=selElem.children('div').toArray();_i<_a.length;_i++){var ch=_a[_i];var el=(0,jquery_35.default)(ch);if(!el.is(":visible")||el.is(".wb-cat-message"))
continue;var groupWidth=el.outerWidth(!0);if((minWidth+groupWidth)>reb.width)
break;minWidth+=groupWidth}
selElem.css({minWidth:(minWidth>0)?(minWidth+'px'):''});var width=selElem.outerWidth();if(width>reb.width)
width=reb.width;var height=Math.max(selElem.outerHeight(),42);var vOff=24;var scrollTop=window.scrollY||0;var top=spb.top-height-vOff;var left=spb.left;if(reb.top>top||scrollTop>(top-reb.top)){top=spb.bottom+vOff}
if((reb.left+reb.width)<(left+width)){left-=(left+width)-(reb.left+reb.width)}
if(left<reb.left)
left=reb.left;selElem.css({left:(left-reb.left)+'px',top:(top-reb.top)+'px',})}
exports.updatePosition=updatePosition;function updateRootElem(){var body=wb_builder.bodyInstance;if(!body)
return null;var rootElem=body.site[0];return rootElem}
function initGlobal(){if(initiated)
return;rootElem=updateRootElem();initiated=!0;(0,jquery_35.default)(window).on('scroll',function(){return updatePosition()});BuilderEvent_2.GlobalEvents.on('page.load',function(){rootElem=updateRootElem()})}
var ControlsAlignmentToolbar=(function(){function ControlsAlignmentToolbar(){var _this=this;this.owner=null;this.isVisible=!0;this.layoutHandler=null;this.layoutPair=null;this.isInitial=!1;this.actions=null;this.messages=[];initGlobal();this.elem=(0,jquery_35.default)('<div>').addClass('wb-controls-alignment-toolbar');this.actionGroup=new ButtonGroup([],function(v,e){return _this.callAction(v,e)});var groups=[this.target=new ButtonGroup([['parent','align-outside-mode',__('Align self and neighbors')],['self','align-inside-mode',__('Align children')],],function(v){return _this.setTarget(v)}),this.hDist=new ButtonGroup([[CommonTypes_3.FlexAlignContent.Start,'align-left',__('Start')],[CommonTypes_3.FlexAlignContent.Center,'align-center',__('Center')],[CommonTypes_3.FlexAlignContent.End,'align-right',__('End')],[CommonTypes_3.FlexAlignContent.SpaceBetween,'align-space-between-horizontal',__('Space between')],[CommonTypes_3.FlexAlignContent.SpaceAround,'align-space-around-horizontal',__('Space around')],],function(v){return _this.setHDist(v)}),this.hAlign=new ButtonGroup([[CommonTypes_3.FlexAlignItems.Start,'align-left',__('Start')],[CommonTypes_3.FlexAlignItems.Center,'align-center',__('Center')],[CommonTypes_3.FlexAlignItems.End,'align-right',__('End')],[CommonTypes_3.FlexAlignItems.Stretch,'align-stretch-horizontal',__('Stretch')],],function(v){return _this.setHAlign(v)}),this.vAlign=new ButtonGroup([[CommonTypes_3.FlexAlignItems.Start,'align-top',__('Start')],[CommonTypes_3.FlexAlignItems.Center,'align-middle',__('Center')],[CommonTypes_3.FlexAlignItems.End,'align-bottom',__('End')],[CommonTypes_3.FlexAlignItems.Stretch,'align-stretch-vertical',__('Stretch')],],function(v){return _this.setVAlign(v)}),this.direction=new ButtonGroup([[CommonTypes_3.ChildrenLayoutType.Vertical,'vertical-layout',__('Vertical Layout')],[CommonTypes_3.ChildrenLayoutType.Horizontal,'horizontal-layout',__('Horizontal Layout')],],function(v){return _this.setDirection(v)})];for(var _i=0,groups_1=groups;_i<groups_1.length;_i++){var group=groups_1[_i];this.elem.append(group.getElem())}}
ControlsAlignmentToolbar.prototype.getTargetLayout=function(target){if(!target||!this.layoutPair)
return null;return(target=='self')?(this.layoutPair.self||null):this.layoutPair.parent};ControlsAlignmentToolbar.prototype.setTargetLayout=function(target,layout){if(!this.layoutHandler)
return;if(target=='self'){if(this.layoutHandler.self)
this.layoutHandler.self(layout);}else if(target=='parent'){this.layoutHandler.parent(layout)}
window.requestAnimationFrame(function(){return updatePosition()})};ControlsAlignmentToolbar.prototype.setTarget=function(target,force){var _this=this;if(force===void 0){force=!1}
if(force)
this.target.setValue(target);var selfEnabled=(this.layoutPair&&this.layoutPair.self)?!0:!1;this.target.setButtonEnabled('self',selfEnabled);this.direction.setVisible(target=='self');var layout=this.getTargetLayout(target);var elemLayout=layout?layout.type:null;if(elemLayout==CommonTypes_3.ChildrenLayoutType.Horizontal){this.hDist.setVisible(!0);this.hAlign.setVisible(!1);this.vAlign.setVisible(!0);this.target.setVisible(!0)}else if(elemLayout==CommonTypes_3.ChildrenLayoutType.Vertical){this.hDist.setVisible(!1);this.hAlign.setVisible(!0);this.vAlign.setVisible(!1);this.target.setVisible(!0)}else{this.hDist.setVisible(!1);this.hAlign.setVisible(!1);this.vAlign.setVisible(!1);this.direction.setVisible(!1);this.target.setVisible(selfEnabled);if(!selfEnabled&&!this.actions){window.requestAnimationFrame(function(){return _this.setVisible(!1)})}}
if(!layout||!elemLayout)
return;this.isInitial=!0;this.hDist.setValue(layout.hSpacing);this.vAlign.setValue(layout.vAlign);this.hAlign.setValue(layout.hAlign);this.direction.setValue(elemLayout);this.isInitial=!1;window.requestAnimationFrame(function(){return updatePosition()})};ControlsAlignmentToolbar.prototype.setHDist=function(dist){if(this.isInitial)
return;var target=this.target.getValue()||null;var layout=this.getTargetLayout(target);if(!layout)
return;layout.hSpacing=dist;this.setTargetLayout(target,layout)};ControlsAlignmentToolbar.prototype.setHAlign=function(align){if(this.isInitial)
return;var target=this.target.getValue()||null;var layout=this.getTargetLayout(target);if(!layout)
return;layout.hAlign=align;this.setTargetLayout(target,layout)};ControlsAlignmentToolbar.prototype.setVAlign=function(align){if(this.isInitial)
return;var target=this.target.getValue()||null;var layout=this.getTargetLayout(target);if(!layout)
return;layout.vAlign=align;this.setTargetLayout(target,layout)};ControlsAlignmentToolbar.prototype.setDirection=function(direction){if(this.isInitial)
return;var target=this.target.getValue()||null;var layout=this.getTargetLayout(target);if(!layout)
return;layout.type=direction;this.setTargetLayout(target,layout)};ControlsAlignmentToolbar.prototype.callAction=function(actionId,e){if(this.actions&&(actionId in this.actions)){this.actions[actionId].action.call(this,e);this.actionGroup.setValue('')}};ControlsAlignmentToolbar.prototype.setActions=function(actions){if(actions.length>0){this.actions={};var buttons=[];for(var _i=0,actions_1=actions;_i<actions_1.length;_i++){var action=actions_1[_i];this.actions[action.name]=action;buttons.push([action.name,action.icon||'',action.name,!0,action.disabled||!1,action.disabledTooltip||''])}
this.actionGroup.updateButtons(buttons);this.elem.prepend(this.actionGroup.getElem())}else{this.actions=null;this.actionGroup.getElem().detach();this.actionGroup.updateButtons([])}};ControlsAlignmentToolbar.prototype.setMessages=function(messages){for(var _i=0,_a=this.messages;_i<_a.length;_i++){var message=_a[_i];if(message.elem)
message.elem.remove();}
this.messages=messages;for(var _b=0,_c=this.messages;_b<_c.length;_b++){var message=_c[_b];message.elem=(0,jquery_35.default)('<div class="wb-cat-message"></div>');message.elem.html(message.html);this.elem.append(message.elem)}};ControlsAlignmentToolbar.prototype.setLayoutHandler=function(layoutHandler){this.layoutHandler=layoutHandler};ControlsAlignmentToolbar.prototype.setLayoutPair=function(layoutPair){var direction=((this.layoutPair&&layoutPair&&this.layoutPair.id==layoutPair.id)?this.target.getValue():'')||'self';if(layoutPair&&!layoutPair.self&&direction=='self')
direction='parent';this.layoutPair=layoutPair;this.setTarget(direction,!0)};ControlsAlignmentToolbar.prototype.isAvailable=function(){return this.layoutPair?!0:!1};ControlsAlignmentToolbar.prototype.setVisible=function(visible,force){if(force===void 0){force=!1}
if(this.isVisible==visible&&!force)
return;this.isVisible=visible;if(visible){this.elem.show();if(selectedElem&&selectedElem!==this){selectedElem.setVisible(!1)}
selectedElem=this;var selElem=selectedElem.getElem();var selParent=selElem.parent();var accordion=selParent.parents('.wb-accordion');if(accordion.length>0){accordion.on('scroll',function(){return updatePosition()})}
updatePosition()}else{this.elem.hide();if(selectedElem&&selectedElem===this){var selElem=selectedElem.getElem();var selParent=selElem.parent();var accordion=selParent.parents('.wb-accordion');if(accordion.length>0){accordion.off('scroll',function(){return updatePosition()})}
selectedElem=null}}};ControlsAlignmentToolbar.prototype.getElem=function(){return this.elem};ControlsAlignmentToolbar.prototype.getOwnerBounds=function(){return this.owner?this.owner.getBoundingClientRect():null};ControlsAlignmentToolbar.prototype.appendTo=function(parent){this.owner=(parent&&parent.length>0)?parent[0]:null;if(!rootElem)
return;this.elem.appendTo(rootElem)};ControlsAlignmentToolbar.prototype.detach=function(){this.elem.detach()};ControlsAlignmentToolbar.prototype.dispose=function(){this.setVisible(!1);this.actionGroup.dispose();this.target.dispose();this.hDist.dispose();this.hAlign.dispose();this.vAlign.dispose();this.direction.dispose();this.elem.remove()};return ControlsAlignmentToolbar}());exports.ControlsAlignmentToolbar=ControlsAlignmentToolbar});define("js/element/ControlsSelection",["require","exports","js/util/ExtendedResizable","js/element/ControlsCircleButton","js/element/ControlsSelectionBorder","jquery","js/element/ControlsAlignmentToolbar"],function(require,exports,ExtendedResizable_1,ControlsCircleButton_1,ControlsSelectionBorder_1,jquery_36,ControlsAlignmentToolbar_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ControlsSelection=exports.release=exports.acquire=exports.isDoingResize=exports.ControlsResizeMode=exports.CloneMode=void 0;var CloneMode;(function(CloneMode){CloneMode[CloneMode.NONE=0]="NONE";CloneMode[CloneMode.ALL=1]="ALL";CloneMode[CloneMode.HORIZONTAL=2]="HORIZONTAL";CloneMode[CloneMode.VERTICAL=3]="VERTICAL"})(CloneMode||(exports.CloneMode=CloneMode={}));var ControlsResizeMode;(function(ControlsResizeMode){ControlsResizeMode[ControlsResizeMode.ALL=0]="ALL";ControlsResizeMode[ControlsResizeMode.HORIZONTAL=1]="HORIZONTAL";ControlsResizeMode[ControlsResizeMode.FULL_WIDTH=2]="FULL_WIDTH";ControlsResizeMode[ControlsResizeMode.SIDES=3]="SIDES";ControlsResizeMode[ControlsResizeMode.LOWER_RIGHT=4]="LOWER_RIGHT";ControlsResizeMode[ControlsResizeMode.NONE=5]="NONE"})(ControlsResizeMode||(exports.ControlsResizeMode=ControlsResizeMode={}));var lastActiveSelBorder=null;var lastActiveSelDown=!1;function isDoingResize(){return lastActiveSelDown}
exports.isDoingResize=isDoingResize;function acquire(){return new ControlsSelection()}
exports.acquire=acquire;function release(res){res.dispose()}
exports.release=release;var ControlsSelection=(function(){function ControlsSelection(){var _this=this;this.resizeHandles={};this.resizeMode=ControlsResizeMode.ALL;this.isVisible=!0;this.selElems={top:new ControlsSelectionBorder_1.SelectionBorder(ControlsSelectionBorder_1.SelectionBorderType.TOP),right:new ControlsSelectionBorder_1.SelectionBorder(ControlsSelectionBorder_1.SelectionBorderType.RIGHT),bottom:new ControlsSelectionBorder_1.SelectionBorder(ControlsSelectionBorder_1.SelectionBorderType.BOTTOM),left:new ControlsSelectionBorder_1.SelectionBorder(ControlsSelectionBorder_1.SelectionBorderType.LEFT),};this.cloneButtons={top:new ControlsCircleButton_1.CircleButton(ControlsCircleButton_1.CircleButtonType.TOP),right:new ControlsCircleButton_1.CircleButton(ControlsCircleButton_1.CircleButtonType.RIGHT),bottom:new ControlsCircleButton_1.CircleButton(ControlsCircleButton_1.CircleButtonType.BOTTOM),left:new ControlsCircleButton_1.CircleButton(ControlsCircleButton_1.CircleButtonType.LEFT),};this.alignmentToolbar=new ControlsAlignmentToolbar_1.ControlsAlignmentToolbar();this.alignmentToolbar.setVisible(!1);var dot=(0,jquery_36.default)('<div>').addClass('wb_selection_dot');this.selectionDots={leftTop:dot.clone().css({left:0,top:0,}),centerTop:dot.clone().css({left:'50%',marginLeft:'-4px',top:0,}),rightTop:dot.clone().css({right:0,top:0,}),rightMiddle:dot.clone().css({right:0,top:'50%',marginTop:'-4px',}),rightBottom:dot.clone().css({right:0,bottom:0,}),centerBottom:dot.clone().css({left:'50%',marginLeft:'-4px',bottom:0,}),leftBottom:dot.clone().css({left:0,bottom:0,}),leftMiddle:dot.clone().css({left:0,top:'50%',marginTop:'-4px',}),};this.onResizeOver=function(e){return _this.onResizeHandleHover(!0,_this.resolveAxis(e))};this.onResizeOut=function(e){return _this.onResizeHandleHover(!1,_this.resolveAxis(e))};for(var _i=0,resizeHandleTypes_1=ExtendedResizable_1.resizeHandleTypes;_i<resizeHandleTypes_1.length;_i++){var handle=resizeHandleTypes_1[_i];this.resizeHandles[handle]=(0,ExtendedResizable_1.buildResizeHandleElem)(handle)}
this.resizeHandlesVisible=!0;this.setResizeHandlesVisible(!1);this.selected=!0;this.setSelected(!1);this.parentMarginsVisible=!0;this.setParentMarginsVisible(!1);this.paddingVisible=!0;this.setPaddingVisible(!1);this.marginsVisible=!0;this.setMarginVisible(!1);this.buttonsVisible=!0;this.setButtonsVisible(!1);this.cloneMode=CloneMode.ALL;this.setCloneMode(CloneMode.NONE)}
ControlsSelection.prototype.setToolbarActions=function(actions){if(this.alignmentToolbar)
this.alignmentToolbar.setActions(actions);return this};ControlsSelection.prototype.setAlignmentInfoHandler=function(layoutHandler){if(this.alignmentToolbar){this.alignmentToolbar.setLayoutHandler(layoutHandler)}
return this};ControlsSelection.prototype.setAlignmentInfo=function(layoutPair){if(this.alignmentToolbar){this.alignmentToolbar.setLayoutPair(layoutPair)}
return this};ControlsSelection.prototype.setMessages=function(messages){if(this.alignmentToolbar){this.alignmentToolbar.setMessages(messages)}
return this};ControlsSelection.prototype.setValueChangeHandler=function(valueChangeHandler){for(var k in this.selElems)
this.selElems[k].setValueChangeHandler(valueChangeHandler);return this};ControlsSelection.prototype.setCloneHandler=function(handler){for(var k in this.cloneButtons)
this.cloneButtons[k].setHandler(handler);return this};ControlsSelection.prototype.setCloneMode=function(cloneMode){if(this.cloneMode==cloneMode)
return this;this.cloneMode=cloneMode;this.cloneButtons.top.setActive(cloneMode==CloneMode.ALL||cloneMode==CloneMode.VERTICAL);this.cloneButtons.right.setActive(cloneMode==CloneMode.ALL||cloneMode==CloneMode.HORIZONTAL);this.cloneButtons.bottom.setActive(cloneMode==CloneMode.ALL||cloneMode==CloneMode.VERTICAL);this.cloneButtons.left.setActive(cloneMode==CloneMode.ALL||cloneMode==CloneMode.HORIZONTAL);return this};ControlsSelection.prototype.setButtonsVisible=function(visible){var _a;if(this.buttonsVisible==visible)
return this;this.buttonsVisible=visible;for(var k in this.cloneButtons){var btn=this.cloneButtons[k];if(!btn.isActive())
continue;btn.setVisible(visible)}(_a=this.alignmentToolbar)===null||_a===void 0?void 0:_a.setVisible(visible&&this.alignmentToolbar.isAvailable());return this};ControlsSelection.prototype.updateResizeDots=function(resizeHandlesVisible,resizeMode){for(var dot in this.selectionDots){var show=!0;if(!resizeHandlesVisible||resizeMode==ControlsResizeMode.NONE)
show=!1;else if(resizeMode==ControlsResizeMode.HORIZONTAL&&(dot==='centerTop'||dot==='centerBottom'))
show=!1;else if(resizeMode==ControlsResizeMode.FULL_WIDTH&&dot!=='centerTop'&&dot!=='centerBottom')
show=!1;if(show){this.selectionDots[dot].show()}else{this.selectionDots[dot].hide()}}
for(var handle in this.resizeHandles){var show=!0;if(!resizeHandlesVisible||resizeMode==ControlsResizeMode.NONE)
show=!1;else if(resizeMode==ControlsResizeMode.HORIZONTAL&&handle!=='w'&&handle!=='e')
show=!1;else if(resizeMode==ControlsResizeMode.FULL_WIDTH&&handle!=='n'&&handle!=='s')
show=!1;else if(resizeMode==ControlsResizeMode.SIDES&&handle!=='n'&&handle!=='e'&&handle!=='s'&&handle!=='w')
show=!1;else if(resizeMode==ControlsResizeMode.LOWER_RIGHT&&handle!=='e'&&handle!=='s'&&handle!=='se')
show=!1;if(show){this.resizeHandles[handle].show()}else{this.resizeHandles[handle].hide()}}
return this};ControlsSelection.prototype.setAlignment=function(hAlign,vAlign){for(var k in this.selElems)
this.selElems[k].setAlignment(hAlign,vAlign);return this};ControlsSelection.prototype.setSupportPadding=function(value){this.selElems.top.setSupportPadding(value);this.selElems.right.setSupportPadding(value);this.selElems.bottom.setSupportPadding(value);this.selElems.left.setSupportPadding(value);return this};ControlsSelection.prototype.setSupportMargin=function(value){this.selElems.top.setSupportMargin(value);this.selElems.right.setSupportMargin(value);this.selElems.bottom.setSupportMargin(value);this.selElems.left.setSupportMargin(value);return this};ControlsSelection.prototype.setSpacingOverflow=function(value){this.selElems.top.setSpacingOverflow(value);this.selElems.right.setSpacingOverflow(value);this.selElems.bottom.setSpacingOverflow(value);this.selElems.left.setSpacingOverflow(value);return this};ControlsSelection.prototype.updatePadding=function(padding){this.selElems.top.setPadding((padding&&padding.paddingTop)||0,(padding&&padding.paddingLeft)||0,(padding&&padding.paddingRight)||0);this.selElems.right.setPadding((padding&&padding.paddingRight)||0,(padding&&padding.paddingTop)||0,(padding&&padding.paddingBottom)||0);this.selElems.bottom.setPadding((padding&&padding.paddingBottom)||0,(padding&&padding.paddingLeft)||0,(padding&&padding.paddingRight)||0);this.selElems.left.setPadding((padding&&padding.paddingLeft)||0,(padding&&padding.paddingTop)||0,(padding&&padding.paddingBottom)||0);return this};ControlsSelection.prototype.updateMargin=function(margin){this.selElems.top.setMargin(margin?margin.marginTop:0);this.selElems.right.setMargin(margin?margin.marginRight:0);this.selElems.bottom.setMargin(margin?margin.marginBottom:0);this.selElems.left.setMargin(margin?margin.marginLeft:0);return this};ControlsSelection.prototype.updateParentMargin=function(margin){this.selElems.top.setParentMargin(margin?margin.marginTop:0);this.selElems.right.setParentMargin(margin?margin.marginRight:0);this.selElems.bottom.setParentMargin(margin?margin.marginBottom:0);this.selElems.left.setParentMargin(margin?margin.marginLeft:0);return this};ControlsSelection.prototype.setResizeMode=function(mode){if(this.resizeMode!=mode){this.resizeMode=mode;this.updateResizeDots(this.resizeHandlesVisible,mode)}
return this};ControlsSelection.prototype.setResizeHandlesVisible=function(visible,force){if(force===void 0){force=!1}
if(visible&&(!this.resizeHandlesVisible||force)){this.resizeHandlesVisible=!0;this.updateResizeDots(this.resizeHandlesVisible,this.resizeMode)}else if(!visible&&(this.resizeHandlesVisible||force)){this.resizeHandlesVisible=!1;this.updateResizeDots(this.resizeHandlesVisible,this.resizeMode)}
return this};ControlsSelection.prototype.onResizeHandleHover=function(hover,axis){if(lastActiveSelDown)
return;var elem=null;if(axis==='n')
elem=this.selElems.top;else if(axis==='e')
elem=this.selElems.right;else if(axis==='s')
elem=this.selElems.bottom;else if(axis==='w')
elem=this.selElems.left;if(lastActiveSelBorder&&lastActiveSelBorder!=elem){lastActiveSelBorder.setActive(!1);lastActiveSelBorder=null}
if(elem){elem.setActive(hover);lastActiveSelBorder=elem}};ControlsSelection.prototype.handleResize=function(start,axis){if(start===void 0){start=!1}
if(start){lastActiveSelDown=!0;this.onResizeHandleHover(!0,axis)}else{lastActiveSelDown=!1;this.onResizeHandleHover(!1,axis)}};ControlsSelection.prototype.setSelected=function(selected){if(selected&&!this.selected){this.selected=!0;for(var k in this.selElems){var sel=this.selElems[k];sel.setVisible(!0)}}else if(!selected&&this.selected){this.selected=!1;for(var k in this.selElems){var sel=this.selElems[k];sel.setVisible(!1)}}
return this};ControlsSelection.prototype.setVisible=function(visible){var _a;if(this.isVisible==visible)
return this;this.isVisible=visible;(_a=this.alignmentToolbar)===null||_a===void 0?void 0:_a.setVisible(visible&&this.alignmentToolbar.isAvailable());return this};ControlsSelection.prototype.setPaddingVisible=function(selected){if(selected&&!this.paddingVisible){this.paddingVisible=!0;for(var k in this.selElems){var sel=this.selElems[k];sel.setPaddingVisible(!0)}}else if(!selected&&this.paddingVisible){this.paddingVisible=!1;for(var k in this.selElems){var sel=this.selElems[k];sel.setPaddingVisible(!1)}}
return this};ControlsSelection.prototype.setMarginVisible=function(selected){if(selected&&!this.marginsVisible){this.marginsVisible=!0;for(var k in this.selElems){var sel=this.selElems[k];sel.setMarginVisible(!0)}}else if(!selected&&this.marginsVisible){this.marginsVisible=!1;for(var k in this.selElems){var sel=this.selElems[k];sel.setMarginVisible(!1)}}
return this};ControlsSelection.prototype.setParentMarginsVisible=function(visible){if(visible&&!this.parentMarginsVisible){this.parentMarginsVisible=!0;for(var k in this.selElems){var sel=this.selElems[k];sel.setParentMarginVisible(!0)}}else if(!visible&&this.parentMarginsVisible){this.parentMarginsVisible=!1;for(var k in this.selElems){var sel=this.selElems[k];sel.setParentMarginVisible(!1)}}
return this};ControlsSelection.prototype.resolveAxis=function(e){var clsM=e.target.className.match(/^.*resizable-handle-([a-z]+).*$/i);return clsM?clsM[1]:'?'};ControlsSelection.prototype.getResizeHandles=function(){return this.resizeHandles};ControlsSelection.prototype.attach=function(elem,parent){for(var k in this.selElems)
this.selElems[k].appendTo(elem);for(var k in this.cloneButtons)
this.cloneButtons[k].elem.appendTo(parent);for(var k in this.selectionDots)
this.selectionDots[k].appendTo(elem);for(var handle in this.resizeHandles){this.resizeHandles[handle].on('mouseover',this.onResizeOver).on('mouseout',this.onResizeOut).appendTo(parent)}
this.alignmentToolbar.appendTo(parent);return this};ControlsSelection.prototype.detach=function(){for(var k in this.selElems)
this.selElems[k].detach();for(var k in this.cloneButtons)
this.cloneButtons[k].elem.detach();for(var k in this.selectionDots)
this.selectionDots[k].detach();for(var handle in this.resizeHandles){this.resizeHandles[handle].off('mouseover',this.onResizeOver).off('mouseout',this.onResizeOut).detach()}
this.alignmentToolbar.detach();this.setValueChangeHandler(undefined).setCloneHandler(undefined);return this};ControlsSelection.prototype.dispose=function(){this.detach();for(var k in this.selElems)
this.selElems[k].dispose();for(var k in this.cloneButtons)
this.cloneButtons[k].dispose();for(var k in this.selectionDots)
this.selectionDots[k].remove();this.alignmentToolbar.dispose();};return ControlsSelection}());exports.ControlsSelection=ControlsSelection});define("js/element/ControlsMinMax",["require","exports","jquery"],function(require,exports,jquery_37){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ControlsMinMax=void 0;var ControlsMinMax=(function(){function ControlsMinMax(parent){this.isVisible=!0;this.elem=(0,jquery_37.default)('<div>').addClass('sel-min-max');this.minElem=(0,jquery_37.default)('<div>').addClass('sel-min').appendTo(this.elem);this.maxElem=(0,jquery_37.default)('<div>').addClass('sel-max').appendTo(this.elem);this.setVisible(!1);parent.append(this.elem)}
ControlsMinMax.prototype.setVisible=function(visible){if(this.isVisible==visible)
return;this.isVisible=visible;if(visible){this.elem.show()}else{this.elem.hide()}};ControlsMinMax.prototype.applyMinValue=function(width,height){this.minElem.css({left:((width||100)/-2)+'px',top:((height||100)/-2)+'px',width:(width||100)+'px',height:(height||100)+'px',});if(width==0&&height==0){this.minElem.hide()}else{this.minElem.show()}};ControlsMinMax.prototype.applyMaxValue=function(width,height){this.maxElem.css({left:((width||100)/-2)+'px',top:((height||100)/-2)+'px',width:(width||100)+'px',height:(height||100)+'px',});if(width==0&&height==0){this.maxElem.hide()}else{this.maxElem.show()}};return ControlsMinMax}());exports.ControlsMinMax=ControlsMinMax});define("js/element/Controls",["require","exports","js/CommonTypes","js/element/ControlsButton","js/element/ControlsSelectionBorder","js/util/EventUtil","js/element/ControlsSelection","jquery","js/element/ControlsMinMax"],function(require,exports,CommonTypes_4,ControlsButton_1,ControlsSelectionBorder_2,EventUtil_3,ControlsSelection_1,jquery_38,ControlsMinMax_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Controls=exports.isDoingResize=exports.CloneMode=exports.ControlsResizeMode=void 0;Object.defineProperty(exports,"CloneMode",{enumerable:!0,get:function(){return ControlsSelection_1.CloneMode}});Object.defineProperty(exports,"ControlsResizeMode",{enumerable:!0,get:function(){return ControlsSelection_1.ControlsResizeMode}});var lastControlsHover=null;var isGlobalEvent=!1;function isDoingResize(){return(0,ControlsSelection_1.isDoingResize)()||(0,ControlsSelectionBorder_2.isDoingResize)()}
exports.isDoingResize=isDoingResize;var Controls=(function(){function Controls(outline,cover,valueChangeHandler,onSelectionChange){if(outline===void 0){outline=!1}
if(cover===void 0){cover=!0}
var _this=this;this.valueChangeHandler=valueChangeHandler;this.onSelectionChange=onSelectionChange;this.parent=null;this.muted=!1;this.outlineActive=!1;this.resizeMode=ControlsSelection_1.ControlsResizeMode.ALL;this.buttons=[];this.covered=!1;this.locked=!1;this.compact=!1;this.lockedBtn=null;this.lockedBtn2=null;this.lockedUnlockFn=null;this.lockedOpts={timeout:0,tooltipShown:!1,isDown:!1,highlight:function(){if(_this.lockedOpts.tooltipShown||!_this.lockedBtn)
return;_this.lockedBtn.elem.tooltip('show');if(_this.lockedOpts.timeout)
clearTimeout(_this.lockedOpts.timeout);_this.lockedOpts.timeout=setTimeout(function(){if(!_this.lockedBtn)
return;_this.lockedBtn.elem.tooltip('hide');_this.lockedOpts.tooltipShown=!1},3000)},canceler:function(e){if(!wb_builder.getEditingLocked()){_this.lockedOpts.isDown=!0}
e.stopPropagation();e.preventDefault();return!1},unlocker:function(){if(!wb_builder.getEditingLocked()){if(typeof _this.lockedUnlockFn==='function'){_this.lockedUnlockFn()}}
return!1},upper:function(){_this.lockedOpts.isDown=!1},mover:function(){if(_this.lockedOpts.isDown&&!wb_builder.getEditingLocked()){_this.setSelected(!0);_this.setVisible(!0);_this.lockedOpts.highlight();_this.lockedOpts.tooltipShown=!0}},};this.debugLines=null;this.debugLinesVisible=!1;this.debugLinesHierarchyLevel=0;this.debugLinesAbsolute=!1;this.lastEventType='';this.lastEventTime=0;this.lastEventSkippedType='';this.lastEventSkippedTime=0;this.alignment={h:CommonTypes_4.FlexAlignItems.Center,v:CommonTypes_4.FlexAlignItems.Center,};this.padding=null;this.margin=null;this.parentMargin=null;this.inConstruction=!0;this.toolbarActions=[];this.layoutHandler=null;this.layoutPair=null;this.messages=[];this.interactDownFunc=null;this.interactUpFunc=null;this.interactMoveFunc=null;this.elem=(0,jquery_38.default)('<div>').addClass('wb_controls').css({zIndex:10});if(outline){this.outlineElem=(0,jquery_38.default)('<div>').addClass('wb_elem_outline').appendTo(this.elem)}
this.elem.append((this.cover=(0,jquery_38.default)('<div>').addClass('wb_cover')));this.covered=!cover;this.setCoverEnabled(cover);this.visible=!1;this.setVisible(!0);this.outlineVisible=!0;this.setOutlineVisible(!1);this.selected=!0;this.setSelected(!1);this.hover=!0;this.setHover(!1);this.resizeHandlesVisible=!0;this.setResizeHandlesVisible(!1);this.buttonsVisible=!0;this.setButtonsVisible(!1);this.cloneMode=ControlsSelection_1.CloneMode.ALL;this.setCloneMode(ControlsSelection_1.CloneMode.NONE);this.parentMarginsVisible=!0;this.setParentMarginsVisible(!1);this.bounds={left:0,top:0,width:0,height:0,left1:0,top1:0,left2:0,top2:0,pageLeft:0,pageTop:0,};this.elem.on('mousemove',function(){return _this.setHover(!0)});if(!isGlobalEvent){isGlobalEvent=!0;(0,jquery_38.default)(document).on('mousemove',function(e){var cls=''+(e.target&&e.target.className);if(lastControlsHover&&cls&&cls.indexOf("wb_controls")<0&&cls.indexOf("sel-padding-top")<0&&cls.indexOf("sel-padding-right")<0&&cls.indexOf("sel-padding-bottom")<0&&cls.indexOf("sel-padding-left")<0&&cls.indexOf("wb_cover")<0){lastControlsHover.setHover(!1)}})}
this.inConstruction=!1;this.minMax=new ControlsMinMax_1.ControlsMinMax(this.elem)}
Controls.prototype.unsetInteractHandler=function(){var parent=this.elem.parent();if(parent){if(this.interactDownFunc)
parent.off('mousedown touchstart',this.interactDownFunc);if(this.interactUpFunc)
parent.off('mouseup touchend click',this.interactUpFunc);if(this.interactMoveFunc)
parent.off('mousemove touchmove',this.interactMoveFunc);}
this.interactDownFunc=null;this.interactUpFunc=null;this.interactMoveFunc=null};Controls.prototype.setInteractHandler=function(handler,needOther){var _this=this;if(needOther===void 0){needOther=!1}
this.unsetInteractHandler();var startEvent=null;this.elem.parent().on('mousedown touchstart',this.interactDownFunc=function(e){if((0,jquery_38.default)(e.target).closest(".wb-cat-message").length){e.stopImmediatePropagation();return}
if(wb_builder.getEditingLocked()||isDoingResize()||(e.button!==0&&e.button!==undefined)){e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();return}
if(e.type=='mousedown'&&_this.lastEventType=='touchstart'&&(Date.now()-_this.lastEventTime)<100){return}else{_this.lastEventType=e.type;_this.lastEventTime=Date.now()}
startEvent=e;handler(e,!0)});this.elem.parent().on('mouseup touchend'+(needOther?' click':''),this.interactUpFunc=function(e){if((0,jquery_38.default)(e.target).closest(".wb-cat-message").length){e.stopImmediatePropagation();return}
if(wb_builder.getEditingLocked()||isDoingResize()||(e.button!==0&&e.button!==undefined)){_this.lastEventSkippedType=e.type;_this.lastEventSkippedTime=Date.now();return}
if(e.type=='click'&&(_this.lastEventSkippedType=='mouseup'||_this.lastEventSkippedType=='touchend')&&(Date.now()-_this.lastEventSkippedTime)<100){e.stopPropagation();return}
if(e.type=='mouseup'&&_this.lastEventType=='touchend'&&(Date.now()-_this.lastEventTime)<100){return}else{_this.lastEventType=e.type;_this.lastEventTime=Date.now()}
startEvent=null;handler(e,!1)});if(needOther){this.elem.parent().on('mousemove touchmove',this.interactMoveFunc=function(e){if(wb_builder.getEditingLocked()||isDoingResize())
return;if(e.type=='mousemove'&&_this.lastEventType=='touchmove'&&(Date.now()-_this.lastEventTime)<100){return}else{_this.lastEventType=e.type;_this.lastEventTime=Date.now()}
if(!startEvent)
return;if((0,EventUtil_3.moveEventDiff)(startEvent,e)<=4)
return;handler(e,!1)})}};Controls.prototype.setCloneHandler=function(handler){this.cloneHandler=handler;if(this.selection)
this.selection.setCloneHandler(handler);};Controls.prototype.setCloneMode=function(cloneMode){if(this.cloneMode==cloneMode)
return;this.cloneMode=cloneMode;if(this.selection)
this.selection.setCloneMode(cloneMode);};Controls.prototype.setAlignment=function(hAlign,vAlign){this.alignment.h=hAlign;this.alignment.v=vAlign;if(this.selection)
this.selection.setAlignment(this.alignment.h,this.alignment.v);};Controls.prototype.setCoverEnabled=function(enabled){if(this.covered==enabled)
return;this.covered=enabled;if(enabled){this.cover.show()}else{this.cover.hide()}};Controls.prototype.isDebugLinesVisible=function(){return this.debugLinesVisible};Controls.prototype.setDebugLinesVisible=function(visible){if(this.debugLinesVisible==visible)
return;this.debugLinesVisible=visible;if(visible){if(!this.debugLines){this.debugLines=(0,jquery_38.default)('<div>').addClass('wb-debug-lines wb-debug-lines-dashed');this.updateDebugLines(this.debugLinesHierarchyLevel,this.debugLinesAbsolute,!0);if(this.parent){this.parent.append(this.debugLines)}else{this.elem.append(this.debugLines)}}
this.debugLines.show();this.setHover(!0)}else if(this.debugLines){this.debugLines.hide()}};Controls.prototype.updateDebugLines=function(hierarchyLevel,absolute,force){if(absolute===void 0){absolute=!1}
if(force===void 0){force=!1}
if(this.debugLinesHierarchyLevel==hierarchyLevel&&this.debugLinesAbsolute==absolute&&!force)
return;this.debugLinesHierarchyLevel=hierarchyLevel;this.debugLinesAbsolute=absolute};Controls.prototype.setResizeMode=function(mode){if(this.resizeMode!=mode){this.resizeMode=mode;if(this.selection)
this.selection.setResizeMode(mode);}};Controls.prototype.setSupportPadding=function(fn){this.supportPadding=fn;if(this.selection)
this.selection.setSupportPadding(fn);};Controls.prototype.setSupportMargin=function(fn){this.supportMargin=fn;if(this.selection)
this.selection.setSupportMargin(fn);};Controls.prototype.setSpacingOverflow=function(fn){this.spacingOverflow=fn;if(this.selection)
this.selection.setSpacingOverflow(fn);};Controls.prototype.updatePadding=function(padding){this.padding=padding?__assign({},padding):null;if(this.selection)
this.selection.updatePadding(this.padding);};Controls.prototype.updateMargin=function(margin){this.margin=margin?__assign({},margin):null;if(this.selection)
this.selection.updateMargin(this.margin);};Controls.prototype.updateParentMargin=function(margin){this.parentMargin=margin?__assign({},margin):null;if(this.selection)
this.selection.updateParentMargin(this.parentMargin);};Controls.prototype.handleResize=function(start,axis){if(start===void 0){start=!1}
if(this.selection)
this.selection.handleResize(start,axis);};Controls.prototype.setResizeHandlesVisible=function(visible,force){if(force===void 0){force=!1}
if(visible&&(!this.resizeHandlesVisible||force)){this.resizeHandlesVisible=!0;if(this.selection)
this.selection.setResizeHandlesVisible(!0,force);}else if(!visible&&(this.resizeHandlesVisible||force)){this.resizeHandlesVisible=!1;if(this.selection)
this.selection.setResizeHandlesVisible(!1,force);}};Controls.prototype.addButton=function(button){var idx=this.buttons.indexOf(button);if(idx<0){this.buttons.push(button);if(this.parent){this.parent.append(button.elem)}else{this.elem.append(button.elem)}
button.setVisible(this.buttonsVisible)}
return this};Controls.prototype.isButtonsVisible=function(){return this.buttonsVisible};Controls.prototype.setButtonsVisible=function(visible){if(this.buttonsVisible==visible)
return;this.buttonsVisible=visible;for(var _i=0,_a=this.buttons;_i<_a.length;_i++){var btn=_a[_i];if(!btn.isActive())
continue;btn.setVisible(visible)}
if(this.selection)
this.selection.setButtonsVisible(visible);this.setButtonsCompact(this.compact)};Controls.prototype.isSelected=function(){return this.selected};Controls.prototype.setSelected=function(selected,isSecondarySelection){if(isSecondarySelection===void 0){isSecondarySelection=!1}
if(selected&&!this.selected){this.selected=!0;this.setPaddingsVisible(!isSecondarySelection);this.setMarginsVisible(!isSecondarySelection);if(!isSecondarySelection)
this.selectionAttach();if(!this.inConstruction&&this.onSelectionChange){this.onSelectionChange(this.selection||null)}
if(!this.hover)
this.elem.css('opacity',1);this.setResizeHandlesVisible(!isSecondarySelection);this.setButtonsVisible(!isSecondarySelection)}else if(!selected&&this.selected){this.selected=!1;this.selectionDetach();if(!this.inConstruction&&this.onSelectionChange){this.onSelectionChange(this.selection||null)}
if(!this.hover)
this.elem.css('opacity',0);this.setResizeHandlesVisible(!1);this.setButtonsVisible(!1)}};Controls.prototype.setPaddingsVisible=function(visible){if(visible&&!this.paddingsVisible){this.paddingsVisible=!0}else if(!visible&&this.paddingsVisible){this.paddingsVisible=!1}};Controls.prototype.setMarginsVisible=function(visible){if(visible&&!this.marginsVisible){this.marginsVisible=!0}else if(!visible&&this.marginsVisible){this.marginsVisible=!1}};Controls.prototype.setParentMarginsVisible=function(visible){if(visible&&!this.parentMarginsVisible){this.parentMarginsVisible=!0;this.selectionAttach();this.setOutlineVisible(!1);if(!this.hover)
this.elem.css('opacity',1);this.setResizeHandlesVisible(!1);this.setButtonsVisible(!1)}else if(!visible&&this.parentMarginsVisible){this.parentMarginsVisible=!1;this.selectionDetach();this.setOutlineVisible(!1);if(!this.hover)
this.elem.css('opacity',0);this.setResizeHandlesVisible(!1);this.setButtonsVisible(!1)}};Controls.prototype.isVisible=function(){return this.visible};Controls.prototype.setVisible=function(visible){if(visible&&!this.visible){this.visible=!0;this.elem.show()}else if(!visible&&this.visible){this.visible=!1;this.elem.hide()}
if(this.selection)
this.selection.setVisible(visible);};Controls.prototype.setHover=function(hover){var _a,_b;if(hover&&!this.hover){this.hover=!0;if(lastControlsHover&&lastControlsHover!==this){lastControlsHover.setHover(!1)}
lastControlsHover=this;this.setOutlineVisible(!0);this.setPaddingsVisible(!0);this.setMarginsVisible(!0);this.selectionAttach();if(!this.selected&&!this.parentMarginsVisible){this.elem.css('opacity',1)}
if(!this.selected){this.setResizeHandlesVisible(!1)}}else if(!hover&&this.hover){this.hover=!1;if(lastControlsHover===this){lastControlsHover=null}
this.setOutlineVisible(!1);this.setPaddingsVisible(!1);(_a=this.selection)===null||_a===void 0?void 0:_a.setPaddingVisible(this.paddingsVisible);this.setMarginsVisible(!1);(_b=this.selection)===null||_b===void 0?void 0:_b.setMarginVisible(this.marginsVisible);if(!this.selected&&!this.parentMarginsVisible&&this.selection){this.selectionDetach()}
if(!this.selected&&!this.parentMarginsVisible){this.elem.css('opacity',0)}
if(!this.selected){this.setResizeHandlesVisible(!1)}}};Controls.prototype.setMuted=function(muted){if(!this.cover||this.muted==muted)
return;this.muted=muted;if(muted){this.cover.css({backgroundColor:'#aaaaaa',opacity:0.7,});if(!this.covered)
this.cover.show();}else{if(!this.covered)
this.cover.hide();this.cover.css({backgroundColor:'',opacity:'',})}};Controls.prototype.ensureLockedBtn=function(){if(this.lockedBtn)
return;for(var _i=0,_a=this.buttons;_i<_a.length;_i++){var btn=_a[_i];if(btn.align==ControlsButton_1.ControlsButtonAlign.LEFT_TOP){if(btn.elem.hasClass('wb_move_btn')){this.lockedBtn=btn}}else if(btn.align==ControlsButton_1.ControlsButtonAlign.RIGHT_TOP){if(btn.elem.hasClass('wb_lang_label')){this.lockedBtn2=btn}}}};Controls.prototype.setLocked=function(lock,unlockFn){var _this=this;if(unlockFn===void 0){unlockFn=null}
if(!this.locked&&lock){this.locked=!0;this.lockedUnlockFn=(typeof unlockFn==='function')?unlockFn:function(){return _this.setLocked(!1)};this.ensureLockedBtn();if(this.lockedBtn){this.lockedBtn.setLocked(!0);this.lockedBtn.elem.on('mousedown',this.lockedOpts.canceler);this.lockedBtn.elem.on('click',this.lockedOpts.unlocker);if(this.lockedBtn2)
this.lockedBtn2.elem.on('mousedown',this.lockedOpts.canceler);}}else if(this.locked&&!lock){this.locked=!1;this.ensureLockedBtn();if(this.lockedBtn){this.lockedBtn.setLocked(!1);this.lockedBtn.elem.off({'mousedown':this.lockedOpts.canceler,'click':this.lockedOpts.unlocker});if(this.lockedBtn2)
this.lockedBtn2.elem.off({'mousedown':this.lockedOpts.canceler});if(this.cover)
this.cover.off({'mousedown':this.lockedOpts.canceler,'mouseup':this.lockedOpts.upper,'mousemove':this.lockedOpts.mover})}}};Controls.prototype.setOutlineVisible=function(visible){if(visible&&!this.outlineVisible){this.outlineVisible=!0;this.outlineElem.show()}else if(!visible&&this.outlineVisible){this.outlineVisible=!1;this.outlineElem.hide()}};Controls.prototype.setOutlineActive=function(active){if(!this.outlineElem)
return;if(!this.outlineActive&&active){this.setButtonsVisible(!1);this.setHover(!0);this.outlineElem.addClass('wb_elem_outline_active');this.outlineActive=!0}else if(this.outlineActive&&!active){this.setHover(!1);this.outlineElem.removeClass('wb_elem_outline_active');this.outlineActive=!1}};Controls.prototype.setButtonsCompact=function(compact){this.compact=compact;var bottom=!1;if(wb_builder.body){var editorOff=wb_builder.body.getBounds();var off=this.elem.offset();bottom=off.top<editorOff.top+24}
var offset={};for(var _i=0,_a=this.buttons;_i<_a.length;_i++){var btn=_a[_i];if(!btn.isActive())
continue;if(!btn.isVisible())
continue;if(!btn.isCurrentlyVisible())
continue;var align=compact?ControlsButton_1.ControlsButtonAlign.LEFT_TOP:btn.align;if(align in offset)
offset[align]++;else offset[align]=0;btn.updateAlign(compact,offset[align],bottom)}};Controls.prototype.layout=function(){this.setButtonsCompact(!1);return this};Controls.prototype.onDblClick=function(handler,allowPositions){if(allowPositions===void 0){allowPositions=['center']}
function detectClickPos(e){if((0,jquery_38.default)(e.target).is('.sel-margin-left'))
return'margin-l';if((0,jquery_38.default)(e.target).is('.sel-margin-top'))
return'margin-t';if((0,jquery_38.default)(e.target).is('.sel-margin-right'))
return'margin-r';if((0,jquery_38.default)(e.target).is('.sel-margin-bottom'))
return'margin-b';if((0,jquery_38.default)(e.target).is('.sel-padding-left'))
return'padding-l';if((0,jquery_38.default)(e.target).is('.sel-padding-top'))
return'padding-t';if((0,jquery_38.default)(e.target).is('.sel-padding-right'))
return'padding-r';if((0,jquery_38.default)(e.target).is('.sel-padding-bottom'))
return'padding-b';return'center'}
if(jquery_38.default.browser.chrome){var clickCount_1=0;var singleClickTimer_1=0;this.elem.bind('click',function(e){if((0,jquery_38.default)(e.target).closest(".wb-cat-message").length){e.stopImmediatePropagation();return}
if(wb_builder.getEditingLocked())
return;clickCount_1++;if(clickCount_1===1){singleClickTimer_1=setTimeout(function(){return clickCount_1=0},400)}else if(clickCount_1===2){clearTimeout(singleClickTimer_1);clickCount_1=0;var clickPosition=detectClickPos(e);if(allowPositions.indexOf(clickPosition)>=0){handler(e,clickPosition)}}})}else{this.elem.bind('dblclick',function(e){if((0,jquery_38.default)(e.target).closest(".wb-cat-message").length){e.stopImmediatePropagation();return}
if(wb_builder.getEditingLocked())
return;var clickPosition=detectClickPos(e);if(allowPositions.indexOf(clickPosition)>=0){handler(e,clickPosition)}})}};Controls.prototype.updateBoundsFromElements=function(elements,noUpdateCache){if(noUpdateCache===void 0){noUpdateCache=!1}
var minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=Number.MIN_VALUE,maxY=Number.MIN_VALUE,parent=null;var cc=0;for(var _i=0,elements_1=elements;_i<elements_1.length;_i++){var elem=elements_1[_i];if(elem.isHidden()||elem.isHidden(!0))
continue;if(!parent&&elem.parent)
parent=elem.parent;var offset=elem.getLocation(!0);var size=elem.getSizeInPixels();if(offset.left<minX)
minX=offset.left;if(offset.top<minY)
minY=offset.top;if(offset.left+size.width>maxX)
maxX=offset.left+size.width;if(offset.top+size.height>maxY)
maxY=offset.top+size.height;cc++}
if(cc===0){minX=minY=maxX=maxY=0}
var px=0,py=0;if(parent){var pb=parent.getBoundingClientRect();this.bounds.pageLeft=pb.left;this.bounds.pageTop=pb.top}else{this.bounds.pageLeft=0;this.bounds.pageTop=0}
this.bounds.left=this.bounds.left1=px+minX;this.bounds.top=this.bounds.top1=py+minY;this.bounds.width=maxX-minX;this.bounds.height=maxY-minY;this.bounds.left2=this.bounds.left+this.bounds.width;this.bounds.top2=this.bounds.top+this.bounds.height;this.bounds.pageLeft+=this.bounds.left;this.bounds.pageTop+=this.bounds.top;this.elem.css({left:this.bounds.left,top:this.bounds.top,width:this.bounds.width,height:this.bounds.height,})};Controls.prototype.getBounds=function(){return this.bounds};Controls.prototype.blink=function(){var _this=this;if(!this.outlineElem)
return;var wasHover=this.hover;if(!wasHover)
this.setHover(!0);this.outlineElem.addClass('wb_blink');setTimeout(function(){_this.outlineElem.removeClass('wb_blink');if(!wasHover)
_this.setHover(!1);},1000)};Controls.prototype.setToolbarActions=function(actions){this.toolbarActions=actions;if(this.selection)
this.selection.setToolbarActions(this.toolbarActions);};Controls.prototype.setAlignmentInfoHandler=function(layoutHandler){this.layoutHandler=layoutHandler;if(this.selection)
this.selection.setAlignmentInfoHandler(this.layoutHandler);};Controls.prototype.setAlignmentInfo=function(layoutPair){this.layoutPair=layoutPair;if(this.selection)
this.selection.setAlignmentInfo(this.layoutPair);};Controls.prototype.addMessage=function(id,html){var found=!1;for(var _i=0,_a=this.messages;_i<_a.length;_i++){var message=_a[_i];if(message.id===id){found=!0;message.html=html;break}}
if(!found)
this.messages.push({id:id,html:html});if(this.selection)
this.selection.setMessages(this.messages);};Controls.prototype.removeMessage=function(id){var found=!1;for(var i=this.messages.length-1;i>=0;i--){if(this.messages[i].id===id){found=!0;this.messages.splice(i,1);break}}
if(found&&this.selection)
this.selection.setMessages(this.messages);};Controls.prototype.selectionAttach=function(){if(!this.parent)
return;if(!this.selection){this.selection=(0,ControlsSelection_1.acquire)().attach(this.elem,this.parent)}
this.selection.setValueChangeHandler(this.valueChangeHandler).setSupportPadding(this.supportPadding).setSupportMargin(this.supportMargin).setSpacingOverflow(this.spacingOverflow).setCloneHandler(this.cloneHandler).setCloneMode(this.cloneMode).setToolbarActions(this.toolbarActions).setAlignmentInfoHandler(this.layoutHandler).setAlignmentInfo(this.layoutPair).setMessages(this.messages).setButtonsVisible(this.buttonsVisible).setAlignment(this.alignment.h,this.alignment.v).updatePadding(this.padding).updateMargin(this.margin).updateParentMargin(this.parentMargin).setParentMarginsVisible(this.parentMarginsVisible).setResizeMode(this.resizeMode).setResizeHandlesVisible(this.resizeHandlesVisible).setSelected(this.selected).setPaddingVisible(this.paddingsVisible).setMarginVisible(this.marginsVisible)};Controls.prototype.selectionDetach=function(){if(!this.selection)
return;(0,ControlsSelection_1.release)(this.selection.detach());this.selection=undefined};Controls.prototype.attach=function(parent){if(this.parent)
this.detach();this.parent=parent;if(parent){parent.append(this.elem);for(var _i=0,_a=this.buttons;_i<_a.length;_i++){var btn=_a[_i];parent.append(btn.elem)}
if(this.debugLines)
parent.append(this.debugLines);}};Controls.prototype.detach=function(){if(!this.parent)
return;for(var _i=0,_a=this.buttons;_i<_a.length;_i++){var btn=_a[_i];this.elem.append(btn.elem)}
if(this.debugLines)
this.elem.append(this.debugLines);this.selectionDetach();this.elem.detach()};Controls.prototype.dispose=function(){this.unsetInteractHandler();if(this.parent)
this.detach();this.elem.remove()};return Controls}());exports.Controls=Controls});define("js/util/HistoryUtil",["require","exports","js/ElementRegister","js/CommonTypes","js/jquery-builder","js/Service","ModeManager","js/ui/FlexLayoutControl"],function(require,exports,ElementRegister_1,CommonTypes_5,jquery_builder_3,Service_6,ModeManager_1,FlexLayoutControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.createSiteLanguagesSnapshotHistoryRecord=exports.createLockingChangeHistoryRecord=exports.createVisibilityChangeHistoryRecord=exports.createMoveElementsHistoryRecord=exports.changeFlexLayoutHistoryRecord=exports.changeLayoutTypeHistoryRecord=exports.wrapElementToLayoutHistoryRecord=exports.wrapElementHistoryRecord=exports.createAddElementsHistoryRecord=exports.createRemoveElementsHistoryRecord=void 0;function restoreElements(historyData){var _a;for(var _i=0,historyData_1=historyData;_i<historyData_1.length;_i++){var data=historyData_1[_i];var parent_3=data.parent?window.getElementById(data.parent):wb_builder.bodyInstance;if(!parent_3){console.error("Unable to redo '"+this.type+"': can't find parent element "+data.parent);continue}
var element=(_a=data.restoreData)===null||_a===void 0?void 0:_a.restore();if(!element){console.error("Unable to redo '"+this.type+"': can't restore element "+data.element+" from serialized data");continue}
if(data.excluded){wb_builder.removeFromExcluded(element.id);element.excluded=!1}
parent_3.addChild(element,!1,!1,parent_3.getChildAt(data.index),!1);element.onResize(!0);element.updateStyle(!0);parent_3.updateStyle();delete data.parent;delete data.index;delete data.excluded;delete data.restoreData}}
function removeElements(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var element=window.getElementById(data.element);if(!element){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var parent_4=element.getParent();data.parent=parent_4===null||parent_4===void 0?void 0:parent_4.id;data.index=(parent_4||wb_builder.bodyInstance).getChildIndex(element);data.restoreData=new ElementRegister_1.ElementRestorationData(element);element.remove(jquery_builder_3.default.extend(!0,{},data.removalOptions,{noHistory:!0}));data.excluded=element.excluded}}
function undoWrapElements(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapElement=window.getElementById(data.element);if(!wrapElement){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var parent_5=wrapElement.getParent();data.parent=parent_5.id;data.index=parent_5.getChildIndex(wrapElement);data.moveElements=[];var children=wrapElement.getChildren();for(var idx=0;idx<children.length;idx++){parent_5.addChild(children[idx],!1,!1,wrapElement);data.moveElements.push(children[idx].id)}
data.restoreData=new ElementRegister_1.ElementRestorationData(wrapElement);wrapElement.remove({noHistory:!0})}}
function redoWrapElements(historyData){var _a;for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapElement=(_a=data.restoreData)===null||_a===void 0?void 0:_a.restore();if(!wrapElement){console.error("Unable to redo '"+this.type+"': can't restore element "+data.element+" from serialized data");continue}
if(!data.parent||data.index===undefined){console.error("Unable to redo '"+this.type+"': not find parent id");continue}
var parent_6=window.getElementById(data.parent);if(!parent_6){console.error("Unable to undo '"+this.type+"': can't find element "+data.parent);continue}
parent_6.addChild(wrapElement,!1,!1,parent_6.getChildAt(data.index));if(data.moveElements){for(var idx=0;idx<data.moveElements.length;idx++){var moveElement=window.getElementById(data.moveElements[idx]);if(!moveElement){console.error("Unable to undo '"+this.type+"': can't find element "+data.moveElements[idx]);continue}
wrapElement.addChild(moveElement)}}}}
function undoWrapElementToLayout(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapElement=window.getElementById(data.element);if(!wrapElement){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var parent_7=wrapElement.getParent();data.parent=parent_7.id;data.index=parent_7.getChildIndex(wrapElement);data.moveElements=[];var children=wrapElement.getChildren();for(var idx=0;idx<children.length;idx++){parent_7.addChild(children[idx],!1,!1,wrapElement);data.moveElements.push(children[idx].id)}
data.restoreData=new ElementRegister_1.ElementRestorationData(wrapElement);wrapElement.remove({noHistory:!0})}}
function redoWrapElementToLayout(historyData){var _a;for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapElement=(_a=data.restoreData)===null||_a===void 0?void 0:_a.restore();if(!wrapElement){console.error("Unable to redo '"+this.type+"': can't restore element "+data.element+" from serialized data");continue}
if(!data.parent||data.index===undefined){console.error("Unable to redo '"+this.type+"': not find parent id");continue}
var parent_8=window.getElementById(data.parent);if(!parent_8){console.error("Unable to undo '"+this.type+"': can't find element "+data.parent);continue}
parent_8.addChild(wrapElement,!1,!1,parent_8.getChildAt(data.index));if(data.moveElements){for(var idx=0;idx<data.moveElements.length;idx++){var moveElement=window.getElementById(data.moveElements[idx]);if(!moveElement){console.error("Unable to undo '"+this.type+"': can't find element "+data.moveElements[idx]);continue}
wrapElement.addChild(moveElement)}}}}
function undoChangeLayoutType(historyData){var _a;for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapper=window.getElementById(data.element);if(!wrapper){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var parent_9=(_a=data.restoreData)===null||_a===void 0?void 0:_a.restore();if(!parent_9){console.error("Unable to redo '"+this.type+"': can't restore element "+data.element+" from serialized data");continue}
if([CommonTypes_5.ContentBlockId.Header,CommonTypes_5.ContentBlockId.Main,CommonTypes_5.ContentBlockId.Footer].indexOf(parent_9.rootBlockType)<0){wrapper.getParent().addChild(parent_9,!1,!1,wrapper,!1);parent_9.addChild(wrapper,!1,!1)}}}
function redoChangeLayoutType(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var wrapper=window.getElementById(data.element);if(!wrapper){console.error("Unable to redo '"+this.type+"': can't find element "+data.element);continue}
var parent_10=wrapper.getParent();if(!parent_10){console.error("Unable to redo '"+this.type+"': can't find element");continue}
if([CommonTypes_5.ContentBlockId.Header,CommonTypes_5.ContentBlockId.Main,CommonTypes_5.ContentBlockId.Footer].indexOf(parent_10.rootBlockType)<0){parent_10.getParent().addChild(wrapper,!1,!1,parent_10,!1);parent_10.remove({noHistory:!0})}
data.restoreData=new ElementRegister_1.ElementRestorationData(parent_10)}}
function undoChangeFlexLayout(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var element=window.getElementById(data.element);if(!element||element.getClassType()!='LayoutElement'){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
if(!data.layout||!(data.layout instanceof FlexLayoutControl_1.FlexLayoutControlValue)){console.error("Unable to redo '"+this.type+"': invalid flex layout value");continue}
var currentLayout=element.getLayout();element.setLayout(data.layout,!0);data.layout=currentLayout}}
function redoChangeFlexLayout(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var element=window.getElementById(data.element);if(!element||element.getClassType()!='LayoutElement'){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
if(!data.layout||!(data.layout instanceof FlexLayoutControl_1.FlexLayoutControlValue)){console.error("Unable to redo '"+this.type+"': invalid flex layout value");continue}
var currentLayout=element.getLayout();element.setLayout(data.layout,!0);data.layout=currentLayout}}
function restoreVisibility(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var element=window.getElementById(data.element);if(!element){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var hidden={};for(var _i=0,_a=ModeManager_1.default.getModes();_i<_a.length;_i++){var mode=_a[_i];hidden[mode]=element.getHiddenInMode(mode);element.setHiddenInMode(mode,data.hidden[mode])}
data.hidden=hidden;element.updateVisibility()}
wb_builder.invalidateSiteStructure()}
function restoreLocking(historyData){for(var i=historyData.length-1;i>=0;i--){var data=historyData[i];var element=window.getElementById(data.element);if(!element){console.error("Unable to undo '"+this.type+"': can't find element "+data.element);continue}
var locked=element.isLocked;element.setLocked(data.locked);data.locked=locked}
wb_builder.invalidateSiteStructure()}
function moveElements(historyData,action){this.data=historyData.reverse();for(var _i=0,_a=this.data;_i<_a.length;_i++){var data=_a[_i];var element=window.getElementById(data.element);var parent_11=window.getElementById(data.parent);if(!element||!parent_11){console.error("Unable to "+action+" '"+this.type+"': related elements not found.");continue}
var setData=jquery_builder_3.default.extend({},data);var currentParent=element.getParent();data.parent=currentParent.id;data.index=currentParent.getChildIndex(element);data.location=element.getLocation();data.size=element.getSize();data.minWidth=element.minWidth;data.maxWidth=element.maxWidth;data.minHeight=element.minHeight;data.maxHeight=element.maxHeight;data.useMinWidth=element.useMinWidth;data.useMaxWidth=element.useMaxWidth;data.useMinHeight=element.useMinHeight;data.useMaxHeight=element.useMaxHeight;data.flexGrow=element.flexGrow;data.flexShrink=element.flexShrink;element.minWidth=setData.minWidth;element.maxWidth=setData.maxWidth;element.minHeight=setData.minHeight;element.maxHeight=setData.maxHeight;element.useMinWidth=setData.useMinWidth;element.useMaxWidth=setData.useMaxWidth;element.useMinHeight=setData.useMinHeight;element.useMaxHeight=setData.useMaxHeight;element.flexGrow=setData.flexGrow;element.flexShrink=setData.flexShrink;element.updateSizeLimits();if(setData.parent!==data.parent||setData.index!==data.index){currentParent.removeChild(element);parent_11.addChild(element,!1,!1,parent_11.getChildAt(setData.index)||undefined,!1)}
element.setLocation(setData.location.left,setData.location.top);element.setSize(setData.size.width,setData.size.height);element.onResize();element.updateStyle();parent_11.updateStyle()}
Service_6.Service.group.updateGroupBounds()}
function createRemoveElementsHistoryRecord(elements,options){var historyData=[];for(var _i=0,elements_2=elements;_i<elements_2.length;_i++){var element=elements_2[_i];var parent_12=element.getParent();historyData.push({element:element.id,parent:parent_12===null||parent_12===void 0?void 0:parent_12.id,index:(parent_12||wb_builder.bodyInstance).getChildIndex(element),excluded:element.excluded,restoreData:new ElementRegister_1.ElementRestorationData(element),removalOptions:jquery_builder_3.default.extend(!0,{},options,{requiredConfirmations:null}),})}
wb_builder.historyAdd('removeElements',historyData.reverse(),restoreElements,removeElements)}
exports.createRemoveElementsHistoryRecord=createRemoveElementsHistoryRecord;function createAddElementsHistoryRecord(elements){if(!elements.length)
return;var historyData=[];for(var _i=0,elements_3=elements;_i<elements_3.length;_i++){var element=elements_3[_i];historyData.push({element:element.id,removalOptions:{deletePages:!0},})}
wb_builder.historyAdd('addElements',historyData,removeElements,restoreElements)}
exports.createAddElementsHistoryRecord=createAddElementsHistoryRecord;function wrapElementHistoryRecord(wrapElement){var historyData=[];historyData.push({element:wrapElement.id});wb_builder.historyAdd('wrapElement',historyData,undoWrapElements,redoWrapElements)}
exports.wrapElementHistoryRecord=wrapElementHistoryRecord;function wrapElementToLayoutHistoryRecord(wrapElement){var historyData=[];historyData.push({element:wrapElement.id});wb_builder.historyAdd('wrapElementToLayout',historyData,undoWrapElementToLayout,redoWrapElementToLayout)}
exports.wrapElementToLayoutHistoryRecord=wrapElementToLayoutHistoryRecord;function changeLayoutTypeHistoryRecord(wrapper,parent){var historyData=[];historyData.push({element:wrapper.id,restoreData:new ElementRegister_1.ElementRestorationData(parent),});wb_builder.historyAdd('changeLayoutType',historyData,undoChangeLayoutType,redoChangeLayoutType)}
exports.changeLayoutTypeHistoryRecord=changeLayoutTypeHistoryRecord;function changeFlexLayoutHistoryRecord(element){var historyData=[];historyData.push({element:element.id,layout:element.getLayout(),});wb_builder.historyAdd('changeFlexLayout',historyData,undoChangeFlexLayout,redoChangeFlexLayout)}
exports.changeFlexLayoutHistoryRecord=changeFlexLayoutHistoryRecord;function createMoveElementsHistoryRecord(elements,forceParent,forceIndex){if(!elements.length)
return;var historyData=[];for(var _i=0,elements_4=elements;_i<elements_4.length;_i++){var element=elements_4[_i];var currentParent=(typeof forceParent==="object")?forceParent:element.getParent();if(!currentParent||!element.id){console.error("Can't create 'moveElements' history record for newly created elements.");continue}
var currentIndex=(typeof forceIndex==="number")?forceIndex:currentParent.getChildIndex(element);historyData.push({element:element.id,parent:currentParent.id,index:currentIndex,location:element.getLocation(),size:element.getSize(),minWidth:element.minWidth,maxWidth:element.maxWidth,minHeight:element.minHeight,maxHeight:element.maxHeight,useMinWidth:element.useMinWidth,useMaxWidth:element.useMaxWidth,useMinHeight:element.useMinHeight,useMaxHeight:element.useMaxHeight,flexGrow:element.flexGrow,flexShrink:element.flexShrink,})}
wb_builder.historyAdd('moveElements',historyData,moveElements,moveElements)}
exports.createMoveElementsHistoryRecord=createMoveElementsHistoryRecord;function createVisibilityChangeHistoryRecord(elements){var historyData=[];for(var _i=0,elements_5=elements;_i<elements_5.length;_i++){var element=elements_5[_i];element.switchMode(ModeManager_1.default.getMode(),ModeManager_1.default.getMode(),!1,!1);var hidden={};for(var _a=0,_b=ModeManager_1.default.getModes();_a<_b.length;_a++){var mode=_b[_a];hidden[mode]=element.getHiddenInMode(mode)}
historyData.push({element:element.id,hidden:hidden})}
wb_builder.historyAdd('elementVisibility',historyData.reverse(),restoreVisibility,restoreVisibility)}
exports.createVisibilityChangeHistoryRecord=createVisibilityChangeHistoryRecord;function createLockingChangeHistoryRecord(elements){var historyData=[];for(var _i=0,elements_6=elements;_i<elements_6.length;_i++){var element=elements_6[_i];historyData.push({element:element.id,locked:element.isLocked})}
wb_builder.historyAdd('elementLocking',historyData.reverse(),restoreLocking,restoreLocking)}
exports.createLockingChangeHistoryRecord=createLockingChangeHistoryRecord;function restoreSiteLanguages(historyData){var languages=jquery_builder_3.default.extend(!0,[],wb_builder.site.languages);wb_builder.site.languages.splice(0,wb_builder.site.languages.length);for(var _i=0,_a=historyData.languages;_i<_a.length;_i++){var lang=_a[_i];wb_builder.site.languages.push(lang)}
historyData.languages=languages;var lastDefLang=wb_builder.site.getLastDefLang();wb_builder.site.setLastDefLang(historyData.lastDefLang);historyData.lastDefLang=lastDefLang;var currSelLang=historyData.currSelLang;historyData.currSelLang=wb_builder.site.currSelLang;if(currSelLang!==wb_builder.site.currSelLang)
wb_builder.site.switchLanguage(wb_builder.site.currSelLang);wb_builder.site.onUpdateLanguages()}
function createSiteLanguagesSnapshotHistoryRecord(){var historyData={lastDefLang:wb_builder.site.getLastDefLang(),currSelLang:wb_builder.site.currSelLang,languages:jquery_builder_3.default.extend(!0,[],wb_builder.site.languages)};wb_builder.historyAdd('siteLanguagesSnapshot',historyData,restoreSiteLanguages,restoreSiteLanguages)}
exports.createSiteLanguagesSnapshotHistoryRecord=createSiteLanguagesSnapshotHistoryRecord});define("js/ui/BackgroundElementSelector",["require","exports","js/UIComponent","js/Element","jquery"],function(require,exports,UIComponent_22,Element_1,jquery_39){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BackgroundElementSelector=void 0;var BackgroundElementSelector=(function(_super){__extends(BackgroundElementSelector,_super);function BackgroundElementSelector(){var _this=_super.call(this)||this;_this.bgElement=null;_this._elem.addClass('wb-bg-element-controll');_this.cont=(0,jquery_39.default)('<div>').addClass('wb-bg-element-control').appendTo(_this._elem);_this.label=(0,jquery_39.default)('<div>').addClass('thumbnail wb-bg-element-cont').appendTo(_this.cont).on('click',function(){return _this.onProp()});_this.labelIcon=(0,jquery_39.default)('<span>').addClass('fa fa-picture-o').appendTo(_this.label);_this.labelText=(0,jquery_39.default)('<div>').addClass('').appendTo(_this.label);var btnGroup=(0,jquery_39.default)('<span>').addClass('btn-group-vertical btn-group-sm wb-bg-element-ctrl').appendTo(_this.cont);_this.probBtn=(0,jquery_39.default)('<button>').addClass('btn btn-default').attr({type:'button',title:__('Background Properties')}).append('<span class="fa fa-pencil">').appendTo(btnGroup).on('click',function(){return _this.onProp()});_this.detachBtn=(0,jquery_39.default)('<button>').addClass('btn btn-default').attr({type:'button',title:__('Extract Background')}).append('<span class="fa fa-chain-broken">').appendTo(btnGroup).on('click',function(){return _this.onDetach()});return _this}
BackgroundElementSelector.prototype.buildInit=function(data,fields){};BackgroundElementSelector.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);if(this._enabled==enabled)
return;this.updateState()};BackgroundElementSelector.prototype.updateState=function(){if(this._enabled){if(this.bgElement){this.probBtn.removeClass('disabled');this.detachBtn.removeClass('disabled')}else{this.probBtn.addClass('disabled');this.detachBtn.addClass('disabled')}}else{this.probBtn.addClass('disabled');this.detachBtn.addClass('disabled')}
this.labelText.text(this.bgElement?this.bgElement.getClassType():'');this.labelIcon.removeClass('fa-picture-o fa-th-large').addClass(this.bgElement&&this.bgElement.getClassType()==='Gallery'?'fa-th-large':'fa-picture-o')};BackgroundElementSelector.prototype.onProp=function(){if(!this._enabled||!this.bgElement)
return;Element_1.Element.unselectAll();this.bgElement.setSelected(!0,!0)};BackgroundElementSelector.prototype.onDetach=function(){if(!this._enabled)
return;var bgElem=this.bgElement;var parent=bgElem?bgElem.getParent():null;this.bgElement=null;this.updateState();if(this.bindings.length&&parent){parent.extractBackground()}};BackgroundElementSelector.prototype.setValue=function(bgElement){this.bgElement=bgElement;if(this._enabled)
this.updateState();};BackgroundElementSelector.prototype.getValue=function(){return this.bgElement};BackgroundElementSelector.supportsMultipleObjectBindings=function(){return!1};BackgroundElementSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return BackgroundElementSelector}(UIComponent_22.UIComponent));exports.BackgroundElementSelector=BackgroundElementSelector});define("js/element/Properties",["require","exports","js/util/ComparisonUtil","jquery","js/core/BuilderConfig"],function(require,exports,ComparisonUtil_2,jquery_40,BuilderConfig_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BaseObject=exports.PropertyUIBinding=exports.Property=void 0;var Property=exports.Property=(function(){function Property(options){this.listeners=new WeakMap();jquery_40.default.extend(this,options)}
Property.prototype.get=function(owner){if(!this.getter)
throw new Error("Property ".concat(this.name," has no getter"));return this.getter.call(owner)};Property.prototype.set=function(owner,value,isUserAction,disableComparator,component){var _a;if(isUserAction===void 0){isUserAction=!1}
if(disableComparator===void 0){disableComparator=!1}
if(!this.setter)
throw new Error("Property ".concat(this.name," has no setter"));isUserAction=isUserAction||Property.userInteractionLevel>0;if(!disableComparator){var comparator=((_a=this.type)===null||_a===void 0?void 0:_a.defaultValueComparator)||this.comparator;if(typeof comparator==="function"){if(comparator.call(owner,value,this.get(owner),component))
return}else if(comparator!==!1){if(ComparisonUtil_2.ComparisonUtil.checkEqualsRecursive(value,this.get(owner)))
return}}
this.triggerBeforeChange(owner,isUserAction);this.setter.call(owner,value);this.triggerChange(owner,isUserAction)};Property.prototype.serialize=function(owner){var value=this.get(owner);if(this.serializer)
return this.serializer.call(owner,value);if(this.type&&this.type.serializer)
return this.type.serializer.call(owner,value);if(value!==null&&typeof value==="object")
value=jquery_40.default.extend(!0,Array.isArray(value)?[]:{},value);return value};Property.prototype.deserialize=function(owner,data,isUserAction,disableComparator){if(isUserAction===void 0){isUserAction=!1}
if(disableComparator===void 0){disableComparator=!1}
var value=data;isUserAction=isUserAction||Property.userInteractionLevel>0;if(this.deserializer)
value=this.deserializer.call(owner,value);else if(this.type&&this.type.deserializer)
value=this.type.deserializer.call(owner,value);else if(value!==null&&typeof value==="object")
value=jquery_40.default.extend(!0,Array.isArray(value)?[]:{},value);this.set(owner,value,isUserAction,disableComparator)};Property.prototype.triggerBeforeChange=function(owner,isUserAction){if(isUserAction===void 0){isUserAction=!1}
isUserAction=isUserAction||Property.userInteractionLevel>0;if(this.onBeforeChange)
this.onBeforeChange.call(owner,this,owner,isUserAction);if(typeof owner.onBeforePropertyChange==="function")
owner.onBeforePropertyChange(this,isUserAction);};Property.prototype.triggerChange=function(owner,isUserAction){if(isUserAction===void 0){isUserAction=!1}
isUserAction=isUserAction||Property.userInteractionLevel>0;if(this.onChange)
this.onChange.call(owner,this,owner,isUserAction);var listeners=this.listeners.get(owner);if(listeners)
for(var _i=0,listeners_2=listeners;_i<listeners_2.length;_i++){var listener=listeners_2[_i];listener.call(owner,this,owner,isUserAction)}
if(typeof owner.onPropertyChanged==="function")
owner.onPropertyChanged(this,isUserAction);};Property.prototype.addListener=function(owner,callback){if(!this.listeners.has(owner))
this.listeners.set(owner,[]);var listeners=this.listeners.get(owner);listeners.push(callback)};Property.prototype.removeListener=function(owner,listener){var listeners=this.listeners.get(owner);if(!listeners)
return;var idx=listeners.indexOf(listener);if(idx>=0)
listeners.splice(idx,1);};Property.prototype.getUIComponentOptions=function(owner){var _a;var options=this.uiComponentOptions;var defaults=((_a=this.type)===null||_a===void 0?void 0:_a.defaultComponentOptions)||{};if(!options)
return defaults;return jquery_40.default.extend({},defaults,typeof options==="function"?options.call(owner,owner):options)};Property.beginUserInteraction=function(){Property.userInteractionLevel++};Property.endUserInteraction=function(){if(--Property.userInteractionLevel<0){Property.userInteractionLevel=0;console.error("Inconsistent amount of beginUserInteraction() and endUserInteraction() method calls.")}};Property.userInteractionLevel=0;return Property}());var PropertyUIBinding=(function(){function PropertyUIBinding(owner,property,component,listener){this.owner=owner;this.property=property;this.component=component;this.boundListener=listener.bind(this.component);this.property.addListener(this.owner,this.boundListener)}
PropertyUIBinding.prototype.destroy=function(){this.property.removeListener(this.owner,this.boundListener)};PropertyUIBinding.prototype.getValue=function(){return this.property.get(this.owner)};PropertyUIBinding.prototype.setValue=function(value,isUserAction,disableComparator){if(isUserAction===void 0){isUserAction=!1}
if(disableComparator===void 0){disableComparator=!1}
this.property.set(this.owner,value,isUserAction,disableComparator,this.component)};PropertyUIBinding.prototype.getUIComponentOptions=function(){return this.property.getUIComponentOptions(this.owner)};return PropertyUIBinding}());exports.PropertyUIBinding=PropertyUIBinding;var BaseObject=exports.BaseObject=(function(){function BaseObject(){this._invalid=!1;this.registerPropertiesInternal()}
BaseObject.prototype.invalidate=function(){var _this=this;if(!this._invalid){this._invalid=!0;requestAnimationFrame(function(){_this._invalid=!1;_this.revalidate()})}
return this};BaseObject.prototype.revalidate=function(){this._invalid=!1;return this};BaseObject.prototype.registerPropertiesInternal=function(){if(BaseObject._properties.has(Object.getPrototypeOf(this)))
return;this.registerProperties()};BaseObject.prototype.registerProperties=function(){};BaseObject.prototype.registerProperty=function(options){var _a,_b;var proto=Object.getPrototypeOf(this);var properties;var propertiesDependants;if(!BaseObject._properties.has(proto)){BaseObject._properties.set(proto,{});BaseObject._properties_dependants.set(proto,{})}
properties=BaseObject._properties.get(proto);propertiesDependants=BaseObject._properties_dependants.get(proto);if(properties.hasOwnProperty(options.name)){console.error("Same property is getting registered more than once!",options,proto);return}
if((_a=options.type)===null||_a===void 0?void 0:_a.isButton){properties[options.name]=new Property(options);return}
var className=this.className||((_b=proto.constructor)===null||_b===void 0?void 0:_b.name);if(options.prop){options.getter=options.prop.get;options.setter=options.prop.set;delete options.prop;properties[options.name]=new Property(options);return}
var desc;var scanProto=proto;do{desc=Object.getOwnPropertyDescriptor(scanProto,options.name);if(desc)
break;scanProto=Object.getPrototypeOf(scanProto)}while(scanProto);if(!desc||(desc.writable&&!desc.get&&!desc.set)){var fieldName_1;fieldName_1="__dprop_"+options.name;if(!desc){if(BuilderConfig_2.wbConfig.devDebugMode||BuilderConfig_2.wbConfig.devTestMode)
console.info("Creating a dynamic property ".concat(options.name," in ").concat(className," class that will read/write field ").concat(fieldName_1));proto[fieldName_1]=void 0}else{if(BuilderConfig_2.wbConfig.devDebugMode||BuilderConfig_2.wbConfig.devTestMode)
console.info("Replacing field ".concat(options.name," in ").concat(className," class with property that will read/write field ").concat(fieldName_1));proto[fieldName_1]=proto[options.name]}
desc={get:function(){return this[fieldName_1]},set:function(value){this[fieldName_1]=value},configurable:!0,enumerable:!0}}else{}
if(!desc.get||!desc.set){console.warn("Property \"".concat(options.name,"\" of ").concat(className," class must have both getter and setter"));return}
if(!options.getter)
options.getter=desc.get;if(!options.setter)
options.setter=desc.set;var property=new Property(options);properties[options.name]=property;if(options.dependencies){for(var _i=0,_c=options.dependencies;_i<_c.length;_i++){var dependency=_c[_i];if(dependency===options.name)
continue;if(!propertiesDependants.hasOwnProperty(dependency))
propertiesDependants[dependency]=[];propertiesDependants[dependency].push(property)}}
desc.set=function(value){property.set(this,value)};Object.defineProperty(proto,options.name,desc)};BaseObject.prototype.getProperties=function(){this.registerPropertiesInternal();return BaseObject._properties.get(Object.getPrototypeOf(this))};BaseObject.prototype.getProperty=function(name){var properties=this.getProperties();return properties.hasOwnProperty(name)?properties[name]:null};BaseObject.prototype.getDependingProperties=function(property){var proto=Object.getPrototypeOf(this);if(!BaseObject._properties_dependants.has(proto))
return[];var dependantsMap=BaseObject._properties_dependants.get(proto);return dependantsMap.hasOwnProperty(property.name)?dependantsMap[property.name]:[]};BaseObject.prototype.onBeforePropertyChange=function(property,isUserAction){};BaseObject.prototype.onPropertyChanged=function(property,isUserAction){};BaseObject._properties=new Map();BaseObject._properties_dependants=new Map();return BaseObject}())});define("js/SpacingSelector",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_23,jquery_41){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SpacingSelector=void 0;var SpacingSelector=(function(_super){__extends(SpacingSelector,_super);function SpacingSelector(){var _this=_super.call(this)||this;_this.editElem=null;_this.editMinValue=0;_this.editMaxValue=9999;_this.editValue=0;_this.editMode=!1;_this.editPos='';_this.useMargin=!0;_this.usePadding=!0;_this.allowNegativeMargin=!1;_this.root=_this._elem.find(".wb-spacing-control-root");_this.margin=_this.root.children(".padding");_this.padding=_this.root.children(".padding").children(".itm");_this.marginLabel=_this.root.children('.lbl');_this.paddingLabel=_this.root.find('.padding > .lbl');_this.marginValues=_this.margin.children('.l,.r,.t,.b');_this.paddingValues=_this.padding.children('.l,.r,.t,.b');_this.marginButtons=_this.margin.children('a.la,a.ra,a.ta,a.ba');_this.paddingButtons=_this.padding.children('a.la,a.ra,a.ta,a.ba');_this.sameValuesChbx=_this._elem.children('.wb-spacing-same-values-chbx');_this.sameValuesChbx.on('change',function(e){_this.setSameValues(e.target.checked,!0);_this.onValueChanged();e.preventDefault();return!1});_this.editPasteBtn=(0,jquery_41.default)('<div>').addClass('wb-spacing-control-paste-btn').append((0,jquery_41.default)('<div class="arrow">')).append((0,jquery_41.default)('<i class="fa fa-paste">')).on('click',function(e){if(_this.editType==='padding'){if(_this.editPos==='t')
_this.value.paddingBottom=_this.value.paddingTop;if(_this.editPos==='b')
_this.value.paddingTop=_this.value.paddingBottom;if(_this.editPos==='l')
_this.value.paddingRight=_this.value.paddingLeft;if(_this.editPos==='r')
_this.value.paddingLeft=_this.value.paddingRight}
if(_this.editType==='margin'){if(_this.editPos==='t')
_this.value.marginBottom=_this.value.marginTop;if(_this.editPos==='b')
_this.value.marginTop=_this.value.marginBottom;if(_this.editPos==='l')
_this.value.marginRight=_this.value.marginLeft;if(_this.editPos==='r')
_this.value.marginLeft=_this.value.marginRight}
_this.renderValue();_this.onValueChanged();if(typeof _this.onChange==='function'){_this.onChange()}
_this.editPasteBtn.detach()});_this.editInput=(0,jquery_41.default)('<input>').attr({type:'text'}).addClass("wb-spacing-control-edit").on('blur',function(){return _this.exitEditMode(!0)}).on('keyup',function(e){if(e.keyCode==13||e.keyCode==10){_this.exitEditMode(!0)}else if(e.keyCode==27){_this.exitEditMode(!1)}else if(e.keyCode==38){_this.editInput.val(_this.parseInt(_this.editInput.val())+1)}else if(e.keyCode==40){_this.editInput.val(_this.parseInt(_this.editInput.val())-1)}
var filteredValue=_this.editInput.val().replace(/[^\d\-]/,'');if(_this.parseInt(filteredValue)!=0){filteredValue=Math.min(Math.max(_this.parseInt(filteredValue),_this.editMinValue),_this.editMaxValue)}
_this.editInput.val(filteredValue);_this._setValue(_this.parseInt(_this.editInput.val()));_this.renderValue();_this.valueAfterSaveValue=null;_this.onValueChanged();if(typeof _this.onChange==='function'){_this.onChange()}});_this.margin.children("a.la").bind("click",function(){setTimeout(function(){return _this.enterEditMode("margin","l")},0);return!1});_this.margin.children("a.ra").bind("click",function(){setTimeout(function(){return _this.enterEditMode("margin","r")},0);return!1});_this.margin.children("a.ta").bind("click",function(){setTimeout(function(){return _this.enterEditMode("margin","t")},0);return!1});_this.margin.children("a.ba").bind("click",function(){setTimeout(function(){return _this.enterEditMode("margin","b")},0);return!1});_this.padding.children("a.la").bind("click",function(){setTimeout(function(){return _this.enterEditMode("padding","l")},0);return!1});_this.padding.children("a.ra").bind("click",function(){setTimeout(function(){return _this.enterEditMode("padding","r")},0);return!1});_this.padding.children("a.ta").bind("click",function(){setTimeout(function(){return _this.enterEditMode("padding","t")},0);return!1});_this.padding.children("a.ba").bind("click",function(){setTimeout(function(){return _this.enterEditMode("padding","b")},0);return!1});return _this}
SpacingSelector.prototype.buildInit=function(data,fields){if(data.value)
this.setValue(data.value);this.setUseMargin(data.noMargin?!1:!0);this.setUsePadding(data.noPadding?!1:!0);this.setAllowNegativeMargin(!!data.allowNegativeMargin)};SpacingSelector.prototype.setAllowNegativeMargin=function(allow){this.allowNegativeMargin=allow};SpacingSelector.prototype._createElem=function(){return(0,jquery_41.default)('<div class="wb-spacing-control">'+'<div class="checkbox wb-checkbox-ctrl wb-spacing-same-values-chbx" for="wb-spacing-same-values">'+'<label>'+'<input type="checkbox" id="wb-spacing-same-values">'+'<span>'+__("Use same values")+'</span>'+'</label>'+'</div>'+'<div class="wb-spacing-control-root">'+'<span class="lbl">'+__("margin")+'</span>'+'<div class="padding">'+'<span class="lbl">'+__("padding")+'</span>'+'<span class="l">0</span>'+'<span class="r">0</span>'+'<span class="t">0</span>'+'<span class="b">0</span>'+'<a href="javascript:void(0)" class="la"></a>'+'<a href="javascript:void(0)" class="ra"></a>'+'<a href="javascript:void(0)" class="ta"></a>'+'<a href="javascript:void(0)" class="ba"></a>'+'<div class="itm">'+'<span class="l">0</span>'+'<span class="r">0</span>'+'<span class="t">0</span>'+'<span class="b">0</span>'+'<a href="javascript:void(0)" class="la"></a>'+'<a href="javascript:void(0)" class="ra"></a>'+'<a href="javascript:void(0)" class="ta"></a>'+'<a href="javascript:void(0)" class="ba"></a>'+'</div>'+'</div>'+'</div>'+'</div>')};SpacingSelector.prototype.getSameValues=function(){return!!this.value.sameValues};SpacingSelector.prototype.setSameValues=function(value,fromInput){if(fromInput===void 0){fromInput=!1}
this.value.sameValues=value;if(value){this._elem.addClass('same-values');this.sameValuesChbx.find('input').prop('checked',!0);this.editPasteBtn.detach();if(fromInput){this.valueAfterSaveValue=__assign({},this.value);this.valueAfterSaveValue.sameValues=!1;this.editType='margin';this._setValue(this.value.marginTop);this.editType='padding';this._setValue(this.value.paddingTop)}}else{this._elem.removeClass('same-values');this.sameValuesChbx.find('input').prop('checked',!1);if(fromInput&&this.valueAfterSaveValue){this.value=__assign({},this.valueAfterSaveValue)}}
this.renderValue()};SpacingSelector.prototype.setUseMargin=function(use){if(this.useMargin==use)
return;this.useMargin=use;if(use){this.marginLabel.show();this.marginValues.show();this.marginButtons.show()}else{this.marginLabel.hide();this.marginValues.hide();this.marginButtons.hide()}};SpacingSelector.prototype.setUsePadding=function(use){if(this.usePadding==use)
return;this.usePadding=use;if(use){this.paddingLabel.show();this.paddingValues.show();this.paddingButtons.show()}else{this.paddingLabel.hide();this.paddingValues.hide();this.paddingButtons.hide()}};SpacingSelector.prototype.enterEditMode=function(type,pos){var _this=this;this.exitEditMode(!0);if(this.editPasteBtnTimer){clearTimeout(this.editPasteBtnTimer)}
var convert={t:'Top',b:'Bottom',l:'Left',r:'Right'};this.editFullPosition=(type+convert[pos]);this.editPos=pos;this.editType=type;if(type==='padding'){this.editElem=this.padding.children("."+pos)}else if(type==='margin'){this.editElem=this.margin.children("."+pos)}else{return}
this.editMinValue=(type==='margin'&&this.allowNegativeMargin)?-9999:0;this.editValue=this.parseInt(this.editElem.html());this.oldValue=__assign({},this.value);this.editElem.css({display:'none'});this.editInput.val(this.editValue);this.editInput.addClass(this.editPos+'a');this.editElem.parent().append(this.editInput);if(!this.getSameValues()){this.editPasteBtn.removeClass(['t','b','l','r'].map(function(pos){return(['padding','margin'].map(function(type){return pos+'p '+type+'-paste'}).join(' '))}).join(' '));this.editPasteBtn.addClass(this.editPos+'p '+this.editType+'-paste');this.editElem.parent().append(this.editPasteBtn)}
setTimeout(function(){_this.editInput.focus();_this.editInput.select()},40);this.editInput.focus();this.editInput.select();this.editMode=!0};SpacingSelector.prototype.exitEditMode=function(apply){var _this=this;if(apply===void 0){apply=!1}
if(!this.editMode)
return;this.editMode=!1;this.editInput.detach();if(this.editPos){this.editInput.removeClass(this.editPos+'a')}
if(apply){var newValue=this.parseInt(this.editInput.val());this._setValue(newValue);this.editPasteBtnTimer=setTimeout(function(){_this.editPasteBtnTimer=null;_this.editPasteBtn.detach()},(!this.getSameValues()&&this.oldValue[this.editFullPosition]!==newValue)?3000:100)}else{this.value=__assign({},this.oldValue);this.editInput.val(this.value[this.editFullPosition]);this.editPasteBtn.detach()}
this.renderValue();if(this.editElem){this.editElem.css({display:''})}
this.onValueChanged();if(typeof this.onChange==='function'){this.onChange()}};SpacingSelector.prototype.parseInt=function(val){var n=parseInt(''+val,10);return isNaN(n)?0:n};SpacingSelector.createValue=function(fromValue){var value={sameValues:(fromValue&&fromValue.sameValues)?fromValue.sameValues:!1,marginTop:(fromValue&&fromValue.marginTop)?fromValue.marginTop:0,marginRight:(fromValue&&fromValue.marginRight)?fromValue.marginRight:0,marginBottom:(fromValue&&fromValue.marginBottom)?fromValue.marginBottom:0,marginLeft:(fromValue&&fromValue.marginLeft)?fromValue.marginLeft:0,paddingTop:(fromValue&&fromValue.paddingTop)?fromValue.paddingTop:0,paddingRight:(fromValue&&fromValue.paddingRight)?fromValue.paddingRight:0,paddingBottom:(fromValue&&fromValue.paddingBottom)?fromValue.paddingBottom:0,paddingLeft:(fromValue&&fromValue.paddingLeft)?fromValue.paddingLeft:0};value.css={margin:(value.marginTop+"px "+value.marginRight+"px "+value.marginBottom+"px "+value.marginLeft+"px"),padding:(value.paddingTop+"px "+value.paddingRight+"px "+value.paddingBottom+"px "+value.paddingLeft+"px")};return value};SpacingSelector.prototype.getValue=function(){return SpacingSelector.createValue(__assign({},this.value))};SpacingSelector.prototype.setValue=function(value){this.value=__assign({},(value?value:{}));this.setSameValues('sameValues' in this.value&&!!this.value.sameValues);this.renderValue()};SpacingSelector.prototype.renderValue=function(){if(this.value.sameValues){this.margin.children('.l,.r,.b,.t').text(''+this.value.marginTop);this.padding.children('.l,.r,.b,.t').text(''+this.value.paddingTop)}else{this.margin.children(".l").html(''+this.parseInt(('marginLeft' in this.value)?this.value.marginLeft:0));this.margin.children(".r").html(''+this.parseInt(('marginRight' in this.value)?this.value.marginRight:0));this.margin.children(".t").html(''+this.parseInt(('marginTop' in this.value)?this.value.marginTop:0));this.margin.children(".b").html(''+this.parseInt(('marginBottom' in this.value)?this.value.marginBottom:0));this.padding.children(".l").html(''+this.parseInt(('paddingLeft' in this.value)?this.value.paddingLeft:0));this.padding.children(".r").html(''+this.parseInt(('paddingRight' in this.value)?this.value.paddingRight:0));this.padding.children(".t").html(''+this.parseInt(('paddingTop' in this.value)?this.value.paddingTop:0));this.padding.children(".b").html(''+this.parseInt(('paddingBottom' in this.value)?this.value.paddingBottom:0))}};SpacingSelector.supportsMultipleObjectBindings=function(){return!0};SpacingSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("useMargin" in options)
this.setUseMargin(!!options.useMargin);if("usePadding" in options)
this.setUsePadding(!!options.usePadding);if("allowNegativeMargin" in options)
this.setAllowNegativeMargin(!!options.allowNegativeMargin);};SpacingSelector.prototype.setOnChange=function(callback){this.onChange=callback;return this};SpacingSelector.prototype._setValue=function(value){value=Math.min(Math.max(value,this.editMinValue),this.editMaxValue);this.editValue=value;if(this.value.sameValues){if(this.usePadding&&this.editType==='padding'){this.value.paddingTop=value;this.value.paddingBottom=value;this.value.paddingLeft=value;this.value.paddingRight=value}
if(this.useMargin&&this.editType==='margin'){this.value.marginTop=value;this.value.marginBottom=value;this.value.marginLeft=value;this.value.marginRight=value}}else{this.value[this.editFullPosition]=value}};return SpacingSelector}(UIComponent_23.UIComponent));exports.SpacingSelector=SpacingSelector});define("js/ui/CommonalitySelectorControl",["require","exports","js/UIComponent","js/Service","js/VerticalLayout","js/jquery-builder","js/ToolTipControl","js/util/TextUtil"],function(require,exports,UIComponent_24,Service_7,VerticalLayout_7,jquery_builder_4,ToolTipControl_3,TextUtil_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CommonalitySelectorControl=void 0;var CommonalitySelectorControl=(function(_super){__extends(CommonalitySelectorControl,_super);function CommonalitySelectorControl(){var _this=_super.call(this)||this;_this.isInherited=!1;_this.noCommon=!1;_this.lockedLanguageValues={};var chkFunc=function(){if(_this.fields.isSpecCommon.getValue()){_this.fields.isCommonValues.setVisible(!0);_this.fields.isNotCommonValues.setVisible(!1)}else if(_this.fields.isNotCommon.getValue()){_this.fields.isCommonValues.setVisible(!1);if(_this.fields.isNotCommonValues.getElem().is('.multilang')){_this.fields.isNotCommonValues.setVisible(!0)}}else{_this.fields.isCommonValues.setVisible(!1);_this.fields.isNotCommonValues.setVisible(!1)}
_this.onValueChanged()};Service_7.Service.UIBuilder.buildLayout({type:VerticalLayout_7.VerticalLayout,children:[{type:'CustomContainer',id:'inheritanceNoticeSingleLang',styleClass:'',visible:!1,content:'<small>'+__('This element inherits visibility on other pages from one of its parents.')+'</small>'},{type:'CustomContainer',id:'inheritanceNoticeMultiLang',styleClass:'',visible:!1,content:__('Show in specific languages')},{type:'RadioBox',id:'isNotCommon',label:__('Show in current page only'),group:'isCommon'+_this._instanceIndex,change:chkFunc},{type:'CustomContainer',id:'isNotCommonValues',styleClass:'well wb-comproperty-show',visible:!1},{type:'RadioBox',id:'isCommon',label:__('Show in all pages'),group:'isCommon'+_this._instanceIndex,css:{marginTop:10},change:chkFunc},{type:'RadioBox',id:'isSpecCommon',label:__('Show in a specific pages'),group:'isCommon'+_this._instanceIndex,css:{marginTop:10},change:chkFunc},{type:'CustomContainer',id:'isCommonValues',styleClass:'well wb-comproperty-show',visible:!1}]},_this._elem,_this.fields={});_this.fields.isNotCommonValues.getElem().on("change",function(e){return _this.onCheckBoxChange(e)});_this.fields.isCommonValues.getElem().on("change",function(e){return _this.onCheckBoxChange(e)});_this.fields.inheritanceNoticeMultiLang.getElem().append((new ToolTipControl_3.ToolTipControl("warn",__('This element inherits visibility on other pages from one of its parents.'))).elem);return _this}
CommonalitySelectorControl.prototype.buildInit=function(data,fields){};CommonalitySelectorControl.prototype.onCheckBoxChange=function(e){var cb=e.target;if(!cb.checked){var hasChecked=!1;var tr=(0,jquery_builder_4.default)(e.target).closest("tr[data-pid]");if(tr.length){hasChecked=(''+tr.data("pid")!==''+wb_builder.pageId)||tr.find('input[type=checkbox]:checked').length>0}else{hasChecked=(0,jquery_builder_4.default)(e.currentTarget).find('input[type=checkbox]:checked').length>0}
if(!hasChecked)
cb.checked=!0}
this.onValueChanged()};CommonalitySelectorControl.prototype.onInterfaceChanged=function(){};CommonalitySelectorControl.isElementVisible=function(isCommon,includePages,langCode,pageId){var defLang=wb_builder.site.getLastDefLang();langCode=langCode?langCode:wb_builder.site.currSelLang;langCode=langCode?langCode:defLang;pageId=pageId?pageId:wb_builder.pageId;var includePagesLen=Object.keys(includePages).length;if(langCode){if(isCommon&&includePagesLen){var inpage=includePages[''+pageId];if(typeof inpage==='object'){if(inpage[langCode])
return!0;if(!(langCode in inpage)&&defLang&&inpage[defLang])
return!0}else if(includePages[''+pageId]){return!0}}else if(isCommon){return!0}else{if(includePagesLen){if(includePages[langCode])
return!0;if(!(langCode in includePages)&&defLang&&includePages[defLang])
return!0}else{if(pageId==wb_builder.pageId)
return!0}}}else{if(isCommon&&includePagesLen){if(includePages[''+pageId])
return!0}else if(isCommon){return!0}else{if(pageId==wb_builder.pageId)
return!0}}
return!1};CommonalitySelectorControl.prototype.setValue=function(value){var isCommon=value.isCommon;var includePages=value.includePages;var has=(Object.keys(includePages).length>0);if(has&&isCommon&&!this.noCommon){this.fields.isNotCommon.setValue(!1);this.fields.isCommon.setValue(!1);this.fields.isSpecCommon.setValue(!0);this.fields.isCommonValues.setVisible(!0);this.fields.isNotCommonValues.setVisible(!1)}else if(isCommon&&!this.noCommon){this.fields.isNotCommon.setValue(!1);this.fields.isCommon.setValue(!0);this.fields.isSpecCommon.setValue(!1);this.fields.isCommonValues.setVisible(!1);this.fields.isNotCommonValues.setVisible(!1)}else{this.fields.isNotCommon.setValue(!0);this.fields.isCommon.setValue(!1);this.fields.isSpecCommon.setValue(!1);this.fields.isCommonValues.setVisible(!1);this.fields.isNotCommonValues.setVisible((wb_builder.site.languages.length>0))}
this.fields.isNotCommon.setVisible(!this.isInherited);this.fields.isCommon.setVisible(!this.isInherited);this.fields.isSpecCommon.setVisible(!this.isInherited);this.fields.inheritanceNoticeSingleLang.setVisible(this.isInherited&&wb_builder.site.languages.length===0);this.fields.inheritanceNoticeMultiLang.setVisible(this.isInherited&&wb_builder.site.languages.length>0);this.fields.isNotCommonValues.getElem().empty();this.fields.isCommonValues.getElem().empty();this.fields.isCommon.setEnabled(!this.noCommon);this.fields.isSpecCommon.setEnabled(!this.noCommon);var i,lang,langs=wb_builder.site.languages,pid,p,td,tr,name;var itemNames={};for(var pid_1 in wb_builder.site.pages){if(!wb_builder.site.pages.hasOwnProperty(pid_1)||wb_builder.site.pages[pid_1].isServicePage())
continue;itemNames[pid_1]=__tr(wb_builder.site.pages[pid_1].name,wb_builder.site.getLastDefLang())}
if(langs.length){var table=(0,jquery_builder_4.default)('<table></table>');this.fields.isNotCommonValues.getElem().addClass('multilang').append(table);p=wb_builder.site.getPage(wb_builder.pageId);tr=(0,jquery_builder_4.default)('<tr/>');if(!this.isInherited)
tr.append((0,jquery_builder_4.default)('<td class="page-name"/>'));for(i=0;(lang=langs[i]);i++){td=(0,jquery_builder_4.default)('<td>'+lang.code+'</td>');tr.append(td)}
table.append(tr);name=(p&&(p.id in itemNames))?itemNames[p.id]:null;if(!name){name=p?__tr(p.title,null,__tr(p.title,wb_builder.site.getLastDefLang(),('['+__('no name')+']'))):('['+__('no name')+']')}
tr=(0,jquery_builder_4.default)('<tr/>');if(!this.isInherited)
tr.append((0,jquery_builder_4.default)('<td class="page-name"><a href="javascript:void(0)">'+(0,TextUtil_3.escapeHtml)(name)+'</a></td>'));for(i=0;(lang=langs[i]);i++){td=(0,jquery_builder_4.default)('<td>'+'<input type="checkbox" name="isNotCommonPage" />'+'</td>');var inp=td.children('input');inp.val(lang.code);if(this.lockedLanguageValues.hasOwnProperty(lang.code)){inp.get(0).checked=this.lockedLanguageValues[lang.code];inp.addClass("disabled");inp.attr("disabled","disabled");inp.attr("readonly","readonly");inp.attr("title",__('One of parent layout elements is hidden in this language'))}else if(CommonalitySelectorControl.isElementVisible(isCommon,includePages,lang.code)){inp.get(0).checked=!0}
tr.append(td)}
table.append(tr);var table2=(0,jquery_builder_4.default)('<table></table>');this.fields.isCommonValues.getElem().append(table2);tr=(0,jquery_builder_4.default)('<tr><td class="page-name"></td></tr>');for(i=0;(lang=langs[i]);i++){td=(0,jquery_builder_4.default)('<td><a href="javascript:void(0)">'+lang.code+'</a></td>');tr.append(td)}
table2.append(tr);for(pid in wb_builder.site.pages){p=wb_builder.site.pages[pid];if(p.popupMode||wb_builder.site.pages[pid].isServicePage())
continue;name=(pid in itemNames)?itemNames[pid]:null;if(!name)
name=__tr(p.title,null,__tr(p.title,wb_builder.site.getLastDefLang(),('['+__('no name')+']')));tr=(0,jquery_builder_4.default)('<tr data-pid="'+p.id+'"><td class="page-name"><a href="javascript:void(0)">'+(0,TextUtil_3.escapeHtml)(name)+'</a></td></tr>');for(i=0;(lang=langs[i]);i++){td=(0,jquery_builder_4.default)('<td>'+'<input type="checkbox" name="isNotCommonPage" />'+'</td>');var inp=td.children('input');inp.val(p.id+'_'+lang.code);if(p.id===wb_builder.pageId&&this.lockedLanguageValues.hasOwnProperty(lang.code)){inp.get(0).checked=this.lockedLanguageValues[lang.code];inp.addClass("disabled");inp.attr("disabled","disabled");inp.attr("readonly","readonly");inp.attr("title",__('One of parent layout elements is hidden in this language'))}else if(CommonalitySelectorControl.isElementVisible(isCommon,includePages,lang.code,p.id)){inp.get(0).checked=!0}
tr.append(td)}
table2.append(tr)}
var thisClass_2=this;var checkboxClick=function(tbl){tbl.find('tr:first').find('a').bind('click',function(){var thisA=(0,jquery_builder_4.default)(this);var checkboxes=tbl.find('input[value$="_'+thisA.html()+'"]');var checkedLen=tbl.find('input[value$="_'+thisA.html()+'"]:checked').length;if(checkboxes.length>checkedLen){checkboxes.each(function(){if((0,jquery_builder_4.default)(this).is(".disabled"))
return;this.checked=!0})}else{checkboxes.each(function(){var tr=(0,jquery_builder_4.default)(this).closest("tr[data-pid]");if(tr.length&&(''+tr.data("pid")===''+wb_builder.pageId)&&tr.find("input[type=checkbox]:checked").length<=1)
return;this.checked=!1})}
thisClass_2.onValueChanged()});tbl.find('tr td:first-child a').bind('click',function(){var thisA=(0,jquery_builder_4.default)(this);var tr=thisA.parent().parent();var checkboxes=(0,jquery_builder_4.default)(tr.find('input').get().reverse());var checkedLen=tr.find('input:checked').length;if(checkboxes.length>checkedLen){checkboxes.each(function(){if((0,jquery_builder_4.default)(this).is(".disabled"))
return;this.checked=!0})}else{checkboxes.each(function(){var tr=(0,jquery_builder_4.default)(this).closest("tr[data-pid]");if(tr.length&&(''+tr.data("pid")===''+wb_builder.pageId)&&tr.find("input[type=checkbox]:checked").length<=1)
return;this.checked=!1})}
thisClass_2.onValueChanged()})};checkboxClick(table);checkboxClick(table2)}else{this.fields.isNotCommonValues.getElem().removeClass('multilang');for(pid in wb_builder.site.pages){p=wb_builder.site.pages[pid];if(p.popupMode||wb_builder.site.pages[pid].isServicePage())
continue;name=(pid in itemNames)?itemNames[pid]:null;if(!name)
name=__tr(p.title,null,__tr(p.title,wb_builder.site.getLastDefLang(),('['+__('no name')+']')));var li=(0,jquery_builder_4.default)('<div class="checkbox"><label></label></div>');li.children('label').append((0,jquery_builder_4.default)('<input>').attr('type',"checkbox").attr('name',"isCommonPage").attr('data-pid',p.id)).append((0,jquery_builder_4.default)('<span>').text(name));li.find("input").val(p.id);if(CommonalitySelectorControl.isElementVisible(isCommon,includePages,null,p.id)){li.find("input").get(0).checked=!0}
this.fields.isCommonValues.getElem().append(li)}}};CommonalitySelectorControl.prototype.getValue=function(){var isCommon=(this.fields.isCommon.getValue()||this.fields.isSpecCommon.getValue());var includePages={};var multilang=(wb_builder.site.languages.length>0);if(multilang){if(this.fields.isNotCommon.getValue()){jquery_builder_4.default.each(wb_builder.site.languages,function(){includePages[this.code]=!1});(0,jquery_builder_4.default)('input:checked',this.fields.isNotCommonValues.getElem()).each(function(){includePages[(0,jquery_builder_4.default)(this).val()]=!0})}else if(this.fields.isSpecCommon.getValue()){var checked=(0,jquery_builder_4.default)('input:checked',this.fields.isCommonValues.getElem());var defLangs_1={};jquery_builder_4.default.each(wb_builder.site.languages,function(){defLangs_1[this.code]=!1});checked.each(function(){var val=(0,jquery_builder_4.default)(this).val().split('_');var pid=val[0],lang=val[1];if(pid&&lang){var inpage=includePages[''+pid];if(typeof inpage!=='object'){includePages[''+pid]=inpage=jquery_builder_4.default.extend({},defLangs_1)}
inpage[lang]=!0}})}}else{if(this.fields.isSpecCommon.getValue()){(0,jquery_builder_4.default)('input:checked',this.fields.isCommonValues.getElem()).each(function(){includePages[''+(0,jquery_builder_4.default)(this).val()]=!0})}}
return{isCommon:isCommon,includePages:includePages}};CommonalitySelectorControl.supportsMultipleObjectBindings=function(){return!0};CommonalitySelectorControl.prototype.setComponentOptions=function(options){if("lockedLanguageValues" in options&&options.lockedLanguageValues&&typeof options.lockedLanguageValues==="object")
this.lockedLanguageValues=options.lockedLanguageValues;if("isInherited" in options&&typeof options.isInherited==="boolean")
this.isInherited=options.isInherited;if("noCommon" in options&&typeof options.noCommon==="boolean")
this.noCommon=options.noCommon;_super.prototype.setComponentOptions.call(this,options)};return CommonalitySelectorControl}(UIComponent_24.UIComponent));exports.CommonalitySelectorControl=CommonalitySelectorControl});define("js/ui/RadioBoxGroupControl",["require","exports","js/UIComponent","jquery","js/ToolTipControl"],function(require,exports,UIComponent_25,jquery_42,ToolTipControl_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.RadioBoxGroupControl=exports.RadioBoxGroupDirection=void 0;var RadioBoxGroupDirection;(function(RadioBoxGroupDirection){RadioBoxGroupDirection.Column="column";RadioBoxGroupDirection.Row="row"})(RadioBoxGroupDirection||(exports.RadioBoxGroupDirection=RadioBoxGroupDirection={}));var RadioBoxGroupControl=exports.RadioBoxGroupControl=(function(_super){__extends(RadioBoxGroupControl,_super);function RadioBoxGroupControl(){var _this=_super.call(this)||this;_this.options=[];_this.direction=RadioBoxGroupDirection.Column;_this.itemClass=null;_this.inputContainer=(0,jquery_42.default)('<div class="wb-radio-box-group" />');_this.setDirection(_this.direction);_this.inputContainer.on("change",function(){_this.onValueChanged()});_this.getElem().append(_this.inputContainer);return _this}
RadioBoxGroupControl.prototype.buildInit=function(data,fields){if(data.options)
this.setOptions(data.options);if(data.direction)
this.setDirection(data.direction);if("value" in data)
this.setValue(data.value);};RadioBoxGroupControl.prototype.setOptions=function(options){if(this.options.length==options.length){var same=!0;for(var i=this.options.length-1;i>=0;i--){if(this.options[i].value!==options[i].value||this.options[i].label!==options[i].label||this.options[i].disabled!==options[i].disabled){same=!1;break}}
if(same)
return}
this.options=options;var value=this.getValue();this.inputContainer.empty();var groupId="wb_rbgc_"+(RadioBoxGroupControl.nextGroupIndex++);for(var _i=0,options_1=options;_i<options_1.length;_i++){var option=options_1[_i];var div=(0,jquery_42.default)('<div class="radio" />');if(this.itemClass)
div.addClass(this.itemClass);var label=(0,jquery_42.default)('<label/>');var input=(0,jquery_42.default)('<input type="radio" />').attr("name",groupId).data("option",option).attr("value",(typeof option.value==="object")?JSON.stringify(option.value):option.value);var textContent=option.label;if(typeof textContent==="object")
textContent=(typeof textContent.clone==="function")?textContent.clone():(0,jquery_42.default)(textContent);var text=(0,jquery_42.default)('<span>').append(textContent);if(option.disabled||!this._enabled){div.addClass("disabled");input.prop("disabled",!0)}
if(option.title)
div.attr("title",option.title);var iconElem=(0,jquery_42.default)('');if(option.icon&&option.icon!==null){iconElem=(0,jquery_42.default)('<i/>').attr("class","wb-checkbox-icon "+option.icon).css({marginRight:'4px'});input.css({marginTop:'3px'})}
label.append(input,iconElem,text);if(option.helpText&&option.helpText!==""){var placement=option.helpTextPlacement||"top";var text_1=option.helpText;var icon='?';if(option.helpText.substring(0,5)=='warn:'){text_1=option.helpText.substring(5);icon='warn'}else if(option.helpText.substring(0,6)=='error:'){text_1=option.helpText.substring(6);icon='error'}
if(window.hasOwnProperty("wb_builder")&&wb_builder.rtl){if(placement==='left')
placement='right';else if(placement==='right')
placement='left'}
var helpElem=new ToolTipControl_4.ToolTipControl(icon,text_1,placement);label.append(helpElem.elem);helpElem.setLabel(icon);helpElem.setTitle(text_1,!0);helpElem.setPlacement(placement)}
div.append(label);this.inputContainer.append(div);if(typeof option.init==="function")
option.init.call(div,input,text);}
this.setValue(value)};RadioBoxGroupControl.prototype.setEnabled=function(enabled){if(this._enabled===enabled)
return;_super.prototype.setEnabled.call(this,enabled);(0,jquery_42.default)("input",this.inputContainer).each(function(){var input=(0,jquery_42.default)(this);var div=input.closest(".radio");var option=input.data("option");if(enabled&&!option.disabled){div.removeClass("disabled");input.prop("disabled",!1)}else{div.addClass("disabled");input.prop("disabled",!0)}})};RadioBoxGroupControl.prototype.setDirection=function(direction){this.direction=direction;this.inputContainer.removeClass("wb-radio-box-group-row wb-radio-box-group-column").addClass("wb-radio-box-group-"+this.direction)};RadioBoxGroupControl.prototype.setItemClass=function(itemClass){if(this.itemClass===itemClass)
return;var items=this.inputContainer.children();if(this.itemClass)
items.removeClass(this.itemClass);this.itemClass=itemClass;if(this.itemClass)
items.addClass(this.itemClass);};RadioBoxGroupControl.prototype.setValue=function(value){this.inputContainer.find("input").each(function(){var $this=(0,jquery_42.default)(this);$this.prop("checked",$this.data("option").value===value)})};RadioBoxGroupControl.prototype.getValue=function(){var _a;return(_a=(0,jquery_42.default)("input:checked",this.inputContainer).data("option"))===null||_a===void 0?void 0:_a.value};RadioBoxGroupControl.supportsMultipleObjectBindings=function(){return!1};RadioBoxGroupControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("options" in options)
this.setOptions(options.options);if("direction" in options)
this.setDirection(options.direction);if("itemClass" in options)
this.setItemClass(options.itemClass);};RadioBoxGroupControl.nextGroupIndex=0;return RadioBoxGroupControl}(UIComponent_25.UIComponent))});define("js/HAlignSelector",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_26,jquery_43){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HAlignSelector=exports.convertCssTextAlignByCurLocale=void 0;function convertCssTextAlignByCurLocale(css){css=__assign({},css);if(wb_builder.site.currSelLang?wb_builder.site.isRtlLang(wb_builder.site.currSelLang):wb_builder.site.rtl){if(css['text-align']==='left')
css['text-align']='right';else if(css['text-align']==='right')
css['text-align']='left'}
return css}
exports.convertCssTextAlignByCurLocale=convertCssTextAlignByCurLocale;var svgIcons={left:"<svg width=\"16\" height=\"14\" viewBox=\"0 0 16 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect width=\"9\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"4\" width=\"15\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"8\" width=\"12\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"12\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t</svg>",center:"<svg width=\"16\" height=\"14\" viewBox=\"0 0 16 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect x=\"4\" width=\"9\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect x=\"1\" y=\"4\" width=\"15\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect x=\"2\" y=\"8\" width=\"12\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"12\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t</svg>",right:"<svg width=\"16\" height=\"14\" viewBox=\"0 0 16 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect x=\"7\" width=\"9\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect x=\"1\" y=\"4\" width=\"15\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect x=\"4\" y=\"8\" width=\"12\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"12\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t</svg>",justify:"<svg width=\"16\" height=\"14\" viewBox=\"0 0 16 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"4\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"8\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t\t<rect y=\"12\" width=\"16\" height=\"2\" fill=\"#212529\"/>\n\t\t</svg>",};function createButton(icon){return(0,jquery_43.default)('<button>').addClass("btn btn-default").append(icon)}
var HAlignSelector=(function(_super){__extends(HAlignSelector,_super);function HAlignSelector(justify,center){if(justify===void 0){justify=!1}
if(center===void 0){center=!0}
var _this=_super.call(this)||this;_this.align='';_this.justifyEnabled=!0;_this.centerEnabled=!0;_this.buttons={};_this._elem.addClass('wb-halign-control');_this.buttonsContainer=(0,jquery_43.default)('<div class="btn-group" />');_this._elem.append(_this.buttonsContainer);var alignments=['left','center','right','justify'];var _loop_8=function(alignment){this_5.buttons[alignment]=createButton(svgIcons[alignment]).on('click',function(){_this.handleChange(alignment);_this._elem.trigger("change");_this.onValueChanged()}).appendTo(this_5.buttonsContainer)};var this_5=this;for(var _i=0,alignments_1=alignments;_i<alignments_1.length;_i++){var alignment=alignments_1[_i];_loop_8(alignment)}
_this.setJustifyEnabled(justify);_this.setValue('left');return _this}
HAlignSelector.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if('justify' in data)
this.setJustifyEnabled(data.justify?!0:!1);if('center' in data)
this.setCenterEnabled(data.center?!0:!1);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.on('change',function(){func.call(el,fields)})})(this,data.change)}};HAlignSelector.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1;for(var alignment in this.buttons){if(this._enabled){this.buttons[alignment].removeAttr('disabled')}else{this.buttons[alignment].attr('disabled','disabled')}}};HAlignSelector.prototype.handleChange=function(align){if(!(align in this.buttons)||(align==='justify'&&!this.justifyEnabled)||(align==='center'&&!this.centerEnabled))
return;for(var alignment in this.buttons){if(alignment==align){this.buttons[alignment].addClass('active')}else{this.buttons[alignment].removeClass('active')}}
this.align=align};HAlignSelector.prototype.setJustifyEnabled=function(enabled){if(this.justifyEnabled==enabled)
return;this.justifyEnabled=enabled;if(enabled){this.buttons.justify.appendTo(this.buttonsContainer)}else{this.buttons.justify.detach()}};HAlignSelector.prototype.setCenterEnabled=function(enabled){if(this.centerEnabled==enabled)
return;this.centerEnabled=enabled;if(enabled){this.buttons.center.appendTo(this.buttonsContainer)}else{this.buttons.center.detach()}};HAlignSelector.prototype.getValue=function(){if(wb_builder.site.currSelLang?wb_builder.site.isRtlLang(wb_builder.site.currSelLang):wb_builder.site.rtl){if(this.align==='left')
return'right';else if(this.align==='right')
return'left'}
return this.align};HAlignSelector.prototype.setValue=function(align){if(wb_builder.site.currSelLang?wb_builder.site.isRtlLang(wb_builder.site.currSelLang):wb_builder.site.rtl){if(align==='left')
align='right';else if(align==='right')
align='left'}
this.handleChange(align)};HAlignSelector.supportsMultipleObjectBindings=function(){return!1};HAlignSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("justify" in options)
this.setJustifyEnabled(!!options.justify);if("center" in options)
this.setCenterEnabled(!!options.center);};return HAlignSelector}(UIComponent_26.UIComponent));exports.HAlignSelector=HAlignSelector});define("js/FontStyleSelector",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_27,jquery_44){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FontStyleSelector=void 0;var FontStyleSelector=(function(_super){__extends(FontStyleSelector,_super);function FontStyleSelector(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;var group=(0,jquery_44.default)('<div>').addClass('btn-group');_this.bBold=_this.buildButton('fa fa-bold').appendTo(group);_this.bItalic=_this.buildButton('fa fa-italic').appendTo(group);_this.bUnderline=_this.buildButton('fa fa-underline').appendTo(group);_this._elem.addClass('wb-font-style-ctrl').append(group);return _this}
FontStyleSelector.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}};FontStyleSelector.prototype.buildButton=function(icon,htmlIcon){var _this=this;if(htmlIcon===void 0){htmlIcon=!1}
var btn=(0,jquery_44.default)('<button>').addClass('btn btn-default');if(htmlIcon){btn.append((0,jquery_44.default)('<strong>').html(icon))}else{btn.append((0,jquery_44.default)('<span>').addClass(icon))}
var lastTime=0;btn.on('click touchend',function(){var nowTime=(new Date()).getTime();if(lastTime<(nowTime-500)){lastTime=nowTime;btn.toggleClass('active');if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()}});return btn};FontStyleSelector.prototype.getValue=function(){var o={bold:this.bBold.is('.active'),italic:this.bItalic.is('.active'),underline:this.bUnderline.is('.active'),};o.css={};o.css["font-weight"]=o.bold?"bold":"normal";o.css["font-style"]=o.italic?"italic":"normal";o.css["text-decoration"]=o.underline?"underline":"none";return o};FontStyleSelector.prototype.setValue=function(value){var o=value?value:{};this.bBold.removeClass('active');if(o.bold)
this.bBold.addClass('active');this.bItalic.removeClass('active');if(o.italic)
this.bItalic.addClass('active');this.bUnderline.removeClass('active');if(o.underline)
this.bUnderline.addClass('active');};FontStyleSelector.supportsMultipleObjectBindings=function(){return!1};FontStyleSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return FontStyleSelector}(UIComponent_27.UIComponent));exports.FontStyleSelector=FontStyleSelector});define("js/ui/StaticTextControl",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_28,jquery_45){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StaticTextControl=void 0;var StaticTextControl=(function(_super){__extends(StaticTextControl,_super);function StaticTextControl(){var _this=_super.call(this)||this;_this.value="";_this.syntaxHighlight=!1;_this.monospace=!1;_this.textContainer=(0,jquery_45.default)('<div class="wb-static-text" />');_this.getElem().append(_this.textContainer);return _this}
StaticTextControl.prototype.buildInit=function(data,fields){if("syntaxHighlight" in data)
this.setSyntaxHighlight(data.syntaxHighlight);if("monospace" in data)
this.setMonospace(data.monospace);if("value" in data)
this.setValue(data.value);};StaticTextControl.prototype.setSyntaxHighlight=function(syntaxHighlight){if(this.syntaxHighlight===syntaxHighlight)
return;this.syntaxHighlight=syntaxHighlight;if(syntaxHighlight)
this.textContainer.addClass("wb-syntax-highlight");else this.textContainer.removeClass("wb-syntax-highlight");this.setValue(this.value)};StaticTextControl.prototype.setMonospace=function(monospace){if(this.monospace===monospace)
return;this.monospace=monospace;if(monospace)
this.textContainer.addClass("wb-monospace");else this.textContainer.removeClass("wb-monospace")};StaticTextControl.prototype.setValue=function(value){this.value=value;if(value===void 0||value===null||typeof value==="boolean"||typeof value==="number"||typeof value==="string"){var txtCont=this.textContainer;if(this.syntaxHighlight){txtCont=(0,jquery_45.default)('<span>');this.textContainer.append(txtCont);if(value===void 0||value===null)
txtCont.addClass("wb-syntax-null");else if(typeof value==="boolean")
txtCont.addClass("wb-syntax-boolean");else if(typeof value==="number")
txtCont.addClass("wb-syntax-number");else txtCont.addClass("wb-syntax-string")}
txtCont.text(value)}else{var prefix="";var proto=Object.getPrototypeOf(value);if(proto&&proto.constructor&&proto.constructor.name)
prefix=proto.constructor.name+" ";if(this.syntaxHighlight)
this.textContainer.html(prefix+StaticTextControl.syntaxHighlight(value));else this.textContainer.text(prefix+StaticTextControl.stringify(value))}};StaticTextControl.prototype.getValue=function(){return this.value};StaticTextControl.supportsMultipleObjectBindings=function(){return!1};StaticTextControl.stringify=function(value){var hash=new Set();if(value!==null&&typeof value==="object")
hash.add(value);return JSON.stringify(value,function(key,val){if(val!==null&&typeof val==="object"){if(hash.has(val))
return"*** ALREADY DISPLAYED ***";hash.add(val)}
return val},2)};StaticTextControl.syntaxHighlight=function(json){json=StaticTextControl.stringify(json).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(match){var cls='number';if(/^"/.test(match)){if(/:$/.test(match)){cls='key'}else{cls='string'}}else if(/true|false/.test(match)){cls='boolean'}else if(/null/.test(match)){cls='null'}
return'<span class="wb-syntax-'+cls+'">'+match+'</span>'})};StaticTextControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("syntaxHighlight" in options)
this.setSyntaxHighlight(!!options.syntaxHighlight);if("monospace" in options)
this.setMonospace(!!options.monospace);};return StaticTextControl}(UIComponent_28.UIComponent));exports.StaticTextControl=StaticTextControl});define("js/ui/GalleryTypeSelector",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_29,jquery_46){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GalleryTypeSelector=void 0;var GalleryTypeSelector=(function(_super){__extends(GalleryTypeSelector,_super);function GalleryTypeSelector(){var _this=_super.call(this)||this;_this.items=[];_this.value='';_this.types={'thumbs':__('Thumbnails'),'masonry':__('Masonry'),'slideshow':__('Slideshow'),'list':__('List'),'map':__('Map'),};var ulElem=(0,jquery_46.default)('<ul>').addClass('wb_gallery_wrap');var _loop_9=function(type){var typeData=this_6.types[type];var li=(0,jquery_46.default)('<li>').append((0,jquery_46.default)('<div>').addClass('wb_gallery_wrap_item').css({textAlign:'center'}).append((0,jquery_46.default)('<span>').addClass('wbico wbico-gallery-'+type))).attr({title:typeData,'data-type':type}).css({cursor:'pointer'}).on('click',function(){_this.handleChange(type);_this.onValueChanged()});ulElem.append(li);this_6.items.push({type:type,elem:li})};var this_6=this;for(var type in _this.types){_loop_9(type)}
_this._elem.append(ulElem);_this.handleChange('thumbs',!0);_this.setLabelValue();return _this}
GalleryTypeSelector.prototype.setLabel=function(label){if(label===void 0){label=null}
_super.prototype.setLabel.call(this,label);this.setLabelValue();return this};GalleryTypeSelector.prototype.setLabelValue=function(){if(this._labelElem){this._labelValue=this._labelElem.children('.wb-component-label-value');if(this._labelValue.length<=0){this._labelValue=(0,jquery_46.default)('<div class="wb-component-label-value">');this._labelElem.append(this._labelValue)}}
var type=this.getValue();if(this._labelValue&&type in this.types)
this._labelValue.text(this.types[type]);return this};GalleryTypeSelector.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFun_1=data.change;this.onChange=function(){return changeFun_1.call(_this,fields)}}
this.setIsBackgroundMode(data.isBackground||!1)};GalleryTypeSelector.prototype.setIsBackgroundMode=function(isBackgroundMode){var allowInBackground=['map','slideshow'];this._elem.find('[data-type]').each(function(key,item){if(isBackgroundMode&&allowInBackground.indexOf((0,jquery_46.default)(item).attr('data-type'))<0){(0,jquery_46.default)(item).hide()}else{(0,jquery_46.default)(item).show()}})};GalleryTypeSelector.prototype.handleChange=function(type,noCallback){if(noCallback===void 0){noCallback=!1}
for(var _i=0,_a=this.items;_i<_a.length;_i++){var item=_a[_i];if(item.type==type){item.elem.addClass('active')}else{item.elem.removeClass('active')}}
this.value=type;if(!noCallback&&typeof this.onChange==='function')
this.onChange();this.setLabelValue()};GalleryTypeSelector.prototype.getValue=function(){return this.value};GalleryTypeSelector.prototype.setValue=function(val){this.handleChange(val,!0)};GalleryTypeSelector.supportsMultipleObjectBindings=function(){return!1};GalleryTypeSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("isBackground" in options)
this.setIsBackgroundMode(!!options.isBackground);};return GalleryTypeSelector}(UIComponent_29.UIComponent));exports.GalleryTypeSelector=GalleryTypeSelector});define("js/TextControl",["require","exports","js/Service","js/ColorPicker","js/VerticalLayout","js/SizeSelector","js/FontStyleSelector","js/CustomContainer","js/HAlignSelector","js/UIComponent","js/CommonTypes","FontControl","js/FlowLayout","js/HorizontalLayout","js/ui/Popover","jquery","js/UIModeScaleFactors","js/util/StyleUtil","js/DropdownBox"],function(require,exports,Service_8,ColorPicker_3,VerticalLayout_8,SizeSelector_6,FontStyleSelector_1,CustomContainer_3,HAlignSelector_1,UIComponent_30,CommonTypes_6,FontControl_1,FlowLayout_6,HorizontalLayout_1,Popover_5,jquery_47,UIModeScaleFactors_1,StyleUtil_3,DropdownBox_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TextControl=exports.scaledCss=exports.quoteFontFamily=void 0;var FontPreview=(function(_super){__extends(FontPreview,_super);function FontPreview(){var _this=_super.call(this)||this;_this._elem.css({height:198,overflow:'hidden',padding:'10px',border:'1px solid lightgray'});return _this}
FontPreview.prototype.html=function(html){this._elem.html(html)};FontPreview.prototype.empty=function(){this._elem.empty()};FontPreview.prototype.append=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}
jquery_47.default.fn.append.apply(this._elem,args)};return FontPreview}(CustomContainer_3.CustomContainer));function quoteFontFamily(value){if(value.length>2&&value.indexOf(' ')>0){var fc=value.substring(0,1);var lc=value.substring(value.length-1,1);if(fc!=lc&&fc!='"'&&fc!="'"){return"'"+value+"'"}}
return value}
exports.quoteFontFamily=quoteFontFamily;function scaledCss(value){var mode=Service_8.Service.modeManager.getMode();if(value.cssScaleFactors&&value.cssScaleFactors[mode]){return value.cssScaleFactors[mode]}else if(value.css){return value.css}else{return{}}}
exports.scaledCss=scaledCss;var TextControl=(function(_super){__extends(TextControl,_super);function TextControl(needLineHeight,ttplacement,needPreview,noStyle,noAlign,horizontal,noSize,noSpacing,noColorPicker,noScaleFactors,useJustify,useStyleForLink,isTag){if(needLineHeight===void 0){needLineHeight=!1}
if(ttplacement===void 0){ttplacement='left'}
if(needPreview===void 0){needPreview=!1}
if(noStyle===void 0){noStyle=!1}
if(noAlign===void 0){noAlign=!1}
if(horizontal===void 0){horizontal=!0}
if(noSize===void 0){noSize=!1}
if(noSpacing===void 0){noSpacing=!1}
if(noColorPicker===void 0){noColorPicker=!1}
if(noScaleFactors===void 0){noScaleFactors=!0}
if(useJustify===void 0){useJustify=!0}
if(useStyleForLink===void 0){useStyleForLink=!1}
if(isTag===void 0){isTag=!1}
var _this=_super.call(this)||this;_this.needPreview=needPreview;_this.uiFields={};_this.previewTag=null;_this.isHorizontal=!1;_this.layoutElem=null;var changeFunc=function(){if(_this.needPreview)
_this.updatePreview();if(_this.layoutElem)
_this.layoutElem.update();_this.onValueChanged()};_this.buildField({type:'VerticalLayout',id:'fontBlock',children:[{type:'Label',text:__('Font')},{type:'FlowLayout',spacing:-1,children:[{type:'FontFamilySelector',id:'font',css:{width:164},change:changeFunc},{type:'Button',icon:"fa fa-pencil",click:function(e,fields){fields.font.getWrappedControl().openEditFontsDialog()},css:{paddingLeft:'10px',paddingRight:'10px'}}]}]});_this.buildField({type:'VerticalLayout',id:"sizeBlock",visible:!noSize,children:[{type:'Label',text:__('Size')},{type:SizeSelector_6.SizeSelector,id:'size',min:8,units:'px',hideSpinner:!0,change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:"lineHeightBlock",visible:needLineHeight,children:[{type:'Label',text:__('Line height'),helpPlacement:ttplacement},{type:SizeSelector_6.SizeSelector,id:'lineHeight',min:8,units:'px',hideSpinner:!0,change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:"letterSpacingBlock",visible:!noSpacing,children:[{type:'Label',text:__('Letter spacing')},{type:SizeSelector_6.SizeSelector,id:'letterSpacing',min:-100,precision:2,step:0.01,units:'px',hideSpinner:!0,change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:"tagBlock",css:{width:100,marginLeft:18},visible:isTag,children:[{type:'Label',text:__('Tag')},{type:DropdownBox_1.DropdownBox,id:'tag',change:changeFunc,options:[{id:'h1',value:'h1',name:'<h1>'},{id:'h2',value:'h2',name:'<h2>'},{id:'h3',value:'h3',name:'<h3>'},{id:'h4',value:'h4',name:'<h4>'},{id:'h5',value:'h5',name:'<h5>'},{id:'h6',value:'h6',name:'<h6>'},{id:'p',value:'p',name:'<p>'},]}]});_this.buildField({type:'VerticalLayout',id:"styleBlock",visible:!noStyle,children:[{type:'Label',text:__('Style')},{type:FontStyleSelector_1.FontStyleSelector,id:'style',change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:"alignBlock",visible:!noAlign,children:[{type:'Label',text:__('Align')},{type:'HAlignSelector',id:'align',justify:useJustify,change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:'colorBlock',visible:!noColorPicker,children:[{type:'Label',text:__('Color')},{type:ColorPicker_3.ColorPicker,id:'color',noTransparent:!0,change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:'transformBlock',visible:!1,children:[{type:'Label',text:__('Letter case')},{type:'FontTransformSelector',id:'transform',change:changeFunc}]});_this.buildField({type:'VerticalLayout',id:'previewBlock',visible:needPreview,children:[{type:'Label',text:__('Preview')},{type:FontPreview,id:'previewText'}]});_this.buildField({type:'VerticalLayout',id:'scaleFactorsBlock',visible:!noScaleFactors,children:[{type:'Label',text:__('Font scale factors')},{type:UIModeScaleFactors_1.UIModeScaleFactors,id:'scaleFactors',change:changeFunc,css:{width:'235px'}}]});_this.buildField({type:'VerticalLayout',id:"styleForLinks",visible:useStyleForLink,children:[{type:'Label',text:__('Link Text')},{type:'FlowLayout',children:[{type:ColorPicker_3.ColorPicker,id:'linksTextColor',change:changeFunc},{type:FontStyleSelector_1.FontStyleSelector,id:'linksTextStyle',change:changeFunc},]},{type:'Label',text:__('Link Hover')},{type:'FlowLayout',children:[{type:ColorPicker_3.ColorPicker,id:'linksHoverColor',change:changeFunc},{type:FontStyleSelector_1.FontStyleSelector,id:'linksHoverStyle',change:changeFunc},]},]});_this.setHorizontal(horizontal);_this.font=_this.uiFields.font;_this.size=_this.uiFields.size;_this.lineHeight=_this.uiFields.lineHeight;_this.letterSpacing=_this.uiFields.letterSpacing;_this.align=_this.uiFields.align;_this.style=_this.uiFields.style;_this.color=_this.uiFields.color;_this.previewText=_this.uiFields.previewText;_this.scaleFactors=_this.uiFields.scaleFactors;_this.tag=_this.uiFields.tag;return _this}
TextControl.combine=function(_font,_size,_color,_style,_align,_letterSpacing,_tag){var style=(_style?_style.getValue():{});var css={font:((style.italic?"italic":"normal")+" "+(style.bold?"bold":"normal")+" "+(_size?_size.getValue():12)+"px"+(_font?(" "+_font.getValue()):"")),"text-align":(_align?_align.getValue():"left"),"text-decoration":(style.underline?"underline":"none"),color:(_color?_color.getValue():"#000000")};var val=_size?(_size.getValue()+2):14;css["line-height"]=(val===0)?"normal":(val+"px");var lsVal=_letterSpacing?_letterSpacing.getValue():0;if(lsVal)
css["letter-spacing"]=lsVal+"px";var res={color:(_color?_color.getValue():"#000000"),size:(_size?_size.getValue():12),decoration:(style.underline?"underline":"none"),font:(_font?_font.getValue():undefined),style:(_style?_style.getValue():undefined),align:(_align?_align.getValue():CommonTypes_6.Alignment.Left),lineHeight:(_size?(_size.getValue()+2):14),letterSpacing:lsVal,css:css,cssRaw:(0,StyleUtil_3.stringifyCss)(css),tag:(_tag?_tag.getValue():"p"),};return res};TextControl.buildCss=function(styleDef,fontFamily,fontSize,fontColor,fontStyle,textAlign,lineHeight,letterSpacing,textTransform,scaleFactors,tag,linksTextColor,linksTextStyle,linksHoverColor,linksHoverStyle){var style=(styleDef?styleDef:{}),res={color:(style.color?style.color:null),size:(style.size?style.size:0),font:(style.font?style.font:null),style:((typeof style.style==='object'||style.style!==null)?style.style:{}),align:(style.align?style.align:null),lineHeight:(style.lineHeight?style.lineHeight:null),letterSpacing:(style.letterSpacing?style.letterSpacing:0),textTransform:(style.textTransform?style.textTransform:null),scaleFactors:(style.scaleFactors?style.scaleFactors:null),css:{},cssScaleFactors:null,cssRaw:'',tag:(style.tag?style.tag:'p')};res.css={};if(fontFamily)
res.font=quoteFontFamily(fontFamily.getValue());if(fontSize)
res.size=fontSize.getValue();if(fontColor)
res.color=fontColor.getValue();if(fontStyle)
res.style=fontStyle.getValue();if(textAlign)
res.align=textAlign.getValue();if(lineHeight)
res.lineHeight=lineHeight.getValue();if(letterSpacing)
res.letterSpacing=letterSpacing.getValue();if(textTransform)
res.textTransform=textTransform.getValue().value;if(scaleFactors)
res.scaleFactors=scaleFactors.getValue();if(res.scaleFactors){if(res.scaleFactors.tv!==100||res.scaleFactors.desktop!==100||res.scaleFactors.tablet!==100||res.scaleFactors.phone!==100){res.cssScaleFactors={};Service_8.Service.modeManager.getModes().forEach(function(mode){if(res.cssScaleFactors){var scale=((res.scaleFactors&&res.scaleFactors[mode])?(res.scaleFactors[mode]/100):1);res.cssScaleFactors[mode]={};var fontStyleStr=(res.style?(res.style.italic?'italic':'normal'):'');if(fontStyleStr)
res.cssScaleFactors[mode]['font-style']=fontStyleStr;if(res.size){res.cssScaleFactors[mode].font=((res.style?((res.style.italic?'italic':'normal')+' '+(res.style.bold?'bold':'normal')+' '):'')+(res.size*scale)+'px'+(res.font?(' '+res.font):''));res.cssScaleFactors[mode]['font-size']=(res.size*scale)+'px'}
if(res.font)
res.cssScaleFactors[mode]['font-family']=res.font;if(res.color)
res.cssScaleFactors[mode].color=res.color;if(res.style)
res.cssScaleFactors[mode]['text-decoration']=(res.style.underline?'underline':'none');if(res.align)
res.cssScaleFactors[mode]['text-align']=res.align;if(res.lineHeight){res.cssScaleFactors[mode]['line-height']=((res.lineHeight===0)?'normal':((res.lineHeight*scale)+'px'))}
if(res.letterSpacing)
res.cssScaleFactors[mode]['letter-spacing']=(res.letterSpacing*scale)+'px';if(res.textTransform)
res.cssScaleFactors[mode]['text-transform']=res.textTransform}})}else{res.scaleFactors=null;res.cssScaleFactors=null}}
if(linksTextColor)
res.linksTextColor=linksTextColor.getValue();if(linksTextStyle)
res.linksTextStyle=linksTextStyle.getValue();if(linksHoverColor)
res.linksHoverColor=linksHoverColor.getValue();if(linksHoverStyle)
res.linksHoverStyle=linksHoverStyle.getValue();if(res.linksTextColor&&res.linksTextStyle&&res.linksHoverColor&&res.linksHoverStyle){res.cssForLinks={normal:{},hover:{}};if(res.linksTextStyle.italic)
res.cssForLinks.normal['font-style']='italic';if(res.linksTextStyle.underline)
res.cssForLinks.normal['text-decoration']='underline';if(res.linksTextStyle.bold)
res.cssForLinks.normal['font-weight']='bold';if(res.linksTextColor)
res.cssForLinks.normal.color=res.linksTextColor;if(res.linksHoverStyle.italic)
res.cssForLinks.hover['font-style']='italic';if(res.linksHoverStyle.underline)
res.cssForLinks.hover['text-decoration']='underline';if(res.linksHoverStyle.bold)
res.cssForLinks.hover['font-weight']='bold';if(res.linksHoverColor)
res.cssForLinks.hover.color=res.linksHoverColor}
if(fontSize)
res.css['font-size']=res.size+'px';var fontStyleStr=(res.style?(res.style.italic?'italic':'normal'):'');if(fontStyleStr)
res.css['font-style']=fontStyleStr;if(res.size)
res.css.font=((res.style?((res.style.italic?'italic':'normal')+' '+(res.style.bold?'bold':'normal')+' '):'')+res.size+'px'+(res.font?(' '+res.font):''));if(res.font)
res.css['font-family']=res.font;if(res.color)
res.css.color=res.color;if(res.style)
res.css['text-decoration']=(res.style.underline?'underline':'none');if(res.align)
res.css['text-align']=res.align;if(res.lineHeight){res.css['line-height']=((res.lineHeight===0)?'normal':(res.lineHeight+'px'))}
if(res.letterSpacing)
res.css['letter-spacing']=res.letterSpacing+'px';if(res.textTransform)
res.css['text-transform']=res.textTransform;res.cssRaw=(0,StyleUtil_3.stringifyCss)(res.css);if(tag)
res.tag=tag.getValue();return jquery_47.default.extend(!0,{},res)};TextControl.prototype.buildInit=function(data,fields){if('needLineHeight' in data)
this.setNeedLineHeight(data.needLineHeight?!0:!1);if('needPreview' in data)
this.setNeedPreview(data.needPreview?!0:!1);if('horizontal' in data)
this.setHorizontal(data.horizontal?!0:!1);if('noStyle' in data)
this.setNoStyle(data.noStyle?!0:!1);if('noAlign' in data)
this.setNoAlign(data.noAlign?!0:!1);if('noSize' in data)
this.setNoSize(data.noSize?!0:!1);if('noSpacing' in data)
this.setNoSpacing(data.noSpacing?!0:!1);if('noColorPicker' in data)
this.setNoColorPicker(data.noColorPicker?!0:!1);if('noScaleFactors' in data)
this.setNoScaleFactors(data.noScaleFactors?!0:!1);if('useTranform' in data)
this.setUseTransform(data.useTranform?!0:!1);if('value' in data)
this.setValue(data.value||null);if('useJustify' in data)
this.setUseJustify(data.useJustify?!0:!1);if('useStyleForLink' in data)
this.setUseStyleForLink(data.useStyleForLink?!0:!1);if('isTag' in data)
this.setIsTag(data.isTag?!0:!1);};TextControl.prototype.buildField=function(def){return new Service_8.Service.UIBuilder(def,this.uiFields)};TextControl.prototype.destroy=function(){if(this.layoutElem)
this.layoutElem.dispose();if(this.uiFields)
Service_8.Service.UIBuilder.destroyFields(this.uiFields);_super.prototype.destroy.call(this)};TextControl.prototype.getValue=function(){if(this.uiFields.styleForLinks.isVisible()){return TextControl.buildCss(undefined,this.font,this.size,this.color,this.style,this.align,this.lineHeight,this.letterSpacing,this.uiFields.transform,this.scaleFactors,this.tag,this.uiFields.linksTextColor,this.uiFields.linksTextStyle,this.uiFields.linksHoverColor,this.uiFields.linksHoverStyle)}
return TextControl.buildCss(undefined,this.font,this.size,this.color,this.style,this.align,this.lineHeight,this.letterSpacing,this.uiFields.transform,this.scaleFactors,this.tag)};TextControl.prototype.setValue=function(obj){var _obj=obj?jquery_47.default.extend(!0,{letterSpacing:0},obj):null;if(!_obj)
_obj={color:"#000000",size:12,decoration:"none",font:"Arial,sans-serif",style:{},align:"left",lineHeight:null,letterSpacing:0,textTransform:null,scaleFactors:null,tag:'p'};this.color.setValue(_obj.color);if(this.size)
this.size.setValue(_obj.size?_obj.size:12);this.font.setValue(_obj.font);if(this.style)
this.style.setValue(_obj.style);if(this.align)
this.align.setValue(_obj.align);if(this.lineHeight){this.lineHeight.setValue(_obj.lineHeight)}
if(this.letterSpacing)
this.letterSpacing.setValue(_obj.letterSpacing);if(this.tag)
this.tag.setValue(_obj.tag?_obj.tag:'p');if(this.uiFields.transform)
this.uiFields.transform.setValue(_obj.textTransform);if(this.uiFields.scaleFactors)
this.uiFields.scaleFactors.setValue(_obj.scaleFactors);if(this.uiFields.linksTextColor)
this.uiFields.linksTextColor.setValue(_obj.linksTextColor||'#337ab7');if(this.uiFields.linksTextStyle)
this.uiFields.linksTextStyle.setValue(_obj.linksTextStyle);if(this.uiFields.linksHoverColor)
this.uiFields.linksHoverColor.setValue(_obj.linksHoverColor||'#23527c');if(this.uiFields.linksHoverStyle)
this.uiFields.linksHoverStyle.setValue(_obj.linksHoverStyle);if(this.previewText)
this.updatePreview();if(this.layoutElem)
this.layoutElem.update();};TextControl.prototype.setHorizontal=function(horizontal){if(this.isHorizontal==horizontal&&this.layoutElem)
return;this.isHorizontal=horizontal;if(this.layoutElem)
this.layoutElem.dispose();if(horizontal){this.layoutElem=new EditFieldsView(this.uiFields)}else{this.layoutElem=new HorizFieldsView(this.uiFields)}
this.layoutElem.appendTo(this._elem);this.layoutElem.update()};TextControl.prototype.setPreviewTag=function(tag){this.previewTag=tag?tag:'div';this.updatePreview()};TextControl.prototype.updatePreview=function(){if(!this.previewText)
return;var vals=this.getValue();var tagVal=this.previewTag?this.previewTag:'div';var tags=(typeof tagVal!=="object")?[tagVal]:tagVal;this.previewText.empty();for(var i=0;i<tags.length;i++){var tag=tags[i];var txt=document.createElement(tags[i]);if(tag==="ol"||tag==="ul"){(0,jquery_47.default)(txt).css("margin",0).css((0,HAlignSelector_1.convertCssTextAlignByCurLocale)(vals.css||{})).append((0,jquery_47.default)('<li>').text(__('Preview text')),(0,jquery_47.default)('<li>').text(__('Preview text'))).attr('dir',(wb_builder.site.currSelLang?wb_builder.site.isRtlLang(wb_builder.site.currSelLang):wb_builder.site.rtl)?'rtl':'ltr')}else{(0,jquery_47.default)(txt).css("margin",0).css((0,HAlignSelector_1.convertCssTextAlignByCurLocale)(vals.css||{})).append(document.createTextNode(__('Preview text')),'<br>',document.createTextNode(__('Preview text'))).attr('dir',(wb_builder.site.currSelLang?wb_builder.site.isRtlLang(wb_builder.site.currSelLang):wb_builder.site.rtl)?'rtl':'ltr')}
this.previewText.append(txt)}
this.previewText.css({backgroundColor:ColorPicker_3.ColorPicker.readableColor(vals.color)})};TextControl.prototype.setNeedLineHeight=function(value){this.uiFields.lineHeightBlock.setVisible(value)};TextControl.prototype.setNeedPreview=function(value){this.needPreview=value;if(this.uiFields.previewBlock){this.uiFields.previewBlock.setVisible(value)}};TextControl.prototype.setNoStyle=function(value){this.uiFields.styleBlock.setVisible(!value)};TextControl.prototype.setNoAlign=function(value){this.uiFields.alignBlock.setVisible(!value)};TextControl.prototype.setIsTag=function(value){this.uiFields.tagBlock.setVisible(value)};TextControl.prototype.setNoSize=function(value){this.uiFields.sizeBlock.setVisible(!value)};TextControl.prototype.setNoColorPicker=function(value){this.uiFields.colorBlock.setVisible(!value)};TextControl.prototype.setNoScaleFactors=function(value){this.uiFields.scaleFactorsBlock.setVisible(!value)};TextControl.prototype.setUseJustify=function(value){this.uiFields.align.setJustifyEnabled(value)};TextControl.prototype.setUseStyleForLink=function(value){this.uiFields.styleForLinks.setVisible(value)};TextControl.prototype.setNoSpacing=function(value){this.uiFields.letterSpacingBlock.setVisible(!value)};TextControl.prototype.setUseTransform=function(use){this.uiFields.transformBlock.setVisible(use)};TextControl.prototype.setEnabled=function(value){};TextControl.supportsMultipleObjectBindings=function(){return!1};TextControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("needLineHeight" in options)
this.setNeedLineHeight(!!options.needLineHeight);if("needPreview" in options)
this.setNeedPreview(!!options.needPreview);if("noStyle" in options)
this.setNoStyle(!!options.noStyle);if("noAlign" in options)
this.setNoAlign(!!options.noAlign);if("noSize" in options)
this.setNoSize(!!options.noSize);if("noSpacing" in options)
this.setNoSpacing(!!options.noSpacing);if("noColorPicker" in options)
this.setNoColorPicker(!!options.noColorPicker);if("noScaleFactors" in options)
this.setNoScaleFactors(!!options.noScaleFactors);if("useJustify" in options)
this.setUseJustify(!!options.useJustify);if("useStyleForLink" in options)
this.setUseStyleForLink(!!options.useStyleForLink);if("useTranform" in options)
this.setUseTransform(!!options.useTranform);if("isTag" in options)
this.setIsTag(!!options.isTag);};return TextControl}(UIComponent_30.UIComponent));exports.TextControl=TextControl;var HorizFieldsView=(function(_super){__extends(HorizFieldsView,_super);function HorizFieldsView(fields){var _this=_super.call(this)||this;_this.setSpacing(15);_this.addAllChildren([(new HorizontalLayout_1.HorizontalLayout()).addAllChildren([fields.fontBlock,]).setColWeightAll([8]),(new HorizontalLayout_1.HorizontalLayout()).addAllChildren([fields.sizeBlock,fields.lineHeightBlock,fields.letterSpacingBlock,]).setColWeightAll([4,4,4]),(new HorizontalLayout_1.HorizontalLayout()).addAllChildren([fields.alignBlock,fields.styleBlock,fields.colorBlock,]).setColWeightAll([4,4,4]),fields.scaleFactorsBlock,fields.previewBlock,fields.styleForLinks]);return _this}
HorizFieldsView.prototype.update=function(){};HorizFieldsView.prototype.appendTo=function(elem){elem.append(this._elem)};HorizFieldsView.prototype.dispose=function(){this.removeAllChildren();this._elem.remove()};return HorizFieldsView}(VerticalLayout_8.VerticalLayout));var EditFieldsView=(function(){function EditFieldsView(fields){var _this=this;this.fields=fields;var button=(0,jquery_47.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_47.default)('<span>').addClass('fa fa-pencil')).on('click',function(){return _this.onClick()});this.input=(0,jquery_47.default)('<input>').addClass('form-control').attr({type:'text',readonly:'readonly'}).on('click',function(){return _this.onClick()});this.elem=(0,jquery_47.default)('<div>').addClass('input-group wb-edit-field-ctrl').append(this.input).append((0,jquery_47.default)('<span>').addClass('input-group-btn').append(button));this.popover=new FontPopover(button,fields)}
EditFieldsView.prototype.update=function(){var font=this.fields.font;var fontName=FontControl_1.default.getPrimaryFontName(font.getValue());this.input.val(fontName.substring(0,1).toUpperCase()+fontName.substring(1)+(this.fields.sizeBlock.isVisible()?", ".concat(this.fields.size.getValue(),"px"):'')+'...')};EditFieldsView.prototype.onClick=function(){if(this.popover.isVisible()){this.popover.setVisible(!1);return}
this.popover.setVisible(!0)};EditFieldsView.prototype.appendTo=function(elem){elem.append(this.elem)};EditFieldsView.prototype.dispose=function(){if(this.popover.isVisible()){this.popover.setVisible(!1)}
this.popover.dispose();this.elem.remove()};return EditFieldsView}());var FontPopover=(function(_super){__extends(FontPopover,_super);function FontPopover(triggerBtn,fields){var _this=this;var main;_this=_super.call(this,triggerBtn,__('Font'),(main=new VerticalLayout_8.VerticalLayout()).setSpacing(12).getElem())||this;_this.lines=[(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.fontBlock,fields.colorBlock,]),(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.sizeBlock,fields.lineHeightBlock,]),(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.styleBlock,fields.alignBlock,]),(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.transformBlock,fields.letterSpacingBlock,fields.tagBlock]),(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.scaleFactorsBlock,]),(new FlowLayout_6.FlowLayout()).setSpacing(30).addAllChildren([fields.styleForLinks,]),];main.addAllChildren(_this.lines);return _this}
FontPopover.prototype.dispose=function(){for(var _i=0,_a=this.lines;_i<_a.length;_i++){var line=_a[_i];line.removeAllChildren()}
_super.prototype.dispose.call(this)};return FontPopover}(Popover_5.Popover))});define("js/GoogleMapsApi",["require","exports","jquery","js/core/BuilderConfig"],function(require,exports,jquery_48,BuilderConfig_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GoogleMapsApi=void 0;var win=window;var GoogleMapsApi=(function(){function GoogleMapsApi(){}
GoogleMapsApi.addListener=function(callback){if(win['GoogleMapsApi_ScriptReady']){callback()}else{if(!win['GoogleMapsApi_Listeners'])
win['GoogleMapsApi_Listeners']=[];win['GoogleMapsApi_Listeners'].push(callback)}
if(!win['GoogleMapsApi_ScriptLoaded']){win['GoogleMapsApi_ScriptLoaded']=!0;win['GoogleMapsApi_clb_fn']=function(){return win['GoogleMapsApi_ScriptReady']=!0};var locale=(BuilderConfig_3.wbConfig.locale?BuilderConfig_3.wbConfig.locale:null);if(wb_builder.site.currSelLang){var lang=BuilderConfig_3.wbConfig.getLanguageByCode(wb_builder.site.currSelLang);if(lang)
locale=lang.locale}
var region=(locale&&locale.indexOf('_')>=0)?locale.split('_')[1].toUpperCase():null;jquery_48.default.getScript(BuilderConfig_3.wbConfig.httpProtocol+"://maps.googleapis.com/maps/api/js?v=3.exp&key="+wb_builder.mapsConfig.googleMapsApiKey+"&sensor=false"+(region?("&region="+region+"&language="+locale):'')+"&callback=GoogleMapsApi_clb_fn&libraries=places");var compleFunc_1=function(){if(!win['GoogleMapsApi_ScriptReady']){setTimeout(compleFunc_1,100)}else if(win['GoogleMapsApi_Listeners']){for(var _i=0,_a=win['GoogleMapsApi_Listeners'];_i<_a.length;_i++){var callback_2=_a[_i];callback_2()}}};compleFunc_1()}};return GoogleMapsApi}());exports.GoogleMapsApi=GoogleMapsApi});define("js/ui/GoogleMapsPlacesControl",["require","exports","js/UIComponent","js/jquery-builder","js/ui/Popover","js/GoogleMapsApi"],function(require,exports,UIComponent_31,jquery_builder_5,Popover_6,GoogleMapsApi_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GoogleMapsPlacesControl=void 0;var GoogleMapsPlacesControl=(function(_super){__extends(GoogleMapsPlacesControl,_super);function GoogleMapsPlacesControl(){var _this=_super.call(this)||this;_this.value={};_this.googleEventsSet=!1;_this.configSuplier=null;_this.gmapAddress=(0,jquery_builder_5.default)('<input>').addClass('form-control').attr({type:'text'});_this.markerBtn=(0,jquery_builder_5.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_5.default)('<span>').addClass('fa fa-map-marker')).on('click',function(){return _this.editMarker()});_this.cleanBtn=(0,jquery_builder_5.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_5.default)('<span>').addClass('fa fa-times')).on('click',function(){return _this.cleanMarker()});_this.markerEditor=new MarkerEditor(_this.markerBtn,function(value){if(value){_this.value.latLng=value;_this.value.text="".concat(value.lat,", ").concat(value.lng);_this.gmapAddress.val(_this.value.text)}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this._elem.append((0,jquery_builder_5.default)('<div>').addClass('input-group').append(_this.gmapAddress).append((0,jquery_builder_5.default)('<span>').addClass('input-group-btn').append(_this.markerBtn)));_this.invalidate();return _this}
GoogleMapsPlacesControl.prototype.focus=function(){this.gmapAddress.focus()};GoogleMapsPlacesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_2=data.change;this.onChange=function(){return changeFunc_2.call(_this,fields)}}
if(typeof data.configSuplier==='function'){this.configSuplier=data.configSuplier}};GoogleMapsPlacesControl.prototype.destroy=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1)}
_super.prototype.destroy.call(this)};GoogleMapsPlacesControl.prototype.editMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||{lat:0,lng:0},config)};GoogleMapsPlacesControl.prototype.cleanMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
this.setValue(null);if(typeof this.onChange==="function")
this.onChange();this.onValueChanged()};GoogleMapsPlacesControl.prototype.setValue=function(value){this.value=jquery_builder_5.default.extend(!0,{},value);if((!this.value.text||this.value.text==="")&&this.value.latLng)
this.value.text="".concat(this.value.latLng.lat,", ").concat(this.value.latLng.lng);this.gmapAddress.val(this.value.text||"")};GoogleMapsPlacesControl.prototype.getValue=function(){return jquery_builder_5.default.extend(!0,{},this.value)};GoogleMapsPlacesControl.supportsMultipleObjectBindings=function(){return!1};GoogleMapsPlacesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(options.cleanable){this._elem.find('.input-group-btn').append(this.cleanBtn)}
if(typeof options.configSuplier==='function'){this.configSuplier=options.configSuplier}};GoogleMapsPlacesControl.prototype.revalidate=function(){var _this=this;_super.prototype.revalidate.call(this);var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;if(!this.googleEventsSet&&document.body.contains(this._elem.get(0))){this.googleEventsSet=!0;if(config===null||config===void 0?void 0:config.apiKeyError){this.gmapAddress.on("change keyup",function(){_this.value.text=_this.gmapAddress.val();delete _this.value.latLng;if(typeof _this.onChange==="function")
_this.onChange();_this.onValueChanged()});return}
GoogleMapsApi_1.GoogleMapsApi.addListener(function(){_this.gmapAddress.on("change",function(){setTimeout(function(){_this.gmapAddress.focus();google.maps.event.trigger(_this,'keydown',{keyCode:13});_this.gmapAddress.blur()},50)});_this.mapAddress=new google.maps.places.SearchBox(_this.gmapAddress.get(0));google.maps.event.addListener(_this.mapAddress,'places_changed',function(){_this.value.text=_this.gmapAddress.val();delete _this.value.latLng;var places=_this.mapAddress.getPlaces(),l,loc=null;for(var i=0,place=void 0;(place=places[i]);i++){if(place&&place.geometry&&(l=place.geometry.location))
loc={lat:l.lat(),lng:l.lng()}}
if(loc)
_this.value.latLng=loc;if(typeof _this.onChange==="function")
_this.onChange();_this.onValueChanged()})})}};return GoogleMapsPlacesControl}(UIComponent_31.UIComponent));exports.GoogleMapsPlacesControl=GoogleMapsPlacesControl;var MarkerEditor=(function(_super){__extends(MarkerEditor,_super);function MarkerEditor(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Drag marker to set your location'),(0,jquery_builder_5.default)('<div>').addClass('wb-gmaps-places-med').css({width:500,height:300}),'wb-gmaps-places-popover')||this;_this.onChange=onChange;_this.value={lat:0,lng:0};_this.config=null;return _this}
MarkerEditor.prototype.edit=function(value,config){this.value=value;this.config=config;if(!(config===null||config===void 0?void 0:config.apiKeyError))
this.setVisible(!0);};MarkerEditor.prototype.setMarker=function(value,config){if(!this.isInitialized())
return;if(config){this.gmap.setZoom(config.zoom);this.gmap.setMapTypeId(config.mapTypeId)}
this.gmap.setCenter(new google.maps.LatLng(value));this.gmapMarker.setPosition(new google.maps.LatLng(value))};MarkerEditor.prototype.onInit=function(){var _this=this;var val=new google.maps.LatLng(this.value);this.gmap=new google.maps.Map(this.getContent()[0],{zoom:0,center:val,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1});this.gmapMarker=new google.maps.Marker({position:val,draggable:!0,clickable:!1,optimized:!1,map:this.gmap,cursor:'grab'});google.maps.event.addListener(this.gmapMarker,'dragend',function(){var pos=_this.gmapMarker.getPosition();if(pos){_this.value={lat:pos.lat(),lng:pos.lng()};_this.onChange.call(_this,_this.value)}})};MarkerEditor.prototype.onDom=function(){this.setMarker(this.value,this.config)};return MarkerEditor}(Popover_6.Popover))});define("js/ui/SiteLanguagesControl",["require","exports","js/core/BuilderConfig","js/Service","js/DropdownBox","js/UIButton","js/UIComponent","js/VerticalLayout","jquery","js/BuilderEvent"],function(require,exports,BuilderConfig_4,Service_9,DropdownBox_2,UIButton_2,UIComponent_32,VerticalLayout_9,jquery_49,BuilderEvent_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SiteLanguagesControl=void 0;var SiteLanguagesControl=exports.SiteLanguagesControl=(function(_super){__extends(SiteLanguagesControl,_super);function SiteLanguagesControl(){var _this=_super.call(this)||this;_this.refilling=!1;Service_9.Service.UIBuilder.buildLayout({type:VerticalLayout_9.VerticalLayout,styleClass:'wb_langs',children:[{type:LangListControl,id:'languageList',change:function(){return _this.onListChange()}},{type:'Button',text:('+ '+__('Add language')),id:'langsAddBtn',buttonStyle:UIButton_2.UIButton.STYLE_LINK,styleClass:'add-lang',click:function(){return _this.addLang()}},{type:'FlowLayout',id:'langsAddBlock',styleClass:'add-lang-block',spacing:0,visible:!1,children:[{type:'DropdownBox',id:'langSelector',select:function(it){return _this.confirmAddLang(it)},css:{maxWidth:160}},{type:'Button',text:__('Cancel'),buttonStyle:UIButton_2.UIButton.STYLE_LINK,click:function(){return _this.cancelAddLang()}},]}]},_this._elem,_this.fields={});if(!SiteLanguagesControl.globalEventListenerInitialized){SiteLanguagesControl.globalEventListenerInitialized=!0;BuilderEvent_3.GlobalEvents.on("languages.update",function(){(0,jquery_49.default)(".wb_langs").closest(".wb-property").trigger("languageschanged")})}
_this._elem.on("languageschanged",function(){_this.invalidate()});return _this}
SiteLanguagesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFun_2=data.change;this.onChange=function(){return changeFun_2.call(_this,fields)}}};SiteLanguagesControl.prototype.setValue=function(value){var list=this.fields.languageList;list.removeAllItems();for(var _i=0,value_1=value;_i<value_1.length;_i++){var lang=value_1[_i];list.addLanguage(__assign({},lang))}
this.reloadSelector(list.languages)};SiteLanguagesControl.prototype.getValue=function(){var list=this.fields.languageList;var defaultLang=null,value=[];for(var _i=0,_a=list.languages;_i<_a.length;_i++){var lang=_a[_i];if(lang.lang.isDefault)
defaultLang=lang.lang.code}
if(!defaultLang&&list.languages.length>0){list.languages[0].setDefault(!0)}
for(var _b=0,_c=list.languages;_b<_c.length;_b++){var lang=_c[_b];value.push(__assign({},lang.lang))}
return value};SiteLanguagesControl.supportsMultipleObjectBindings=function(){return!1};SiteLanguagesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};SiteLanguagesControl.prototype.addLang=function(){var _this=this;this.fields.langsAddBlock.setVisible(!0);this.fields.langsAddBtn.setVisible(!1);window.requestAnimationFrame(function(){_this.fields.langSelector.setOpen(!0)})};SiteLanguagesControl.prototype.confirmAddLang=function(item){if(this.refilling||!this.fields)
return;if(item){var list=this.fields.languageList;var ln=item.getOriginal();if(!ln)
return;list.addLanguage({name:ln.name,code:ln.code,locale:ln.locale,hrefLang:ln.hrefLang,isDefault:(list.languages.length<=0),});this.reloadSelector(list.languages);this.handleChange()}
BuilderEvent_3.GlobalEvents.triggerEvent("languages.update",new BuilderEvent_3.LanguagesUpdateBuilderEvent(!1,!0));this.cancelAddLang()};SiteLanguagesControl.prototype.cancelAddLang=function(){this.fields.langsAddBlock.setVisible(!1);this.fields.langsAddBtn.setVisible(!0);this.refilling=!0;this.fields.langSelector.selectItem(null);this.refilling=!1};SiteLanguagesControl.prototype.onListChange=function(){this.reloadSelector(this.fields.languageList.languages);this.handleChange()};SiteLanguagesControl.prototype.reloadSelector=function(exclude){var excludeIndex={};for(var _i=0,exclude_1=exclude;_i<exclude_1.length;_i++){var ln=exclude_1[_i].lang;excludeIndex[ln.code]=!0}
var langSelector=this.fields.langSelector;this.refilling=!0;langSelector.removeAllItem();var selectedItem=null;for(var _a=0,_b=BuilderConfig_4.wbConfig.availableLanguages;_a<_b.length;_a++){var ln=_b[_a];if(ln.code in excludeIndex)
continue;var item=new DropdownBox_2.DropdownBox.Item(ln.name,ln.code,ln);langSelector.addItem(item);if(!wb_builder.site.languages.length&&ln.locale==wb_builder.locale){selectedItem=item}}
this.refilling=!1;if(selectedItem!==null){this.confirmAddLang(selectedItem)}};SiteLanguagesControl.prototype.handleChange=function(){if(typeof this.onChange==="function"){this.onChange()}
this.onValueChanged()};SiteLanguagesControl.globalEventListenerInitialized=!1;return SiteLanguagesControl}(UIComponent_32.UIComponent));var LangListItem=(function(){function LangListItem(lang,onStar,onRemove){var _this=this;this.lang=lang;this.elem=(0,jquery_49.default)('<div>').addClass('lang-item').data('langs-code',lang.code).append(new UIButton_2.UIButton(null,UIButton_2.UIButton.STYLE_LINK,'glyphicon glyphicon-star-empty').addClass('btn-make-default').setTitle(__('Make default')).on('click',function(){return onStar(_this)}).getElem()).append((0,jquery_49.default)('<i>').addClass('glyphicon glyphicon-star').attr({title:__('Default')})).append((0,jquery_49.default)('<span>').text(lang.name)).append(new UIButton_2.UIButton(null,UIButton_2.UIButton.STYLE_LINK,'glyphicon glyphicon-remove').addClass('btn-delete').setTitle(__('Remove')).on('click',function(){return onRemove(_this)}).getElem());this.setDefault(lang.isDefault,!0)}
LangListItem.prototype.setDefault=function(isDefault,force){if(force===void 0){force=!1}
if(this.lang.isDefault===isDefault&&!force)
return;this.lang.isDefault=isDefault;if(isDefault){this.elem.addClass('default')}else{this.elem.removeClass('default')}};return LangListItem}());var LangListControl=(function(_super){__extends(LangListControl,_super);function LangListControl(){var _this=_super.call(this)||this;_this.languages=[];_this.onChange=null;_this._elem.css({maxHeight:'176px',overflowY:'auto'}).sortable({items:'.lang-item',tolerance:'pointer',update:function(e,ui){var i,lang,code=ui.item.data('langs-code'),index=ui.item.index();for(i=0;i<_this.languages.length;i++){if(_this.languages[i].lang.code===code){lang=_this.languages[i];_this.languages.splice(i,1);_this.languages.splice(index,0,lang);break}}
if(typeof _this.onChange==="function"){_this.onChange()}
_this.onValueChanged()}});return _this}
LangListControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFun_3=data.change;this.onChange=function(){return changeFun_3.call(_this,fields)}}};LangListControl.prototype.removeAllItems=function(){this._elem.empty();this.languages.splice(0,this.languages.length)};LangListControl.prototype.addLanguage=function(lang){var _this=this;var item=new LangListItem(lang,function(it){return _this.onStar(it)},function(it){return _this.onRemove(it)});this.languages.push(item);this._elem.append(item.elem)};LangListControl.prototype.onStar=function(lang){for(var _i=0,_a=this.languages;_i<_a.length;_i++){var ln=_a[_i];ln.setDefault(ln===lang)}
this.handleChange()};LangListControl.prototype.onRemove=function(lang){if(this.languages.length<2){alert(__("Last language cannot be removed"));return}
var idx=this.languages.indexOf(lang);if(idx>=0)
this.languages.splice(idx,1);lang.elem.remove();if(lang.lang.isDefault)
this.languages[0].setDefault(!0);BuilderEvent_3.GlobalEvents.triggerEvent("languages.update",new BuilderEvent_3.LanguagesUpdateBuilderEvent(!1,!0));this.handleChange()};LangListControl.prototype.handleChange=function(){if(typeof this.onChange==="function"){this.onChange()}
this.onValueChanged()};return LangListControl}(UIComponent_32.UIComponent))});define("js/blog/BlogLayout",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogLayout=void 0;var BlogLayout=exports.BlogLayout=(function(){function BlogLayout(){}
BlogLayout.getAvailableTypes=function(){return[this.TYPE_THUMBS,this.TYPE_LIST,this.TYPE_ONETHREE]};BlogLayout.TYPE_THUMBS='thumbs';BlogLayout.TYPE_LIST='list';BlogLayout.TYPE_ONETHREE='onethree';return BlogLayout}())});define("js/blog/BlogPost",["require","exports","js/Serializable"],function(require,exports,Serializable_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogPost=void 0;var BlogPost=exports.BlogPost=(function(_super){__extends(BlogPost,_super);function BlogPost(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id='';_this.title='';_this.text='';_this.shortText='';_this.state='draft';_this.categories=[];_this.fbComments=!1;_this.seoTitle='';_this.seoDescription='';_this.seoAlias='';_this.deserialize(data);if((!_this.dateDate||!_this.dateTime)&&_this.createdDate&&/(\d{4}\-\d{2}\-\d{2})\ (\d{2}:\d{2})/.test(_this.createdDate)){_this.dateDate=RegExp.$1;_this.dateTime=RegExp.$2}
return _this}
BlogPost.getAvailableStates=function(){return[BlogPost.STATE_ACTIVE,BlogPost.STATE_DRAFT]};BlogPost.STATE_ACTIVE='active';BlogPost.STATE_DRAFT='draft';BlogPost.STATE_DELETED='deleted';return BlogPost}(Serializable_1.Serializable))});define("js/blog/BlogCategory",["require","exports","js/Serializable"],function(require,exports,Serializable_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogCategory=void 0;var BlogCategory=(function(_super){__extends(BlogCategory,_super);function BlogCategory(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id='';_this.parentId=null;_this.name='';_this.deserialize(data);return _this}
return BlogCategory}(Serializable_2.Serializable));exports.BlogCategory=BlogCategory});define("js/blog/BlogStyles",["require","exports","jquery","js/Serializable","js/TextControl"],function(require,exports,jquery_50,Serializable_3,TextControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogStyles=void 0;var BlogStyles=(function(_super){__extends(BlogStyles,_super);function BlogStyles(data){var _this=_super.call(this)||this;var i,defStyle={},styles=wb_builder.site.styles;for(i=0;i<styles.length;i++){if(styles[i].selector==='.wb-stl-normal'){var textStyle=styles[i].sys.text||{};defStyle=TextControl_1.TextControl.buildCss({color:textStyle.color,size:textStyle.size,font:textStyle.font,style:{}})}}
if(data.title){_this.title=data.title}else{_this.title=jquery_50.default.extend(!0,{},defStyle);_this.title.style.bold=!0;_this.title=TextControl_1.TextControl.buildCss(_this.title)}
_this.text=data.text?data.text:defStyle;_this.background=data.background?data.background:'transparent';return _this}
return BlogStyles}(Serializable_3.Serializable));exports.BlogStyles=BlogStyles});define("js/blog/BlogService",["require","exports","jquery"],function(require,exports,jquery_51){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogService=void 0;var defaultErrorCode=-1;var defaultErrorMessage='An error occurred. Please try again later.';var defaultErrorCallback=function(errorCallback){if(errorCallback)
errorCallback({code:defaultErrorCode,message:defaultErrorMessage})};var BlogService=exports.BlogService=(function(){function BlogService(isUsedForCompositions){this.isUsedForCompositions=isUsedForCompositions}
BlogService.prototype.init=function(wbConfig){this.wbConfig=wbConfig};BlogService.prototype.getUrl=function(method,params){var uri='blog/'+method;if(this.isUsedForCompositions){if(!params)
params={};params.comp='1'}
return this.wbConfig?this.wbConfig.getLnUrl(uri,params):uri};BlogService.prototype.cancelRequests=function(){for(var key in BlogService.activeRequests){if(!BlogService.activeRequests.hasOwnProperty(key))
continue;BlogService.activeRequests[key].xhr.abort();delete BlogService.activeRequests[key]}};BlogService.prototype.loadPosts=function(state,callback,cpp,page,category){var key='load-posts:'+state+':'+cpp+':'+page+':'+category;if(BlogService.activeRequests.hasOwnProperty(key)){if(callback)
BlogService.activeRequests[key].callbacks.push(callback);return}
var url=this.getUrl('load-posts',{state:state?state:'',cpp:cpp?(''+cpp):'',page:page?(''+page):'',category:category?(''+category):''});BlogService.activeRequests[key]={xhr:jquery_51.default.ajax({url:url,type:"get",dataType:"json",async:!0,success:function(data){if(!BlogService.activeRequests.hasOwnProperty(key))
return;if(data.error){for(var _i=0,_a=BlogService.activeRequests[key].callbacks;_i<_a.length;_i++){var callback_3=_a[_i];if(callback_3.error)
callback_3.error(data.error);}}else if(data.ok&&data.data){for(var _b=0,_c=BlogService.activeRequests[key].callbacks;_b<_c.length;_b++){var callback_4=_c[_b];if(callback_4.success)
callback_4.success(data.data);}}},error:function(){if(!BlogService.activeRequests.hasOwnProperty(key))
return;for(var _i=0,_a=BlogService.activeRequests[key].callbacks;_i<_a.length;_i++){var callback_5=_a[_i];if(callback_5.error)
defaultErrorCallback(callback_5.error);}},complete:function(){if(!BlogService.activeRequests.hasOwnProperty(key))
return;for(var _i=0,_a=BlogService.activeRequests[key].callbacks;_i<_a.length;_i++){var callback_6=_a[_i];if(callback_6.complete)
callback_6.complete();}
delete BlogService.activeRequests[key]}}),callbacks:callback?[callback]:[]}};BlogService.prototype.saveCategories=function(categories,callback){jquery_51.default.ajax({url:this.getUrl('save-categories'),method:'POST',dataType:'json',contentType:'application/json; charset=utf-8',data:JSON.stringify({categories:categories}),success:function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok){if(callback&&callback.success)
callback.success();}},error:function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);},complete:function(){if(callback&&callback.complete)
callback.complete();}})};BlogService.prototype.saveStyles=function(styles,callback){jquery_51.default.ajax({url:this.getUrl('save-styles'),method:'POST',dataType:'json',contentType:'application/json; charset=utf-8',data:JSON.stringify({styles:styles}),success:function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok){if(callback&&callback.success)
callback.success();}},error:function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);},complete:function(){if(callback&&callback.complete)
callback.complete();}})};BlogService.prototype.getTotals=function(callback){jquery_51.default.getJSON(this.getUrl('get-totals'),function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok&&data.totals){if(callback&&callback.success)
callback.success(data.totals);}}).fail(function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);}).done(function(){if(callback&&callback.complete)
callback.complete();})};BlogService.prototype.updatePostsState=function(states,callback){jquery_51.default.ajax({url:this.getUrl('update-posts-state'),method:'POST',dataType:'json',contentType:'application/json; charset=utf-8',data:JSON.stringify({states:states}),success:function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok){if(callback&&callback.success)
callback.success();}},error:function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);},complete:function(){if(callback&&callback.complete)
callback.complete();}})};BlogService.prototype.savePost=function(post,callback){jquery_51.default.ajax({url:this.getUrl('save-post'),method:'POST',dataType:'json',contentType:'application/json; charset=utf-8',data:JSON.stringify(post.serialize()),success:function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok&&data.id){if(callback&&callback.success)
callback.success(data.id);}},error:function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);},complete:function(){if(callback&&callback.complete)
callback.complete();}})};BlogService.prototype.loadData=function(callback){jquery_51.default.getJSON(this.getUrl('load-data'),function(data){if(data.error){if(callback&&callback.error)
callback.error(data.error);}else if(data.ok&&data.data){if(callback&&callback.success)
callback.success(data.data);}
if(callback&&callback.complete)
callback.complete();}).fail(function(){if(callback&&callback.error)
defaultErrorCallback(callback.error);}).done(function(){if(callback&&callback.complete)
callback.complete();})};BlogService.mergeCallbacks=function(callbackA,callbackB){if(callbackB.success){if(callbackA.success){var tmp_1=callbackA.success;callbackA.success=function(){tmp_1(arguments);callbackB.success.apply(this,arguments)}}else{callbackA.success=callbackB.success}}
if(callbackB.error){if(callbackA.error){var tmp_2=callbackA.error;callbackA.error=function(error){tmp_2(error);callbackB.error.call(this,error)}}else{callbackA.error=callbackB.error}}
if(callbackB.complete){if(callbackA.complete){var tmp_3=callbackA.complete;callbackA.complete=function(){tmp_3();callbackB.complete.call(this)}}else{callbackA.complete=callbackB.complete}}
return callbackA};BlogService.activeRequests={};return BlogService}())});define("js/WYSIWYGControl",["require","exports","js/UIComponent","js/BuilderEvent","jquery","js/core/BuilderConfig","CKEditor"],function(require,exports,UIComponent_33,BuilderEvent_4,jquery_52,BuilderConfig_5,CKEditor_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.WYSIWYGControl=void 0;var WYSIWYGControl=exports.WYSIWYGControl=(function(_super){__extends(WYSIWYGControl,_super);function WYSIWYGControl(tag){var _this=_super.call(this,(tag==='%inherit%')?tag:'div')||this;_this.value="";_this._editor=null;_this.editorChosenLanguage=null;_this.onChangeFunc=null;_this.onBlur=null;_this.changeFunc=null;_this.darkMode=!1;WYSIWYGControl.controls.push(_this);return _this}
WYSIWYGControl.getAll=function(){return WYSIWYGControl.controls};WYSIWYGControl.reloadAll=function(){for(var _i=0,_a=WYSIWYGControl.controls;_i<_a.length;_i++){var control=_a[_i];control.refreshEditor()}};WYSIWYGControl.prototype.buildInit=function(data,fields){var _this=this;this._contentId="wb_wysiwyg_control_"+(WYSIWYGControl.nextId++);this._elem.css({position:"relative",lineHeight:"normal",height:data.height?data.height:83});this.textDiv=(0,jquery_52.default)("<div class=\"wb-wysiwyg-control\">");if(BuilderConfig_5.wbConfig.locale==='ar_AE'||BuilderConfig_5.wbConfig.locale==='he_IL'||BuilderConfig_5.wbConfig.locale==='fa_IR')
this.textDiv.addClass("rtl");this.textDiv.attr("id",this._contentId);this._elem.append(this.textDiv);this.editorChosenLanguage=wb_builder.site.currSelLang;if(data.hasOwnProperty("value")&&data.value)
this.setValue(data.value);BuilderEvent_4.GlobalEvents.on("languages.update",function(){var exists=!1,lang;for(var i=0;(lang=wb_builder.site.languages[i]);i++){if(lang.code===_this.editorChosenLanguage){exists=!0;break}}
if(!exists){_this.setValue(_this.textDiv.html(),_this.editorChosenLanguage);_this.onSwitchLanguage(wb_builder.site.currSelLang||"",!0);_this.editorChosenLanguage=wb_builder.site.currSelLang}
setTimeout(_this.initEditor.bind(_this),10)});var thisClass=this;this._editorConfig={toolbar:[['Bold','Italic','Underline','RemoveFormat'],['WBLink','Unlink'],['Languages']],on:{selectionChange:function(e){if(e.data.selection&&e.data.selection.getSelectedText()){}},afterCommandExec:function(){},focus:function(){thisClass._editor.wbTextAreaInstance=thisClass;var el=(0,jquery_52.default)("#cke_"+thisClass._contentId);el.addClass('wb-ctrl-in-dialog')},change:function(){if(_this.onChangeFunc)
_this.onChangeFunc();},blur:function(){if(_this.onBlur)
_this.onBlur();}}};if(data.hasOwnProperty("config"))
this._editorConfig=jquery_52.default.extend(this._editorConfig,data.config);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChangeFunc=function(){func.call(el,fields)}})(this,data.change)}
if(('blur' in data)&&(typeof data.blur==='function')){(function(el,func){_this.onBlur=function(){func.call(el,fields)}})(this,data.blur)}
var a=jquery_52.default;var b=(a.hasOwnProperty("browser")?a.browser:{msie:!1});if(b.msie){var html=this.textDiv.html();html=html.replace(/(<p[^>]*>)&nbsp;(<\/p>)/ig,'$1\xad$2');this.textDiv.html(html)}
this.updateStyle();this.initEditor()};WYSIWYGControl.prototype.changeLanguage=function(lang){this.editorChosenLanguage=lang;this.initEditor()};WYSIWYGControl.prototype.updateStyle=function(){if(this._enabled){this.textDiv.attr("contenteditable","true");this.textDiv.removeClass("disabled")}else{this.textDiv.removeAttr("contenteditable");this.textDiv.addClass("disabled")}};WYSIWYGControl.prototype.onChange=function(func){this.changeFunc=func;return this};WYSIWYGControl.prototype.initEditor=function(){var _this=this;if((0,jquery_52.default)("#"+this._contentId).length){if(this._editor){this._editor.focus();this._editor.destroy();this._editor=null}
if(this._enabled){if(!this._editorConfig.hasOwnProperty("stylesSet")){var styles=CKEditor_1.CKEDITOR.stylesSet.get("wb_site_styles");if(!styles){styles=CKEditor_1.CKEDITOR.stylesSet.add("wb_site_styles",[])}
styles.splice(0,styles.length);for(var i=0;i<wb_builder.site.styles.length;i++){var s=wb_builder.site.styles[i];var selector=/^\.([^\ ]+)(?:\ |$)/i.exec(s.selector);if(!selector)
continue;styles.push({name:s.name,element:(s.tag?s.tag:"span"),attributes:{"class":selector[1]}})}
this._editorConfig.stylesSet='wb_site_styles'}
this._editor=CKEditor_1.CKEDITOR.inline(this._contentId,this._editorConfig);this._editor.on('blur',function(){if(_this.changeFunc)
_this.changeFunc.call(_this);_this.onValueChanged()})}}else{clearTimeout(this._timeout);this._timeout=setTimeout(function(){return _this.initEditor()},1000)}};WYSIWYGControl.prototype.updateValue=function(html,langCode){var i,lang,newValue;if(typeof html==="object"){if(html){var keys=Object.keys(html);if(keys.length===1&&(keys[0]===''||keys[0]==='null')){html=html[keys[0]]}}
this.value=(html===null)?"":html}else{langCode=langCode||this.editorChosenLanguage||wb_builder.site.currSelLang||"";if(typeof this.value==='string'){if(wb_builder.site.languages.length){newValue={};for(i=0;(lang=wb_builder.site.languages[i]);i++){if(lang.code===langCode)
newValue[lang.code]=html;else if(lang.code===wb_builder.site.getLastDefLang())
newValue[lang.code]=this.value;else{}}
this.value=newValue}else{this.value=html}}else if(typeof this.value==='object'){if(wb_builder.site.languages.length){newValue={};for(i=0;(lang=wb_builder.site.languages[i]);i++){if(this.value&&(lang.code in this.value))
newValue[lang.code]=this.value[lang.code]}
newValue[langCode||'en']=html}else{newValue=html}
this.value=newValue}}
return this};WYSIWYGControl.prototype.refreshEditor=function(){this._editorConfig.stylesSet=null;delete this._editorConfig.stylesSet;this.initEditor()};WYSIWYGControl.prototype.setValue=function(html,langCode){this.updateValue(html,langCode);var htmlVal;if(html===null)
htmlVal="";else if(typeof html==="object"){htmlVal=html[langCode||this.editorChosenLanguage||wb_builder.site.currSelLang||""]||"";if(!htmlVal&&Object.keys(html).length>0){htmlVal=html[Object.keys(html)[0]]}}else htmlVal=html;if(this._editor)
this._editor.setData(htmlVal);else{var wrapper=(0,jquery_52.default)('<div>').html(htmlVal);wrapper.find('script').each(function(){(0,jquery_52.default)(this).replaceWith('<!--{cke_protected}'+this.outerHTML+'-->')});htmlVal=wrapper.html();this.textDiv.html(htmlVal)}
return this};WYSIWYGControl.prototype.getValue=function(){var html;if(this._editor)
html=this._editor.getData();else html=this.textDiv.html();return this.updateValue(html).value};WYSIWYGControl.prototype.onSwitchLanguage=function(langCode,fromEditor){if(!this._editor)
return;this._editor.setData(((typeof this.value==="string")?this.value:this.value[langCode])||"")};WYSIWYGControl.prototype.setEnabled=function(enabled){var wasEnabled=this._enabled;_super.prototype.setEnabled.call(this,enabled);if(wasEnabled!=enabled){this.initEditor();this.updateStyle()}};WYSIWYGControl.convertPlainTextToHtml=function(text){if(text===null)
return"";if(typeof text==="object"){for(var i in text){if(text.hasOwnProperty(i))
text[i]=WYSIWYGControl.convertPlainTextToHtml(text[i]);}
return text}
text=""+text;if(/<(p|u|i|a|b|em|hr|br|ul|li|tr|td|th|h[1-6]|div|span|table|strong)\b.*>/i.test(text))
return text;var outText="<p>";var newLineCount=0;var c;for(var i=0,il=text.length-1;i<=il;i++){c=text.charAt(i);if(c=="\r")
continue;if(c=="\n"){newLineCount++;if(newLineCount>1){outText+="</p>\n<p>";newLineCount=0}}else{if(newLineCount){outText+="<br />\n";newLineCount=0}
outText+=c}}
if(newLineCount)
outText+="<br />\n";outText+="</p>";if(outText=="<p></p>")
outText="";return outText};WYSIWYGControl.prototype.setDarkMode=function(value){this.darkMode=value;this._elem.css('background',value?'#484848':'')};WYSIWYGControl.prototype.getDarkMode=function(){return this.darkMode};WYSIWYGControl.nextId=0;WYSIWYGControl.controls=[];return WYSIWYGControl}(UIComponent_33.UIComponent))});define("js/element/OrderingHandle",["require","exports","js/util/EventUtil","jquery"],function(require,exports,EventUtil_4,jquery_53){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OrderingHandle=void 0;var commonOnUpInit=!1;var startHandle=null;var marker;var longHoverTarget=null;var longHoverTimeout=0;var TOUCH_PICKUP_TIME=1000;var touchPickupEffectElem=null;var touchPickupActivationTimer=0;var touchPickupStartTime=0;var lastMoveEvent=null;function unbindEventListeners(e){if(e.type==="mousedown"||e.type==="mouseup"||e.type==="mousemove"){document.body.removeEventListener("mousemove",commonOnMove,{capture:!0});document.body.removeEventListener("mouseup",commonOnUp,{capture:!0})}else{document.body.removeEventListener("touchmove",commonOnMove,{capture:!0});document.body.removeEventListener("touchend",commonOnUp,{capture:!0});document.body.removeEventListener("touchcancel",commonOnUp,{capture:!0})}}
function stopPickupEffect(){if(touchPickupActivationTimer){clearTimeout(touchPickupActivationTimer);touchPickupActivationTimer=0}
if(touchPickupEffectElem){touchPickupEffectElem.remove();touchPickupEffectElem=null}}
function startPickupEffect(e){stopPickupEffect();if(!startHandle)
return;lastMoveEvent=null;touchPickupActivationTimer=setTimeout(function(){stopPickupEffect();if(startHandle&&(lastMoveEvent||startHandle.startEvent))
commonOnMove(lastMoveEvent||startHandle.startEvent,!0);},TOUCH_PICKUP_TIME);touchPickupEffectElem=(0,jquery_53.default)('<div class="wb-touch-pickup-effect wb-ethereal"><div class="wb-tpe1"></div><div class="wb-tpe2"></div></div>');touchPickupEffectElem.css((0,EventUtil_4.posFromEvent)(e,!0));(0,jquery_53.default)(document.body).append(touchPickupEffectElem)}
var edgeScrollingTimeout=0;var edgeScrollingLastTime=0;var edgeScrollSpeed=12;function requestSmoothTimeout(callback){return setTimeout(callback,50)}
function clearSmoothTimeout(id){clearTimeout(id)}
function edgeScrollingAnimationHandler(){edgeScrollingTimeout=0;if(!startHandle||!lastMoveEvent)
return;var vBounds=startHandle.viewportBounds;var _a=(0,EventUtil_4.posFromEvent)(lastMoveEvent),px=_a.left,py=_a.top;var delta=(py-window.scrollY)-(vBounds.top+30);if(delta>0){delta=(py-window.scrollY)-(vBounds.top+vBounds.height-30);if(delta<0)
delta=0}
if(delta){var timeDelta=(Date.now()-edgeScrollingLastTime)/1000;startHandle.scrollContainer(delta*timeDelta*edgeScrollSpeed)}
edgeScrollingLastTime=Date.now();edgeScrollingTimeout=requestSmoothTimeout(edgeScrollingAnimationHandler)}
function startEdgeScrolling(){if(!edgeScrollingTimeout){edgeScrollingLastTime=Date.now();edgeScrollingTimeout=requestSmoothTimeout(edgeScrollingAnimationHandler)}}
function stopEdgeScrolling(){if(edgeScrollingTimeout){clearSmoothTimeout(edgeScrollingTimeout);edgeScrollingTimeout=0}}
function commonOnMove(e,forceStart){var _a;if(forceStart===void 0){forceStart=!1}
if(!startHandle)
return;lastMoveEvent=e;if(!forceStart&&(e.type==="touchmove"||e.type==="touchstart")&&!startHandle.moveStarted&&Date.now()-touchPickupStartTime<TOUCH_PICKUP_TIME){if(startHandle.hasUserStartedDragging(e)){stopPickupEffect();startHandle.touchScrolled=!0;startHandle.cancel()}
return}
stopPickupEffect();e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();if(!startHandle.moveStarted){startHandle.start(e,forceStart);if(!forceStart)
return}
if(!startHandle.cachedItem||!startHandle.helper){startHandle.cancel();return}
var item=startHandle.cachedItem.item;var _b=(0,EventUtil_4.posFromEvent)(e),px=_b.left,py=_b.top;startHandle.helper.css({left:px-startHandle.itemOffset.left,top:py-startHandle.itemOffset.top});var vBounds=startHandle.viewportBounds;var vBoundsParent;vBoundsParent=(_a=startHandle.container)===null||_a===void 0?void 0:_a.getParentViewport();if(vBoundsParent&&vBoundsParent.height<vBounds.height){vBounds=vBoundsParent}
startEdgeScrolling();var foundAny=!1;for(var _i=0,_c=startHandle.affectedItems;_i<_c.length;_i++){var _d=_c[_i],oe=_d.item,bounds=_d.bounds;var parent_13=oe.getParent();if(px<bounds.left||px>bounds.left+bounds.width||py<bounds.top||py>bounds.top+bounds.height)
continue;var after=void 0,inside=void 0;if(!1){after=px>(bounds.left+(bounds.width/2));inside=px>(bounds.left+(bounds.width*0.2))&&px<(bounds.left+(bounds.width*0.8))}else{after=py>(bounds.top+(bounds.height/2));inside=py>(bounds.top+(bounds.height*0.2))&&py<(bounds.top+(bounds.height*0.8))}
if(longHoverTimeout){clearTimeout(longHoverTimeout);longHoverTimeout=0;longHoverTarget=null}
if(inside&&oe!==item&&oe.canAcceptItem(item)){startHandle.setTarget(item,oe,after,inside);marker.update(bounds,after,inside);longHoverTarget=oe.elem.get(0);longHoverTimeout=setTimeout(onLongHover,500);foundAny=!0;break}else if(parent_13&&parent_13.canAcceptItem(item,oe,after)){startHandle.setTarget(item,oe,after);marker.update(bounds,after,!1);foundAny=!0;break}}
if(!foundAny){startHandle.setTarget(null);marker.hide()}
startHandle.setHelperOk(foundAny);if(startHandle.onChange)
startHandle.onChange();}
function commonOnUp(e){unbindEventListeners(e);stopPickupEffect();stopEdgeScrolling();if(longHoverTimeout){clearTimeout(longHoverTimeout);longHoverTimeout=0;longHoverTarget=null}
if(!startHandle)
return;var lt=startHandle.lastTarget;if(lt.item&&lt.refItem){var parent_14=lt.refItem.getParent();if(lt.inside){lt.refItem.dropItem(lt.item)}else if(parent_14){parent_14.dropItem(lt.item,lt.refItem,lt.after)}}
if(startHandle.onChange)
startHandle.onChange();startHandle.cancel()}
function onLongHover(){if(longHoverTarget){(0,jquery_53.default)(longHoverTarget).trigger("longhover");longHoverTarget=null}
if(startHandle)
startHandle.updateBounds();longHoverTimeout=0}
var OrderableMarker=(function(){function OrderableMarker(){this.inside=!1;this.elem=(0,jquery_53.default)('<div>').addClass('wb-ordering-handle-marker');this.hidden=!1;this.hide()}
OrderableMarker.prototype.update=function(bounds,after,inside){var top=bounds.top-5;if(inside)
top+=5;else if(after)
top+=bounds.height;this.elem.css({top:top+'px',left:(bounds.left-4)+'px',width:(bounds.width+8)+'px',height:(inside?bounds.height+'px':''),});if(this.inside!=inside){this.inside=inside;if(inside)
this.elem.addClass('wb-ordering-handle-marker-inside');else this.elem.removeClass('wb-ordering-handle-marker-inside')}
if(this.hidden){this.hidden=!1;this.elem.show()}};OrderableMarker.prototype.hide=function(){if(this.hidden)
return;this.hidden=!0;this.elem.hide()};return OrderableMarker}());var OrderingHandle=(function(){function OrderingHandle(item,builder,onChange){if(onChange===void 0){onChange=null}
this.item=item;this.onChange=onChange;this.moveStarted=!1;this.dragged=!1;this.touchScrolled=!1;this.startEvent=null;this.container=null;this.cachedItem=null;this.affectedItems=[];this.itemOffset={left:0,top:0};this.helper=null;this.helperOk=!1;this.lastTarget={item:null,refItem:null,after:!1,inside:!1};if(!commonOnUpInit){commonOnUpInit=!0;var doc=(0,jquery_53.default)(document.body);marker=new OrderableMarker();doc.append(marker.elem)}}
OrderingHandle.prototype.bindToElement=function(elem){var _this=this;elem.on('mousedown touchstart',function(e){return _this.onDown(e)})};OrderingHandle.prototype.triggerDown=function(e){this.onDown(e)};OrderingHandle.prototype.setTarget=function(item,refItem,after,inside){if(refItem===void 0){refItem=null}
if(after===void 0){after=!1}
if(inside===void 0){inside=!1}
this.lastTarget.item=item;this.lastTarget.refItem=refItem;this.lastTarget.after=after;this.lastTarget.inside=inside};OrderingHandle.prototype.setHelperOk=function(ok){if(!this.helper||ok==this.helperOk)
return;this.helperOk=ok;if(ok)
this.helper.removeClass('wb-ordering-handle-helper-no');else this.helper.addClass('wb-ordering-handle-helper-no')};OrderingHandle.prototype.setContainer=function(container){this.container=container};OrderingHandle.prototype.onDown=function(e){if(!this.item)
return;this.moveStarted=!1;this.dragged=!1;this.touchScrolled=!1;this.startEvent=e;startHandle=this;touchPickupStartTime=Date.now();if(e.type==="mousedown"){document.body.addEventListener("mousemove",commonOnMove,{capture:!0,passive:!1});document.body.addEventListener("mouseup",commonOnUp,{capture:!0,passive:!1});e.stopImmediatePropagation();e.stopPropagation();e.preventDefault()}else{document.body.addEventListener("touchmove",commonOnMove,{capture:!0,passive:!1});document.body.addEventListener("touchend",commonOnUp,{capture:!0,passive:!1});document.body.addEventListener("touchcancel",commonOnUp,{capture:!0,passive:!1});if(this.item.canDragItem())
startPickupEffect(e);}
return!1};OrderingHandle.prototype.cancel=function(){this.moveStarted=!1;this.startEvent=null;this.setTarget(null);if(startHandle){if(startHandle.helper){startHandle.helper.remove();startHandle.helper=null}}
startHandle=null;marker.hide()};OrderingHandle.prototype.scrollContainer=function(off){if(!this.container)
return;if(this.container.scrollItemsViewport(off)){this.updateBounds()}};OrderingHandle.prototype.updateBounds=function(){for(var _i=0,_a=this.affectedItems;_i<_a.length;_i++){var item=_a[_i];item.bounds=item.item.getBounds()}};OrderingHandle.prototype.hasUserStartedDragging=function(e){if(!this.startEvent)
return!1;return(0,EventUtil_4.moveEventDiff)(this.startEvent,e)>4};OrderingHandle.prototype.start=function(e,forceStart){var _a;if(forceStart===void 0){forceStart=!1}
if(!this.startEvent||!startHandle||!this.container||!this.item.canDragItem()){this.cancel();return}
if(!forceStart&&!this.hasUserStartedDragging(e))
return;this.moveStarted=!0;this.dragged=!0;this.cachedItem={item:this.item,bounds:this.item.getBounds(),};this.viewportBounds=this.container.getItemsViewport();this.affectedItems=[];for(var _i=0,_b=this.container.getAllOrderableItems(this.item);_i<_b.length;_i++){var item=_b[_i];this.affectedItems.push({item:item,bounds:item.getBounds(),})}(_a=(0,EventUtil_4.posFromEvent)(this.startEvent),this.itemOffset.left=_a.left,this.itemOffset.top=_a.top);this.itemOffset.left-=this.cachedItem.bounds.left;this.itemOffset.top-=this.cachedItem.bounds.top;this.helper=this.item.getDragHelper().addClass('wb-ordering-handle-helper').css({width:this.cachedItem.bounds.width,height:this.cachedItem.bounds.height,}).detach().appendTo(document.body);this.helperOk=!0};return OrderingHandle}());exports.OrderingHandle=OrderingHandle});define("js/ui/TreeView",["require","exports","js/element/OrderingHandle","js/ContextMenu","jquery","js/util/EventUtil","js/UIComponent"],function(require,exports,OrderingHandle_1,ContextMenu_1,jquery_54,EventUtil_5,UIComponent_34){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TreeView=exports.TreeViewItem=exports.MetaIcon=void 0;var MetaIcon=(function(){function MetaIcon(id,icon,title,color){if(title===void 0){title=null}
if(color===void 0){color=null}
this.color=null;this.title=null;this.visible=!0;this.id=id;this.elem=(0,jquery_54.default)('<i class="wb-tree-view-meta-icon">');this.setIcon(icon);this.setTitle(title);this.setColor(color)}
MetaIcon.prototype.setIcon=function(icon){if(this.icon===icon)
return this;this.icon=icon;this.elem.attr("class","wb-tree-view-meta-icon "+icon);return this};MetaIcon.prototype.getIcon=function(){return this.icon};MetaIcon.prototype.setColor=function(color){if(this.color===color)
return this;this.color=color;this.elem.css("color",color||"");return this};MetaIcon.prototype.getColor=function(){return this.color};MetaIcon.prototype.setTitle=function(title){if(this.title===title)
return this;this.title=title;if(title===null)
this.elem.removeAttr("title");else this.elem.attr("title",title);return this};MetaIcon.prototype.getTitle=function(){return this.title};MetaIcon.prototype.setVisible=function(visible){if(this.visible===visible)
return this;this.visible=visible;if(visible)
this.elem.removeClass("hidden");else this.elem.addClass("hidden");return this};MetaIcon.prototype.getVisible=function(){return this.visible};return MetaIcon}());exports.MetaIcon=MetaIcon;var TreeViewItem=(function(){function TreeViewItem(tree){var _this=this;this.collapseHandleElem=null;this.checkboxElem=null;this.iconExtraElem=null;this.deleteElem=null;this.duplicateElem=null;this.metaElemDetached=!0;this.metaTextElem=null;this.childrenContainerElem=null;this.icon=null;this.iconExtra=null;this.name="";this.color=null;this.font=null;this.bold=!1;this.italic=!1;this.title="";this.metaText=null;this.metaIcons=[];this.collapsible=!1;this.collapsed=!1;this.selectable=!0;this.selected=!1;this.disabled=!1;this.draggable=!0;this.deletable=!0;this.canDuplicate=!0;this.separator=!1;this.checked=!1;this.parent=null;this.children=[];this.contextMenu=null;this.data=null;this.tree=tree;this.orderingHandle=new OrderingHandle_1.OrderingHandle(this,wb_builder);this.elem=(0,jquery_54.default)('<div class="wb-tree-view-item wb-tree-view-item-no-icon"></div>').data("item",this);this.contentElem=(0,jquery_54.default)('<div class="wb-tree-view-item-content"></div>');this.outlineElem=(0,jquery_54.default)('<div class="wb-tree-view-item-outline"></div>');this.elem.append(this.contentElem);if(this.collapsible&&this.tree.getShowCollapseButtons())
this.createCollapseHandleElem();this.iconElem=(0,jquery_54.default)('<i></i>');this.nameElem=(0,jquery_54.default)('<span class="wb-tree-view-item-name"></span>');this.metaElem=(0,jquery_54.default)('<span class="wb-tree-view-item-meta"></span>');this.contentElem.append(this.outlineElem);if(this.deletable&&this.tree.getShowDeleteButtons())
this.createDeleteButtonElem();if(this.canDuplicate&&this.tree.getShowDuplicateButtons())
this.createDuplicateButtonElem();if(this.tree.getShowCheckboxes()){this.checkboxElem=(0,jquery_54.default)('<input type="checkbox" class="wb-tree-view-item-checkbox" />').on("click touchstart touchend",function(e){e.stopImmediatePropagation();e.preventDefault();var checked=!_this.checked;if(e.type!=="touchend"&&_this.tree.onItemCheckStateChange(_this,checked))
_this.setChecked(checked);});this.outlineElem.append(this.checkboxElem)}
this.outlineElem.append(this.iconElem,this.nameElem);this.orderingHandle.setContainer(this.tree);this.updateMaxNameWidth()}
TreeViewItem.prototype.getDragHelper=function(){return this.contentElem.clone()};TreeViewItem.prototype.onDeleteRequest=function(){this.tree.onDeleteRequest(this)};TreeViewItem.prototype.onDuplicateRequest=function(){this.tree.onDuplicateRequest(this)};TreeViewItem.prototype.onCollapseItem=function(){this.tree.onCollapseItem(this)};TreeViewItem.prototype.setContextMenu=function(menu,disposeOfPreviousMenu){if(disposeOfPreviousMenu===void 0){disposeOfPreviousMenu=!0}
if(this.contextMenu){if(this.contextMenu===menu)
return this;this.contextMenu.pasiveUnbind(this.contentElem);if(disposeOfPreviousMenu)
this.contextMenu.dispose();}
this.contextMenu=menu;if(menu)
menu.pasiveBind(this.contentElem);return this};TreeViewItem.prototype.getContextMenu=function(){return this.contextMenu};TreeViewItem.prototype.getBounds=function(){var off=this.contentElem.offset();return{left:off.left,top:off.top,width:this.contentElem.width(),height:this.contentElem.height(),}};TreeViewItem.prototype.getParent=function(){return this.parent};TreeViewItem.prototype.isRoot=function(){return!this.parent};TreeViewItem.prototype.setParent=function(parent){if(this.parent===parent)
return this;if(parent===null){if(this.parent)
this.parent.removeChild(this);this.parent=null}else parent.addChild(this);this.parent=parent;return this};TreeViewItem.prototype.addChild=function(child,refChild,after){if(after===void 0){after=!1}
var newIdx=this.children.length;if(refChild!==null&&typeof refChild!=="undefined"){if(typeof refChild==="number"){if(refChild<0){newIdx=0;after=!1;refChild=this.children.length?this.children[0]:null}else if(refChild>=newIdx){refChild=null}else{newIdx=refChild+(after?1:0);refChild=this.children[refChild]}}else{var refIdx=this.children.indexOf(refChild);if(refIdx>=0)
newIdx=after?refIdx+1:refIdx}}
if(child.parent===this){var idx=this.children.indexOf(child);if(newIdx===idx)
return this;if(newIdx>idx)
newIdx--;this.children.splice(idx,1);child.elem.detach()}else if(child.parent)
child.parent.removeChild(child);child.parent=this;if(newIdx<0)
newIdx=0;if(newIdx>=this.children.length){this.children.push(child);this.getChildrenContainerElem().append(child.elem)}else{this.children.splice(newIdx,0,child);if(refChild){if(after)
child.elem.insertAfter(refChild.elem);else child.elem.insertBefore(refChild.elem)}}
if(this.collapseHandleElem)
this.collapseHandleElem.removeClass("no-items");this.tree.onItemCountChanged();return this};TreeViewItem.prototype.canDragItem=function(){return!this.separator&&this.draggable&&this.tree.getAllowDraggingItems()&&!this.tree.isSearching()};TreeViewItem.prototype.canAcceptItem=function(item,refItem,after){if(after===void 0){after=!1}
return!this.separator&&this.tree.canAcceptItem(item,this,refItem||null,after)};TreeViewItem.prototype.dropItem=function(child,refItem,after){if(after===void 0){after=!1}
this.addChild(child,refItem,after);this.tree.onDropItem(child,this,refItem||null,after);return this};TreeViewItem.prototype.removeChild=function(child){var idx=this.children.indexOf(child);if(idx<0)
return this;this.children.splice(idx,1);if(this.children.length===0&&this.collapseHandleElem)
this.collapseHandleElem.addClass("no-items");child.parent=null;child.elem.detach();this.tree.onItemCountChanged();if(!this.isRoot()&&!this.children.length&&this.childrenContainerElem){this.childrenContainerElem.remove();this.childrenContainerElem=null}
return this};TreeViewItem.prototype.removeAllChildren=function(){if(!this.children.length)
return this;for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];child.parent=null;child.elem.detach()}
this.children=[];if(this.children.length===0&&this.collapseHandleElem)
this.collapseHandleElem.addClass("no-items");this.tree.onItemCountChanged();if(!this.isRoot()&&!this.children.length&&this.childrenContainerElem){this.childrenContainerElem.remove();this.childrenContainerElem=null}
return this};TreeViewItem.prototype.getChildCount=function(){return this.children.length};TreeViewItem.prototype.getChild=function(idx){return(idx<0||idx>=this.children.length)?null:this.children[idx]};TreeViewItem.prototype.getChildren=function(){return __spreadArray([],this.children,!0)};TreeViewItem.prototype.traverse=function(callback,level,includeSelf){if(level===void 0){level=0}
if(includeSelf===void 0){includeSelf=!1}
if(includeSelf){if(!1===callback(this,level,this.getIndex()))
return!1;level++}
var index=0;for(var _i=0,_a=this.children;_i<_a.length;_i++){var item=_a[_i];if(!1===callback(item,level,index++))
return!1;if(!item.traverse(callback,level+1))
return!1}
return!0};TreeViewItem.prototype.createDeleteButtonElem=function(){var _this=this;if(!this.deleteElem){this.deleteElem=(0,jquery_54.default)('<i class="wb-tree-view-item-delete btn btn-xs btn-link"><i class="fa fa-times"></i></i>').attr("title",__("Delete"));this.contentElem.append(this.deleteElem);this.deleteElem.on("click touchstart",function(e){e.stopImmediatePropagation();e.preventDefault();_this.onDeleteRequest()})}
return this.deleteElem};TreeViewItem.prototype.createDuplicateButtonElem=function(){var _this=this;if(!this.duplicateElem){this.duplicateElem=(0,jquery_54.default)('<i class="wb-tree-view-item-duplicate btn btn-xs btn-link"><i class="fa fa-copy"></i></i>').attr("title",__("Duplicate"));this.contentElem.append(this.duplicateElem);this.duplicateElem.on("click touchstart",function(e){e.stopImmediatePropagation();e.preventDefault();_this.onDuplicateRequest()})}
return this.duplicateElem};TreeViewItem.prototype.createCollapseHandleElem=function(){if(!this.collapseHandleElem){this.collapseHandleElem=(0,jquery_54.default)('<i class="wb-tree-view-collapse-handle"></i>');if(!this.children.length)
this.collapseHandleElem.addClass("no-items");this.updateCollapseView();this.contentElem.prepend(this.collapseHandleElem)}
return this.collapseHandleElem};TreeViewItem.prototype.getChildrenContainerElem=function(){if(!this.childrenContainerElem){this.childrenContainerElem=(0,jquery_54.default)('<div class="wb-tree-view-item-children"></div>');this.elem.append(this.childrenContainerElem)}
return this.childrenContainerElem};TreeViewItem.prototype.getIndex=function(){return this.parent?this.parent.children.indexOf(this):0};TreeViewItem.prototype.getPrevSibling=function(){if(!this.parent)
return null;var idx=this.getIndex();return(idx>0)?this.parent.children[idx-1]:null};TreeViewItem.prototype.getNextSibling=function(){if(!this.parent)
return null;var idx=this.getIndex();return(idx<this.parent.children.length-1)?this.parent.children[idx+1]:null};TreeViewItem.prototype.setChecked=function(checked){var _this=this;if(this.checked===checked)
return this;this.checked=checked;if(this.checkboxElem){setTimeout(function(){var _a;(_a=_this.checkboxElem)===null||_a===void 0?void 0:_a.prop('checked',_this.checked)},0)}
return this};TreeViewItem.prototype.getChecked=function(){return this.checked};TreeViewItem.prototype.setIcon=function(icon){if(this.icon===icon)
return this;this.icon=icon;if(icon){this.elem.removeClass("wb-tree-view-item-no-icon");this.iconElem.attr("class","wb-tree-view-item-icon "+icon)}else{this.elem.addClass("wb-tree-view-item-no-icon")}
return this};TreeViewItem.prototype.setExtraIcon=function(icon){var _a;if(this.iconExtra===icon)
return this;this.iconExtra=icon;if(icon){if(this.iconExtraElem===null){this.iconExtraElem=(0,jquery_54.default)('<i></i>');this.outlineElem.append(this.iconExtraElem)}
this.iconExtraElem.attr("class","wb-tree-view-item-icon "+icon)}else{(_a=this.iconExtraElem)===null||_a===void 0?void 0:_a.remove()}
return this};TreeViewItem.prototype.getIcon=function(){return this.icon};TreeViewItem.prototype.getExtraIcon=function(){return this.iconExtra};TreeViewItem.prototype.setCollapsible=function(collapsible,noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(this.collapsible===collapsible)
return this;this.collapsible=collapsible;if(this.collapsible&&this.tree.getShowCollapseButtons()){this.createCollapseHandleElem()}else if(this.collapseHandleElem){this.collapseHandleElem.remove();this.collapseHandleElem=null}
if(!noUpdate)
this.updateCollapseView();return this};TreeViewItem.prototype.getCollapsible=function(){return this.collapsible};TreeViewItem.prototype.setCollapsed=function(collapsed,noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(this.collapsed===collapsed)
return this;this.collapsed=collapsed;if(!noUpdate){this.updateCollapseView();this.onCollapseItem()}
return this};TreeViewItem.prototype.getCollapsed=function(){return this.collapsed};TreeViewItem.prototype.setName=function(name){if(this.name===name)
return this;this.name=name;this.nameElem.text(this.name);if(this.title===""&&this.tree.getMaxNameWidth())
this.nameElem.attr("title",this.name);return this};TreeViewItem.prototype.getName=function(){return this.name};TreeViewItem.prototype.setTitle=function(title){if(this.title===title)
return this;this.title=title;this.nameElem.attr("title",(this.title===""&&this.tree.getMaxNameWidth())?this.name:this.title);return this};TreeViewItem.prototype.getTitle=function(){return this.title};TreeViewItem.prototype.setColor=function(color){if(this.color===color)
return this;this.color=color;this.contentElem.css("color",color||"");return this};TreeViewItem.prototype.getColor=function(){return this.color};TreeViewItem.prototype.setFont=function(font){if(this.font===font)
return this;this.font=font;this.nameElem.css("font",font||"");return this};TreeViewItem.prototype.getFont=function(){return this.font};TreeViewItem.prototype.setBold=function(bold){if(this.bold===bold)
return this;this.bold=bold;this.nameElem.css("font-weight",bold?"bold":"");return this};TreeViewItem.prototype.getBold=function(){return this.bold};TreeViewItem.prototype.setItalic=function(italic){if(this.italic===italic)
return this;this.italic=italic;this.nameElem.css("font-style",italic?"italic":"");return this};TreeViewItem.prototype.getItalic=function(){return this.italic};TreeViewItem.prototype.setSeparator=function(separator){if(this.separator===separator)
return this;this.separator=separator;if(this.separator)
this.elem.addClass("wb-tree-view-separator");else this.elem.removeClass("wb-tree-view-separator");return this};TreeViewItem.prototype.getSeparator=function(){return this.separator};TreeViewItem.prototype.setMetaText=function(metaText,noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(this.metaText===metaText)
return this;this.metaText=metaText;if(!noUpdate)
this.updateMetaView();return this};TreeViewItem.prototype.getMetaText=function(){return this.metaText};TreeViewItem.prototype.addMetaIcon=function(metaIcon,noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(this.metaIcons.indexOf(metaIcon)>=0)
return this;this.metaIcons.push(metaIcon);if(!noUpdate)
this.updateMetaView();return this};TreeViewItem.prototype.removeMetaIcon=function(metaIcon,noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(typeof metaIcon==="string"){var found=!1;for(var i=this.metaIcons.length-1;i>=0;i--){if(this.metaIcons[i].id===metaIcon){found=!0;this.metaIcons.splice(i,1)}}
if(!found)
return this}else{var idx=this.metaIcons.indexOf(metaIcon);if(idx<0)
return this;this.metaIcons.splice(idx,1)}
if(!noUpdate)
this.updateMetaView();return this};TreeViewItem.prototype.clearMetaIcons=function(noUpdate){if(noUpdate===void 0){noUpdate=!1}
if(!this.metaIcons.length)
return this;this.metaIcons=[];if(!noUpdate)
this.updateMetaView();return this};TreeViewItem.prototype.setMetaIcon=function(id,icon,title,visible,color,noUpdate){if(color===void 0){color=null}
if(noUpdate===void 0){noUpdate=!1}
var metaIcon=this.getMetaIcon(id);if(!metaIcon){if(!visible)
return this;metaIcon=new MetaIcon(id,icon,title,color);this.addMetaIcon(metaIcon,noUpdate)}else metaIcon.setIcon(icon).setTitle(title).setColor(color);metaIcon.setVisible(visible);return this};TreeViewItem.prototype.getMetaIcon=function(id){for(var i=this.metaIcons.length-1;i>=0;i--){if(this.metaIcons[i].id===id)
return this.metaIcons[i]}
return null};TreeViewItem.prototype.getMetaIcons=function(){return __spreadArray([],this.metaIcons,!0)};TreeViewItem.prototype.setSelected=function(selected,triggerSelectionEvent){if(triggerSelectionEvent===void 0){triggerSelectionEvent=!1}
if(this.selected===selected)
return this;if(!triggerSelectionEvent)
this.selected=selected;if(this.selected){if(!triggerSelectionEvent)
this.elem.addClass("active");this.tree.selectItem(this,triggerSelectionEvent)}else{if(!triggerSelectionEvent)
this.elem.removeClass("active");this.tree.deselectItem(this,triggerSelectionEvent)}
return this};TreeViewItem.prototype.getSelected=function(){return this.selected};TreeViewItem.prototype.getDeletable=function(){return this.deletable};TreeViewItem.prototype.setDeletable=function(deletable){if(this.deletable===deletable)
return this;this.deletable=deletable;if(this.deletable&&this.tree.getShowDeleteButtons())
this.createDeleteButtonElem();else if(this.deleteElem){this.deleteElem.remove();this.deleteElem=null}
return this};TreeViewItem.prototype.getCanDuplicate=function(){return this.canDuplicate};TreeViewItem.prototype.setCanDuplicate=function(canDuplicate){if(this.canDuplicate===canDuplicate)
return this;this.canDuplicate=canDuplicate;if(this.canDuplicate&&this.tree.getShowDuplicateButtons())
this.createDuplicateButtonElem();else if(this.duplicateElem){this.duplicateElem.remove();this.duplicateElem=null}
return this};TreeViewItem.prototype.getDraggable=function(){return this.draggable};TreeViewItem.prototype.setDraggable=function(draggable){if(this.draggable===draggable)
return this;this.draggable=draggable;if(this.draggable){}
return this};TreeViewItem.prototype.getDisabled=function(){return this.disabled};TreeViewItem.prototype.setDisabled=function(disabled){if(this.disabled===disabled)
return this;this.disabled=disabled;if(this.disabled)
this.elem.addClass("wb-tree-view-item-disabled");else this.elem.removeClass("wb-tree-view-item-disabled");return this};TreeViewItem.prototype.updateCollapseView=function(){if(this.collapsible&&this.collapsed)
this.elem.addClass("wb-collapsed");else this.elem.removeClass("wb-collapsed");if(this.collapseHandleElem){if(this.collapsible){if(this.collapsed){this.collapseHandleElem.removeClass("fa-minus-square-o");this.collapseHandleElem.addClass("fa fa-plus-square-o")}else{this.collapseHandleElem.removeClass("fa-plus-square-o");this.collapseHandleElem.addClass("fa fa-minus-square-o")}}else{this.collapseHandleElem.removeClass("fa fa-plus-square-o fa-minus-square-o")}}};TreeViewItem.prototype.updateMetaView=function(){if((this.metaText===""||this.metaText===null)&&!this.metaIcons.length){this.metaElem.detach();this.metaElemDetached=!0}else{this.outlineElem.append(this.metaElem);this.metaElemDetached=!1;if(this.metaText===""||this.metaText===null){if(this.metaTextElem)
this.metaTextElem.remove();this.metaTextElem=null}else{if(!this.metaTextElem){this.metaTextElem=(0,jquery_54.default)('<span class="wb-tree-view-meta-text"></span>');this.metaElem.prepend(this.metaTextElem)}
this.metaTextElem.text(' '+this.metaText)}
this.metaElem.children(".wb-tree-view-meta-icon").each(function(){(0,jquery_54.default)(this).detach()});for(var _i=0,_a=this.metaIcons;_i<_a.length;_i++){var icon=_a[_i];this.metaElem.append(icon.elem)}}};TreeViewItem.prototype.updateMaxNameWidth=function(){var max=this.tree.getMaxNameWidth();this.nameElem.css({maxWidth:max?(max+"px"):""})};TreeViewItem.prototype.setData=function(data){this.data=data;return this};TreeViewItem.prototype.getData=function(){return this.data};TreeViewItem.prototype.scrollIntoView=function(){var elem=this.contentElem.get(0);var bounds=elem.getBoundingClientRect();var vBounds=this.tree.getParentViewport();if(bounds.top<vBounds.top){elem.scrollIntoView()}else if(bounds.bottom>vBounds.bottom){elem.scrollIntoView(!1)}
return this};TreeViewItem.prototype.dispose=function(){this.data=null;this.setContextMenu(null,!1);this.elem.removeData();this.elem.remove()};return TreeViewItem}());exports.TreeViewItem=TreeViewItem;var TreeView=(function(_super){__extends(TreeView,_super);function TreeView(){var _this=_super.call(this)||this;_this.multiselect=!1;_this.allowDraggingItems=!0;_this.showCollapseButtons=!0;_this.showDeleteButtons=!0;_this.showDuplicateButtons=!0;_this.showCheckboxes=!1;_this.showSearch=!0;_this.maxNameWidth=0;_this.selection=[];_this.searchText="";_this.root=new TreeViewItem(_this);return _this}
TreeView.prototype.destroy=function(){};TreeView.prototype.buildInit=function(data,fields){var _this=this;this.multiselect=data.hasOwnProperty("multiselect")&&!!data.multiselect;this.allowDraggingItems=!data.hasOwnProperty("allowDraggingItems")||!!data.allowDraggingItems;this.showCollapseButtons=!data.hasOwnProperty("showCollapseButtons")||!!data.showCollapseButtons;this.showDeleteButtons=!data.hasOwnProperty("showDeleteButtons")||!!data.showDeleteButtons;this.showDuplicateButtons=!data.hasOwnProperty("showDuplicateButtons")||!!data.showDuplicateButtons;this.showCheckboxes=data.hasOwnProperty("showCheckboxes")&&!!data.showCheckboxes;this.showSearch=!data.hasOwnProperty("showSearch")||!!data.showSearch;this.maxNameWidth=data.maxNameWidth||0;this.onDeleteCallback=data.onDelete;this.onDuplicateCallback=data.onDuplicate;this.onCollapseItemCallback=data.onCollapse;this.onDropItemCallback=data.onDrop;this.canAcceptItemCallback=data.canAcceptItem;this.beforeSelectCallback=data.beforeSelect;this.afterSelectCallback=data.afterSelect;this.checkedStateChange=data.checkedStateChange;this.itemCountChangedCallback=data.itemCountChanged;this.searchFunc=data.searchFunc;this._searchInputElem=(0,jquery_54.default)('<input class="form-control" type="text" placeholder="'+__("Search")+'" />').on("keydown keyup cut paste change",function(e){if((e.type==="keyup"||e.type==="keydown")&&e.keyCode===27){_this._searchInputElem.val('');e.stopImmediatePropagation();e.preventDefault()}
var val=_this._searchInputElem.val();if(_this.searchText!==val){_this.searchText=val;_this.updateSearchResults()}});this._searchClearElem=(0,jquery_54.default)('<div class="wb-tree-view-search-clear hidden"><i class="fa fa-times"></i></div>').on("click touchstart",function(e){e.stopImmediatePropagation();_this.setSearchText("")});this._searchBoxElem=(0,jquery_54.default)('<div class="wb-tree-view-search-box"></div>').append(this._searchInputElem,this._searchClearElem);this._scrollBoxElem=(0,jquery_54.default)('<div class="wb-tree-view-scroll-box"></div>');if(data.scrollBoxCssClass)
this._scrollBoxElem.addClass(data.scrollBoxCssClass);if(!this.showSearch)
this._searchBoxElem.addClass("hidden");this._searchNotFoundElem=(0,jquery_54.default)('<div class="wb-tree-view-search-not-found hidden"></div>').text(__("No items found"));this._elem.addClass("wb-tree-view").append(this._searchBoxElem,this._scrollBoxElem);this._scrollBoxElem.append(this._searchNotFoundElem,this.root.getChildrenContainerElem());var itemFromEvent=function(e){return(0,jquery_54.default)(e.target).closest(".wb-tree-view-item").data("item")};var touchClick=!1;this._elem.on("longhover",".wb-tree-view-item",function(e){if(wb_builder.getEditingLocked())
return;var item=itemFromEvent(e);if(item.getCollapsible()&&item.getCollapsed())
item.setCollapsed(!1);_this.scrollItemsViewport(0);e.stopImmediatePropagation()}).on("mousedown touchstart",".wb-tree-view-item-content",function(e){if(wb_builder.getEditingLocked())
return;var item=itemFromEvent(e);touchClick=(e.type=='touchstart');item.orderingHandle.triggerDown(e)}).on("touchend",".wb-tree-view-item-content",function(e){if(wb_builder.getEditingLocked())
return;var item=itemFromEvent(e);if(item.orderingHandle.dragged||item.orderingHandle.touchScrolled)
return;(0,EventUtil_5.triggerEvent)(item.contentElem,'click',e)}).on("click",".wb-tree-view-item-content",function(e){var _a;var item=itemFromEvent(e);var collapseHandle=(0,jquery_54.default)(e.target).closest(".wb-tree-view-collapse-handle");if(collapseHandle.length&&item.getCollapsible())
item.setCollapsed(!item.getCollapsed());else{if(wb_builder.getEditingLocked())
return;var ctrlKey=_this.multiselect&&e.ctrlKey;var wasSelected=item.getSelected();(0,ContextMenu_1.hideAllContextMenus)();if(ctrlKey){if(wasSelected)
_this.deselectItem(item,!0);else _this.selectItem(item,!0)}else _this.setSelection([item],!0);if(touchClick&&wasSelected)(_a=item.getContextMenu())===null||_a===void 0?void 0:_a.show(e);}
e.stopPropagation()})};TreeView.prototype.collectItems=function(root,items,ignoreItem,ignoreSelf){if(ignoreSelf===void 0){ignoreSelf=!1}
for(var _i=0,_a=root.getChildren();_i<_a.length;_i++){var item=_a[_i];if(item===ignoreItem)
continue;this.collectItems(item,items,ignoreItem);items.push(item)}
return items};TreeView.prototype.getAllOrderableItems=function(ignoreItem){return this.collectItems(this.root,[],ignoreItem,!0)};TreeView.prototype.getParentViewport=function(){var viewport=this._scrollBoxElem.get(0);return viewport.getBoundingClientRect()};TreeView.prototype.getItemsViewport=function(){var viewport=this._scrollBoxElem.get(0);return viewport.getBoundingClientRect()};TreeView.prototype.scrollItemsViewport=function(offset){var elem=this._scrollBoxElem.get(0);var ori=elem.scrollTop;elem.scrollTop+=offset;return ori!=elem.scrollTop};TreeView.prototype.setSelectionInternal=function(newSelection,toSelect,toDeselect,triggerSelectionEvent){var _this=this;if(triggerSelectionEvent===void 0){triggerSelectionEvent=!1}
var selectFunc=function(){_this.selection=newSelection;for(var _i=0,toDeselect_1=toDeselect;_i<toDeselect_1.length;_i++){var item=toDeselect_1[_i];item.setSelected(!1)}
for(var _a=0,toSelect_1=toSelect;_a<toSelect_1.length;_a++){var item=toSelect_1[_a];item.setSelected(!0)}
if(triggerSelectionEvent&&typeof _this.afterSelectCallback==="function")
_this.afterSelectCallback(_this.selection);};if(triggerSelectionEvent&&typeof this.beforeSelectCallback==="function"){var def=this.beforeSelectCallback(newSelection,__spreadArray([],this.selection,!0));if(def===!1)
return;if(!def||def===!0)
selectFunc();else def.then(selectFunc)}else selectFunc()};TreeView.prototype.selectItem=function(item,triggerSelectionEvent){if(triggerSelectionEvent===void 0){triggerSelectionEvent=!1}
if(this.selection.indexOf(item)>=0)
return;var newSelection=__spreadArray([],this.selection,!0);newSelection.push(item);this.setSelectionInternal(newSelection,[item],[],triggerSelectionEvent)};TreeView.prototype.deselectItem=function(item,triggerSelectionEvent){if(triggerSelectionEvent===void 0){triggerSelectionEvent=!1}
var idx=this.selection.indexOf(item);if(idx<0)
return;var newSelection=__spreadArray([],this.selection,!0);newSelection.splice(idx,1);this.setSelectionInternal(newSelection,[],[item],triggerSelectionEvent)};TreeView.prototype.setSelection=function(items,triggerSelectionEvent){if(triggerSelectionEvent===void 0){triggerSelectionEvent=!1}
if(typeof items==="function"){var func_1=items;items=[];this.root.traverse(function(item,level,index){if(func_1(item,level,index))
items.push(item);})}
var newSelection=__spreadArray([],this.selection,!0);var toDeselect=[];var toSelect=[];for(var i=newSelection.length-1;i>=0;i--){var idx=items.indexOf(newSelection[i]);if(idx<0){toDeselect.push(newSelection[i]);newSelection.splice(i,1)}}
for(var _i=0,items_3=items;_i<items_3.length;_i++){var item=items_3[_i];var idx=newSelection.indexOf(item);if(idx<0){toSelect.push(item);newSelection.push(item)}}
if(toSelect.length||toDeselect.length)
this.setSelectionInternal(newSelection,toSelect,toDeselect,triggerSelectionEvent);};TreeView.prototype.getSelection=function(){return __spreadArray([],this.selection,!0)};TreeView.prototype.selectFirstItem=function(triggerSelectionEvent){if(triggerSelectionEvent===void 0){triggerSelectionEvent=!0}
var item=this.root.getChild(0);if(item)
this.setSelection([item],triggerSelectionEvent);return this};TreeView.prototype.getFirstSelectedItem=function(){return this.selection.length?this.selection[0]:null};TreeView.prototype.createItem=function(){return new TreeViewItem(this)};TreeView.prototype.getMultiselect=function(){return this.multiselect};TreeView.prototype.getAllowDraggingItems=function(){return this.allowDraggingItems};TreeView.prototype.getShowCollapseButtons=function(){return this.showCollapseButtons};TreeView.prototype.getShowDeleteButtons=function(){return this.showDeleteButtons&&typeof this.onDeleteCallback==="function"};TreeView.prototype.getShowDuplicateButtons=function(){return this.showDuplicateButtons&&typeof this.onDuplicateCallback==="function"};TreeView.prototype.getShowCheckboxes=function(){return this.showCheckboxes};TreeView.prototype.onDeleteRequest=function(item){if(typeof this.onDeleteCallback==="function")
this.onDeleteCallback(item);};TreeView.prototype.onDuplicateRequest=function(item){if(typeof this.onDuplicateCallback==="function")
this.onDuplicateCallback(item);};TreeView.prototype.onCollapseItem=function(item){if(typeof this.onCollapseItemCallback==="function")
this.onCollapseItemCallback(item);};TreeView.prototype.canAcceptItem=function(item,parentItem,refItem,after){if(typeof this.canAcceptItemCallback==="function")
return this.canAcceptItemCallback(item,parentItem,refItem,after);return!0};TreeView.prototype.onDropItem=function(item,parentItem,refItem,after){if(typeof this.onDropItemCallback==="function")
this.onDropItemCallback(item,parentItem,refItem,after);};TreeView.prototype.onItemCountChanged=function(){if(typeof this.itemCountChangedCallback==="function")
this.itemCountChangedCallback();};TreeView.prototype.getMaxNameWidth=function(){return this.maxNameWidth};TreeView.prototype.setMaxNameWidth=function(maxNameWidth){this.maxNameWidth=maxNameWidth||0;this.root.traverse(function(item){return item.updateMaxNameWidth()});return this};TreeView.prototype.onItemCheckStateChange=function(item,checked){return typeof this.checkedStateChange!=="function"||this.checkedStateChange(item,checked)!==!1};TreeView.prototype.getSearchText=function(){return this.searchText};TreeView.prototype.setSearchText=function(text){if(text===null)
text="";if(this.searchText===text)
return this;this.searchText=text;this._searchInputElem.val(text);this.updateSearchResults();return this};TreeView.prototype.isSearching=function(){return this.searchText!==""};TreeView.prototype.updateSearchResults=function(){this._elem.find(".wb-filtered").removeClass("wb-filtered");if(this.searchText===""){this._elem.removeClass("wb-tree-view-searching");this._searchClearElem.addClass("hidden");this._searchNotFoundElem.addClass("hidden")}else{this._elem.addClass("wb-tree-view-searching");this._searchClearElem.removeClass("hidden");var searchText_1=this.searchText.toLowerCase();var searchFunc_1=(typeof this.searchFunc==="function")?this.searchFunc:function(item,searchText){return item.getName().toLowerCase().indexOf(searchText)>=0};var found_1=!1;this.root.traverse(function(item){if(item.getSeparator()||!searchFunc_1(item,searchText_1))
item.elem.addClass("wb-filtered");else found_1=!0});if(found_1)
this._searchNotFoundElem.addClass("hidden");else this._searchNotFoundElem.removeClass("hidden")}
return this};return TreeView}(UIComponent_34.UIComponent));exports.TreeView=TreeView});define("js/ui/Note",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_35,jquery_55){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Note=void 0;var Note=(function(_super){__extends(Note,_super);function Note(){var _this=_super.call(this)||this;_this.text="";return _this}
Note.prototype.buildInit=function(data,fields){var css=jquery_55.default.extend({marginLeft:10,marginTop:8,},data.css);if(wb_builder.rtl){var t=css.marginRight;css.marginRight=css.marginLeft;css.marginLeft=t}
var elem=this.getElem();elem.addClass('wb-page-tree-notice').css(css);var sml=(0,jquery_55.default)('<small>').appendTo(elem);this.iconElem=(0,jquery_55.default)('<i>').appendTo(sml);this.textElem=(0,jquery_55.default)('<span>').addClass('txt').appendTo(sml);this.setText(data.text||this.text);this.setIcon(data.icon||"glyphicon glyphicon-exclamation-sign")};Note.prototype.setText=function(text){this.text=text;this.textElem.text(text)};Note.prototype.setIcon=function(icon){this.iconElem.removeClass();if(icon)
this.iconElem.addClass(icon);};Note.prototype.setValue=function(text){this.setText(text)};Note.prototype.getValue=function(){return this.text};Note.supportsMultipleObjectBindings=function(){return!1};Note.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return Note}(UIComponent_35.UIComponent));exports.Note=Note});define("js/blog/BlogCategoryDialog",["require","exports","PropertyDialog","js/Service","js/blog/BlogCategory","js/FlexLayout","js/ui/TreeView","js/UIButton","js/util/UID","js/ui/Note"],function(require,exports,PropertyDialog_1,Service_10,BlogCategory_1,FlexLayout_3,TreeView_1,UIButton_3,UID_1,Note_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogCategoryDialog=void 0;var BlogCategoryDialog=(function(_super){__extends(BlogCategoryDialog,_super);function BlogCategoryDialog(saveFunc){var _this=_super.call(this,'%inherit%')||this;_this.saveFunc=saveFunc;_super.prototype.__construct.call(_this,__('Properties'),void 0,void 0,void 0,{noScroll:!0,size:{width:685},tabs:[{children:[{type:'HorizontalLayout',columnWeights:[5,7],columnWeightsSmall:[5,7],children:[{type:FlexLayout_3.FlexLayout,direction:"column",alignItems:"flex-start",justifyContent:"stretch",styleClass:"wb-tree-background-panel wb-tree-background-panel-md",children:[{type:(TreeView_1.TreeView),id:'tree',multiselect:!1,allowDraggingItems:!0,showCollapseButtons:!0,maxNameWidth:200,onDrop:function(item,parentItem,refItem,after){item.getData().parentId=parentItem.isRoot()?null:parentItem.getData().id},onDelete:function(item){_this.confirm(__("Confirm"),__("Do you really want to remove it?")).done(function(result){var _a;if(result&&result.clickedButtonIndex){if(item.getSelected())
_this.fields.tree.setSelection([],!0);(_a=item.getParent())===null||_a===void 0?void 0:_a.removeChild(item)}})},beforeSelect:function(newSelection,oldSelection){if(oldSelection.length)
_this.applyFieldsToItem(oldSelection[0]);},afterSelect:function(newSelection){_this.applyItemToFields(newSelection.length?newSelection[0]:null);_this.fields.name.getElem().focus()},},{type:UIButton_3.UIButton,id:"newItemBtn",buttonStyle:UIButton_3.UIButton.STYLE_LINK,icon:'glyphicon glyphicon-plus',text:__('Add item'),click:function(){var newItem=_this.fields.tree.createItem().setName(__("New Item")).setIcon("fa fa-folder-open").setData(new BlogCategory_1.BlogCategory({id:UID_1.UID.create(),parentId:null,name:""}));_this.fields.tree.root.addChild(newItem);_this.fields.tree.setSelection([newItem],!0);newItem.scrollIntoView()}},{type:Note_1.Note,text:__('Use Drag and Drop to sort and categorize items')}]},{type:'VerticalLayout',spacing:15,children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Item Name')},{type:'MultilangTextField',id:'name'}]}]}]}]}],buttons:[{name:__('Cancel')},{name:__('Apply'),primary:!0,click:function(){_this.applyData()}}]});_this.dialog.addClass('wb-modal-settings');return _this}
BlogCategoryDialog.prototype.applyFieldsToItem=function(item){var category=item.getData();category.name=this.fields.name.getValue();var name=__tr(category.name);item.setName((name===undefined||name===null||name==="")?__("New Item"):name)};BlogCategoryDialog.prototype.applyItemToFields=function(item){var category=item?item.getData():null;this.fields.name.setValue(category?category.name:"")};BlogCategoryDialog.prototype.applyData=function(){var _this=this;this.setLoading(!0);var item=this.fields.tree.getFirstSelectedItem();if(item)
this.applyFieldsToItem(item);var categories=[];this.fields.tree.root.traverse(function(item){var category=item.getData();var parentItem=item.getParent();category.parentId=(parentItem&&!parentItem.isRoot())?parentItem.getData().id:null;categories.push(category)});Service_10.Service.Blog.Module.setCategories(categories,!0,{success:function(){_this.setVisible(!1);if(typeof _this.saveFunc==='function')
_this.saveFunc.call(_this);},complete:function(){return _this.setLoading(!1)},error:function(error){return alert(error.message)}})};BlogCategoryDialog.prototype.selectItemById=function(id){var _this=this;this.fields.tree.root.traverse(function(item){if(item.getData().id===id){_this.fields.tree.setSelection([item],!0);return!1}
return!0})};BlogCategoryDialog.prototype.setVisible=function(visible,noAction,ignoreEvent,noSelect){var _this=this;if(noAction===void 0){noAction=!1}
if(ignoreEvent===void 0){ignoreEvent=!1}
if(noSelect===void 0){noSelect=!1}
if(visible){var value=Service_10.Service.Blog.Module.getCategories();if(!value.length){value.push(new BlogCategory_1.BlogCategory({id:UID_1.UID.create(),parentId:null,name:__('Sample Category')}))}
var buildTree_1=function(list,parent,parentId){for(var _i=0,list_1=list;_i<list_1.length;_i++){var category=list_1[_i];if((category.parentId||null)!==parentId)
continue;var name_1=__tr(category.name);var item=_this.fields.tree.createItem().setName((name_1===undefined||name_1===null||name_1==="")?__("New Item"):name_1).setIcon("fa fa-folder-open").setData(new BlogCategory_1.BlogCategory(category.serialize()));parent.addChild(item);buildTree_1(list,item,category.id)}};this.fields.tree.root.removeAllChildren();buildTree_1(value,this.fields.tree.root,null);if(!noSelect)
this.fields.tree.selectFirstItem();}
_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};return BlogCategoryDialog}(PropertyDialog_1.default));exports.BlogCategoryDialog=BlogCategoryDialog});define("js/core/Validation",["require","exports","MultilangTextField"],function(require,exports,MultilangTextField_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.validateAnchorField=exports.validateUrlField=exports.normalizeValue=void 0;function normalizeValue(val,strip_extra_slashes){if(strip_extra_slashes===void 0){strip_extra_slashes=!1}
var replaced=val.replace(/(?:http|https):\/\//i,'').replace(/[\.\(\)\s]+/g,'-');if(strip_extra_slashes){replaced=replaced.replace(/\/+/,'-').replace(/^\-*(.+?)\-*$/,'$1')}
return replaced}
exports.normalizeValue=normalizeValue;function validateUrlField(field,notice,data,current_id,strip_extra_slashes,with_normalize,is_page_error){if(strip_extra_slashes===void 0){strip_extra_slashes=!1}
if(with_normalize===void 0){with_normalize=!0}
if(is_page_error===void 0){is_page_error=!0}
notice.setVisible(!1);var value=field.getValue();if(value===null)
return;if(typeof value==="string"&&wb_builder.site.languages.length&&(field instanceof MultilangTextField_1.default)){var newValue={};var defLang=wb_builder.site.getLastDefLang();if(defLang){newValue[defLang]=value}else{for(var _i=0,_a=wb_builder.site.languages;_i<_a.length;_i++){var lang=_a[_i];newValue[lang.code]=value}}
value=newValue;field.setValue(value)}else if(typeof value==="object"&&!wb_builder.site.languages.length){value=__tr(value,wb_builder.site.getLastDefLang()||'__DEFAULT__')}
if(typeof value==="string"){if(with_normalize){var checkVal=normalizeValue(value,strip_extra_slashes);if(checkVal!==value){value=checkVal;field.setValue(checkVal)}}
if(value!==""){for(var i in data){var page=data[i];if(current_id===(page===null||page===void 0?void 0:page.id))
continue;if(__tr(page.alias,wb_builder.site.getLastDefLang()||'__DEFAULT__')===value){if(is_page_error){notice.setText(__("The value \"%s\" is already assigned to page \"%s\"").replace('%s',value).replace('%s',__tr(page.name,'__DEFAULT__',null,!0,!0)))}else{notice.setText(__("The value \"%s\" is already assigned").replace('%s',value))}
notice.setVisible(!0);break}}}}else{for(var _b=0,_c=wb_builder.site.languages;_b<_c.length;_b++){var lang=_c[_b];if(!value.hasOwnProperty(lang.code))
continue;var checkVal=normalizeValue(value[lang.code],strip_extra_slashes);if(checkVal!==value[lang.code]){value[lang.code]=checkVal;field.setText(checkVal,lang.code)}}
var err=!1;for(var _d=0,_e=wb_builder.site.languages;_d<_e.length;_d++){var lang=_e[_d];if(!value.hasOwnProperty(lang.code))
continue;var val=value[lang.code];if(val==="")
continue;for(var i in data){var page=data[i];if(current_id===page.id)
continue;if(__tr(page.alias,lang.code)===val){notice.setText(__("The value \"%s\" is already assigned to page \"%s\"").replace('%s',val).replace('%s',__tr(page.name,'__DEFAULT__',null,!0,!0)));notice.setVisible(!0);err=!0;break}}
if(err)
break}}}
exports.validateUrlField=validateUrlField;function validateAnchorField(value,notice,data){if(value!==""){for(var i in data){var item=data[i];if(item.alias===value){notice.setText(__("Anchor \"%s\" already exists").replace('%s',value));notice.setVisible(!0);return!1}}}
return!0}
exports.validateAnchorField=validateAnchorField});define("js/ui/controls/DayNightToggle",["require","exports","jquery","js/UIComponent"],function(require,exports,jquery_56,UIComponent_36){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.DayNightToggle=void 0;var DayNightToggle=exports.DayNightToggle=(function(_super){__extends(DayNightToggle,_super);function DayNightToggle(){var _this=_super.call(this)||this;_this._iconElem=null;_this._elem.addClass('day-night-toggle');var id='ui_day-night-toggle_id'+DayNightToggle._elemIndex;DayNightToggle._elemIndex++;_this._elem.attr({'for':id});_this._input=(0,jquery_56.default)('<input>').attr({type:'checkbox',id:id}).addClass('day-night-toggle-input');_this._elem.append(_this._input).append((0,jquery_56.default)('<div class="day-night-toggle-bg">')).append((0,jquery_56.default)('<div class="day-night-toggle-switch">'));_this._input.on("change",function(){_this.onValueChanged();window.localStorage.setItem('day-night-toggle',_this.getValue());_this._elem.attr('title',_this.getValue()==='day'?__('Switch textarea background to dark mode'):__('Switch textarea background to light mode'))});var value=window.localStorage.getItem('day-night-toggle');_this.setValue(value==='night'?'night':'day');return _this}
DayNightToggle.prototype.onChange=function(func){var _this=this;this._input.on('change',function(){return func(_this.getValue())});func(this.getValue());return this};DayNightToggle.prototype.setValue=function(value){this._input.prop("checked",value!=="night");window.localStorage.setItem('day-night-toggle',value);this._elem.attr('title',this.getValue()==='day'?__('Switch textarea background to dark mode'):__('Switch textarea background to light mode'))};DayNightToggle.prototype.getValue=function(){return!this._input.is(":checked")?"night":"day"};DayNightToggle.prototype.on=function(event,callback){if(event==='change'){this._input.on(event,callback)}else{_super.prototype.on.call(this,event,callback)}
return this};DayNightToggle.prototype.off=function(event,callback){if(event==='change'){this._input.off(event,callback)}else{_super.prototype.off.call(this,event,callback)}
return this};DayNightToggle.prototype.trigger=function(event,extraParameters){if(event==='change'){this._input.trigger(event,extraParameters)}else{_super.prototype.trigger.call(this,event,extraParameters)}
return this};DayNightToggle.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if('change' in options&&options.change)
this.onChange(options.change);};DayNightToggle.prototype.buildInit=function(data,fields){if('change' in data&&data.change)
this.onChange(data.change);};DayNightToggle._elemIndex=0;return DayNightToggle}(UIComponent_36.UIComponent))});define("js/blog/BlogEditPostDialog",["require","exports","PropertyDialog","js/blog/BlogPost","js/Service","js/WYSIWYGControl","js/DropdownBox","js/blog/BlogCategory","js/blog/BlogCategoryDialog","js/core/Validation","js/ui/controls/DayNightToggle"],function(require,exports,PropertyDialog_2,BlogPost_1,Service_11,WYSIWYGControl_1,DropdownBox_3,BlogCategory_2,BlogCategoryDialog_1,Validation_1,DayNightToggle_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BlogEditPostDialog=exports.CatSelector=void 0;var CatSelector=(function(_super){__extends(CatSelector,_super);function CatSelector(){var _this=_super.call(this)||this;_this.singleOrNone=!1;_this.setEditable(!0);return _this}
CatSelector.prototype.buildInit=function(data,fields){_super.prototype.buildInit.call(this,data,fields);this.singleOrNone=data.singleOrNone;this.onEditStart=data.editStart;this.onEditApplied=data.editApplied;if(this.singleOrNone){this.multiselect=!1;this.setEditable(!1);this.reload()}};CatSelector.prototype.onEdit=function(fields){var _this=this;if(this.onEditStart)
this.onEditStart.call(this);var categoryId=this.getValue(!0)[0];editCategories(function(){_this.reload();if(_this.onEditApplied)
_this.onEditApplied.call(_this);},categoryId)};CatSelector.prototype.reload=function(){this.multiselect=!this.singleOrNone;this.optionsSource=Service_11.Service.Blog.Module.getCategories().map(function(e){return e});if(this.singleOrNone)
this.optionsSource.unshift(new BlogCategory_2.BlogCategory({name:__('All')}));_super.prototype.reload.call(this);this.setMultilevel(!0)};return CatSelector}(DropdownBox_3.DropdownBox));exports.CatSelector=CatSelector;var catDialog;function editCategories(callback,id){if(!catDialog){catDialog=new BlogCategoryDialog_1.BlogCategoryDialog(callback)}
catDialog.setVisible(!0,!1,!1,!0);if(typeof id==='string')
catDialog.selectItemById(id);}
var prevCatIds=null;var BlogEditPostDialog=(function(_super){__extends(BlogEditPostDialog,_super);function BlogEditPostDialog(updateFunc){var _this=_super.call(this,'',{tabs:[{name:__('General'),children:[{type:'HorizontalLayout',columnWeights:[3,9],children:[{type:'VerticalLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Picture')},{type:'ImageSelector',id:'thumbnail',thumbSize:140}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Title')},{type:'MultilangTextField',id:'title'}]},{type:'HorizontalLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Date')},{type:'TextField',id:'dateDate',inputType:'date'}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Time')},{type:'TextField',id:'dateTime',inputType:'time'}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Category')},{type:CatSelector,id:'categories',editStart:function(){prevCatIds=Service_11.Service.Blog.Module.getCategories().map(function(e){return e.id})},editApplied:function(){if(prevCatIds){if(_this.post){var currCatIds=Service_11.Service.Blog.Module.getCategories().map(function(e){return e.id});var newCatIds=[];for(var _i=0,currCatIds_1=currCatIds;_i<currCatIds_1.length;_i++){var id=currCatIds_1[_i];if(prevCatIds.indexOf(id)<0){newCatIds.push(id)}}
for(var _a=0,newCatIds_1=newCatIds;_a<newCatIds_1.length;_a++){var id=newCatIds_1[_a];if(_this.post.categories.indexOf(id)<0)
_this.post.categories.push(id);}
_this.fields.categories.setValue(_this.post.categories,!0)}
prevCatIds=null}
_this.updateFunc()}}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('State')},{type:'DropdownBox',id:'state',options:[{id:BlogPost_1.BlogPost.STATE_ACTIVE,name:__('Active')},{id:BlogPost_1.BlogPost.STATE_DRAFT,name:__('Draft')}]}]},{type:'CheckBox',css:{marginTop:15},label:__('Add Facebook comments'),id:'fbComments'}]},{type:'VerticalLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Text')},{type:WYSIWYGControl_1.WYSIWYGControl,id:'text',textArea:!0,height:480,config:{toolbar:[['Bold','Italic','Underline','Strike','Subscript','Superscript','Wbcolor','Wbbgcolor','RemoveFormat'],['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],['NumberedList','BulletedList','WBImage','WBLink','Unlink','Anchor'],['ShowBlocks','WBSourcedialog','|','More','Less'],['Languages'],['WbStyleSelector']]}},{type:DayNightToggle_1.DayNightToggle,id:'dayNight',css:{position:'absolute',top:'-30px',right:'20px'}},]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Short text')},{type:'MultilangTextField',id:'shortText',textArea:!0}]},]}]}]},{name:__('SEO'),children:[{type:'HorizontalLayout',columnWeights:[6,6],children:[{type:'VerticalLayout',spacing:15,children:[{type:'VerticalLayout',children:[{type:'Label',text:__('SEO Title')},{type:'MultilangTextField',id:'seoTitle'}]},{type:'VerticalLayout',children:[{type:'Label',text:__('SEO Description')},{type:'MultilangTextField',id:'seoDescription',textArea:!0}]},{type:'VerticalLayout',children:[{type:'Label',text:__('User friendly URL')},{type:'MultilangTextField',id:'seoAlias',onChange:function(){_this.validateAlias()}},{type:'Label',id:'aliasNotice',text:'',css:{color:'#F80',fontWeight:'normal',marginTop:"5px"},visible:!1}]}]}]}]}],buttons:[{name:__('Close')},{name:__('Save'),primary:!0,click:function(){if(_this.post){_this.setLoading(!0);_this.applyData();Service_11.Service.Blog.API.savePost(_this.post,{success:function(){if(typeof(_this.onSave)==='function'){_this.onSave.call(_this,_this.post)}
if(_this.post.state===BlogPost_1.BlogPost.STATE_ACTIVE){Service_11.Service.Blog.Module.updateAllElements()}
_this.setVisible(!1);_this.updateFunc()},error:function(error){return alert(error.message)},complete:function(){return _this.setLoading(!1)}})}}}]})||this;_this.updateFunc=updateFunc;_this.post=null;_this.setTitle(__('Edit Post'));_this.dialog.addClass('wb-modal-settings-1200');_this.fields.dayNight.onChange(function(value){_this.fields.text.setDarkMode(value!=='day')});return _this}
BlogEditPostDialog.prototype.onClose=function(){this.post=null;this.onSave=null};BlogEditPostDialog.prototype.setPost=function(post,onSave){this.post=post;this.onSave=onSave;this.fields.state.setValue(this.post.state);this.fields.thumbnail.setValue(this.post.thumbnail);this.fields.title.setValue(this.post.title);this.fields.dateDate.setValue(this.post.dateDate);this.fields.dateTime.setValue(this.post.dateTime);this.fields.text.changeLanguage(wb_builder.site.currSelLang);this.fields.text.setValue(wb_builder.site.reloadTextTags(this.post.text));this.fields.shortText.setValue(wb_builder.site.reloadTextTags(this.post.shortText));this.fields.categories.setValue(this.post.categories,!0);this.fields.fbComments.setValue(this.post.fbComments);this.fields.seoTitle.setValue(this.post.seoTitle);this.fields.seoDescription.setValue(this.post.seoDescription);this.fields.seoAlias.setValue(this.post.seoAlias);this.fields.seoAlias.setValue(this.post.seoAlias);this.validateAlias()};BlogEditPostDialog.prototype.applyData=function(){if(!this.post)
return;this.post.state=this.fields.state.getValue();this.post.thumbnail=this.fields.thumbnail.getValue();this.post.title=this.fields.title.getValue();this.post.dateDate=this.fields.dateDate.getValue();this.post.dateTime=this.fields.dateTime.getValue();this.post.text=this.fields.text.getValue();this.post.shortText=this.fields.shortText.getValue();this.post.categories=this.fields.categories.getValue(!0);this.post.fbComments=this.fields.fbComments.getValue();this.post.seoTitle=this.fields.seoTitle.getValue();this.post.seoDescription=this.fields.seoDescription.getValue();this.post.seoAlias=this.fields.seoAlias.getValue()};BlogEditPostDialog.prototype.validateAlias=function(){var _a,_b;var data=[];for(var _i=0,_c=Service_11.Service.Blog.Module.elemList[0].Posts;_i<_c.length;_i++){var post=_c[_i];data.push({id:post.id,alias:post.seoAlias,name:post.title})}
var id=(_b=(_a=this.post)===null||_a===void 0?void 0:_a.id)!==null&&_b!==void 0?_b:null;(0,Validation_1.validateUrlField)(this.fields.seoAlias,this.fields.aliasNotice,data,id,!0)};return BlogEditPostDialog}(PropertyDialog_2.default));exports.BlogEditPostDialog=BlogEditPostDialog});define("js/blog/BlogPropertyDialog",["require","exports","jquery","js/UIComponent","js/core/BuilderConfig","js/SizeSelector","js/blog/BlogLayout","js/TextControl","js/ColorPicker","js/blog/BlogEditPostDialog"],function(require,exports,jquery_57,UIComponent_37,BuilderConfig_6,SizeSelector_7,BlogLayout_1,TextControl_2,ColorPicker_4,BlogEditPostDialog_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.updateData=exports.build=exports.LayoutSelector=void 0;var LayoutSelector=(function(_super){__extends(LayoutSelector,_super);function LayoutSelector(){return _super!==null&&_super.apply(this,arguments)||this}
LayoutSelector.prototype.buildInit=function(data,fields){var _this=this;this._elem.addClass('wb-blog-layout-selector wb-blog-layout-selector-large');this._elem.append((0,jquery_57.default)('<div class="heading">').text(__('Choose Your Blog Layout style')));this.list=(0,jquery_57.default)('<div class="layout-list">');var _loop_10=function(layout){var el=(0,jquery_57.default)('<div class="layout layout-'+layout+'"><span></span></div>').attr('data-layout',layout).attr('title',this_7.getLayoutName(layout));el.children('span').css('background-image','url('+this_7.getLayoutIcon(layout)+')');(function(layout){el.on('click',function(){_this.setValue(layout);_this.onValueChanged()})})(layout);this_7.list.append(el)};var this_7=this;for(var _i=0,_a=BlogLayout_1.BlogLayout.getAvailableTypes();_i<_a.length;_i++){var layout=_a[_i];_loop_10(layout)}
this._elem.append(this.list);if(typeof(data.change)==='function'){this.onChange=data.change}};LayoutSelector.prototype.getLayoutName=function(layout){switch(layout){case BlogLayout_1.BlogLayout.TYPE_THUMBS:return __('Thumbnails');case BlogLayout_1.BlogLayout.TYPE_LIST:return __('List');case BlogLayout_1.BlogLayout.TYPE_ONETHREE:return __('One-three')}
return layout};LayoutSelector.prototype.getLayoutIcon=function(layout){return BuilderConfig_6.wbConfig.getFileUrl(wb_builder.modBaseUrl+'js/blog/img/layout-'+layout+'.svg')};LayoutSelector.prototype.getValue=function(){return this.list.children('.active').attr('data-layout')};LayoutSelector.prototype.setValue=function(layout){this.list.children().removeClass('active');this.list.children('[data-layout="'+layout+'"]').addClass('active');if(this.onChange)
this.onChange.call(this,layout);};LayoutSelector.supportsMultipleObjectBindings=function(){return!1};LayoutSelector.prototype.setIsSmall=function(value){if(value){this._elem.removeClass("wb-blog-layout-selector-large");this._elem.addClass("wb-blog-layout-selector-small")}else{this._elem.addClass("wb-blog-layout-selector-large");this._elem.removeClass("wb-blog-layout-selector-small")}};LayoutSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("small" in options)
this.setIsSmall(!!options.small);};return LayoutSelector}(UIComponent_37.UIComponent));exports.LayoutSelector=LayoutSelector;var uiLayout={tabs:[{name:__('Layout'),children:[{type:LayoutSelector,id:'layout',change:function(){return updateFields()}}]},{name:__('Settings'),children:[{type:'HorizontalLayout',columnWeights:[4],columnWeightsSmall:[4],children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Category')},{type:BlogEditPostDialog_1.CatSelector,id:'category',singleOrNone:!0}]}]},{type:'HorizontalLayout',children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Items per page')},{type:SizeSelector_7.SizeSelector,min:1,max:99,id:'itemsPerPage'}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'CheckBox',id:'displayTitle',label:__('Display title')},{type:'CheckBox',id:'displayDate',label:__('Display date')},{type:'CheckBox',id:'displayShortText',label:__('Display description'),change:function(){return updateFields()}},{type:'CheckBox',id:'useThumbnails',label:__('Use thumbnails'),change:function(){return updateFields()}},]},{type:'VerticalLayout',css:{marginTop:15},id:'shortTextLengthBlock',children:[{type:'Label',text:__('Description length')+' ('+__('symbols')+')'},{type:SizeSelector_7.SizeSelector,id:'shortTextLength',min:5,max:999}]}]},{type:'HorizontalLayout',children:[{type:'VerticalLayout',css:{marginTop:15},id:'thumbsSizeBlock',children:[{type:'Label',text:__('Thumbnail Size')},{type:'FlowLayout',verticalAlign:'middle',spacing:5,children:[{type:SizeSelector_7.SizeSelector,id:'thumbWidth',min:10,repeat:!1},{type:'Label',html:'&times;',id:'thumbSizeTimesLabel',css:{fontWeight:'normal',fontSize:18}},{type:'Label',text:__('Height')+':',id:'thumbSizeHeightLabel',css:{fontWeight:'normal'}},{type:SizeSelector_7.SizeSelector,id:'thumbHeight',min:10,repeat:!1}]}]},{type:'VerticalLayout',css:{marginTop:15},id:'thumbsPaddingBlock',children:[{type:'Label',text:__('Thumb padding (px)')},{type:SizeSelector_7.SizeSelector,id:'thumbPadding',min:0,max:999,repeat:!1}]},{type:'VerticalLayout',css:{marginTop:15},id:'captionBackgroundBlock',children:[{type:'Label',text:__('Caption Background')},{type:ColorPicker_4.ColorPicker,id:'captionBackground'}]}]},{type:'VerticalLayout',css:{marginTop:15},id:'thumbAlignBlock',children:[{type:'Label',text:__('Align')},{type:'HAlignSelector',id:'thumbAlign',justify:!1}]}]},{name:__('Style'),children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Title')},{type:TextControl_2.TextControl,id:'titleStyle',horizontal:!0,needLineHeight:!0}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Description')},{type:TextControl_2.TextControl,id:'descriptionStyle',horizontal:!0,needLineHeight:!0}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Date')},{type:TextControl_2.TextControl,id:'dateStyle',horizontal:!0,needLineHeight:!0}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Background')},{type:ColorPicker_4.ColorPicker,id:'background'}]}]}],callbackFunc:function(){applyData()}};var plugin,getData,thisFields;function build(elem,dataProvider){plugin=elem;getData=dataProvider;return uiLayout}
exports.build=build;function updateFields(){if(thisFields.layout.getValue()===BlogLayout_1.BlogLayout.TYPE_ONETHREE){thisFields.thumbWidth.setVisible(!1);thisFields.thumbSizeTimesLabel.setVisible(!1);thisFields.thumbSizeHeightLabel.setVisible(!0);thisFields.thumbAlignBlock.setVisible(!1)}else{thisFields.thumbWidth.setVisible(!0);thisFields.thumbSizeTimesLabel.setVisible(!0);thisFields.thumbSizeHeightLabel.setVisible(!1);thisFields.thumbAlignBlock.setVisible(!0)}
if(thisFields.displayShortText.getValue()){thisFields.shortTextLengthBlock.setVisible(!0)}else{thisFields.shortTextLengthBlock.setVisible(!1)}
var useThumbnails=thisFields.useThumbnails.getValue();thisFields.thumbsSizeBlock.setVisible(useThumbnails);thisFields.thumbAlignBlock.setVisible(useThumbnails);thisFields.thumbsPaddingBlock.setVisible(useThumbnails)}
function applyData(){var prop=plugin.getProperty("data");prop===null||prop===void 0?void 0:prop.triggerBeforeChange(plugin,!0);var data=getData();data.content.layout=thisFields.layout.getValue();data.content.itemsPerPage=thisFields.itemsPerPage.getValue();data.content.thumbWidth=thisFields.thumbWidth.getValue();data.content.thumbHeight=thisFields.thumbHeight.getValue();data.content.thumbAlign=thisFields.thumbAlign.getValue();data.content.thumbPadding=thisFields.thumbPadding.getValue();data.content.captionBackground=thisFields.captionBackground.getValue();data.content.titleStyle=thisFields.titleStyle.getValue();data.content.descriptionStyle=thisFields.descriptionStyle.getValue();data.content.dateStyle=thisFields.dateStyle.getValue();data.content.background=thisFields.background.getValue();data.content.displayShortText=thisFields.displayShortText.getValue();data.content.shortTextLength=thisFields.shortTextLength.getValue();data.content.displayTitle=thisFields.displayTitle.getValue();data.content.displayDate=thisFields.displayDate.getValue();data.content.category=thisFields.category.getValue();data.content.useThumbnails=thisFields.useThumbnails.getValue();plugin.updateStyle();prop===null||prop===void 0?void 0:prop.triggerChange(plugin,!0)}
function updateData(fields){thisFields=fields;var data=getData();thisFields.layout.setValue(data.content.layout);thisFields.itemsPerPage.setValue(data.content.itemsPerPage);thisFields.thumbWidth.setValue(data.content.thumbWidth);thisFields.thumbHeight.setValue(data.content.thumbHeight);thisFields.thumbAlign.setValue(data.content.thumbAlign);thisFields.thumbPadding.setValue(data.content.thumbPadding);thisFields.captionBackground.setValue(data.content.captionBackground);thisFields.titleStyle.setValue(data.content.titleStyle);thisFields.descriptionStyle.setValue(data.content.descriptionStyle);thisFields.dateStyle.setValue(data.content.dateStyle);thisFields.background.setValue(data.content.background);thisFields.displayShortText.setValue(data.content.displayShortText);thisFields.shortTextLength.setValue(data.content.shortTextLength);thisFields.displayTitle.setValue(data.content.displayTitle);thisFields.displayDate.setValue(data.content.displayDate);thisFields.category.reload();thisFields.category.setValue(data.content.category);thisFields.useThumbnails.setValue(data.content.useThumbnails);updateFields()}
exports.updateData=updateData});define("js/ui/MiniTabPane",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_38,jquery_58){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MiniTabPane=exports.Tab=void 0;var Tab=(function(){function Tab(id,title,onSelect){var _this=this;this.id=id;this.selected=!1;this.elem=(0,jquery_58.default)('<div>').attr('title',title).text(title).on('click',function(){return onSelect(_this)})}
Tab.prototype.setSelected=function(selected){if(this.selected==selected)
return;this.selected=selected;if(selected){this.elem.addClass('active')}else{this.elem.removeClass('active')}};Tab.prototype.setVisible=function(visible){if(visible){this.elem.show()}else{this.elem.hide()}};Tab.prototype.appendTo=function(parent){parent.append(this.elem)};return Tab}());exports.Tab=Tab;var MiniTabPane=(function(_super){__extends(MiniTabPane,_super);function MiniTabPane(tabs,onSelect){if(tabs===void 0){tabs=[]}
if(onSelect===void 0){onSelect=null}
var _this=_super.call(this)||this;_this.onSelect=onSelect;_this.selectedTab=null;_this.tabs=[];_this._elem.addClass('wb-ctrl-tabs');for(var _i=0,tabs_1=tabs;_i<tabs_1.length;_i++){var tab=tabs_1[_i];_this.addTab(tab.id,tab.title)}
return _this}
MiniTabPane.prototype.getSelectedTab=function(){if(!this.selectedTab)
throw new Error('Tab pane has no tabs');return this.selectedTab};MiniTabPane.prototype.addTab=function(id,title){var _this=this;var tab=new Tab(id,title,function(tab){return _this.selectTab(tab)});this.tabs.push(tab);tab.appendTo(this._elem);if(!this.selectedTab)
this.selectTab(tab);};MiniTabPane.prototype.setVisibleTab=function(id,visible){for(var _i=0,_a=this.tabs;_i<_a.length;_i++){var tab=_a[_i];if(tab.id===id)
tab.setVisible(visible);}};MiniTabPane.prototype.selectTab=function(tab){if(this.selectedTab===tab)
return;var lastTab=this.selectedTab;this.selectedTab=tab;if(lastTab)
lastTab.setSelected(!1);tab.setSelected(!0);if(typeof this.onSelect==='function')
this.onSelect.call(this,tab);};return MiniTabPane}(UIComponent_38.UIComponent));exports.MiniTabPane=MiniTabPane});define("js/ui/controls/base/CircleSliderControl",["require","exports","jquery","js/UIComponent","js/ui/NumControl"],function(require,exports,jquery_59,UIComponent_39,NumControl_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CircleSliderControl=void 0;var CircleSliderControl=(function(_super){__extends(CircleSliderControl,_super);function CircleSliderControl(realtime){if(realtime===void 0){realtime=!0}
var _this_1=_super.call(this,'div')||this;_this_1.options=null;_this_1.uiFields=null;_this_1.sliding=!1;_this_1._vertical=!1;_this_1._elem.addClass('wb-circle-slider-control');_this_1._slider=(0,jquery_59.default)('<div>').addClass('wb-circle-slider');_this_1._input=new NumControl_3.NumControl('°',360,function(value){if(!value&&value!==0)
value=0;value=Math.max(0,Math.min(360,value));_this_1._input.setValue(value);_this_1._sliderControl.setAngle(value);_this_1.onValueChanged();if(_this_1.options&&_this_1.uiFields&&_this_1.onChange&&typeof(_this_1.onChange)==='function'){_this_1.onChange.call(_this_1,_this_1.options,_this_1.uiFields)}},1).setStyle(NumControl_3.NumControlStyle.WidePostfix);_this_1._elem.append((0,jquery_59.default)('<div>').addClass('wb-circle-slider-wrap').append(_this_1._slider));_this_1._elem.append(_this_1._input.getElem());var options={clockwise:!0,startPos:'top',onSliderMove:null,onSliderUp:null};options[realtime?'onSliderMove':'onSliderUp']=function(value){if(!value&&value!==0)
value=0;value=Math.max(0,Math.min(360,value));_this_1._input.setValue(value);_this_1.onValueChanged();if(_this_1.options&&_this_1.uiFields&&_this_1.onChange&&typeof(_this_1.onChange)==='function'){_this_1.onChange.call(_this_1,_this_1.options,_this_1.uiFields)}};_this_1._sliderControl=new CircleSlider(_this_1._slider.get(0),options);return _this_1}
CircleSliderControl.prototype.buildInit=function(data,fields){this.options=data;this.uiFields=fields;this.onChange=data.change;this.setVertical(data.vertical)};CircleSliderControl.prototype.setOnChange=function(func){var _this_1=this;this.options={};this.uiFields={};this.setVertical(!1);this.onChange=function(){return func(_this_1.getValue())};return this};CircleSliderControl.prototype.getValue=function(){return this._sliderControl.getAngle()};CircleSliderControl.prototype.setValue=function(value){this._input.setValue(value);this._sliderControl.setAngle(value)};CircleSliderControl.prototype.getVertical=function(){return this._vertical};CircleSliderControl.prototype.setVertical=function(value){this._vertical=value;if(value){this._elem.addClass('vertical')}else{this._elem.removeClass('vertical')}
return this};CircleSliderControl.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1;if(this._enabled){this._elem.removeClass('disabled');this._sliderControl.setEnabled(!0);this._input.removeClass('disabled')}else{this._elem.addClass('disabled');this._sliderControl.setEnabled(!1);this._input.addClass('disabled')}
this._input.setEnabled(this._enabled)};CircleSliderControl.supportsMultipleObjectBindings=function(){return!1};CircleSliderControl.prototype.setCombinedBindingsValue=function(valueInfo){if(!this.sliding)
_super.prototype.setCombinedBindingsValue.call(this,valueInfo);};CircleSliderControl.prototype.destroy=function(){_super.prototype.destroy.call(this)};return CircleSliderControl}(UIComponent_39.UIComponent));exports.CircleSliderControl=CircleSliderControl;var CircleSlider=(function(){function CircleSlider(elem,options){this.enabled=!0;this.eventCallbacks={sliderMove:null,sliderUp:null,};this.root=elem;this.outputAngle=0;if(options){this.clockwise=options.clockwise||!1;this.snapMultiplier=options.snap||0;this.startPos=options.startPos||'right';this.eventCallbacks.sliderMove=options.onSliderMove||null;this.eventCallbacks.sliderUp=options.onSliderUp||null}else{this.clockwise=!1;this.snapMultiplier=0;this.startPos="right"}
this.startOffset=0;switch(this.startPos){case "top":this.startOffset=270;break;case "left":this.startOffset=180;break;case "bottom":this.startOffset=90;break;default:break}
this.hc=CircleSlider._createHandleContainerElem();this.handle=CircleSlider._createHandleElem();this.hc.appendChild(this.handle);this.root.appendChild(this.hc);this.hc.style.cssText="transform: rotate(".concat(this.startOffset,"deg);");this.active=!1;this._addEventListeners("mousedown","mousemove","mouseup");this._addEventListeners("touchstart","touchmove","touchend");var _this=this;this.root.addEventListener('click',function endFunc(ev){_this._mouseMoveHandler(ev)});this._mouseMoveHandler=this._mouseMoveHandler.bind(this)}
CircleSlider.prototype.setEnabled=function(value){this.enabled=value;if(this.enabled){this.handle.classList.remove('disabled')}else{this.handle.classList.add('disabled')}};CircleSlider.prototype.getAngle=function(){return this.outputAngle};CircleSlider.prototype.setAngle=function(angle){var rawAngle=this._formatInputAngle(angle);this._moveHandle(rawAngle)};CircleSlider.prototype._formatInputAngle=function(angle){var rawAngle=this.clockwise?CircleSlider._modulo((Math.round(angle)-360+this.startOffset),360):CircleSlider._modulo((360-Math.round(angle)+this.startOffset),360);return rawAngle};CircleSlider.prototype._addEventListeners=function(startEvent,moveEvent,endEvent){var _this_1=this;this.root.addEventListener(startEvent,function(e){e.preventDefault();if(!_this_1.active){_this_1.active=!0;document.addEventListener(moveEvent,_this_1._mouseMoveHandler,!1);var _this_2=_this_1;document.addEventListener(endEvent,function endFunc(ev){var _a;_this_2.active=!1;document.removeEventListener(moveEvent,_this_2._mouseMoveHandler,!1);if(_this_2.eventCallbacks.sliderUp&&typeof _this_2.eventCallbacks.sliderUp==='function'){_this_2.eventCallbacks.sliderUp(_this_2.outputAngle)}(_a=ev.currentTarget)===null||_a===void 0?void 0:_a.removeEventListener(endEvent,endFunc,!1)})}})};CircleSlider.prototype._mouseMoveHandler=function(e){e.preventDefault();if(this.enabled){this._moveHandle(this._getRawAngle(e))}};CircleSlider.prototype._moveHandle=function(rawAngle){var angle=rawAngle;if(this.snapMultiplier){var sm=this.snapMultiplier;var delta=Math.abs(angle-(Math.round(angle/sm)*sm));if(delta<=5){angle=Math.round(angle/sm)*sm}}
this.hc.style.cssText="transform: rotate(".concat(angle,"deg);");this.outputAngle=this._formatOutputAngle(angle);if(this.eventCallbacks.sliderMove&&typeof this.eventCallbacks.sliderMove==='function'){this.eventCallbacks.sliderMove(this.outputAngle)}};CircleSlider.prototype._formatOutputAngle=function(angle){var outputAngle=this.clockwise===!0?CircleSlider._modulo(((360+Math.round(angle))-this.startOffset),360):CircleSlider._modulo(((360-Math.round(angle))+this.startOffset),360);return outputAngle};CircleSlider.prototype._getRawAngle=function(e){var pivot=CircleSlider._getCenter(this.root);var mouse;if(e.type==="touchmove"){mouse={x:e.touches[0].clientX,y:e.touches[0].clientY,}}else{mouse={x:e.clientX,y:e.clientY,}}
return(CircleSlider._radToDeg(Math.atan2(mouse.y-pivot.y,mouse.x-pivot.x)))%360};CircleSlider._getCenter=function(elem){var rect=elem.getBoundingClientRect();return{x:rect.left+(rect.width/2),y:rect.top+(rect.height/2),}};CircleSlider._radToDeg=function(rad){return rad*(180/Math.PI)};CircleSlider._modulo=function(n,m){return((n%m)+m)%m};CircleSlider._createHandleContainerElem=function(){var hc=document.createElement("div");hc.className="cs-handle-container";return hc};CircleSlider._createHandleElem=function(){var h=document.createElement("div");h.className="cs-handle";return h};return CircleSlider}())});define("js/ui/controls/ShadowSelector",["require","exports","js/UIComponent","js/ColorPicker","js/VerticalLayout","js/Label","js/SliderControl","js/ui/controls/base/CircleSliderControl","jquery"],function(require,exports,UIComponent_40,ColorPicker_5,VerticalLayout_10,Label_6,SliderControl_2,CircleSliderControl_1,jquery_60){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ShadowSelector=void 0;var ShadowSelector=(function(_super){__extends(ShadowSelector,_super);function ShadowSelector(realtime){if(realtime===void 0){realtime=!0}
var _this=_super.call(this)||this;_this.forText=null;_this.updating=!1;_this.angle=new CircleSliderControl_1.CircleSliderControl(!1).setOnChange(function(){return _this.handleChange()}).setVertical(!1);_this.distance=new SliderControl_2.SliderControl().setOnChange(function(){return _this.handleChange()});if(realtime)
_this.distance.setOnSlide(function(){return _this.handleChange()});_this.distance.setMin(0);_this.distance.setMax(50);_this.distance.setUnit('px');_this.size=new SliderControl_2.SliderControl().setOnChange(function(){return _this.handleChange()});if(realtime)
_this.size.setOnSlide(function(){return _this.handleChange()});_this.size.setMin(0);_this.size.setMax(50);_this.size.setUnit('px');_this.blur=new SliderControl_2.SliderControl().setOnChange(function(){return _this.handleChange()});if(realtime)
_this.blur.setOnSlide(function(){return _this.handleChange()});_this.blur.setMin(0);_this.blur.setMax(50);_this.blur.setUnit('px');_this.color=new ColorPicker_5.ColorPicker().setOnChange(function(){return _this.handleChange()});_this.presets=new Presets(_this,function(value){value.color=_this.color.getValue();_this.setValue(value);_this.handleChange()});_this.presets.setForText();var elems=[_this.distanceLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Distance')),_this.distance,]),_this.angleLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Angle')),_this.angle,]),_this.sizeLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Size')),_this.size,]),_this.blurLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Blur')),_this.blur,]),_this.colorLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Color')),_this.color,]),_this.colorLayout=new VerticalLayout_10.VerticalLayout().addAllChildren([new Label_6.Label(__('Style')),_this.presets,]),];var content=new VerticalLayout_10.VerticalLayout().setSpacing(12).addAllChildren(elems);_this._elem.addClass('wb-btn-style-control').append(content.getElem());return _this}
ShadowSelector.prototype.handleChange=function(){if(!this.updating){this.angleLayout.setVisible(this.distance.getValue()!==0);this.onValueChanged();if(typeof this.onChange==='function'){this.onChange()}}};ShadowSelector.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_3=data.change;this.onChange=function(){return changeFunc_3.call(_this,fields)}}
if(data.value)
this.setValue(data.value);if(data.forText)
this.setForText(data.forText);};ShadowSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("forText" in options)
this.setForText(options.forText);};ShadowSelector.parseInt=function(val){var n=parseInt(''+val,10);return isNaN(n)?0:n};ShadowSelector.createValue=function(fromValue,forText){if(fromValue&&(fromValue.angle!=135||fromValue.distance!=0||fromValue.size!=0||fromValue.blur!=0)){var value={angle:(fromValue&&fromValue.angle)?fromValue.angle:135,distance:(fromValue&&fromValue.distance)?fromValue.distance:0,size:(fromValue&&fromValue.size)?fromValue.size:0,blur:(fromValue&&fromValue.blur)?fromValue.blur:0,color:(fromValue&&fromValue.color)?fromValue.color:'',forText:(fromValue&&fromValue.forText)?fromValue.forText:forText,};if(value.forText){value.css={'text-shadow':[Math.round(1000*value.distance*Math.sin(value.angle/180*Math.PI))/1000+"px",Math.round(1000*-value.distance*Math.cos(value.angle/180*Math.PI))/1000+"px",(value.blur)+"px",(value.color),].join(" ")}}else{value.css={'box-shadow':[Math.round(1000*value.distance*Math.sin(value.angle/180*Math.PI))/1000+"px",Math.round(1000*-value.distance*Math.cos(value.angle/180*Math.PI))/1000+"px",(value.blur)+"px",(value.size)+"px",(value.color),].join(" ")}}
return value}
return null};ShadowSelector.prototype.getValue=function(){return ShadowSelector.createValue({angle:ShadowSelector.parseInt(this.angle.getValue()),distance:ShadowSelector.parseInt(this.distance.getValue()),size:ShadowSelector.parseInt(this.size.getValue()),blur:ShadowSelector.parseInt(this.blur.getValue()),color:this.color.getValue(),forText:!!this.forText,},!!this.forText)};ShadowSelector.prototype.setValue=function(value){this.updating=!0;if(!value){value={angle:135,distance:0,size:0,blur:0,color:'rgba(0,0,0,0.3)',forText:!!this.forText,}}
this.angle.setValue(ShadowSelector.parseInt(value.angle));this.distance.setValue(ShadowSelector.parseInt(value.distance));this.size.setValue(ShadowSelector.parseInt(value.size));this.blur.setValue(ShadowSelector.parseInt(value.blur));this.color.setValue(value.color);this.updating=!1;this.handleChange()};ShadowSelector.supportsMultipleObjectBindings=function(){return!1};ShadowSelector.prototype.setOnChange=function(callback){this.onChange=callback;return this};ShadowSelector.prototype.setForText=function(value){this.forText=value;this.presets.setForText();this.sizeLayout.setVisible(!value);this.handleChange()};ShadowSelector.prototype.getForText=function(){return this.forText};ShadowSelector.prototype.destroy=function(){this.angle.destroy();this.distance.destroy();this.size.destroy();this.blur.destroy();this.color.destroy();_super.prototype.destroy.call(this)};return ShadowSelector}(UIComponent_40.UIComponent));exports.ShadowSelector=ShadowSelector;var Presets=(function(_super){__extends(Presets,_super);function Presets(control,onSelect){var _this=_super.call(this)||this;_this.control=control;_this.onSelect=onSelect;_this._elem.addClass('btn-group wb-shadow-preset-ctrl');_this.presets=[{preview:0,value:{angle:135,distance:2,size:0,blur:0,color:'rgba(0,0,0,0.3)',css:{},forText:!!control.getForText()}},{preview:4,value:{angle:135,distance:4,size:0,blur:0,color:'rgba(0,0,0,0.3)',css:{},forText:!!control.getForText()}},{preview:8,value:{angle:135,distance:6,size:0,blur:2,color:'rgba(0,0,0,0.3)',css:{},forText:!!control.getForText()}},{preview:10,value:{angle:135,distance:8,size:0,blur:4,color:'rgba(0,0,0,0.3)',css:{},forText:!!control.getForText()}},{preview:100,value:{angle:135,distance:10,size:0,blur:8,color:'rgba(0,0,0,0.3)',css:{},forText:!!control.getForText()}},];return _this}
Presets.prototype.renderButtons=function(){this._elem.empty();for(var _i=0,_a=this.presets;_i<_a.length;_i++){var p=_a[_i];this._elem.append(this.buildButton(ShadowSelector.createValue(p.value,!!this.control.getForText())))}};Presets.prototype.buildButton=function(value){var _this=this;var css={};if(value&&value.css){css=(this.control.getForText()?{'text-shadow':value.css['text-shadow']}:{'box-shadow':value.css['box-shadow']})}
var button=(0,jquery_60.default)('<button>').addClass('btn btn-default wb-ctrl-preview').append((0,jquery_60.default)('<span>').css(css)).on('click',function(){return _this.onSelect.call(_this,value)});if(this.control.getForText()){button.addClass('letter')}else{button.removeClass('letter')}
return button};Presets.prototype.setForText=function(){this.renderButtons()};return Presets}(UIComponent_40.UIComponent))});define("js/ui/controls/popovers/ShadowPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/FlowLayout","js/ui/controls/ShadowSelector"],function(require,exports,Popover_7,VerticalLayout_11,FlowLayout_7,ShadowSelector_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ShadowPopover=void 0;var ShadowPopover=(function(_super){__extends(ShadowPopover,_super);function ShadowPopover(triggerBtn,onChange,title,realtime){if(title===void 0){title=__('Shadow')}
if(realtime===void 0){realtime=!0}
var _this=_super.call(this,triggerBtn,title,null,'wb-shadow-pop')||this;_this.onChange=onChange;_this.options=null;_this.shadowElem=new ShadowSelector_1.ShadowSelector(realtime);_this.shadowElem.setOnChange(function(){_this.onChange(_this.shadowElem.getValue())});_this.setContent(new FlowLayout_7.FlowLayout().setSpacing('full').addClass('wb-shadow-dialog').addAllChildren([new VerticalLayout_11.VerticalLayout().css({minWidth:'200px',maxWidth:'300px'}).addClass('wb-shadow-dialog-shadow-block').setSpacing(12).addAllChildren([_this.shadowElem,]),]).getElem());return _this}
ShadowPopover.prototype.updateOptionsVisibility=function(){if(!this.options)
return;var opt=this.options};ShadowPopover.prototype.edit=function(options){this.options=__assign({},options);this.updateOptionsVisibility();this.setVisible(!0)};ShadowPopover.prototype.setForText=function(value){this.shadowElem.setForText(value)};ShadowPopover.prototype.getForText=function(){return this.shadowElem.getForText()};ShadowPopover.prototype.setValue=function(value){this.shadowElem.setValue(value)};ShadowPopover.prototype.getValue=function(){return this.shadowElem.getValue()};ShadowPopover.prototype.dispose=function(){this.shadowElem.destroy();_super.prototype.dispose.call(this)};return ShadowPopover}(Popover_7.Popover));exports.ShadowPopover=ShadowPopover});define("js/ui/controls/popovers/ShadowDialogControl",["require","exports","js/UIComponent","js/ui/ThumbEditorControl","jquery","js/ui/controls/popovers/ShadowPopover"],function(require,exports,UIComponent_41,ThumbEditorControl_4,jquery_61,ShadowPopover_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ShadowDialogControl=void 0;var defaultOptions={};var ShadowDialogControl=(function(_super){__extends(ShadowDialogControl,_super);function ShadowDialogControl(options,realtime){if(realtime===void 0){realtime=!0}
var _this=_super.call(this)||this;_this.onChange=null;_this.forTextChanged=!1;_this.options=jquery_61.default.extend(!0,{},defaultOptions,options);_this.thumbCtrl=new ThumbEditorControl_4.ThumbEditorControl().onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});var preview=_this.thumbCtrl.getPreviewElem();preview.css({display:'flex',alignItems:'center',justifyContent:'center'}).append((_this.emptyIconElem=(0,jquery_61.default)('<span>')));_this._elem.addClass('wb-shadow-dialog-ctrl').append(_this.thumbCtrl.getElem());_this.popover=new ShadowPopover_1.ShadowPopover(_this.thumbCtrl.getElem(),function(value){_this.handleChange();_this.renderPreview()},undefined,realtime);return _this}
ShadowDialogControl.prototype.buildInit=function(data,fields){this.setOptions(data)};ShadowDialogControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);this.setOptions(options)};ShadowDialogControl.prototype.setOptions=function(data){if(data.value)
this.setValue(data.value);this.setOnChange(data.change);if("forText" in data)
this.setForText(data.forText);};ShadowDialogControl.prototype.setForText=function(value){this.forTextChanged=this.getForText()!==null&&this.getForText()!=value;if(value){this.emptyIconElem.addClass('letter');this.emptyIconElem.text('A')}else{this.emptyIconElem.removeClass('letter');this.emptyIconElem.text('')}
this.popover.setForText(value)};ShadowDialogControl.prototype.getForText=function(){return this.popover.getForText()};ShadowDialogControl.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};ShadowDialogControl.prototype.clear=function(){this.setValue(null);this.handleChange()};ShadowDialogControl.prototype.edit=function(){if(this.popover&&this.popover.isVisible()){this.popover.setVisible(!1);return}
this.popover.edit(this.options)};ShadowDialogControl.prototype.handleChange=function(){if(this.onChange&&typeof this.onChange==='function'){this.onChange.call(this,{})}
this.onValueChanged(this.forTextChanged);this.forTextChanged=!1};ShadowDialogControl.prototype.renderPreview=function(){this.emptyIconElem.css("border","");this.emptyIconElem.css("box-shadow","");this.emptyIconElem.css("text-shadow","");var value=this.getValue();if(value&&value.css){if(this.getForText()){this.emptyIconElem.css("text-shadow",value.css['text-shadow']||"")}else{this.emptyIconElem.css("box-shadow",value.css['box-shadow']||"")}}else{if(!this.getForText()){this.emptyIconElem.css("border","1px dashed #ddd")}}};ShadowDialogControl.prototype.triggerChange=function(){this.handleChange()};ShadowDialogControl.prototype.updatePosition=function(){if(this.popover)
this.popover.updatePosition();};ShadowDialogControl.prototype.getValue=function(){return this.popover.getValue()};ShadowDialogControl.prototype.setValue=function(obj){if(obj){this.emptyIconElem.removeClass('empty')}else{this.emptyIconElem.addClass('empty')}
this.popover.setValue(obj);this.renderPreview()};ShadowDialogControl.prototype.setOnChange=function(onChange){this.onChange=onChange};ShadowDialogControl.supportsMultipleObjectBindings=function(){return!1};return ShadowDialogControl}(UIComponent_41.UIComponent));exports.ShadowDialogControl=ShadowDialogControl});define("js/ui/ButtonStyleControl",["require","exports","js/UIComponent","js/ui/MiniTabPane","js/FontStyleSelector","js/ColorPicker","js/BackgroundControl","js/BorderControl","js/Label","js/FlowLayout","js/VerticalLayout","js/ui/controls/popovers/ShadowDialogControl"],function(require,exports,UIComponent_42,MiniTabPane_1,FontStyleSelector_2,ColorPicker_6,BackgroundControl_3,BorderControl_1,Label_7,FlowLayout_8,VerticalLayout_12,ShadowDialogControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ButtonStyleControl=void 0;var ButtonStyleControl=(function(_super){__extends(ButtonStyleControl,_super);function ButtonStyleControl(onChange,singleBorder,showRadius){if(onChange===void 0){onChange=null}
if(singleBorder===void 0){singleBorder=!1}
if(showRadius===void 0){showRadius=!1}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.singleBorder=singleBorder;_this.ignoreChange=!1;_this.showRadius=!1;_this.useShadows=!1;_this.useStyle=!0;_this.useBorder=!0;_this.useBackground=!0;_this.useOnlyBackgroundColor=!1;_this.useColor=!0;_this.useActiveTab=!0;_this.shadowForText=!1;_this.style=new FontStyleSelector_2.FontStyleSelector(function(){return _this.handleChange()});_this.color=new ColorPicker_6.ColorPicker().setOnChange(function(){return _this.handleChange()});_this.bg=new BackgroundControl_3.BackgroundControl({useSize:!0,useOpacity:!0});_this.bg.onChange=function(){return _this.handleChange()};_this.border=new BorderControl_1.BorderControl('bottom',!0);_this.border.setAbsPopover(!0);_this.border.setOnChange(function(){return _this.handleChange()});_this.shadow=new ShadowDialogControl_1.ShadowDialogControl();_this.shadow.setOnChange(function(){return _this.handleChange()});_this.tabPane=new MiniTabPane_1.MiniTabPane([{id:'normal',title:__('Default')},{id:'hover',title:__('Hover')},{id:'active',title:__('Active')},],function(tab){return _this.selectTab(tab)});_this._elem.addClass('wb-btn-style-control').append(new VerticalLayout_12.VerticalLayout().addAllChildren([_this.tabPane,new FlowLayout_8.FlowLayout().addAllChildren([(_this.styleBlock=new VerticalLayout_12.VerticalLayout()).css({marginTop:12}).addAllChildren([new Label_7.Label(__('Style')),_this.style,]),(_this.colorBlock=new VerticalLayout_12.VerticalLayout()).css({marginTop:12}).addAllChildren([new Label_7.Label(__('Color')),_this.color,]),(_this.bgBlock=new VerticalLayout_12.VerticalLayout()).css({marginTop:12}).addAllChildren([new Label_7.Label(__('Background')),_this.bg,]),(_this.borderBlock=new VerticalLayout_12.VerticalLayout()).css({marginTop:12}).addAllChildren([new Label_7.Label(__('Border')),_this.border,]),(_this.shadowBlock=new VerticalLayout_12.VerticalLayout()).css({marginTop:12}).addAllChildren([new Label_7.Label(__('Shadow')),_this.shadow,]),]),]).getElem());_this.setShowRadius(showRadius);return _this}
ButtonStyleControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}
if('singleBorder' in data)
this.singleBorder=data.singleBorder?!0:!1;if('showRadius' in data)
this.setShowRadius(data.showRadius?!0:!1);if('useShadows' in data)
this.setUseShadows(data.useShadows?!0:!1);if('useStyle' in data)
this.setUseStyle(data.useStyle?!0:!1);if('useBorder' in data)
this.setUseBorder(data.useBorder?!0:!1);if('useBackground' in data)
this.setUseBackground(data.useBackground?!0:!1);if('useOnlyBackgroundColor' in data)
this.setUseOnlyBackgroundColor(data.useOnlyBackgroundColor?!0:!1);if('useColor' in data)
this.setUseColor(data.useColor?!0:!1);if('useActiveTab' in data)
this.setUseActiveTab(data.useActiveTab?!0:!1);if('shadowForText' in data)
this.setShadowForText(data.shadowForText?!0:!1);};ButtonStyleControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if('singleBorder' in options)
this.singleBorder=options.singleBorder?!0:!1;if('showRadius' in options)
this.setShowRadius(options.showRadius?!0:!1);if('useShadows' in options)
this.setUseShadows(options.useShadows?!0:!1);if('useStyle' in options)
this.setUseStyle(options.useStyle?!0:!1);if('useBorder' in options)
this.setUseBorder(options.useBorder?!0:!1);if('useBackground' in options)
this.setUseBackground(options.useBackground?!0:!1);if('useOnlyBackgroundColor' in options)
this.setUseOnlyBackgroundColor(options.useOnlyBackgroundColor?!0:!1);if('useColor' in options)
this.setUseColor(options.useColor?!0:!1);if('useActiveTab' in options)
this.setUseActiveTab(options.useActiveTab?!0:!1);if('shadowForText' in options)
this.setShadowForText(options.shadowForText?!0:!1);};ButtonStyleControl.prototype.setShowRadius=function(showRadius){this.showRadius=showRadius;this.border.setShowRadius(showRadius)};ButtonStyleControl.prototype.setUseShadows=function(useShadows){this.useShadows=useShadows;this.shadowBlock.setVisible(useShadows)};ButtonStyleControl.prototype.setUseStyle=function(useStyle){this.useStyle=useStyle;this.styleBlock.setVisible(useStyle);this.color.setBig(!useStyle)};ButtonStyleControl.prototype.setUseBorder=function(useBorder){this.useBorder=useBorder;this.borderBlock.setVisible(useBorder)};ButtonStyleControl.prototype.setUseBackground=function(useBackground){this.useBackground=useBackground;this.bgBlock.setVisible(useBackground)};ButtonStyleControl.prototype.setUseOnlyBackgroundColor=function(useOnlyBackgroundColor){this.useOnlyBackgroundColor=useOnlyBackgroundColor;this.bg.setComponentOptions({useImage:!useOnlyBackgroundColor,useFullWidth:!useOnlyBackgroundColor,})};ButtonStyleControl.prototype.setUseColor=function(useColor){this.useColor=useColor;this.colorBlock.setVisible(useColor)};ButtonStyleControl.prototype.setUseActiveTab=function(useActiveTab){this.useActiveTab=useActiveTab;this.tabPane.setVisibleTab('active',useActiveTab)};ButtonStyleControl.prototype.setShadowForText=function(shadowForText){this.ignoreChange=!0;this.shadowForText=shadowForText;this.shadow.setForText(shadowForText);this.ignoreChange=!1};ButtonStyleControl.prototype.handleChange=function(){if(this.ignoreChange)
return;this.ignoreChange=!0;var tab=this.tabPane.getSelectedTab();if(tab.id=='normal'){if(this.useStyle)
this.value.normal.style=this.style.getValue();if(this.useBorder)
this.value.normal.border=this.border.getValue();if(this.useBackground)
this.value.normal.bg=this.bg.getValue();if(this.useColor)
this.value.normal.color=this.color.getValue();if(this.useShadows)
this.value.normal.shadow=this.shadow.getValue();if(this.showRadius)
this.value.normal.corners=(0,BorderControl_1.toRadiusValue)(this.border.getValue());}else if(tab.id=='hover'){if(this.useStyle)
this.value.hover.style=this.style.getValue();if(this.useBackground)
this.value.hover.bg=this.bg.getValue();if(this.useColor)
this.value.hover.color=this.color.getValue();if(this.useShadows)
this.value.hover.shadow=this.shadow.getValue();if(!this.singleBorder){this.value.hover.border=this.border.getValue();if(this.showRadius){this.value.hover.corners=(0,BorderControl_1.toRadiusValue)(this.value.hover.border)}}}else if(tab.id=='active'){if(this.useStyle)
this.value.active.style=this.style.getValue();if(this.useBackground)
this.value.active.bg=this.bg.getValue();if(this.useColor)
this.value.active.color=this.color.getValue();if(this.useShadows)
this.value.active.shadow=this.shadow.getValue();if(!this.singleBorder){this.value.active.border=this.border.getValue();if(this.showRadius){this.value.active.corners=(0,BorderControl_1.toRadiusValue)(this.value.active.border)}}}
if(typeof this.onChange==='function')
this.onChange();this.onValueChanged();this.ignoreChange=!1};ButtonStyleControl.prototype.selectTab=function(tab){if(!this.value)
return;this.ignoreChange=!0;if(tab.id=='normal'){this.style.setValue(this.value.normal.style);this.color.setValue(this.value.normal.color);this.bg.setValue(this.value.normal.bg);this.border.setValue(this.value.normal.border?this.value.normal.border:null);this.shadow.setValue(this.value.normal.shadow?this.value.normal.shadow:null);this.borderBlock.setVisible(this.useBorder)}else if(tab.id=='hover'){this.style.setValue(this.value.hover.style);this.color.setValue(this.value.hover.color);this.bg.setValue(this.value.hover.bg);this.border.setValue(this.value.hover.border?this.value.hover.border:null);this.shadow.setValue(this.value.hover.shadow?this.value.hover.shadow:null);this.borderBlock.setVisible(this.useBorder&&!this.singleBorder)}else if(tab.id=='active'){this.style.setValue(this.value.active.style);this.color.setValue(this.value.active.color);this.bg.setValue(this.value.active.bg);this.border.setValue(this.value.active.border?this.value.active.border:null);this.shadow.setValue(this.value.active.shadow?this.value.active.shadow:null);this.borderBlock.setVisible(this.useBorder&&!this.singleBorder)}
this.ignoreChange=!1};ButtonStyleControl.prototype.destroy=function(){this.style.destroy();this.color.destroy();this.bg.destroy();this.border.destroy();this.tabPane.destroy();this.shadow.destroy();_super.prototype.destroy.call(this)};ButtonStyleControl.prototype.getValue=function(){return{normal:__assign({},this.value.normal),hover:__assign({},this.value.hover),active:__assign({},this.value.active),}};ButtonStyleControl.prototype.setValue=function(value){this.value={normal:__assign({},value.normal),hover:__assign({},value.hover),active:__assign({},value.active),};this.selectTab(this.tabPane.getSelectedTab())};return ButtonStyleControl}(UIComponent_42.UIComponent));exports.ButtonStyleControl=ButtonStyleControl});define("js/ui/MenuStyleControl",["require","exports","js/UIComponent","js/ui/MiniTabPane","js/BackgroundControl","js/BorderControl","js/CheckBox","js/Label","js/VerticalLayout","js/FlowLayout","js/SizeSelector","js/ui/RadioBoxGroupControl","ModeManager","js/ui/controls/popovers/ShadowDialogControl","js/HAlignSelector","js/ui/ButtonStyleControl"],function(require,exports,UIComponent_43,MiniTabPane_2,BackgroundControl_4,BorderControl_2,CheckBox_5,Label_8,VerticalLayout_13,FlowLayout_9,SizeSelector_8,RadioBoxGroupControl_1,ModeManager_2,ShadowDialogControl_2,HAlignSelector_2,ButtonStyleControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MenuStyleControl=void 0;var MenuStyleControl=(function(_super){__extends(MenuStyleControl,_super);function MenuStyleControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.ignoreChange=!1;_this.bg=new BackgroundControl_4.BackgroundControl();_this.bg.onChange=function(){return _this.handleChange()};_this.border=new BorderControl_2.BorderControl('bottom',!1,!1);_this.border.setAbsPopover(!0);_this.border.setOnChange(function(){return _this.handleChange()});_this.maxWidth=new SizeSelector_8.SizeSelector();_this.maxWidth.setPrecision(0);_this.maxWidth.step=1,_this.maxWidth.setFixedWidth(90);_this.maxWidth.setSmall(!0);_this.maxWidth.setSpinnerVisible(!1);_this.maxWidth.setUnitsVisible(!0);_this.maxWidth.setUnitsWidth(47);_this.maxWidth.setUnits([{suffix:'',label:'px',min:1},]);_this.maxWidth.onChange(function(){return _this.handleChange()});_this.mobileMaxWidth=new SizeSelector_8.SizeSelector();_this.mobileMaxWidth.setPrecision(0);_this.mobileMaxWidth.step=1,_this.mobileMaxWidth.setFixedWidth(90);_this.mobileMaxWidth.setSmall(!0);_this.mobileMaxWidth.setSpinnerVisible(!1);_this.mobileMaxWidth.setUnitsVisible(!0);_this.mobileMaxWidth.setUnitsWidth(47);_this.mobileMaxWidth.setUnits([{fixedValue:'auto',label:__('auto')},{suffix:'',label:'px',min:1},]);_this.mobileMaxWidth.onChange(function(){return _this.handleChange()});_this.mobileAlign=new HAlignSelector_2.HAlignSelector(!1);_this.mobileAlign.on('change',function(){return _this.handleChange()});_this.multiline=new CheckBox_5.default(__('Multi-line'));_this.multiline.onChange(function(){return _this.handleChange()});_this.collapse=new CheckBox_5.default(__('Switch to mobile mode'));_this.collapse.setHelpText(__('If enabled, menu will be switched to mobile mode starting from the selected view mode.'),'right');_this.collapse.on('change',function(){return _this.handleChange()});_this.collapseMode=new RadioBoxGroupControl_1.RadioBoxGroupControl();_this.collapseMode.setOptions([{value:ModeManager_2.default.MODE_TV,label:__('Wide'),icon:'fa fa-desktop'},{value:ModeManager_2.default.MODE_DESKTOP,label:__('Desktop'),icon:'fa fa-laptop'},{value:ModeManager_2.default.MODE_TABLET,label:__('Tablet'),icon:'fa fa-tablet'},{value:ModeManager_2.default.MODE_PHONE,label:__('Phone'),icon:'fa fa-mobile'},]);_this.collapseMode.setValue(ModeManager_2.default.MODE_TV);_this.collapseMode.getElem().css({fontSize:'12px'});_this.collapseMode.on('click',function(){_this.handleChange()});_this.collapseStyle=new ButtonStyleControl_1.ButtonStyleControl(function(){return _this.handleChange()});_this.collapseStyle.setComponentOptions({useShadows:!1,useColor:!0,useStyle:!1,useOnlyBackgroundColor:!1,useBackground:!1,useBorder:!0,});_this.tabPane=new MiniTabPane_2.MiniTabPane([{id:'menu',title:__('Menu')},{id:'sub',title:__('Submenu')},{id:'mobile',title:__('Mobile')},],function(tab){return _this.selectTab(tab)});_this.collapseChooser=new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__("Starts on")),_this.collapseMode]).setVisible(!1);_this.collapseBlock=new VerticalLayout_13.VerticalLayout().addAllChildren([_this.collapse,_this.collapseChooser.css({marginLeft:'22px',marginTop:'12px'})]);_this.shadow=new ShadowDialogControl_2.ShadowDialogControl();_this.shadow.setOnChange(function(){return _this.handleChange()});_this._elem.addClass('wb-btn-style-control').append(new VerticalLayout_13.VerticalLayout().setSpacing(12).addAllChildren([_this.tabPane,new FlowLayout_9.FlowLayout().addAllChildren([new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__('Background')),_this.bg,]),(_this.borderBlock=new VerticalLayout_13.VerticalLayout()).addAllChildren([new Label_8.Label(__('Border')),_this.border,]),_this.shadowBlock=new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__('Shadow')),_this.shadow,]),]),_this.collapseStyleBlock=new VerticalLayout_13.VerticalLayout().addAllChildren([_this.collapseStyle,]),_this.multilineBlock=new FlowLayout_9.FlowLayout().addAllChildren([new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__('Width')),_this.maxWidth,]),new VerticalLayout_13.VerticalLayout().addAllChildren([_this.multiline.css({marginTop:23}).setHelpText(__('Allow menu items to wrap to multiple lines'),'right'),]),]),new FlowLayout_9.FlowLayout().addAllChildren([_this.mobileMaxBlock=new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__('Width')),_this.mobileMaxWidth,]),_this.mobileAlignBlock=new VerticalLayout_13.VerticalLayout().addAllChildren([new Label_8.Label(__('Alignment')),_this.mobileAlign,]),]),_this.collapseBlock,]).getElem());return _this}
MenuStyleControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}};MenuStyleControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};MenuStyleControl.prototype.destroy=function(){this.bg.destroy();this.border.destroy();this.borderBlock.destroy();this.maxWidth.destroy();this.mobileMaxWidth.destroy();this.mobileAlign.destroy();this.multiline.destroy();this.shadow.destroy();this.shadowBlock.destroy();this.collapseStyle.destroy();this.collapseStyleBlock.destroy();this.collapse.destroy();this.collapseMode.destroy();this.collapseBlock.destroy();this.collapseChooser.destroy();this.tabPane.destroy();_super.prototype.destroy.call(this)};MenuStyleControl.prototype.handleChange=function(){if(this.ignoreChange)
return;this.ignoreChange=!0;var tab=this.tabPane.getSelectedTab();if(tab.id=='menu'){this.value.menu.bg=this.bg.getValue();this.value.menu.border=this.border.getValue()}else if(tab.id=='sub'){this.value.sub.bg=this.bg.getValue();this.value.sub.maxWidth=this.maxWidth.getValue();this.value.sub.multiline=this.multiline.getValue();this.value.sub.shadow=this.shadow.getValue()}else if(tab.id=='mobile'){this.value.mobile.bg=this.bg.getValue();this.value.mobile.collapseStyle=this.collapseStyle.getValue();this.value.mobile.maxWidth=this.mobileMaxWidth.getValue();this.value.mobile.align=this.mobileAlign.getValue();this.mobileAlignBlock.setVisible(this.mobileMaxWidth.getValue()!=='auto')}
this.value.collapse=this.collapse.getValue();this.value.collapseMode=this.collapseMode.getValue();if(typeof this.onChange==='function')
this.onChange();this.onValueChanged();this.ignoreChange=!1};MenuStyleControl.prototype.selectTab=function(tab){if(!this.value)
return;this.ignoreChange=!0;this.collapseBlock.setVisible(!0);this.collapse.setValue(this.value.collapse?this.value.collapse:!1);if(this.value.collapse){if(this.value.collapseMode!==null){this.collapseMode.setValue(this.value.collapseMode)}
this.collapseChooser.getElem().show()}else{this.collapseChooser.getElem().hide()}
if(tab.id=='menu'){this.bg.setValue(this.value.menu.bg);this.border.setValue(this.value.menu.border?this.value.menu.border:null);this.borderBlock.setVisible(!0);this.shadowBlock.setVisible(!1);this.multilineBlock.setVisible(!1);this.mobileMaxBlock.setVisible(!1);this.mobileAlignBlock.setVisible(!1);this.collapseStyleBlock.setVisible(!1)}else if(tab.id=='sub'){this.bg.setValue(this.value.sub.bg);this.borderBlock.setVisible(!1);this.shadow.setValue(this.value.sub.shadow||null);this.shadowBlock.setVisible(!0);this.multilineBlock.setVisible(!0);this.maxWidth.setValue((this.value.sub.maxWidth==='auto')?320:(this.value.sub.maxWidth||320));this.multiline.setValue(!!this.value.sub.multiline);this.mobileMaxBlock.setVisible(!1);this.mobileAlignBlock.setVisible(!1);this.collapseStyleBlock.setVisible(!1)}else if(tab.id=='mobile'){this.bg.setValue(this.value.mobile.bg);this.collapseStyle.setValue(this.value.mobile.collapseStyle);this.borderBlock.setVisible(!1);this.shadowBlock.setVisible(!1);this.multilineBlock.setVisible(!1);this.mobileMaxBlock.setVisible(!0);this.mobileMaxWidth.setValue(this.value.mobile.maxWidth?this.value.mobile.maxWidth:'auto');this.mobileAlign.setValue(this.value.mobile.align?this.value.mobile.align:'left');this.mobileAlignBlock.setVisible(this.mobileMaxWidth.getValue()!=='auto');this.collapseStyleBlock.setVisible(!0)}
this.ignoreChange=!1};MenuStyleControl.prototype.getValue=function(){return{menu:__assign({},this.value.menu),sub:__assign({},this.value.sub),mobile:__assign({},this.value.mobile),collapse:this.value.collapse,collapseMode:this.value.collapseMode}};MenuStyleControl.prototype.setValue=function(value){this.value={menu:__assign({},value.menu),sub:__assign({},value.sub),mobile:__assign({},value.mobile),collapse:value.collapse,collapseMode:value.collapseMode};this.selectTab(this.tabPane.getSelectedTab())};return MenuStyleControl}(UIComponent_43.UIComponent));exports.MenuStyleControl=MenuStyleControl});define("js/ui/ScriptEditDialog",["require","exports","Dialog","js/HorizontalLayout","js/TextField","js/VerticalLayout","js/Label","js/Service","jquery"],function(require,exports,Dialog_2,HorizontalLayout_2,TextField_2,VerticalLayout_14,Label_9,Service_12,jquery_62){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ScriptEditDialog=void 0;var ScriptEditDialog=(function(_super){__extends(ScriptEditDialog,_super);function ScriptEditDialog(){var _this=_super.call(this,__('Edit'),!1)||this;_this.deferred=null;_this.libDlg=null;_this.useMedia=!0;_this.setContent(new Service_12.Service.UIBuilder({type:VerticalLayout_14.VerticalLayout,children:[{type:HorizontalLayout_2.HorizontalLayout,columnWeights:[9,3],children:[{type:Label_9.Label,text:__('HTML code')},]},{type:TextField_2.TextField,id:'code',textArea:!0,ace:!0,placeholder:__('Click to edit script'),fixedWidth:12,css:{height:240,marginBottom:0}},]},_this.fields));_this.addButton(__('Cancel'),function(){return _this.onCancel()});_this.addButton(__('Apply'),function(){return _this.onApply()},!0);_this.footerElem.addClass('wb-script-editor-dlg-footer');_this.setFooterVisible(!0);_this.setUseMedia(!1);return _this}
ScriptEditDialog.prototype.setUseMedia=function(use){var _this=this;if(this.useMedia==use)
return;this.useMedia=use;this.removeButton(__('Cancel'));this.removeButton(__('Apply'));var name=__('Click to add file(s)');if(use){this.addButton(name,function(){return _this.insertMedia()},!1,'pull-left')}else{this.removeButton(name)}
this.addButton(__('Cancel'),function(){return _this.onCancel()});this.addButton(__('Apply'),function(){return _this.onApply()},!0)};ScriptEditDialog.prototype.setPlaceholder=function(value){this.fields.code.setPlaceholder(value)};ScriptEditDialog.prototype.insertMedia=function(){var _this=this;if(!this.libDlg){this.libDlg=Service_12.Service.mediaLibrary.open(__('Select media'),!1,'all',!1);var dlg=this.libDlg;dlg.addButton(__('Cancel'));dlg.addButton(__('Select'),function(){var list=dlg.getSelectedFiles(!1);if(list.length>0){_this.fields.code.focus();_this.fields.code.insertAtCursor(list[0])}
dlg.hide()},!0)}
this.libDlg.clearFileSelection();this.libDlg.show()};ScriptEditDialog.prototype.onCancel=function(){this.setVisible(!1);if(this.deferred)
this.deferred.reject();};ScriptEditDialog.prototype.onApply=function(){this.setVisible(!1);if(this.deferred)
this.deferred.resolve(this.fields.code.getValue());};ScriptEditDialog.prototype.edit=function(value){this.fields.code.setValue(value);this.setVisible(!0);this.deferred=jquery_62.default.Deferred();return this.deferred.promise()};return ScriptEditDialog}(Dialog_2.default));exports.ScriptEditDialog=ScriptEditDialog});define("js/ui/ScriptEditorControl",["require","exports","js/UIComponent","js/ui/ThumbEditorControl","js/ui/ScriptEditDialog"],function(require,exports,UIComponent_44,ThumbEditorControl_5,ScriptEditDialog_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ScriptEditorControl=void 0;var ScriptEditorControl=(function(_super){__extends(ScriptEditorControl,_super);function ScriptEditorControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.value='';_this.codeDialog=null;_this.thumbCtrl=new ThumbEditorControl_5.ThumbEditorControl().setMessage(__('Click to edit script')).onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});_this._elem.addClass('wb-script-editor-control').append(_this.thumbCtrl.getElem());return _this}
ScriptEditorControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}
if('big' in data)
this.setBig((data.big?!0:!1));if('useMedia' in data)
this.useMedia=(data.useMedia?!0:!1);if(typeof data.placeholder==='string')
this.placeholder=data.placeholder};ScriptEditorControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if('big' in options)
this.setBig((options.big?!0:!1));if('useMedia' in options)
this.useMedia=(options.useMedia?!0:!1);if(typeof options.placeholder==='string')
this.placeholder=options.placeholder};ScriptEditorControl.prototype.destroy=function(){if(this.codeDialog)
this.codeDialog.dispose();_super.prototype.destroy.call(this)};ScriptEditorControl.prototype.setBig=function(big){this.thumbCtrl.setSize(big?ThumbEditorControl_5.ThumbSize.Big:ThumbEditorControl_5.ThumbSize.Normal)};ScriptEditorControl.prototype.setCodePreview=function(value){this.thumbCtrl.setPreview(value.replace(/\t/g,'    '))};ScriptEditorControl.prototype.edit=function(){var _this=this;if(!this.codeDialog)
this.codeDialog=new ScriptEditDialog_1.ScriptEditDialog();if(typeof this.useMedia!='undefined'){this.codeDialog.setUseMedia(this.useMedia)}
if(typeof this.placeholder!='undefined'){this.codeDialog.setPlaceholder(this.placeholder)}
this.codeDialog.edit(this.value).then(function(value){if(value!==undefined){_this.value=value;_this.setCodePreview(value)}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()})};ScriptEditorControl.prototype.clear=function(){this.value='';this.setCodePreview('');if(typeof this.onChange==='function')
this.onChange();this.onValueChanged()};ScriptEditorControl.prototype.getValue=function(){return this.value};ScriptEditorControl.prototype.setValue=function(value){if(typeof value!=='string')
value='';this.value=value;this.setCodePreview(value)};return ScriptEditorControl}(UIComponent_44.UIComponent));exports.ScriptEditorControl=ScriptEditorControl});define("js/ui/YandexMapsPlacesControl",["require","exports","js/UIComponent","js/jquery-builder","js/ui/Popover"],function(require,exports,UIComponent_45,jquery_builder_6,Popover_8){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.YandexMapsPlacesControl=void 0;var YandexMapsPlacesControl=(function(_super){__extends(YandexMapsPlacesControl,_super);function YandexMapsPlacesControl(){var _this=_super.call(this)||this;_this.value={};_this.configSuplier=null;_this.mapAddress=(0,jquery_builder_6.default)('<input>').addClass('form-control').attr({type:'text'}).on("change",function(){_this.value.text=_this.mapAddress.val();_this.value.latLng=[0,0];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this.markerBtn=(0,jquery_builder_6.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_6.default)('<span>').addClass('fa fa-map-marker')).on('click',function(){return _this.editMarker()});_this.markerEditor=new MarkerEditor(_this.markerBtn,function(value){if(value){_this.value.latLng=value;_this.value.text="".concat(value[0],", ").concat(value[1])}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this._elem.append((0,jquery_builder_6.default)('<div>').addClass('input-group').append(_this.mapAddress).append((0,jquery_builder_6.default)('<span>').addClass('input-group-btn').append(_this.markerBtn)));_this.invalidate();return _this}
YandexMapsPlacesControl.prototype.focus=function(){this.mapAddress.focus()};YandexMapsPlacesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_4=data.change;this.onChange=function(){return changeFunc_4.call(_this,fields)}}
if(typeof data.configSuplier==='function'){this.configSuplier=data.configSuplier}};YandexMapsPlacesControl.prototype.destroy=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1)}
_super.prototype.destroy.call(this)};YandexMapsPlacesControl.prototype.editMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],config)};YandexMapsPlacesControl.prototype.setValue=function(value){this.value=jquery_builder_6.default.extend(!0,{},value);if((!this.value.text||this.value.text==="")&&this.value.latLng){this.mapAddress.attr('placeholder',"".concat(this.value.latLng[0],", ").concat(this.value.latLng[1]))}
this.mapAddress.val(this.value.text||"")};YandexMapsPlacesControl.prototype.getValue=function(){return jquery_builder_6.default.extend(!0,{},this.value)};YandexMapsPlacesControl.supportsMultipleObjectBindings=function(){return!1};YandexMapsPlacesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(typeof options.configSuplier==='function'){this.configSuplier=options.configSuplier}};return YandexMapsPlacesControl}(UIComponent_45.UIComponent));exports.YandexMapsPlacesControl=YandexMapsPlacesControl;var MarkerEditor=(function(_super){__extends(MarkerEditor,_super);function MarkerEditor(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Drag marker to set your location'),(0,jquery_builder_6.default)('<div>').addClass('wb-ymaps-places-med').css({width:500,height:300}),'wb-ymaps-places-popover')||this;_this.onChange=onChange;_this.value=[0,0];_this.config=null;return _this}
MarkerEditor.prototype.edit=function(value,config){this.value=value;this.config=config;this.setVisible(!0)};MarkerEditor.prototype.setMarker=function(value,config){if(!this.isInitialized())
return;if(config){this.map.setZoom(config.zoom);this.map.setType(config.mapTypeId)}
this.map.setCenter(value);this.mapMarker.geometry.setCoordinates(value)};MarkerEditor.prototype.onInit=function(){var _this=this;this.map=new ymaps.Map(this.getContent()[0],{center:this.value,zoom:0,controls:['searchControl','typeSelector','zoomControl']});this.mapMarker=new ymaps.Placemark(this.value,{},{draggable:!0});this.mapMarker.events.add('dragend',function(){if(!_this.mapMarker.geometry)
return;var pos=_this.mapMarker.geometry.getCoordinates();if(pos){_this.value=pos;_this.onChange.call(_this,_this.value)}});this.map.geoObjects.add(this.mapMarker)};MarkerEditor.prototype.onDom=function(){this.setMarker(this.value,this.config)};return MarkerEditor}(Popover_8.Popover))});define("js/PluginApi/DataWrapper",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.DataWrapper=void 0;var wrapMapping={};var wrapIdx=0;var DataWrapper=(function(){function DataWrapper(){}
DataWrapper.wrap=function(wrappedInst,dataType){var elem=new dataType();elem.wrapId='wrap_elem_'+wrapIdx;wrapIdx++;wrapMapping[elem.wrapId]=wrappedInst;return elem};DataWrapper.uwrap=function(elem,dataType){var val=wrapMapping[elem.wrapId];return val};return DataWrapper}());exports.DataWrapper=DataWrapper});define("js/PluginApi/PluginBody",["require","exports","js/Element","js/Service","js/PluginApi/DataWrapper"],function(require,exports,Element_2,Service_13,DataWrapper_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PluginBody=void 0;var PluginBody=(function(){function PluginBody(){this.wrapId=''}
PluginBody.prototype.getType=function(){return'Body'};PluginBody.prototype.setElementSelection=function(elements){Service_13.Service.element.unselectAll();for(var _i=0,elements_7=elements;_i<elements_7.length;_i++){var elem=elements_7[_i];var relem=DataWrapper_1.DataWrapper.uwrap(elem,Element_2.Element);relem.setSelected(!0)}};return PluginBody}());exports.PluginBody=PluginBody});define("js/PluginApi/PluginElement",["require","exports","js/Element","js/ElementRegister","js/PluginApi/DataWrapper","js/PluginApi/PluginBody","js/LayoutElement"],function(require,exports,Element_3,ElementRegister_2,DataWrapper_2,PluginBody_1,LayoutElement_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PluginContent=exports.PluginElement=void 0;var PluginElement=(function(){function PluginElement(){this.wrapId='';this.x=0;this.y=0}
PluginElement.prototype.getType=function(){return DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).className};PluginElement.prototype.getId=function(){return DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).id};PluginElement.prototype.getX=function(){var elem=DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element);return elem.getParent()?elem.getLocation().left:this.x};PluginElement.prototype.getY=function(){var elem=DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element);return elem.getParent()?elem.getLocation().top:this.y};PluginElement.prototype.getWidth=function(){return DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).getWidth()};PluginElement.prototype.getHeight=function(){return DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).getHeight()};PluginElement.prototype.setX=function(x){DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).setLocation(x)};PluginElement.prototype.setY=function(y){DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).setLocation(null,y)};PluginElement.prototype.getParent=function(){var parent=DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).getParent();return(parent?DataWrapper_2.DataWrapper.wrap(parent,PluginContent):DataWrapper_2.DataWrapper.wrap(wb_builder.bodyInstance,PluginBody_1.PluginBody))};PluginElement.prototype.toData=function(){return DataWrapper_2.DataWrapper.uwrap(this,Element_3.Element).serialize()};PluginElement.fromData=function(data){var cls=data.class?ElementRegister_2.ElementRegister.getClassByName(data.class):null;if(!cls)
return null;var elem=DataWrapper_2.DataWrapper.wrap(new cls(data),PluginElement);elem.x=data.x?data.x:0;elem.y=data.y?data.y:0;return elem};return PluginElement}());exports.PluginElement=PluginElement;var PluginContent=(function(_super){__extends(PluginContent,_super);function PluginContent(){return _super!==null&&_super.apply(this,arguments)||this}
PluginContent.prototype.addElement=function(element){if(!element)
throw 'Bad argument';wb_builder.setPageModified(!0);var wElement=DataWrapper_2.DataWrapper.uwrap(element,Element_3.Element);DataWrapper_2.DataWrapper.uwrap(this,LayoutElement_1.LayoutElement).addChild(wElement)};return PluginContent}(PluginElement));exports.PluginContent=PluginContent});define("js/PluginApi/PluginContextMenu",["require","exports","js/ContextMenu","js/PluginApi/DataWrapper"],function(require,exports,ContextMenu_2,DataWrapper_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PluginContextMenu=void 0;var idPrefix='plugin_ctx_menu_';var itemIdPrefix='plugin_ctx_menu_item_';var idIdx=0;var PluginContextMenu=(function(){function PluginContextMenu(){this.wrapId='';this.id=''}
PluginContextMenu.prototype.getId=function(){return this.id};PluginContextMenu.prototype.setVisible=function(visible){var rmenu=DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu);rmenu.setVisible(itemIdPrefix+this.id,visible)};PluginContextMenu.prototype.addItem=function(id,name,func,icon,index){if(icon===void 0){icon='glyphicon glyphicon-link'}
if(index===void 0){index=-1}
if(!id){id='auto'+idIdx;idIdx++}
var item=new PluginContextMenuItem(id,this);DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu).insertItemAt(index,itemIdPrefix+id,name,func,!1,!1,null,icon);return item};PluginContextMenu.prototype.addMenu=function(id,name,icon,index){if(icon===void 0){icon='glyphicon glyphicon-list'}
if(index===void 0){index=-1}
if(!id){id='auto'+idIdx;idIdx++}
var menu=new ContextMenu_2.ContextMenu(idPrefix+id);var wmenu=DataWrapper_3.DataWrapper.wrap(menu,PluginContextMenu);wmenu.id=id;var item=new PluginContextMenuItem(id,wmenu);DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu).insertItemAt(index,itemIdPrefix+id,name,menu,!1,!1,null,icon);return wmenu};PluginContextMenu.prototype.addSeparator=function(index){DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu).addSeparator(index)};PluginContextMenu.prototype.getItem=function(id){var rmenu=DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu);var li=rmenu.getItem(itemIdPrefix+id);if(!li)
return null;var menu=rmenu.getSubmenu(itemIdPrefix+id);if(menu){var wmenu=DataWrapper_3.DataWrapper.wrap(menu,PluginContextMenu);wmenu.id=id;return wmenu}else{var item=new PluginContextMenuItem(id,this);return item}};PluginContextMenu.prototype.hasItemById=function(id){var rmenu=DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu);var li=rmenu.getItem(itemIdPrefix+id);return(li?!0:!1)};PluginContextMenu.prototype.removeItem=function(item){DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu).removeItem(itemIdPrefix+item.getId())};PluginContextMenu.prototype.removeAllItems=function(){DataWrapper_3.DataWrapper.uwrap(this,ContextMenu_2.ContextMenu).removeAllItems()};return PluginContextMenu}());exports.PluginContextMenu=PluginContextMenu;var PluginContextMenuItem=(function(){function PluginContextMenuItem(id,menu){this.id=id;this.menu=menu}
PluginContextMenuItem.prototype.getId=function(){return this.id};PluginContextMenuItem.prototype.getParent=function(){return this.menu};PluginContextMenuItem.prototype.setName=function(name){DataWrapper_3.DataWrapper.uwrap(this.menu,ContextMenu_2.ContextMenu).setName(itemIdPrefix+this.id,name)};PluginContextMenuItem.prototype.setSelected=function(selected){DataWrapper_3.DataWrapper.uwrap(this.menu,ContextMenu_2.ContextMenu).setSelected(itemIdPrefix+this.id,selected)};PluginContextMenuItem.prototype.setEnabled=function(enabled){DataWrapper_3.DataWrapper.uwrap(this.menu,ContextMenu_2.ContextMenu).setDisabled(itemIdPrefix+this.id,!enabled)};PluginContextMenuItem.prototype.setVisible=function(visible){DataWrapper_3.DataWrapper.uwrap(this.menu,ContextMenu_2.ContextMenu).setVisible(itemIdPrefix+this.id,visible)};return PluginContextMenuItem}())});define("js/PluginApi/PluginSite",["require","exports","js/PluginApi/DataWrapper","Site"],function(require,exports,DataWrapper_4,Site_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PluginSite=void 0;var PluginSite=(function(){function PluginSite(){this.wrapId=''}
PluginSite.prototype.getType=function(){return'Site'};PluginSite.prototype.getSiteMetaHtml=function(){var value=DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).metaHtml;return value?value:''};PluginSite.prototype.setSiteMetaHtml=function(value){DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).metaHtml=(typeof value==='string')?value:''};PluginSite.prototype.getSiteHeadEndHtml=function(){var value=DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).headSnippetsHtml;return value?value:''};PluginSite.prototype.setSiteHeadEndHtml=function(value){DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).headSnippetsHtml=(typeof value==='string')?value:''};PluginSite.prototype.getSiteBodyEndHtml=function(){var value=DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).bodySnippetsHtml;return value?value:''};PluginSite.prototype.setSiteBodyEndHtml=function(value){DataWrapper_4.DataWrapper.uwrap(this,Site_1.default).bodySnippetsHtml=(typeof value==='string')?value:''};return PluginSite}());exports.PluginSite=PluginSite});define("js/PluginApi/Types",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ElementDefinition=exports.PluginDefinition=exports.PluginWrapperConfig=exports.PluginMetaData=exports.PluginEvent=void 0;var PluginEvent=(function(){function PluginEvent(){this.x=0;this.y=0;this.ctxMenu=null;this.target=null}
return PluginEvent}());exports.PluginEvent=PluginEvent;var PluginMetaData=(function(){function PluginMetaData(){this.id=null;this.icon=null;this.name=null;this.isBorderless=!1;this.template='';this.altTemplates={};this.serviceUrl=null;this.def=new PluginDefinition()}
return PluginMetaData}());exports.PluginMetaData=PluginMetaData;var PluginWrapperConfig=(function(){function PluginWrapperConfig(id,icon,template,altTemplates,active,serviceUrl,baseUri){if(id===void 0){id=null}
if(icon===void 0){icon=null}
if(template===void 0){template=null}
if(altTemplates===void 0){altTemplates=null}
if(active===void 0){active=!1}
if(serviceUrl===void 0){serviceUrl=null}
if(baseUri===void 0){baseUri=''}
this.id=id;this.icon=icon;this.template=template;this.altTemplates=altTemplates;this.active=active;this.serviceUrl=serviceUrl;this.baseUri=baseUri}
return PluginWrapperConfig}());exports.PluginWrapperConfig=PluginWrapperConfig;var PluginDefinition=(function(){function PluginDefinition(){this.name=null;this.icon=null;this.borderless=!1;this.element=new ElementDefinition();this.serviceUrl=null}
return PluginDefinition}());exports.PluginDefinition=PluginDefinition;var ElementDefinition=(function(){function ElementDefinition(){this.resizable=!1;this.renderOnce=!1;this.isolatedRendering=!1;this.updateDelay=0}
return ElementDefinition}());exports.ElementDefinition=ElementDefinition});define("js/PluginApi/PluginWrapper",["require","exports","jquery","js/core/BuilderConfig","js/Element","js/ElementRegister","js/Service","URLControl","js/PluginApi/Types","js/BuilderEvent","js/Body","js/PluginApi/PluginElement","js/PluginApi/DataWrapper","js/PluginApi/PluginContextMenu","js/PluginApi/PluginBody","js/PluginApi/PluginSite","js/ColorPicker","js/SizeSelector","js/BorderControl","js/CommonTypes","js/element/PropertyType","js/util/ChangeUpdateUtil","js/util/ComparisonUtil","js/ui/controls/ShadowSelector"],function(require,exports,jquery_63,BuilderConfig_7,Element_4,ElementRegister_3,Service_14,URLControl_1,Types_1,BuilderEvent_5,Body_1,PluginElement_1,DataWrapper_5,PluginContextMenu_1,PluginBody_2,PluginSite_1,ColorPicker_7,SizeSelector_9,BorderControl_3,CommonTypes_7,PropertyType_1,ChangeUpdateUtil_3,ComparisonUtil_3,ShadowSelector_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PluginWrapper=void 0;var MustacheExt=(function(){function MustacheExt(){this.oriMustache=window.Mustache}
MustacheExt.prototype.render=function(template,data,helpers){if(helpers===void 0){helpers={}}
var _loop_11=function(helperName){var helperClb=helpers[helperName];if(typeof(helperClb)!=='function')
return"continue";var regex=new RegExp('\\{\\{\\s*([^\{\}]+?)\\s*\\|\\s*'+helperName+'\\s*\\}\\}','g');template=template.replace(regex,function(all,value){var text=value;if(/^"(.+)"$/.test(value)||/^'(.+)'$/.test(value)){text=RegExp.$1}
return helperClb(value,text)})};for(var helperName in helpers){_loop_11(helperName)}
return this.oriMustache.render(template,data)};return MustacheExt}());window.Mustache=new MustacheExt();var eventHandlersIdx=0;var eventHandlers={};var PluginWrapper=exports.PluginWrapper=(function(_super){__extends(PluginWrapper,_super);function PluginWrapper(data,def){var _this=_super.call(this,data,!1,!1,!0,function(){this._def=def})||this;_this.cachedIcon=null;_this._rendered=!1;_this._isolatorElem=null;_this._isolatorElemWnd=null;_this._isolatorElemReady=!1;_this._isolatorElemListeners=[];_this._callbackApplied=!1;_this._supportsFullWidth=!1;_this.updateDelayTimer=null;_this.waitToValidate=new ChangeUpdateUtil_3.ChangeUpdateState(function(o){if(!o)
return;var err=o.func.call(_this._def,o.value,_this._data,o.api);if(typeof err!=='undefined')
o.api.setError(err);},null);_this.waitToUpdate=new ChangeUpdateUtil_3.ChangeUpdateState(function(o){if(o)
_this._updateStyle(!1,o.langCode,o.renderOnce);},null);if(!data)
return _this;var elDef=(_this._def&&_this._def.element)?_this._def.element:new Types_1.ElementDefinition();_this._supportsFullWidth=elDef.supportsFullWidth?!0:!1;if(typeof elDef.minSize==='object'&&elDef.minSize){if(elDef.minSize.width){_this.sysMinWidth=elDef.minSize.width;if(typeof data.minWidth!=="number"){_this.minWidth=_this.sysMinWidth;_this.useMinWidth=!0}}
if(elDef.minSize.height){_this.sysMinHeight=elDef.minSize.height;if(typeof data.minHeight!=="number"){_this.minHeight=_this.sysMinHeight;_this.useMinHeight=!0}}}
if(typeof elDef.defaultSize==='object'&&elDef.defaultSize&&(!data.width||!data.height)){if(elDef.defaultSize.width)
_this.setSize(elDef.defaultSize.width,null);if(elDef.defaultSize.height)
_this.setSize(null,elDef.defaultSize.height);}
if('resizable' in elDef&&!elDef.resizable)
_this.setResizingEnabled(!1,!0);_this.displayEmptyMessage(!0);if(_this.elem.hasClass('wb-ext-resizable')){var resizeStopHandler_1=_this.elem.resizableExt('option','stop');_this.elem.resizableExt('option','stop',function(e,ui){resizeStopHandler_1(e,ui);if(typeof _this._def.resizeStopAction==='function')
_this._def.resizeStopAction(_this._data,_this.container);})}
_this._data=data;if(_this._data._copy){_this._data.content=jquery_63.default.extend(!0,{},_this._data.content)}
_this._data.id=_this.id;_this._data.width=_this.getWidth();_this._data.height=_this.getHeight();if(wb_builder.pluginData){for(var k in wb_builder.pluginData){_this._data[k]=wb_builder.pluginData[k]}}
_this.updateStyle(!0);_this._def.notifyHelpSystemPlayer=function(eventName,target){if(!target)
target=_this;Service_14.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-'+eventName,target)};_this._def.updateElement=function(force){if(force===void 0){force=!1}
if(force){var renderOnce=_this._def.element.renderOnce;_this._def.element.renderOnce=!1;_this.updateStyle();_this._def.element.renderOnce=renderOnce}else{_this.updateStyle()}};_this._def.setSize=function(width,height){_this.setSize(width,height)};_this._def.setLocation=function(left,top){_this.setLocation(left,top)};_this._def.openProperties=function(){_this.comProperties()};_this._def.bringToFront=function(){if(!_this.parent)
return;_this.parent.zIndexHandle.changeLayer(_this,'top')};_this._def.sendToBack=function(){if(!_this.parent)
return;_this.parent.zIndexHandle.changeLayer(_this,'bottom')};_this._def.bringForward=function(){if(!_this.parent)
return;_this.parent.zIndexHandle.changeLayer(_this,'up')};_this._def.sendBackwards=function(){if(!_this.parent)
return;_this.parent.zIndexHandle.changeLayer(_this,'down')};_this._def.moveToHeader=function(){if(!_this.parent)
return;wb_builder.bodyInstance.addElement(CommonTypes_7.ContentBlockId.Header,_this)};_this._def.moveToBody=function(){if(!_this.parent)
return;wb_builder.bodyInstance.addElement(CommonTypes_7.ContentBlockId.Main,_this)};_this._def.moveToFooter=function(){if(!_this.parent)
return;wb_builder.bodyInstance.addElement(CommonTypes_7.ContentBlockId.Footer,_this)};if(!_this.isPaymentGatewayButton()){_this.container.css({overflow:'hidden'})}
if(typeof _this._def.loadedAction==='function'){setTimeout(function(){if(_this._def.loadedAction)
_this._def.loadedAction(data,_this.container);},0)}
_this._def.setErrorMessage=function(text){_this.setErrorMessage(text)};_this._def.displayErrorMessage=function(display){_this.displayErrorMessage(display)};_this._def.getSize=function(){return _this.getSize()};if(typeof _this._def.onDblClick==='function'){_this.controls.onDblClick(function(){return _this._def.onDblClick()})}
_this._def.getPropertyComponent=function(propertyName){var property=_this.getProperty(propertyName);if(property){return _this.system.propertiesPanel.getComponentForProperty(property)}
return null};return _this}
PluginWrapper.mutateData=function(meta,data,out){var _a;if(!data)
return data;if(!data.content||typeof data.content!=='object'||typeof data.content.pop==='function')
data.content={};data.isPublished=!1;data.isPreview=!1;data.requireService=null;var def=meta.def?PluginWrapper._extendDef(meta.def):new Types_1.PluginDefinition();def.serviceUrl=meta.serviceUrl;if(typeof def.loadAction==='function')
def.loadAction(data,((_a=data.isElementPreview)!==null&&_a!==void 0?_a:!1));def.element=(typeof def.element==='object'&&def.element)?def.element:new Types_1.ElementDefinition();out.def=def;return data};PluginWrapper.prototype.isPaymentGatewayButton=function(){return this.data&&this.data.content&&'paymentGatewayButton' in this.data.content&&this.data.content.paymentGatewayButton};PluginWrapper.registerPlugin=function(id,def){var _a;var noAdditionalProperties=!1;if(!('propertyDialog' in def)||(typeof def.propertyDialog!=='object')||def.propertyDialog===null){def.propertyDialog={};noAdditionalProperties=!0}
var properties=(def.properties instanceof Array)?def.properties:[];var meta=new Types_1.PluginMetaData();meta.id=PluginWrapper._config.id;PluginWrapper._config.id=null;meta.icon=PluginWrapper._config.icon;PluginWrapper._config.icon=null;meta.name=def.name;meta.icon=def.icon;meta.isBorderless=def.borderless;meta.template=PluginWrapper._config.template||'';PluginWrapper._config.template=null;meta.altTemplates=PluginWrapper._config.altTemplates||{};PluginWrapper._config.altTemplates=null;meta.serviceUrl=PluginWrapper._config.serviceUrl;PluginWrapper._config.serviceUrl=null;meta.def=def;var out={def:def};var plugin=(_a=(function(_super){__extends(class_1,_super);function class_1(data){var _this=_super.call(this,PluginWrapper.mutateData(meta,data?data:null,out),out.def)||this;_this.className=id;return _this}
class_1.prototype.meta=function(){return meta};class_1.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);if(!noAdditionalProperties&&(properties.length==0||def.keepMoreProperties)){this.registerProperty({name:"morePropertiesButton",type:PropertyType_1.PropertyType.MoreProperties,uiComponentOptions:{click:function(){this.comProperties()},}})}
var _loop_12=function(prop){if(typeof prop.id!=='string'||!prop.id){console.warn("Plugin \"".concat(id,"\" property must have \"id\""));return"continue"}
if((typeof prop.type!=='string'||!prop.type)&&!(prop.type instanceof PropertyType_1.PropertyType)){console.warn("Plugin \"".concat(id,"\" property must have \"type\""));return"continue"}
if((typeof prop.get!=='function')||(typeof prop.set!=='function')){console.warn("Plugin \"".concat(id,"\" property \"").concat(prop.id,"\" must have \"get\" and \"set\" functions"));return"continue"}
var opts=(typeof prop.uiComponentOptions==='object')?__assign({},prop.uiComponentOptions):{};if(typeof prop.label==='string'&&prop.label){opts.label=prop.label}
if(typeof prop.moreInfo==='function'){opts.moreInfo=function(){if(typeof prop.moreInfo==='function'){this.callWithData(prop.moreInfo)}}}
if(typeof prop.helpText==='string'&&prop.helpText){opts.helpText=prop.helpText}
var comparator=undefined;if(typeof prop.validate==='function'){comparator=function(value,b,comp){var match=ComparisonUtil_3.ComparisonUtil.checkEqualsRecursive(value,b);if(!match&&prop.validate&&comp){this.waitToValidate.elem={func:prop.validate,value:value,api:{setError:function(err){return comp.setError(err)}}};(0,ChangeUpdateUtil_3.waitForChangeEndToUpdate)(this.waitToValidate)}
return match}}
var thisClass=this_8;this_8.registerProperty({name:prop.id,type:(prop.type instanceof PropertyType_1.PropertyType)?prop.type:PropertyType_1.PropertyType[prop.type],prop:{get:function(){return this.callWithData(prop.get)},set:function(value){this.callWithDataValue(prop.set,value)}},dependencies:prop.dependencies,comparator:comparator,uiComponentOptions:function(){if(typeof prop.visible==='function'){opts.visible=this.callWithData(prop.visible)}
if(typeof prop.enabled==='function'){opts.enabled=this.callWithData(prop.enabled)}
if(typeof prop.uiComponentOptions==="function")
opts=prop.uiComponentOptions.call(thisClass._def,this.data,opts);return opts}})};var this_8=this;for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var prop=properties_1[_i];_loop_12(prop)}};return class_1}(PluginWrapper)),__setFunctionName(_a,"plugin"),_a.pluginName=def.name||id,_a._metaData_=meta,_a);def.pluginScoped=plugin.pluginScoped=(typeof def.pluginScoped==='object')?def.pluginScoped:{};ElementRegister_3.ElementRegister.registerClass(id,plugin,!0,PluginWrapper._config.active,PluginWrapper._config.baseUri)};Object.defineProperty(PluginWrapper.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0});PluginWrapper.prototype.callWithDataValue=function(func,value){return func.call(this._def,value,this._data,this.elem)};PluginWrapper.prototype.callWithData=function(func){return func.call(this._def,this._data)};PluginWrapper.isDataImageSelector=function(data,_checkPattern){if(_checkPattern===void 0){_checkPattern=!1}
if(!data)
return!1;if(_checkPattern){return(/^gallery\//.test(data))}else{var res=!0;if(typeof data==='object'&&('length' in data)){for(var i in data){if(!PluginWrapper.isDataImageSelector(data[i],!0)){res=!1;break}}}else if(!PluginWrapper.isDataImageSelector(data,!0)){res=!1}
return res}};PluginWrapper.imageSelectorMakeLocalUrl=function(data){if(data){if(typeof data==='object'&&('length' in data)){var _data=[];for(var i in data){_data.push(wb_builder.makeLocalUrl(data[i]))}
return _data}else{return wb_builder.makeLocalUrl(data)}}
return data};PluginWrapper.updateImageSelectorData=function(data,iteration){if(!data)
return;if(!iteration)
iteration=0;if(iteration>3)
return;for(var i in data){if(data[i]instanceof HTMLElement||data[i]instanceof jquery_63.default)
continue;if(PluginWrapper.isDataImageSelector(data[i])){data[i]=PluginWrapper.imageSelectorMakeLocalUrl(data[i])}else if(data[i]&&typeof data[i]==='object'){PluginWrapper.updateImageSelectorData(data[i],(iteration+1))}}};PluginWrapper.isMultilangValue=function(value){if(value&&typeof(value)==='object'){for(var i in value){if(!(i in BuilderConfig_7.wbConfig.getLanguageCodeIndex())){return!1}}
return!0}
return!1};PluginWrapper.updateMultilangData=function(data,iteration){if(!data)
return;if(!iteration)
iteration=0;if(iteration>3)
return;for(var i in data){if(data[i]instanceof HTMLElement||data[i]instanceof jquery_63.default)
continue;if(PluginWrapper.isMultilangValue(data[i])){data[i]=__tr(data[i],null,__tr(data[i],wb_builder.site.getLastDefLang()))}else if(typeof data[i]==='object'){PluginWrapper.updateMultilangData(data[i],(iteration+1))}}};PluginWrapper.isLinkSelectorValue=function(value){return!!(value&&typeof(value)==='object'&&("_" in value)&&value._==="Link")};PluginWrapper.updateLinkSelectorData=function(data,iteration){if(!data)
return;if(!iteration)
iteration=0;if(iteration>3)
return;for(var i in data){if(data[i]instanceof HTMLElement||data[i]instanceof jquery_63.default)
continue;if(PluginWrapper.isLinkSelectorValue(data[i])){if(!('name'&&data[i])||!data[i].name)
data[i].name=URLControl_1.default.getName(data[i]);if(!('finalUrl'&&data[i])||!data[i].finalUrl)
data[i].finalUrl=URLControl_1.default.getUrl(data[i]);}else if(typeof data[i]==='object'){PluginWrapper.updateLinkSelectorData(data[i],(iteration+1))}}};PluginWrapper.addEventListener=function(event,func){if(!event||typeof event!=='string'||!func||typeof func!=='function')
return;var funcAny=func;if(!funcAny.eventHandlerId){funcAny.eventHandlerId='plEventId'+eventHandlersIdx;eventHandlersIdx++}
if(!(funcAny.eventHandlerId in eventHandlers)){eventHandlers[funcAny.eventHandlerId]=function(e){var plEvent=new Types_1.PluginEvent();if(e instanceof BuilderEvent_5.ContextMenuEvent){plEvent.x=e.x;plEvent.y=e.y;plEvent.ctxMenu=DataWrapper_5.DataWrapper.wrap(e.menu,PluginContextMenu_1.PluginContextMenu);if(e.target instanceof Element_4.Element){plEvent.target=DataWrapper_5.DataWrapper.wrap(e.target,PluginElement_1.PluginElement);plEvent.targets=[];var selection=Service_14.Service.element.getSelected();for(var k in selection){plEvent.targets.push(DataWrapper_5.DataWrapper.wrap(selection[k],PluginElement_1.PluginElement))}}else if(e.target instanceof Body_1.Body){plEvent.target=DataWrapper_5.DataWrapper.wrap(e.target,PluginBody_2.PluginBody)}}else if(e instanceof BuilderEvent_5.SaveEvent){plEvent.target=DataWrapper_5.DataWrapper.wrap(wb_builder.site,PluginSite_1.PluginSite)}
func(plEvent)}}
BuilderEvent_5.GlobalEvents.on(event,eventHandlers[funcAny.eventHandlerId])};PluginWrapper.removeEventListener=function(event,func){if(!event||typeof event!=='string'||!func||typeof func!=='function')
return;var funcAny=func;if(!funcAny.eventHandlerId||!(funcAny.eventHandlerId in eventHandlers))
return;BuilderEvent_5.GlobalEvents.off(event,eventHandlers[funcAny.eventHandlerId])};PluginWrapper._extendDef=function(def){var newDef={};for(var k in def){newDef[k]=def[k]}
return newDef};PluginWrapper.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);var _data=this._data;var typeClass=data['class'];if((typeClass in ElementRegister_3.ElementRegister.pluginRegistry)&&ElementRegister_3.ElementRegister.pluginRegistry[typeClass].textId){data['class']=ElementRegister_3.ElementRegister.pluginRegistry[typeClass].textId}
data.supportsAutoWidth=this.supportsAutoWidth();data.supportsAutoHeight=this.supportsAutoHeight();if(typeof _data.pluginElementClass==='string'&&_data.pluginElementClass!==''){data.pluginElementClass=_data.pluginElementClass}
data.content=(this._data.content&&typeof this._data.content==='object'&&typeof this._data.content.pop!=='function')?this._data.content:{};if(typeof this._def.saveAction==='function')
this._def.saveAction(data,this.container);return data};PluginWrapper.prototype.updateContentSize=function(){_super.prototype.updateContentSize.call(this);if(this._data){this._data.width=this.getWidth();this._data.height=this.getHeight();if(typeof this._def.resizeAction==='function')
this._def.resizeAction(this._data,this.container);}
var parent=this.getParent();if(parent)
parent.updateSize();};PluginWrapper.prototype.onSwitchLanguage=function(langCode){_super.prototype.onSwitchLanguage.call(this,langCode);if(typeof this._def.switchLanguageAction==='function')
this._def.switchLanguageAction(this._data,this.container,langCode);this.updateStyle(!1,langCode)};PluginWrapper.prototype.switchMode=function(fromMode,toMode,initial,manual){_super.prototype.switchMode.call(this,fromMode,toMode,initial,manual);if(manual&&typeof this._def.switchModeAction==='function')
this._def.switchModeAction(this._data,this.container);};PluginWrapper.prototype.updateStyle=function(initial,langCode){if(!initial&&this._def.batchUpdates){this.waitToUpdate.elem={renderOnce:this._def.element.renderOnce,langCode:langCode};(0,ChangeUpdateUtil_3.waitForChangeEndToUpdate)(this.waitToUpdate)}else this._updateStyle(initial,langCode,this._def.element.renderOnce)};PluginWrapper.prototype._updateStyle=function(initial,langCode,renderOnce){var _this=this;if(renderOnce===void 0){renderOnce=!1}
_super.prototype.updateStyle.call(this,initial,langCode);if(!this._rendered||!renderOnce){this._rendered=!0;var render=function(){var _a,_b,_c,_d;if(typeof _this._def.onRender==='function'){_this._def.onRender.call(_this._def,_this._data,_this.container,_this)}
PluginWrapper.updateLinkSelectorData(_this._data.content);var _data=jquery_63.default.extend(!0,{},_this._data);var langCode=_this.system.site.currSelLang,langLocale;if(langCode){langLocale=(_b=(_a=BuilderConfig_7.wbConfig.getLanguageByCode(langCode))===null||_a===void 0?void 0:_a.locale)!==null&&_b!==void 0?_b:null}else{langLocale=wb_builder.locale;langCode=(_d=(_c=BuilderConfig_7.wbConfig.getLanguageByLocale(langLocale))===null||_c===void 0?void 0:_c.code)!==null&&_d!==void 0?_d:null}
_data.langCode=langCode;_data.langLocale=langLocale;PluginWrapper.updateImageSelectorData(_data.content);PluginWrapper.updateMultilangData(_data.content);window.$=jquery_63.default;var mustache=window.Mustache;var helpers={'i18n':function(key){return __tr(key)},'tr':function(value,key){return __(key)},'include':function(value,tplId){var altTpls=_this.meta().altTemplates;return(tplId in altTpls)?mustache.render(altTpls[tplId],_data,helpers):''}};var html=mustache.render(_this.meta().template,_data,helpers);if(_this._def.element.isolatedRendering){if(!_this._isolatorElem){_this._isolatorElemWnd=null;_this._isolatorElemReady=!1;_this._isolatorElemListeners=[];_this._isolatorElem=(0,jquery_63.default)('<iframe>').css({border:'none',background:'transparent',padding:'0',margin:'0',width:'100%',height:'100%'}).attr({src:'modules/builder/tpl/blank.html'}).on('load',function(){if(!_this._isolatorElem)
return;_this._isolatorElemWnd=(_this._isolatorElem.get(0).contentWindow||_this._isolatorElem.get(0).contentDocument);_this._isolatorElemWnd.xnextStickRight=function(){};_this._isolatorElemReady=!0;for(var i=0;i<_this._isolatorElemListeners.length;i++){if(typeof _this._isolatorElemListeners[i].func==='function'){_this._isolatorElemListeners[i].func.call(_this._isolatorElemListeners[i].inst)}}});_this.container.empty();_this.container.append(_this._isolatorElem)}
var isoBody_1=null;if(_this._isolatorElemWnd instanceof Window){isoBody_1=(0,jquery_63.default)(_this._isolatorElemWnd.document.body)}else if(_this._isolatorElemWnd instanceof Document){isoBody_1=(0,jquery_63.default)(_this._isolatorElemWnd.body)}
if(_this._isolatorElemReady){if(isoBody_1)
isoBody_1.html(html);}else{_this._isolatorElemListeners.push({inst:_this,func:function(){if(isoBody_1)
isoBody_1.html(html);}})}}else{_this.container.html(html)}
_this.displayEmptyMessage(!html)};if(this._def.element.updateDelay){if(this.updateDelayTimer)
clearTimeout(this.updateDelayTimer);this.updateDelayTimer=setTimeout(render,this._def.element.updateDelay)}else{render()}}};PluginWrapper.prototype.comProperties=function(){var _this=this;if(!this._def.propertyDialog)
return{};var thisClass=this;if(!this._callbackApplied){this._callbackApplied=!0;this._def.propertyDialog.callbackFunc=function(fields){if(typeof thisClass._def.applyAction==='function')
thisClass._def.applyAction(fields,thisClass._data,thisClass.container);_this.updateStyle()}}
var res=_super.prototype.comProperties.call(this,this._def.propertyDialog);if(this.comDialog){if(this._callbackApplied)
delete this._def.propertyDialog.callbackFunc;var fields=this.comDialog.fields;if(!fields._initiated){fields._initiated=!0}
if(typeof this._def.openAction==='function')
this._def.openAction(fields,this._data,this.container);}
return res};PluginWrapper.prototype.updateComPropertiesInterface=function(){_super.prototype.updateComPropertiesInterface.call(this);if(!this.comDialog)
return;if(typeof this._def.updateAction==='function')
this._def.updateAction(this.comDialog.fields,this._data,this.container);};PluginWrapper.prototype.applyAction=function(fields,data,elem){};PluginWrapper.prototype.meta=function(){return PluginWrapper._metaData_};PluginWrapper.prototype.getIcon=function(){if(this._def.icon){return this._def.icon}else if(!this.cachedIcon){var compIcon=Service_14.Service.ElementComposition.lookupPluginIcon(this.className);this.cachedIcon=compIcon?compIcon:'fa fa-puzzle-piece'}
return this.cachedIcon};PluginWrapper.prototype.getName=function(){if(this._def.name){return this._def.name}
return _super.prototype.getName.call(this)};PluginWrapper.prototype.getUsedMediaGalleryItems=function(){var items=_super.prototype.getUsedMediaGalleryItems.call(this);if(typeof this._def.getUsedMediaGalleryItems==="function"){var pluginItems=this._def.getUsedMediaGalleryItems(this._data);if(jquery_63.default.isArray(pluginItems)){for(var _i=0,pluginItems_1=pluginItems;_i<pluginItems_1.length;_i++){var item=pluginItems_1[_i];if(typeof item==="string"&&item!==""&&item!=="none")
items.push(item);}}}
return items};PluginWrapper.prototype.getUsedSiteStyles=function(){var items=_super.prototype.getUsedSiteStyles.call(this);if(typeof this._def.getUsedSiteStyles==="function"){var pluginItems=this._def.getUsedSiteStyles(this._data);if(jquery_63.default.isArray(pluginItems)){for(var _i=0,pluginItems_2=pluginItems;_i<pluginItems_2.length;_i++){var item=pluginItems_2[_i];if(typeof item==="string"&&item!=="")
items.push(item);}}}
return items};PluginWrapper.prototype.getUsedFonts=function(){var items=_super.prototype.getUsedFonts.call(this);if(typeof this._def.getUsedFonts==="function"){var pluginItems=this._def.getUsedFonts(this._data);if(jquery_63.default.isArray(pluginItems)){for(var _i=0,pluginItems_3=pluginItems;_i<pluginItems_3.length;_i++){var item=pluginItems_3[_i];if(typeof item==="string"&&item!=="")
items.push(item);}}}
return items};PluginWrapper.prototype.getSupportedSizeUnits=function(){if(typeof this._def.getSupportedSizeUnits==="function")
return this._def.getSupportedSizeUnits(this._data);return _super.prototype.getSupportedSizeUnits.call(this)};PluginWrapper.prototype.onLoaded=function(){if(typeof this._def.onLoaded==='function')
return this._def.onLoaded();return jquery_63.default.when()};PluginWrapper.prototype.supportsAutoWidth=function(){if(typeof this._def.supportsAutoWidth==="function")
return this._def.supportsAutoWidth(this._data);if(typeof this._def.supportsAutoWidth==="boolean")
return this._def.supportsAutoWidth;return _super.prototype.supportsAutoWidth.call(this)};PluginWrapper.prototype.supportsAutoHeight=function(){if(typeof this._def.supportsAutoHeight==="function")
return this._def.supportsAutoHeight(this._data);if(typeof this._def.supportsAutoHeight==="boolean")
return this._def.supportsAutoHeight;return _super.prototype.supportsAutoHeight.call(this)};PluginWrapper.prototype.supportsFullWidth=function(){return this._supportsFullWidth};PluginWrapper.prototype.canUseAsBackground=function(){if(typeof this._def.canUseAsBackground==="function")
return this._def.canUseAsBackground(this._data);if(typeof this._def.canUseAsBackground==="boolean")
return this._def.canUseAsBackground;return _super.prototype.canUseAsBackground.call(this)};PluginWrapper.generatePaymentGatewayLogoHtml=function(logoOptsDef,pluginId){if(pluginId===void 0){pluginId=null}
if(typeof(pluginId)==='string'&&pluginId){var defaultPluginUri=wb_builder.pluginRepoPath+'/'+pluginId;var pluginUri=void 0;if(PluginWrapper._config.id==pluginId&&PluginWrapper._config.baseUri){pluginUri=PluginWrapper._config.baseUri}else{pluginUri=Service_14.Service.elementRegister.getPluginUriById(pluginId)||defaultPluginUri}
for(var _i=0,logoOptsDef_1=logoOptsDef;_i<logoOptsDef_1.length;_i++){var obj=logoOptsDef_1[_i];if(!('html' in obj)||!obj.html){obj.html='<div class="payment-gateway-logo-item"><img src="'+pluginUri+'/site/gallery_gen/'+pluginId+'/'+obj.id+'" alt="'+obj.id+'" /></div>'}}}
return logoOptsDef};PluginWrapper.paymentGatewayStylePropertiesDef=function(properties,logoOptsDef,pluginId){if(pluginId===void 0){pluginId=null}
if(logoOptsDef){logoOptsDef=this.generatePaymentGatewayLogoHtml(logoOptsDef,pluginId)}
var styleProperties=[{id:'buttonLabel',type:'PaymentGatewayButtonLabel',get:function(data){return data.content.button_label},set:function(value,data){data.content.button_label=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'buttonColor',type:'PaymentGatewayButtonColor',get:function(data){return data.content.button_color},set:function(value,data){data.content.button_color=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'fontFamily',type:'PaymentGatewayFontControl',get:function(data){return{font:data.content.font_family,color:data.content.label_color,size:data.content.font_size}},set:function(value,data){data.content.font_family=value.font;data.content.label_color=value.color;data.content.font_size=value.size;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'fontSize',type:'PaymentGatewayFontSize',get:function(data){return data.content.font_size},set:function(value,data){data.content.font_size=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'labelColor',type:'PaymentGatewayLabelColor',get:function(data){return data.content.label_color},set:function(value,data){data.content.label_color=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'buttonBorder',type:'PaymentGatewayBorderControl',get:function(data){var brd=(0,BorderControl_3.buildCss)(data.content.button_border||null);(0,BorderControl_3.applyRadiusValue)(brd,data.content.border_radius);return brd},set:function(value,data){data.content.button_border=__assign({},value);delete data.content.button_border.radius;data.content.border_radius=(0,BorderControl_3.toRadiusValue)(value);data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'individualShadow',type:'PaymentShadowControl',get:function(data){return data.content.individual_shadow?ShadowSelector_2.ShadowSelector.createValue(data.content.individual_shadow,!1):null},set:function(value,data){data.content.individual_shadow=__assign({},value);data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'logo',type:'PaymentGatewayLogo',get:function(data){return data.content.logo},set:function(value,data){data.content.logo=value;data.content.logo_src=PluginWrapper.paymentGatewayGenLogoSrc(data);data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()},uiComponentOptions:{options:logoOptsDef}},{id:'logoSrc',type:'PaymentGatewayLogoSrc',get:function(data){return data.content.logo_src},set:function(value,data){data.content.logo_src=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'showLogo',type:'PaymentGatewayShowLogo',get:function(data){return data.content.showlogo?1:0},set:function(value,data){data.content.showlogo=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'logoWidth',type:'PaymentGatewayLogoWidth',get:function(data){return data.content.logo_width},set:function(value,data){data.content.logo_width=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'buttonPadding',type:'PaymentGatewayButtonPadding',get:function(data){return data.content.button_padding},set:function(value,data){data.content.button_padding=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'buttonWidth',type:'PaymentGatewayButtonWidth',get:function(data){return data.content.button_padding},set:function(value,data){data.content.button_padding=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},{id:'buttonHeight',type:'PaymentGatewayButtonHeight',get:function(data){return data.content.button_padding},set:function(value,data){data.content.button_padding=value;data.content.paymentGatewayButton=PluginWrapper.paymentGatewayGenButton(data);this.updateElement()}},];properties=properties.concat(styleProperties);return properties};PluginWrapper.paymentGatewayStyleTabDef=function(logoOptsDef,pluginId,isStore){if(logoOptsDef===void 0){logoOptsDef=null}
if(pluginId===void 0){pluginId=null}
if(isStore===void 0){isStore=!1}
if(logoOptsDef){logoOptsDef=this.generatePaymentGatewayLogoHtml(logoOptsDef,pluginId)}
var children=[{type:'HorizontalLayout',css:{marginTop:15},columnWeights:[6,3,3],columnWeightsXs:[12,6,6],children:[{type:'HorizontalLayout',columnWeights:[6,6],columnWeightsXs:[6,6],children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Border')},{type:BorderControl_3.BorderControl,id:'button_border',showRadius:!0}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Background')},{type:ColorPicker_7.ColorPicker,id:'button_color'}]},]},{type:'VerticalLayout',css:{},children:[{type:'Label',text:__('Width')},{type:SizeSelector_9.SizeSelector,id:'button_width'}]},{type:'VerticalLayout',css:{},children:[{type:'Label',text:__('Height')},{type:SizeSelector_9.SizeSelector,id:'button_height'}]},]},{type:'HorizontalLayout',css:{marginTop:15},columnWeights:[3,3,3,3],columnWeightsXs:[6,6,6,6],children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Button Label')},{type:'TextField',id:'button_label'}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Size')},{type:SizeSelector_9.SizeSelector,id:'font_size'}]},{type:'VerticalLayout',css:{width:120},children:[{type:'Label',text:__('Font')},{type:'FontFamilySelector',id:'font_family',noFixedWidth:!0}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Color')},{type:ColorPicker_7.ColorPicker,id:'label_color',noTransparent:!0}]}]},{type:'HorizontalLayout',css:{marginTop:15},columnWeights:[3,3,3,3],columnWeightsXs:[6,6,6,6],children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Max logo width')},{type:SizeSelector_9.SizeSelector,id:'logo_width',max:300,min:20}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Show logo')},{type:'DropdownBox',id:'showlogo',options:[{id:'yes',name:__('Yes')},{id:'no',name:__('No')}]},]},{type:'VerticalLayout',children:logoOptsDef?[{type:'Label',text:__('Logo')},{type:'DropdownBox',id:'logo',options:logoOptsDef}]:[]},{type:'VerticalLayout',children:[{type:'Label',text:__('Button padding (px)')},{type:SizeSelector_9.SizeSelector,id:'button_padding',min:0,max:299,repeat:!1}]}]}];children.push({type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Preview')},{type:'CustomContainer',id:'preview',init:function(def,fields){var _this=this;this.getElem().css({background:'url("modules/builder/img/bg2_2.png") repeat',padding:15});this.update=function(resetHeight){var tdata=fields.__paymentGatewayPreview__();_this.getElem().html('<div style="overflow: hidden; margin: 0 auto; height: '+(resetHeight?'auto':tdata.height)+'px;'+'width: '+tdata.width+((typeof tdata.width==="number")?'px':'')+';">'+fields.__paymentGatewayGenButton__(tdata)+'</div>');if(resetHeight){setTimeout(function(){var btnH=_this.getElem().find('.btn').outerHeight();fields.button_height.setValue(btnH);if(fields.sizeH)
fields.sizeH.setValue(btnH);},50)}}}}]});return{name:__('Style'),children:children}};PluginWrapper.paymentGatewayOpenAction=function(fields,data,elem){var itm;if(data.content.button_label&&fields.button_label)
fields.button_label.setText(data.content.button_label);if(data.content.button_color&&fields.button_color)
fields.button_color.setValue(data.content.button_color);if(data.content.font_family&&fields.font_family)
fields.font_family.setValue(data.content.font_family);if(data.content.font_size&&fields.font_size)
fields.font_size.setValue(data.content.font_size);if(data.content.label_color&&fields.label_color)
fields.label_color.setValue(data.content.label_color);if(data.content.button_border&&fields.button_border)
fields.button_border.setValue(data.content.button_border);if(fields.logo&&data.content.logo){itm=fields.logo.getItemById(data.content.logo);fields.logo.selectItem(itm)}
if(fields.showlogo)
fields.showlogo.setValue(data.content.showlogo===!0?'yes':'no');if(data.content.logo_width&&fields.logo_width)
fields.logo_width.setValue(data.content.logo_width);if((data.content.button_padding||data.content.button_padding===0)&&fields.button_padding)
fields.button_padding.setValue(data.content.button_padding);if(data.width&&fields.button_width)
fields.button_width.setValue(data.width);if(data.height&&fields.button_height)
fields.button_height.setValue(data.height);if(!fields.__paymentGatewayEventsSet__){if(!fields.preview)
fields.preview={update:function(){}};fields.__paymentGatewayEventsSet__=!0;fields.__paymentGatewayGenButton__=PluginWrapper.paymentGatewayGenButton;fields.__paymentGatewayGenLogoSrc__=PluginWrapper.paymentGatewayGenLogoSrc;fields.__paymentGatewayPreview__=function(){var itm,orig;var d=jquery_63.default.extend(!0,{},data);if(fields.button_width)
d.width=fields.button_width.getValue();if(fields.button_height)
d.height=fields.button_height.getValue();if(fields.button_label)
d.content.button_label=fields.button_label.getText();if(fields.button_color)
d.content.button_color=fields.button_color.getValue();if(fields.font_family)
d.content.font_family=fields.font_family.getValue();if(fields.font_size)
d.content.font_size=fields.font_size.getValue();if(fields.label_color)
d.content.label_color=fields.label_color.getValue();if(fields.button_border)
d.content.button_border=fields.button_border.getValue();if(fields.logo&&(itm=fields.logo.getSelectedItem())&&(orig=itm.getOriginal()))
d.content.logo=orig.id;if(fields.showlogo)
d.content.showlogo=(fields.showlogo.getValue()==='yes');if(fields.logo_width)
d.content.logo_width=fields.logo_width.getValue();if(fields.button_padding)
d.content.button_padding=fields.button_padding.getValue();d.content.logo_src=fields.__paymentGatewayGenLogoSrc__(d);return d};if(fields.button_label)
fields.button_label.on('change',function(){return fields.preview.update(!0)});if(fields.button_color)
fields.button_color.setOnChange(function(){return fields.preview.update()});if(fields.font_family)
fields.font_family.on('change',function(){return fields.preview.update()});if(fields.font_size)
fields.font_size.on('change',function(){return fields.preview.update()});if(fields.label_color)
fields.label_color.setOnChange(function(){return fields.preview.update()});if(fields.button_border)
fields.button_border.setOnChange(function(){return fields.preview.update()});if(fields.logo)
fields.logo.on('change',function(){return fields.preview.update(!0)});if(fields.showlogo)
fields.showlogo.on('change',function(){return fields.preview.update(!0)});if(fields.logo_width)
fields.logo_width.on('change',function(){return fields.preview.update()});if(fields.button_padding)
fields.button_padding.on('change',function(){return fields.preview.update()});if(fields.sizeW)
fields.sizeW.on('change',function(){fields.button_width.setValue(fields.sizeW.getValue());fields.preview.update()});if(fields.sizeH)
fields.sizeH.on('change',function(){fields.button_height.setValue(fields.sizeH.getValue());fields.preview.update()});if(fields.button_width)
fields.button_width.on('change',function(){if(fields.sizeW)
fields.sizeW.setValue(fields.button_width.getValue());fields.preview.update()});if(fields.button_height)
fields.button_height.on('change',function(){if(fields.sizeH)
fields.sizeH.setValue(fields.button_height.getValue());fields.preview.update()})}
fields.preview.update()};PluginWrapper.paymentGatewayApplyAction=function(fields,data,elem){var itm,orig;if(fields.button_label)
data.content.button_label=fields.button_label.getText();if(fields.button_color)
data.content.button_color=fields.button_color.getValue();if(fields.font_family)
data.content.font_family=fields.font_family.getValue();if(fields.font_size)
data.content.font_size=fields.font_size.getValue();if(fields.label_color)
data.content.label_color=fields.label_color.getValue();if(fields.button_border)
data.content.button_border=fields.button_border.getValue();if(fields.logo){itm=fields.logo.getSelectedItem();if(itm&&(orig=itm.getOriginal()))
data.content.logo=orig.id}
if(fields.showlogo)
data.content.showlogo=fields.showlogo.getValue()==='yes';if(fields.logo_width)
data.content.logo_width=fields.logo_width.getValue();if(fields.button_padding)
data.content.button_padding=fields.button_padding.getValue();if(fields.button_width)
data.width=fields.button_width.getValue();if(fields.button_height)
data.height=fields.button_height.getValue();data.content.logo_src=fields.__paymentGatewayGenLogoSrc__(data);data.content.paymentGatewayButton=fields.__paymentGatewayGenButton__(data)};PluginWrapper.paymentGatewayLoadAction=function(data,def,isStore){if(isStore===void 0){isStore=!1}
var brd=data.content.button_border;if(!data.content.border_radius&&brd&&brd.radius){data.content.border_radius=(0,BorderControl_3.toRadiusValue)(brd);brd.radius=undefined;if(brd.css&&typeof(brd.css)==='object'){delete brd.css['border-radius'];delete brd.css['-webkit-border-radius'];delete brd.css['-moz-border-radius']}}
var borderStyle=isStore?'none':'solid';if(typeof(def)!=='object')
def={};if(data.content.button_label===undefined){data.content.button_label=(def.button_label!==undefined)?def.button_label:(isStore?'':__('Pay with %s').replace('%s',''))}else if(jquery_63.default.trim(data.content.button_label)==='Pay with'){data.content.button_label=jquery_63.default.trim(__('Pay with %s').replace('%s',''))}
if(!data.content.button_color)
data.content.button_color=def.button_color?def.button_color:'#ffffff';if(!data.content.font_family)
data.content.font_family=def.font_family?def.font_family:'Arial';if(!data.content.font_size)
data.content.font_size=parseInt(def.font_size)?parseInt(def.font_size):14;if(!data.content.label_color)
data.content.label_color=def.label_color?def.label_color:'#000000';if(!data.content.button_border)
data.content.button_border=def.button_border?def.button_border:{color:["#eeeeee","#eeeeee","#eeeeee","#eeeeee"],style:[borderStyle,borderStyle,borderStyle,borderStyle],weight:[1,1,1,1],differ:!1,css:{'border-bottom':"1px "+borderStyle+" #eeeeee",'border-left':"1px "+borderStyle+" #eeeeee",'border-right':"1px "+borderStyle+" #eeeeee",'border-top':"1px "+borderStyle+" #eeeeee"},cssRaw:'border: 1px '+borderStyle+' #eeeeee'};if(!data.content.logo)
data.content.logo=def.logo?def.logo:null;if(data.content.showlogo===undefined)
data.content.showlogo=(def.showlogo!==undefined)?(def.showlogo?!0:!1):!0;if(!data.content.logo_width)
data.content.logo_width=parseInt(def.logo_width)?parseInt(def.logo_width):80;if(!data.content.border_radius)
data.content.border_radius=def.border_radius?def.border_radius:{lt:0,rt:0,rb:0,lb:0,css:{"border-radius":"0px","-webkit-border-radius":"0px","-moz-border-radius":"0px"},cssRaw:''};if(data.content.button_padding===undefined)
data.content.button_padding=(def.button_padding!==undefined&&!isNaN(parseInt(def.button_padding)))?parseInt(def.button_padding):5;data.content.logo_src=this.paymentGatewayGenLogoSrc(data);data.content.paymentGatewayButton=this.paymentGatewayGenButton(data)};PluginWrapper.paymentGatewayGenLogoSrc=function(data){if(!data.class||!data.content.logo)
return null;var pluginId=data.class;var defaultPluginUri=wb_builder.pluginRepoPath+'/'+pluginId;var pluginUri;if(PluginWrapper._config.id==pluginId&&PluginWrapper._config.baseUri){pluginUri=PluginWrapper._config.baseUri}else{pluginUri=Service_14.Service.elementRegister.getPluginUriById(pluginId)||defaultPluginUri}
return pluginUri+'/site/gallery_gen/'+data.class+'/'+data.content.logo};PluginWrapper.paymentGatewayGenButton=function(data){var btn=(0,jquery_63.default)('<button>').addClass('btn btn-default btn-sm').css({width:'100%',height:'100%',whiteSpace:'normal',overflow:'hidden'});if(data.content.button_label){var strong=(0,jquery_63.default)('<strong>');strong.text(data.content.button_label);strong.css('display','block');if(data.content.label_color)
strong.css('color',data.content.label_color);if(data.content.font_family)
strong.css('font-family',data.content.font_family);if(data.content.font_size)
strong.css('font-size',data.content.font_size+'px');btn.append(strong)}
if(data.content.border_radius&&data.content.border_radius.css)
btn.css(data.content.border_radius.css);if(data.content.button_padding||data.content.button_padding===0)
btn.css('padding',data.content.button_padding+'px');if(data.content.button_color)
btn.css('background-color',data.content.button_color);if(data.content.button_border&&data.content.button_border.css)
btn.css(data.content.button_border.css);if(data.content.individual_shadow&&data.content.individual_shadow.css&&data.content.individual_shadow.css.boxShadow)
btn.css({boxShadow:data.content.individual_shadow.css.boxShadow});if(data.content.individual_shadow&&data.content.individual_shadow.css&&data.content.individual_shadow.css['box-shadow'])
btn.css({boxShadow:data.content.individual_shadow.css['box-shadow']});if(data.content.showlogo&&data.content.logo_src){var img=(0,jquery_63.default)('<img>').css('max-width','100%');img.attr('src',data.content.logo_src);if(data.class)
img.attr('alt',data.class);if(data.content.logo_width)
img.css('width',data.content.logo_width+'px');btn.append(img)}
return btn.wrap('<div>').parent().html()};PluginWrapper.paymentGatewayMigrateNewVars=function(data,mapping){var newVar;for(var oldVar in mapping){newVar=mapping[oldVar];if(oldVar&&newVar&&(oldVar in data.content)){data.content[newVar]=data.content[oldVar];data.content[oldVar]=null;delete data.content[oldVar]}}};PluginWrapper.PluginElement=PluginElement_1.PluginElement;PluginWrapper._config=new Types_1.PluginWrapperConfig();PluginWrapper._metaData_=new Types_1.PluginMetaData();return PluginWrapper}(Element_4.Element));jquery_63.default.prototype.setLoading=function(enabled){var button=(0,jquery_63.default)(this);var _preloader=button.find('span.icon-wb-spinner');if(enabled){if(!_preloader.length){_preloader=(0,jquery_63.default)('<span class="icon-wb-spinner ico-spin" style="display: inline-block;"></span>');button.prepend(_preloader)}
_preloader.show();button.addClass('disabled').attr('disabled','disabled')}else{if(_preloader.length){_preloader.hide()}
button.removeClass('disabled').removeAttr('disabled')}}});define("js/ui/BingMapsPlacesControl",["require","exports","js/UIComponent","js/jquery-builder","js/ui/Popover"],function(require,exports,UIComponent_46,jquery_builder_7,Popover_9){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BingMapsPlacesControl=void 0;var BingMapsPlacesControl=(function(_super){__extends(BingMapsPlacesControl,_super);function BingMapsPlacesControl(){var _this=_super.call(this)||this;_this.value={};_this.configSuplier=null;_this.mapAddress=(0,jquery_builder_7.default)('<input>').addClass('form-control').attr({type:'text'}).on("change",function(){_this.value.text=_this.mapAddress.val();_this.value.latLng=[0,0];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()}).autocomplete({source:function(request,response){jquery_builder_7.default.ajax({url:'https://dev.virtualearth.net/REST/v1/Locations',dataType:'jsonp',data:{key:wb_builder.mapsConfig.bingMapsApiKey,q:request.term},jsonp:'jsonp',success:function(data){var result=data.resourceSets[0];if(!result||result.estimatedTotal<=0)
return;response(jquery_builder_7.default.map(result.resources,function(item){return{data:item,label:item.name+' ('+item.address.countryRegion+')',value:item.name}}))}})},minLength:1,change:function(e,ui){if(!ui.item)
return;var loc=ui.item.data.point;_this.value.text=loc.coordinates[0]+', '+loc.coordinates[1];_this.value.latLng=[loc.coordinates[0],loc.coordinates[1]];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()},select:function(e,ui){if(!ui.item)
return;var loc=ui.item.data.point;_this.value.text=loc.coordinates[0]+', '+loc.coordinates[1];_this.value.latLng=[loc.coordinates[0],loc.coordinates[1]];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()}});_this.markerBtn=(0,jquery_builder_7.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_7.default)('<span>').addClass('fa fa-map-marker')).on('click',function(){return _this.editMarker()});_this.markerEditor=new MarkerEditor(_this.markerBtn,function(value){if(value){_this.value.latLng=value;_this.value.text="".concat(value[0],", ").concat(value[1])}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this._elem.append((0,jquery_builder_7.default)('<div>').addClass('input-group').append(_this.mapAddress).append((0,jquery_builder_7.default)('<span>').addClass('input-group-btn').append(_this.markerBtn)));_this.invalidate();return _this}
BingMapsPlacesControl.prototype.focus=function(){this.mapAddress.focus()};BingMapsPlacesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_5=data.change;this.onChange=function(){return changeFunc_5.call(_this,fields)}}
if(typeof data.configSuplier==='function'){this.configSuplier=data.configSuplier}};BingMapsPlacesControl.prototype.destroy=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1)}
_super.prototype.destroy.call(this)};BingMapsPlacesControl.prototype.editMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],config)};BingMapsPlacesControl.prototype.setValue=function(value){this.value=jquery_builder_7.default.extend(!0,{},value);if((!this.value.text||this.value.text==="")&&this.value.latLng){this.mapAddress.attr('placeholder',"".concat(this.value.latLng[0],", ").concat(this.value.latLng[1]))}
this.mapAddress.val(this.value.text||"")};BingMapsPlacesControl.prototype.getValue=function(){return jquery_builder_7.default.extend(!0,{},this.value)};BingMapsPlacesControl.supportsMultipleObjectBindings=function(){return!1};BingMapsPlacesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(typeof options.configSuplier==='function'){this.configSuplier=options.configSuplier}};return BingMapsPlacesControl}(UIComponent_46.UIComponent));exports.BingMapsPlacesControl=BingMapsPlacesControl;var MarkerEditor=(function(_super){__extends(MarkerEditor,_super);function MarkerEditor(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Drag marker to set your location'),(0,jquery_builder_7.default)('<div>').addClass('wb-bingmaps-places-med').css({width:500,height:300}),'wb-bingmaps-places-popover')||this;_this.onChange=onChange;_this.value=[0,0];_this.config=null;return _this}
MarkerEditor.prototype.edit=function(value,config){this.value=value;this.config=config;this.setVisible(!0)};MarkerEditor.prototype.setMarker=function(value,config){if(!this.isInitialized())
return;var loc=new Microsoft.Maps.Location(this.value[0],this.value[1]);var opts={center:loc};if(config){opts.zoom=config.zoom;this.map.setMapType(config.mapTypeId)}
this.map.setView(opts);this.mapMarker.setLocation(loc)};MarkerEditor.prototype.onInit=function(){var _this=this;Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme',{callback:function(){var loc=new Microsoft.Maps.Location(_this.value[0],_this.value[1]);_this.map=new Microsoft.Maps.Map(_this.getContent()[0],{credentials:wb_builder.mapsConfig.bingMapsApiKey,mapTypeId:Microsoft.Maps.MapTypeId.road,theme:new Microsoft.Maps.Themes.BingTheme(),zoom:0,center:loc});_this.mapMarker=new Microsoft.Maps.Pushpin(loc,{draggable:!0});Microsoft.Maps.Events.addHandler(_this.mapMarker,'dragend',function(e){var pos=e.location||e.entity.getLocation();if(pos){_this.value=[pos.latitude,pos.longitude];_this.onChange.call(_this,_this.value)}});_this.map.entities.push(_this.mapMarker)}})};MarkerEditor.prototype.onDom=function(){this.setMarker(this.value,this.config)};return MarkerEditor}(Popover_9.Popover))});define("js/ui/BaiduMapsPlacesControl",["require","exports","js/UIComponent","js/jquery-builder","js/ui/Popover"],function(require,exports,UIComponent_47,jquery_builder_8,Popover_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BaiduMapsPlacesControl=void 0;function toMapType(type){return window[type]}
var BaiduMapsPlacesControl=(function(_super){__extends(BaiduMapsPlacesControl,_super);function BaiduMapsPlacesControl(){var _this=_super.call(this)||this;_this.value={};_this.configSuplier=null;_this.mapAddress=(0,jquery_builder_8.default)('<input>').addClass('form-control').attr({type:'text'}).on("change",function(){_this.value.text=_this.mapAddress.val();_this.value.latLng=[0,0];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this.markerBtn=(0,jquery_builder_8.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_8.default)('<span>').addClass('fa fa-map-marker')).on('click',function(){return _this.editMarker()});_this.markerEditor=new MarkerEditor(_this.markerBtn,function(value){if(value){_this.value.latLng=value;_this.value.text="".concat(value[0],", ").concat(value[1])}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this._elem.append((0,jquery_builder_8.default)('<div>').addClass('input-group').append(_this.mapAddress).append((0,jquery_builder_8.default)('<span>').addClass('input-group-btn').append(_this.markerBtn)));_this.invalidate();return _this}
BaiduMapsPlacesControl.prototype.focus=function(){this.mapAddress.focus()};BaiduMapsPlacesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_6=data.change;this.onChange=function(){return changeFunc_6.call(_this,fields)}}
if(typeof data.configSuplier==='function'){this.configSuplier=data.configSuplier}};BaiduMapsPlacesControl.prototype.destroy=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1)}
_super.prototype.destroy.call(this)};BaiduMapsPlacesControl.prototype.editMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],config)};BaiduMapsPlacesControl.prototype.setValue=function(value){this.value=jquery_builder_8.default.extend(!0,{},value);if((!this.value.text||this.value.text==="")&&this.value.latLng){this.mapAddress.attr('placeholder',"".concat(this.value.latLng[0],", ").concat(this.value.latLng[1]))}
this.mapAddress.val(this.value.text||"")};BaiduMapsPlacesControl.prototype.getValue=function(){return jquery_builder_8.default.extend(!0,{},this.value)};BaiduMapsPlacesControl.supportsMultipleObjectBindings=function(){return!1};BaiduMapsPlacesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(typeof options.configSuplier==='function'){this.configSuplier=options.configSuplier}};return BaiduMapsPlacesControl}(UIComponent_47.UIComponent));exports.BaiduMapsPlacesControl=BaiduMapsPlacesControl;var MarkerEditor=(function(_super){__extends(MarkerEditor,_super);function MarkerEditor(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Drag marker to set your location'),(0,jquery_builder_8.default)('<div>').addClass('wb-baidumaps-places-med').css({width:500,height:300}),'wb-baidumaps-places-popover')||this;_this.onChange=onChange;_this.value=[0,0];_this.config=null;return _this}
MarkerEditor.prototype.edit=function(value,config){this.value=value;this.config=config;this.setVisible(!0)};MarkerEditor.prototype.setMarker=function(value,config){if(!this.isInitialized())
return;var loc=new BMap.Point(value[0],value[1]);var zoom=this.map.getZoom();if(config){zoom=config.zoom;this.map.setMapType(toMapType(config.mapTypeId)||BMAP_NORMAL_MAP)}
this.map.reset();this.map.setZoom(zoom);this.map.setCenter(loc);this.mapMarker.setPosition(loc)};MarkerEditor.prototype.onInit=function(){var _this=this;var elem=this.getContent()[0];elem.id=this.id+'-demomap';var loc=new BMap.Point(this.value[0],this.value[1]);this.map=new BMap.Map(elem.id);this.map.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_SMALL}));this.map.addControl(new BMap.MapTypeControl());this.map.enableScrollWheelZoom(!0);this.map.centerAndZoom(loc,15);this.mapMarker=new BMap.Marker(loc);this.mapMarker.enableDragging();this.mapMarker.addEventListener('dragend',function(){var pos=_this.mapMarker.getPosition();if(pos){_this.value=[pos.lng,pos.lat];_this.onChange.call(_this,_this.value)}});this.map.addOverlay(this.mapMarker)};MarkerEditor.prototype.onShown=function(){this.setMarker(this.value,this.config)};return MarkerEditor}(Popover_10.Popover))});define("js/ui/TextInputButtonControl",["require","exports","js/UIComponent","js/jquery-builder","js/core/BuilderConfig"],function(require,exports,UIComponent_48,jquery_builder_9,BuilderConfig_8){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TextInputButtonControl=void 0;var TextInputButtonControl=(function(_super){__extends(TextInputButtonControl,_super);function TextInputButtonControl(){var _this=_super.call(this)||this;_this.codeInput=(0,jquery_builder_9.default)('<input>').addClass('form-control').on('change',function(){_this.value.code=_this.codeInput.val();if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this.activateButton=(0,jquery_builder_9.default)('<button>').addClass('btn btn-default').text('Activate').on('click',function(){return _this.checkCode(_this.codeInput.val())});_this._elem.append((0,jquery_builder_9.default)('<div>').addClass('input-group').append(_this.codeInput).append((0,jquery_builder_9.default)('<span>').addClass('input-group-btn').append(_this.activateButton)));return _this}
TextInputButtonControl.prototype.encode=function(code){return code.split("").reverse().join("")};TextInputButtonControl.prototype.checkCode=function(code){var _this=this;jquery_builder_9.default.ajax({type:"POST",url:BuilderConfig_8.wbConfig.getRawUrl('getbutton/validate',{key:this.encode(code)}),success:function(response,status,xhr){console.log(response);_this.value.pro=response.valid?!0:!1;_this.onValueChanged()},error:function(xhr){_this.value.pro=!1;_this.onValueChanged()}})};TextInputButtonControl.prototype.getValue=function(){return __assign({},this.value)};TextInputButtonControl.prototype.setValue=function(value){this.value=__assign({},value);this.codeInput.val(this.value.code)};return TextInputButtonControl}(UIComponent_48.UIComponent));exports.TextInputButtonControl=TextInputButtonControl});define("js/ui/AnimationControl",["require","exports","js/UIComponent","js/ui/MiniTabPane","js/Label","js/VerticalLayout","js/DropdownBox","js/SliderControl","js/CheckBox","js/UIButton","js/FlowLayout"],function(require,exports,UIComponent_49,MiniTabPane_3,Label_10,VerticalLayout_15,DropdownBox_4,SliderControl_3,CheckBox_6,UIButton_4,FlowLayout_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AnimationControl=exports.buildAnimName=exports.buildAnimCss=void 0;function buildAnimationValue(effect){return{effect:effect,timing:'linear',direction:'none',duration:0.6,delay:0,loop:!1,}}
function buildAnimationControlValue(){return{}}
function buildAnimCss(val){if(!val)
return{animation:'none'};return{animation:'wb-anim-'+val.effect+(val.direction?('-'+val.direction):'')+' '+val.duration+'s'+' '+val.timing+' '+val.delay+'s','animation-iteration-count':val.loop?'infinite':1,}}
exports.buildAnimCss=buildAnimCss;function buildAnimName(val){return'wb-anim-'+val.effect+(val.direction?('-'+val.direction):'')}
exports.buildAnimName=buildAnimName;var effectDirections=[{id:'top',name:__('Top')},{id:'right',name:__('Right')},{id:'bottom',name:__('Bottom')},{id:'left',name:__('Left')},];var effectDirectionsN=__spreadArray([{id:'none',name:__('None')}],effectDirections,!0);var effectDirectionsY=[{id:'up',name:__('Up')},{id:'down',name:__('Down')},];var effectDirectionsZ=[{id:'in',name:__('In')},{id:'out',name:__('Out')},];var effectDirectionsZN=__spreadArray([{id:'none',name:__('None')}],effectDirectionsZ,!0);var effectDirectionsNI=[{id:'none',name:__('None')},{id:'in',name:__('In')},];var effectList={normal:[{id:'none',name:__('None'),timing:'',directions:[]},{id:'fade-in',name:__('Fade In'),timing:'ease-out',directions:effectDirectionsN},{id:'zoom-in',name:__('Zoom In'),timing:'ease-out',directions:effectDirectionsN},{id:'bounce-in',name:__('Bounce In'),timing:'ease-out',directions:effectDirectionsN},{id:'slide-in',name:__('Slide In'),timing:'ease-in-out',directions:effectDirections},{id:'rotate-in',name:__('Rotate In'),timing:'ease-out',directions:effectDirectionsN},],hover:[{id:'none',name:__('None'),timing:'',directions:[]},{id:'zoom',name:__('Zoom'),timing:'ease-out',directions:effectDirectionsZ},{id:'pulse',name:__('Pulse'),timing:'linear',directions:effectDirectionsZN},{id:'buzz',name:__('Buzz'),timing:'linear',directions:[]},{id:'move',name:__('Move'),timing:'ease-in-out',directions:effectDirectionsY},{id:'bounce',name:__('Bounce'),timing:'linear',directions:effectDirectionsZ},{id:'rotate',name:__('Rotate'),timing:'linear',directions:effectDirectionsNI},]};var effectIdx={};for(var type in effectList){if(!(type in effectIdx))
effectIdx[type]={};for(var _i=0,_a=effectList[type];_i<_a.length;_i++){var eff=_a[_i];effectIdx[type][eff.id]=eff}}
var AnimationControl=(function(_super){__extends(AnimationControl,_super);function AnimationControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.effectTabId='';_this.ignoreChange=!1;_this.value=buildAnimationControlValue();_this.effect=new DropdownBox_4.DropdownBox().setOnSelect(function(){return _this.handleChange()});_this.direction=new DropdownBox_4.DropdownBox().setOnSelect(function(){return _this.handleChange()});_this.duration=new SliderControl_3.SliderControl(0.1,4.0,0.1,'s').setOnChange(function(){return _this.handleChange()});_this.delay=new SliderControl_3.SliderControl(0,8,0.1,'s').setOnChange(function(){return _this.handleChange()});_this.loop=new CheckBox_6.default(__('Loop'));_this.loop.onChange(function(){return _this.handleChange()});_this.optionsElem=new VerticalLayout_15.VerticalLayout().setSpacing(12).addAllChildren([(_this.directionBlock=new VerticalLayout_15.VerticalLayout()).addAllChildren([new Label_10.Label(__('Direction')),_this.direction,]),new VerticalLayout_15.VerticalLayout().addAllChildren([new Label_10.Label(__('Duration')),_this.duration,]),new VerticalLayout_15.VerticalLayout().addAllChildren([new Label_10.Label(__('Delay')),_this.delay,]),new VerticalLayout_15.VerticalLayout().addAllChildren([_this.loop,]),]);_this.playBtn=(new UIButton_4.UIButton('',null,'fa fa-play')).on('click',function(){return _this.handleChange()});_this.tabPane=new MiniTabPane_3.MiniTabPane([{id:'normal',title:__('Default')},{id:'hover',title:__('Hover')},],function(tab){return _this.selectTab(tab)});_this._elem.addClass('wb-animation-control').append(new VerticalLayout_15.VerticalLayout().setSpacing(12).addAllChildren([_this.tabPane,new VerticalLayout_15.VerticalLayout().addAllChildren([new Label_10.Label(__('Effect')),new FlowLayout_10.FlowLayout().addAllChildren([_this.effect,_this.playBtn]).applyLayoutCellCss(0,{flex:'1 1 auto'}),]),_this.optionsElem,]).getElem());return _this}
AnimationControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}};AnimationControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};AnimationControl.prototype.handleChange=function(){if(this.ignoreChange)
return;this.ignoreChange=!0;var effect=this.effect.getSelectedItem();if(!effect)
return;var tabId=this.effectTabId;var effectId=effect.getId();this.updateEffectOptions(tabId,effectId);var val=undefined;if(effectId!='none'){var direction=this.direction.getSelectedItem();val=buildAnimationValue(effectId);val.effect=effectId;val.timing=(effectId&&(effectId in effectIdx[tabId]))?effectIdx[tabId][effectId].timing:'linear';val.direction=direction?direction.getId():'';val.duration=this.duration.getValue();val.delay=this.delay.getValue();val.loop=this.loop.getValue()}
if(tabId=='normal'){this.value.normal=val}else if(tabId=='hover'){this.value.hover=val}
this.value._preview=tabId;if(typeof this.onChange==='function')
this.onChange();this.onValueChanged();this.ignoreChange=!1};AnimationControl.prototype.updateEffectOptions=function(tabId,effectId){var directions=(effectId&&(effectId in effectIdx[tabId]))?effectIdx[tabId][effectId].directions:[];this.direction.reload(directions);this.directionBlock.setVisible(directions.length>0);var needOptions=(effectId!='none');this.optionsElem.setVisible(needOptions);this.playBtn.setVisible(needOptions)};AnimationControl.prototype.selectTab=function(tab){if(!this.value)
return;this.ignoreChange=!0;var val=undefined;var tabId=this.effectTabId=tab.id;if(tabId=='normal'){val=this.value.normal}else if(tabId=='hover'){val=this.value.hover}
if(!val)
val=buildAnimationValue('none');this.effect.reload(effectList[tabId]);this.updateEffectOptions(tabId,val.effect);this.effect.setValue(val.effect);this.direction.setValue(val.direction);this.duration.setValue(val.duration);this.delay.setValue(val.delay);this.loop.setValue(val.loop);this.value._preview=tabId;this.onValueChanged();this.ignoreChange=!1};AnimationControl.prototype.destroy=function(){this.effect.destroy();this.direction.destroy();this.tabPane.destroy();_super.prototype.destroy.call(this)};AnimationControl.prototype.getValue=function(){if(!this.value.normal&&!this.value.hover){return null}
return{normal:this.value.normal?__assign({},this.value.normal):undefined,hover:this.value.hover?__assign({},this.value.hover):undefined,_preview:this.value._preview,}};AnimationControl.prototype.setValue=function(value){this.value=buildAnimationControlValue();if(value){if(value.normal)
this.value.normal=value.normal;if(value.hover)
this.value.hover=value.hover};this.selectTab(this.tabPane.getSelectedTab())};AnimationControl.supportsMultipleObjectBindings=function(){return!0};return AnimationControl}(UIComponent_49.UIComponent));exports.AnimationControl=AnimationControl});define("js/ui/SpacingPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/FlowLayout","js/SpacingSelector","js/UIModeScaleFactors","js/Label"],function(require,exports,Popover_11,VerticalLayout_16,FlowLayout_11,SpacingSelector_1,UIModeScaleFactors_2,Label_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SpacingPopover=void 0;var SpacingPopover=(function(_super){__extends(SpacingPopover,_super);function SpacingPopover(triggerBtn,onChange,title){if(title===void 0){title=__('Spacing')}
var _this=_super.call(this,triggerBtn,title,null,'wb-spacing-pop')||this;_this.onChange=onChange;_this.value={spacing:null,scaleFactors:null};_this.options=null;_this.spacingElem=new SpacingSelector_1.SpacingSelector().setOnChange(function(){_this.value.spacing=_this.spacingElem.getValue();_this.onChange(_this.value)});_this.scaleFactorsElem=new UIModeScaleFactors_2.UIModeScaleFactors();_this.scaleFactorsElem.setOnChange(function(){_this.value.scaleFactors=_this.scaleFactorsElem.getValue();_this.onChange(_this.value)});_this.setContent(new FlowLayout_11.FlowLayout().setSpacing('full').addClass('wb-spacing-dialog').addAllChildren([new VerticalLayout_16.VerticalLayout().css({minWidth:'200px',maxWidth:'300px'}).addClass('wb-spacing-dialog-spacing-block').setSpacing(12).addAllChildren([new VerticalLayout_16.VerticalLayout().addAllChildren([new Label_11.Label(__('Spacing')),_this.spacingElem,]),new VerticalLayout_16.VerticalLayout().addAllChildren([new Label_11.Label(__('Padding and margin scale factors')),_this.scaleFactorsElem,]),]),]).getElem());return _this}
SpacingPopover.prototype.updateOptionsVisibility=function(){if(!this.options)
return;var opt=this.options;this.spacingElem.setUseMargin(!opt.noMargin);this.spacingElem.setUsePadding(!opt.noPadding);this.scaleFactorsElem.setVisible(!opt.noScaleFactors)};SpacingPopover.prototype.edit=function(value,options){this.value=__assign({},value);this.options=__assign({},options);if(!value.spacing){value.spacing={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,}}
this.spacingElem.setValue(value.spacing);this.scaleFactorsElem.setValue(value.scaleFactors);this.updateOptionsVisibility();this.setVisible(!0)};SpacingPopover.prototype.dispose=function(){this.spacingElem.destroy();_super.prototype.dispose.call(this)};return SpacingPopover}(Popover_11.Popover));exports.SpacingPopover=SpacingPopover});define("js/SpacingDialogControl",["require","exports","js/UIComponent","js/ui/ThumbEditorControl","jquery","js/ui/SpacingPopover"],function(require,exports,UIComponent_50,ThumbEditorControl_6,jquery_64,SpacingPopover_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SpacingDialogControl=void 0;var defaultOptions={noMargin:!1,noPadding:!1,noScaleFactors:!1,css:{},};var SpacingDialogControl=(function(_super){__extends(SpacingDialogControl,_super);function SpacingDialogControl(options){var _this=_super.call(this)||this;_this.onChange=null;_this.value=null;_this.popover=null;_this.options=jquery_64.default.extend(!0,{},defaultOptions,options);_this.thumbCtrl=new ThumbEditorControl_6.ThumbEditorControl().onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});_this.emptyIconElem=(0,jquery_64.default)('<div>').css({width:'100%',height:'100%',background:'#b2b2b2',padding:'10px'});_this.emptyIconElem=(0,jquery_64.default)('<div>').css({width:'100%',height:'100%',background:'#c0dafe',padding:'10px'}).append(_this.emptyIconElem);_this.emptyIconElem=(0,jquery_64.default)('<div>').css({width:'100%',height:'100%',background:'#ffe2d2',padding:'10px'}).append(_this.emptyIconElem);var preview=_this.thumbCtrl.getPreviewElem();preview.css({display:'flex',alignItems:'center',justifyContent:'center',left:0,right:0,top:0,bottom:0}).append(_this.emptyIconElem);_this._elem.addClass('wb-spacing-dialog-ctrl').append(_this.thumbCtrl.getElem());return _this}
SpacingDialogControl.prototype.buildInit=function(data,fields){this.setOptions(data);if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){el.onChange=function(){func.call(el,fields)}})(this,data.change)}};SpacingDialogControl.prototype.setOnChange=function(onChange){(function(el,func){el.onChange=function(){func.call(el)}})(this,onChange)};SpacingDialogControl.prototype.setOptions=function(data){if("noPadding" in data)
this.options.noPadding=!!data.noPadding;if("noMargin" in data)
this.options.noMargin=!!data.noMargin;if("noScaleFactors" in data)
this.options.noScaleFactors=!!data.noScaleFactors;if("css" in data&&typeof data.css==='object'&&data.css)
this._elem.css(data.css);};SpacingDialogControl.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};SpacingDialogControl.prototype.clear=function(){this.setValue(null);this.handleChange()};SpacingDialogControl.prototype.edit=function(){var _this=this;if(this.popover&&this.popover.isVisible()){this.popover.setVisible(!1);return}
if(!this.popover){this.popover=new SpacingPopover_1.SpacingPopover(this.thumbCtrl.getElem(),function(value){_this.value=value;_this.handleChange()})}
this.popover.edit(this.value||{spacing:null,scaleFactors:null},this.options)};SpacingDialogControl.prototype.handleChange=function(){if(this.onChange&&typeof this.onChange==='function'){this.onChange.call(this,{})}
this.onValueChanged()};SpacingDialogControl.prototype.triggerChange=function(){this.handleChange()};SpacingDialogControl.prototype.updatePosition=function(){if(this.popover)
this.popover.updatePosition();};SpacingDialogControl.prototype.getValue=function(){if(this.value){return Object.assign({},this.value)}
return{}};SpacingDialogControl.prototype.setValue=function(obj){if(obj){obj=Object.assign({},obj)}
this.value=obj};SpacingDialogControl.supportsMultipleObjectBindings=function(){return!1};SpacingDialogControl.prototype.setComponentOptions=function(options){this.setOptions(options)};return SpacingDialogControl}(UIComponent_50.UIComponent));exports.SpacingDialogControl=SpacingDialogControl});define("js/ui/AnimationPopover",["require","exports","js/ui/Popover","js/VerticalLayout","js/FlowLayout","js/Label","js/ui/AnimationControl"],function(require,exports,Popover_12,VerticalLayout_17,FlowLayout_12,Label_12,AnimationControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AnimationPopover=void 0;var AnimationPopover=(function(_super){__extends(AnimationPopover,_super);function AnimationPopover(triggerBtn,onChange,title){if(title===void 0){title=__('Animation')}
var _this=_super.call(this,triggerBtn,title,null,'wb-animation-pop')||this;_this.onChange=onChange;_this.value=null;_this.options=null;_this.animationElem=new AnimationControl_1.AnimationControl(function(){_this.value=_this.animationElem.getValue();_this.onChange(_this.value)});_this.setContent(new FlowLayout_12.FlowLayout().setSpacing('full').addClass('wb-animation-dialog').addAllChildren([new VerticalLayout_17.VerticalLayout().css({minWidth:'200px',maxWidth:'300px'}).addClass('wb-animation-dialog-animation-block').setSpacing(12).addAllChildren([new Label_12.Label(__('Animation')),_this.animationElem,]),]).getElem());return _this}
AnimationPopover.prototype.updateOptionsVisibility=function(){if(!this.options)
return;var opt=this.options};AnimationPopover.prototype.edit=function(value,options){this.value=value?__assign({},value):null;this.options=__assign({},options);this.animationElem.setValue(value);this.updateOptionsVisibility();this.setVisible(!0)};AnimationPopover.prototype.dispose=function(){this.animationElem.destroy();_super.prototype.dispose.call(this)};return AnimationPopover}(Popover_12.Popover));exports.AnimationPopover=AnimationPopover});define("js/AnimationDialogControl",["require","exports","js/UIComponent","js/ui/ThumbEditorControl","jquery","js/ui/AnimationPopover"],function(require,exports,UIComponent_51,ThumbEditorControl_7,jquery_65,AnimationPopover_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AnimationDialogControl=void 0;var defaultOptions={};var AnimationDialogControl=(function(_super){__extends(AnimationDialogControl,_super);function AnimationDialogControl(options){var _this=_super.call(this)||this;_this.onChange=null;_this.popover=null;_this.options=jquery_65.default.extend(!0,{},defaultOptions,options);_this.thumbCtrl=new ThumbEditorControl_7.ThumbEditorControl().onEdit(function(){return _this.edit()}).onRemove(function(){return _this.clear()});var preview=_this.thumbCtrl.getPreviewElem();preview.css({display:'flex',alignItems:'center',justifyContent:'center'}).append((_this.emptyIconElem=(0,jquery_65.default)('<span>').addClass('fa fa-2x fa-fast-forward')));_this._elem.addClass('wb-animation-dialog-ctrl').append(_this.thumbCtrl.getElem());return _this}
AnimationDialogControl.prototype.buildInit=function(data,fields){this.setOptions(data);if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){el.onChange=function(){func.call(el,fields)}})(this,data.change)}};AnimationDialogControl.prototype.setOptions=function(data){};AnimationDialogControl.prototype.destroy=function(){if(this.popover)
this.popover.dispose();_super.prototype.destroy.call(this)};AnimationDialogControl.prototype.clear=function(){this.setValue(null);this.handleChange()};AnimationDialogControl.prototype.edit=function(){var _this=this;if(this.popover&&this.popover.isVisible()){this.popover.setVisible(!1);return}
if(!this.popover){this.popover=new AnimationPopover_1.AnimationPopover(this.thumbCtrl.getElem(),function(value){_this.value=value;_this.handleChange()})}
this.popover.edit(this.value,this.options)};AnimationDialogControl.prototype.handleChange=function(){if(this.onChange&&typeof this.onChange==='function'){this.onChange.call(this,{})}
this.onValueChanged()};AnimationDialogControl.prototype.triggerChange=function(){this.handleChange()};AnimationDialogControl.prototype.updatePosition=function(){if(this.popover)
this.popover.updatePosition();};AnimationDialogControl.prototype.getValue=function(){return this.value};AnimationDialogControl.prototype.setValue=function(obj){var _a,_b;this.emptyIconElem.css({color:(obj&&(((_a=obj===null||obj===void 0?void 0:obj.normal)===null||_a===void 0?void 0:_a.effect)||((_b=obj===null||obj===void 0?void 0:obj.hover)===null||_b===void 0?void 0:_b.effect)))?'#000000':'#dddddd'});this.value=obj};AnimationDialogControl.supportsMultipleObjectBindings=function(){return!1};AnimationDialogControl.prototype.setComponentOptions=function(options){this.setOptions(options)};return AnimationDialogControl}(UIComponent_51.UIComponent));exports.AnimationDialogControl=AnimationDialogControl});define("js/ui/SpotifyWidgetControl",["require","exports","js/UIComponent","js/jquery-builder","js/core/BuilderConfig","js/Label","js/VerticalLayout","js/UIButton","js/TextField","js/CustomContainer","js/FlowLayout","js/DropdownBox"],function(require,exports,UIComponent_52,jquery_builder_10,BuilderConfig_9,Label_13,VerticalLayout_18,UIButton_5,TextField_3,CustomContainer_4,FlowLayout_13,DropdownBox_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SpotifyWidgetControl=void 0;var SpotifyWidgetControl=exports.SpotifyWidgetControl=(function(_super){__extends(SpotifyWidgetControl,_super);function SpotifyWidgetControl(){var _this=_super.call(this)||this;_this._elem.append((_this.connectLayout=(new VerticalLayout_18.VerticalLayout().addAllChildren([(_this.connectBlock=new VerticalLayout_18.VerticalLayout().addAllChildren([(_this.connectButton=new UIButton_5.UIButton(__('Connect with Spotify')).on('click',function(){return _this.connect()}))]).setVisible(!1)),(_this.disconnectBlock=new VerticalLayout_18.VerticalLayout().addAllChildren([new FlowLayout_13.FlowLayout().addAllChildren([(_this.loggedInAsLabel=(new CustomContainer_4.CustomContainer('span')).css({paddingTop:7})),(_this.disconnectButton=new UIButton_5.UIButton(__('Sign Out')).on('click',function(){return _this.logout()}))]),new VerticalLayout_18.VerticalLayout().addAllChildren([new Label_13.Label(__('Playlists')),(_this.playlists=(new DropdownBox_5.DropdownBox()).on('change',function(){_this.updateUICustomLinkValue()}))]).css({marginTop:15}),])).setVisible(!1)]))).getElem()).append((_this.customLinkBlock=new VerticalLayout_18.VerticalLayout().addAllChildren([new Label_13.Label(__('Spotify Link or URI'),__('Right-click any song, album, artist, playlist, podcast or episode in the Spotify player and select “Share”. Click on \'Copy Link\' or \'Copy Spotify URI\' to copy the Spotify Link or URI')),(_this.customLink=new TextField_3.TextField('','https://open.spotify.com/track/0bYg9bo50gSsH3LtXe2SQn?si=zcMWgG0ZR96TYYUrS8D9gA').on('change',function(){_this.updateUIPlaylistValue();_this.onValueChanged()}))])).css({marginTop:15}).getElem());if(SpotifyWidgetControl.sessionDataInited){_this.updateUI()}else{_this.getSessionData(function(){return _this.updateUI()})}
return _this}
SpotifyWidgetControl.prototype.focus=function(){this.customLink.focus()};SpotifyWidgetControl.prototype.connect=function(){var _this=this;this.connectButton.setLoading(!0);var w=760,h=800,left=Math.round((screen.availWidth-w)/2),top=Math.round((screen.availHeight-h)/2);SpotifyWidgetControl.loginWindow=window.open(BuilderConfig_9.wbConfig.getRawUrl('spotify'),'Spotify','width='+w+',height='+h+',left='+left+',top='+top);var error=null;var timer=setInterval(function(){if(SpotifyWidgetControl.loginWindow&&SpotifyWidgetControl.loginWindow.closed){_this.connectButton.setLoading(!1);clearInterval(timer);if(error)
alert(error);}},500);this.waitForSessionData(function(sessData){_this.connectButton.setLoading(!1);_this.updateUI()},function(err){_this.connectButton.setLoading(!1);_this.updateUI();if(SpotifyWidgetControl.loginWindow&&SpotifyWidgetControl.loginWindow.closed){alert(err)}else{error=err}})};SpotifyWidgetControl.prototype.updateUICustomLinkValue=function(){if(SpotifyWidgetControl.sessionData){var item=this.playlists.getSelectedItem();var id=item?item.getId():null;var oldValue=this.customLink.getValue();var newValue=id?('https://open.spotify.com/embed/playlist/'+id):'';this.customLink.setValue(newValue);if(oldValue!=newValue)
this.onValueChanged();}};SpotifyWidgetControl.prototype.updateUIPlaylistValue=function(){if(SpotifyWidgetControl.sessionData){var link=this.customLink.getValue();var matches=link.match(/^https:\/\/open.spotify.com\/embed\/playlist\/([A-Za-z0-9]+)$/);if(matches&&matches.length>1){var id=matches[1];var item=this.playlists.getItemById(id);if(item)
this.playlists.selectItem(item);}}};SpotifyWidgetControl.prototype.updateUI=function(){var data=SpotifyWidgetControl.sessionData;this.playlists.removeAllItems();if(data){this.customLinkBlock.css({marginTop:15});this.connectLayout.setVisible(!0);this.connectBlock.setVisible(!1);this.customLinkBlock.setVisible(!1);this.loggedInAsLabel.setContent('Logged in as <strong>'+data.userName+'</strong>');this.disconnectBlock.setVisible(!0);if(data.playlists){for(var _i=0,_a=data.playlists;_i<_a.length;_i++){var playlist=_a[_i];this.playlists.addItem(new DropdownBox_5.Item(playlist.name,playlist.id))}}
this.updateUICustomLinkValue()}else{this.connectLayout.setVisible(!1);this.customLinkBlock.css({marginTop:0});this.disconnectBlock.setVisible(!1);this.loggedInAsLabel.setContent('');this.connectBlock.setVisible(!1);this.customLinkBlock.setVisible(!0)}};SpotifyWidgetControl.prototype.waitForSessionData=function(succClb,errClb){var _this=this;this.getSessionData(function(sessData,error){if(sessData){if(typeof(succClb)==='function')
succClb(sessData);}else{if(error){if(typeof(errClb)==='function')
errClb(error);}else{setTimeout(function(){_this.clearSessionData();_this.waitForSessionData(succClb,errClb)},1000)}}})};SpotifyWidgetControl.prototype.getSessionData=function(callback){if(typeof(callback)!=='function')
return;if(!SpotifyWidgetControl.sessionData){jquery_builder_10.default.get(BuilderConfig_9.wbConfig.getRawUrl('spotify/get-data'),function(resp){SpotifyWidgetControl.sessionDataInited=!0;if(resp&&resp.data){SpotifyWidgetControl.sessionData=resp.data}
callback(SpotifyWidgetControl.sessionData,((resp&&resp.error)?resp.error:null))})}else{callback(SpotifyWidgetControl.sessionData)}};SpotifyWidgetControl.prototype.clearSessionData=function(){SpotifyWidgetControl.sessionData=null};SpotifyWidgetControl.prototype.logout=function(callback){var _this=this;this.disconnectButton.setLoading(!0);jquery_builder_10.default.get(BuilderConfig_9.wbConfig.getRawUrl('spotify/logout'),function(resp){if(resp&&resp.ok){SpotifyWidgetControl.sessionData=null;if(typeof(callback)==='function')
callback();_this.updateUI()}
_this.disconnectButton.setLoading(!1)})};SpotifyWidgetControl.prototype.getValue=function(){return{link:this.customLink.getValue()}};SpotifyWidgetControl.prototype.setValue=function(value){var _a;this.customLink.setValue((_a=value.link)!==null&&_a!==void 0?_a:'');this.updateUIPlaylistValue()};SpotifyWidgetControl.loginWindow=null;SpotifyWidgetControl.sessionData=null;SpotifyWidgetControl.sessionDataInited=!1;return SpotifyWidgetControl}(UIComponent_52.UIComponent))});define("js/elements/accordion/AccordionLayout",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AccordionLayout=void 0;var AccordionLayout=exports.AccordionLayout=(function(){function AccordionLayout(){}
AccordionLayout.getAvailableTypes=function(){return[this.TYPE_ACCORDION,this.TYPE_TABS,this.TYPE_SLIDER,]};AccordionLayout.TYPE_ACCORDION='accordion';AccordionLayout.TYPE_TABS='tabs';AccordionLayout.TYPE_SLIDER='slider';return AccordionLayout}())});define("js/elements/accordion/LayoutSelector",["require","exports","js/UIComponent","jquery","js/elements/accordion/AccordionLayout"],function(require,exports,UIComponent_53,jquery_66,AccordionLayout_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.LayoutSelector=void 0;var LayoutSelector=(function(_super){__extends(LayoutSelector,_super);function LayoutSelector(){return _super!==null&&_super.apply(this,arguments)||this}
LayoutSelector.prototype.buildInit=function(data,fields){var _this=this;this._elem.addClass('wb-accordion-layout-selector wb-accordion-layout-selector-large');this._elem.append((0,jquery_66.default)('<div class="heading">').text(__('Choose Your Accordion Layout style')));this.list=(0,jquery_66.default)('<div class="layout-list">');var _loop_13=function(layout){var el=(0,jquery_66.default)('<div class="layout layout-'+layout+'"><span></span></div>').attr('data-layout',layout).attr('title',this_9.getLayoutName(layout));el.children('span').addClass(this_9.getLayoutIcon(layout));(function(layout){el.on('click',function(){_this.setValue(layout);_this.onValueChanged()})})(layout);this_9.list.append(el)};var this_9=this;for(var _i=0,_a=AccordionLayout_1.AccordionLayout.getAvailableTypes();_i<_a.length;_i++){var layout=_a[_i];_loop_13(layout)}
this._elem.append(this.list);if(typeof(data.change)==='function'){this.onChange=data.change}
this.setLabelValue()};LayoutSelector.prototype.setLabel=function(label){if(label===void 0){label=null}
_super.prototype.setLabel.call(this,label);this.setLabelValue();return this};LayoutSelector.prototype.setLabelValue=function(){var _a;if(this._labelElem){this._labelValue=this._labelElem.children('.wb-component-label-value');if(this._labelValue.length<=0){this._labelValue=(0,jquery_66.default)('<div class="wb-component-label-value">');this._labelElem.append(this._labelValue)}}(_a=this._labelValue)===null||_a===void 0?void 0:_a.text(this.getLayoutName(this.getValue()));return this};LayoutSelector.prototype.getLayoutName=function(layout){switch(layout){case AccordionLayout_1.AccordionLayout.TYPE_ACCORDION:return __('Accordion');case AccordionLayout_1.AccordionLayout.TYPE_TABS:return __('Tabs');case AccordionLayout_1.AccordionLayout.TYPE_SLIDER:return __('Slider')}
return layout};LayoutSelector.prototype.getLayoutIcon=function(layout){switch(layout){case AccordionLayout_1.AccordionLayout.TYPE_ACCORDION:return'ico-pl-accordion-accordion';case AccordionLayout_1.AccordionLayout.TYPE_TABS:return'ico-pl-accordion-tabs';case AccordionLayout_1.AccordionLayout.TYPE_SLIDER:return'ico-pl-accordion-slider'}
return layout};LayoutSelector.prototype.getValue=function(){return this.list.children('.active').attr('data-layout')};LayoutSelector.prototype.setValue=function(layout){this.list.children().removeClass('active');this.list.children('[data-layout="'+layout+'"]').addClass('active');this.setLabelValue();if(this.onChange)
this.onChange.call(this,layout);};LayoutSelector.supportsMultipleObjectBindings=function(){return!1};LayoutSelector.prototype.setIsSmall=function(value){if(value){this._elem.removeClass("wb-accordion-layout-selector-large");this._elem.addClass("wb-accordion-layout-selector-small")}else{this._elem.addClass("wb-accordion-layout-selector-large");this._elem.removeClass("wb-accordion-layout-selector-small")}};LayoutSelector.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if("small" in options)
this.setIsSmall(!!options.small);if("change" in options&&typeof(options.change)==='function')
this.onChange=options.change};return LayoutSelector}(UIComponent_53.UIComponent));exports.LayoutSelector=LayoutSelector});define("js/elements/accordion/AccordionStyleControl",["require","exports","js/UIComponent","js/ui/MiniTabPane","js/ColorPicker","js/BackgroundControl","js/BorderControl","js/Label","js/VerticalLayout","js/ui/controls/popovers/ShadowDialogControl","js/HorizontalLayout"],function(require,exports,UIComponent_54,MiniTabPane_4,ColorPicker_8,BackgroundControl_5,BorderControl_4,Label_14,VerticalLayout_19,ShadowDialogControl_3,HorizontalLayout_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AccordionStyleControl=void 0;var AccordionStyleControl=(function(_super){__extends(AccordionStyleControl,_super);function AccordionStyleControl(onChange){if(onChange===void 0){onChange=null}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.ignoreChange=!1;_this.useShadows=!1;_this.color=new ColorPicker_8.ColorPicker().setOnChange(function(){return _this.handleChange()});_this.bg=new BackgroundControl_5.BackgroundControl({useSize:!0,useOpacity:!0});_this.bg.onChange=function(){return _this.handleChange()};_this.border=new BorderControl_4.BorderControl('bottom',!0);_this.border.setAbsPopover(!0);_this.border.setOnChange(function(){return _this.handleChange()});_this.shadow=new ShadowDialogControl_3.ShadowDialogControl();_this.shadow.setOnChange(function(){return _this.handleChange()});_this.tabPane=new MiniTabPane_4.MiniTabPane([{id:'normal',title:__('Default')},{id:'hover',title:__('Hover')},{id:'active',title:__('Active')},],function(tab){return _this.selectTab(tab)});_this._elem.addClass('wb-btn-style-control').append(new VerticalLayout_19.VerticalLayout().setSpacing(12).addAllChildren([_this.tabPane,new HorizontalLayout_3.HorizontalLayout().addAllChildren([(_this.backgroundBlock=new VerticalLayout_19.VerticalLayout()).addAllChildren([new Label_14.Label(__('Background')),_this.bg,]),(_this.borderBlock=new VerticalLayout_19.VerticalLayout()).addAllChildren([new Label_14.Label(__('Border')),_this.border,]),]),new HorizontalLayout_3.HorizontalLayout().addAllChildren([(_this.colorBlock=new VerticalLayout_19.VerticalLayout()).addAllChildren([new Label_14.Label(__('Color')),_this.color,]),]),new HorizontalLayout_3.HorizontalLayout().addAllChildren([(_this.shadowBlock=new VerticalLayout_19.VerticalLayout()).addAllChildren([new Label_14.Label(__('Shadow')),_this.shadow,]),]),]).getElem());return _this}
AccordionStyleControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}
if('useShadows' in data)
this.setUseShadows(data.useShadows?!0:!1);};AccordionStyleControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if('useShadows' in options)
this.setUseShadows(options.useShadows?!0:!1);};AccordionStyleControl.prototype.setUseShadows=function(useShadows){this.useShadows=useShadows;this.shadowBlock.setVisible(useShadows)};AccordionStyleControl.prototype.handleChange=function(){if(this.ignoreChange)
return;this.ignoreChange=!0;var tab=this.tabPane.getSelectedTab();if(tab.id=='normal'){this.value.normal.color=this.color.getValue();this.value.normal.bg=this.bg.getValue();this.value.normal.border=this.border.getValue();if(this.useShadows){this.value.normal.shadow=this.shadow.getValue()}}else if(tab.id=='hover'){this.value.hover.color=this.color.getValue();this.value.hover.bg=this.bg.getValue();this.value.hover.border=this.border.getValue();if(this.useShadows){this.value.hover.shadow=this.shadow.getValue()}}else if(tab.id=='active'){this.value.active.color=this.color.getValue();this.value.active.bg=this.bg.getValue();this.value.active.border=this.border.getValue();if(this.useShadows){this.value.active.shadow=this.shadow.getValue()}}
if(typeof this.onChange==='function')
this.onChange();this.onValueChanged();this.ignoreChange=!1};AccordionStyleControl.prototype.selectTab=function(tab){if(!this.value)
return;this.ignoreChange=!0;if(tab.id=='normal'){this.color.setValue(this.value.normal.color);this.bg.setValue(this.value.normal.bg);this.border.setValue(this.value.normal.border?this.value.normal.border:null);this.shadow.setValue(this.value.normal.shadow?this.value.normal.shadow:null);this.borderBlock.setVisible(!0)}else if(tab.id=='hover'){this.color.setValue(this.value.hover.color);this.bg.setValue(this.value.hover.bg);this.border.setValue(this.value.hover.border?this.value.hover.border:null);this.shadow.setValue(this.value.hover.shadow?this.value.hover.shadow:null)}else if(tab.id=='active'){this.color.setValue(this.value.active.color);this.bg.setValue(this.value.active.bg);this.border.setValue(this.value.active.border?this.value.active.border:null);this.shadow.setValue(this.value.active.shadow?this.value.active.shadow:null);this.shadow.setValue(this.value.active.shadow?this.value.active.shadow:null)}
this.ignoreChange=!1};AccordionStyleControl.prototype.destroy=function(){this.color.destroy();this.bg.destroy();this.border.destroy();this.tabPane.destroy();this.shadow.destroy();_super.prototype.destroy.call(this)};AccordionStyleControl.prototype.getValue=function(){return{normal:__assign({},this.value.normal),hover:__assign({},this.value.hover),active:__assign({},this.value.active),}};AccordionStyleControl.prototype.setValue=function(value){this.value={normal:__assign({},value.normal),hover:__assign({},value.hover),active:__assign({},value.active),};this.selectTab(this.tabPane.getSelectedTab())};return AccordionStyleControl}(UIComponent_54.UIComponent));exports.AccordionStyleControl=AccordionStyleControl});define("js/PagesLanguagesVisibilityControl",["require","exports","js/Service","js/VerticalLayout","js/UIComponent","js/FlowLayout","js/ui/Popover","jquery","js/ui/TreeView","js/core/SitePage","js/core/BuilderConfig","js/BuilderEvent"],function(require,exports,Service_15,VerticalLayout_20,UIComponent_55,FlowLayout_14,Popover_13,jquery_67,TreeView_2,SitePage_1,BuilderConfig_10,BuilderEvent_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PagesLanguagesVisibilityControl=void 0;var thisElem=null;var PagesLanguagesVisibilityControl=(function(_super){__extends(PagesLanguagesVisibilityControl,_super);function PagesLanguagesVisibilityControl(){var _this=_super.call(this)||this;_this.uiFields={};_this.layoutPages=null;_this.layoutLanguages=null;_this.pagesLoaded=!1;_this.languagesLoaded=!1;_this.includePagesIds=[];_this.includeLangsIds=[];_this.isInherited=!1;_this.initLangs=!1;thisElem=_this;_this.buildField({type:'VerticalLayout',id:'pagesBlock',css:{marginRight:'0px'},children:[{type:(TreeView_2.TreeView),id:"pages",css:{maxHeight:"200px"},multiselect:!1,selectable:!1,showCheckboxes:!0,showSearch:!1,showCollapseIcon:!1,showDeleteIcon:!1,allowDraggingItems:!1,showCollapseButtons:!1,maxNameWidth:200,beforeSelect:function(newSelection,currentSelection){if(newSelection.length&&newSelection[0].tree.onItemCheckStateChange(newSelection[0],!newSelection[0].getChecked())){newSelection[0].setChecked(!newSelection[0].getChecked())}
return!1},checkedStateChange:function(curItem,checked){if(!checked){var isSelected_1=!1;_this.pages.root.traverse(function(item){if(item.getChecked()&&item.getData().id!=curItem.getData().id){isSelected_1=!0}});if(!isSelected_1){return!1}}
setTimeout(function(){thisElem=_this;_this.onValueChanged()},100)},}]});_this.buildField({type:'VerticalLayout',id:'languagesBlock',css:{marginRight:'0px'},children:[{type:(TreeView_2.TreeView),id:"languages",css:{maxHeight:"200px"},multiselect:!1,selectable:!1,showCheckboxes:!0,showSearch:!1,showCollapseIcon:!1,showDeleteIcon:!1,allowDraggingItems:!1,showCollapseButtons:!1,maxNameWidth:200,beforeSelect:function(newSelection){if(newSelection.length)
newSelection[0].setChecked(!newSelection[0].getChecked());this.checkedStateChange();return!1},checkedStateChange:function(){setTimeout(function(){thisElem=_this;_this.onValueChanged()},100)},}]});_this.pages=_this.uiFields.pages;_this.languages=_this.uiFields.languages;if(_this.layoutPages)
_this.layoutPages.dispose();if(_this.layoutLanguages)
_this.layoutLanguages.dispose();_this.layoutPages=new EditFieldsView(_this.uiFields,ViewType.pages,_this.pages);_this.layoutPages.appendTo(_this._elem);_this.layoutLanguages=new EditFieldsView(_this.uiFields,ViewType.langs,_this.languages);_this.layoutLanguages.appendTo(_this._elem);BuilderEvent_6.GlobalEvents.on("pages.changed",function(){var lastValue=_this.getValue();_this.loadPages();_this.setValue(lastValue)});BuilderEvent_6.GlobalEvents.on("languages.update",function(e){if(!e.visibility===!0){return}
if(thisElem!==null&&thisElem.languagesLoaded){e.visibility=!1;if(e.initLangs){_this.initLangs=!0}
thisElem.pagesLoaded=!1;thisElem.languagesLoaded=!1;thisElem.onValueChanged()}});return _this}
PagesLanguagesVisibilityControl.prototype.buildField=function(def){return new Service_15.Service.UIBuilder(def,this.uiFields)};PagesLanguagesVisibilityControl.prototype.destroy=function(){if(this.layoutPages)
this.layoutPages.dispose();if(this.layoutLanguages)
this.layoutLanguages.dispose();if(this.uiFields)
Service_15.Service.UIBuilder.destroyFields(this.uiFields);_super.prototype.destroy.call(this)};PagesLanguagesVisibilityControl.prototype.getValue=function(){var _this=this;var isCommon=!1;var includePages={};var langsSelected={};var allLangs=!0,allPages=!0;this.languages.root.traverse(function(item){if(item.getChecked()||_this.initLangs){langsSelected[item.getData().code]=!0}else{langsSelected[item.getData().code]=!1;allLangs=!1}});this.initLangs=!1;for(var _i=0,_a=wb_builder.site.languages;_i<_a.length;_i++){var lang=_a[_i];if(langsSelected[lang.code]===undefined){langsSelected[lang.code]=!0}}
this.pages.root.traverse(function(item){if(item.getChecked()){includePages[item.getData().id]=Object.keys(langsSelected).length?langsSelected:!0;if(item.getData().id!==wb_builder.pageId){isCommon=!0}}else{allPages=!1}});if(!isCommon){includePages=langsSelected}else if(allPages&&allLangs){includePages={}}
return{isCommon:isCommon,includePages:includePages}};PagesLanguagesVisibilityControl.prototype.setValue=function(value){var _this=this;var isCommon=value.isCommon;var includePages={};if(!isCommon){includePages={};if(Object.keys(value.includePages).length){includePages[wb_builder.pageId]={};for(var _i=0,_a=wb_builder.site.languages;_i<_a.length;_i++){var lang=_a[_i];includePages[wb_builder.pageId][lang.code]=value.includePages[lang.code]!==undefined?value.includePages[lang.code]:!0}}else{includePages[wb_builder.pageId]={};for(var _b=0,_c=wb_builder.site.languages;_b<_c.length;_b++){var lang=_c[_b];includePages[wb_builder.pageId][lang.code]=!0}}}else if(!Object.keys(value.includePages).length){var includeLangs={};for(var _d=0,_e=wb_builder.site.languages;_d<_e.length;_d++){var lang=_e[_d];includeLangs[lang.code]=!0}
for(var pid in wb_builder.site.pages){includePages[pid]=Object.keys(includeLangs)?includeLangs:!0}}else if(wb_builder.site.languages.length){var includeLangs={};for(var _f=0,_g=wb_builder.site.languages;_f<_g.length;_f++){var lang=_g[_f];includeLangs[lang.code]=!0}
for(var _h=0,_j=Object.keys(value.includePages);_h<_j.length;_h++){var pid=_j[_h];if(typeof value.includePages[pid]==='boolean'&&value.includePages[pid]===!0){includePages[pid]=includeLangs}else{includePages[pid]=value.includePages[pid]}}}else{includePages=value.includePages}
isCommon=!0;this.includePagesIds=[];this.includeLangsIds=[];if(!this.pagesLoaded){this.loadPages();var sitePages=wb_builder.site.pages;for(var pid in sitePages){if(!sitePages.hasOwnProperty(pid))
continue;var page=sitePages[pid];if(page.type===SitePage_1.PageType.TYPE_MAINTENANCE||page.type===SitePage_1.PageType.TYPE_404)
continue;if(isCommon&&typeof includePages[pid]==='undefined')
continue;if(!isCommon&&pid!==wb_builder.pageId)
continue;this.includePagesIds.push(page.id)}}
if(!this.languagesLoaded&&wb_builder.site.languages.length){this.loadLanguages();if(!this.includeLangsIds.length){if(isCommon&&Object.keys(includePages).length){for(var pid in includePages){for(var lang in includePages[pid]){var item=includePages[pid][lang];if(item){this.includeLangsIds.push(lang)}}
break}}else if(!isCommon&&!Object.keys(includePages).length){for(var _k=0,_l=wb_builder.site.languages;_k<_l.length;_k++){var lang=_l[_k];this.includeLangsIds.push(lang.code)}}}}
if(this.layoutPages!==null){var totalPages_1=0,selectedPages_1=0;var isCurrent_1=!1;this.pages.root.traverse(function(item){if(_this.includePagesIds.indexOf(item.getData().id)!==-1){item.setChecked(!0)}
if(item.getChecked()){selectedPages_1++}
if(item.getChecked()&&item.getData().id==wb_builder.pageId){isCurrent_1=!0}
totalPages_1++});this.layoutPages.setTotal(totalPages_1);this.layoutPages.setSelected(selectedPages_1);this.layoutPages.setCurPage(isCurrent_1);this.layoutPages.setIsInherited(this.isInherited);this.layoutPages.setVisible(totalPages_1?!0:!1);this.layoutPages.update()}
if(this.layoutLanguages!==null){var totalLangs_1=0,selectedLangs_1=0;var langsSelected_1=[];this.languages.root.traverse(function(item){if(_this.includeLangsIds.indexOf(item.getData().code)!==-1){item.setChecked(!0);langsSelected_1.push(item.getData().code);selectedLangs_1++}else if(item.getChecked()){selectedLangs_1++;langsSelected_1.push(item.getData().code)}
totalLangs_1++});this.layoutLanguages.setTotal(totalLangs_1);this.layoutLanguages.setSelected(selectedLangs_1);this.layoutLanguages.setLanguages(langsSelected_1);this.layoutLanguages.setIsInherited(this.isInherited);this.layoutLanguages.setVisible(totalLangs_1?!0:!1);this.layoutLanguages.update()}};PagesLanguagesVisibilityControl.prototype.loadPages=function(){this.pagesLoaded=!0;this.pages.setSelection([],!0);this.pages.root.removeAllChildren();this.buildPages(this.pages.root);this.updateDeletableFlags()};PagesLanguagesVisibilityControl.prototype.loadLanguages=function(){this.languages.setSelection([],!0);this.languages.root.removeAllChildren();var siteLanguages=wb_builder.site.languages;for(var lid in siteLanguages){var lang=siteLanguages[lid];var langItem=this.languages.createItem().setIcon('lang-icon flag-icon-'+BuilderConfig_10.wbConfig.getCountryCode(lang.code)).setName(lang.name).setData(lang).setCollapsible(!0);this.languages.root.addChild(langItem)}
this.languagesLoaded=!0};PagesLanguagesVisibilityControl.prototype.findTreeItemById=function(id){if(!this.pages||!this.pages.root.getChildren().length)
return null;var foundItem=null;this.pages.root.traverse(function(item){if(id==="!separator"){if(item.getSeparator()){foundItem=item;return!1}}else if(item.getData().id==id){foundItem=item;return!1}
return!0});return foundItem};PagesLanguagesVisibilityControl.prototype.findHomePageTreeItem=function(){if(!this.pages||!this.pages.root.getChildren().length)
return null;var foundItem=null;this.pages.root.traverse(function(item){if(item.getData().isFront){foundItem=item;return!1}
return!0});return foundItem};PagesLanguagesVisibilityControl.prototype.getPageIcon=function(page){if(page.id==="!defaults")
return"fa fa-gear";var icon=page.getPageIcon();return icon};PagesLanguagesVisibilityControl.prototype.buildPages=function(parentTreeItem,parentId){if(parentId===void 0){parentId=null}
var pages=[];var sitePages=wb_builder.site.pages;for(var pid in sitePages){if(!sitePages.hasOwnProperty(pid))
continue;var page=sitePages[pid];if(page.parentId!==parentId)
continue;if(page.type===SitePage_1.PageType.TYPE_MAINTENANCE||page.type===SitePage_1.PageType.TYPE_404)
continue;pages.push(page)}
pages=pages.sort(function(a,b){if(a.sortOrder==b.sortOrder)
return(a.id<b.id)?-1:1;return(a.sortOrder<b.sortOrder)?-1:1});for(var _i=0,pages_1=pages;_i<pages_1.length;_i++){var page=pages_1[_i];var pageItem=this.pages.createItem().setIcon(this.getPageIcon(page)).setName(this.getPageName(page)).setData(page).setCollapsible(!1);parentTreeItem.addChild(pageItem);this.buildPages(pageItem,page.id)}};PagesLanguagesVisibilityControl.prototype.getPageName=function(page){var name=page.name;if(typeof name!=="string"){if(!name)
name="New Page";else name=__tr(name)}
return name};PagesLanguagesVisibilityControl.prototype.updateDeletableFlags=function(){var homeItem=null;this.pages.root.traverse(function(item){if(item.getSeparator())
return;var page=item.getData();if(page.isFront)
homeItem=item;item.setDeletable(!page.isFront&&!page.isNew&&page.id!=="!defaults"&&!page.isServicePage())});homeItem=homeItem;for(;homeItem&&!homeItem.isRoot();homeItem=homeItem===null||homeItem===void 0?void 0:homeItem.getParent())
homeItem.setDeletable(!1);return this};PagesLanguagesVisibilityControl.prototype.setComponentOptions=function(options){if("isInherited" in options&&typeof options.isInherited==="boolean")
this.isInherited=options.isInherited;_super.prototype.setComponentOptions.call(this,options)};return PagesLanguagesVisibilityControl}(UIComponent_55.UIComponent));exports.PagesLanguagesVisibilityControl=PagesLanguagesVisibilityControl;var ViewType;(function(ViewType){ViewType.pages="pages";ViewType.langs="langs"})(ViewType||(ViewType={}));var EditFieldsView=(function(){function EditFieldsView(fields,type,items){if(type===void 0){type=ViewType.pages}
var _this=this;this.fields=fields;this.languages=null;this.isInherited=!1;this.total=0;this.selected=0;this.curPage=!1;var button=(0,jquery_67.default)('<span>').addClass('btn btn-default btn-xs').append((0,jquery_67.default)('<span>').addClass('fa fa-pencil')).on('click',function(){return _this.onClick()});this.input=(0,jquery_67.default)('<a>').attr('href','javascript:void(0)').on('click',function(){return _this.onClick()});this.elem=(0,jquery_67.default)('<div>').addClass('input-group link-popover wb-edit-field-ctrl').append(this.input).append((0,jquery_67.default)('<span>').addClass('input-group-btn').append(button));this.type=type;this.popover=new FontPopover(this.input,fields,type,items)}
EditFieldsView.prototype.update=function(){if(this.type==ViewType.pages&&(this.isInherited&&!wb_builder.site.languages.length||this.isInherited&&wb_builder.site.languages.length)){this.elem.html('<small>'+__('This element inherits visibility on other pages from one of its parents.')+'</small>');return}
var text=(0,jquery_67.default)(),stat=(0,jquery_67.default)();if(this.type==ViewType.pages){var message=__('Show in a specific pages');if(this.curPage&&this.selected===1){message=__('Show in current page only')}else if(this.selected===this.total){message=__('Show in all pages')}
text=(0,jquery_67.default)('<span>').addClass('text').html(message);if(!this.curPage||(this.selected>1&&this.selected!==this.total)){stat=(0,jquery_67.default)('<span>').addClass('stat').html(' ('+this.selected+'/'+this.total+')')}}else if(this.languages){text=(0,jquery_67.default)('<span>').addClass('visibility-languages');for(var _i=0,_a=this.languages;_i<_a.length;_i++){var lang=_a[_i];text.append((0,jquery_67.default)('<i>').addClass('flag-icon-'+BuilderConfig_10.wbConfig.getCountryCode(lang)))}
stat=(0,jquery_67.default)('<span>').addClass('stat').html('('+this.selected+'/'+this.total+')')}
if(text||stat){this.input.html('').append(text).append(stat)}};EditFieldsView.prototype.setTotal=function(total){this.total=total};EditFieldsView.prototype.setSelected=function(selected){this.selected=selected};EditFieldsView.prototype.setLanguages=function(languages){if(languages===void 0){languages=null}
this.languages=languages};EditFieldsView.prototype.setIsInherited=function(isInherited){this.isInherited=isInherited};EditFieldsView.prototype.setCurPage=function(curPage){this.curPage=curPage};EditFieldsView.prototype.onClick=function(){if(this.popover.isVisible()){this.popover.setVisible(!1);return}
this.popover.setVisible(!0)};EditFieldsView.prototype.appendTo=function(elem){elem.append((0,jquery_67.default)('<div>'+__(this.type==ViewType.pages?'Pages':'Languages')+'</div>').addClass('wb-property-group-label-title'));elem.append(this.elem)};EditFieldsView.prototype.dispose=function(){if(this.popover.isVisible()){this.popover.setVisible(!1)}
this.popover.dispose();this.elem.remove()};EditFieldsView.prototype.setVisible=function(visible){if(visible){this.elem.show();this.elem.prev().show()}else{this.elem.hide();this.elem.prev().hide()}};return EditFieldsView}());var FontPopover=(function(_super){__extends(FontPopover,_super);function FontPopover(triggerBtn,fields,type,items){var _this=this;var main;_this=_super.call(this,triggerBtn,__(type==ViewType.pages?'Pages':'Languages'),(main=new VerticalLayout_20.VerticalLayout()).setSpacing(0).getElem(),'visibility-popover')||this;_this.lines=[(new FlowLayout_14.FlowLayout()).setSpacing(30).addAllChildren([type==ViewType.pages?fields.pagesBlock:fields.languagesBlock]),];_this.lines[0].getElem().addClass('tree-view-block');var controls=new VerticalLayout_20.VerticalLayout();controls.getElem().addClass('dropdown-controls').append('<a href="javascript:void(0);" class="btn">'+__('Select all')+'</a>').append('<span>/</span>').append('<a href="javascript:void(0);" class="btn">'+__('Deselect all')+'</a>');controls.getElem().find('a').eq(0).on('click',function(){_this.selectAll(items)});controls.getElem().find('a').eq(1).on('click',function(){_this.deselectAll(items)});main.addAllChildren([controls]);main.addAllChildren(_this.lines);return _this}
FontPopover.prototype.selectAll=function(items){items.root.traverse(function(item){item.setChecked(!0)});thisElem===null||thisElem===void 0?void 0:thisElem.onValueChanged()};FontPopover.prototype.deselectAll=function(items){items.root.traverse(function(item){if(item.getData().id!==wb_builder.pageId){item.setChecked(!1)}else{item.setChecked(!0)}});thisElem===null||thisElem===void 0?void 0:thisElem.onValueChanged()};FontPopover.prototype.dispose=function(){for(var _i=0,_a=this.lines;_i<_a.length;_i++){var line=_a[_i];line.removeAllChildren()}
_super.prototype.dispose.call(this)};return FontPopover}(Popover_13.Popover))});define("js/ui/EcwidWidgetControl",["require","exports","js/UIComponent","js/jquery-builder","js/core/BuilderConfig","js/Label","js/VerticalLayout","js/UIButton","js/TextField","js/CustomContainer","js/FlowLayout","RadioBox"],function(require,exports,UIComponent_56,jquery_builder_11,BuilderConfig_11,Label_15,VerticalLayout_21,UIButton_6,TextField_4,CustomContainer_5,FlowLayout_15,RadioBox_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.EcwidWidgetControl=void 0;var EcwidWidgetControl=(function(_super){__extends(EcwidWidgetControl,_super);function EcwidWidgetControl(){var _this=_super.call(this)||this;_this.storeId=null;_this.textfieldEmail=new TextField_4.TextField().on('change',function(){_this.value.email=_this.textfieldStoreId.getValue()});_this.textfieldEmail.setPlaceholder(__('Email'));_this.buttonCreate=new UIButton_6.UIButton(__('Create')).on('click',function(){return _this.onCreate()});_this.textfieldStoreId=new TextField_4.TextField().on('change',function(){_this.value.storeId=_this.textfieldStoreId.getValue()});_this.buttonConnect=new UIButton_6.UIButton(__('Link')).on('click',function(){return _this.onConnect()});var actionChooser=new VerticalLayout_21.VerticalLayout();var radioCreate=new RadioBox_2.default(__('Create store'),undefined,'action',!0);radioCreate.onChange(function(){return _this.setAction('create')});var radioConnect=new RadioBox_2.default(__('Connect existing account'),undefined,'action',!0);radioConnect.css({marginTop:10});radioConnect.onChange(function(){return _this.setAction('connect')});actionChooser.addChild(radioCreate);actionChooser.addChild(radioConnect);var createComboContainer=new CustomContainer_5.CustomContainer();createComboContainer.setContent((0,jquery_builder_11.default)('<div>').addClass('input-group').append(_this.textfieldEmail.getElem()).append((0,jquery_builder_11.default)('<span>').addClass('input-group-btn').append(_this.buttonCreate.getElem())));_this.blockCreate=new VerticalLayout_21.VerticalLayout().addAllChildren([new Label_15.Label(__('Create store')),createComboContainer]);var comboContainer=new CustomContainer_5.CustomContainer();comboContainer.setContent((0,jquery_builder_11.default)('<div>').addClass('input-group').append(_this.textfieldStoreId.getElem()).append((0,jquery_builder_11.default)('<span>').addClass('input-group-btn').append(_this.buttonConnect.getElem())));_this.blockConnect=new VerticalLayout_21.VerticalLayout().addAllChildren([new Label_15.Label(__('Store ID'),__('Login to your Account and at the bottom right of the page you will find your "Store ID".')),comboContainer]).setVisible(!1);_this.loggedOutLayout=new VerticalLayout_21.VerticalLayout().setSpacing(15).addAllChildren([actionChooser,_this.blockCreate,_this.blockConnect,]).setVisible(!1);_this.labelStoreId=new CustomContainer_5.CustomContainer('span');_this.labelStoreId.setContent('Store ID: '+_this.textfieldStoreId.getValue());_this.buttonManageStore=new UIButton_6.UIButton(__('Manage Store')).on('click',function(){return _this.onManage()});_this.buttonLogout=new UIButton_6.UIButton(__('logout')).on('click',function(){return _this.onLogout()});_this.loggedInLayout=new VerticalLayout_21.VerticalLayout().setSpacing(12).addAllChildren([_this.labelStoreId,new FlowLayout_15.FlowLayout().addAllChildren([_this.buttonManageStore,_this.buttonLogout])]).setVisible(!1);_this._elem.append(_this.loggedOutLayout.getElem()).append(_this.loggedInLayout.getElem());jquery_builder_11.default.get(BuilderConfig_11.wbConfig.getRawUrl('ecwid/info')).done(function(resp){_this.storeId=resp.storeId;if(_this.storeId){_this.loggedInLayout.setVisible(!0);_this.loggedOutLayout.setVisible(!1);_this.labelStoreId.setContent('Store ID: '+_this.storeId);_this.buttonManageStore.setVisible(!resp.readonly)}else{_this.loggedInLayout.setVisible(!1);_this.loggedOutLayout.setVisible(!0)}});radioCreate.setValue(!0);return _this}
EcwidWidgetControl.prototype.setAction=function(action){if(action==='create'){this.blockCreate.setVisible(!0);this.blockConnect.setVisible(!1)}else{this.blockCreate.setVisible(!1);this.blockConnect.setVisible(!0)}};EcwidWidgetControl.prototype.onManage=function(){var _this=this;if(this.value.loginUrl){this.value.openCP(null,this.value.loginUrl,function(){return _this.forceValueChanged()})}else if(this.storeId){this.textfieldStoreId.setValue(this.storeId);this.loggedOutLayout.setVisible(!1);this.loggedInLayout.setVisible(!0);this.value.openCP(this.storeId,undefined,function(){return _this.forceValueChanged()});this.forceValueChanged()}};EcwidWidgetControl.prototype.onCreate=function(){var _this=this;if(this.value.loginUrl||this.storeId)
return;var email=this.textfieldEmail.getValue();this.buttonCreate.setLoading(!0);jquery_builder_11.default.post(BuilderConfig_11.wbConfig.getRawUrl('ecwid/create'),{email:email}).done(function(resp){if(resp.storeId){_this.storeId=resp.storeId;_this.value.storeId=resp.storeId;_this.textfieldStoreId.setValue(resp.storeId);_this.value.openCP(resp.storeId,undefined,function(){return _this.forceValueChanged()});_this.labelStoreId.setContent('Store ID: '+resp.storeId);_this.buttonManageStore.setVisible(!0);_this.loggedOutLayout.setVisible(!1);_this.loggedInLayout.setVisible(!0);_this.forceValueChanged();_this.buttonCreate.setLoading(!1)}else{alert((resp.error?resp.error:'Server error (3)'))}}).always(function(){return _this.buttonCreate.setLoading(!1)})};EcwidWidgetControl.prototype.onLogout=function(){var self=this;jquery_builder_11.default.get(BuilderConfig_11.wbConfig.getRawUrl('ecwid/disconnect'),function(resp){if(resp.ok){self.value.storeId='';self.storeId='';self.textfieldStoreId.setValue('');self.loggedInLayout.setVisible(!1);self.loggedOutLayout.setVisible(!0);self.forceValueChanged()}else{alert('Error: Disconnect unsuccessful. Please try again.')}})};EcwidWidgetControl.prototype.onConnect=function(){var _this=this;var storeId=this.value.storeId;if(!storeId)
return;jquery_builder_11.default.post(BuilderConfig_11.wbConfig.getRawUrl('ecwid/connect'),{storeId:storeId},function(resp){if(resp.ok){_this.labelStoreId.setContent('Store ID: '+storeId);_this.loggedOutLayout.setVisible(!1);_this.loggedInLayout.setVisible(!0);_this.buttonManageStore.setVisible(!resp.readonly);_this.storeId=storeId;_this.forceValueChanged()}else{_this.value.storeId='';alert((resp.error?resp.error:'Server error (2)'))}})};EcwidWidgetControl.prototype.getValue=function(){return __assign({},this.value)};EcwidWidgetControl.prototype.setValue=function(value){this.value=__assign({},value);this.textfieldStoreId.setValue(this.value.storeId)};EcwidWidgetControl.prototype.forceValueChanged=function(){if(this.value){if(!this.value.ver)
this.value.ver=0;else this.value.ver++}
this.onValueChanged()};return EcwidWidgetControl}(UIComponent_56.UIComponent));exports.EcwidWidgetControl=EcwidWidgetControl});define("js/ui/OpenStreetMapPlacesControl",["require","exports","js/UIComponent","js/jquery-builder","js/ui/Popover"],function(require,exports,UIComponent_57,jquery_builder_12,Popover_14){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OpenStreetMapPlacesControl=void 0;var OpenStreetMapPlacesControl=(function(_super){__extends(OpenStreetMapPlacesControl,_super);function OpenStreetMapPlacesControl(){var _this=_super.call(this)||this;_this.value={};_this.configSuplier=null;_this.mapAddress=(0,jquery_builder_12.default)('<input>').addClass('form-control').attr({type:'text'}).on("change",function(){_this.value.text=_this.mapAddress.val();_this.value.latLng=[0,0];if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this.markerBtn=(0,jquery_builder_12.default)('<button>').addClass('btn btn-default').attr({type:'button'}).append((0,jquery_builder_12.default)('<span>').addClass('fa fa-map-marker')).on('click',function(){return _this.editMarker()});_this.markerEditor=new MarkerEditor(_this.markerBtn,function(value){if(value){_this.value.latLng=value;_this.value.text="".concat(value[0],", ").concat(value[1])}
if(typeof _this.onChange==='function')
_this.onChange();_this.onValueChanged()});_this._elem.append((0,jquery_builder_12.default)('<div>').addClass('input-group').append(_this.mapAddress).append((0,jquery_builder_12.default)('<span>').addClass('input-group-btn').append(_this.markerBtn)));_this.invalidate();return _this}
OpenStreetMapPlacesControl.prototype.focus=function(){this.mapAddress.focus()};OpenStreetMapPlacesControl.prototype.buildInit=function(data,fields){var _this=this;if(typeof data.change==='function'){var changeFunc_7=data.change;this.onChange=function(){return changeFunc_7.call(_this,fields)}}
if(typeof data.configSuplier==='function'){this.configSuplier=data.configSuplier}};OpenStreetMapPlacesControl.prototype.destroy=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1)}
_super.prototype.destroy.call(this)};OpenStreetMapPlacesControl.prototype.editMarker=function(){if(this.markerEditor.isVisible()){this.markerEditor.setVisible(!1);return}
var config=(typeof this.configSuplier==='function')?this.callForOneBinding(this.configSuplier):null;this.markerEditor.edit(this.value.latLng||[0,0],config)};OpenStreetMapPlacesControl.prototype.setValue=function(value){this.value=jquery_builder_12.default.extend(!0,{},value);if((!this.value.text||this.value.text==="")&&this.value.latLng){this.mapAddress.attr('placeholder',"".concat(this.value.latLng[0],", ").concat(this.value.latLng[1]))}
this.mapAddress.val(this.value.text||"")};OpenStreetMapPlacesControl.prototype.getValue=function(){return jquery_builder_12.default.extend(!0,{},this.value)};OpenStreetMapPlacesControl.supportsMultipleObjectBindings=function(){return!1};OpenStreetMapPlacesControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if(typeof options.configSuplier==='function'){this.configSuplier=options.configSuplier}};return OpenStreetMapPlacesControl}(UIComponent_57.UIComponent));exports.OpenStreetMapPlacesControl=OpenStreetMapPlacesControl;var MarkerEditor=(function(_super){__extends(MarkerEditor,_super);function MarkerEditor(triggerBtn,onChange){var _this=_super.call(this,triggerBtn,__('Drag marker to set your location'),(0,jquery_builder_12.default)('<div>').addClass('wb-leaflet-places-med').css({width:500,height:300}),'wb-leaflet-places-popover')||this;_this.onChange=onChange;_this.value=[0,0];_this.config=null;return _this}
MarkerEditor.prototype.edit=function(value,config){this.value=value;this.config=config;this.setVisible(!0)};MarkerEditor.prototype.setMarker=function(value,config){if(!this.isInitialized())
return;if(config){this.map.setZoom(config.zoom)}
this.map.setView([value[0],value[1]],config===null||config===void 0?void 0:config.zoom);this.mapMarker.setLatLng([value[0],value[1]])};MarkerEditor.prototype.onInit=function(){var _this=this;this.map=L.map(this.getContent()[0],{center:[this.value[0],this.value[1]],zoom:0,});this.mapTileLayer=L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map);this.mapMarker=L.marker([this.value[0],this.value[1]],{draggable:!0}).addTo(this.map);this.mapMarker.on('dragend',function(){if(!_this.mapMarker||!_this.mapMarker.getLatLng())
return;var pos=_this.mapMarker.getLatLng();if(pos){_this.value=[pos.lat,pos.lng];_this.onChange.call(_this,_this.value)}})};MarkerEditor.prototype.onDom=function(){this.setMarker(this.value,this.config)};return MarkerEditor}(Popover_14.Popover))});define("js/element/PropertyType",["require","exports","js/SizeSelector","js/CheckBox","js/TextField","js/SpacingSelector","js/SliderControl","js/ui/CommonalitySelectorControl","js/ui/FlexLayoutControl","js/UIModeScaleFactors","js/BackgroundControl","js/UIComponent","js/BorderControl","js/RoundCornersControl","URLControl","js/ui/RadioBoxGroupControl","MultilangTextField","ImagePicker","js/ColorPicker","js/HAlignSelector","js/FontStyleSelector","js/ui/StaticTextControl","js/ui/GalleryTypeSelector","js/TextControl","js/DropdownBox","js/ui/GoogleMapsPlacesControl","js/UIButton","js/ui/BackgroundElementSelector","js/ui/SiteLanguagesControl","js/blog/BlogPropertyDialog","js/AlignSelector","js/ui/ButtonStyleControl","js/ui/MenuStyleControl","js/ui/LineStyleControl","js/ui/ScriptEditorControl","js/ui/YandexMapsPlacesControl","js/ui/BingMapsPlacesControl","js/ui/BaiduMapsPlacesControl","js/ui/TextInputButtonControl","js/ui/AnimationControl","js/SpacingDialogControl","js/AnimationDialogControl","js/ui/SpotifyWidgetControl","js/ui/controls/popovers/ShadowDialogControl","js/elements/accordion/LayoutSelector","js/elements/accordion/AccordionStyleControl","js/PagesLanguagesVisibilityControl","js/ui/OpenStreetMapPlacesControl","js/ui/EcwidWidgetControl"],function(require,exports,SizeSelector_10,CheckBox_7,TextField_5,SpacingSelector_2,SliderControl_4,CommonalitySelectorControl_1,FlexLayoutControl_2,UIModeScaleFactors_3,BackgroundControl_6,UIComponent_58,BorderControl_5,RoundCornersControl_1,URLControl_2,RadioBoxGroupControl_2,MultilangTextField_2,ImagePicker_2,ColorPicker_9,HAlignSelector_3,FontStyleSelector_3,StaticTextControl_1,GalleryTypeSelector_1,TextControl_3,DropdownBox_6,GoogleMapsPlacesControl_1,UIButton_7,BackgroundElementSelector_1,SiteLanguagesControl_1,BlogPropertyDialog_1,AlignSelector_2,ButtonStyleControl_2,MenuStyleControl_1,LineStyleControl_2,ScriptEditorControl_1,YandexMapsPlacesControl_1,BingMapsPlacesControl_1,BaiduMapsPlacesControl_1,TextInputButtonControl_1,AnimationControl_2,SpacingDialogControl_1,AnimationDialogControl_1,SpotifyWidgetControl_1,ShadowDialogControl_4,LayoutSelector_1,AccordionStyleControl_1,PagesLanguagesVisibilityControl_1,OpenStreetMapPlacesControl_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PropertyType=exports.PropertyTypeAccess=void 0;var PropertyTypeAccess;(function(PropertyTypeAccess){PropertyTypeAccess[PropertyTypeAccess.User=0]="User";PropertyTypeAccess[PropertyTypeAccess.Admin=1]="Admin";PropertyTypeAccess[PropertyTypeAccess.Developer=2]="Developer";PropertyTypeAccess[PropertyTypeAccess.ComposerOrAdmin=3]="ComposerOrAdmin"})(PropertyTypeAccess||(exports.PropertyTypeAccess=PropertyTypeAccess={}));var cbJumper=function(){var el=new CheckBox_7.default(''),oriSetValue=el.setValue,elValue=!0;el.setValue=function(value){oriSetValue.call(this,value);if(elValue!=value){elValue=value;el.css({marginTop:value?'0px':'23px',marginBottom:value?'1px':''})}};el.setValue(!1);return el};var PropertyType=exports.PropertyType=(function(){function PropertyType(id,accessLevel,allowMultipleObjectBindings,name,component,componentFactory,defaultComponentOptions,defaultValueComparator,defaultSerializer,defaultDeserializer,isElementReference){if(componentFactory===void 0){componentFactory=null}
if(defaultComponentOptions===void 0){defaultComponentOptions=null}
if(isElementReference===void 0){isElementReference=!1}
this.inlineSize=0;this.id=id;this.path=id.split("/");this.accessLevel=accessLevel;this.allowMultipleObjectBindings=allowMultipleObjectBindings;this.componentSupportsMultipleObjectBindings=(component&&typeof component.supportsMultipleObjectBindings==="function")?component.supportsMultipleObjectBindings():!1;this.name=name;this.component=component;this.componentFactory=componentFactory;this.defaultComponentOptions=defaultComponentOptions;this.defaultValueComparator=defaultValueComparator;this.isButton=(component&&typeof component.componentBindsAsButton==="function")?component.componentBindsAsButton():!1;this.isElementReference=isElementReference;this.serializer=defaultSerializer;this.deserializer=defaultDeserializer;if(!PropertyType.nextSortOrder)
PropertyType.nextSortOrder=0;if(!PropertyType.sortOrderStep)
PropertyType.sortOrderStep=1000;this.sortOrder=PropertyType.nextSortOrder;PropertyType.nextSortOrder+=PropertyType.sortOrderStep;if(!PropertyType.sortMap)
PropertyType.sortMap={};if(!PropertyType.categoryTranslations)
PropertyType.loadTranslations();for(var i=this.path.length-1;i>=0;i--){var curPath=this.path.slice(0,i+1).join("/");if(PropertyType.sortMap.hasOwnProperty(curPath))
PropertyType.sortMap[curPath]=Math.min(PropertyType.sortMap[curPath],this.sortOrder);else PropertyType.sortMap[curPath]=this.sortOrder;if(i<this.path.length-1){if(!PropertyType.categoryTranslations.hasOwnProperty(curPath)){var part=this.path[i];var name_2=part.charAt(0).toUpperCase()+part.slice(1);PropertyType.categoryTranslations[curPath]=name_2;console.warn("No translation for property path \"".concat(curPath,"\". Using \"").concat(name_2,"\""))}}}}
PropertyType.loadTranslations=function(){PropertyType.categoryTranslations={"active":__("Active"),"advanced":__("Advanced"),"api":__("API"),"background":__("Background"),"banner":__("Banner"),"blog":__("Blog"),"border":__("Border"),"captcha":__('CAPTCHA'),"captions":__("Captions"),"lightbox":__("Lightbox"),"controls":__("Controls"),"galleryControls":__("Controls"),"galleryControls/thumbnail":__("Thumbnail"),"galleryControls/lightbox":__("Lightbox"),"contacts":__("Contacts"),"content":__("Content"),"custom Html":__("Custom Html"),"debug":"Debug","details":__("Details"),"email":__('Email settings'),"filter":__("Filter"),"flags":__("Settings"),"gallery":__("Gallery"),"general":__("General"),"general/lineGrp1":"","general/lineGrp1/c1":"","google maps":__("Google Maps"),"image":__("Picture"),"layout":__("Layout"),"layout/position":__("Position"),"listing":__("Listing"),"map":__("Map"),"menu":__("Menu"),"menuItems":__("Menu Items"),"submenuItems":__("Submenu Items"),"music":__("Music"),"musicStyle":__("Style"),"normalItem":__("Normal item"),"onClick":__("Link"),"onHover":__("Hover"),"plugin":__("Plugin"),"position":__("Size"),"position/position":"","position/size":"","position/size/checkboxes":"","position/size/height":"","position/size/_height":"","position/size/_height/max":"","position/size/_height/min":"","position/size/width":"","position/size/_width":"","position/size/_width/max":"","position/size/_width/min":"","thumbnails/_no_name_padal":"","thumbnails/_no_name_size":"","thumbnails/_no_name_shadbor":"","price":__("Price"),"sharing":__("Sharing"),"share":__("Share"),"slideShow":__("Slideshow"),"smtp":__('SMTP'),"spacing":__("Spacing"),"store":__("Store"),"table":__("Table"),"text":__("Text"),"template":__("Template"),"images":__("Images"),"images/Images":__("Images"),"thumbnails":__("Thumbnails"),"images/Thumbnails":__("Thumbnails"),"video":__("Video"),"visibility":__("Visibility"),"visibility/devices":__("Devices"),"visibility/pages":__(""),"visibility/languages":__("Languages"),"shadow":__("Shadow"),"animation":__("Animation"),"options":__("Options"),"style":__("Style"),"store cart/_no_name":"","store cart/buttonIcon":"","store cart/buttonIcon/_icon":"","store cart/buttonIcon/_icon/size":"","store cart/buttonIcon/_icon/size/width":"","store cart/buttonIcon/_icon/size/height":"","menuItems/aspaceanim/_spaceanim":"","menuItems/aspaceanim":"","menuItems/menuitems/_items":"","menuItems/menuitems":"","accordionitem":__('Item'),"submenuItems/aspaceanim/_spaceanim":"","submenuItems/aspaceanim":"","submenuItems/submenuitems/_items":"","submenuItems/submenuitems":""}};PropertyType.getCategoryTranslation=function(path){return this.categoryTranslations.hasOwnProperty(path)?this.categoryTranslations[path]:"[".concat(path,"]")};PropertyType.setDefaultOpenCategory=function(category){this.defaultOpenCategories.push(category)};PropertyType.setCategoryName=function(path,name){this.categoryTranslations[path]=name};PropertyType.setSortOrder=function(path,sortOrder){PropertyType.sortMap[path]=sortOrder};PropertyType.sortOrderAfter=function(path){return PropertyType.sortMap.hasOwnProperty(path)?(PropertyType.sortMap[path]+1):(PropertyType.nextSortOrder||0)};PropertyType.prototype.inline=function(size){if(size===void 0){size=12}
this.inlineSize=size;return this};PropertyType.compare=function(typeA,typeB){var lastIdx=Math.min(typeA.path.length,typeB.path.length);for(var i=0;i<lastIdx;i++){var pathA=typeA.path.slice(0,i+1).join("/");var pathB=typeB.path.slice(0,i+1).join("/");var sortOrderA=this.sortMap[pathA];var sortOrderB=this.sortMap[pathB];if(sortOrderA===sortOrderB)
continue;return(sortOrderA<sortOrderB)?-1:1}
if(typeA.path.length===typeB.path.length)
return(typeA.id<typeB.id)?-1:1;return(typeA.path.length<typeB.path.length)?-1:1};PropertyType.GetbuttonMessenger=new PropertyType("getbutton/GetbuttonMessenger",PropertyTypeAccess.User,!0,__("Facebook Messenger"),CheckBox_7.default);PropertyType.GetbuttonMessengerTextfield=new PropertyType("getbutton/GetbuttonMessengerTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:'Facebook Page ID',});PropertyType.GetbuttonWhatsapp=new PropertyType("getbutton/GetbuttonWhatsapp",PropertyTypeAccess.User,!0,__("WhatsApp"),CheckBox_7.default);PropertyType.GetbuttonWhatsappTextfield=new PropertyType("getbutton/GetbuttonWhatsappTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:'+1 (800) 123-45-67',});PropertyType.GetbuttonViber=new PropertyType("getbutton/GetbuttonViber",PropertyTypeAccess.User,!0,__("Viber"),CheckBox_7.default);PropertyType.GetbuttonViberTextfield=new PropertyType("getbutton/GetbuttonViberTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Phone Number or ID'),});PropertyType.GetbuttonSnapchat=new PropertyType("getbutton/GetbuttonSnapchat",PropertyTypeAccess.User,!0,__("Snapchat"),CheckBox_7.default);PropertyType.GetbuttonSnapchatTextfield=new PropertyType("getbutton/GetbuttonSnapchatTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Username'),});PropertyType.GetbuttonLine=new PropertyType("getbutton/GetbuttonLine",PropertyTypeAccess.User,!0,__("Line"),CheckBox_7.default);PropertyType.GetbuttonLineTextfield=new PropertyType("getbutton/GetbuttonLineTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('QR code URL'),});PropertyType.GetbuttonTelegram=new PropertyType("getbutton/GetbuttonTelegram",PropertyTypeAccess.User,!0,__("Telegram"),CheckBox_7.default);PropertyType.GetbuttonTelegramTextfield=new PropertyType("getbutton/GetbuttonTelegramTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Bot username'),});PropertyType.GetbuttonVkontakte=new PropertyType("getbutton/GetbuttonVkontakte",PropertyTypeAccess.User,!0,__("Vkontakte"),CheckBox_7.default);PropertyType.GetbuttonVkontakteTextfield=new PropertyType("getbutton/GetbuttonVkontakteTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Page name'),});PropertyType.GetbuttonSms=new PropertyType("getbutton/GetbuttonSms",PropertyTypeAccess.User,!0,__("SMS (mobile)"),CheckBox_7.default);PropertyType.GetbuttonSmsTextfield=new PropertyType("getbutton/GetbuttonSmsTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Phone number'),});PropertyType.GetbuttonCall=new PropertyType("getbutton/GetbuttonCall",PropertyTypeAccess.User,!0,__("Call"),CheckBox_7.default);PropertyType.GetbuttonCallTextfield=new PropertyType("getbutton/GetbuttonCallTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Phone number'),});PropertyType.GetbuttonEmail=new PropertyType("getbutton/GetbuttonEmail",PropertyTypeAccess.User,!0,__("Email"),CheckBox_7.default);PropertyType.GetbuttonEmailTextfield=new PropertyType("getbutton/GetbuttonEmailTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Phone number'),});PropertyType.GetbuttonInstagram=new PropertyType("getbutton/GetbuttonInstagram",PropertyTypeAccess.User,!0,__("Instagram"),CheckBox_7.default);PropertyType.GetbuttonInstagramTextfield=new PropertyType("getbutton/GetbuttonInstagramTextfield",PropertyTypeAccess.User,!0,__(''),TextField_5.TextField,null,{placeholder:__('Username'),});PropertyType.GetbuttonActivatePro=new PropertyType("getbutton - PRO/GetbuttonActivatePro",PropertyTypeAccess.User,!0,__('Pro version key'),TextInputButtonControl_1.TextInputButtonControl);PropertyType.GetbuttonProGreeting=new PropertyType("getbutton - PRO/GetbuttonProGreeting",PropertyTypeAccess.User,!0,__('Greeting message'),TextField_5.TextField,null,{placeholder:__('Hello, how may we help you? Just send us a message now to get assistance.'),});PropertyType.GetbuttonProCompanyUrl=new PropertyType("getbutton - PRO/GetbuttonProCompanyUrl",PropertyTypeAccess.User,!0,__('Company Logo URL'),TextField_5.TextField,null,{placeholder:__('URL'),});PropertyType.GetbuttonProDisableBranding=new PropertyType("getbutton - PRO/GetbuttonProDisableBranding",PropertyTypeAccess.User,!0,__("Disable branding"),CheckBox_7.default);PropertyType.GetbuttonProGoogleAnalytics=new PropertyType("getbutton - PRO/GetbuttonProGoogleAnalytics",PropertyTypeAccess.User,!0,__("Track clicks in Google Analytics"),CheckBox_7.default);PropertyType.GetbuttonProCustomColor=new PropertyType("getbutton - PRO/GetbuttonProCustomColor",PropertyTypeAccess.User,!0,__("Colour"),ColorPicker_9.ColorPicker,null,{noAlpha:!1,noTransparent:!0});PropertyType.GetbuttonProVPosition=new PropertyType("getbutton - PRO/position/GetbuttonProVPosition",PropertyTypeAccess.User,!0,__("Vertical"),SizeSelector_10.SizeSelector,null,{min:0,max:300,units:'px',hideSpinner:!0}).inline(6);PropertyType.GetbuttonProHPosition=new PropertyType("getbutton - PRO/position/GetbuttonProHPosition",PropertyTypeAccess.User,!0,__("Horizontal"),SizeSelector_10.SizeSelector,null,{min:0,max:300,units:'px',hideSpinner:!0}).inline(6);PropertyType.GetbuttonCallToAction=new PropertyType("settings/GetbuttonCallToAction",PropertyTypeAccess.User,!0,__('Call to action'),TextField_5.TextField,null,{placeholder:__('Message us'),});PropertyType.GetbuttonPosition=new PropertyType("settings/GetbuttonPosition",PropertyTypeAccess.User,!0,__("Position"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:!1,label:__("Right")},{value:!0,label:__("Left")},],}).inline(6);PropertyType.GetbuttonColor=new PropertyType("settings/GetbuttonColor",PropertyTypeAccess.User,!0,__('Colour'),DropdownBox_6.DropdownBox,null,{useHtmlInput:!0,options:[{id:'#666666',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #666666;"></div>'},{id:'#E74339',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #E74339;"></div>'},{id:'#ffa500',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffa500;"></div>'},{id:'#008000',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #008000;"></div>'},{id:'#0000ff',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #0000ff;"></div>'},{id:'#800080',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #800080;"></div>'},{id:'#ffc0cb',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #ffc0cb;"></div>'},{id:'#000000',html:'<div style="width: 50px; height: 16px; margin: 2px 0; background: #000000;"></div>'},],}).inline(6);PropertyType.ZopimGroupId=new PropertyType("zendesk/ZopimGroupId",PropertyTypeAccess.User,!0,__('Widget key'),TextField_5.TextField,null,{placeholder:'',});PropertyType.SmartargetUserId=new PropertyType("smartarget/SmartargetUserId",PropertyTypeAccess.User,!0,__('Smartarget User ID'),TextField_5.TextField,null,{placeholder:'',});PropertyType.OlarkGroupId=new PropertyType("olark/OlarkGroupId",PropertyTypeAccess.User,!0,__('Site ID'),TextField_5.TextField,null,{placeholder:'1111-222-33-4444',helpText:__('You can find your Site ID in Olark Admin Panel, Settings => Installation => "Get embed code". Enter the ID you will find at the bottom of the code inside olark.identify parentheses, i.e. "1111-222-33-4444"')});PropertyType.TawktoSiteId=new PropertyType("tawk.to/TawktoSiteId",PropertyTypeAccess.User,!0,__('Site ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.CountdownTimerEndDateString=new PropertyType("countdown/CountdownTimerEndDateString",PropertyTypeAccess.User,!0,__("End date"),TextField_5.TextField,null,{inputType:'date',placeholder:"00:00"}).inline(6);PropertyType.CountdownTimerEndTime=new PropertyType("countdown/CountdownTimerEndTime",PropertyTypeAccess.User,!0,__("End time"),TextField_5.TextField,null,{placeholder:"00:00",inputType:'time'}).inline(6);PropertyType.CountdownTimerFontCountdown=new PropertyType("countdown/CountdownTimerFontCountdown",PropertyTypeAccess.User,!0,__('Countdown'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!0,noAlign:!0,noSpacing:!0},!1);PropertyType.CountdownTimerFontText=new PropertyType("countdown/CountdownTimerFontText",PropertyTypeAccess.User,!0,__('Text'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noAlign:!0,noSpacing:!0},!1);PropertyType.CountdownCaptionSpacing=new PropertyType("countdown/CountdownCaptionSpacing",PropertyTypeAccess.User,!0,__("Caption spacing"),SizeSelector_10.SizeSelector,null,{min:0,max:9999,hideSpinner:!0,units:'px'}).inline(6);PropertyType.CountdownCaptionPosition=new PropertyType("countdown/CountdownCaptionPosition",PropertyTypeAccess.User,!0,__("Caption position"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'top',label:__("Top")},{value:'bottom',label:__("Bottom")},],}).inline(6);PropertyType.CountUpFrom=new PropertyType("Count Up/from",PropertyTypeAccess.User,!0,__("From"),SizeSelector_10.SizeSelector,null,{min:0,max:Math.pow(2,53)-1}).inline(6);PropertyType.CountUpTo=new PropertyType("Count Up/to",PropertyTypeAccess.User,!0,__("To"),SizeSelector_10.SizeSelector,null,{min:0,max:Math.pow(2,53)-1}).inline(6);PropertyType.CountUpDuration=new PropertyType("Count Up/duration",PropertyTypeAccess.User,!0,__("Duration"),SliderControl_4.SliderControl,null,{min:1,max:6,unit:'s'});PropertyType.CountUpText=new PropertyType("Count Up/text",PropertyTypeAccess.User,!0,__("Text"),TextControl_3.TextControl,null);PropertyType.MellatTerminalId=new PropertyType("mellat/MellatTerminalId",PropertyTypeAccess.User,!0,__('Terminal ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.MellatUsername=new PropertyType("mellat/MellatUsername",PropertyTypeAccess.User,!0,__('Username'),TextField_5.TextField,null,{placeholder:''});PropertyType.MellatPassword=new PropertyType("mellat/MellatPassword",PropertyTypeAccess.User,!0,__('Password'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.MellatAdditionalData=new PropertyType("mellat/MellatAdditionalData",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.MellatAmount=new PropertyType("mellat/MellatAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.MellatIsTest=new PropertyType("mellat/MellatIsTest",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.PaymentezAppCode=new PropertyType("paymentez/PaymentezAppCode",PropertyTypeAccess.User,!0,__('Application Code'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaymentezAppKey=new PropertyType("paymentez/PaymentezAppKey",PropertyTypeAccess.User,!0,__('Application Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PaymentezOrderDesc=new PropertyType("paymentez/PaymentezOrderDesc",PropertyTypeAccess.User,!0,__('Order Description'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaymentezOrderAmount=new PropertyType("paymentez/PaymentezOrderAmount",PropertyTypeAccess.User,!0,__('Order Amount'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PaymentezCurrencyCode=new PropertyType("paymentez/PaymentezCurrencyCode",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'COP',name:'COP',value:'COP'},{id:'USD',name:'USD',value:'USD'},{id:'BRL',name:'BRL',value:'BRL'},{id:'MXN',name:'MXN',value:'MXN'},{id:'ARS',name:'ARS',value:'ARS'},{id:'CLP',name:'CLP',value:'CLP'},{id:'PEN',name:'PEN',value:'PEN'}],}).inline(6);PropertyType.PaymentezIsTest=new PropertyType("paymentez/PaymentezIsTest",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.KlarnaUsername=new PropertyType("klarna/KlarnaUsername",PropertyTypeAccess.User,!0,__('Username'),TextField_5.TextField,null,{placeholder:''});PropertyType.KlarnaPassword=new PropertyType("klarna/KlarnaPassword",PropertyTypeAccess.User,!0,__('Password'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.KlarnaItemName=new PropertyType("klarna/KlarnaItemName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.KlarnaDefaultCountry=new PropertyType("klarna/KlarnaDefaultCountry",PropertyTypeAccess.User,!0,__('Default billing country'),DropdownBox_6.DropdownBox,null,{options:[{id:'AX',value:'AX',name:'Åland Islands'},{id:'AL',value:'AL',name:'Albania'},{id:'DZ',value:'DZ',name:'Algeria'},{id:'AS',value:'AS',name:'American Samoa'},{id:'AD',value:'AD',name:'Andorra'},{id:'AI',value:'AI',name:'Anguilla'},{id:'AQ',value:'AQ',name:'Antarctica'},{id:'AG',value:'AG',name:'Antigua and Barbuda'},{id:'AR',value:'AR',name:'Argentina'},{id:'AM',value:'AM',name:'Armenia'},{id:'AW',value:'AW',name:'Aruba'},{id:'AU',value:'AU',name:'Australia'},{id:'AT',value:'AT',name:'Austria'},{id:'AZ',value:'AZ',name:'Azerbaijan'},{id:'BS',value:'BS',name:'Bahamas'},{id:'BH',value:'BH',name:'Bahrain'},{id:'BD',value:'BD',name:'Bangladesh'},{id:'BB',value:'BB',name:'Barbados'},{id:'BY',value:'BY',name:'Belarus'},{id:'BE',value:'BE',name:'Belgium'},{id:'BZ',value:'BZ',name:'Belize'},{id:'BJ',value:'BJ',name:'Benin'},{id:'BM',value:'BM',name:'Bermuda'},{id:'BT',value:'BT',name:'Bhutan'},{id:'BO',value:'BO',name:'Bolivia'},{id:'BA',value:'BA',name:'Bosnia and Herzegovina'},{id:'BW',value:'BW',name:'Botswana'},{id:'BR',value:'BR',name:'Brazil'},{id:'BQ',value:'BQ',name:'British Antarctic Territory'},{id:'VG',value:'VG',name:'British Virgin Islands'},{id:'BN',value:'BN',name:'Brunei'},{id:'BG',value:'BG',name:'Bulgaria'},{id:'BF',value:'BF',name:'Burkina Faso'},{id:'CM',value:'CM',name:'Cameroon'},{id:'CA',value:'CA',name:'Canada'},{id:'CV',value:'CV',name:'Cape Verde'},{id:'KY',value:'KY',name:'Cayman Islands'},{id:'CF',value:'CF',name:'Central African Republic'},{id:'CL',value:'CL',name:'Chile'},{id:'CN',value:'CN',name:'China'},{id:'CX',value:'CX',name:'Christmas Island'},{id:'CO',value:'CO',name:'Colombia'},{id:'KM',value:'KM',name:'Comoros'},{id:'CK',value:'CK',name:'Cook Islands'},{id:'CR',value:'CR',name:'Costa Rica'},{id:'CI',value:'CI',name:'Côte d’Ivoire'},{id:'HR',value:'HR',name:'Croatia'},{id:'CU',value:'CU',name:'Cuba'},{id:'CY',value:'CY',name:'Cyprus'},{id:'CZ',value:'CZ',name:'Czech Republic'},{id:'DK',value:'DK',name:'Denmark'},{id:'DJ',value:'DJ',name:'Djibouti'},{id:'DM',value:'DM',name:'Dominica'},{id:'DO',value:'DO',name:'Dominican Republic'},{id:'EC',value:'EC',name:'Ecuador'},{id:'EG',value:'EG',name:'Egypt'},{id:'SV',value:'SV',name:'El Salvador'},{id:'ER',value:'ER',name:'Eritrea'},{id:'EE',value:'EE',name:'Estonia'},{id:'ET',value:'ET',name:'Ethiopia'},{id:'FK',value:'FK',name:'Falkland Islands'},{id:'FO',value:'FO',name:'Faroe Islands'},{id:'FJ',value:'FJ',name:'Fiji'},{id:'FI',value:'FI',name:'Finland'},{id:'FR',value:'FR',name:'France'},{id:'GF',value:'GF',name:'French Guiana'},{id:'PF',value:'PF',name:'French Polynesia'},{id:'TF',value:'TF',name:'French Southern Territories'},{id:'GA',value:'GA',name:'Gabon'},{id:'GM',value:'GM',name:'Gambia'},{id:'GE',value:'GE',name:'Georgia'},{id:'DE',value:'DE',name:'Germany'},{id:'GH',value:'GH',name:'Ghana'},{id:'GI',value:'GI',name:'Gibraltar'},{id:'GR',value:'GR',name:'Greece'},{id:'GL',value:'GL',name:'Greenland'},{id:'GD',value:'GD',name:'Grenada'},{id:'GP',value:'GP',name:'Guadeloupe'},{id:'GU',value:'GU',name:'Guam'},{id:'GT',value:'GT',name:'Guatemala'},{id:'GG',value:'GG',name:'Guernsey'},{id:'GN',value:'GN',name:'Guinea'},{id:'GY',value:'GY',name:'Guyana'},{id:'HN',value:'HN',name:'Honduras'},{id:'HK',value:'HK',name:'Hong Kong SAR China'},{id:'HU',value:'HU',name:'Hungary'},{id:'IS',value:'IS',name:'Iceland'},{id:'IN',value:'IN',name:'India'},{id:'ID',value:'ID',name:'Indonesia'},{id:'IE',value:'IE',name:'Ireland'},{id:'IM',value:'IM',name:'Isle of Man'},{id:'IL',value:'IL',name:'Israel'},{id:'IT',value:'IT',name:'Italy'},{id:'JM',value:'JM',name:'Jamaica'},{id:'JP',value:'JP',name:'Japan'},{id:'JE',value:'JE',name:'Jersey'},{id:'JO',value:'JO',name:'Jordan'},{id:'KZ',value:'KZ',name:'Kazakhstan'},{id:'KE',value:'KE',name:'Kenya'},{id:'KI',value:'KI',name:'Kiribati'},{id:'KW',value:'KW',name:'Kuwait'},{id:'KG',value:'KG',name:'Kyrgyzstan'},{id:'LA',value:'LA',name:'Laos'},{id:'LV',value:'LV',name:'Latvia'},{id:'LB',value:'LB',name:'Lebanon'},{id:'LS',value:'LS',name:'Lesotho'},{id:'LR',value:'LR',name:'Liberia'},{id:'LI',value:'LI',name:'Liechtenstein'},{id:'LT',value:'LT',name:'Lithuania'},{id:'LU',value:'LU',name:'Luxembourg'},{id:'MO',value:'MO',name:'Macau SAR China'},{id:'MK',value:'MK',name:'Macedonia'},{id:'MG',value:'MG',name:'Madagascar'},{id:'MW',value:'MW',name:'Malawi'},{id:'MY',value:'MY',name:'Malaysia'},{id:'MV',value:'MV',name:'Maldives'},{id:'ML',value:'ML',name:'Mali'},{id:'MT',value:'MT',name:'Malta'},{id:'MH',value:'MH',name:'Marshall Islands'},{id:'MQ',value:'MQ',name:'Martinique'},{id:'MR',value:'MR',name:'Mauritania'},{id:'MU',value:'MU',name:'Mauritius'},{id:'YT',value:'YT',name:'Mayotte'},{id:'MX',value:'MX',name:'Mexico'},{id:'FM',value:'FM',name:'Micronesia'},{id:'MD',value:'MD',name:'Moldova'},{id:'MC',value:'MC',name:'Monaco'},{id:'MN',value:'MN',name:'Mongolia'},{id:'ME',value:'ME',name:'Montenegro'},{id:'MA',value:'MA',name:'Morocco'},{id:'MZ',value:'MZ',name:'Mozambique'},{id:'MM',value:'MM',name:'Myanmar [Burma]'},{id:'NA',value:'NA',name:'Namibia'},{id:'NR',value:'NR',name:'Nauru'},{id:'NP',value:'NP',name:'Nepal'},{id:'NL',value:'NL',name:'Netherlands'},{id:'NC',value:'NC',name:'New Caledonia'},{id:'NZ',value:'NZ',name:'New Zealand'},{id:'NI',value:'NI',name:'Nicaragua'},{id:'NE',value:'NE',name:'Niger'},{id:'NG',value:'NG',name:'Nigeria'},{id:'NU',value:'NU',name:'Niue'},{id:'NF',value:'NF',name:'Norfolk Island'},{id:'MP',value:'MP',name:'Northern Mariana Islands'},{id:'NO',value:'NO',name:'Norway'},{id:'OM',value:'OM',name:'Oman'},{id:'PK',value:'PK',name:'Pakistan'},{id:'PW',value:'PW',name:'Palau'},{id:'PS',value:'PS',name:'Palestinian Territories'},{id:'PA',value:'PA',name:'Panama'},{id:'PG',value:'PG',name:'Papua New Guinea'},{id:'PY',value:'PY',name:'Paraguay'},{id:'PE',value:'PE',name:'Peru'},{id:'PH',value:'PH',name:'Philippines'},{id:'PL',value:'PL',name:'Poland'},{id:'PT',value:'PT',name:'Portugal'},{id:'PR',value:'PR',name:'Puerto Rico'},{id:'QA',value:'QA',name:'Qatar'},{id:'RE',value:'RE',name:'Réunion'},{id:'RO',value:'RO',name:'Romania'},{id:'RU',value:'RU',name:'Russia'},{id:'RW',value:'RW',name:'Rwanda'},{id:'BL',value:'BL',name:'Saint Barthélemy'},{id:'SH',value:'SH',name:'Saint Helena'},{id:'KN',value:'KN',name:'Saint Kitts and Nevis'},{id:'LC',value:'LC',name:'Saint Lucia'},{id:'MF',value:'MF',name:'Saint Martin'},{id:'PM',value:'PM',name:'Saint Pierre and Miquelon'},{id:'VC',value:'VC',name:'Saint Vincent and the Grenadines'},{id:'WS',value:'WS',name:'Samoa'},{id:'SM',value:'SM',name:'San Marino'},{id:'ST',value:'ST',name:'São Tomé and Príncipe'},{id:'SA',value:'SA',name:'Saudi Arabia'},{id:'SN',value:'SN',name:'Senegal'},{id:'RS',value:'RS',name:'Serbia'},{id:'SC',value:'SC',name:'Seychelles'},{id:'SL',value:'SL',name:'Sierra Leone'},{id:'SG',value:'SG',name:'Singapore'},{id:'SK',value:'SK',name:'Slovakia'},{id:'SI',value:'SI',name:'Slovenia'},{id:'SB',value:'SB',name:'Solomon Islands'},{id:'ZA',value:'ZA',name:'South Africa'},{id:'GS',value:'GS',name:'South Georgia and the South Sandwich Islands'},{id:'KR',value:'KR',name:'South Korea'},{id:'ES',value:'ES',name:'Spain'},{id:'LK',value:'LK',name:'Sri Lanka'},{id:'SR',value:'SR',name:'Suriname'},{id:'SJ',value:'SJ',name:'Svalbard and Jan Mayen'},{id:'SZ',value:'SZ',name:'Swaziland'},{id:'SE',value:'SE',name:'Sweden'},{id:'CH',value:'CH',name:'Switzerland'},{id:'TW',value:'TW',name:'Taiwan'},{id:'TJ',value:'TJ',name:'Tajikistan'},{id:'TZ',value:'TZ',name:'Tanzania'},{id:'TH',value:'TH',name:'Thailand'},{id:'TL',value:'TL',name:'Timor-Leste'},{id:'TG',value:'TG',name:'Togo'},{id:'TK',value:'TK',name:'Tokelau'},{id:'TO',value:'TO',name:'Tonga'},{id:'TT',value:'TT',name:'Trinidad and Tobago'},{id:'TR',value:'TR',name:'Turkey'},{id:'TC',value:'TC',name:'Turks and Caicos Islands'},{id:'TV',value:'TV',name:'Tuvalu'},{id:'UM',value:'UM',name:'U.S. Minor Outlying Islands'},{id:'VI',value:'VI',name:'U.S. Virgin Islands'},{id:'UG',value:'UG',name:'Uganda'},{id:'UA',value:'UA',name:'Ukraine'},{id:'AE',value:'AE',name:'United Arab Emirates'},{id:'GB',value:'GB',name:'United Kingdom'},{id:'US',value:'US',name:'United States'},{id:'UY',value:'UY',name:'Uruguay'},{id:'UZ',value:'UZ',name:'Uzbekistan'},{id:'VU',value:'VU',name:'Vanuatu'},{id:'VA',value:'VA',name:'Vatican City'},{id:'VN',value:'VN',name:'Vietnam'},{id:'WF',value:'WF',name:'Wallis and Futuna'},{id:'ZM',value:'ZM',name:'Zambia'},{id:'ZW',value:'ZW',name:'Zimbabwe'},],});PropertyType.KlarnaPrice=new PropertyType("klarna/KlarnaPrice",PropertyTypeAccess.User,!0,__('Price with Tax'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.KlarnaTaxAmount=new PropertyType("klarna/KlarnaTaxAmount",PropertyTypeAccess.User,!0,__("Tax Amount")+', %',SizeSelector_10.SizeSelector,null,{min:0,max:100}).inline(6);PropertyType.KlarnaCurrencyCode=new PropertyType("klarna/KlarnaCurrencyCode",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD',value:'USD'},{id:'GBP',name:'GBP',value:'GBP'},{id:'DKK',name:'DKK',value:'DKK'},{id:'EUR',name:'EUR',value:'EUR'},{id:'NOK',name:'NOK',value:'NOK'},{id:'SEK',name:'SEK',value:'SEK'}],}).inline(6);PropertyType.KlarnaIsTest=new PropertyType("klarna/KlarnaIsTest",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.WPwsbStoreid=new PropertyType("webpay/WPwsbStoreid",PropertyTypeAccess.User,!0,__('Store identifier'),TextField_5.TextField,null,{placeholder:''});PropertyType.WPSecretKey=new PropertyType("webpay/WPSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.WPItemName=new PropertyType("webpay/WPItemName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.WPItemPrice=new PropertyType("webpay/WPItemPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.WPCurrency=new PropertyType("webpay/WPCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'BYN',name:'BYN',value:'BYN'},{id:'USD',name:'USD',value:'USD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'RUB',name:'RUB',value:'RUB'},{id:'GBP',name:'GBP',value:'GBP'}],}).inline(6);PropertyType.WPDemo=new PropertyType("webpay/WPDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.KiwiQZApiId=new PropertyType("kiwi QZ/KiwiQZApiId",PropertyTypeAccess.User,!0,__('API ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.KiwiQZApiPassword=new PropertyType("kiwi QZ/KiwiQZApiPassword",PropertyTypeAccess.User,!0,__('API Password'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.KiwiQZProviderId=new PropertyType("kiwi QZ/KiwiQZProviderId",PropertyTypeAccess.User,!0,__('Provider ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.KiwiQZName=new PropertyType("kiwi QZ/KiwiQZName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.KiwiQZAmount=new PropertyType("kiwi QZ/KiwiQZAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PaytrailMerchantId=new PropertyType("paytrail/PaytrailMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaytrailSecretKey=new PropertyType("paytrail/PaytrailSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PaytrailName=new PropertyType("paytrail/PaytrailName",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaytrailAmount=new PropertyType("paytrail/PaytrailAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.WebmoneyWidgetWmId=new PropertyType("webmoney widget/WebmoneyWidgetWmId",PropertyTypeAccess.User,!0,__('WebMoney ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyWidgetPurseId=new PropertyType("webmoney widget/WebmoneyWidgetPurseId",PropertyTypeAccess.User,!0,__('Purse ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyWidgetKey=new PropertyType("webmoney widget/WebmoneyWidgetKey",PropertyTypeAccess.User,!0,__('Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyWidgetDescription=new PropertyType("webmoney widget/WebmoneyWidgetDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyWidgetAmount=new PropertyType("webmoney widget/WebmoneyWidgetAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.TwoCheckoutSid=new PropertyType("2Checkout/2CheckoutSid",PropertyTypeAccess.User,!0,__('SID'),TextField_5.TextField,null,{placeholder:''});PropertyType.TwoCheckoutName=new PropertyType("2Checkout/2CheckoutName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.TwoCheckoutPrice=new PropertyType("2Checkout/2CheckoutPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.TwoCheckoutCurrency=new PropertyType("2Checkout/2CheckoutCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD'},{id:'EUR',name:'EUR'},{id:'AED',name:'AED'},{id:'AFN',name:'AFN'},{id:'ALL',name:'ALL'},{id:'ARS',name:'ARS'},{id:'AUD',name:'AUD'},{id:'AZN',name:'AZN'},{id:'BBD',name:'BBD'},{id:'BDT',name:'BDT'},{id:'BGN',name:'BGN'},{id:'BMD',name:'BMD'},{id:'BND',name:'BND'},{id:'BOB',name:'BOB'},{id:'BRL',name:'BRL'},{id:'BSD',name:'BSD'},{id:'BWP',name:'BWP'},{id:'BZD',name:'BZD'},{id:'CAD',name:'CAD'},{id:'CHF',name:'CHF'},{id:'CLP',name:'CLP'},{id:'CNY',name:'CNY'},{id:'COP',name:'COP'},{id:'CRC',name:'CRC'},{id:'CZK',name:'CZK'},{id:'DKK',name:'DKK'},{id:'DOP',name:'DOP'},{id:'DZD',name:'DZD'},{id:'EGP',name:'EGP'},{id:'FJD',name:'FJD'},{id:'GBP',name:'GBP'},{id:'GTQ',name:'GTQ'},{id:'HKD',name:'HKD'},{id:'HNL',name:'HNL'},{id:'HRK',name:'HRK'},{id:'HUF',name:'HUF'},{id:'IDR',name:'IDR'},{id:'ILS',name:'ILS'},{id:'INR',name:'INR'},{id:'JMD',name:'JMD'},{id:'JPY',name:'JPY'},{id:'KES',name:'KES'},{id:'KRW',name:'KRW'},{id:'KZT',name:'KZT'},{id:'LAK',name:'LAK'},{id:'LBP',name:'LBP'},{id:'LKR',name:'LKR'},{id:'LRD',name:'LRD'},{id:'MAD',name:'MAD'},{id:'MMK',name:'MMK'},{id:'MOP',name:'MOP'},{id:'MRO',name:'MRO'},{id:'MUR',name:'MUR'},{id:'MVR',name:'MVR'},{id:'MXN',name:'MXN'},{id:'MYR',name:'MYR'},{id:'NIO',name:'NIO'},{id:'NOK',name:'NOK'},{id:'NPR',name:'NPR'},{id:'NZD',name:'NZD'},{id:'PEN',name:'PEN'},{id:'PGK',name:'PGK'},{id:'PHP',name:'PHP'},{id:'PKR',name:'PKR'},{id:'PLN',name:'PLN'},{id:'QAR',name:'QAR'},{id:'RON',name:'RON'},{id:'RUB',name:'RUB'},{id:'SAR',name:'SAR'},{id:'SBD',name:'SBD'},{id:'SCR',name:'SCR'},{id:'SEK',name:'SEK'},{id:'SGD',name:'SGD'},{id:'SYP',name:'SYP'},{id:'THB',name:'THB'},{id:'TOP',name:'TOP'},{id:'TRY',name:'TRY'},{id:'TTD',name:'TTD'},{id:'TWD',name:'TWD'},{id:'UAH',name:'UAH'},{id:'VND',name:'VND'},{id:'VUV',name:'VUV'},{id:'WST',name:'WST'},{id:'XCD',name:'XCD'},{id:'XOF',name:'XOF'},{id:'YER',name:'YER'},{id:'ZAR',name:'ZAR'}],}).inline(6);PropertyType.TwoCheckoutDemo=new PropertyType("2Checkout/2CheckoutDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.IyzicoApiKey=new PropertyType("iyzico/IyzicoApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.IyzicoSecretKey=new PropertyType("iyzico/IyzicoSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.IyzicoName=new PropertyType("iyzico/IyzicoName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.IyzicoPrice=new PropertyType("iyzico/IyzicoPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.IyzicoCurrency=new PropertyType("iyzico/IyzicoCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'TRY',name:'TRY',value:'TRY'},{id:'EUR',name:'EUR',value:'EUR'},{id:'USD',name:'USD',value:'USD'},{id:'GBP',name:'GBP',value:'GBP'},{id:'IRR',name:'IRR',value:'IRR'}],}).inline(6);PropertyType.IyzicoDemo=new PropertyType("iyzico/IyzicoDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.PagseguroEmail=new PropertyType("pagseguro/PagseguroEmail",PropertyTypeAccess.User,!0,__('Email'),TextField_5.TextField,null,{placeholder:''});PropertyType.PagseguroToken=new PropertyType("pagseguro/PagseguroToken",PropertyTypeAccess.User,!0,__('Token'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PagseguroItemDescription=new PropertyType("pagseguro/PagseguroItemDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.PagseguroItemAmount=new PropertyType("pagseguro/PagseguroItemAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PagseguroItemQuantity=new PropertyType("pagseguro/PagseguroItemQuantity",PropertyTypeAccess.User,!0,__('Quantity'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PagseguroSandbox=new PropertyType("pagseguro/PagseguroSandbox",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.AssistMerchantId=new PropertyType("assist/AssistMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.AssistServerName=new PropertyType("assist/AssistServerName",PropertyTypeAccess.User,!0,__('Server name'),TextField_5.TextField,null,{placeholder:''});PropertyType.AssistOrderComment=new PropertyType("assist/AssistOrderComment",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.AssistOrderAmount=new PropertyType("assist/AssistOrderAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.AssistOrderCurrency=new PropertyType("assist/AssistOrderCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'RUB',name:'RUB'},{id:'USD',name:'USD'},{id:'EUR',name:'EUR'},{id:'BYN',name:'BYN'},{id:'AMD',name:'AMD'},{id:'AUD',name:'AUD'},{id:'AZN',name:'AZN'},{id:'BGN',name:'BGN'},{id:'BRL',name:'BRL'},{id:'CAD',name:'CAD'},{id:'CHF',name:'CHF'},{id:'CNY',name:'CNY'},{id:'CZK',name:'CZK'},{id:'DKK',name:'DKK'},{id:'GBP',name:'GBP'},{id:'HUF',name:'HUF'},{id:'INR',name:'INR'},{id:'JPY',name:'JPY'},{id:'KGS',name:'KGS'},{id:'KRW',name:'KRW'},{id:'KZT',name:'KZT'},{id:'MDL',name:'MDL'},{id:'NOK',name:'NOK'},{id:'PLN',name:'PLN'},{id:'RON',name:'RON'},{id:'SEK',name:'SEK'},{id:'SGD',name:'SGD'},{id:'TJS',name:'TJS'},{id:'TMT',name:'TMT'},{id:'TRY',name:'TRY'},{id:'UAH',name:'UAH'},{id:'UZS',name:'UZS'},{id:'ZAR',name:'ZAR'}],}).inline(6);PropertyType.AssistDemo=new PropertyType("assist/AssistDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.ClickEvolutionMerchantId=new PropertyType("click evolution/ClickEvolutionMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.ClickEvolutionMerchantServiceId=new PropertyType("click evolution/ClickEvolutionMerchantServiceId",PropertyTypeAccess.User,!0,__('Merchant Service ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.ClickEvolutionSecretKey=new PropertyType("click evolution/ClickEvolutionSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.ClickEvolutionDescription=new PropertyType("click evolution/ClickEvolutionDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.ClickEvolutionAmount=new PropertyType("click evolution/ClickEvolutionAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.BuynowItemName=new PropertyType("buy now/BuynowItemName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.BuynowShipping=new PropertyType("buy now/BuynowShipping",PropertyTypeAccess.User,!0,__('Shipping'),TextField_5.TextField,null,{placeholder:''});PropertyType.BuynowAmount=new PropertyType("buy now/BuynowAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.BuynowCurrency=new PropertyType("buy now/BuynowCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD',value:'USD'},{id:'AUD',name:'AUD',value:'AUD'},{id:'BRL',name:'BRL',value:'BRL'},{id:'GBP',name:'GBP',value:'GBP'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'EUR',name:'EUR',value:'EUR'},{id:'HKD',name:'HKD',value:'HKD'},{id:'HUF',name:'HUF',value:'HUF'},{id:'ILS',name:'ILS',value:'ILS'},{id:'JPY',name:'JPY',value:'JPY'},{id:'MYR',name:'MYR',value:'MYR'},{id:'MXN',name:'MXN',value:'MXN'},{id:'TWD',name:'TWD',value:'TWD'},{id:'NZD',name:'NZD',value:'NZD'},{id:'NOK',name:'NOK',value:'NOK'},{id:'PHP',name:'PHP',value:'PHP'},{id:'PLN',name:'PLN',value:'PLN'},{id:'RUB',name:'RUB',value:'RUB'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SEK',name:'SEK',value:'SEK'},{id:'CHF',name:'CHF',value:'CHF'},{id:'THB',name:'THB',value:'THB'}],}).inline(6);PropertyType.BuynowBusiness=new PropertyType("buy now/BuynowBusiness",PropertyTypeAccess.User,!0,__('Email address to receive payments'),TextField_5.TextField,null,{placeholder:''});PropertyType.BuynowDemo=new PropertyType("buy now/BuynowDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.PayfastMerchantId=new PropertyType("payfast/PayfastMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayfastMerchantKey=new PropertyType("payfast/PayfastMerchantKey",PropertyTypeAccess.User,!0,__('Merchant Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayfastPassphrase=new PropertyType("payfast/PayfastPassphrase",PropertyTypeAccess.User,!0,__('Passphrase'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PayfastItemName=new PropertyType("payfast/PayfastItemName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayfastAmount=new PropertyType("payfast/PayfastAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PayseraProjectId=new PropertyType("paysera/PayseraProjectId",PropertyTypeAccess.User,!0,__('Project ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayseraPassword=new PropertyType("paysera/PayseraPassword",PropertyTypeAccess.User,!0,__('Password'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PayseraPaytext=new PropertyType("paysera/PayseraPaytext",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayseraAmount=new PropertyType("paysera/PayseraAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PayseraCurrency=new PropertyType("paysera/PayseraCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'AED',name:'AED',value:'AED'},{id:'ALL',name:'ALL',value:'ALL'},{id:'AMD',name:'AMD',value:'AMD'},{id:'ARS',name:'ARS',value:'ARS'},{id:'AUD',name:'AUD',value:'AUD'},{id:'AZN',name:'AZN',value:'AZN'},{id:'BAM',name:'BAM',value:'BAM'},{id:'BDT',name:'BDT',value:'BDT'},{id:'BGN',name:'BGN',value:'BGN'},{id:'BHD',name:'BHD',value:'BHD'},{id:'BOB',name:'BOB',value:'BOB'},{id:'BRL',name:'BRL',value:'BRL'},{id:'BYN',name:'BYN',value:'BYN'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CHF',name:'CHF',value:'CHF'},{id:'CLP',name:'CLP',value:'CLP'},{id:'CNY',name:'CNY',value:'CNY'},{id:'COP',name:'COP',value:'COP'},{id:'CRC',name:'CRC',value:'CRC'},{id:'CVE',name:'CVE',value:'CVE'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'DOP',name:'DOP',value:'DOP'},{id:'DZD',name:'DZD',value:'DZD'},{id:'EGP',name:'EGP',value:'EGP'},{id:'ETB',name:'ETB',value:'ETB'},{id:'EUR',name:'EUR',value:'EUR'},{id:'GBP',name:'GBP',value:'GBP'},{id:'GEL',name:'GEL',value:'GEL'},{id:'GNF',name:'GNF',value:'GNF'},{id:'GTQ',name:'GTQ',value:'GTQ'},{id:'HKD',name:'HKD',value:'HKD'},{id:'HNL',name:'HNL',value:'HNL'},{id:'HRK',name:'HRK',value:'HRK'},{id:'HUF',name:'HUF',value:'HUF'},{id:'IDR',name:'IDR',value:'IDR'},{id:'ILS',name:'ILS',value:'ILS'},{id:'INR',name:'INR',value:'INR'},{id:'IQD',name:'IQD',value:'IQD'},{id:'IRR',name:'IRR',value:'IRR'},{id:'ISK',name:'ISK',value:'ISK'},{id:'JOD',name:'JOD',value:'JOD'},{id:'JPY',name:'JPY',value:'JPY'},{id:'KES',name:'KES',value:'KES'},{id:'KGS',name:'KGS',value:'KGS'},{id:'KRW',name:'KRW',value:'KRW'},{id:'KWD',name:'KWD',value:'KWD'},{id:'KZT',name:'KZT',value:'KZT'},{id:'LBP',name:'LBP',value:'LBP'},{id:'LKR',name:'LKR',value:'LKR'},{id:'MAD',name:'MAD',value:'MAD'},{id:'MDL',name:'MDL',value:'MDL'},{id:'MGA',name:'MGA',value:'MGA'},{id:'MKD',name:'MKD',value:'MKD'},{id:'MNT',name:'MNT',value:'MNT'},{id:'MXN',name:'MXN',value:'MXN'},{id:'MYR',name:'MYR',value:'MYR'},{id:'MZN',name:'MZN',value:'MZN'},{id:'NGN',name:'NGN',value:'NGN'},{id:'NIO',name:'NIO',value:'NIO'},{id:'NOK',name:'NOK',value:'NOK'},{id:'NZD',name:'NZD',value:'NZD'},{id:'OMR',name:'OMR',value:'OMR'},{id:'PEN',name:'PEN',value:'PEN'},{id:'PHP',name:'PHP',value:'PHP'},{id:'PKR',name:'PKR',value:'PKR'},{id:'PLN',name:'PLN',value:'PLN'},{id:'PYG',name:'PYG',value:'PYG'},{id:'QAR',name:'QAR',value:'QAR'},{id:'RON',name:'RON',value:'RON'},{id:'RSD',name:'RSD',value:'RSD'},{id:'RUB',name:'RUB',value:'RUB'},{id:'SAR',name:'SAR',value:'SAR'},{id:'SEK',name:'SEK',value:'SEK'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SYP',name:'SYP',value:'SYP'},{id:'THB',name:'THB',value:'THB'},{id:'TJS',name:'TJS',value:'TJS'},{id:'TND',name:'TND',value:'TND'},{id:'TRY',name:'TRY',value:'TRY'},{id:'TWD',name:'TWD',value:'TWD'},{id:'TZS',name:'TZS',value:'TZS'},{id:'UAH',name:'UAH',value:'UAH'},{id:'UGX',name:'UGX',value:'UGX'},{id:'USD',name:'USD',value:'USD'},{id:'UYU',name:'UYU',value:'UYU'},{id:'UZS',name:'UZS',value:'UZS'},{id:'VEF',name:'VEF',value:'VEF'},{id:'VND',name:'VND',value:'VND'},{id:'XAF',name:'XAF',value:'XAF'},{id:'XOF',name:'XOF',value:'XOF'},{id:'YER',name:'YER',value:'YER'},{id:'ZAR',name:'ZAR',value:'ZAR'}],}).inline(6);PropertyType.PayseraTest=new PropertyType("paysera/PayseraTest",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.BaokimBusiness=new PropertyType("baokim/BaokimBusiness",PropertyTypeAccess.User,!0,__('Email'),TextField_5.TextField,null,{placeholder:''});PropertyType.BaokimProductName=new PropertyType("baokim/BaokimProductName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.BaokimProductPrice=new PropertyType("baokim/BaokimProductPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.RobokassaMerchId=new PropertyType("robokassa/RobokassaMerchId",PropertyTypeAccess.User,!0,__('Store identifier'),TextField_5.TextField,null,{placeholder:''});PropertyType.RobokassaMerchPass1=new PropertyType("robokassa/RobokassaMerchPass1",PropertyTypeAccess.User,!0,__('Password')+' 1',TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.RobokassaMerchPass2=new PropertyType("robokassa/RobokassaMerchPass2",PropertyTypeAccess.User,!0,__('Password')+' 2',TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.RobokassaDescription=new PropertyType("robokassa/RobokassaDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.RobokassaAmount=new PropertyType("robokassa/RobokassaAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.RobokassaCurrency=new PropertyType("robokassa/RobokassaCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'RUB',name:'RUB'},{id:'KZT',name:'KZT'},{id:'EUR',name:'EUR'},{id:'USD',name:'USD'}],}).inline(6);PropertyType.RobokassaHashtype=new PropertyType("robokassa/RobokassaHashtype",PropertyTypeAccess.User,!0,('Hash ('+__('Type').toLowerCase()+')'),DropdownBox_6.DropdownBox,null,{options:[{id:'MD5',name:'MD5'},{id:'RIPEMD160',name:'RIPEMD160'},{id:'SHA1',name:'SHA1'},{id:'SHA256',name:'SHA256'},{id:'SHA384',name:'SHA384'},{id:'SHA512',name:'SHA512'}],}).inline(6);PropertyType.RobokassaDemo=new PropertyType("robokassa/RobokassaDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.ExpresspayServiceId=new PropertyType("expresspay/ExpresspayServiceId",PropertyTypeAccess.User,!0,'Номер услуги',TextField_5.TextField,null,{placeholder:''});PropertyType.ExpresspayToken=new PropertyType("expresspay/ExpresspayToken",PropertyTypeAccess.User,!0,'Ключ API',TextField_5.TextField,null,{placeholder:''});PropertyType.ExpresspaySecretWord=new PropertyType("expresspay/ExpresspaySecretWord",PropertyTypeAccess.User,!0,'Секретное слово',TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.ExpresspayPayType=new PropertyType("expresspay/ExpresspayPayType",PropertyTypeAccess.User,!0,'Способ оплаты',DropdownBox_6.DropdownBox,null,{options:[{id:'ERIP',name:'ЕРИП'},{id:'EPOS',name:'E-POS'},{id:'CARD',name:'Интернет-эквайринг'}]});PropertyType.ExpresspayAmount=new PropertyType("expresspay/ExpresspayAmount",PropertyTypeAccess.User,!0,__('Amount'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.ExpresspayCurrency=new PropertyType("expresspay/ExpresspayCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'BYN',name:'BYN'}]}).inline(6);PropertyType.ExpresspayDemo=new PropertyType("expresspay/ExpresspayDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.EpaycoProductInfo=new PropertyType("epayco/EpaycoProductInfo",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{});PropertyType.EpaycoAmount=new PropertyType("epayco/EpaycoAmount",PropertyTypeAccess.User,!0,__('Amount'),TextField_5.TextField,null,{}).inline(6);PropertyType.EpaycoCurrency=new PropertyType("epayco/EpaycoCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'#USD',name:'USD',value:'USD'}]}).inline(6);PropertyType.EpaycoCustomerId=new PropertyType("epayco/EpaycoCustomerId",PropertyTypeAccess.User,!0,'Customer ID',TextField_5.TextField,null,{});PropertyType.EpaycoPkey=new PropertyType("epayco/EpaycoPkey",PropertyTypeAccess.User,!0,'P key',TextField_5.TextField,null,{password:!0}).inline(6);PropertyType.EpaycoSecretKey=new PropertyType("epayco/EpaycoSecretKey",PropertyTypeAccess.User,!0,'Public Key',TextField_5.TextField,null,{password:!0}).inline(6);PropertyType.EpaycoLanguage=new PropertyType("epayco/EpaycoLanguage",PropertyTypeAccess.User,!0,__('Language'),DropdownBox_6.DropdownBox,null,{options:[{id:'EN',name:'English'},{id:'ES',name:'Spanish'},]});PropertyType.EpaycoDemo=new PropertyType("epayco/EpaycoDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.BepaidShopId=new PropertyType("bepaid/BepaidShopId",PropertyTypeAccess.User,!0,__('Shop ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.BepaidShopKey=new PropertyType("bepaid/BepaidShopKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.BepaidOrderDescription=new PropertyType("bepaid/BepaidOrderDescription",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.BepaidAmount=new PropertyType("bepaid/BepaidAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.BepaidCurrency=new PropertyType("bepaid/BepaidCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'RUB',name:'RUB',value:'RUB'},{id:'USD',name:'USD',value:'USD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'BYN',name:'BYN',value:'BYN'},{id:'AMD',name:'AMD',value:'AMD'},{id:'AUD',name:'AUD',value:'AUD'},{id:'AZN',name:'AZN',value:'AZN'},{id:'BGN',name:'BGN',value:'BGN'},{id:'BRL',name:'BRL',value:'BRL'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CHF',name:'CHF',value:'CHF'},{id:'CNY',name:'CNY',value:'CNY'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'GBP',name:'GBP',value:'GBP'},{id:'HUF',name:'HUF',value:'HUF'},{id:'INR',name:'INR',value:'INR'},{id:'JPY',name:'JPY',value:'JPY'},{id:'KGS',name:'KGS',value:'KGS'},{id:'KRW',name:'KRW',value:'KRW'},{id:'KZT',name:'KZT',value:'KZT'},{id:'MDL',name:'MDL',value:'MDL'},{id:'NOK',name:'NOK',value:'NOK'},{id:'PLN',name:'PLN',value:'PLN'},{id:'RON',name:'RON',value:'RON'},{id:'SEK',name:'SEK',value:'SEK'},{id:'SGD',name:'SGD',value:'SGD'},{id:'TJS',name:'TJS',value:'TJS'},{id:'TMT',name:'TMT',value:'TMT'},{id:'TRY',name:'TRY',value:'TRY'},{id:'UAH',name:'UAH',value:'UAH'},{id:'UZS',name:'UZS',value:'UZS'},{id:'ZAR',name:'ZAR',value:'ZAR'}],}).inline(6);PropertyType.BepaidHost=new PropertyType("bepaid/BepaidHost",PropertyTypeAccess.User,!0,__('Host'),DropdownBox_6.DropdownBox,null,{options:[{id:'bepaid.by',name:'bepaid.by'},{id:'bepaid.tech',name:'bepaid.tech'}],}).inline(6);PropertyType.BepaidDemo=new PropertyType("bepaid/BepaidDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.PaymeMerchantId=new PropertyType("payme/PaymeMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaymeMerchantKey=new PropertyType("payme/PaymeMerchantKey",PropertyTypeAccess.User,!0,__('Merchant Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PaymeDescription=new PropertyType("payme/PaymeDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaymeAmount=new PropertyType("payme/PaymeAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PaymeCurrency=new PropertyType("payme/PaymeCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'643',name:'RUB'},{id:'840',name:'USD'},{id:'860',name:'UZS'},{id:'978',name:'EUR'}],}).inline(6);PropertyType.PaymeDemo=new PropertyType("payme/PaymeDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.YandexKassaShopId=new PropertyType("yandexkassa/YandexKassaShopId",PropertyTypeAccess.User,!0,__('Shop ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.YandexKassaScid=new PropertyType("yandexkassa/YandexKassaScid",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.YandexKassaOrderDetails=new PropertyType("yandexkassa/YandexKassaOrderDetails",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.YandexKassaVatCode=new PropertyType("yandexkassa/YandexKassaVatCode",PropertyTypeAccess.User,!0,__('VAT rate'),DropdownBox_6.DropdownBox,null,{options:[{id:'1',name:'Без НДС'},{id:'2',name:'НДС по ставке 0%'},{id:'3',name:'НДС по ставке 10%'},{id:'4',name:'НДС чека по ставке 20%'},{id:'5',name:'НДС чека по расчетной ставке 10/110'},{id:'6',name:'НДС чека по расчетной ставке 20/120'},],});PropertyType.YandexKassaSum=new PropertyType("yandexkassa/YandexKassaSum",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.YandexKassaCurrency=new PropertyType("yandexkassa/YandexKassaCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'RUB',name:'RUB'},{id:'USD',name:'USD'},{id:'EUR',name:'EUR'},{id:'BYN',name:'BYN'},{id:'CNY',name:'CNY'},{id:'KZT',name:'KZT'},{id:'UAH',name:'UAH'}],}).inline(6);PropertyType.YandexKassaDemo=new PropertyType("yandexkassa/YandexKassaDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.EpsilonContractCode=new PropertyType("epsilon/EpsilonContractCode",PropertyTypeAccess.User,!0,__('Contract code'),TextField_5.TextField,null,{placeholder:''});PropertyType.EpsilonDescription=new PropertyType("epsilon/EpsilonDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.EpsilonAmount=new PropertyType("epsilon/EpsilonAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.EpsilonDemo=new PropertyType("epsilon/EpsilonDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.PayumoneyProductInfo=new PropertyType("payumoney/PayumoneyProductInfo",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayumoneyKey=new PropertyType("payumoney/PayumoneyKey",PropertyTypeAccess.User,!0,__('Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayumoneySalt=new PropertyType("payumoney/PayumoneySalt",PropertyTypeAccess.User,!0,__('Salt'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PayumoneyAmount=new PropertyType("payumoney/PayumoneyAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PayuProductName=new PropertyType("payu/PayuProductName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayuMerchantPosId=new PropertyType("payu/PayuMerchantPosId",PropertyTypeAccess.User,!0,__('POS identifier'),TextField_5.TextField,null,{placeholder:''});PropertyType.PayuPrivateKey=new PropertyType("payu/PayuPrivateKey",PropertyTypeAccess.User,!0,__('Private key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.PayuProductPrice=new PropertyType("payu/PayuProductPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.PayuCurrencyCode=new PropertyType("payu/PayuCurrencyCode",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'AED',name:'AED',value:'AED'},{id:'ALL',name:'ALL',value:'ALL'},{id:'AMD',name:'AMD',value:'AMD'},{id:'ARS',name:'ARS',value:'ARS'},{id:'AUD',name:'AUD',value:'AUD'},{id:'AZN',name:'AZN',value:'AZN'},{id:'BAM',name:'BAM',value:'BAM'},{id:'BDT',name:'BDT',value:'BDT'},{id:'BGN',name:'BGN',value:'BGN'},{id:'BHD',name:'BHD',value:'BHD'},{id:'BOB',name:'BOB',value:'BOB'},{id:'BRL',name:'BRL',value:'BRL'},{id:'BYN',name:'BYN',value:'BYN'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CHF',name:'CHF',value:'CHF'},{id:'CLP',name:'CLP',value:'CLP'},{id:'CNY',name:'CNY',value:'CNY'},{id:'COP',name:'COP',value:'COP'},{id:'CRC',name:'CRC',value:'CRC'},{id:'CVE',name:'CVE',value:'CVE'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'DOP',name:'DOP',value:'DOP'},{id:'DZD',name:'DZD',value:'DZD'},{id:'EGP',name:'EGP',value:'EGP'},{id:'ETB',name:'ETB',value:'ETB'},{id:'EUR',name:'EUR',value:'EUR'},{id:'GBP',name:'GBP',value:'GBP'},{id:'GEL',name:'GEL',value:'GEL'},{id:'GNF',name:'GNF',value:'GNF'},{id:'GTQ',name:'GTQ',value:'GTQ'},{id:'HKD',name:'HKD',value:'HKD'},{id:'HNL',name:'HNL',value:'HNL'},{id:'HRK',name:'HRK',value:'HRK'},{id:'HUF',name:'HUF',value:'HUF'},{id:'IDR',name:'IDR',value:'IDR'},{id:'ILS',name:'ILS',value:'ILS'},{id:'INR',name:'INR',value:'INR'},{id:'IQD',name:'IQD',value:'IQD'},{id:'IRR',name:'IRR',value:'IRR'},{id:'ISK',name:'ISK',value:'ISK'},{id:'JOD',name:'JOD',value:'JOD'},{id:'JPY',name:'JPY',value:'JPY'},{id:'KES',name:'KES',value:'KES'},{id:'KGS',name:'KGS',value:'KGS'},{id:'KRW',name:'KRW',value:'KRW'},{id:'KWD',name:'KWD',value:'KWD'},{id:'KZT',name:'KZT',value:'KZT'},{id:'LBP',name:'LBP',value:'LBP'},{id:'LKR',name:'LKR',value:'LKR'},{id:'MAD',name:'MAD',value:'MAD'},{id:'MDL',name:'MDL',value:'MDL'},{id:'MGA',name:'MGA',value:'MGA'},{id:'MKD',name:'MKD',value:'MKD'},{id:'MNT',name:'MNT',value:'MNT'},{id:'MXN',name:'MXN',value:'MXN'},{id:'MYR',name:'MYR',value:'MYR'},{id:'MZN',name:'MZN',value:'MZN'},{id:'NGN',name:'NGN',value:'NGN'},{id:'NIO',name:'NIO',value:'NIO'},{id:'NOK',name:'NOK',value:'NOK'},{id:'NZD',name:'NZD',value:'NZD'},{id:'OMR',name:'OMR',value:'OMR'},{id:'PEN',name:'PEN',value:'PEN'},{id:'PHP',name:'PHP',value:'PHP'},{id:'PKR',name:'PKR',value:'PKR'},{id:'PLN',name:'PLN',value:'PLN'},{id:'PYG',name:'PYG',value:'PYG'},{id:'QAR',name:'QAR',value:'QAR'},{id:'RON',name:'RON',value:'RON'},{id:'RSD',name:'RSD',value:'RSD'},{id:'RUB',name:'RUB',value:'RUB'},{id:'SAR',name:'SAR',value:'SAR'},{id:'SEK',name:'SEK',value:'SEK'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SYP',name:'SYP',value:'SYP'},{id:'THB',name:'THB',value:'THB'},{id:'TJS',name:'TJS',value:'TJS'},{id:'TND',name:'TND',value:'TND'},{id:'TRY',name:'TRY',value:'TRY'},{id:'TWD',name:'TWD',value:'TWD'},{id:'TZS',name:'TZS',value:'TZS'},{id:'UAH',name:'UAH',value:'UAH'},{id:'UGX',name:'UGX',value:'UGX'},{id:'USD',name:'USD',value:'USD'},{id:'UYU',name:'UYU',value:'UYU'},{id:'UZS',name:'UZS',value:'UZS'},{id:'VEF',name:'VEF',value:'VEF'},{id:'VND',name:'VND',value:'VND'},{id:'XAF',name:'XAF',value:'XAF'},{id:'XOF',name:'XOF',value:'XOF'},{id:'YER',name:'YER',value:'YER'},{id:'ZAR',name:'ZAR',value:'ZAR'}],}).inline(6);PropertyType.EasypayMerno=new PropertyType("easypay/EasypayMerno",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.EasypayWebKey=new PropertyType("easypay/EasypayWebKey",PropertyTypeAccess.User,!0,__('Web key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.EasypayOrderName=new PropertyType("easypay/EasypayOrderName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.EasypayOrderDescription=new PropertyType("easypay/EasypayOrderDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.EasypaySum=new PropertyType("easypay/EasypaySum",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.EasypayDemo=new PropertyType("easypay/EasypayDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.BraintreeMerchantId=new PropertyType("braintree/BraintreeMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.BraintreePublicKey=new PropertyType("braintree/BraintreePublicKey",PropertyTypeAccess.User,!0,__('Public key'),TextField_5.TextField,null,{placeholder:''});PropertyType.BraintreePrivateKey=new PropertyType("braintree/BraintreePrivateKey",PropertyTypeAccess.User,!0,__('Private key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.BraintreeAmount=new PropertyType("braintree/BraintreeAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.BraintreeDemo=new PropertyType("braintree/BraintreeDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default);PropertyType.DragonpayMerchantId=new PropertyType("dragonpay/DragonpayMerchantId",PropertyTypeAccess.User,!0,__('Merchant ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.DragonpaySecretKey=new PropertyType("dragonpay/DragonpaySecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.DragonpayDescription=new PropertyType("dragonpay/DragonpayDescription",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.DragonpayAmount=new PropertyType("dragonpay/DragonpayAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.DragonpayCurrency=new PropertyType("dragonpay/DragonpayCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'PHP',name:'PHP',value:'PHP'},{id:'USD',name:'USD',value:'USD'},{id:'CAD',name:'CAD',value:'CAD'}],}).inline(6);PropertyType.DragonpayDemo=new PropertyType("dragonpay/DragonpayDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.EpaybgMinNumber=new PropertyType("epaybg/epaybgMinNumber",PropertyTypeAccess.User,!0,__('MIN'),TextField_5.TextField,null,{placeholder:''});PropertyType.EpaybgSecretKey=new PropertyType("epaybg/EpaybgSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.EpaybgName=new PropertyType("epaybg/epaybgName",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.EpaybgPrice=new PropertyType("epaybg/epaybgPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.EpaybgCurrency=new PropertyType("epaybg/epaybgCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'BGN',name:'BGN'},{id:'USD',name:'USD'},{id:'EUR',name:'EUR'}],}).inline(6);PropertyType.EpaybgDemo=new PropertyType("epaybg/EpaybgDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.RedsysName=new PropertyType("redsys/redsysName",PropertyTypeAccess.User,!0,__('Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.RedsysTerminal=new PropertyType("redsys/redsysTerminal",PropertyTypeAccess.User,!0,__('Terminal'),TextField_5.TextField,null,{placeholder:''});PropertyType.RedsysMerchantCode=new PropertyType("redsys/redsysMerchantCode",PropertyTypeAccess.User,!0,__('Merchant Code'),TextField_5.TextField,null,{placeholder:''});PropertyType.RedsysMerchantPassword=new PropertyType("redsys/redsysMerchantPassword",PropertyTypeAccess.User,!0,__('Merchant Password'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.RedsysDescription=new PropertyType("redsys/redsysDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.RedsysAmount=new PropertyType("redsys/redsysAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.RedsysCurrency=new PropertyType("redsys/redsysCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'840',name:'USD'},{id:'978',name:'EUR'},{id:'826',name:'GBP'},{id:'032',name:'ARS'},{id:'986',name:'BRL'},{id:'124',name:'CAD'},{id:'756',name:'CHF'},{id:'152',name:'CLP'},{id:'392',name:'CNY'},{id:'170',name:'COP'},{id:'356',name:'INR'},{id:'484',name:'MXN'},{id:'604',name:'PEN'},{id:'949',name:'TRY'},{id:'937',name:'VEF'}],}).inline(6);PropertyType.RedsysDemo=new PropertyType("redsys/redsysDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.MollieApiKey=new PropertyType("mollie/mollieApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.MollieDescription=new PropertyType("mollie/mollieDescription",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.MollieAmount=new PropertyType("mollie/mollieAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.SkrillEmail=new PropertyType("skrill/skrillEmail",PropertyTypeAccess.User,!0,__('Email'),TextField_5.TextField,null,{placeholder:''});PropertyType.SkrillDescription=new PropertyType("skrill/skrillDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.SkrillText=new PropertyType("skrill/skrillText",PropertyTypeAccess.User,!0,__('Detailed text'),TextField_5.TextField,null,{placeholder:''});PropertyType.SkrillAmount=new PropertyType("skrill/skrillAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.SkrillCurrency=new PropertyType("skrill/skrillCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD',value:'USD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'GBP',name:'GBP',value:'GBP'},{id:'AED',name:'AED',value:'AED'},{id:'AUD',name:'AUD',value:'AUD'},{id:'BGN',name:'BGN',value:'BGN'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CHF',name:'CHF',value:'CHF'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'HKD',name:'HKD',value:'HKD'},{id:'HRK',name:'HRK',value:'HRK'},{id:'HUF',name:'HUF',value:'HUF'},{id:'ILS',name:'ILS',value:'ILS'},{id:'INR',name:'INR',value:'INR'},{id:'ISK',name:'ISK',value:'ISK'},{id:'JOD',name:'JOD',value:'JOD'},{id:'JPY',name:'JPY',value:'JPY'},{id:'KRW',name:'KRW',value:'KRW'},{id:'MAD',name:'MAD',value:'MAD'},{id:'MYR',name:'MYR',value:'MYR'},{id:'NOK',name:'NOK',value:'NOK'},{id:'NZD',name:'NZD',value:'NZD'},{id:'OMR',name:'OMR',value:'OMR'},{id:'PLN',name:'PLN',value:'PLN'},{id:'QAR',name:'QAR',value:'QAR'},{id:'RON',name:'RON',value:'RON'},{id:'RSD',name:'RSD',value:'RSD'},{id:'SAR',name:'SAR',value:'SAR'},{id:'SEK',name:'SEK',value:'SEK'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SKK',name:'SKK',value:'SKK'},{id:'THB',name:'THB',value:'THB'},{id:'TND',name:'TND',value:'TND'},{id:'TRY',name:'TRY',value:'TRY'},{id:'TWD',name:'TWD',value:'TWD'},{id:'ZAR',name:'ZAR',value:'ZAR'}],}).inline(6);PropertyType.SkrillDemo=new PropertyType("skrill/skrillDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.WebmoneyPurseId=new PropertyType("webmoney/webmoneyPurseId",PropertyTypeAccess.User,!0,__('Purse ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyDescription=new PropertyType("webmoney/webmoneyDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.WebmoneyAmount=new PropertyType("webmoney/webmoneyAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.LiqpayPublicKey=new PropertyType("liqPay/liqpayPublicKey",PropertyTypeAccess.User,!0,__('Public Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.LiqpayPrivateKey=new PropertyType("liqPay/liqpayPrivateKey",PropertyTypeAccess.User,!0,__('Private Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.LiqpayDescription=new PropertyType("liqPay/liqpayDescription",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.LiqpayAmount=new PropertyType("liqPay/liqpayAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.LiqpayCurrency=new PropertyType("liqPay/liqpayCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD',value:'USD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'RUB',name:'RUB',value:'RUB'},{id:'UAH',name:'UAH',value:'UAH'},{id:'BYN',name:'BYN',value:'BYN'},{id:'KZT',name:'KZT',value:'KZT'}],}).inline(6);PropertyType.LiqpayDemo=new PropertyType("liqPay/LiqpayDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.LibelulaSecurity=new PropertyType("libelula/libelulaSecurity",PropertyTypeAccess.User,!0,__('Security Code'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.LibelulaDescription=new PropertyType("libelula/libelulaDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.LibelulaAmount=new PropertyType("libelula/libelulaAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.LibelulaCurrency=new PropertyType("libelula/libelulaCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'BOB',name:'BOB',value:'BOB'},{id:'USD',name:'USD',value:'USD'},],}).inline(6);PropertyType.LibelulaDemo=new PropertyType("libelula/LibelulaDemo",PropertyTypeAccess.User,!0,__("Test mode"),CheckBox_7.default).inline(4);PropertyType.AlipayPartner=new PropertyType("alipay/alipayPartner",PropertyTypeAccess.User,!0,__('Partner'),TextField_5.TextField,null,{placeholder:''});PropertyType.AlipaySecurity=new PropertyType("alipay/alipaySecurity",PropertyTypeAccess.User,!0,__('Security Code'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.AlipayDescription=new PropertyType("alipay/alipayDescription",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.AlipayAmount=new PropertyType("alipay/alipayAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.AlipayCurrency=new PropertyType("alipay/alipayCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'GBP',name:'GBP',value:'GBP'},{id:'HKD',name:'HKD',value:'HKD'},{id:'USD',name:'USD',value:'USD'},{id:'CHF',name:'CHF',value:'CHF'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SEK',name:'SEK',value:'SEK'},{id:'DKK',name:'DKK',value:'DKK'},{id:'NOK',name:'NOK',value:'NOK'},{id:'JPY',name:'JPY',value:'JPY'},{id:'CAD',name:'CAD',value:'CAD'},{id:'AUD',name:'AUD',value:'AUD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'NZD',name:'NZD',value:'NZD'},{id:'RUB',name:'RUB',value:'RUB'},{id:'MOP',name:'MOP',value:'MOP'}],}).inline(6);PropertyType.MercadoClientId=new PropertyType("mercado/mercadoClientId",PropertyTypeAccess.User,!0,__('Client ID'),TextField_5.TextField,null,{placeholder:''});PropertyType.MercadoSecretId=new PropertyType("mercado/mercadoSecretId",PropertyTypeAccess.User,!0,__('Secret ID'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.MercadoTitle=new PropertyType("mercado/mercadoTitle",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.MercadoUnitPrice=new PropertyType("mercado/mercadoUnitPrice",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.MercadoCurrencyId=new PropertyType("mercado/mercadoCurrencyId",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'ARS',name:'ARS',value:'ARS'},{id:'BRL',name:'BRL',value:'BRL'},{id:'VEF',name:'VEF',value:'VEF'},{id:'CLP',name:'CLP',value:'CLP'},{id:'MXN',name:'MXN',value:'MXN'},{id:'COP',name:'COP',value:'COP'},{id:'PEN',name:'PEN',value:'PEN'},{id:'UYU',name:'UYU',value:'UYU'}],}).inline(6);PropertyType.StripePublishableKey=new PropertyType("stripe/stripePublishableKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField,null,{placeholder:''});PropertyType.StripeSecretKey=new PropertyType("stripe/stripeSecretKey",PropertyTypeAccess.User,!0,__('Secret Key'),TextField_5.TextField,null,{placeholder:'',password:!0});PropertyType.StripeDescription=new PropertyType("stripe/stripeDescription",PropertyTypeAccess.User,!0,__('Item Name'),TextField_5.TextField,null,{placeholder:''});PropertyType.StripeDescription2=new PropertyType("stripe/stripeDescription2",PropertyTypeAccess.User,!0,__('Product description'),TextField_5.TextField,null,{placeholder:''});PropertyType.StripeAmount=new PropertyType("stripe/stripeAmount",PropertyTypeAccess.User,!0,__('Price'),TextField_5.TextField,null,{placeholder:''}).inline(6);PropertyType.StripeCurrency=new PropertyType("stripe/stripeCurrency",PropertyTypeAccess.User,!0,__('Currency'),DropdownBox_6.DropdownBox,null,{options:[{id:'USD',name:'USD',value:'USD'},{id:'EUR',name:'EUR',value:'EUR'},{id:'AED',name:'AED',value:'AED'},{id:'AFN',name:'AFN',value:'AFN'},{id:'ALL',name:'ALL',value:'ALL'},{id:'AMD',name:'AMD',value:'AMD'},{id:'ANG',name:'ANG',value:'ANG'},{id:'AOA',name:'AOA',value:'AOA'},{id:'AUD',name:'AUD',value:'AUD'},{id:'AWG',name:'AWG',value:'AWG'},{id:'AZN',name:'AZN',value:'AZN'},{id:'BAM',name:'BAM',value:'BAM'},{id:'BBD',name:'BBD',value:'BBD'},{id:'BDT',name:'BDT',value:'BDT'},{id:'BGN',name:'BGN',value:'BGN'},{id:'BIF',name:'BIF',value:'BIF'},{id:'BMD',name:'BMD',value:'BMD'},{id:'BND',name:'BND',value:'BND'},{id:'BOB',name:'BOB',value:'BOB'},{id:'BRL',name:'BRL',value:'BRL'},{id:'BSD',name:'BSD',value:'BSD'},{id:'BWP',name:'BWP',value:'BWP'},{id:'BZD',name:'BZD',value:'BZD'},{id:'CAD',name:'CAD',value:'CAD'},{id:'CDF',name:'CDF',value:'CDF'},{id:'CHF',name:'CHF',value:'CHF'},{id:'CLP',name:'CLP',value:'CLP'},{id:'CNY',name:'CNY',value:'CNY'},{id:'COP',name:'COP',value:'COP'},{id:'CRC',name:'CRC',value:'CRC'},{id:'CVE',name:'CVE',value:'CVE'},{id:'CZK',name:'CZK',value:'CZK'},{id:'DJF',name:'DJF',value:'DJF'},{id:'DKK',name:'DKK',value:'DKK'},{id:'DOP',name:'DOP',value:'DOP'},{id:'DZD',name:'DZD',value:'DZD'},{id:'EGP',name:'EGP',value:'EGP'},{id:'ETB',name:'ETB',value:'ETB'},{id:'FJD',name:'FJD',value:'FJD'},{id:'FKP',name:'FKP',value:'FKP'},{id:'GBP',name:'GBP',value:'GBP'},{id:'GEL',name:'GEL',value:'GEL'},{id:'GIP',name:'GIP',value:'GIP'},{id:'GMD',name:'GMD',value:'GMD'},{id:'GNF',name:'GNF',value:'GNF'},{id:'GTQ',name:'GTQ',value:'GTQ'},{id:'GYD',name:'GYD',value:'GYD'},{id:'HKD',name:'HKD',value:'HKD'},{id:'HNL',name:'HNL',value:'HNL'},{id:'HRK',name:'HRK',value:'HRK'},{id:'HTG',name:'HTG',value:'HTG'},{id:'HUF',name:'HUF',value:'HUF'},{id:'IDR',name:'IDR',value:'IDR'},{id:'ILS',name:'ILS',value:'ILS'},{id:'INR',name:'INR',value:'INR'},{id:'ISK',name:'ISK',value:'ISK'},{id:'JMD',name:'JMD',value:'JMD'},{id:'JPY',name:'JPY',value:'JPY'},{id:'KES',name:'KES',value:'KES'},{id:'KGS',name:'KGS',value:'KGS'},{id:'KHR',name:'KHR',value:'KHR'},{id:'KMF',name:'KMF',value:'KMF'},{id:'KRW',name:'KRW',value:'KRW'},{id:'KYD',name:'KYD',value:'KYD'},{id:'KZT',name:'KZT',value:'KZT'},{id:'LAK',name:'LAK',value:'LAK'},{id:'LBP',name:'LBP',value:'LBP'},{id:'LKR',name:'LKR',value:'LKR'},{id:'LRD',name:'LRD',value:'LRD'},{id:'LSL',name:'LSL',value:'LSL'},{id:'MAD',name:'MAD',value:'MAD'},{id:'MDL',name:'MDL',value:'MDL'},{id:'MGA',name:'MGA',value:'MGA'},{id:'MKD',name:'MKD',value:'MKD'},{id:'MMK',name:'MMK',value:'MMK'},{id:'MNT',name:'MNT',value:'MNT'},{id:'MOP',name:'MOP',value:'MOP'},{id:'MRO',name:'MRO',value:'MRO'},{id:'MUR',name:'MUR',value:'MUR'},{id:'MVR',name:'MVR',value:'MVR'},{id:'MWK',name:'MWK',value:'MWK'},{id:'MXN',name:'MXN',value:'MXN'},{id:'MYR',name:'MYR',value:'MYR'},{id:'MZN',name:'MZN',value:'MZN'},{id:'NAD',name:'NAD',value:'NAD'},{id:'NGN',name:'NGN',value:'NGN'},{id:'NIO',name:'NIO',value:'NIO'},{id:'NOK',name:'NOK',value:'NOK'},{id:'NPR',name:'NPR',value:'NPR'},{id:'NZD',name:'NZD',value:'NZD'},{id:'PAB',name:'PAB',value:'PAB'},{id:'PEN',name:'PEN',value:'PEN'},{id:'PGK',name:'PGK',value:'PGK'},{id:'PHP',name:'PHP',value:'PHP'},{id:'PKR',name:'PKR',value:'PKR'},{id:'PLN',name:'PLN',value:'PLN'},{id:'PYG',name:'PYG',value:'PYG'},{id:'QAR',name:'QAR',value:'QAR'},{id:'RON',name:'RON',value:'RON'},{id:'RSD',name:'RSD',value:'RSD'},{id:'RUB',name:'RUB',value:'RUB'},{id:'RWF',name:'RWF',value:'RWF'},{id:'SAR',name:'SAR',value:'SAR'},{id:'SBD',name:'SBD',value:'SBD'},{id:'SCR',name:'SCR',value:'SCR'},{id:'SEK',name:'SEK',value:'SEK'},{id:'SGD',name:'SGD',value:'SGD'},{id:'SHP',name:'SHP',value:'SHP'},{id:'SLL',name:'SLL',value:'SLL'},{id:'SOS',name:'SOS',value:'SOS'},{id:'SRD',name:'SRD',value:'SRD'},{id:'STD',name:'STD',value:'STD'},{id:'SVC',name:'SVC',value:'SVC'},{id:'SZL',name:'SZL',value:'SZL'},{id:'THB',name:'THB',value:'THB'},{id:'TJS',name:'TJS',value:'TJS'},{id:'TOP',name:'TOP',value:'TOP'},{id:'TRY',name:'TRY',value:'TRY'},{id:'TTD',name:'TTD',value:'TTD'},{id:'TWD',name:'TWD',value:'TWD'},{id:'TZS',name:'TZS',value:'TZS'},{id:'UAH',name:'UAH',value:'UAH'},{id:'UGX',name:'UGX',value:'UGX'},{id:'UYU',name:'UYU',value:'UYU'},{id:'UZS',name:'UZS',value:'UZS'},{id:'VND',name:'VND',value:'VND'},{id:'VUV',name:'VUV',value:'VUV'},{id:'WST',name:'WST',value:'WST'},{id:'XAF',name:'XAF',value:'XAF'},{id:'XCD',name:'XCD',value:'XCD'},{id:'XOF',name:'XOF',value:'XOF'},{id:'XPF',name:'XPF',value:'XPF'},{id:'YER',name:'YER',value:'YER'},{id:'ZAR',name:'ZAR',value:'ZAR'},{id:'ZMW',name:'ZMW',value:'ZMW'}],}).inline(6);PropertyType.PaymentGatewayButtonLabel=new PropertyType("style/PaymentGatewayButtonLabel",PropertyTypeAccess.User,!0,__('Button label'),TextField_5.TextField,null,{placeholder:''});PropertyType.PaymentGatewayFontControl=new PropertyType("style/PaymentGatewayFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!0,noStyle:!0},!1);PropertyType.PaymentGatewayButtonColor=new PropertyType("style/PaymentGatewayButtonColor",PropertyTypeAccess.User,!0,__("Colour"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.PaymentGatewayBorderControl=new PropertyType("style/PaymentGatewayBorderControl",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.PaymentShadowControl=new PropertyType("style/PaymentShadowControl",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl).inline(6);PropertyType.PaymentGatewayShowLogo=new PropertyType("style/PaymentGatewayShowLogo",PropertyTypeAccess.User,!0,__("Show logo"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:1,label:__("Yes")},{value:0,label:__("No")},],}).inline(6);PropertyType.PaymentGatewayLogo=new PropertyType("style/PaymentGatewayLogo",PropertyTypeAccess.User,!0,__("Logo"),DropdownBox_6.DropdownBox,null).inline(6);PropertyType.PaymentGatewayLogoWidth=new PropertyType("style/PaymentGatewayLogoWidth",PropertyTypeAccess.User,!0,__("Max logo width"),SizeSelector_10.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PaymentGatewayButtonPadding=new PropertyType("style/PaymentGatewayButtonPadding",PropertyTypeAccess.User,!0,__("Padding"),SizeSelector_10.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestWidgetType=new PropertyType("pinterest/pinterestWidgetType",PropertyTypeAccess.User,!0,__('Widget type'),DropdownBox_6.DropdownBox,null,{options:[{id:1,name:__('Save Button'),value:1},{id:2,name:__('Follow'),value:2},{id:3,name:__('Pin'),value:3},{id:4,name:__('Board'),value:4},{id:5,name:__('Profile'),value:5}],});PropertyType.PinterestButtonType=new PropertyType("pinterest/pinterestButtonType",PropertyTypeAccess.User,!0,__('Button type'),DropdownBox_6.DropdownBox,null,{options:[{id:'one_image',name:__('One Image')},{id:'any_image',name:__('Any Image')},],});PropertyType.PinterestButtonLarge=new PropertyType("pinterest/pinterestButtonLarge",PropertyTypeAccess.User,!0,__("Large"),CheckBox_7.default).inline(4);PropertyType.PinterestButtonRound=new PropertyType("pinterest/pinterestButtonRound",PropertyTypeAccess.User,!0,__("Round"),CheckBox_7.default).inline(4);PropertyType.PinterestCustomButtonImage=new PropertyType("pinterest/pinterestCustomButtonImage",PropertyTypeAccess.User,!0,__('Custom button image'),TextField_5.TextField,null,{placeholder:''});PropertyType.PinterestOneImageUrl=new PropertyType("pinterest/pinterestOneImageUrl",PropertyTypeAccess.User,!0,__('Image source URL'),TextField_5.TextField,null,{placeholder:'https://www.flickr.com/photos/kentbrew/6851755809/'});PropertyType.PinterestOneImageImage=new PropertyType("pinterest/pinterestOneImageImage",PropertyTypeAccess.User,!0,__('Image URL'),TextField_5.TextField,null,{placeholder:'https://farm8.staticflickr.com/7027/6851755809_df5b2051c9_z.jpg'});PropertyType.PinterestOneImageDesc=new PropertyType("pinterest/pinterestOneImageDesc",PropertyTypeAccess.User,!0,__('Description'),TextField_5.TextField,null,{placeholder:''});PropertyType.PinterestShowPinCount=new PropertyType("pinterest/pinterestShowPinCount",PropertyTypeAccess.User,!0,__('Show pin count'),DropdownBox_6.DropdownBox,null,{options:[{id:'none',name:__('Not Shown')},{id:'above',name:__('Above the Button')},{id:'beside',name:__('Beside the Button')}],});PropertyType.PinterestPinLanguage=new PropertyType("pinterest/pinterestPinLanguage",PropertyTypeAccess.User,!0,__('Language'),DropdownBox_6.DropdownBox,null,{options:[{id:'default',name:__("User's Default Language")},{id:'en',name:"English"},{id:'cs',name:"Czech"},{id:'da',name:"Danish"},{id:'de',name:"German"},{id:'el',name:"Greek"},{id:'es',name:"Spanish"},{id:'fi',name:"Finnish"},{id:'fr',name:"French"},{id:'hi',name:"Hindu"},{id:'hu',name:"Hungarian"},{id:'id',name:"Indonesian"},{id:'it',name:"Italian"},{id:'ja',name:"Japanese"},{id:'ko',name:"Korean"},{id:'ms',name:"Malaysian"},{id:'nb',name:"Norwegian"},{id:'nl',name:"Dutch"},{id:'pl',name:"Polish"},{id:'pt',name:"Portuguese"},{id:'pt-br',name:"Portuguese (Brazil)"},{id:'ro',name:"Romanian"},{id:'ru',name:"Russian"},{id:'sk',name:"Slovak"},{id:'sv',name:"Swedish"},{id:'tl',name:"Tagalog"},{id:'th',name:"Thai"},{id:'tr',name:"Turkish"},{id:'uk',name:"Ukrainian"},{id:'vi',name:"Vietnamese"}],});PropertyType.PinterestFollowUrl=new PropertyType("pinterest/pinterestFollowUrl",PropertyTypeAccess.User,!0,__('Pinterest user URL'),TextField_5.TextField,null,{placeholder:'https://www.pinterest.com/pinterest/'});PropertyType.PinterestFollowTitle=new PropertyType("pinterest/pinterestFollowTitle",PropertyTypeAccess.User,!0,__('Full name'),TextField_5.TextField,null,{placeholder:''});PropertyType.PinterestPinUrl=new PropertyType("pinterest/pinterestPinUrl",PropertyTypeAccess.User,!0,__('Pin URL'),TextField_5.TextField,null,{placeholder:'https://www.pinterest.com/pin/99360735500167749/'});PropertyType.PinterestPinSize=new PropertyType("pinterest/pinterestPinSize",PropertyTypeAccess.User,!0,__('Pin size'),DropdownBox_6.DropdownBox,null,{options:[{id:'small',name:__('Small')},{id:'medium',name:__('Medium')},{id:'large',name:__('Large')}],});PropertyType.PinterestHideDescription=new PropertyType("pinterest/pinterestHideDescription",PropertyTypeAccess.User,!0,__("Hide description"),CheckBox_7.default);PropertyType.PinterestBoardUrl=new PropertyType("pinterest/pinterestBoardUrl",PropertyTypeAccess.User,!0,__('Pinterest board URL'),TextField_5.TextField,null,{placeholder:'https://www.pinterest.com/pinterest/official-news/'});PropertyType.PinterestBoardHeight=new PropertyType("pinterest/pinterestBoardHeight",PropertyTypeAccess.User,!0,__("Board height"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestBoardWidth=new PropertyType("pinterest/pinterestBoardWidth",PropertyTypeAccess.User,!0,__("Board width"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestBoardImageWidth=new PropertyType("pinterest/pinterestBoardImageWidth",PropertyTypeAccess.User,!0,__("Width of images"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestProfileUrl=new PropertyType("pinterest/pinterestProfileUrl",PropertyTypeAccess.User,!0,__('Pinterest user profile URL'),TextField_5.TextField,null,{placeholder:'https://www.pinterest.com/pinterest/'});PropertyType.PinterestProfileHeight=new PropertyType("pinterest/pinterestProfileHeight",PropertyTypeAccess.User,!0,__("Profile height"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestProfileWidth=new PropertyType("pinterest/pinterestProfileWidth",PropertyTypeAccess.User,!0,__("Profile width"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.PinterestProfileImageWidth=new PropertyType("pinterest/pinterestProfileImageWidth",PropertyTypeAccess.User,!0,__("Width of images"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.OdnoklassnikiShareUrl=new PropertyType("odnoklassniki share/odnoklassnikiShareUrl",PropertyTypeAccess.User,!0,__('URL'),TextField_5.TextField,null,{placeholder:'https://www.google.com'});PropertyType.OdnoklassnikiShareSize=new PropertyType("odnoklassniki share/odnoklassnikiShareSize",PropertyTypeAccess.User,!0,__('Size'),DropdownBox_6.DropdownBox,null,{options:[{id:12,name:'12',value:12},{id:20,name:'20',value:20},{id:30,name:'30',value:30},{id:45,name:'45',value:45},{id:70,name:'70',value:70},{id:100,name:'100',value:100},{id:150,name:'150',value:150}],}).inline(6);PropertyType.OdnoklassnikiShareStyle=new PropertyType("odnoklassniki share/odnoklassnikiShareStyle",PropertyTypeAccess.User,!0,__('Style'),DropdownBox_6.DropdownBox,null,{options:[{id:'oval',name:__('Oval')},{id:'rounded',name:__('Rounded')},{id:'straight',name:__('Straight')}],}).inline(6);PropertyType.OdnoklassnikiShareCounterPosition=new PropertyType("odnoklassniki share/odnoklassnikiShareCounterPosition",PropertyTypeAccess.User,!0,__('Counter position'),DropdownBox_6.DropdownBox,null,{options:[{id:'',name:__('None'),value:null},{id:'right',name:__('Right'),value:'right'},{id:'top',name:__('Top'),value:'top'}],}).inline(6);PropertyType.OdnoklassnikiShareText=new PropertyType("odnoklassniki share/odnoklassnikiShareText",PropertyTypeAccess.User,!0,__('Text'),DropdownBox_6.DropdownBox,null,{options:[{id:0,name:__('None'),value:0},{id:1,name:__('Klass'),value:1},{id:2,name:__('Share'),value:2},{id:3,name:__('Like'),value:3}],}).inline(6);PropertyType.VkontakteLikeAppId=new PropertyType("vkontakte like/vkontakteLikeAppId",PropertyTypeAccess.User,!0,__('Group ID'),TextField_5.TextField,null,{placeholder:'1936057'});PropertyType.VkontakteLikeButtonHeight=new PropertyType("vkontakte like/vkontakteLikeButtonHeight",PropertyTypeAccess.User,!0,__('Button Height'),DropdownBox_6.DropdownBox,null,{options:[{id:18,name:'18 px',value:18},{id:20,name:'20 px',value:20},{id:22,name:'22 px',value:22},{id:24,name:'24 px',value:24}],});PropertyType.VkontakteLikeButtonName=new PropertyType("vkontakte like/vkontakteLikeButtonName",PropertyTypeAccess.User,!0,__('Button Name'),DropdownBox_6.DropdownBox,null,{options:[{id:0,name:__('Like'),value:0},{id:1,name:__('This is interesting'),value:1}],});PropertyType.VkontakteLikeButtonLayout=new PropertyType("vkontakte like/vkontakteLikeButtonLayout",PropertyTypeAccess.User,!0,__('Button Layout'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'full',label:__("Button with text counter")},{value:'mini',label:__("Mini button")},{value:'vertical',label:__("Mini button with counter at the top")},],});PropertyType.OdnoklassnikiGroupId=new PropertyType("Odnoklassniki/odnoklassnikiGroupId",PropertyTypeAccess.User,!0,__('Group ID'),TextField_5.TextField,null,{placeholder:'52101667553405'});PropertyType.VkontakteProfileId=new PropertyType("vkontakte community/vkontakteProfileId",PropertyTypeAccess.User,!0,__('ID for Page or Group'),TextField_5.TextField,null,{placeholder:'22822305'});PropertyType.VkontakteLayout=new PropertyType("vkontakte community/vkontakteLayout",PropertyTypeAccess.User,!0,__('Layout'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:0,label:__("Members")},{value:2,label:__("News")},{value:1,label:__("Name only")},],});PropertyType.VkontakteBackgroundColor=new PropertyType("vkontakte community/vkontakteBackgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.VkontakteTextColor=new PropertyType("vkontakte community/vkontakteTextColor",PropertyTypeAccess.User,!0,__("Text"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.VkontakteButtonsColor=new PropertyType("vkontakte community/vkontakteButtonsColor",PropertyTypeAccess.User,!0,__("Buttons"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.FacebookCommentLink=new PropertyType("facebook comment/facebookCommentLink",PropertyTypeAccess.User,!0,__('URL'),TextField_5.TextField,null,{placeholder:'https://developers.facebook.com/docs/plugins/comments#configurator'});PropertyType.FacebookCommentPostNumber=new PropertyType("facebook comment/facebookCommentPostNumber",PropertyTypeAccess.User,!0,__("Items"),SizeSelector_10.SizeSelector,null,{helpText:__('Number of items to show'),min:1,max:100,hideSpinner:!0});PropertyType.FacebookCommentColourScheme=new PropertyType("facebook comment/facebookCommentColourScheme",PropertyTypeAccess.User,!0,__('Colour scheme'),DropdownBox_6.DropdownBox,null,{options:[{id:'light',name:'light'},{id:'dark',name:'dark'}],});PropertyType.FacebookCommentSorting=new PropertyType("facebook comment/facebookCommentSorting",PropertyTypeAccess.User,!0,__('Comments sorting'),DropdownBox_6.DropdownBox,null,{options:[{id:'reverse_time',name:'reverse_time'},{id:'time',name:'time'}],});PropertyType.InstagramUsername=new PropertyType("instagram/instagramUsername",PropertyTypeAccess.User,!0,__('Username'),TextField_5.TextField,null,{placeholder:'@instagram'});PropertyType.InstagramItemsToShow=new PropertyType("instagram/instagramItemsToShow",PropertyTypeAccess.User,!0,__("Items"),SizeSelector_10.SizeSelector,null,{min:1,max:100,hideSpinner:!0}).inline(6);PropertyType.InstagramImageMargin=new PropertyType("instagram/instagramImageMargin",PropertyTypeAccess.User,!0,__("Padding"),SizeSelector_10.SizeSelector,null,{min:0,max:9999,hideSpinner:!0,units:'px'}).inline(6);PropertyType.InstagramImageSize=new PropertyType("instagram/instagramImageSize",PropertyTypeAccess.User,!0,__("Image size"),SizeSelector_10.SizeSelector,null,{min:150,max:640,hideSpinner:!0,units:'px'}).inline(6);PropertyType.InstagramImageAlign=new PropertyType("instagram/instagramImageAlign",PropertyTypeAccess.User,!0,__("Align"),HAlignSelector_3.HAlignSelector,null,{justify:!1}).inline(6);PropertyType.InstagramExcludeVideo=new PropertyType("instagram/instagramExcludeVideo",PropertyTypeAccess.User,!0,__("Exclude video"),CheckBox_7.default);PropertyType.InstagramShowScrollbar=new PropertyType("instagram/instagramShowScrollbar",PropertyTypeAccess.User,!0,__("Show scrollbar"),CheckBox_7.default);PropertyType.InstagramImageCrop=new PropertyType("instagram/instagramImageCrop",PropertyTypeAccess.User,!0,__("Use square images"),CheckBox_7.default);PropertyType.InstagramShuffle=new PropertyType("instagram/instagramShuffle",PropertyTypeAccess.User,!0,__("Shuffle"),CheckBox_7.default);PropertyType.GoogleCalendarId=new PropertyType("Google Calendar/googleCalendarId",PropertyTypeAccess.User,!0,__('Google calendar ID'),TextField_5.TextField,null,{placeholder:'uk__en_gb@holiday.calendar.google.com'});PropertyType.GoogleCalendarName=new PropertyType("Google Calendar/googleCalendarName",PropertyTypeAccess.User,!0,__('Calendar name'),TextField_5.TextField,null,{placeholder:'Calendar name'});PropertyType.GoogleCalendarLanguage=new PropertyType("Google Calendar/googleCalendarLanguage",PropertyTypeAccess.User,!0,__('Language'),DropdownBox_6.DropdownBox,null,{options:[{id:'',name:'Default'},{id:'id',name:'Bahasa Indonesia'},{id:'ca',name:'Català'},{id:'cs',name:'Čeština'},{id:'da',name:'Dansk'},{id:'de',name:'Deutsch'},{id:'en_GB',name:'English (UK)'},{id:'en',name:'English (US)'},{id:'es',name:'Español'},{id:'es_419',name:'Español (Latinoamérica)'},{id:'fil',name:'Filipino'},{id:'fr',name:'Français'},{id:'hr',name:'Hrvatski'},{id:'it',name:'Italiano'},{id:'lv',name:'Latviešu'},{id:'lt',name:'Lietuvių'},{id:'hu',name:'Magyar'},{id:'nl',name:'Nederlands'},{id:'no',name:'Norsk (bokmål)'},{id:'pl',name:'Polski'},{id:'pt_BR',name:'Português (Brasil)'},{id:'pt_PT',name:'Português (Portugal)'},{id:'ro',name:'Română'},{id:'sk',name:'Slovenčina'},{id:'sl',name:'Slovenščina'},{id:'fi',name:'Suomi'},{id:'sv',name:'Svenska'},{id:'tr',name:'Türkçe'},{id:'vi',name:'Tiếng Việt'},{id:'el',name:'Ελληνικά'},{id:'ru',name:'Русский'},{id:'sr',name:'Српски'},{id:'uk',name:'Українська'},{id:'bg',name:'Български'},{id:'iw',name:'עברית'},{id:'ar',name:'العربية'},{id:'fa',name:'فارسی'},{id:'hi',name:'हिन्दी'},{id:'th',name:'ภาษาไทย'},{id:'zh_TW',name:'中文（繁體）'},{id:'zh_CN',name:'中文（简体）'},{id:'ja',name:'日本語'},{id:'ko',name:'한국어'}],});PropertyType.GoogleCalendarTimezone=new PropertyType("Google Calendar/googleCalendarTimezone",PropertyTypeAccess.User,!0,__('Time zone'),DropdownBox_6.DropdownBox,null,{options:[{id:'',name:'Default'},{id:'Pacific/Niue',name:'(GMT-11:00) Niue'},{id:'Pacific/Pago_Pago',name:'(GMT-11:00) Pago Pago'},{id:'Pacific/Honolulu',name:'(GMT-10:00) Honolulu'},{id:'Pacific/Rarotonga',name:'(GMT-10:00) Rarotonga'},{id:'Pacific/Tahiti',name:'(GMT-10:00) Tahiti'},{id:'Pacific/Marquesas',name:'(GMT-09:30) Marquesas'},{id:'America/Anchorage',name:'(GMT-09:00) Anchorage'},{id:'Pacific/Gambier',name:'(GMT-09:00) Gambier'},{id:'America/Los_Angeles',name:'(GMT-08:00) Los Angeles'},{id:'America/Tijuana',name:'(GMT-08:00) Tijuana'},{id:'America/Vancouver',name:'(GMT-08:00) Vancouver'},{id:'America/Whitehorse',name:'(GMT-08:00) Whitehorse'},{id:'Pacific/Pitcairn',name:'(GMT-08:00) Pitcairn'},{id:'America/Dawson_Creek',name:'(GMT-07:00) Dawson Creek'},{id:'America/Denver',name:'(GMT-07:00) Denver'},{id:'America/Edmonton',name:'(GMT-07:00) Edmonton'},{id:'America/Hermosillo',name:'(GMT-07:00) Hermosillo'},{id:'America/Mazatlan',name:'(GMT-07:00) Mazatlan'},{id:'America/Phoenix',name:'(GMT-07:00) Phoenix'},{id:'America/Yellowknife',name:'(GMT-07:00) Yellowknife'},{id:'America/Belize',name:'(GMT-06:00) Belize'},{id:'America/Chicago',name:'(GMT-06:00) Chicago'},{id:'America/Costa_Rica',name:'(GMT-06:00) Costa Rica'},{id:'America/El_Salvador',name:'(GMT-06:00) El Salvador'},{id:'America/Guatemala',name:'(GMT-06:00) Guatemala'},{id:'America/Managua',name:'(GMT-06:00) Managua'},{id:'America/Mexico_City',name:'(GMT-06:00) Mexico City'},{id:'America/Regina',name:'(GMT-06:00) Regina'},{id:'America/Tegucigalpa',name:'(GMT-06:00)Tegucigalpa'},{id:'America/Winnipeg',name:'(GMT-06:00) Winnipeg'},{id:'Pacific/Galapagos',name:'(GMT-06:00) Galapagos'},{id:'America/Bogota',name:'(GMT-05:00) Bogota'},{id:'America/Cancun',name:'(GMT-05:00) Cancun'},{id:'America/Cayman',name:'(GMT-05:00) Cayman'},{id:'America/Guayaquil',name:'(GMT-05:00) Guayaquil'},{id:'America/Havana',name:'(GMT-05:00) Havana'},{id:'America/Iqaluit',name:'(GMT-05:00) Iqaluit'},{id:'America/Jamaica',name:'(GMT-05:00) Jamaica'},{id:'America/Lima',name:'(GMT-05:00) Lima'},{id:'America/Nassau',name:'(GMT-05:00) Nassau'},{id:'America/New_York',name:'(GMT-05:00) New York'},{id:'America/Panama',name:'(GMT-05:00) Panama'},{id:'America/Port-au-Prince',name:'(GMT-05:00) Port au Prince'},{id:'America/Rio_Branco',name:'(GMT-05:00) Rio Branco'},{id:'America/Toronto',name:'(GMT-05:00) Toronto'},{id:'Pacific/Easter',name:'(GMT-05:00) Easter'},{id:'America/Caracas',name:'(GMT-04:30) Caracas'},{id:'America/Asuncion',name:'(GMT-04:00) Asuncion'},{id:'America/Barbados',name:'(GMT-04:00) Barbados'},{id:'America/Boa_Vista',name:'(GMT-04:00) Boa Vista'},{id:'America/Campo_Grande',name:'(GMT-04:00) Campo Grande'},{id:'America/Cuiaba',name:'(GMT-04:00) Cuiaba'},{id:'America/Curacao',name:'(GMT-04:00) Curacao'},{id:'America/Grand_Turk',name:'(GMT-04:00) Grand Turk'},{id:'America/Guyana',name:'(GMT-04:00) Guyana'},{id:'America/Halifax',name:'(GMT-04:00) Halifax'},{id:'America/La_Paz',name:'(GMT-04:00) La Paz'},{id:'America/Manaus',name:'(GMT-04:00) Manaus'},{id:'America/Martinique',name:'(GMT-04:00) Martinique'},{id:'America/Port_of_Spain',name:'(GMT-04:00) Port of Spain'},{id:'America/Porto_Velho',name:'(GMT-04:00) Porto Velho'},{id:'America/Puerto_Rico',name:'(GMT-04:00) Puerto Rico'},{id:'America/Santo_Domingo',name:'(GMT-04:00) Santo Domingo'},{id:'America/Thule',name:'(GMT-04:00) Thule'},{id:'Atlantic/Bermuda',name:'(GMT-04:00) Bermuda'},{id:'America/St_Johns',name:'(GMT-03:30) St Johns'},{id:'America/Araguaina',name:'(GMT-03:00) Araguaina'},{id:'America/Argentina/Buenos_Aires',name:'(GMT-03:00) Buenos Aires'},{id:'America/Bahia',name:'(GMT-03:00) Bahia'},{id:'America/Belem',name:'(GMT-03:00) Belem'},{id:'America/Cayenne',name:'(GMT-03:00) Cayenne'},{id:'America/Fortaleza',name:'(GMT-03:00) Fortaleza'},{id:'America/Godthab',name:'(GMT-03:00) Godthab'},{id:'America/Maceio',name:'(GMT-03:00) Maceio'},{id:'America/Miquelon',name:'(GMT-03:00) Miquelon'},{id:'America/Montevideo',name:'(GMT-03:00) Montevideo'},{id:'America/Paramaribo',name:'(GMT-03:00) Paramaribo'},{id:'America/Recife',name:'(GMT-03:00) Recife'},{id:'America/Santiago',name:'(GMT-03:00) Santiago'},{id:'America/Sao_Paulo',name:'(GMT-03:00) Sao Paulo'},{id:'Antarctica/Palmer',name:'(GMT-03:00) Palmer'},{id:'Antarctica/Rothera',name:'(GMT-03:00) Rothera'},{id:'Atlantic/Stanley',name:'(GMT-03:00) Stanley'},{id:'America/Noronha',name:'(GMT-02:00) Noronha'},{id:'Atlantic/South_Georgia',name:'(GMT-02:00) South Georgia'},{id:'America/Scoresbysund',name:'(GMT-01:00) Scoresbysund'},{id:'Atlantic/Azores',name:'(GMT-01:00) Azores'},{id:'Atlantic/Cape_Verde',name:'(GMT-01:00) Cape Verde'},{id:'Africa/Abidjan',name:'(GMT+00:00) Abidjan'},{id:'Africa/Accra',name:'(GMT+00:00) Accra'},{id:'Africa/Bissau',name:'(GMT+00:00) Bissau'},{id:'Africa/Casablanca',name:'(GMT+00:00) Casablanca'},{id:'Africa/El_Aaiun',name:'(GMT+00:00) El Aaiun'},{id:'Africa/Monrovia',name:'(GMT+00:00) Monrovia'},{id:'America/Danmarkshavn',name:'(GMT+00:00) Danmarkshavn'},{id:'Atlantic/Canary',name:'(GMT+00:00) Canary'},{id:'Atlantic/Faroe',name:'(GMT+00:00) Faroe'},{id:'Atlantic/Reykjavik',name:'(GMT+00:00) Reykjavik'},{id:'Etc/GMT',name:'(GMT+00:00) GMT'},{id:'Europe/Dublin',name:'(GMT+00:00) Dublin'},{id:'Europe/Lisbon',name:'(GMT+00:00) Lisbon'},{id:'Europe/London',name:'(GMT+00:00) London'},{id:'Africa/Algiers',name:'(GMT+01:00) Algiers'},{id:'Africa/Ceuta',name:'(GMT+01:00) Ceuta'},{id:'Africa/Lagos',name:'(GMT+01:00) Lagos'},{id:'Africa/Ndjamena',name:'(GMT+01:00) Ndjamena'},{id:'Africa/Tunis',name:'(GMT+01:00) Tunis'},{id:'Africa/Windhoek',name:'(GMT+01:00) Windhoek'},{id:'Europe/Amsterdam',name:'(GMT+01:00) Amsterdam'},{id:'Europe/Andorra',name:'(GMT+01:00) Andorra'},{id:'Europe/Belgrade',name:'(GMT+01:00) Belgrade'},{id:'Europe/Berlin',name:'(GMT+01:00) Berlin'},{id:'Europe/Brussels',name:'(GMT+01:00) Brussels'},{id:'Europe/Budapest',name:'(GMT+01:00) Budapest'},{id:'Europe/Copenhagen',name:'(GMT+01:00) Copenhagen'},{id:'Europe/Gibraltar',name:'(GMT+01:00) Gibraltar'},{id:'Europe/Luxembourg',name:'(GMT+01:00) Luxembourg'},{id:'Europe/Madrid',name:'(GMT+01:00) Madrid'},{id:'Europe/Malta',name:'(GMT+01:00) Malta'},{id:'Europe/Monaco',name:'(GMT+01:00) Monaco'},{id:'Europe/Oslo',name:'(GMT+01:00) Oslo'},{id:'Europe/Paris',name:'(GMT+01:00) Paris'},{id:'Europe/Prague',name:'(GMT+01:00) Prague'},{id:'Europe/Rome',name:'(GMT+01:00) Rome'},{id:'Europe/Stockholm',name:'(GMT+01:00) Stockholm'},{id:'Europe/Tirane',name:'(GMT+01:00) Tirane'},{id:'Europe/Vienna',name:'(GMT+01:00) Vienna'},{id:'Europe/Warsaw',name:'(GMT+01:00) Warsaw'},{id:'Europe/Zurich',name:'(GMT+01:00) Zurich'},{id:'Africa/Cairo',name:'(GMT+02:00) Cairo'},{id:'Africa/Johannesburg',name:'(GMT+02:00) Johannesburg'},{id:'Africa/Maputo',name:'(GMT+02:00) Maputo'},{id:'Africa/Tripoli',name:'(GMT+02:00) Tripoli'},{id:'Asia/Amman',name:'(GMT+02:00) Amman'},{id:'Asia/Beirut',name:'(GMT+02:00) Beirut'},{id:'Asia/Damascus',name:'(GMT+02:00) Damascus'},{id:'Asia/Gaza',name:'(GMT+02:00) Gaza'},{id:'Asia/Jerusalem',name:'(GMT+02:00) Jerusalem'},{id:'Asia/Nicosia',name:'(GMT+02:00) Nicosia'},{id:'Europe/Athens',name:'(GMT+02:00) Athens'},{id:'Europe/Bucharest',name:'(GMT+02:00) Bucharest'},{id:'Europe/Chisinau',name:'(GMT+02:00) Chisinau'},{id:'Europe/Helsinki',name:'(GMT+02:00) Helsinki'},{id:'Europe/Istanbul',name:'(GMT+02:00) Istanbul'},{id:'Europe/Kaliningrad',name:'(GMT+02:00) Kaliningrad'},{id:'Europe/Kiev',name:'(GMT+02:00) Kiev'},{id:'Europe/Riga',name:'(GMT+02:00) Riga'},{id:'Europe/Sofia',name:'(GMT+02:00) Sofia'},{id:'Europe/Tallinn',name:'(GMT+02:00) Tallinn'},{id:'Europe/Vilnius',name:'(GMT+02:00) Vilnius'},{id:'Africa/Khartoum',name:'(GMT+03:00) Khartoum'},{id:'Africa/Nairobi',name:'(GMT+03:00) Nairobi'},{id:'Antarctica/Syowa',name:'(GMT+03:00) Syowa'},{id:'Asia/Baghdad',name:'(GMT+03:00) Baghdad'},{id:'Asia/Qatar',name:'(GMT+03:00) Qatar'},{id:'Asia/Riyadh',name:'(GMT+03:00) Riyadh'},{id:'Europe/Minsk',name:'(GMT+03:00) Minsk'},{id:'Europe/Moscow',name:'(GMT+03:00) Moscow'},{id:'Asia/Tehran',name:'(GMT+03:30) Tehran'},{id:'Asia/Baku',name:'(GMT+04:00) Baku'},{id:'Asia/Dubai',name:'(GMT+04:00) Dubai'},{id:'Asia/Tbilisi',name:'(GMT+04:00) Tbilisi'},{id:'Asia/Yerevan',name:'(GMT+04:00) Yerevan'},{id:'Europe/Samara',name:'(GMT+04:00) Samara'},{id:'Indian/Mahe',name:'(GMT+04:00) Mahe'},{id:'Indian/Mauritius',name:'(GMT+04:00) Mauritius'},{id:'Indian/Reunion',name:'(GMT+04:00) Reunion'},{id:'Asia/Kabul',name:'(GMT+04:30) Kabul'},{id:'Antarctica/Mawson',name:'(GMT+05:00) Mawson'},{id:'Asia/Aqtau',name:'(GMT+05:00) Aqtau'},{id:'Asia/Aqtobe',name:'(GMT+05:00) Aqtobe'},{id:'Asia/Ashgabat',name:'(GMT+05:00) Ashgabat'},{id:'Asia/Dushanbe',name:'(GMT+05:00) Dushanbe'},{id:'Asia/Karachi',name:'(GMT+05:00) Karachi'},{id:'Asia/Tashkent',name:'(GMT+05:00) Tashkent'},{id:'Asia/Yekaterinburg',name:'(GMT+05:00) Yekaterinburg'},{id:'Indian/Kerguelen',name:'(GMT+05:00) Kerguelen'},{id:'Indian/Maldives',name:'(GMT+05:00) Maldives'},{id:'Asia/Calcutta',name:'(GMT+05:30) Calcutta'},{id:'Asia/Colombo',name:'(GMT+05:30) Colombo'},{id:'Asia/Katmandu',name:'(GMT+05:45) Katmandu'},{id:'Antarctica/Vostok',name:'(GMT+06:00) Vostok'},{id:'Asia/Almaty',name:'(GMT+06:00) Almaty'},{id:'Asia/Bishkek',name:'(GMT+06:00) Bishkek'},{id:'Asia/Dhaka',name:'(GMT+06:00) Dhaka'},{id:'Asia/Omsk',name:'(GMT+06:00) Omsk'},{id:'Asia/Thimphu',name:'(GMT+06:00) Thimphu'},{id:'Indian/Chagos',name:'(GMT+06:00) Chagos'},{id:'Asia/Rangoon',name:'(GMT+06:30) Rangoon'},{id:'Indian/Cocos',name:'(GMT+06:30) Cocos'},{id:'Antarctica/Davis',name:'(GMT+07:00) Davis'},{id:'Asia/Bangkok',name:'(GMT+07:00) Bangkok'},{id:'Asia/Hovd',name:'(GMT+07:00) Hovd'},{id:'Asia/Jakarta',name:'(GMT+07:00) Jakarta'},{id:'Asia/Krasnoyarsk',name:'(GMT+07:00) Krasnoyarsk'},{id:'Asia/Saigon',name:'(GMT+07:00) Saigon'},{id:'Indian/Christmas',name:'(GMT+07:00) Christmas'},{id:'Antarctica/Casey',name:'(GMT+08:00) Casey'},{id:'Asia/Brunei',name:'(GMT+08:00) Brunei'},{id:'Asia/Choibalsan',name:'(GMT+08:00) Choibalsan'},{id:'Asia/Hong_Kong',name:'(GMT+08:00) Hong Kong'},{id:'Asia/Irkutsk',name:'(GMT+08:00) Irkutsk'},{id:'Asia/Kuala_Lumpur',name:'(GMT+08:00) Kuala Lumpur'},{id:'Asia/Macau',name:'(GMT+08:00) Macau'},{id:'Asia/Makassar',name:'(GMT+08:00) Makassar'},{id:'Asia/Manila',name:'(GMT+08:00) Manila'},{id:'Asia/Shanghai',name:'(GMT+08:00) Shanghai'},{id:'Asia/Singapore',name:'(GMT+08:00) Singapore'},{id:'Asia/Taipei',name:'(GMT+08:00) Taipei'},{id:'Asia/Ulaanbaatar',name:'(GMT+08:00) Ulaanbaatar'},{id:'Australia/Perth',name:'(GMT+08:00) Perth'},{id:'Asia/Pyongyang',name:'(GMT+08:30) Pyongyang'},{id:'Asia/Dili',name:'(GMT+09:00) Dili'},{id:'Asia/Jayapura',name:'(GMT+09:00) Jayapura'},{id:'Asia/Seoul',name:'(GMT+09:00) Seoul'},{id:'Asia/Tokyo',name:'(GMT+09:00) Tokyo'},{id:'Asia/Yakutsk',name:'(GMT+09:00) Yakutsk'},{id:'Pacific/Palau',name:'(GMT+09:00) Palau'},{id:'Australia/Adelaide',name:'(GMT+09:30) Adelaide'},{id:'Australia/Darwin',name:'(GMT+09:30) Darwin'},{id:'Antarctica/DumontDUrville',name:'(GMT+10:00) DumontDUrville'},{id:'Asia/Magadan',name:'(GMT+10:00) Magadan'},{id:'Asia/Vladivostok',name:'(GMT+10:00) Vladivostok'},{id:'Australia/Brisbane',name:'(GMT+10:00) Brisbane'},{id:'Australia/Hobart',name:'(GMT+10:00) Hobart'},{id:'Australia/Sydney',name:'(GMT+10:00) Sydney'},{id:'Pacific/Chuuk',name:'(GMT+10:00) Chuuk'},{id:'Pacific/Guam',name:'(GMT+10:00) Guam'},{id:'Pacific/Port_Moresby',name:'(GMT+10:00) Port Moresby'},{id:'Pacific/Efate',name:'(GMT+11:00) Efate'},{id:'Pacific/Guadalcanal',name:'(GMT+11:00) Guadalcanal'},{id:'Pacific/Kosrae',name:'(GMT+11:00) Kosrae'},{id:'Pacific/Norfolk',name:'(GMT+11:00) Norfolk'},{id:'Pacific/Noumea',name:'(GMT+11:00) Noumea'},{id:'Pacific/Pohnpei',name:'(GMT+11:00) Pohnpei'},{id:'Asia/Kamchatka',name:'(GMT+12:00) Kamchatka'},{id:'Pacific/Auckland',name:'(GMT+12:00) Auckland'},{id:'Pacific/Fiji',name:'(GMT+12:00) Fiji'},{id:'Pacific/Funafuti',name:'(GMT+12:00) Funafuti'},{id:'Pacific/Kwajalein',name:'(GMT+12:00) Kwajalein'},{id:'Pacific/Majuro',name:'(GMT+12:00) Majuro'},{id:'Pacific/Nauru',name:'(GMT+12:00) Nauru'},{id:'Pacific/Tarawa',name:'(GMT+12:00) Tarawa'},{id:'Pacific/Wake',name:'(GMT+12:00) Wake'},{id:'Pacific/Wallis',name:'(GMT+12:00) Wallis'},{id:'Pacific/Apia',name:'(GMT+13:00) Apia'},{id:'Pacific/Enderbury',name:'(GMT+13:00) Enderbury'},{id:'Pacific/Fakaofo',name:'(GMT+13:00) Fakaofo'},{id:'Pacific/Tongatapu',name:'(GMT+13:00) Tongatapu'},{id:'Pacific/Kiritimati',name:'(GMT+14:00) Kiritimati'}],});PropertyType.GoogleCalendarFirstDay=new PropertyType("Google Calendar/googleCalendarFirstDay",PropertyTypeAccess.User,!0,__('First day'),DropdownBox_6.DropdownBox,null,{options:[{id:'1',name:'Sunday'},{id:'2',name:'Monday'},{id:'7',name:'Saturday'}],});PropertyType.BaiduAddress=new PropertyType("baidu maps/baiduAddress",PropertyTypeAccess.User,!0,__('Coordinates or address'),BaiduMapsPlacesControl_1.BaiduMapsPlacesControl,null,{configSuplier:function(){return this.callWithData(function(data){return({zoom:data.content.zoom,mapTypeId:data.content.type})})}});PropertyType.BaiduApiKey=new PropertyType("baidu maps/baiduApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField);PropertyType.BaiduMapZoom=new PropertyType("baidu maps/zoom",PropertyTypeAccess.User,!0,__('Zoom level'),SizeSelector_10.SizeSelector,null,{min:1,max:22,hideSpinner:!0});PropertyType.BaiduMapType=new PropertyType("baidu maps/baiduMapType",PropertyTypeAccess.User,!0,__('Map type'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'BMAP_NORMAL_MAP',label:__("Road map")},{value:'BMAP_SATELLITE_MAP',label:__("Satelite")},{value:'BMAP_HYBRID_MAP',label:__("Hybrid")},],});PropertyType.BaiduShowMarker=new PropertyType("baidu maps/baiduShowMarker",PropertyTypeAccess.User,!0,__("Show marker"),CheckBox_7.default);PropertyType.BaiduAnimMarker=new PropertyType("baidu maps/baiduAnimMarker",PropertyTypeAccess.User,!0,__("Animate marker"),CheckBox_7.default);PropertyType.BingAddress=new PropertyType("bing maps/bingAddress",PropertyTypeAccess.User,!0,__('Coordinates or address'),BingMapsPlacesControl_1.BingMapsPlacesControl,null,{configSuplier:function(){return this.callWithData(function(data){return({zoom:data.content.zoomLevel,mapTypeId:data.content.type})})}});PropertyType.BingApiKey=new PropertyType("bing maps/bingApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField);PropertyType.BingMapZoom=new PropertyType("bing maps/zoom",PropertyTypeAccess.User,!0,__('Zoom level'),SizeSelector_10.SizeSelector,null,{min:1,max:22,hideSpinner:!0});PropertyType.BingMapType=new PropertyType("bing maps/bingMapType",PropertyTypeAccess.User,!0,__('Map type'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'r',label:__("Road map")},{value:'a',label:__("Hybrid")},{value:'be',label:__("Bird's eye")},],});PropertyType.OpenStreetMapAddress=new PropertyType("openstreetmap/mapAddress",PropertyTypeAccess.User,!0,__('Coordinates'),OpenStreetMapPlacesControl_1.OpenStreetMapPlacesControl,null,{configSuplier:function(){return this.callWithData(function(data){return({zoom:data.content.zoomLevel,mapTypeId:data.content.type})})}});PropertyType.YandexAddress=new PropertyType("yandex maps/yandexAddress",PropertyTypeAccess.User,!0,__('Coordinates or address'),YandexMapsPlacesControl_1.YandexMapsPlacesControl,null,{configSuplier:function(){return this.callWithData(function(data){return({zoom:data.content.zoomLevel,mapTypeId:data.content.type})})}});PropertyType.YandexApiKey=new PropertyType("yandex maps/yandexApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField,null,{placeholder:'AE4ftlCBAAAA0Y5IfCIAPV4d9jYjMZGyd2z26kswgP7==',});PropertyType.YandexMapZoom=new PropertyType("yandex maps/zoom",PropertyTypeAccess.User,!0,__('Zoom level'),SizeSelector_10.SizeSelector,null,{min:1,max:22,hideSpinner:!0});PropertyType.YandexMapType=new PropertyType("yandex maps/yandexMapType",PropertyTypeAccess.User,!0,__('Map type'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'yandex#map',label:__("Road map")},{value:'yandex#satellite',label:__("Satellite")},{value:'yandex#hybrid',label:__("Hybrid")},],});PropertyType.SpotifyControl=new PropertyType("spotify/SpotifyControl",PropertyTypeAccess.User,!0,__(""),SpotifyWidgetControl_1.SpotifyWidgetControl,null);PropertyType.YoukuGroupId=new PropertyType("youku/youkuGroupId",PropertyTypeAccess.User,!0,__('Copy full Youku video URL'),TextField_5.TextField,null,{placeholder:'https://v.youku.com/v_show/id_XNDgxNjgwODcyOA==.html?spm=a2ha1.14919748_WEBHOME_GRAY.drawer5.d_zj1_3&scm=20140719.rcmd.7182.video_XNDgxNjgwODcyOA%3D%3D',});PropertyType.YoukuAutoplay=new PropertyType("youku/youkuAutoplay",PropertyTypeAccess.User,!0,__('Autoplay'),CheckBox_7.default);PropertyType.RutubeGroupId=new PropertyType("rutube/rutubeGroupId",PropertyTypeAccess.User,!0,__('Rutube ID or URL'),TextField_5.TextField,null);PropertyType.VkGroupId=new PropertyType("vk/vkGroupId",PropertyTypeAccess.User,!0,__('Video embed code'),TextField_5.TextField,null,{placeholder:'https://vk.com/video_ext.php?oid=-22822305&id=456241782&hash=86415b33328d3e54&hd=2',});PropertyType.TelegramWidgetPost=new PropertyType("telegram/telegramPost",PropertyTypeAccess.User,!0,__('Link to Telegram post'),TextField_5.TextField,null,{placeholder:'https://t.me/telegram/83',});PropertyType.TelegramWidgetUserPic=new PropertyType("telegram/userPic",PropertyTypeAccess.User,!0,__('Author Photo'),DropdownBox_6.DropdownBox,null,{options:[{id:'',name:__('Auto')},{id:'true',name:__('Always Show')},{id:'false',name:__('Always hide')},],});PropertyType.TelegramWidgetDark=new PropertyType("telegram/dark",PropertyTypeAccess.User,!0,__('Dark theme'),CheckBox_7.default,null,{});PropertyType.TelegramWidgetColor=new PropertyType("telegram/color",PropertyTypeAccess.User,!0,__('Accent color'),ColorPicker_9.ColorPicker,null,{noAlpha:!0});PropertyType.VimeoGroupId=new PropertyType("vimeo/vimeoGroupId",PropertyTypeAccess.User,!0,__('Vimeo ID or URL'),TextField_5.TextField,null,{placeholder:'380356846',});PropertyType.VimeoPortrait=new PropertyType("vimeo/vimeoPortrait",PropertyTypeAccess.User,!0,__('Portrait'),CheckBox_7.default,null,{helpText:__("Show the user’s portrait on the video"),});PropertyType.VimeoTitle=new PropertyType("vimeo/vimeoTitle",PropertyTypeAccess.User,!0,__('Title'),CheckBox_7.default,null,{helpText:__("Show the title on the video."),});PropertyType.VimeoAutoplay=new PropertyType("vimeo/vimeoAutoplay",PropertyTypeAccess.User,!0,__('Autoplay'),CheckBox_7.default,null,{helpText:__("Play the video automatically on load."),});PropertyType.VimeoColor=new PropertyType("vimeo/vimeoColor",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker).inline(6);PropertyType.AparatGroupId=new PropertyType("aparat/vimeoGroupId",PropertyTypeAccess.User,!0,__('Aparat ID or URL'),TextField_5.TextField,null,{placeholder:'XmBRD',});PropertyType.AparatStartTime=new PropertyType("aparat/aparatStartTime",PropertyTypeAccess.User,!0,__('Start at'),TextField_5.TextField,null,{placeholder:'00:00'});PropertyType.FacebookVideoId=new PropertyType("Facebook video/facebookVideoId",PropertyTypeAccess.User,!0,__('Facebook Video ID or URL'),TextField_5.TextField,null);PropertyType.FacebookVideoStartTime=new PropertyType("Facebook video/facebookVideoStartTime",PropertyTypeAccess.User,!0,__('Start at'),TextField_5.TextField,null,{placeholder:'00:00'});PropertyType.InstagramVideoId=new PropertyType("Instagram video/instagramVideoId",PropertyTypeAccess.User,!0,__('Instagram post ID or URL'),TextField_5.TextField,null);PropertyType.AccordionItemsButton=new PropertyType("accordion/itemsButton",PropertyTypeAccess.User,!0,__('Edit items'),UIButton_7.UIButton).inline();PropertyType.AccordionLayoutType=new PropertyType("accordion/layoutType",PropertyTypeAccess.User,!0,__("Layout"),LayoutSelector_1.LayoutSelector,null,{small:!0});PropertyType.AccordionSliderInterval=new PropertyType("accordion/slideInterval",PropertyTypeAccess.User,!0,__("Image change frequency (s)"),SliderControl_4.SliderControl,null,{min:0,max:30,step:0.1,unit:__('s')});PropertyType.AccordionBackgroundColor=new PropertyType("text/backgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.AccordionBorder=new PropertyType("text/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline();PropertyType.AccordionIndividualShadow=new PropertyType("accordion/individualShadow",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{});PropertyType.AccordionStyle=new PropertyType("accordion/style",PropertyTypeAccess.User,!0,'',AccordionStyleControl_1.AccordionStyleControl,null,{useShadows:!1});PropertyType.AccordionLayoutTitle=new PropertyType("accordionitem/title",PropertyTypeAccess.User,!1,__("Item name"),MultilangTextField_2.default,void 0,{});PropertyType.AccordionLayoutTitleIcon=new PropertyType("accordionitem/icon",PropertyTypeAccess.User,!1,__("Item icon"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{mode:'image',multiselect:!1,thumbSize:60,mediatabs:!1,fontAwesomeTab:!0,usePictureManager:!1,showTemplateGalleryTab:!1});PropertyType.AccordionLayoutTitleIconRtl=new PropertyType("accordionitem/rtl",PropertyTypeAccess.User,!0,__("Right side"),CheckBox_7.default);PropertyType.LayoutElementBackground=new PropertyType("layout/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl).inline();PropertyType.LayoutElementBgBorder=new PropertyType("layout/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline();PropertyType.ElementBackgroundElement=new PropertyType("layout/backgroundElement",PropertyTypeAccess.User,!1,__("Background element"),BackgroundElementSelector_1.BackgroundElementSelector,null,null,void 0,void 0,void 0,!0);PropertyType.LayoutElementBgBorderRadius=new PropertyType("layout/borderRadius",PropertyTypeAccess.User,!0,__("Rounded corners"),RoundCornersControl_1.RoundCornersControl);PropertyType.BlockLayout=new PropertyType("layout/layout",PropertyTypeAccess.User,!0,"",FlexLayoutControl_2.FlexLayoutControl);PropertyType.BlogItemsButton=new PropertyType("blog/itemsButton",PropertyTypeAccess.User,!0,__('Edit posts'),UIButton_7.UIButton).inline();PropertyType.BlogLayoutType=new PropertyType("blog/layoutType",PropertyTypeAccess.User,!0,__("Layout"),BlogPropertyDialog_1.LayoutSelector,null,{small:!0});PropertyType.BlogCategory=new PropertyType("blog/category",PropertyTypeAccess.User,!0,__('Category'),DropdownBox_6.DropdownBox,null,{multilevel:!0});PropertyType.BlogElementBackgroundColor=new PropertyType("blog/backgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.BlogCaptionsBackgroundColor=new PropertyType("blog/captionBackgroundColor",PropertyTypeAccess.User,!0,__("Caption background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.BtnButtonText=new PropertyType("button/buttonText",PropertyTypeAccess.User,!0,__("Text"),MultilangTextField_2.default);PropertyType.ButtonTextIcon=new PropertyType("button/buttonIcon",PropertyTypeAccess.User,!1,__("Item icon"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{mode:'image',multiselect:!1,thumbSize:60,mediatabs:!1,fontAwesomeTab:!0,usePictureManager:!1,showTemplateGalleryTab:!1,showFullLibraryButton:!1}).inline(6);PropertyType.BtnIconAlignment=new PropertyType("button/buttonRtl",PropertyTypeAccess.User,!0,__('Position'),HAlignSelector_3.HAlignSelector,null,{justify:!1,center:!1},!1).inline(6);PropertyType.BtnOnClickLink=new PropertyType("button/link",PropertyTypeAccess.User,!0,__("URL"),URLControl_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new URLControl_2.default())},{multilang:!0});PropertyType.BtnFontControl=new PropertyType("button/textFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!1,noSpacing:!1,noStyle:!0,needLineHeight:!0,noColorPicker:!0},!1);PropertyType.BtnButtonStyle=new PropertyType("button/style",PropertyTypeAccess.User,!0,'',ButtonStyleControl_2.ButtonStyleControl,null,{singleBorder:!0,showRadius:!0,useShadows:!0});PropertyType.BtnButtonSubtext=new PropertyType("subtext/buttonSubtext",PropertyTypeAccess.User,!0,__("Sub Text"),MultilangTextField_2.default);PropertyType.BtnSubFontControl=new PropertyType("subtext/textFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!0,noColorPicker:!0},!1);PropertyType.BtnSubButtonStyle=new PropertyType("subtext/style",PropertyTypeAccess.User,!0,'',ButtonStyleControl_2.ButtonStyleControl,null,{singleBorder:!0,showRadius:!0,useShadows:!1});PropertyType.MoreProperties=new PropertyType("general/morePropertiesButton",PropertyTypeAccess.User,!1,__('More properties'),UIButton_7.UIButton);PropertyType.LikeUrl=new PropertyType("facebook like/likeUrl",PropertyTypeAccess.User,!0,__('URL to Like (required)'),TextField_5.TextField,null,{placeholder:'https://www.facebook.com/facebook'});PropertyType.TwitterWidgetId=new PropertyType("twitter/twitterWidgetId",PropertyTypeAccess.User,!0,__('Widget ID or profile URL'),TextField_5.TextField,null,{helpText:__('To get Widget Id go to %s. Create new widget "Create New > Search". After create, go back to widgets list and click on it again, copy the ID from the url address OR insert in this field your profile URL').replace('%s','<a href="https://twitter.com/settings/widgets" target="_blank"> https://twitter.com/settings/widgets</a>'),placeholder:'https://twitter.com/twitter',});PropertyType.TwitterMaxMessageCount=new PropertyType("twitter/twitterMaxMessageCount",PropertyTypeAccess.User,!0,__('Number of Tweets'),SizeSelector_10.SizeSelector,null,{min:0,max:9999,hideSpinner:!0}).inline(6);PropertyType.FlickrGalleryUrl=new PropertyType("flickr/flickrGalleryUrl",PropertyTypeAccess.User,!0,__('Flickr gallery or set URL'),TextField_5.TextField,void 0,{helpText:'https://www.flickr.com/photos/<wbr>gifrancis/galleries/<wbr>72157622562924322/',placeholder:'https://www.flickr.com/photos/gifrancis/galleries/72157622562924322/'});PropertyType.FacebookPageUrl=new PropertyType("facebook fans/facebookPageUrl",PropertyTypeAccess.User,!0,__('Page URL'),TextField_5.TextField,null,{helpText:__('Only for Facebook pages, not for profiles'),placeholder:'https://www.facebook.com/platform',});PropertyType.FacebookLikeAction=new PropertyType("facebook like/facebookLikeAction",PropertyTypeAccess.User,!0,__('Verb to display'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{helpText:__("The verb to display in the button. Currently only 'like' and 'recommend' are supported."),options:[{value:"like",label:__("Like")},{value:"recommend",label:__("Recommend")},],});PropertyType.FacebookLikeLayout=new PropertyType("facebook like/facebookLikeLayout",PropertyTypeAccess.User,!0,__('Layout Style'),DropdownBox_6.DropdownBox,null,{helpText:__('determines the size and amount of social context next to the button'),options:[{name:__('Standard'),id:'standard'},{name:__('Count button'),id:'button_count'},{name:__('Count box'),id:'box_count'},],});PropertyType.EditMenuButton=new PropertyType("menu/editButton",PropertyTypeAccess.User,!0,__('Edit Menu'),UIButton_7.UIButton).inline();PropertyType.MenuType=new PropertyType("menu/menuType",PropertyTypeAccess.User,!0,__("Type"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:"hmenu",label:__("Horizontal")},{value:"vmenu",label:__("Vertical")},],});PropertyType.MenuStyle=new PropertyType("menu/menuStyle",PropertyTypeAccess.User,!0,__("Style"),MenuStyleControl_1.MenuStyleControl);PropertyType.MenuFontControl=new PropertyType("menuItems/textFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!1,noColorPicker:!0,useTranform:!0},!1);PropertyType.MenuItemSpacing=new PropertyType("menuItems/aspaceanim/_spaceanim/spacing",PropertyTypeAccess.User,!0,__("Spacing"),SpacingDialogControl_1.SpacingDialogControl,null,{useMargin:!0,usePadding:!0});PropertyType.MenuItemAnimation=new PropertyType("menuItems/aspaceanim/_spaceanim/animation",PropertyTypeAccess.User,!1,__('Animation'),AnimationDialogControl_1.AnimationDialogControl);PropertyType.MenuItemStyle=new PropertyType("menuItems/menuitems/_items/style",PropertyTypeAccess.User,!0,__("Style"),ButtonStyleControl_2.ButtonStyleControl,null,{useShadows:!1,showRadius:!0,});PropertyType.MenuItemAlign=new PropertyType("menuItems/align",PropertyTypeAccess.User,!0,__("Align"),HAlignSelector_3.HAlignSelector,null,{justify:!1});PropertyType.SubMenuFontControl=new PropertyType("submenuItems/textFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!1,noColorPicker:!0,useTranform:!0},!1);PropertyType.SubMenuItemSpacing=new PropertyType("submenuItems/aspaceanim/_spaceanim/spacing",PropertyTypeAccess.User,!0,__("Spacing"),SpacingDialogControl_1.SpacingDialogControl,null,{useMargin:!0,usePadding:!0});PropertyType.SubMenuItemAnimation=new PropertyType("submenuItems/aspaceanim/_spaceanim/animation",PropertyTypeAccess.User,!1,__('Animation'),AnimationDialogControl_1.AnimationDialogControl);PropertyType.SubMenuItemStyle=new PropertyType("submenuItems/submenuitems/_items/style",PropertyTypeAccess.User,!0,__("Style"),ButtonStyleControl_2.ButtonStyleControl,null,{useShadows:!1,showRadius:!0,});PropertyType.SubMenuItemAlign=new PropertyType("submenuItems/align",PropertyTypeAccess.User,!0,__("Align"),HAlignSelector_3.HAlignSelector,null,{justify:!1});PropertyType.FacebookLikeColorScheme=new PropertyType("facebook like/colorScheme",PropertyTypeAccess.User,!0,__('Color Scheme'),DropdownBox_6.DropdownBox,null,{options:[{id:'light',name:__('Light')},{id:'dark',name:__('Dark')},],});PropertyType.ColorScheme=new PropertyType("general/colorScheme",PropertyTypeAccess.User,!0,__('Color Scheme'),DropdownBox_6.DropdownBox,null,{options:[{id:'light',name:__('Light')},{id:'dark',name:__('Dark')},],});PropertyType.TwitterColorScheme=new PropertyType("twitter/colorScheme",PropertyTypeAccess.User,!0,__('Color Scheme'),DropdownBox_6.DropdownBox,null,{options:[{id:'light',name:__('Light')},{id:'dark',name:__('Dark')},],}).inline(6);PropertyType.SkypeContactName=new PropertyType("Skype I'm Online/skypeContactName",PropertyTypeAccess.User,!0,__('Skype Name'),TextField_5.TextField,null,{placeholder:'echo123'});PropertyType.ButtonText=new PropertyType("general/buttonText",PropertyTypeAccess.User,!0,__("Text"),MultilangTextField_2.default);PropertyType.SkypeButtonText=new PropertyType("Skype I'm Online/buttonText",PropertyTypeAccess.User,!0,__("Text"),MultilangTextField_2.default);PropertyType.SkypeButtonStyle=new PropertyType("Skype I'm Online/skypeButtonStyle",PropertyTypeAccess.User,!0,__("Style"),DropdownBox_6.DropdownBox,null,{options:[{id:'bubble',name:__('Bubble')},{id:'rounded',name:__('Rounded')},{id:'rectangle',name:__('Rectangle')},],}).inline(6);PropertyType.StoreCartButtonText=new PropertyType("store cart/buttonText",PropertyTypeAccess.User,!0,__("Text"),MultilangTextField_2.default);PropertyType.ButtonIcon=new PropertyType("general/buttonIcon",PropertyTypeAccess.User,!0,__("Image"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1});PropertyType.StoreCartButtonIcon=new PropertyType("store cart/buttonIcon/_icon/icon",PropertyTypeAccess.User,!0,__("Image"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1});PropertyType.StoreCartButtonIconWidth=new PropertyType("store cart/buttonIcon/_icon/size/width",PropertyTypeAccess.User,!0,__("Width"),SizeSelector_10.SizeSelector);PropertyType.StoreCartButtonIconHeight=new PropertyType("store cart/buttonIcon/_icon/size/height",PropertyTypeAccess.User,!0,__("Height"),SizeSelector_10.SizeSelector);PropertyType.ButtonIconVisible=new PropertyType("general/buttonIconVisible",PropertyTypeAccess.User,!0,__("Show Icon"),CheckBox_7.default);PropertyType.SkypeBackgroundColor=new PropertyType("Skype I'm Online/backgroundColor",PropertyTypeAccess.User,!0,__("Background color"),ColorPicker_9.ColorPicker,null,{big:!0});PropertyType.SkypeButtonIconVisible=new PropertyType("Skype I'm Online/buttonIconVisible",PropertyTypeAccess.User,!0,__("Show Icon"),CheckBox_7.default);PropertyType.ElementOpacity=new PropertyType("general/opacity",PropertyTypeAccess.User,!0,__("Opacity (%)"),SliderControl_4.SliderControl,null,{min:0,max:100});PropertyType.SiteLanguages=new PropertyType("languages/languages",PropertyTypeAccess.User,!1,__("Languages"),SiteLanguagesControl_1.SiteLanguagesControl);PropertyType.LanguageSwitchType=new PropertyType("languages/languageSwitchType",PropertyTypeAccess.User,!0,__("Language switcher"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'flags',label:__("Flags")},{value:'select',label:__("Dropdown select")},{value:'names',label:__("Names")},{value:'codes',label:__("Codes")},],});PropertyType.LangFontControl=new PropertyType("flags/textFontControl",PropertyTypeAccess.User,!0,__('Font'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!1,noColorPicker:!0,useTranform:!0},!1);PropertyType.LanguageButtonStyle=new PropertyType("flags/buttonStyle",PropertyTypeAccess.User,!0,__("Style"),ButtonStyleControl_2.ButtonStyleControl,null,{useShadows:!1,showRadius:!0,});PropertyType.NoWidgetHeader=new PropertyType("twitter/noWidgetHeader",PropertyTypeAccess.User,!0,__("Hide header"),CheckBox_7.default);PropertyType.NoWidgetHeaderCover=new PropertyType("facebook fans/noWidgetHeaderCover",PropertyTypeAccess.User,!0,__("Hide cover"),CheckBox_7.default,null,{helpText:__('Hide cover photo in the header.')});PropertyType.NoWidgetFooter=new PropertyType("twitter/noWidgetFooter",PropertyTypeAccess.User,!0,__("Hide footer"),CheckBox_7.default);PropertyType.NoWidgetScrollbars=new PropertyType("twitter/noWidgetScrollbars",PropertyTypeAccess.User,!0,__("Hide scrollbar"),CheckBox_7.default);PropertyType.NoWidgetBackground=new PropertyType("twitter/noWidgetBackground",PropertyTypeAccess.User,!0,__("Transparent background"),CheckBox_7.default);PropertyType.NoWidgetBorders=new PropertyType("twitter/noWidgetBorders",PropertyTypeAccess.User,!0,__("No borders"),CheckBox_7.default);PropertyType.TwitterElementBorderColor=new PropertyType("twitter/borderColor",PropertyTypeAccess.User,!0,__("Border color"),ColorPicker_9.ColorPicker,null,{big:!0});PropertyType.NoFriendsList=new PropertyType("facebook fans/noFriendsList",PropertyTypeAccess.User,!0,__("Hide friends"),CheckBox_7.default,null,{helpText:__("Hide faces of friends.")});PropertyType.ShowFaces=new PropertyType("facebook like/showFaces",PropertyTypeAccess.User,!0,__("Show faces"),CheckBox_7.default,null,{helpText:__("Show profile pictures below the button.")});PropertyType.NoTimeline=new PropertyType("facebook fans/noTimeline",PropertyTypeAccess.User,!0,__("Hide timeline"),CheckBox_7.default,null,{helpText:__("Hide page timeline.")});PropertyType.UseSmallHeader=new PropertyType("facebook fans/useSmallHeader",PropertyTypeAccess.User,!0,__("Small header"),CheckBox_7.default,null,{helpText:__('Use smaller header.')});PropertyType.GalleryType=new PropertyType("gallery/type",PropertyTypeAccess.User,!0,__("Gallery Type"),GalleryTypeSelector_1.GalleryTypeSelector);PropertyType.GalleryPadding=new PropertyType("gallery/padding",PropertyTypeAccess.User,!0,__("Padding"),SizeSelector_10.SizeSelector,null,{min:0,max:999,hideSpinner:!0,units:'px'});PropertyType.GalleryDisableLightbox=new PropertyType("gallery/disableLightbox",PropertyTypeAccess.User,!0,__("Do not enlarge picture on click"),CheckBox_7.default);PropertyType.GalleryHideArrows=new PropertyType("gallery/hideArrows",PropertyTypeAccess.User,!0,__("Hide arrows"),CheckBox_7.default);PropertyType.GalleryImages=new PropertyType("gallery/images",PropertyTypeAccess.User,!1,__("Pictures"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!0,thumbSize:60,mediatabs:!1,fontAwesomeTab:!1,usePictureManager:!0}).inline(6);PropertyType.GalleryBackgroundColor=new PropertyType("gallery/backgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.GoogleMapAddress=new PropertyType("google maps/googleMapAddress",PropertyTypeAccess.User,!0,__('Address'),GoogleMapsPlacesControl_1.GoogleMapsPlacesControl,null,{helpText:__('The same as in Google Maps')});PropertyType.ApiGoogleMapsKey=new PropertyType("google maps/googleMapsApiKey",PropertyTypeAccess.User,!0,__('API Key'),TextField_5.TextField,null,{placeholder:__('Example')+': AGySLaWeMhg9uBek_wDG-xCA3p33eTZ-vazFRnh',helpText:__('Get API Key from %s').replace('%s','<br /><a style="display: inline-block; max-width: 100%; word-break: break-all;" href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">https://developers.google.com/maps/documentation/javascript<br/>/get-api-key</a><br /><br /><div style="text-align: left;">'+__('Make sure that the following APIs are enabled for your key')+':<ul style="padding-left: 22px;"><li>Maps Elevation API</li><li>Maps JavaScript API</li><li>Places API</li><li>Geocoding API</li></ul></div>'),});PropertyType.MapZoom=new PropertyType("google maps/zoom",PropertyTypeAccess.User,!0,__('Zoom level'),SizeSelector_10.SizeSelector,null,{min:1,max:22,hideSpinner:!0}).inline(6);PropertyType.GoogleMapTheme=new PropertyType("google maps/googleMapTheme",PropertyTypeAccess.User,!0,__('Theme'),DropdownBox_6.DropdownBox,null,{options:[{id:'default',name:__('Default')},{id:'light',name:__('Light')},{id:'dark',name:__('Dark')},{id:'monochrome',name:__('Monochrome')},],}).inline(6);PropertyType.GoogleMapType=new PropertyType("google maps/googleMapType",PropertyTypeAccess.User,!0,__('Map type'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:'roadmap',label:__("Road map")},{value:'terrain',label:__("Terrain")},{value:'hybrid',label:__("Hybrid")},{value:'satellite',label:__("Satellite")},],}).inline(6);PropertyType.MapColor=new PropertyType("google maps/color",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker,null,{big:!0,noAlpha:!0,noTransparent:!0}).inline(6);PropertyType.GoogleMarkerIconType=new PropertyType("google maps/googleMarkerIconType",PropertyTypeAccess.User,!0,__('Marker type'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:undefined,label:__("Pin")},{value:'camera',label:__("Camera")},{value:'thumbs',label:__("Thumbs")},],}).inline(6);PropertyType.MapShowSatelliteControl=new PropertyType("options/showSatellite",PropertyTypeAccess.User,!0,__("Show map and satellite control"),CheckBox_7.default);PropertyType.MapShowZoomControl=new PropertyType("options/showZoom",PropertyTypeAccess.User,!0,__("Show zoom control"),CheckBox_7.default);PropertyType.MapShowStreetViewControl=new PropertyType("options/showStreetView",PropertyTypeAccess.User,!0,__("Show Street View control"),CheckBox_7.default);PropertyType.MapShowFullScreenControl=new PropertyType("options/showFullscreen",PropertyTypeAccess.User,!0,__("Show full screen control"),CheckBox_7.default);PropertyType.MapAllowDragging=new PropertyType("options/allowDragging",PropertyTypeAccess.User,!0,__("Allow dragging"),CheckBox_7.default);PropertyType.MapShowRoads=new PropertyType("options/showRoads",PropertyTypeAccess.User,!0,__("Show roads"),CheckBox_7.default);PropertyType.MapShowLandmarks=new PropertyType("options/showLandmarks",PropertyTypeAccess.User,!0,__("Show landmarks"),CheckBox_7.default);PropertyType.MapShowLabels=new PropertyType("options/showLabels",PropertyTypeAccess.User,!0,__("Show labels"),CheckBox_7.default);PropertyType.GoogleCalendarBackgroundColor=new PropertyType("options/googleCalendarBackgroundColor",PropertyTypeAccess.User,!0,__("Background color"),ColorPicker_9.ColorPicker);PropertyType.GoogleCalendarViewMode=new PropertyType("options/googleCalendarViewMode",PropertyTypeAccess.User,!0,__("View mode"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:"WEEK",label:__("Week")},{value:"MONTH",label:__("Month")},{value:"AGENDA",label:__("Agenda")},],});PropertyType.GoogleCalendarBorder=new PropertyType("options/googleCalendarBorder",PropertyTypeAccess.User,!0,__("Border"),CheckBox_7.default);PropertyType.GoogleCalendarTitle=new PropertyType("options/googleCalendarTitle",PropertyTypeAccess.User,!0,__("Title"),CheckBox_7.default);PropertyType.GoogleCalendarNavigation=new PropertyType("options/googleCalendarNavigation",PropertyTypeAccess.User,!0,__("Navigation"),CheckBox_7.default);PropertyType.GoogleCalendarDate=new PropertyType("options/googleCalendarDate",PropertyTypeAccess.User,!0,__("Date"),CheckBox_7.default);PropertyType.GoogleCalendarPrintIcon=new PropertyType("options/googleCalendarPrintIcon",PropertyTypeAccess.User,!0,__("Print icon"),CheckBox_7.default);PropertyType.GoogleCalendarTabs=new PropertyType("options/googleCalendarTabs",PropertyTypeAccess.User,!0,__("Tabs"),CheckBox_7.default);PropertyType.GoogleCalendarList=new PropertyType("options/googleCalendarList",PropertyTypeAccess.User,!0,__("List"),CheckBox_7.default);PropertyType.GoogleCalendarShowTimezone=new PropertyType("options/googleCalendarShowTimezone",PropertyTypeAccess.User,!0,__("Time zone"),CheckBox_7.default);PropertyType.FlagBorders=new PropertyType("flags/border",PropertyTypeAccess.User,!0,__("Inactive border"),BorderControl_5.BorderControl,null,{noTransparent:!1,showRadius:!0,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.FlagActiveBorder=new PropertyType("flags/activeBorder",PropertyTypeAccess.User,!0,__("Active border"),BorderControl_5.BorderControl,null,{noTransparent:!1,showRadius:!0,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.IndividualShadowFlags=new PropertyType("flags/individualShadowFlags",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{});PropertyType.FlagSize=new PropertyType("flags/size",PropertyTypeAccess.User,!0,__("Size"),DropdownBox_6.DropdownBox).inline(6);PropertyType.FlagSpacing=new PropertyType("flags/spacing",PropertyTypeAccess.User,!0,__("Spacing (px)"),DropdownBox_6.DropdownBox,null,{options:[{id:0,name:"0"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"},],}).inline(6);PropertyType.FlagSquare=new PropertyType("flags/square",PropertyTypeAccess.User,!0,__("Use square flags"),CheckBox_7.default);PropertyType.YouTubeVideoId=new PropertyType("youtube/youTubeVideoId",PropertyTypeAccess.User,!0,__("Youtube URL or ID"),TextField_5.TextField,null,{placeholder:"LXb3EKWsInQ "});PropertyType.VideoStartTime=new PropertyType("youtube/startTime",PropertyTypeAccess.User,!0,__("Start at"),TextField_5.TextField,null,{placeholder:"00:00"});PropertyType.VideoEndTime=new PropertyType("youtube/endTime",PropertyTypeAccess.User,!0,__("End at"),TextField_5.TextField,null,{placeholder:"00:00"});PropertyType.VideoPlayerControls=new PropertyType("youtube/playerControls",PropertyTypeAccess.User,!0,__("Show player controls"),CheckBox_7.default);PropertyType.YouTubeUseNoCookieDomain=new PropertyType("youtube/youTubeUseNoCookieDomain",PropertyTypeAccess.User,!0,__("Use nocookie domain"),CheckBox_7.default,null,{helpText:__('for GDPR compliance')});PropertyType.VideoUrl=new PropertyType("video/url",PropertyTypeAccess.User,!0,__("Video"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{mode:'video',multiselect:!1,mediatabs:!1,usePictureManager:!1}).inline(6);PropertyType.VideoPosterUrl=new PropertyType("video/posterUrl",PropertyTypeAccess.User,!0,__("Thumbnail"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,usePictureManager:!1}).inline(6);PropertyType.VideoControls=new PropertyType("video/showControls",PropertyTypeAccess.User,!0,__("Show player controls"),CheckBox_7.default);PropertyType.VideoAutoPlay=new PropertyType("video/autoPlay",PropertyTypeAccess.User,!0,__('Autoplay'),CheckBox_7.default);PropertyType.VideoLoop=new PropertyType("video/loop",PropertyTypeAccess.User,!0,__('Loop'),CheckBox_7.default);PropertyType.VideoMuted=new PropertyType("video/muted",PropertyTypeAccess.User,!0,__('Muted'),CheckBox_7.default);PropertyType.MusicPlaylist=new PropertyType("music/playlist",PropertyTypeAccess.User,!0,__('MP3 file(s)'),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{mode:'audio',multiselect:!0,thumbSize:60,mediatabs:!1}).inline(6);PropertyType.MusicControlsBg=new PropertyType("music/bg",PropertyTypeAccess.User,!0,__('Background'),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.MusicAutoStart=new PropertyType("music/autoStart",PropertyTypeAccess.User,!0,__("Start playing when page is loaded"),CheckBox_7.default,null,{helpText:__('This option may not work properly on some browsers.')});PropertyType.MusicControlsColor=new PropertyType("controls/controlsColor",PropertyTypeAccess.User,!0,'',ButtonStyleControl_2.ButtonStyleControl,null,{useColor:!0,useShadows:!1,useStyle:!1,useBorder:!1,useBackground:!1});PropertyType.MusicListColor=new PropertyType("listing/controlsColor",PropertyTypeAccess.User,!0,'',ButtonStyleControl_2.ButtonStyleControl,null,{useColor:!0,useShadows:!1,useStyle:!1,useBorder:!1,useBackground:!0,useOnlyBackgroundColor:!0});PropertyType.Image=new PropertyType("image/image",PropertyTypeAccess.User,!1,__("Picture"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:140,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1});PropertyType.ImageOpacity=new PropertyType("image/opacity",PropertyTypeAccess.User,!0,__("Opacity (%)"),SliderControl_4.SliderControl,null,{min:0,max:100});PropertyType.ImageAlt=new PropertyType("image/imageAlt",PropertyTypeAccess.User,!0,__("Alternative Text"),MultilangTextField_2.default,null,{helpText:__('Information for an image if a user for some reason cannot view it'),});PropertyType.NoPhotoImage=new PropertyType("images/noPhotoImage",PropertyTypeAccess.User,!1,__("No-photo Image"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1}).inline(6);PropertyType.WatermarkImage=new PropertyType("images/watermarkImage",PropertyTypeAccess.User,!1,__("Watermark Image"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:60,mediatabs:!0,fontAwesomeTab:!1,usePictureManager:!1,helpText:__('Please avoid using image bigger than 1000x1000 pixels for watermark. Too big image may cause errors while trying to preview or publish website.')}).inline(6);PropertyType.StoreImageBorder=new PropertyType("images/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.AnimationStoreItems=new PropertyType("images/animation",PropertyTypeAccess.User,!1,__('Animation'),AnimationDialogControl_1.AnimationDialogControl,void 0,{}).inline(6);PropertyType.DetailsImageWidth=new PropertyType("images/Images/storeImageWidth",PropertyTypeAccess.User,!0,__("Width"),SizeSelector_10.SizeSelector,null,{min:10,hideSpinner:!0,units:'px'}).inline(6);PropertyType.DetailsImageHeight=new PropertyType("images/Images/storeImageHeight",PropertyTypeAccess.User,!0,__("Height"),SizeSelector_10.SizeSelector,null,{min:10,hideSpinner:!0,units:'px'}).inline(6);PropertyType.ListImageWidth=new PropertyType("images/Thumbnails/storeThumbnailWidth",PropertyTypeAccess.User,!0,__("Width"),SizeSelector_10.SizeSelector,null,{min:10,hideSpinner:!0,units:'px'}).inline(6);PropertyType.ListImageHeight=new PropertyType("images/Thumbnails/storeThumbnailHeight",PropertyTypeAccess.User,!0,__("Height"),SizeSelector_10.SizeSelector,null,{min:10,hideSpinner:!0,units:'px'}).inline(6);PropertyType.ListImageNumber=new PropertyType("images/Thumbnails/storeThumbnailNumber",PropertyTypeAccess.User,!0,__("Number in slider"),SizeSelector_10.SizeSelector,null,{min:1,max:4}).inline(6);PropertyType.IconColor=new PropertyType("image/iconColor",PropertyTypeAccess.User,!0,__("Icon color"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.ImageBorder=new PropertyType("image/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.IndividualShadowPicture=new PropertyType("image/individualShadowPicture",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{}).inline(6);PropertyType.ImageBorderRadius=new PropertyType("image/borderRadius",PropertyTypeAccess.User,!0,__("Rounded corners"),RoundCornersControl_1.RoundCornersControl);PropertyType.ImageCrop=new PropertyType("image/crop",PropertyTypeAccess.User,!1,"",null);PropertyType.OnClickAction=new PropertyType("image/action",PropertyTypeAccess.User,!0,"",RadioBoxGroupControl_2.RadioBoxGroupControl);PropertyType.OnClickLink=new PropertyType("image/link",PropertyTypeAccess.User,!0,__(""),URLControl_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new URLControl_2.default())},{multilang:!0});PropertyType.StoreWebsiteCategory=new PropertyType("listing/websiteCategory",PropertyTypeAccess.User,!0,__('Category'),DropdownBox_6.DropdownBox);PropertyType.ItemsPerPage=new PropertyType("listing/itemsPerPage",PropertyTypeAccess.User,!0,__("Items per page"),SizeSelector_10.SizeSelector,null,{min:1,max:100,hideSpinner:!0}).inline(6);PropertyType.ListingMaxDescriptionLength=new PropertyType("listing/maxDescriptionLength",PropertyTypeAccess.User,!0,__('Description length'),SizeSelector_10.SizeSelector,null,{helpText:__('Symbols'),hideSpinner:!0}).inline(6);PropertyType.StoreShowSorting=new PropertyType("listing/showSorting",PropertyTypeAccess.User,!0,__('Show sorting dropdown'),CheckBox_7.default);PropertyType.StoreShowViewSwitch=new PropertyType("listing/showViewSwitch",PropertyTypeAccess.User,!0,__('Show item list view switch'),CheckBox_7.default);PropertyType.StoreShowAddToCartButtonInList=new PropertyType("listing/showAddToCartInList",PropertyTypeAccess.User,!0,__('Show "%s" button').replace('%s',__('Add to cart')),CheckBox_7.default);PropertyType.StoreShowBuyNowButtonInList=new PropertyType("listing/showBuyNowInList",PropertyTypeAccess.User,!0,__('Show "%s" button').replace('%s',__('Buy Now')),CheckBox_7.default);PropertyType.StoreShowDates=new PropertyType("listing/showDates",PropertyTypeAccess.User,!0,__('Show created/modified dates'),CheckBox_7.default);PropertyType.StoreShowItemId=new PropertyType("listing/showItemId",PropertyTypeAccess.User,!0,__('Show item ID in details page'),CheckBox_7.default);PropertyType.ListingShowTitle=new PropertyType("listing/showTitle",PropertyTypeAccess.User,!0,__('Display title'),CheckBox_7.default);PropertyType.ListingShowDates=new PropertyType("listing/showDates",PropertyTypeAccess.User,!0,__('Display date'),CheckBox_7.default);PropertyType.ListingShowDescription=new PropertyType("listing/showDescription",PropertyTypeAccess.User,!0,__('Display description'),CheckBox_7.default);PropertyType.ListingShowNoPhotoPlaceholder=new PropertyType("listing/showNoPhotoPlaceholder",PropertyTypeAccess.User,!0,__('Display "No-photo" placeholder'),CheckBox_7.default);PropertyType.UseThumbnails=new PropertyType("thumbnails/useThumbnails",PropertyTypeAccess.User,!0,__('Use thumbnails'),CheckBox_7.default);PropertyType.StoreFilterPosition=new PropertyType("filter/position",PropertyTypeAccess.User,!0,__("Filter position"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:"top",label:__("Top")},{value:"left",label:__("Left")},{value:"right",label:__("Right")},],});PropertyType.StoreShowTextFilter=new PropertyType("filter/showTextFilter",PropertyTypeAccess.User,!0,__('Show text search filter'),CheckBox_7.default);PropertyType.StoreShowPriceFilter=new PropertyType("filter/showPriceFilter",PropertyTypeAccess.User,!0,__('Show price filter'),CheckBox_7.default);PropertyType.StoreShowProductFilter=new PropertyType("filter/showProductFilter",PropertyTypeAccess.User,!0,__('Show product filter'),CheckBox_7.default);PropertyType.StoreDefaultSort=new PropertyType("filter/defaultSort",PropertyTypeAccess.User,!0,__("Default product sorting"),DropdownBox_6.DropdownBox,null,{options:[{id:"none",name:__("None")},{id:"priceLowHigh",name:__("Price (low to high)")},{id:"priceHighLow",name:__("Price (high to low)")},{id:"dateNewOld",name:__("Date")},],});PropertyType.ThumbnailWidth=new PropertyType("thumbnails/_no_name_size/width",PropertyTypeAccess.User,!0,__("Width"),SizeSelector_10.SizeSelector,null,{min:10,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6);PropertyType.ThumbnailHeight=new PropertyType("thumbnails/_no_name_size/height",PropertyTypeAccess.User,!0,__("Height"),SizeSelector_10.SizeSelector,null,{min:10,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6);PropertyType.ThumbnailPadding=new PropertyType("thumbnails/_no_name_padal/padding",PropertyTypeAccess.User,!0,__("Padding"),SizeSelector_10.SizeSelector,null,{min:0,max:999,step:1,precision:0,units:"px",hideSpinner:!0}).inline(6);PropertyType.ThumbnailAlignment=new PropertyType("thumbnails/_no_name_padal/alignment",PropertyTypeAccess.User,!0,__("Align"),HAlignSelector_3.HAlignSelector,null,{justify:!1}).inline(6);PropertyType.ThumbnailBorder=new PropertyType("thumbnails/_no_name_shadbor/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{noTransparent:!1,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline(6);PropertyType.ThumbnailShadow=new PropertyType("thumbnails/_no_name_shadbor/shadow",PropertyTypeAccess.User,!1,__('Shadow'),ShadowDialogControl_4.ShadowDialogControl,function(){return new ShadowDialogControl_4.ShadowDialogControl(undefined,!1)}).inline(6);PropertyType.ThumbnailAnimation=new PropertyType("thumbnails/animation",PropertyTypeAccess.User,!1,__('Animation'),AnimationControl_2.AnimationControl);PropertyType.SlideShowInterval=new PropertyType("slideShow/interval",PropertyTypeAccess.User,!0,__("Change frequency (s)"),SliderControl_4.SliderControl,null,{min:0,max:10,unit:'s',helpText:__('Enter 0 seconds to disable automatic image changing')});PropertyType.SlideShowSpeed=new PropertyType("slideShow/speed",PropertyTypeAccess.User,!0,__("Transition duration (s)"),SliderControl_4.SliderControl,null,{min:0,max:10,precision:2,step:0.05,unit:'s',helpText:__('Enter 0 to switch slides instantly')});PropertyType.SlideOpacity=new PropertyType("slideShow/opacity",PropertyTypeAccess.User,!0,__("Slide opacity (%)"),SliderControl_4.SliderControl,null,{min:1,max:100});PropertyType.CaptionsDisplay=new PropertyType("captions/display",PropertyTypeAccess.User,!0,__("Show picture caption"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:"always",label:__("Always")},{value:"hover",label:__("On mouse hover")},{value:"none",label:__("No captions")},],});PropertyType.CaptionsIncludeDescription=new PropertyType("captions/includeDescription",PropertyTypeAccess.User,!0,__("Include description"),CheckBox_7.default,null);PropertyType.CaptionsBackgroundColor=new PropertyType("captions/backgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.CaptionsPosition=new PropertyType("captions/position",PropertyTypeAccess.User,!0,__("Position"),AlignSelector_2.AlignSelector,null,{disableOptions:["left top","right top","left center","right center","left bottom","right bottom",]}).inline(6);PropertyType.CaptionsTitleStyle=new PropertyType("captions/titleStyle",PropertyTypeAccess.User,!0,__("Picture title style"),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0},!1);PropertyType.CaptionsDescriptionStyle=new PropertyType("captions/titleStyle",PropertyTypeAccess.User,!0,__("Picture description style"),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0},!1);PropertyType.LightboxBackgroundColor=new PropertyType("lightbox/backgroundColor",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null,{big:!0}).inline(6);PropertyType.LightboxTitleStyle=new PropertyType("lightbox/titleStyle",PropertyTypeAccess.User,!0,__("Title"),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0},!1);PropertyType.LightboxDescriptionStyle=new PropertyType("lightbox/titleStyle",PropertyTypeAccess.User,!0,__("Description"),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0},!1);PropertyType.GalleryControlsThumbnailArrow=new PropertyType("galleryControls/thumbnail/arrow",PropertyTypeAccess.User,!0,__('Controls'),DropdownBox_6.DropdownBox,null,{noSearch:!0}).inline(6);PropertyType.GalleryControlsThumbnailArrowSize=new PropertyType("galleryControls/thumbnail/arrowSize",PropertyTypeAccess.User,!0,__('Size'),SizeSelector_10.SizeSelector,null,{min:8,units:'px',hideSpinner:!0}).inline(6);PropertyType.GalleryControlsThumbnailArrowStyle=new PropertyType("galleryControls/thumbnail/arrowStyle",PropertyTypeAccess.User,!0,__('Controls'),ButtonStyleControl_2.ButtonStyleControl,null,{singleBorder:!1,showRadius:!1,useShadows:!0,useBackground:!1,useStyle:!1,useBorder:!1,shadowForText:!0});PropertyType.GalleryControlsLightboxArrow=new PropertyType("galleryControls/lightbox/arrow",PropertyTypeAccess.User,!0,__('Controls'),DropdownBox_6.DropdownBox,null,{noSearch:!0}).inline(6);PropertyType.GalleryControlsLightboxArrowSize=new PropertyType("galleryControls/lightbox/arrowSize",PropertyTypeAccess.User,!0,__('Size'),SizeSelector_10.SizeSelector,null,{min:8,units:'px',hideSpinner:!0}).inline(6);PropertyType.GalleryControlsLightboxArrowStyle=new PropertyType("galleryControls/lightbox/arrowStyle",PropertyTypeAccess.User,!0,'',ButtonStyleControl_2.ButtonStyleControl,null,{singleBorder:!1,showRadius:!1,useShadows:!0,useBackground:!1,useStyle:!1,useBorder:!1,shadowForText:!0});PropertyType.TitleStyleCombined=new PropertyType("text/titleStyleCombined",PropertyTypeAccess.User,!0,__('Title style'),TextControl_3.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1);PropertyType.AccordionTitleSpacing=new PropertyType("text/titleSpacing",PropertyTypeAccess.User,!0,__('Title spacing'),SpacingDialogControl_1.SpacingDialogControl,null,{noMargin:!0},!1).inline(6);PropertyType.AccordionTextSpacing=new PropertyType("text/textSpacing",PropertyTypeAccess.User,!0,__('Text spacing'),SpacingDialogControl_1.SpacingDialogControl,null,{noMargin:!0},!1).inline(6);PropertyType.TextLineHeight=new PropertyType("text/textLineHeight",PropertyTypeAccess.User,!0,__("Line height"),SizeSelector_10.SizeSelector,null,{min:1,max:9999});PropertyType.TextAlignment=new PropertyType("text/textAlignment",PropertyTypeAccess.User,!0,__("Align"),HAlignSelector_3.HAlignSelector,null,{justify:!1});PropertyType.TextStyle=new PropertyType("text/textStyle",PropertyTypeAccess.User,!0,__("Style"),FontStyleSelector_3.FontStyleSelector);PropertyType.PrimaryColor=new PropertyType("text/primaryColor",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker);PropertyType.DateStyleCombined=new PropertyType("text/dateStyleCombined",PropertyTypeAccess.User,!0,__('Date style'),TextControl_3.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1);PropertyType.StoreNameStyle=new PropertyType("style/storeNameStyle",PropertyTypeAccess.User,!0,__('Name'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0,isTag:!0},!1);PropertyType.StorePriceStyle=new PropertyType("style/storePriceStyle",PropertyTypeAccess.User,!0,__('Price'),TextControl_3.TextControl,null,{ttplacement:"top",horizontal:!0},!1);PropertyType.StoreLabelStyle=new PropertyType("style/storeLabelStyle",PropertyTypeAccess.User,!0,__('Label Style'),TextControl_3.TextControl,null,{ttplacement:"top",noAlign:!0,horizontal:!0},!1);PropertyType.StoreDescStyle=new PropertyType("style/storeDescStyle",PropertyTypeAccess.User,!0,__('Description'),TextControl_3.TextControl,null,{ttplacement:"top",noAlign:!0,horizontal:!0},!1);PropertyType.StoreSysTextStyle=new PropertyType("style/storeSysTextStyle",PropertyTypeAccess.User,!0,__('System Text Style'),TextControl_3.TextControl,null,{ttplacement:"top",noAlign:!0,horizontal:!0},!1);PropertyType.StoreCartTextStyle=new PropertyType("style/textStyleCombined",PropertyTypeAccess.User,!0,__('Store Cart'),TextControl_3.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1);PropertyType.TextStyleCombined=new PropertyType("text/textStyleCombined",PropertyTypeAccess.User,!0,__('Text style'),TextControl_3.TextControl,null,{needLineHeight:!0,ttplacement:"top",horizontal:!0},!1);PropertyType.SharingButtonSize=new PropertyType("share/buttonSize",PropertyTypeAccess.User,!0,__("Size"),DropdownBox_6.DropdownBox,null,{options:[{name:__('16x16'),id:'16x16'},{name:__('32x32'),id:'32x32'},{name:__('64x64'),id:'64x64'},],});PropertyType.SharingButtonStyle=new PropertyType("share/buttonStyle",PropertyTypeAccess.User,!0,__("Button style"),DropdownBox_6.DropdownBox,null,{options:[{name:__('Colored'),id:'colored'},{name:__('Monochrome'),id:'monochrome'},],});PropertyType.SharingButtonColor=new PropertyType("share/buttonColor",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker,null).inline(6);PropertyType.SharingButtonBg=new PropertyType("share/buttonBg",PropertyTypeAccess.User,!0,__("Background"),ColorPicker_9.ColorPicker,null).inline(6);PropertyType.SharingEnableFacebook=new PropertyType("share/enableFacebook",PropertyTypeAccess.User,!0,__("Facebook"),CheckBox_7.default);PropertyType.SharingEnableTwitter=new PropertyType("share/enableTwitter",PropertyTypeAccess.User,!0,__("Twitter"),CheckBox_7.default);PropertyType.SharingEnableVKontakte=new PropertyType("share/enableVKontakte",PropertyTypeAccess.User,!0,__("VKontakte"),CheckBox_7.default);PropertyType.SharingEnableOdnoklassniki=new PropertyType("share/enableOdnoklassniki",PropertyTypeAccess.User,!0,__("Odnoklassniki"),CheckBox_7.default);PropertyType.SharingEnableEmail=new PropertyType("share/enableEmail",PropertyTypeAccess.User,!0,__("Email"),CheckBox_7.default);PropertyType.SharingEnableGoogle=new PropertyType("share/enableGoogle",PropertyTypeAccess.User,!0,__("Google"),CheckBox_7.default);PropertyType.SharingEnablePrint=new PropertyType("share/enablePrint",PropertyTypeAccess.User,!0,__("Print"),CheckBox_7.default);PropertyType.SharingEnableLinkedIn=new PropertyType("share/enableLinkedIn",PropertyTypeAccess.User,!0,__("LinkedIn"),CheckBox_7.default);PropertyType.SharingEnableTelegram=new PropertyType("share/enableTelegram",PropertyTypeAccess.User,!0,__("Telegram"),CheckBox_7.default);PropertyType.SharingEnablePinterest=new PropertyType("share/enablePinterest",PropertyTypeAccess.User,!0,__("Pinterest"),CheckBox_7.default);PropertyType.SharingEnableWhatsapp=new PropertyType("share/enableWhatsapp",PropertyTypeAccess.User,!0,__("Whatsapp"),CheckBox_7.default);PropertyType.SharingEnableReddit=new PropertyType("share/enableReddit",PropertyTypeAccess.User,!0,__("Reddit"),CheckBox_7.default);PropertyType.SharingEnableTumblr=new PropertyType("share/enableTumblr",PropertyTypeAccess.User,!0,__("Tumblr"),CheckBox_7.default);PropertyType.ShapeElementBackground=new PropertyType("shape/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl).inline();PropertyType.ShapeElementBgBorder=new PropertyType("shape/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline();PropertyType.IndividualShadowShape=new PropertyType("shape/individualShadowShape",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{}).inline(6);PropertyType.ShapeOnClickLink=new PropertyType("shape/link",PropertyTypeAccess.User,!0,__("URL"),URLControl_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new URLControl_2.default())},{multilang:!0});PropertyType.ElementBackgroundColor=new PropertyType("background/backgroundColor",PropertyTypeAccess.User,!0,__("Background color"),ColorPicker_9.ColorPicker);PropertyType.ElementBackground=new PropertyType("background/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl).inline();PropertyType.ElementBgBorder=new PropertyType("background/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{showRadius:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},}).inline();PropertyType.ElementBgBorderRadius=new PropertyType("background/borderRadius",PropertyTypeAccess.User,!0,__("Rounded corners"),RoundCornersControl_1.RoundCornersControl);PropertyType.ElementBorder=new PropertyType("border/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{noTransparent:!1,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},});PropertyType.ElementBorderColor=new PropertyType("border/borderColor",PropertyTypeAccess.User,!0,__("Border color"),ColorPicker_9.ColorPicker);PropertyType.ElementBorderRadius=new PropertyType("border/borderRadius",PropertyTypeAccess.User,!0,__("Rounded corners"),RoundCornersControl_1.RoundCornersControl);PropertyType.LineOrientation=new PropertyType("line/lineOrientation",PropertyTypeAccess.User,!0,__("Orientation"),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{options:[{value:1,label:__("Horizontal")},{value:0,label:__("Vertical")},],});PropertyType.LineStyle=new PropertyType("line/lineStyle",PropertyTypeAccess.User,!0,__("Style"),LineStyleControl_2.LineStyleControl).inline();PropertyType.LineSize=new PropertyType("line/lineSize",PropertyTypeAccess.User,!0,__("Size"),SizeSelector_10.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:'px'}).inline();PropertyType.LineColor=new PropertyType("line/lineColor",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker,null,{big:!0});PropertyType.LinkExchangeBadgeType=new PropertyType("general/linkExchangeBadgeType",PropertyTypeAccess.User,!0,__("Widget type"),RadioBoxGroupControl_2.RadioBoxGroupControl);PropertyType.NormalItemTextStyle=new PropertyType("normalItem/textStyle",PropertyTypeAccess.User,!0,__("Style"),FontStyleSelector_3.FontStyleSelector);PropertyType.NormalItemColor=new PropertyType("normalItem/color",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker);PropertyType.NormalItemBackground=new PropertyType("normalItem/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl);PropertyType.NormalItemBorder=new PropertyType("normalItem/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},});PropertyType.OnHoverTextStyle=new PropertyType("onHover/textStyle",PropertyTypeAccess.User,!0,__("Style"),FontStyleSelector_3.FontStyleSelector);PropertyType.OnHoverColor=new PropertyType("onHover/color",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker);PropertyType.OnHoverBackground=new PropertyType("onHover/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl);PropertyType.OnHoverBorder=new PropertyType("onHover/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},});PropertyType.ActiveTextStyle=new PropertyType("active/textStyle",PropertyTypeAccess.User,!0,__("Style"),FontStyleSelector_3.FontStyleSelector);PropertyType.ActiveColor=new PropertyType("active/color",PropertyTypeAccess.User,!0,__("Color"),ColorPicker_9.ColorPicker);PropertyType.ActiveBackground=new PropertyType("active/background",PropertyTypeAccess.User,!0,__("Background"),BackgroundControl_6.BackgroundControl);PropertyType.ActiveBorder=new PropertyType("active/border",PropertyTypeAccess.User,!0,__("Border"),BorderControl_5.BorderControl,null,{noTransparent:!0,showRadius:!1,absPopover:!0,configSuplier:function(){return{width:this.getWidthInPixels(),height:this.getHeightInPixels()}},});PropertyType.BannerImage=new PropertyType("banner/bannerImage",PropertyTypeAccess.User,!1,__("Picture"),ImagePicker_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new ImagePicker_2.default())},{multiselect:!1,thumbSize:140,mediatabs:!0,fontAwesomeTab:!0,usePictureManager:!1});PropertyType.CustomUrl=new PropertyType("general/customUrl",PropertyTypeAccess.User,!0,__("URL"),TextField_5.TextField);PropertyType.BannerCustomUrl=new PropertyType("banner/customUrl",PropertyTypeAccess.User,!0,__("URL"),TextField_5.TextField);PropertyType.ScriptSourceCode=new PropertyType("banner/sourceCode",PropertyTypeAccess.User,!0,__("Script"),ScriptEditorControl_1.ScriptEditorControl,null,{big:!0});PropertyType.BannerDeactivateInBuilder=new PropertyType("banner/bannerDeactivateInBuilder",PropertyTypeAccess.User,!0,__('Deactivate content while in builder (recomended)'),CheckBox_7.default,null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder."),});PropertyType.GoogleAdSenseSourceCode=new PropertyType("adSense/googleAdSenseSourceCode",PropertyTypeAccess.User,!0,__("HTML code"),ScriptEditorControl_1.ScriptEditorControl,null,{big:!0});PropertyType.GoogleAdSenseDeactivateInBuilder=new PropertyType("adSense/googleAdSenseDeactivateInBuilder",PropertyTypeAccess.User,!0,__('Deactivate content while in builder (recomended)'),CheckBox_7.default,null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder."),});PropertyType.CustomHtmlSourceCode=new PropertyType("custom Html/customHtmlSourceCode",PropertyTypeAccess.User,!0,__("HTML code"),ScriptEditorControl_1.ScriptEditorControl,null,{big:!0,useMedia:!0});PropertyType.ScriptDeactivateInBuilder=new PropertyType("general/deactivateInBuilder",PropertyTypeAccess.User,!0,__('Deactivate content while in builder (recomended)'),CheckBox_7.default,null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder."),});PropertyType.CustomHTMLScriptDeactivateInBuilder=new PropertyType("custom Html/deactivateInBuilder",PropertyTypeAccess.User,!0,__('Deactivate content while in builder (recomended)'),CheckBox_7.default,null,{helpText:__("Some scripts may interfere with a Zyro Builder, so it's recomended to deactivate them. Failing to do so may result in inaccessable page in builder."),});PropertyType.CustomHtmlAutoHeight=new PropertyType("general/customHtmlAutoHeight",PropertyTypeAccess.User,!0,__('Auto height (experimental)'),CheckBox_7.default,null,{helpText:__("This will allow element to expand depending on content."),});PropertyType.IndividualShadow=new PropertyType("general/individualShadow",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{});PropertyType.IndividualShadowLayout=new PropertyType("layout/individualShadowLayout",PropertyTypeAccess.User,!0,__("Shadow"),ShadowDialogControl_4.ShadowDialogControl,null,{});PropertyType.SmtpEnabled=new PropertyType("smtp/enabled",PropertyTypeAccess.User,!0,__("SMTP Enable"),CheckBox_7.default);PropertyType.SmtpHost=new PropertyType("smtp/host",PropertyTypeAccess.User,!0,__("SMTP Host"),TextField_5.TextField);PropertyType.SmtpPort=new PropertyType("smtp/port",PropertyTypeAccess.User,!0,__("SMTP Port"),TextField_5.TextField);PropertyType.SmtpEncryption=new PropertyType("smtp/encryption",PropertyTypeAccess.User,!0,__('SMTP Encryption'),RadioBoxGroupControl_2.RadioBoxGroupControl,null,{direction:RadioBoxGroupControl_2.RadioBoxGroupDirection.Row,options:[{value:null,label:__("None")},{value:"tls",label:__("TLS")},{value:"ssl",label:__("SSL")},],});PropertyType.SmtpUsername=new PropertyType("smtp/username",PropertyTypeAccess.User,!0,__("SMTP Username"),TextField_5.TextField);PropertyType.SmtpPassword=new PropertyType("smtp/password",PropertyTypeAccess.User,!0,__("SMTP Password"),TextField_5.TextField,null,{password:!0});PropertyType.CaptchaVersion=new PropertyType("captcha/version",PropertyTypeAccess.User,!0,__('Google reCAPTCHA type'),DropdownBox_6.DropdownBox,null,{options:[{id:"v2",name:__("I'm not a robot")},{id:"v3",name:__("Invisible")},],});PropertyType.CaptchaSiteKey=new PropertyType("captcha/siteKey",PropertyTypeAccess.User,!0,__("Site key"),TextField_5.TextField,null,{helpText:__('Go to %s and register new site to get keys.').replace('%s','<a href="https://www.google.com/recaptcha/" target="_blank">Google ReCaptcha</a>'),});PropertyType.CaptchaSecretKey=new PropertyType("captcha/secretKey",PropertyTypeAccess.User,!0,__("Secret key"),TextField_5.TextField);PropertyType.ElementPositionLeft=new PropertyType("position/position/left",PropertyTypeAccess.User,!0,__("From left"),SizeSelector_10.SizeSelector,null,{min:-9999,max:9999});PropertyType.ElementPositionTop=new PropertyType("position/position/top",PropertyTypeAccess.User,!0,__("From top"),SizeSelector_10.SizeSelector,null,{min:-9999,max:99999});PropertyType.ElementPositionSticky=new PropertyType("layout/position/sticky",PropertyTypeAccess.User,!0,__("Sticky"),CheckBox_7.default);PropertyType.StickyAlignment=new PropertyType("layout/position/stickyAlign",PropertyTypeAccess.User,!0,__("Align"),AlignSelector_2.AlignSelector,null,{disableOptions:["center center"]});PropertyType.ElementWidth=new PropertyType("position/size/_width/width",PropertyTypeAccess.User,!0,__("Width"),SizeSelector_10.SizeSelector);PropertyType.ElementHeight=new PropertyType("position/size/_height/height",PropertyTypeAccess.User,!0,__("Height"),SizeSelector_10.SizeSelector,null,{max:99999});PropertyType.ElementKeepAspectRatio=new PropertyType("position/size/checkboxes/keepAspectRatio",PropertyTypeAccess.User,!0,__("Keep aspect ratio"),CheckBox_7.default);PropertyType.IsAutoSizeEnabled=new PropertyType("position/size/checkboxes/isAutoSizeEnabled",PropertyTypeAccess.User,!0,__("Allow to adjust size automatically"),CheckBox_7.default);PropertyType.UseMinWidth=new PropertyType("position/size/_width/min/useMinWidth",PropertyTypeAccess.User,!0,__("Min"),CheckBox_7.default,cbJumper);PropertyType.MinWidth=new PropertyType("position/size/_width/min/minWidth",PropertyTypeAccess.User,!0,"",SizeSelector_10.SizeSelector,null,{noFixedWidth:!0});PropertyType.UseMaxWidth=new PropertyType("position/size/_width/max/useMaxWidth",PropertyTypeAccess.User,!0,__("Max"),CheckBox_7.default,cbJumper);PropertyType.MaxWidth=new PropertyType("position/size/_width/max/maxWidth",PropertyTypeAccess.User,!0,"",SizeSelector_10.SizeSelector,null,{noFixedWidth:!0});PropertyType.UseMinHeight=new PropertyType("position/size/_height/min/useMinHeight",PropertyTypeAccess.User,!0,__("Min"),CheckBox_7.default,cbJumper);PropertyType.MinHeight=new PropertyType("position/size/_height/min/minHeight",PropertyTypeAccess.User,!0,"",SizeSelector_10.SizeSelector,null,{noFixedWidth:!0});PropertyType.UseMaxHeight=new PropertyType("position/size/_height/max/useMaxHeight",PropertyTypeAccess.User,!0,__("Max"),CheckBox_7.default,cbJumper);PropertyType.MaxHeight=new PropertyType("position/size/_height/max/maxHeight",PropertyTypeAccess.User,!0,"",SizeSelector_10.SizeSelector,null,{noFixedWidth:!0});PropertyType.IndividualMargin=new PropertyType("spacing/individualMargin",PropertyTypeAccess.User,!0,"",SpacingSelector_2.SpacingSelector,null,{useMargin:!0,allowNegativeMargin:!0});PropertyType.SpacingModeScaleFactors=new PropertyType("spacing/modeScaleFactors",PropertyTypeAccess.User,!0,__("Padding and margin scale factors"),UIModeScaleFactors_3.UIModeScaleFactors);PropertyType.VisibilityShowOnTv=new PropertyType("visibility/devices/showOnTv",PropertyTypeAccess.User,!0,__("Show on wide screen"),CheckBox_7.default,null,{icon:'fa fa-desktop'});PropertyType.VisibilityShowOnDesktop=new PropertyType("visibility/devices/showOnDesktop",PropertyTypeAccess.User,!0,__("Show on desktop"),CheckBox_7.default,null,{icon:'fa fa-laptop'});PropertyType.VisibilityShowOnTablet=new PropertyType("visibility/devices/showOnTablet",PropertyTypeAccess.User,!0,__("Show on tablet"),CheckBox_7.default,null,{icon:'fa fa-tablet'});PropertyType.VisibilityShowOnPhone=new PropertyType("visibility/devices/showOnPhone",PropertyTypeAccess.User,!0,__("Show on phone"),CheckBox_7.default,null,{icon:'fa fa-mobile'});PropertyType.Commonality=new PropertyType("visibility/pages/commonality",PropertyTypeAccess.User,!0,"",CommonalitySelectorControl_1.CommonalitySelectorControl);PropertyType.VisibilityPagesLanguages=new PropertyType("visibility/pages/pagesControl",PropertyTypeAccess.User,!0,__(''),PagesLanguagesVisibilityControl_1.PagesLanguagesVisibilityControl,null,{},!1);PropertyType.Animation=new PropertyType("animation/tabs",PropertyTypeAccess.User,!0,'',AnimationControl_2.AnimationControl,void 0,{});PropertyType.LayoutElementOnClickLink=new PropertyType("advanced/layoutLink",PropertyTypeAccess.User,!0,__("URL"),URLControl_2.default,function(){return UIComponent_58.UIComponent.wrapControl(new URLControl_2.default())},{multilang:!0,helpText:__('This whole block works as a big link if an URL is specified.')});PropertyType.Anchor=new PropertyType("advanced/anchor",PropertyTypeAccess.User,!1,__("Anchor name"),TextField_5.TextField,void 0,{helpText:__('Specify anchor name if you want to create a link to this element. For example if you specify value "apple" then you will be able to access this element with URL "yourwebsite.com/page-alias/#apple".')});PropertyType.ElemClassName=new PropertyType("advanced/classname",PropertyTypeAccess.User,!1,__("Class name"),TextField_5.TextField,void 0,{helpText:__('Specify class name only if you need to access this element per your custom %s code.').replace('%s','CSS/JavaScript')});PropertyType.Name=new PropertyType("advanced/name",PropertyTypeAccess.User,!1,__("Name"),TextField_5.TextField,void 0,{helpText:__('This property updates element name in page structure tree above.')});PropertyType.ReferenceId=new PropertyType("template/referenceId",PropertyTypeAccess.ComposerOrAdmin,!1,__("Reference ID"),TextField_5.TextField,void 0,{helpText:__('Element ID for use with website creation %sAPIs%s').replace('%s','<a href="https://site.pro/docs/api/#websites/create" target="_blank" style="text-decoration: underline;">').replace('%s','</a>'),});PropertyType.IsAdminLocked=new PropertyType("template/isAdminLocked",PropertyTypeAccess.Admin,!0,__("Locked by admin"),CheckBox_7.default,void 0,{helpText:'<div style="min-width: 180px;">'+__('If enabled, it will block element editing and deleting for clients who chooses this template.')+'<br />'+__('Be careful with this option. Enable it only if you 100% sure you want this element stay forever on all your clients\' websites.')+'</div>'});PropertyType.DebugMenuUID=new PropertyType("debug/menuUID",PropertyTypeAccess.Developer,!0,"menuUID",StaticTextControl_1.StaticTextControl,null,{syntaxHighlight:!0,monospace:!0});PropertyType.DebugObject=new PropertyType("debug/obj",PropertyTypeAccess.Developer,!0,"object",StaticTextControl_1.StaticTextControl,null,{syntaxHighlight:!0,monospace:!0});PropertyType.defaultOpenCategories=["accordion","Count Up","blog","content","general","layout","video","store","menu","button","gallery","image","map","spotify","instagram","vimeo",'Odnoklassniki','odnoklassniki share','vkontakte community','vkontakte like','vk','flickr','facebook comment','youku','pinterest','facebook fans','Facebook video','stripe','mercado','alipay','liqPay','webmoney','skrill','mollie','redsys','epaybg','dragonpay','braintree','easypay','payu','payumoney','epsilon','yandexkassa','payme','bepaid','robokassa','baokim','paysera','payfast','buy now','click evolution','assist','pagseguro','iyzico','2Checkout','webmoney widget','paytrail','kiwi QZ','webpay','klarna','paymentez','mellat','Google Calendar','tawk.to','countdown','olark','zendesk','getbutton','settings','getbutton - PRO','options','music','facebook like','youtube','background','form','share','google maps','yandex maps','bing maps','baidu maps','languages','store cart','twitter','table',"Skype I'm Online",'adSense','banner','custom Html','shape','line','rutube','aparat','Instagram video','smartarget','accordionitem','telegram','Mpesa','Coinpayments'];return PropertyType}())});define("js/util/MathUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MathUtil=void 0;var MathUtil=(function(){function MathUtil(){}
MathUtil.calcSizeInPixels=function(size,parentSize){if(typeof size==="number")
return size;var matches=size.match(/^(-?[0-9]+(?:\.[0-9]+)?)([a-z%]+)$/i);if(matches){size=parseFloat(matches[1]);if(isNaN(size))
return 0;switch(matches[2]){case "px":return size;case "%":return parentSize*size/100}}
return 0};return MathUtil}());exports.MathUtil=MathUtil});define("js/Rulers",["require","exports","jquery"],function(require,exports,jquery_68){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.RulerManagerInstance=exports.Ruler=void 0;var RulerManager=(function(){function RulerManager(){this.invalidationTimer=null;this.rulers=[]}
RulerManager.prototype.invalidate=function(){var _this=this;if(!this.invalidationTimer){this.invalidationTimer=setTimeout(function(){_this.render();_this.invalidationTimer=null},0)}
return this};RulerManager.prototype.render=function(){for(var _i=0,_a=this.rulers;_i<_a.length;_i++){var ruler=_a[_i];ruler.render()}
return this};RulerManager.prototype.addRuler=function(from,to,lineVisible){if(lineVisible===void 0){lineVisible=!0}
var ruler=new Ruler(from,to,lineVisible);this.rulers.push(ruler);this.invalidate();return ruler};RulerManager.prototype.removeRuler=function(ruler){var i=this.rulers.indexOf(ruler);if(i>=0){this.rulers.splice(i,1);ruler.onRemove()}
return this};RulerManager.prototype.clear=function(){for(var _i=0,_a=this.rulers;_i<_a.length;_i++){var ruler=_a[_i];ruler.onRemove()}
this.rulers=[];this.invalidate();return this};return RulerManager}());var Ruler=(function(){function Ruler(from,to,lineVisible){if(lineVisible===void 0){lineVisible=!0}
this.visible=!0;this.lineVisible=!0;this.renderedVisible=!1;this.hElem=null;this.vElem=null;this.hMeasurement=null;this.vMeasurement=null;this.lineVisible=lineVisible;this.set(from,to)}
Ruler.prototype.set=function(from,to){this.from=from;this.to=to;exports.RulerManagerInstance.invalidate();return this};Ruler.prototype.setVisible=function(visible){if(this.visible!=visible){this.visible=visible;exports.RulerManagerInstance.invalidate()}
return this};Ruler.prototype.render=function(){if(!wb_builder.bodyInstance)
return this;var delta;if(this.visible&&(this.from.x!==this.to.x||this.from.y!==this.to.y)){if(this.from.x!==this.to.x){if(!this.hElem){this.hElem=(0,jquery_68.default)('<div class="wb-ruler wb-ruler-horizontal">');this.hMeasurement=(0,jquery_68.default)('<div class="wb-ruler-measurement">');this.hElem.append(this.hMeasurement);if(!this.lineVisible)
this.hElem.addClass("wb-ruler-no-line");wb_builder.body.append(this.hElem)}
delta=Math.round(Math.abs(this.to.x-this.from.x));if(this.hMeasurement){this.hMeasurement.text(delta+"px");if(this.from.y<=this.to.y)
this.hMeasurement.removeClass("wb-ruler-measurement-bottom").addClass("wb-ruler-measurement-top");else this.hMeasurement.removeClass("wb-ruler-measurement-top").addClass("wb-ruler-measurement-bottom")}
this.hElem.removeClass("hidden").css({left:Math.min(this.from.x,this.to.x),top:this.from.y,width:delta})}else if(this.hElem)
this.hElem.addClass("hidden");if(this.from.y!==this.to.y){if(!this.vElem){this.vElem=(0,jquery_68.default)('<div class="wb-ruler wb-ruler-vertical">');this.vMeasurement=(0,jquery_68.default)('<div class="wb-ruler-measurement">');this.vElem.append(this.vMeasurement);if(!this.lineVisible)
this.vElem.addClass("wb-ruler-no-line");wb_builder.body.append(this.vElem)}
delta=Math.round(Math.abs(this.to.y-this.from.y));if(this.vMeasurement){this.vMeasurement.text(delta+"px");if(this.from.x<=this.to.x)
this.vMeasurement.removeClass("wb-ruler-measurement-left").addClass("wb-ruler-measurement-right");else this.vMeasurement.removeClass("wb-ruler-measurement-right").addClass("wb-ruler-measurement-left")}
this.vElem.removeClass("hidden").css({left:this.to.x,top:Math.min(this.from.y,this.to.y),height:delta})}else if(this.vElem)
this.vElem.addClass("hidden");}else{if(this.hElem)
this.hElem.addClass("hidden");if(this.vElem)
this.vElem.addClass("hidden");}
this.renderedVisible=this.visible;return this};Ruler.prototype.onRemove=function(){if(this.hElem){this.hElem.remove();this.hElem=null}
if(this.vElem){this.vElem.remove();this.vElem=null}};return Ruler}());exports.Ruler=Ruler;exports.RulerManagerInstance=new RulerManager()});define("js/RangeList",["require","exports","jquery"],function(require,exports,jquery_69){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.RangeList=void 0;var RangeList=(function(){function RangeList(){this.ranges=[]}
RangeList.prototype.add=function(newRange,checkIntersections,priorityCheckCallback){if(checkIntersections===void 0){checkIntersections=!0}
var addRange=!0;if(checkIntersections){if(priorityCheckCallback&&typeof priorityCheckCallback!=="function")
throw new Error("priorityCheckCallback must be a callable function when specified.");var range=void 0,prioritizedRange=void 0,secondaryRange=void 0,secondaryRanges=[];for(var idx=this.ranges.length-1;idx>=0;idx--){range=this.ranges[idx];if(newRange.to<range.from||newRange.from>range.to)
continue;prioritizedRange=priorityCheckCallback?priorityCheckCallback(newRange,range):newRange;if(prioritizedRange===range){if(newRange.from<range.from){if(newRange.to>range.to){secondaryRange=jquery_69.default.extend({},newRange);secondaryRange.from=range.to;secondaryRanges.push(secondaryRange)}
newRange.to=range.from}else{if(newRange.to<=range.to){addRange=!1;break}
newRange.from=range.to}}else{if(range.from<newRange.from){if(range.to>newRange.to){secondaryRange=jquery_69.default.extend({},range);secondaryRange.from=newRange.to;secondaryRanges.push(secondaryRange)}
range.to=newRange.from}else{if(range.to<=newRange.to){this.ranges.splice(idx,1)}else{range.from=newRange.to}}}}
if(secondaryRanges.length){for(var _i=0,secondaryRanges_1=secondaryRanges;_i<secondaryRanges_1.length;_i++){secondaryRange=secondaryRanges_1[_i];this.add(secondaryRange,checkIntersections,priorityCheckCallback)}}}
if(addRange)
this.ranges.push(newRange);};return RangeList}());exports.RangeList=RangeList});define("js/ElementMeasurementHelpers",["require","exports","js/RangeList","js/Rulers"],function(require,exports,RangeList_1,Rulers_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ElementMeasurementHelpers=exports.MeasurableElement=void 0;var MeasurableElement=(function(){function MeasurableElement(element){this.element=element}
MeasurableElement.prototype.getBounds=function(getOffsetInParent){if(getOffsetInParent===void 0){getOffsetInParent=!1}
var box=this.element.elem[0].getBoundingClientRect();var parentLeft=0,parentTop=0;if(getOffsetInParent){var parent_15=this.element.getParent();if(parent_15){var parentBox=parent_15.elem[0].getBoundingClientRect();parentLeft=box.left-parentBox.left;parentTop=box.top-parentBox.top}}
return{left:parentLeft,top:parentTop,pageLeft:box.left,pageTop:box.top,width:box.width,height:box.height,}};MeasurableElement.prototype.getParentWidth=function(){var parent=this.element.getParent();return parent?parent.getWidthInPixels():0};MeasurableElement.prototype.getParentHeight=function(){var parent=this.element.getParent();return parent?parent.getHeightInPixels():0};MeasurableElement.prototype.getAffectingElements=function(){var parent=this.element.getParent();var elements=parent?parent.getChildren():[];var affectingElements=[];for(var _i=0,elements_8=elements;_i<elements_8.length;_i++){var elem=elements_8[_i];if(elem===this.element||elem.isHidden()||elem.isHidden(!0))
continue;affectingElements.push(new MeasurableElement(elem))}
return affectingElements};return MeasurableElement}());exports.MeasurableElement=MeasurableElement;var ElementMeasurementHelpers=exports.ElementMeasurementHelpers=(function(){function ElementMeasurementHelpers(element){this.timeout=0;this.rulers=[];this.element=element}
ElementMeasurementHelpers.fromElement=function(element){return new ElementMeasurementHelpers(new MeasurableElement(element))};ElementMeasurementHelpers.prototype.show=function(){if(ElementMeasurementHelpers.disabled)
return;if(this.timeout)
this.hide();this.timeout=setTimeout(this.render.bind(this),500)};ElementMeasurementHelpers.prototype.hide=function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=0}
if(this.rulers.length)
Rulers_1.RulerManagerInstance.clear();};ElementMeasurementHelpers.prototype.update=function(fast){if(fast===void 0){fast=!1}
if(ElementMeasurementHelpers.disabled||this.timeout)
return;this.render(fast)};ElementMeasurementHelpers.prototype.render=function(fast){if(fast===void 0){fast=!1}
if(!wb_builder.bodyInstance)
return;wb_builder.bodyInstance.cacheBounds();this.timeout=0;var otherLeft,otherTop,otherRight,otherBottom,distance;var leftRanges=new RangeList_1.RangeList();var topRanges=new RangeList_1.RangeList();var rightRanges=new RangeList_1.RangeList();var bottomRanges=new RangeList_1.RangeList();var otherBounds,bounds=this.element.getBounds(!0);var left=Math.floor(bounds.pageLeft);var top=Math.floor(bounds.pageTop);var right=left+Math.floor(bounds.width);var bottom=top+Math.floor(bounds.height);var containerLeft=left-bounds.left;var containerTop=top-bounds.top;var containerRight=left+(this.element.getParentWidth(fast)-bounds.left);var containerBottom=top+(this.element.getParentHeight(fast)-bounds.top);if(left>containerLeft&&left-containerLeft<=ElementMeasurementHelpers.MAX_HORIZONTAL_DISTANCE){leftRanges.add({from:Math.max(top,containerTop),to:Math.min(bottom,containerBottom),offset:containerLeft,distance:left-containerLeft},!0,ElementMeasurementHelpers.checkRangePriority)}
if(top>containerTop&&top-containerTop<=ElementMeasurementHelpers.MAX_VERTICAL_DISTANCE){topRanges.add({from:Math.max(left,containerLeft),to:Math.min(right,containerRight),offset:containerTop,distance:top-containerTop},!0,ElementMeasurementHelpers.checkRangePriority)}
if(right<containerRight&&containerRight-right<=ElementMeasurementHelpers.MAX_HORIZONTAL_DISTANCE){rightRanges.add({from:Math.max(top,containerTop),to:Math.min(bottom,containerBottom),offset:containerRight,distance:containerRight-right},!0,ElementMeasurementHelpers.checkRangePriority)}
if(bottom<containerBottom&&containerBottom-bottom<=ElementMeasurementHelpers.MAX_VERTICAL_DISTANCE){bottomRanges.add({from:Math.max(left,containerLeft),to:Math.min(right,containerRight),offset:containerBottom,distance:containerBottom-bottom},!0,ElementMeasurementHelpers.checkRangePriority)}
var otherElements=this.element.getAffectingElements();for(var _i=0,otherElements_1=otherElements;_i<otherElements_1.length;_i++){var otherElement=otherElements_1[_i];otherBounds=otherElement.getBounds(!0);otherLeft=Math.floor(otherBounds.pageLeft);otherTop=Math.floor(otherBounds.pageTop);otherRight=otherLeft+Math.floor(otherBounds.width);otherBottom=otherTop+Math.floor(otherBounds.height);if(otherRight<left){if(otherTop<bottom&&otherBottom>top){distance=left-otherRight;if(distance<=ElementMeasurementHelpers.MAX_HORIZONTAL_DISTANCE){leftRanges.add({from:Math.max(top,otherTop),to:Math.min(bottom,otherBottom),offset:otherRight,distance:distance,},!0,ElementMeasurementHelpers.checkRangePriority)}}}
if(otherBottom<top){if(otherLeft<right&&otherRight>left){distance=top-otherBottom;if(distance<=ElementMeasurementHelpers.MAX_VERTICAL_DISTANCE){topRanges.add({from:Math.max(left,otherLeft),to:Math.min(right,otherRight),offset:otherBottom,distance:distance,},!0,ElementMeasurementHelpers.checkRangePriority)}}}
if(otherLeft>right){if(otherTop<bottom&&otherBottom>top){distance=otherLeft-right;if(distance<=ElementMeasurementHelpers.MAX_HORIZONTAL_DISTANCE){rightRanges.add({from:Math.max(top,otherTop),to:Math.min(bottom,otherBottom),offset:otherLeft,distance:distance,},!0,ElementMeasurementHelpers.checkRangePriority)}}}
if(otherTop>bottom){if(otherLeft<right&&otherRight>left){distance=otherTop-bottom;if(distance<=ElementMeasurementHelpers.MAX_VERTICAL_DISTANCE){bottomRanges.add({from:Math.max(left,otherLeft),to:Math.min(right,otherRight),offset:otherTop,distance:distance,},!0,ElementMeasurementHelpers.checkRangePriority)}}}}
ElementMeasurementHelpers.normalizeRangeList(leftRanges);ElementMeasurementHelpers.normalizeRangeList(topRanges);ElementMeasurementHelpers.normalizeRangeList(rightRanges);ElementMeasurementHelpers.normalizeRangeList(bottomRanges);Rulers_1.RulerManagerInstance.clear();this.renderRangeList("horizontal",left,leftRanges,fast);this.renderRangeList("vertical",top,topRanges,fast);this.renderRangeList("horizontal",right,rightRanges,fast);this.renderRangeList("vertical",bottom,bottomRanges,fast)};ElementMeasurementHelpers.checkRangePriority=function(newRange,storedRange){if(storedRange.distance<=newRange.distance)
return storedRange;return newRange};ElementMeasurementHelpers.normalizeRangeList=function(rangeList){rangeList.ranges.sort(function(a,b){return(a.from<b.from)?-1:1});for(var i=rangeList.ranges.length-1;i>0;i--){if(rangeList.ranges[i-1].to===rangeList.ranges[i].from&&rangeList.ranges[i-1].distance===rangeList.ranges[i].distance){rangeList.ranges[i-1].to=rangeList.ranges[i].to;rangeList.ranges.splice(i,1)}}
var unique={};rangeList.ranges=rangeList.ranges.filter(function(range){var k=""+range.distance;if(unique.hasOwnProperty(k))
return!1;unique[k]=1;return!0})};ElementMeasurementHelpers.prototype.renderRangeList=function(type,base,rangeList,fast){if(fast===void 0){fast=!1}
if(!wb_builder.bodyInstance)
return;var pos,ruler;var shiftX=0,shiftY=0;var box=wb_builder.body.getBounds();if(box){shiftX=box.left;shiftY=box.top}
for(var _i=0,_a=rangeList.ranges;_i<_a.length;_i++){var range=_a[_i];pos=Math.floor((range.from+range.to)/2);if(type==="vertical"){ruler=Rulers_1.RulerManagerInstance.addRuler({x:pos-shiftX,y:base-shiftY},{x:pos-shiftX,y:range.offset-shiftY})}else{ruler=Rulers_1.RulerManagerInstance.addRuler({x:base-shiftX,y:pos-shiftY},{x:range.offset-shiftX,y:pos-shiftY})}
this.rulers.push(ruler)}};ElementMeasurementHelpers.MAX_HORIZONTAL_DISTANCE=10000;ElementMeasurementHelpers.MAX_VERTICAL_DISTANCE=500;ElementMeasurementHelpers.disabled=!1;return ElementMeasurementHelpers}())});define("js/element/SnapHandle",["require","exports","js/CommonTypes","js/Rulers","js/ElementMeasurementHelpers","js/Service","jquery"],function(require,exports,CommonTypes_8,Rulers_2,ElementMeasurementHelpers_1,Service_16,jquery_70){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SnapHandle=exports.config=void 0;exports.config=new(function(){function class_2(){this.snapToGrid=!1;this.snapToObjects=!0;this.showMeasurementHelpers=!0}
class_2.prototype.store=function(){if(!window.localStorage)
return;window.localStorage.setItem('snap_to_grid',this.snapToGrid?'1':'0');window.localStorage.setItem('snap_to_objects',this.snapToObjects?'1':'0');window.localStorage.setItem('show_measurement_helpers',this.showMeasurementHelpers?'1':'0')};class_2.prototype.load=function(){if(!window.localStorage)
return;this.snapToGrid=window.localStorage.getItem('snap_to_grid')=='1'};return class_2}());var SnapHandle=(function(){function SnapHandle(element){this.element=element;this.mouseIsOver=!1;this.dragStartPos=null;this.snapData=null;this.measurementHelpers=null}
SnapHandle.prototype.isAvailable=function(){return(this.element.getLayoutConstraints()==CommonTypes_8.ChildrenLayoutType.Absolute)};SnapHandle.prototype.handleHover=function(hover){this.mouseIsOver=hover;if(!this.snapData)
this.showMeasurementHelpers(hover);};SnapHandle.prototype.handleStop=function(){this.snapDone();this.showMeasurementHelpers(!1)};SnapHandle.prototype.handleUpdate=function(fast){if(fast===void 0){fast=!1}
if(this.measurementHelpers)
this.measurementHelpers.update(fast);};SnapHandle.prototype.handleDropOnBlock=function(block){if(!this.snapData)
return;this.snapData.droppedOnBlock=block};SnapHandle.prototype.handleDraggableStart=function(e,ui){this.dragStartPos=__assign({},this.element.getLocation());this.snapPrepare(e,ui);return!0};SnapHandle.prototype.handleDraggableDrag=function(e,ui){if(!this.snapData||!this.dragStartPos||!ui.position)
return!1;if(this.snapData.selectionAcrossMultipleBlocks){ui.position.top=this.dragStartPos.top}
this.snapMove(e,ui);return!0};SnapHandle.prototype.handleDraggableStop=function(e,ui){if(!this.snapData)
return!1;this.snapDone(e,ui);this.dragStartPos=null;return!0};SnapHandle.prototype.handleResizableStart=function(e,ui){this.snapPrepare(e,ui);return!0};SnapHandle.prototype.handleResizableResize=function(e,ui){if(!this.snapData||!ui.size)
return!1;this.snapResize(e,ui);return!0};SnapHandle.prototype.handleResizableStop=function(e,ui){if(!this.snapData)
return!1;this.snapDone(e,ui);return!0};SnapHandle.prototype.getAdditionalAffectedElements=function(){var affected=[];if(this.snapData){for(var _i=0,_a=this.snapData.affectedSiblings;_i<_a.length;_i++){var sibling=_a[_i];affected.push(sibling.element)}}
return affected};SnapHandle.prototype.snapPrepare=function(e,ui){var i,c,elements;var width=this.element.getWidthInPixels();var height=this.element.getHeightInPixels();this.snapData={selection:[],selectionBox:{minX:null,minY:null,maxX:null,maxY:null},selectionAcrossMultipleBlocks:!1,activeArea:1200,distance:wb_builder.bodyInstance.grid.getSize()/2,horizontal:[],vertical:[],blockVerticalOffset:0,aspectRatio:(width>0&&height>0)?width/height:1,keepAspectRatio:!1,widthUnits:(''+this.element.width).match(/^.+%$/)?'%':'px',affectedSiblings:[],hResize:null,vResize:null,hHelpers:{rulers:[],snapLines:[]},vHelpers:{rulers:[],snapLines:[]},droppedOnBlock:null};var elem,parentId,pos,left,top,right,bottom;var body=wb_builder.bodyInstance;var header=body.getContentBlock(CommonTypes_8.ContentBlockId.Header);var headerOffset=header?header.container.offset():{left:0,top:0};var headerHeight=header?header.getHeightInPixels():0;var main=body.getContentBlock(CommonTypes_8.ContentBlockId.Main);var mainHeight=main?main.getHeightInPixels():0;var parent=this.element.getParent();if(parent&&parent.rootBlockType===CommonTypes_8.ContentBlockId.Header){}else if(!parent||parent.rootBlockType===CommonTypes_8.ContentBlockId.Main){this.snapData.blockVerticalOffset=headerHeight}else if(parent.rootBlockType===CommonTypes_8.ContentBlockId.Footer){this.snapData.blockVerticalOffset=headerHeight+mainHeight}else{this.snapData.blockVerticalOffset=0}
var absPos=this.element.getAbsoluteLocation();var skipElement,firstElemParentId=null;elements=(parent===null||parent===void 0?void 0:parent.getChildren())||[];if(parent)
elements.push(parent);for(i=0,c=elements.length;i<c;i++){skipElement=(e.type==="dragstart"&&!elements[i].isSelected())||(e.type==="resizestart"&&elements[i]!==this.element);if(skipElement||!elements[i].isSelected()||elements[i].isHidden()||elements[i].isHidden(!0))
continue;elem=elements[i];var otherAbsPos=elem.getAbsoluteLocation();parentId=elem.parent?elem.parent.id:main.id;this.snapData.selection.push({offset:{x:otherAbsPos.left-absPos.left,y:otherAbsPos.top-absPos.top},elem:elements[i]});left=otherAbsPos.left-absPos.left;top=otherAbsPos.top-absPos.top;right=left+elem.getWidthInPixels();bottom=top+elem.getHeightInPixels();if(this.snapData.selectionBox.minX===null||left<this.snapData.selectionBox.minX)
this.snapData.selectionBox.minX=left;if(this.snapData.selectionBox.maxX===null||right>this.snapData.selectionBox.maxX)
this.snapData.selectionBox.maxX=right;if(this.snapData.selectionBox.minY===null||top<this.snapData.selectionBox.minY)
this.snapData.selectionBox.minY=top;if(this.snapData.selectionBox.maxY===null||bottom>this.snapData.selectionBox.maxY)
this.snapData.selectionBox.maxY=bottom;if(firstElemParentId===null)
firstElemParentId=parentId;else if(firstElemParentId!==parentId)
this.snapData.selectionAcrossMultipleBlocks=!0}
if(this.snapData.selectionAcrossMultipleBlocks)
wb_builder.bodyInstance.enableDropZones(!1);if(exports.config.snapToObjects){var horizontalSnapLines=[],verticalSnapLines=[];for(i=0,c=elements.length;i<c;i++){skipElement=(e.type==="dragstart"&&elements[i].isSelected())||(e.type==="resizestart"&&elements[i]===this.element);if(skipElement||elements[i].isHidden()||elements[i].isHidden(!0))
continue;elem=elements[i];pos=elem.getLocation();parentId=elem.parent?elem.parent.id:main.id;var box={left:pos.left,top:pos.top,right:pos.left+elem.getWidthInPixels(),bottom:pos.top+elem.getHeightInPixels()};if(elem===parent){box.right-=pos.left;box.top-=pos.top;box.left=box.top=0}
horizontalSnapLines.push({lineClass:"element",elem:elem,type:"left",offset:box.left,areaMin:box.top,areaMax:box.bottom});horizontalSnapLines.push({lineClass:"element",elem:elem,type:"middle",offset:Math.round((box.left+box.right)/2),areaMin:box.top,areaMax:box.bottom});horizontalSnapLines.push({lineClass:"element",elem:elem,type:"right",offset:box.right,areaMin:box.top,areaMax:box.bottom});if(!this.snapData.selectionAcrossMultipleBlocks){verticalSnapLines.push({lineClass:"element",elem:elem,type:"top",offset:box.top,areaMin:box.left,areaMax:box.right});verticalSnapLines.push({lineClass:"element",elem:elem,type:"middle",offset:Math.round((box.top+box.bottom)/2),areaMin:box.left,areaMax:box.right});verticalSnapLines.push({lineClass:"element",elem:elem,type:"bottom",offset:box.bottom,areaMin:box.left,areaMax:box.right})}}
var sortSnapLines=function(a,b){if(a.offset===b.offset){if(a.areaMin===b.areaMin){if(a.areaMax===b.areaMax)
return 0;return(a.areaMax<b.areaMax)?-1:1}
return(a.areaMin<b.areaMin)?-1:1}
return(a.offset<b.offset)?-1:1};horizontalSnapLines.sort(sortSnapLines);verticalSnapLines.sort(sortSnapLines);var groupLines=function(lines){var groups=[];var group=null,line;for(var i=0,il=lines.length;i<il;i++){line=lines[i];if(!group||group.offset!==line.offset){group={offset:line.offset,lines:[]};groups.push(group)}
group.lines.push(line)}
return groups};this.snapData.horizontal=groupLines(horizontalSnapLines);this.snapData.vertical=groupLines(verticalSnapLines)}
if(e.type==="resizestart"&&ui.element){var axis=ui.axis;if(axis==="nw"){this.snapData.hResize="w";this.snapData.vResize="n"}else if(axis==="n"){this.snapData.vResize="n"}else if(axis==="ne"){this.snapData.hResize="e";this.snapData.vResize="n"}else if(axis==="w"){this.snapData.hResize="w"}else if(axis==="e"){this.snapData.hResize="e"}else if(axis==="sw"){this.snapData.hResize="w";this.snapData.vResize="s"}else if(axis==="s"){this.snapData.vResize="s"}else if(axis==="se"){this.snapData.hResize="e";this.snapData.vResize="s"}
this.snapData.keepAspectRatio=((this.element.getClassType()==='Picture')&&(this.snapData.hResize==="w"||this.snapData.hResize==="e")&&this.snapData.vResize==="s")}else if(e.type==="dragstart"){Service_16.Service.HelpSystemPlayer.notify('item-plugin-'+this.element.getClassType()+'-move-start',this)}
ElementMeasurementHelpers_1.ElementMeasurementHelpers.disabled=!0;this.showMeasurementHelpers(!1)};SnapHandle.prototype.snapFindClosestLines=function(offsets,boundsMin,boundsMax,snapLineGroups){if(!this.snapData)
return[];var areaMin=boundsMin-this.snapData.activeArea;var areaMax=boundsMax+this.snapData.activeArea;var i,il,j,jl,k,kl,offsetData=[],breakOffset=null,offs,diff,delta,line=null,lineGroup,offsChanged,targetLineList,foundALine;for(i=0,il=offsets.length;i<il;i++){offsetData[i]={index:i,offset:offsets[i],min:offsets[i]-this.snapData.distance,max:offsets[i]+this.snapData.distance,elementAreaMin:null,elementAreaMax:null,diff:null,delta:null,lines:[],snapToOffset:0,rulerOffsetCorrection:!1};breakOffset=(breakOffset===null)?offsetData[i].max:Math.max(offsetData[i].max,breakOffset)}
if(exports.config.snapToGrid){offs=offsetData[0];var gridSnap=wb_builder.gridSnap(offs.offset);offs.diff=offs.offset-gridSnap;offs.delta=Math.abs(offs.diff);offs.snapToOffset=gridSnap;offs.lines.push({lineClass:"grid",offset:gridSnap})}
for(i=0,il=snapLineGroups.length;i<il;i++){lineGroup=snapLineGroups[i];if(lineGroup.offset>(breakOffset?breakOffset:0))
break;for(j=0,jl=offsetData.length;j<jl;j++){offs=offsetData[j];if(lineGroup.offset<offs.min||lineGroup.offset>offs.max)
continue;diff=offs.offset-lineGroup.offset;delta=Math.abs(diff);offsChanged=!1;if(offs.delta===null||delta<offs.delta)
offsChanged=!0;else if(offs.diff!==diff)
continue;targetLineList=offsChanged?[]:offs.lines;foundALine=!1;for(k=0,kl=lineGroup.lines.length;k<kl;k++){line=lineGroup.lines[k];if(line.areaMin>areaMax||line.areaMax<areaMin)
continue;foundALine=!0;targetLineList.push(line)}
if(offsChanged&&foundALine){offs.diff=diff;offs.delta=delta;offs.snapToOffset=line?line.offset:0;offs.lines=targetLineList}}}
offsetData=offsetData.filter(function(offs){return offs.lines.length>0});offsetData.sort(function(a,b){if(a.delta===b.delta){if(a.diff===b.diff)
return 0;return(a.diff<b.diff)?-1:1}
return(a.delta<b.delta)?-1:1});if(offsetData.length>1){diff=offsetData[0].diff;offsetData=offsetData.filter(function(offs){return offs.diff===diff})}
var midOffs=null,midOffsIdx=0;for(i=offsetData.length-1;i>=0;i--){offs=offsetData[i];for(j=offs.lines.length-1;j>=0;j--){line=offs.lines[j];if(line.lineClass!=="element")
continue;if(offs.elementAreaMin===null||line.areaMin<offs.elementAreaMin)
offs.elementAreaMin=line.areaMin;if(offs.elementAreaMax===null||line.areaMax>offs.elementAreaMax)
offs.elementAreaMax=line.areaMax}
if(offs.index===1){midOffs=offs;midOffsIdx=i}}
if(midOffs&&offsetData.length>2){var uselessData=!1;for(i=offsetData.length-1;i>=0;i--){if(i===midOffsIdx)
continue;if(offsetData[i].elementAreaMin===midOffs.elementAreaMin&&offsetData[i].elementAreaMax===midOffs.elementAreaMax){uselessData=!0;break}}
if(uselessData)
offsetData.splice(midOffsIdx,1);}
return offsetData};SnapHandle.prototype.prepareSnapHelpers=function(helpers){};SnapHandle.prototype.cleanupUnusedSnapHelpers=function(helpers,usedRulers,usedSnapLines){var i;for(i=helpers.rulers.length-1;i>=usedRulers;i--)
helpers.rulers[i].setVisible(!1);for(i=helpers.snapLines.length-1;i>=usedSnapLines;i--)
helpers.snapLines[i].addClass("hidden");};SnapHandle.prototype.removeSnapHelpers=function(helpers){var i;for(i=helpers.rulers.length-1;i>=0;i--)
Rulers_2.RulerManagerInstance.removeRuler(helpers.rulers[i]);for(i=helpers.snapLines.length-1;i>=0;i--)
helpers.snapLines[i].remove();helpers.rulers=[];helpers.snapLines=[]};SnapHandle.prototype.renderSnapHelpersForSide=function(snapType,helpers,snaps,left,top,width,height){var rulerFrom,rulerTo,i,j,snap,usedRulers,usedSnapLines,line,delta,areaMin,areaMax;var bestDistanceBefore,bestDistanceAfter;var parentElem=this.element.getParent();var parent=parentElem?parentElem.container:null;var blockOffset=parent?parent.offset():{left:0,top:0};var body=(0,jquery_70.default)(document.body);var bodyMaxX=body.width()-blockOffset.left;var bodyMaxY=body.height()-blockOffset.top;usedRulers=usedSnapLines=0;this.prepareSnapHelpers(helpers);var elemAreaMin=(snapType==="horizontal")?top:left;var elemAreaMax=elemAreaMin+((snapType==="horizontal")?height:width);var blockVerticalOffset=0;if(snaps){for(i=snaps.length-1;i>=0;i--){snap=snaps[i];if(snap.elementAreaMin!==null&&snap.elementAreaMax!==null){snap.elementAreaMin=Math.min(snap.elementAreaMin,elemAreaMin);snap.elementAreaMax=Math.max(snap.elementAreaMax,elemAreaMax);areaMin=snap.elementAreaMin-10;areaMax=snap.elementAreaMax+10;if(snapType==="horizontal"){areaMax=Math.min(bodyMaxY,areaMax);delta=bodyMaxY-areaMin}else{areaMax=Math.min(bodyMaxX,areaMax);delta=bodyMaxX-areaMin}
if(delta>0){if(usedSnapLines===helpers.snapLines.length){helpers.snapLines[usedSnapLines]=(0,jquery_70.default)('<div class="wb-snap-line wb-snap-line-'+snapType+'">');if(parent)
parent.append(helpers.snapLines[usedSnapLines]);}else{helpers.snapLines[usedSnapLines].removeClass("hidden")}
if(snapType==="horizontal"){helpers.snapLines[usedSnapLines].css({left:snap.snapToOffset-((snap.index===2)?1:0),top:areaMin,height:areaMax-areaMin})}else{helpers.snapLines[usedSnapLines].css({top:snap.snapToOffset-((snap.index===2)?1:0),left:areaMin,width:areaMax-areaMin})}
usedSnapLines++}}
if(snap.elementAreaMin!==null&&snap.elementAreaMax!==null){bestDistanceBefore=bestDistanceAfter=null;for(j=snap.lines.length-1;j>=0;j--){line=snap.lines[j];if(line.lineClass!=="element")
continue;if(line.areaMax<elemAreaMin){delta=elemAreaMin-line.areaMax;if(bestDistanceBefore===null||bestDistanceBefore>delta)
bestDistanceBefore=delta}
if(line.areaMin>elemAreaMax){delta=line.areaMin-elemAreaMax;if(bestDistanceAfter===null||bestDistanceAfter>delta)
bestDistanceAfter=delta}}
if(bestDistanceBefore!==null){if(snapType==="horizontal"){rulerFrom={x:blockOffset.left+snap.snapToOffset-((snap.index===2)?1:0),y:blockVerticalOffset+elemAreaMin};rulerTo={x:rulerFrom.x,y:rulerFrom.y-bestDistanceBefore}}else{rulerFrom={x:blockOffset.left+elemAreaMin,y:blockVerticalOffset+snap.snapToOffset-((snap.index===2)?1:0)};rulerTo={x:rulerFrom.x-bestDistanceBefore,y:rulerFrom.y}}
if(usedRulers===helpers.rulers.length){helpers.rulers[usedRulers]=Rulers_2.RulerManagerInstance.addRuler(rulerFrom,rulerTo,!1)}else{helpers.rulers[usedRulers].set(rulerFrom,rulerTo)}
helpers.rulers[usedRulers].setVisible(!0);usedRulers++}
if(bestDistanceAfter!==null){if(snapType==="horizontal"){rulerFrom={x:blockOffset.left+snap.snapToOffset-((snap.index===2)?1:0),y:blockVerticalOffset+elemAreaMax};rulerTo={x:rulerFrom.x,y:rulerFrom.y+bestDistanceAfter}}else{rulerFrom={x:blockOffset.left+elemAreaMax,y:blockVerticalOffset+snap.snapToOffset-((snap.index===2)?1:0)};rulerTo={x:rulerFrom.x+bestDistanceAfter,y:rulerFrom.y}}
if(usedRulers===helpers.rulers.length){helpers.rulers[usedRulers]=Rulers_2.RulerManagerInstance.addRuler(rulerFrom,rulerTo,!1)}else{helpers.rulers[usedRulers].set(rulerFrom,rulerTo)}
helpers.rulers[usedRulers].setVisible(!0);usedRulers++}}}}
this.cleanupUnusedSnapHelpers(helpers,usedRulers,usedSnapLines)};SnapHandle.prototype.renderSnapHelpers=function(hSnaps,vSnaps,left,top,width,height){if(!this.snapData)
return;this.renderSnapHelpersForSide("horizontal",this.snapData.hHelpers,hSnaps,left,top,width,height);this.renderSnapHelpersForSide("vertical",this.snapData.vHelpers,vSnaps,left,top,width,height)};SnapHandle.prototype.showMeasurementHelpers=function(show){if(!this.element.isEditableStrict)
return;if(!exports.config.showMeasurementHelpers||!this.isAvailable())
return;if(show){if(!this.measurementHelpers)
this.measurementHelpers=ElementMeasurementHelpers_1.ElementMeasurementHelpers.fromElement(this.element);this.measurementHelpers.show()}else if(this.measurementHelpers){this.measurementHelpers.hide();this.measurementHelpers=null}};SnapHandle.prototype.snapMove=function(e,ui){if(!this.snapData||!ui.position)
return;if(this.element.isHidden()||this.element.isHidden(!0)){if(this.dragStartPos){ui.position.left=this.dragStartPos.left;ui.position.top=this.dragStartPos.top}}else{var left=ui.position.left+this.snapData.selectionBox.minX;var top=ui.position.top+this.snapData.selectionBox.minY;var width=this.snapData.selectionBox.maxX-this.snapData.selectionBox.minX;var height=this.snapData.selectionBox.maxY-this.snapData.selectionBox.minY;var right=left+width;var bottom=top+height;var hSnaps=null,vSnaps=null,hsgOffset,vsgOffset;hSnaps=this.snapFindClosestLines([left,(right+left)/2,right],top,bottom,this.snapData.horizontal);if(hSnaps.length){if(hSnaps[0].index===0)
hsgOffset=this.snapData.selectionBox.minX;else if(hSnaps[0].index===1)
hsgOffset=(this.snapData.selectionBox.minX+this.snapData.selectionBox.maxX)/2;else hsgOffset=this.snapData.selectionBox.maxX;ui.position.left=hSnaps[0].snapToOffset-Math.round(hsgOffset)}
if(!this.snapData.selectionAcrossMultipleBlocks){vSnaps=this.snapFindClosestLines([top,(bottom+top)/2,bottom],left,right,this.snapData.vertical);if(vSnaps.length>0){if(vSnaps[0].index===0)
vsgOffset=this.snapData.selectionBox.minY;else if(vSnaps[0].index===1)
vsgOffset=(this.snapData.selectionBox.minY+this.snapData.selectionBox.maxY)/2;else vsgOffset=this.snapData.selectionBox.maxY;ui.position.top=vSnaps[0].snapToOffset-Math.round(vsgOffset)}}
this.renderSnapHelpers(hSnaps,vSnaps,ui.position.left+this.snapData.selectionBox.minX,ui.position.top+this.snapData.selectionBox.minY,width,height)}
var elemInfo;for(var i=this.snapData.selection.length-1;i>=0;i--){elemInfo=this.snapData.selection[i];elemInfo.elem.setLocation(ui.position.left+elemInfo.offset.x,ui.position.top+elemInfo.offset.y)}};SnapHandle.prototype.snapResize=function(e,ui){if(!this.snapData||!ui.size||!ui.position||(this.snapData.hResize===null&&this.snapData.vResize===null))
return;var size=this.element.getSizeInPixels();var left=ui.position.left;var right=left+size.width;var top=ui.position.top;var bottom=top+size.height;var uiSize=jquery_70.default.extend({},ui.size);var hSnaps=[],vSnaps=[],delta;if(this.snapData.keepAspectRatio){if(this.snapData.hResize)
uiSize.height=uiSize.width/this.snapData.aspectRatio;else uiSize.width=uiSize.height*this.snapData.aspectRatio}
if(this.isAvailable()){if(this.snapData.hResize){hSnaps=this.snapFindClosestLines([ui.position.left+((this.snapData.hResize==="e")?uiSize.width:0)],top,bottom,this.snapData.horizontal);if(hSnaps.length&&this.snapData.hResize==="e")
hSnaps[0].index=2}
if(this.snapData.vResize&&!this.snapData.selectionAcrossMultipleBlocks){vSnaps=this.snapFindClosestLines([ui.position.top+((this.snapData.vResize==="s")?uiSize.height:0)],left,right,this.snapData.vertical);if(vSnaps.length&&this.snapData.vResize==="s")
vSnaps[0].index=2}
if(this.snapData.keepAspectRatio&&hSnaps.length&&vSnaps.length){if(hSnaps[0].delta<vSnaps[0].delta*this.snapData.aspectRatio)
vSnaps=[];else hSnaps=[]}
if(hSnaps&&hSnaps.length){delta=hSnaps[0].snapToOffset-ui.position.left;if(this.snapData.hResize==="e"){uiSize.width=delta}else{ui.position.left+=delta;uiSize.width-=delta}
if(this.snapData.keepAspectRatio){uiSize.height=uiSize.width/this.snapData.aspectRatio}}
if(vSnaps&&vSnaps.length){delta=vSnaps[0].snapToOffset-ui.position.top;if(this.snapData.vResize==="s"){uiSize.height=delta}else{ui.position.top+=delta;uiSize.height-=delta}
if(this.snapData.keepAspectRatio){uiSize.width=uiSize.height*this.snapData.aspectRatio}}
if(this.snapData.affectedSiblings.length){var dx=(uiSize.width||size.width)-ui.originalSize.width;var dxPerSibling=dx/this.snapData.affectedSiblings.length;var newWidth=void 0;var parent_16=this.element.getParent();var limitsChanged=void 0;var myRect=this.element.getBoundingRect();for(var _i=0,_a=this.snapData.affectedSiblings;_i<_a.length;_i++){var sibling=_a[_i];var rect=sibling.element.getBoundingRect();limitsChanged=!1;if((sibling.side==="left"&&rect.right>myRect.left)||(sibling.side==="right"&&rect.left<myRect.right)){if(sibling.element.minWidth!==sibling.originalMinSize.width){sibling.element.minWidth=sibling.originalMinSize.width;limitsChanged=!0}
if(sibling.element.maxWidth!==sibling.originalMaxSize.width){sibling.element.maxWidth=sibling.originalMaxSize.width;limitsChanged=!0}
newWidth=sibling.originalSize.width}else{newWidth=sibling.originalPixelSize.width-dxPerSibling;if(newWidth<1)
newWidth=1;if(sibling.element.useMinWidth&&newWidth<sibling.element.minWidth){sibling.element.minWidth=newWidth;limitsChanged=!0}
if(sibling.element.useMaxWidth&&newWidth>sibling.element.maxWidth){sibling.element.maxWidth=newWidth;limitsChanged=!0}
if(typeof sibling.element.getWidth()!=="number")
newWidth=parent_16.getPercentWidth(newWidth)+"%"}
if(limitsChanged)
sibling.element.updateSizeLimits();sibling.element.setSize(newWidth,null)}}
this.renderSnapHelpers(hSnaps,vSnaps,ui.position.left,ui.position.top,uiSize.width||size.width,uiSize.height||size.height)}
ui.size.width=uiSize.width;ui.size.height=uiSize.height};SnapHandle.prototype.snapDone=function(e,ui){if(!this.snapData)
return;Rulers_2.RulerManagerInstance.clear();if(e&&ui&&ui.position){if(e.type==="dragstop"){this.snapMove(e,ui);if(this.snapData.droppedOnBlock){var parent_17=this.element.getParent();var oldBlockPos=parent_17?parent_17.getBounds():{left:0,top:0};var newBlockPos=this.snapData.droppedOnBlock.getBounds();ui.position.top+=oldBlockPos.top-newBlockPos.top;for(var i=0;i<this.snapData.selection.length;i++){var oelem=this.snapData.selection[i].elem;oelem.setLocation(null,oelem.getLocation().top+(oldBlockPos.top-newBlockPos.top));this.snapData.droppedOnBlock.addChild(oelem)}}}
this.element.setLocation(ui.position.left,ui.position.top);if(e.type==="dragstop"){Service_16.Service.HelpSystemPlayer.notify('item-plugin-'+this.element.getClassType()+'-move-end',this)}
ElementMeasurementHelpers_1.ElementMeasurementHelpers.disabled=!1;if(this.mouseIsOver)
this.showMeasurementHelpers(!0);}
wb_builder.updateDropZones();this.removeSnapHelpers(this.snapData.hHelpers);this.removeSnapHelpers(this.snapData.vHelpers);this.snapData=null};return SnapHandle}());exports.SnapHandle=SnapHandle});define("js/GridAndGuidesDialog",["require","exports","Dialog","js/VerticalLayout","js/Service","js/HorizontalLayout","js/SizeSelector","js/ColorPicker","js/element/SnapHandle"],function(require,exports,Dialog_3,VerticalLayout_22,Service_17,HorizontalLayout_4,SizeSelector_11,ColorPicker_10,SnapHandle_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GridAndGuidesDialog=void 0;var GridAndGuidesDialog=(function(_super){__extends(GridAndGuidesDialog,_super);function GridAndGuidesDialog(){var _this=_super.call(this,'',!1)||this;_this.setTitleVisible(!0);_this.setFooterVisible(!0);_this.setSize(500,null);_this.setTitle(__("Grid and guides"));_this.setContent(new Service_17.Service.UIBuilder({type:VerticalLayout_22.VerticalLayout,children:[{type:HorizontalLayout_4.HorizontalLayout,css:{marginTop:-15},children:[{type:VerticalLayout_22.VerticalLayout,css:{marginTop:15},children:[{type:'Label',text:__('Snapping')},{type:'CheckBox',label:__('Snap to grid'),id:"snapToGrid"},{type:'CheckBox',label:__('Snap to objects'),id:"snapToObjects"}]},{type:VerticalLayout_22.VerticalLayout,css:{marginTop:15},children:[{type:'Label',text:__('Display')},{type:'CheckBox',label:__('Show distances'),id:"showHelpers"},{type:'CheckBox',label:__('Show grid'),id:"showGrid"},{type:'CheckBox',label:__('Show layout'),id:"showLayout"}]}]},{type:HorizontalLayout_4.HorizontalLayout,children:[{type:VerticalLayout_22.VerticalLayout,css:{marginTop:15},children:[{type:'Label',text:__('Grid size')},{type:SizeSelector_11.SizeSelector,id:"gridSize",min:5,max:100}]},{type:VerticalLayout_22.VerticalLayout,css:{marginTop:15},children:[{type:'Label',text:__('Grid color')},{type:ColorPicker_10.ColorPicker,id:"gridColor"}]}]},]},_this.fields),!0);_this.addButton(__("Cancel"),function(){_this.setVisible(!1)},!1);_this.addButton(__("Apply"),function(){if(_this.saveFields())
_this.setVisible(!1);},!0);return _this}
GridAndGuidesDialog.getInstance=function(){if(!GridAndGuidesDialog.instance)
GridAndGuidesDialog.instance=new GridAndGuidesDialog();return GridAndGuidesDialog.instance};GridAndGuidesDialog.open=function(){var dialog=GridAndGuidesDialog.getInstance();dialog.updateFields();dialog.setVisible(!0)};GridAndGuidesDialog.prototype.saveFields=function(){var grid=wb_builder.bodyInstance.grid;grid.setVisible(this.fields.showGrid.getValue());grid.setSize(this.fields.gridSize.getValue());grid.setColor(this.fields.gridColor.getValue());wb_builder.setCookie('wb_showgrid',(grid.isVisible()?'Y':'N')+'/'+grid.getSize()+'/'+grid.getColor());wb_builder.showLayout=this.fields.showLayout.getValue();SnapHandle_1.config.showMeasurementHelpers=this.fields.showHelpers.getValue();SnapHandle_1.config.snapToGrid=this.fields.snapToGrid.getValue();SnapHandle_1.config.snapToObjects=this.fields.snapToObjects.getValue();SnapHandle_1.config.store();return!0};GridAndGuidesDialog.prototype.updateFields=function(){var grid=wb_builder.bodyInstance.grid;this.fields.showGrid.setValue(grid.isVisible());this.fields.showLayout.setValue(wb_builder.showLayout);this.fields.showHelpers.setValue(SnapHandle_1.config.showMeasurementHelpers);this.fields.snapToGrid.setValue(SnapHandle_1.config.snapToGrid);this.fields.snapToObjects.setValue(SnapHandle_1.config.snapToObjects);this.fields.gridSize.setValue(grid.getSize());this.fields.gridColor.setValue(grid.getColor())};return GridAndGuidesDialog}(Dialog_3.default));exports.GridAndGuidesDialog=GridAndGuidesDialog});define("js/HelpSystem/AnimTween",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AnimTween=void 0;var AnimTween=(function(){function AnimTween(durration,fps,onStep,onStart,onEnd,onDispose){if(onStep===void 0){onStep=null}
if(onStart===void 0){onStart=null}
if(onEnd===void 0){onEnd=null}
if(onDispose===void 0){onDispose=null}
this.onStep=onStep;this.onStart=onStart;this.onEnd=onEnd;this.onDispose=onDispose;this.currKeyframe=0;this.timeHandle=0;this.keyframeLen=Math.round(1000.0/fps);this.numKeyframes=Math.ceil(durration/this.keyframeLen)}
AnimTween.prototype.start=function(){var _this=this;if(this.timeHandle)
clearInterval(this.timeHandle);this.currKeyframe=0;if(this.onStart)
this.onStart.call(this,this);this.timeHandle=setInterval(function(){return _this.step()},this.keyframeLen);return this};AnimTween.prototype.step=function(){if(this.onStep)
this.onStep.call(this,this);this.currKeyframe++;if(this.currKeyframe>=this.numKeyframes){this.end()}};AnimTween.prototype.end=function(noCallback){if(noCallback===void 0){noCallback=!1}
if(!noCallback&&this.onEnd)
this.onEnd.call(this,this);if(this.timeHandle)
clearInterval(this.timeHandle);this.currKeyframe=0};AnimTween.prototype.dispose=function(){if(this.onDispose)
this.onDispose.call(this,this);this.end(!0)};return AnimTween}());exports.AnimTween=AnimTween});define("js/HelpSystem/Types",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})});define("js/HelpSystem/HelpOverlayTemplatesPanel",["require","exports","jquery","js/Service","js/UIComponent","js/UIContainer"],function(require,exports,jquery_71,Service_18,UIComponent_59,UIContainer_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HelpOverlayTemplatesPanel=void 0;var HelpOverlayTemplatesPanel=(function(_super){__extends(HelpOverlayTemplatesPanel,_super);function HelpOverlayTemplatesPanel(helpOverlay){var _this=_super.call(this)||this;_this.helpOverlay=helpOverlay;_this.itemCount=0;_this.itemOffset=0;_this.itemShowCount=6;_this.leftBtn=new ArrowButton('wb-hlp-tpl-list-left','fa fa-chevron-left',function(){_this.slide(-1)});_this.rightBtn=new ArrowButton('wb-hlp-tpl-list-right','fa fa-chevron-right',function(){_this.slide(1)});_this.itemsWrap=(new UIContainer_6.UIContainer()).addClass('wb-hlp-tpl-list-wrap');_this.itemsElem=(new UIContainer_6.UIContainer()).addClass('wb-hlp-tpl-list-items').addChild(_this.itemsWrap);_this._elem.addClass('wb-hlp-tpl-list').append(_this.leftBtn.getElem()).append(_this.rightBtn.getElem()).append(_this.itemsElem.getElem());return _this}
HelpOverlayTemplatesPanel.prototype.slide=function(dir){if(dir===void 0){dir=0}
this.itemOffset-=dir;if(this.itemOffset<(this.itemShowCount-this.itemCount)){this.itemOffset=this.itemShowCount-this.itemCount}
if(this.itemOffset>0)
this.itemOffset=0;this.itemsWrap.css({left:(this.itemOffset*160)+'px'});this.rightBtn.setVisible((this.itemOffset>(this.itemShowCount-this.itemCount)));this.leftBtn.setVisible((this.itemOffset<0))};HelpOverlayTemplatesPanel.prototype.clear=function(){this.itemsWrap.removeAllChildren();this.itemCount=0;this.itemOffset=0;this.slide(0)};HelpOverlayTemplatesPanel.prototype.addTemplate=function(tpl){this.itemsWrap.addChild(new TemplateItem(tpl,this.helpOverlay));this.itemCount++};HelpOverlayTemplatesPanel.prototype.reload=function(showThisTpl){var _this=this;if(showThisTpl===void 0){showThisTpl=!0}
this.clear();this.addTemplate({scenarioId:'introduction',icon:'fa fa-rocket',name:__('Basic Tutorial'),duration:'~1 '+__('min')});if(showThisTpl)
this.addTemplate({scenarioId:'.',icon:'fa fa-cogs',name:__('See how template was made'),duration:'~5 '+__('min')});Service_18.Service.templates.getTemplates().done(function(data){if(data)
for(var _i=0,data_1=data;_i<data_1.length;_i++){var tpl=data_1[_i];if(tpl.isPrivate)
continue;tpl.duration='~5 '+__('min');_this.addTemplate(tpl)}
_this.slide(0)}).fail(function(){_this.setVisible(!1)})};return HelpOverlayTemplatesPanel}(UIComponent_59.UIComponent));exports.HelpOverlayTemplatesPanel=HelpOverlayTemplatesPanel;var TemplateItem=(function(_super){__extends(TemplateItem,_super);function TemplateItem(tpl,helpOverlay){var _this=_super.call(this)||this;var iconCont=(0,jquery_71.default)('<div>').addClass('wb-hlp-tpl-list-item-icon');if(tpl.icon){iconCont.append((0,jquery_71.default)('<span>').addClass(tpl.icon))}else{iconCont.append((0,jquery_71.default)('<span>').addClass('fa fa-play-circle-o wb-hlp-tpl-list-item-play')).append((0,jquery_71.default)('<img>').attr({src:tpl.thumb,alt:tpl.name}))}
var nameElem=(0,jquery_71.default)('<span>').addClass('wb-hlp-tpl-list-item-name').text(tpl.name);if(tpl.duration)
nameElem.append((0,jquery_71.default)('<span>').addClass('wb-hlp-tpl-list-item-durr').text('('+tpl.duration+')'));_this._elem.addClass('wb-hlp-tpl-list-item').append(iconCont).append(nameElem);_this.on('click',function(){helpOverlay.runScenario(tpl)});return _this}
return TemplateItem}(UIComponent_59.UIComponent));var ArrowButton=(function(_super){__extends(ArrowButton,_super);function ArrowButton(cls,icon,click){var _this=_super.call(this,'span')||this;_this._elem.addClass(cls).append((0,jquery_71.default)('<span>').addClass(icon));_this.on('click touchstart',click);return _this}
return ArrowButton}(UIComponent_59.UIComponent))});define("js/DefaultUI/PluginToolbar",["require","exports","WidgetToolbar","jquery","js/core/BuilderConfig"],function(require,exports,WidgetToolbar_1,jquery_72,BuilderConfig_12){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.constructPluginToolbar=void 0;function constructPluginToolbar(builder,collapseCallback,def){if(def===void 0){def=null}
var widgets=[];if(!def||typeof def!=='object'){def={type:'widget',click:function(){if(!this.id)
return;var cx=(0,jquery_72.default)(window).width()/2,cy=(0,jquery_72.default)(window).height()/2;builder.addElementAt(this.id,cx,cy);return!1}}}
var extIcon;var collections=builder.getCompositionCollections();for(var _i=0,collections_1=collections;_i<collections_1.length;_i++){var collection=collections_1[_i];if(collection.name=='-'){widgets.push({type:'-'});continue}
extIcon=((typeof def.icon==='function')&&(extIcon=def.icon(collection.id)))?extIcon:null;var item={type:def.type,id:collection.id,icon:(extIcon?extIcon:collection.icon),iconImage:!1,name:collection.name,active:((typeof def.isActive==='function')?def.isActive(collection):((BuilderConfig_12.wbConfig.isB2C&&collection.inactive)?WidgetToolbar_1.TOOLBAR_ITEM_STATE_ACTIVE_BUT_GRAY:!collection.inactive)),click:def.click,noDraggable:!0,};widgets.push(item)}
return widgets}
exports.constructPluginToolbar=constructPluginToolbar});define("js/tools/CropTool",["require","exports","js/CommonTypes","jquery"],function(require,exports,CommonTypes_9,jquery_73){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CropTool=exports.CropRectangle=void 0;var CropRectangle=(function(){function CropRectangle(data){this.imgWidth=0;this.imgHeight=0;if(data){this.x=data.x||0;this.y=data.y||0;this.width=data.width||0;this.height=data.height||0;if("oldElemWidth" in data)
this.oldElemWidth=data.oldElemWidth;if("oldElemHeight" in data)
this.oldElemHeight=data.oldElemHeight;if("imgWidth" in data)
this.imgWidth=data.imgWidth;if("imgHeight" in data)
this.imgHeight=data.imgHeight}else{this.x=this.y=this.width=this.height=0}}
CropRectangle.deserialize=function(data){return new CropRectangle(data)};CropRectangle.prototype.serialize=function(image){return{x:this.x,y:this.y,width:this.width,height:this.height,imgWidth:this.imgWidth||((image&&image.naturalWidth)?image.naturalWidth:0),imgHeight:this.imgHeight||((image&&image.naturalHeight)?image.naturalHeight:0),}};CropRectangle.prototype.reset=function(image,frameAspectRatio,oriImageWidth,oriImageHeight){if(oriImageWidth===void 0){oriImageWidth=0}
if(oriImageHeight===void 0){oriImageHeight=0}
this.x=0;this.y=0;this.imgWidth=image.naturalWidth?image.naturalWidth:oriImageWidth;this.imgHeight=image.naturalHeight?image.naturalHeight:oriImageHeight;var imgAspectRatio=this.imgWidth/this.imgHeight;if(imgAspectRatio>frameAspectRatio){this.width=this.imgHeight*frameAspectRatio;this.height=this.imgHeight}else{this.width=this.imgWidth;this.height=this.imgWidth/frameAspectRatio}
delete this.oldElemWidth;delete this.oldElemHeight};CropRectangle.prototype.update=function(image,oriImageWidth,oriImageHeight){if(oriImageWidth===void 0){oriImageWidth=0}
if(oriImageHeight===void 0){oriImageHeight=0}
var iw=image.naturalWidth?image.naturalWidth:oriImageWidth;var ih=image.naturalHeight?image.naturalHeight:oriImageHeight;if(this.oldElemWidth&&this.oldElemHeight){if(!this.width||!this.height){this.reset(image,this.oldElemWidth/this.oldElemHeight,oriImageWidth,oriImageHeight)}else{var scaleX=iw/this.width;var scaleY=ih/this.height;this.x=scaleX*-this.x;this.y=scaleY*-this.y;this.width=scaleX*this.oldElemWidth;this.height=scaleY*this.oldElemHeight;delete this.oldElemWidth;delete this.oldElemHeight}}
this.imgWidth=iw;this.imgHeight=ih};CropRectangle.prototype.normalize=function(){this.imgWidth=Math.max(this.imgWidth,1);this.imgHeight=Math.max(this.imgHeight,1);if(this.width<=0)
this.width=this.height?this.imgWidth*this.height/this.imgHeight:this.imgWidth;if(this.height<=0)
this.height=this.width?this.imgHeight*this.width/this.imgWidth:this.imgHeight;if(this.width>this.imgWidth||this.height>this.imgHeight){var k=Math.min(this.imgWidth/this.width,this.imgHeight/this.height);this.width*=k;this.height*=k}
this.x=Math.min(Math.max(this.x,0),this.imgWidth-this.width);this.y=Math.min(Math.max(this.y,0),this.imgHeight-this.height)};CropRectangle.prototype.isCoveringAll=function(){return this.x===0&&this.y===0&&this.width===this.imgWidth&&this.height===this.imgHeight};return CropRectangle}());exports.CropRectangle=CropRectangle;var CropToolToolbar=(function(){function CropToolToolbar(onApply,onCancel,onChange){var _this=this;this.onChange=onChange;this.changeTimeout=0;this.elem=(0,jquery_73.default)('<div>').addClass('wb-crop-tool-tb');this.zoom=(0,jquery_73.default)('<span>').addClass('wb-crop-label');(0,jquery_73.default)('<span>').addClass('wb-label').text(__('Size')+':').appendTo(this.zoom);this.infoWidthInput=(0,jquery_73.default)('<input>').addClass('form-control').attr({type:'text'}).on('mousedown',function(e){return e.stopPropagation()}).on('keyup',function(){return _this.onInputChange()}).appendTo(this.zoom)[0];(0,jquery_73.default)('<span>').addClass('wb-label').html('&times;').appendTo(this.zoom);this.infoHeightInput=(0,jquery_73.default)('<input>').addClass('form-control').attr({type:'text'}).on('mousedown',function(e){return e.stopPropagation()}).on('keyup',function(){return _this.onInputChange()}).appendTo(this.zoom)[0];(0,jquery_73.default)('<span>').addClass('wb-label wb-block').text(__('Zoom')+':').appendTo(this.zoom);this.infoZoomInput=(0,jquery_73.default)('<input>').addClass('form-control').attr({type:'text'}).on('mousedown',function(e){return e.stopPropagation()}).on('keyup',function(){return _this.onInputChange()}).appendTo(this.zoom)[0];(0,jquery_73.default)('<span>').addClass('wb-label').text('%').appendTo(this.zoom);this.elem.append(this.zoom).append((0,jquery_73.default)('<span class="fa fa-times wb-crop-btn">').on('click touchend',onCancel)).append((0,jquery_73.default)('<span class="fa fa-check wb-crop-btn">').on('click touchend',onApply))}
CropToolToolbar.prototype.onInputChange=function(){var _this=this;var width=parseInt(this.infoWidthInput.value.trim(),10);if(isNaN(width))
width=0;var height=parseInt(this.infoHeightInput.value.trim(),10);if(isNaN(height))
height=0;var zoom=parseInt(this.infoZoomInput.value.trim(),10);if(isNaN(zoom))
zoom=0;if(width>0&&height>0&&zoom>0){if(this.changeTimeout>0)
clearTimeout(this.changeTimeout);this.changeTimeout=setTimeout(function(){_this.onChange(width,height,zoom);_this.changeTimeout=0},500)}};CropToolToolbar.prototype.setInfo=function(width,height,zoom){this.infoWidthInput.value=''+Math.round(width);this.infoHeightInput.value=''+Math.round(height);this.infoZoomInput.value=''+Math.round(zoom)};CropToolToolbar.prototype.updatePosition=function(right,bottom,fixed){if(fixed){this.elem.css({left:right-(Math.max(this.elem.outerWidth(!0),48)-2),top:bottom+2,bottom:'auto',margin:0,padding:0,background:'none',})}else{this.elem.css({left:'',top:'',bottom:'',margin:'',padding:'',background:'',})}};return CropToolToolbar}());var requestFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||(function(callback){setTimeout(callback,16)});var CropTool=(function(){function CropTool(){this.cropRect=null;this.image=null;this.frameRect=null;this.trackElement=null;this.borders={left:0,right:0,top:0,bottom:0};this.applyCallback=null;this.cancelCallback=null;this.ui=null;this.keyDownHandler=null;this.touchDownHandler=null;this.touchWheelHandler=null;this.touchMoveHandler=null;this.touchEndHandler=null;this.touchCancelHandler=null;this.lastDragStartTime=0;this.minCropWidth=30;this.minCropHeight=30;this.controlInfo=null}
CropTool.prototype.beginCrop=function(trackElement,image,cropRect,borders,applyCallback,cancelCallback){if(cancelCallback===void 0){cancelCallback=null}
var $track=(0,jquery_73.default)(trackElement);if(!$track.length)
throw new Error("Cannot track an empty jQuery element set");if(this.trackElement)
throw new Error("Crop tool is already active");this.cropRect=new CropRectangle(cropRect);this.image=image.cloneNode(!1);this.trackElement=(0,jquery_73.default)(trackElement).get(0);this.applyCallback=applyCallback;this.cancelCallback=cancelCallback;this.borders=borders;if(!this.cropRect.width||!this.cropRect.height){var bounds=this.trackElement.getBoundingClientRect();this.cropRect.reset(this.image,bounds.width/bounds.height,image.naturalWidth,image.naturalHeight)}else{this.cropRect.update(this.image,image.naturalWidth,image.naturalHeight)}
this.updateScreenRect();return this};CropTool.prototype.setCropSize=function(width,height,zoom){if(!this.cropRect||!this.frameRect)
return;this.cropRect.width=width;this.cropRect.height=height;var pw=this.frameRect.width;var ph=this.frameRect.height;this.frameRect.width=(zoom/100)*this.cropRect.imgWidth;this.frameRect.height=this.frameRect.width*this.frameRect.height/pw;this.frameRect.x+=(pw-this.frameRect.width)/2;this.frameRect.y+=(ph-this.frameRect.height)/2;this.update()};CropTool.prototype.endCrop=function(){if(!this.trackElement||!this.cropRect)
throw new Error("Cannot end cropping that was not started");this.trackElement=null;this.frameRect=null;this.update();if(this.applyCallback)
this.applyCallback.call(window,this.cropRect);};CropTool.prototype.cancelCrop=function(){this.trackElement=null;this.frameRect=null;this.update();if(this.cancelCallback)
this.cancelCallback.call(window);};CropTool.prototype.updateScreenRect=function(){if(!this.trackElement||!this.cropRect)
return;if(!document.body.contains(this.trackElement)){this.cancelCrop();return}
requestFrame(this.updateScreenRect.bind(this));if(this.frameRect)
return;var rect=this.trackElement.getBoundingClientRect();var fitWidth=rect.width-this.borders.left-this.borders.right;var fitHeight=rect.height-this.borders.top-this.borders.bottom;var targetWidth=fitWidth;var targetHeight=fitWidth*this.cropRect.height/this.cropRect.width;if(targetHeight>fitHeight){targetWidth=fitHeight*this.cropRect.width/this.cropRect.height;targetHeight=fitHeight}
var scaleX=targetWidth/this.cropRect.width;var scaleY=targetHeight/this.cropRect.height;var screenWidth=(0,jquery_73.default)(window).width();var screenHeight=(0,jquery_73.default)(window).height();var frameRect={x:Math.round((screenWidth-targetWidth)/2-this.cropRect.x*scaleX),y:Math.round((screenHeight-targetHeight)/2-this.cropRect.y*scaleY),width:Math.round(this.cropRect.imgWidth*scaleX),height:Math.round(this.cropRect.imgHeight*scaleY),};if(frameRect.width<=0||frameRect.height<=0){this.cancelCrop();return}
this.frameRect=frameRect;this.update()};CropTool.prototype.getEventPointers=function(e){var pointers=[];if(e.type==="touchstart"||e.type==="touchmove"){var touches=e.originalEvent.touches;for(var i=0,c=touches.length;i<c;i++){pointers.push(new CommonTypes_9.Vector2(touches[i].clientX,touches[i].clientY))}}else if(e.type==="mousedown"||e.type==="mousemove"||e.type==="mouseup"){pointers.push(new CommonTypes_9.Vector2(e.clientX,e.clientY))}
return pointers};CropTool.prototype.getPointerPositionData=function(pointers){var center,distance=0;if(pointers.length>1){distance=pointers[1].subtract(pointers[0]).length();center=pointers[0].add(pointers[1]).scale(0.5)}else center=pointers[0];return{center:center,distance:distance}};CropTool.prototype.handleControls=function(e,rectMode){if(rectMode===void 0){rectMode=!1}
if(!this.cropRect||!this.frameRect)
return;var pointers=this.getEventPointers(e);if(pointers.length){var op=(pointers.length===1)?"pan":"zoom";if(!this.controlInfo||this.controlInfo.type!==op){var _a=this.getPointerPositionData(pointers),center=_a.center,distance=_a.distance;var centerOnFrame=center.subtract(this.frameRect);this.controlInfo={type:op,rectMode:rectMode,start:pointers,startCenter:center,startDistance:distance,startCenterOnFrame:centerOnFrame,initialRect:rectMode?__assign({},this.cropRect):__assign({},this.frameRect),}}else{var deltaScale=void 0;var _b=this.getPointerPositionData(pointers),center=_b.center,distance=_b.distance;var deltaCenter=center.subtract(this.controlInfo.startCenter);if(this.controlInfo.type==="pan")
deltaScale=1;else deltaScale=distance/this.controlInfo.startDistance;if(this.controlInfo.rectMode){var scaleX=this.frameRect.width/this.cropRect.imgWidth;var scaleY=this.frameRect.height/this.cropRect.imgHeight;this.cropRect.x=this.controlInfo.initialRect.x+deltaCenter.x/scaleX;this.cropRect.y=this.controlInfo.initialRect.y+deltaCenter.y/scaleY}else{this.frameRect.x=this.controlInfo.initialRect.x+deltaCenter.x*deltaScale;this.frameRect.y=this.controlInfo.initialRect.y+deltaCenter.y*deltaScale;this.frameRect.width=this.controlInfo.initialRect.width*deltaScale;this.frameRect.height=this.controlInfo.initialRect.height*deltaScale}
this.update()}}
if(e.type==="touchend"||e.type==="touchcancel"||e.type==="mouseup"){this.controlInfo=null}};CropTool.prototype.handleCropResize=function(e,ui){if(!this.frameRect||!this.cropRect)
return;var scaleX=this.frameRect.width/this.cropRect.imgWidth;var scaleY=this.frameRect.height/this.cropRect.imgHeight;var keepRatio=(e.ctrlKey||e.shiftKey);var byPosX=ui.axis=='w'||ui.axis=='nw'||ui.axis=='sw';var byPosY=ui.axis=='n'||ui.axis=='nw'||ui.axis=='ne';var bySizeX=ui.axis=='e'||ui.axis=='se'||ui.axis=='ne';var bySizeY=ui.axis=='s'||ui.axis=='se'||ui.axis=='sw';if(byPosX){if(ui.position.left<this.frameRect.x){ui.position.left=this.frameRect.x;ui.size.width=ui.originalPosition.left+ui.originalSize.width-ui.position.left}else if(ui.size.width<this.minCropWidth){ui.size.width=this.minCropWidth;ui.position.left=ui.originalPosition.left+ui.originalSize.width-ui.size.width}}
if(byPosY){if(ui.position.top<this.frameRect.y){ui.position.top=this.frameRect.y;ui.size.height=ui.originalPosition.top+ui.originalSize.height-ui.position.top}else if(ui.size.height<this.minCropHeight){ui.size.height=this.minCropHeight;ui.position.top=ui.originalPosition.top+ui.originalSize.height-ui.size.height}}
if(bySizeX){if((ui.position.left-this.frameRect.x+ui.size.width)>this.frameRect.width){ui.size.width=this.frameRect.width-(ui.position.left-this.frameRect.x)}else if(ui.size.width<this.minCropWidth){ui.size.width=this.minCropWidth}}
if(bySizeY){if((ui.position.top-this.frameRect.y+ui.size.height)>this.frameRect.height){ui.size.height=this.frameRect.height-(ui.position.top-this.frameRect.y)}else if(ui.size.height<this.minCropHeight){ui.size.height=this.minCropHeight}}
if(keepRatio){var os=ui.originalSize;var pw=ui.size.width;var ph=ui.size.height;if(ui.axis=='n'||ui.axis=='s'){ui.size.width=ui.size.height*os.width/os.height;if((ui.position.left-this.frameRect.x+ui.size.width)>=this.frameRect.width){ui.size.width=this.frameRect.width-(ui.position.left-this.frameRect.x);ui.size.height=ui.size.width*os.height/os.width}else if(ui.size.width<=this.minCropWidth){ui.size.width=this.minCropWidth;ui.size.height=ui.size.width*os.height/os.width}}else{ui.size.height=ui.size.width*os.height/os.width;if((ui.position.top-this.frameRect.y+ui.size.height)>=this.frameRect.height){ui.size.height=this.frameRect.height-(ui.position.top-this.frameRect.y);ui.size.width=ui.size.height*os.width/os.height}else if(ui.size.height<=this.minCropHeight){ui.size.height=this.minCropHeight;ui.size.width=ui.size.height*os.width/os.height}}
if(byPosX)
ui.position.left+=pw-ui.size.width;if(byPosY){ui.position.top+=ph-ui.size.height;if(ui.position.top<this.frameRect.y){ui.size.height-=this.frameRect.y-ui.position.top;pw=ui.size.width;ui.size.width=ui.size.height*os.width/os.height;if(byPosX)
ui.position.left+=pw-ui.size.width;ui.position.top=this.frameRect.y}}}
this.cropRect.x=(ui.position.left-this.frameRect.x)/scaleX;this.cropRect.y=(ui.position.top-this.frameRect.y)/scaleY;this.cropRect.width=ui.size.width/scaleX;this.cropRect.height=ui.size.height/scaleY;this.update()};CropTool.prototype.update=function(){var _this=this;if(this.trackElement&&this.image&&this.frameRect&&this.cropRect){if(!this.ui){this.ui={image:(0,jquery_73.default)(this.image).attr("class","wb-crop-tool-image").attr("style",""),centerBg:(0,jquery_73.default)('<div>').addClass('wb-crop-tool-center-bg'),center:(0,jquery_73.default)('<div class="wb-crop-tool-center">').append('<div class="wb-crop-gva">').append('<div class="wb-crop-gvb">').append('<div class="wb-crop-gha">').append('<div class="wb-crop-ghb">').append('<div class="wb-crop-lt">').append('<div class="wb-crop-t">').append('<div class="wb-crop-rt">').append('<div class="wb-crop-r">').append('<div class="wb-crop-rb">').append('<div class="wb-crop-b">').append('<div class="wb-crop-lb">').append('<div class="wb-crop-l">').append('<div class="wb-crop-info">'+__('Zoom with mouse wheel')+'<br/>'+__('Keep size ratio with shift')+'</div>'),toolbar:new CropToolToolbar(function(){return _this.endCrop()},function(){return _this.cancelCrop()},function(w,h,zoom){return _this.setCropSize(w,h,zoom)}),leftOverlay:(0,jquery_73.default)('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-left">'),rightOverlay:(0,jquery_73.default)('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-right">'),topOverlay:(0,jquery_73.default)('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-top">'),bottomOverlay:(0,jquery_73.default)('<div class="wb-crop-tool-overlay wb-crop-tool-overlay-bottom">'),};if(this.keyDownHandler)(0,jquery_73.default)(document.body).off("keydown",this.keyDownHandler);this.ui.center.on("touchstart mousedown",function(e){if(_this.controlInfo)
return;e.stopImmediatePropagation();e.preventDefault();var pointers=_this.getEventPointers(e);if(pointers.length){var time=Date.now();if(time-_this.lastDragStartTime<=250){_this.endCrop();return}
_this.lastDragStartTime=time;_this.handleControls(e,!0)}});(0,jquery_73.default)(document.body).append(this.ui.image,this.ui.leftOverlay,this.ui.rightOverlay,this.ui.topOverlay,this.ui.bottomOverlay,this.ui.centerBg,this.ui.center,this.ui.toolbar.elem).on("keydown",this.keyDownHandler=function(e){if(e.key==="Enter"||e.key==="Escape"){e.stopImmediatePropagation();e.preventDefault();if(e.key==="Enter")
_this.endCrop();else _this.cancelCrop()}});(0,jquery_73.default)(window).on("touchstart mousedown",this.touchDownHandler=function(e){if(_this.controlInfo)
return;e.stopImmediatePropagation();e.preventDefault();var pointers=_this.getEventPointers(e);if(pointers.length){var time=Date.now();if(time-_this.lastDragStartTime<=250){_this.endCrop();return}
_this.lastDragStartTime=time;_this.handleControls(e)}}).on("touchmove mousemove",this.touchMoveHandler=function(e){if(!_this.controlInfo)
return;_this.handleControls(e)}).on("touchend mouseup",this.touchEndHandler=function(e){if(!_this.controlInfo)
return;_this.handleControls(e)}).on("touchcancel",this.touchCancelHandler=function(e){if(_this.controlInfo&&_this.frameRect){_this.frameRect.x=_this.controlInfo.initialRect.x;_this.frameRect.y=_this.controlInfo.initialRect.y;_this.controlInfo=null;_this.update()}});window.addEventListener("wheel",this.touchWheelHandler=function(e){if(!_this.ui||!_this.cropRect||!_this.frameRect||_this.controlInfo){return}
e.stopImmediatePropagation();e.preventDefault();var scrollUp=(('deltaY' in e)?e.deltaY:e.detail)<0;var scale=scrollUp?1.1:0.9;var ratioX=(e.clientX-_this.frameRect.x)/_this.frameRect.width;var ratioY=(e.clientY-_this.frameRect.y)/_this.frameRect.height;var nWidth=_this.frameRect.width*scale;var nHeight=_this.frameRect.height*scale;if(nWidth<_this.minCropWidth||nHeight<_this.minCropHeight)
return;var fitPixelsWidth=(_this.minCropWidth/(nWidth/_this.cropRect.imgWidth));var fitPixelsHeight=(_this.minCropHeight/(nHeight/_this.cropRect.imgHeight));if((fitPixelsWidth<5||fitPixelsHeight<5)&&scrollUp)
return;_this.frameRect.x-=(nWidth-_this.frameRect.width)*ratioX;_this.frameRect.y-=(nHeight-_this.frameRect.height)*ratioY;_this.frameRect.width=nWidth;_this.frameRect.height=nHeight;_this.update()},{passive:!1});this.ui.center.resizableExt({handles:'n, e, s, w, ne, se, sw, nw',minWidth:10,minHeight:10,start:function(e){return e.stopPropagation()},resize:function(e,ui){_this.handleCropResize(e,ui);e.stopPropagation()},stop:function(e,ui){_this.handleCropResize(e,ui);e.stopPropagation()},})}
this.cropRect.normalize();var scaleX=this.frameRect.width/this.cropRect.imgWidth;var scaleY=this.frameRect.height/this.cropRect.imgHeight;var $win=(0,jquery_73.default)(window);var windowWidth=$win.width();var windowHeight=$win.height();var x=Math.round(this.frameRect.x+this.cropRect.x*scaleX);var y=Math.round(this.frameRect.y+this.cropRect.y*scaleY);var width=Math.round(this.cropRect.width*scaleX);var height=Math.round(this.cropRect.height*scaleY);var right=x+width;var bottom=y+height;this.ui.leftOverlay.css({display:(x>0)?"":"none",width:x,});this.ui.rightOverlay.css({display:(right<windowWidth)?"":"none",left:right,});this.ui.topOverlay.css({display:(right>0&&x<windowWidth&&y>0)?"":"none",left:x,width:width,height:y,});this.ui.bottomOverlay.css({display:(right>0&&x<windowWidth&&bottom<windowHeight)?"":"none",left:x,top:bottom,width:width,});this.ui.centerBg.css({left:this.frameRect.x,top:this.frameRect.y,width:this.frameRect.width,height:this.frameRect.height,});this.ui.center.css({left:x,top:y,width:width,height:height,});this.ui.image.css({left:this.frameRect.x,top:this.frameRect.y,width:this.frameRect.width,height:this.frameRect.height,});var screenHeight=(0,jquery_73.default)(window).height();this.ui.toolbar.setInfo(this.cropRect.width,this.cropRect.height,this.frameRect.width/this.cropRect.imgWidth*100);this.ui.toolbar.updatePosition(right,bottom,screenHeight>(bottom+24))}else{if(this.ui){this.ui.image.remove();this.ui.toolbar.elem.remove();this.ui.leftOverlay.remove();this.ui.rightOverlay.remove();this.ui.topOverlay.remove();this.ui.bottomOverlay.remove();this.ui.centerBg.remove();this.ui.center.remove()}
if(this.keyDownHandler)(0,jquery_73.default)(document.body).off("keydown",this.keyDownHandler);if(this.touchDownHandler)(0,jquery_73.default)(window).off("touchstart mousedown",this.touchDownHandler);if(this.touchWheelHandler)
window.removeEventListener("wheel",this.touchWheelHandler);if(this.touchMoveHandler)(0,jquery_73.default)(window).off("touchmove mousemove",this.touchMoveHandler);if(this.touchEndHandler)(0,jquery_73.default)(window).off("touchend mouseup",this.touchEndHandler);if(this.touchCancelHandler)(0,jquery_73.default)(window).off("touchcancel",this.touchCancelHandler);}};CropTool.renderCanvas=function(image,cropRect){var rect=new CropRectangle(cropRect);var canvas=document.createElement("canvas");canvas.width=Math.round(rect.width);canvas.height=Math.round(rect.height);var ctx=canvas.getContext("2d");if(ctx){try{ctx.drawImage(image,Math.round(-rect.x),Math.round(-rect.y))}catch(_){}}
return canvas};return CropTool}());exports.CropTool=CropTool});define("js/util/ClipboardApi",["require","exports","jquery","js/Service"],function(require,exports,jquery_74,Service_19){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=exports.getFromClipboard=exports.prepareClipboardItems=exports.buildVideoTypeRegexp=exports.buildAudioTypeRegexp=exports.buildImageTypeRegexp=exports.storeItemsToClipboard=void 0;var input=null;var clipboard=null;function storeItemsToClipboard(items){var textItems=[];var htmlItems=[];for(var _i=0,items_4=items;_i<items_4.length;_i++){var item=items_4[_i];if(item['text/plain']!==undefined){textItems.push(item['text/plain'])}
if(item['text/html']!==undefined){htmlItems.push(item['text/html'])}}
var text="["+textItems.join(",")+"]";var html=htmlItems.join("");clipboard=text;if(navigator.clipboard&&navigator.clipboard.write){navigator.clipboard.write([new ClipboardItem({'text/plain':new Blob([text],{type:'text/plain'}),'text/html':new Blob([html],{type:'text/html'})})]).catch(function(error){console.error(error);storeToClipboardWithoutApi(text)})}else if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(text).catch(function(){return storeToClipboardWithoutApi(text)})}else{storeToClipboardWithoutApi(text)}}
exports.storeItemsToClipboard=storeItemsToClipboard;function storeToClipboardWithoutApi(text){if(!input)
return;input.style.display='block';input.value=text;input.focus();if(typeof input.setSelectionRange==='function'){input.setSelectionRange(0,input.value.length)}else{input.select()}
document.execCommand('copy');input.blur();input.style.display='none'}
function buildImageTypeRegexp(){var modes=Service_19.default.mediaLibrary.getModes();var extensions=modes.image?modes.image.extensions.split(','):null;return extensions?new RegExp('(\\.|\\/)('+extensions.join('|')+')$'):null}
exports.buildImageTypeRegexp=buildImageTypeRegexp;function buildAudioTypeRegexp(){var modes=Service_19.default.mediaLibrary.getModes();var extensions=modes.audio?modes.audio.extensions.split(','):null;if(extensions&&extensions.indexOf('mp3')>=0){extensions.push('mpeg')}
return extensions?new RegExp('(\\.|\\/)('+extensions.join('|')+')$'):null}
exports.buildAudioTypeRegexp=buildAudioTypeRegexp;function buildVideoTypeRegexp(){var modes=Service_19.default.mediaLibrary.getModes();var extensions=modes.video?modes.video.extensions.split(','):null;return extensions?new RegExp('(\\.|\\/)('+extensions.join('|')+')$'):null}
exports.buildVideoTypeRegexp=buildVideoTypeRegexp;function prepareClipboardItems(items){var deferred=jquery_74.default.Deferred();var imageRegexp=buildImageTypeRegexp();var audioRegexp=buildAudioTypeRegexp();var videoRegexp=buildVideoTypeRegexp();var result=[];var waitForNum=0;if(items instanceof DataTransferItemList){var done_1=!1;for(var i=0,c=items.length;i<c;i++){var item=items[i];(function(type,item){if(type=='text/plain'||type=='text/html'){++waitForNum;item.getAsString(function(data){result.push({type:type,data:data});--waitForNum;if(done_1&&waitForNum==0)
deferred.resolve(result);})}else if(imageRegexp&&imageRegexp.test(item.type)){result.push({type:type,data:item.getAsFile()})}else if(audioRegexp&&audioRegexp.test(item.type)){result.push({type:type,data:item.getAsFile()})}else if(videoRegexp&&videoRegexp.test(item.type)){result.push({type:type,data:item.getAsFile()})}})(item.type,item)}
done_1=!0;if(done_1&&waitForNum==0)
deferred.resolve(result);}else{for(var _i=0,items_5=items;_i<items_5.length;_i++){var item=items_5[_i];for(var _a=0,_b=item.types;_a<_b.length;_a++){var type=_b[_a];(function(type,item){++waitForNum;item.getType(type).then(function(blob){if(type=='text/plain'||type=='text/html'){blob.text().then(function(data){result.push({type:type,data:data});--waitForNum;if(waitForNum==0)
deferred.resolve(result);})}else{result.push({type:type,data:blob});--waitForNum;if(waitForNum==0)
deferred.resolve(result);}})})(type,item)}}}
return deferred.promise()}
exports.prepareClipboardItems=prepareClipboardItems;function getFromClipboard(){var deferred=jquery_74.default.Deferred();var buildBackdrop=function(){var backdrop=(0,jquery_74.default)('<div>');backdrop.css({position:'fixed',left:0,right:0,top:0,bottom:0,background:'rgba(0,0,0,0.7)',zIndex:100,});(0,jquery_74.default)(document.body).append(backdrop);return backdrop};if(navigator.clipboard&&navigator.clipboard.read){var backdrop_1=buildBackdrop();navigator.clipboard.read().then(function(value){backdrop_1.remove();prepareClipboardItems(value).then(function(items){return deferred.resolve(items)})}).catch(function(error){console.error(error);backdrop_1.remove();getFromClipboardWithoutApi(deferred)})}else if(navigator.clipboard&&navigator.clipboard.readText){var backdrop_2=buildBackdrop();navigator.clipboard.readText().then(function(value){backdrop_2.remove();deferred.resolve([{type:'text/plain',data:value}])}).catch(function(){backdrop_2.remove();getFromClipboardWithoutApi(deferred)})}else{getFromClipboardWithoutApi(deferred)}
return deferred.promise()}
exports.getFromClipboard=getFromClipboard;function getFromClipboardWithoutApi(deferred){var result=null;if(input){input.style.display='block';input.value='';input.focus();document.execCommand('paste');result=input.value;input.blur();input.style.display='none'}
if(result&&result.length){deferred.resolve([{type:'text/plain',data:result}])}else if(clipboard&&clipboard.length){deferred.resolve([{type:'text/plain',data:clipboard}])}else{deferred.reject()}}
function init(doc){if(input)
return;input=doc.createElement('textarea');input.style.position='fixed';input.style.width='20px';input.style.height='20px';input.style.overflow='hidden';input.style.border='none';input.style.opacity='0.1';input.style.display='none';input.inputMode='none';doc.body.appendChild(input)}
exports.init=init});define("js/ui/SidebarPanel",["require","exports","js/Service","js/util/EventUtil","js/UserInput","jquery"],function(require,exports,Service_20,EventUtil_6,UserInput_2,jquery_75){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SidebarPanel=void 0;var commonOnUpInit=!1;var startHandle=null;function commonOnMove(e){if(!startHandle)
return;if(!startHandle.moveStarted){startHandle.start(e);return}
var py=(0,EventUtil_6.posFromEvent)(e).top;var newHeight=startHandle.sizeFrom.height+(py-startHandle.posFrom.top);var height=newHeight*100/startHandle.containerHeight;startHandle.setHeight(height)}
function commonOnUp(e){if(!startHandle)
return;startHandle.saveHeight();startHandle.cancel()}
var SidebarPanelItem=(function(){function SidebarPanelItem(id,initialState,contentElem,container,fixed,panelName,noScrollBars){if(noScrollBars===void 0){noScrollBars=!1}
var _this=this;this.id=id;this.contentElem=contentElem;this.container=container;this.fixed=fixed;this.collapsed=!1;this.height=0;this.moveStarted=!1;this.startEvent=null;this.posFrom={left:0,top:0};this.sizeFrom={width:0,height:0};this.containerHeight=0;this.headerElem=null;this.collapsed=(initialState&&typeof initialState.collapsed==="boolean")?initialState.collapsed:this.collapsed;this.height=(initialState&&typeof initialState.height==="number")?initialState.height:this.height;this.elem=(0,jquery_75.default)('<div class="wb-sidebar-item"/>');if(noScrollBars)
this.elem.addClass("wb-sidebar-item-no-scrollbars");if(fixed)
this.elem.addClass('wb-sidebar-item-fixed');if(panelName!==null){this.headerElem=(0,jquery_75.default)('<div class="wb-sidebar-item-header"/>').appendTo(this.elem);this.headerElem.on("click",function(){_this.setCollapsed(!_this.collapsed);_this.saveCollapsed()});this.headerElem.append((0,jquery_75.default)('<div class="wb-sidebar-item-collapse">'+'<i class="wb-sidebar-item-closed fa fa-caret-right"></i>'+'<i class="wb-sidebar-item-open fa fa-caret-down"></i>'+'</div>'),document.createTextNode(panelName))}
this.contentContainerElem=(0,jquery_75.default)('<div class="wb-sidebar-item-content"/>').appendTo(this.elem);contentElem.appendTo(this.contentContainerElem);this.resizeHandle=(0,jquery_75.default)('<div>').addClass('wb-sidebar-item-rhandle').on('mousedown touchstart',function(e){return _this.onDown(e)}).on('click',function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault()});if(!commonOnUpInit){commonOnUpInit=!0;var doc=(0,jquery_75.default)(document.body);doc.on('mousemove touchmove',function(e){return commonOnMove(e)});doc.on('mouseup touchend touchcancel',function(e){return commonOnUp(e)})}
this.updateStyle()}
SidebarPanelItem.prototype.setCollapsed=function(value){this.collapsed=value;this.updateStyle()};SidebarPanelItem.prototype.appendTo=function(parent){parent.append(this.elem);parent.append(this.resizeHandle)};SidebarPanelItem.prototype.detach=function(){this.elem.detach();this.resizeHandle.detach()};SidebarPanelItem.prototype.setHeight=function(height){this.height=height;this.updateStyle()};SidebarPanelItem.prototype.updateStyle=function(){if(this.collapsed){this.elem.addClass("collapsed");this.elem.css({height:'auto',flex:'0 1 auto',})}else{this.elem.removeClass("collapsed");if(this.height>0){this.elem.css({height:this.height+'%',flex:'0 0 auto',})}else{this.elem.css({height:'',flex:'',})}}};SidebarPanelItem.prototype.getStoredState=function(){return this.container.getItemState(this.id,!0)};SidebarPanelItem.prototype.saveCollapsed=function(){var state=this.getStoredState();state.collapsed=this.collapsed;this.container.saveState()};SidebarPanelItem.prototype.saveHeight=function(){var state=this.getStoredState();state.height=this.height;this.container.saveState()};SidebarPanelItem.prototype.onDown=function(e){this.moveStarted=!1;this.startEvent=e;startHandle=this;e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();return!1};SidebarPanelItem.prototype.cancel=function(){this.moveStarted=!1;this.startEvent=null;startHandle=null};SidebarPanelItem.prototype.start=function(e){var _a,_b;if(!this.startEvent||!startHandle){this.cancel();return}
var se=this.startEvent;if((0,EventUtil_6.moveEventDiff)(se,e)<=4)
return;this.moveStarted=!0;(_a=(0,EventUtil_6.posFromEvent)(se),this.posFrom.left=_a.left,this.posFrom.top=_a.top);(_b=this.elem.get(0).getBoundingClientRect(),this.sizeFrom.width=_b.width,this.sizeFrom.height=_b.height);this.containerHeight=this.container.getHeight()};return SidebarPanelItem}());var SidebarPanel=(function(){function SidebarPanel(builderCanvas){var _this=this;this.builderCanvas=builderCanvas;this.siteElem=null;this.visible=!1;this.defWidth=300;this.items={};this.readState();this.elem=(0,jquery_75.default)('<div>').addClass('wb-sidebar');this.elemRaw=this.elem[0];builderCanvas.append(this.elem);this.toggleBtn=(0,jquery_75.default)('<div>').addClass('wb-sidebar-toggle').on('click',function(e){UserInput_2.UserInput.blockNextMouseUpDeselect=!0;var upHandler=function(){setTimeout(function(){UserInput_2.UserInput.blockNextMouseUpDeselect=!1},10);(0,jquery_75.default)(document.body).off("mouseup touchend touchcancel",upHandler)};(0,jquery_75.default)(document.body).on("mouseup touchend touchcancel",upHandler);_this.toggle()})[0];builderCanvas.append(this.toggleBtn);this.toggleIcon=(0,jquery_75.default)('<span>').addClass('wb-sidebar-toggle-icon fa').appendTo(this.toggleBtn)[0];this.setVisible(this.visible,!0);var updateSizeTimer=null;(0,jquery_75.default)(window).on('resize',function(){if(updateSizeTimer)
clearTimeout(updateSizeTimer);updateSizeTimer=setTimeout(function(){return _this.updateSize()},150);_this.updateSize()});this.elem.on("mousedown touchstart",function(e){UserInput_2.UserInput.blockNextMouseUpDeselect=!0;var upHandler=function(){setTimeout(function(){UserInput_2.UserInput.blockNextMouseUpDeselect=!1},10);(0,jquery_75.default)(document.body).off("mouseup touchend touchcancel",upHandler)};(0,jquery_75.default)(document.body).on("mouseup touchend touchcancel",upHandler)}).on("mouseup touchend touchcancel",function(e){}).on("click",function(e){})}
SidebarPanel.prototype.getHeight=function(){return this.elem.outerHeight()};SidebarPanel.prototype.getElem=function(){return this.elem};SidebarPanel.prototype.getItemState=function(id,create){if(create===void 0){create=!1}
if(!this.state.panels||typeof this.state.panels!=="object"){if(!create)
return null;this.state.panels={}}
if(!this.state.panels.hasOwnProperty(id)||!this.state.panels[id]||typeof this.state.panels[id]!=="object"){if(!create)
return null;this.state.panels[id]={}}
return this.state.panels[id]};SidebarPanel.prototype.setSiteElem=function(siteElem){this.siteElem=siteElem;this.setVisible(this.visible,!0)};SidebarPanel.prototype.add=function(id,elem,fixed,panelName,defaultCollapsed,defaultHeight,noScrollBars){if(fixed===void 0){fixed=!1}
if(panelName===void 0){panelName=null}
if(defaultCollapsed===void 0){defaultCollapsed=!1}
if(defaultHeight===void 0){defaultHeight=0}
if(noScrollBars===void 0){noScrollBars=!1}
var itemState=jquery_75.default.extend(!0,{collapsed:defaultCollapsed,height:defaultHeight},this.getItemState(id,!1));var item=new SidebarPanelItem(id,itemState,elem,this,fixed,panelName,noScrollBars);this.items[id]=item;item.appendTo(this.elem);return item};SidebarPanel.prototype.remove=function(item){if(!this.items.hasOwnProperty(item.id))
return;delete this.items[item.id];item.detach()};SidebarPanel.prototype.toggle=function(){this.setVisible(!this.visible);this.state.open=this.visible;this.saveState()};SidebarPanel.prototype.updateSize=function(){var height=Service_20.Service.uiManager.getManager().getToolbarHeight();this.elemRaw.style.top=height+'px'};SidebarPanel.prototype.isVisible=function(){return this.visible};SidebarPanel.prototype.setVisible=function(visible,initial){if(initial===void 0){initial=!1}
if(!initial&&this.visible==visible)
return;this.visible=visible;if(visible){this.updateSize();this.elemRaw.style.width=this.defWidth+'px';this.elemRaw.style.display='flex';this.toggleIcon.classList.remove('fa-angle-double-left');this.toggleIcon.classList.add('fa-angle-double-right');this.toggleBtn.style.right=(this.defWidth+45)+'px';this.toggleBtn.classList.add('wb-open');if(this.builderCanvas){this.builderCanvas.setRightMargin(this.defWidth);(0,jquery_75.default)(window).trigger('resize')}}else{this.elemRaw.style.display='none';this.toggleIcon.className='wb-sidebar-toggle-icon fa';this.toggleIcon.classList.remove('fa-angle-double-right');this.toggleIcon.classList.add('fa-angle-double-left');this.toggleBtn.style.right='';this.toggleBtn.classList.remove('wb-open');if(this.builderCanvas){this.builderCanvas.setRightMargin(0);(0,jquery_75.default)(window).trigger('resize')}}};SidebarPanel.prototype.blinkToggle=function(enable){if(enable){this.toggleBtn.classList.add('blink')}else{this.toggleBtn.classList.remove('blink')}};SidebarPanel.prototype.readState=function(){var _a,_b,_c,_d,_e;var stateString=(_a=window.localStorage)===null||_a===void 0?void 0:_a.getItem('wb-sidebar');if(typeof stateString==="string"){this.state=JSON.parse(stateString)}
if(!this.state||typeof this.state!=="object"){this.state={};var val=(_b=window.localStorage)===null||_b===void 0?void 0:_b.getItem('wb-sidebar-open');var needsSave=!1;if(typeof val==='string'){this.state.open=val=='1';needsSave=!0}
var heightsVal=(_c=window.localStorage)===null||_c===void 0?void 0:_c.getItem('wb-sidebar-height');if(heightsVal){var heights=JSON.parse(heightsVal);if((heights instanceof Array)&&heights.length){var h=parseFloat(heights[0]);if(!isNaN(h)&&h>=0){var itemState=this.getItemState("site-tree",!0);itemState.height=h;needsSave=!0}}}(_d=window.localStorage)===null||_d===void 0?void 0:_d.removeItem("wb-sidebar-open");(_e=window.localStorage)===null||_e===void 0?void 0:_e.removeItem("wb-sidebar-height");if(needsSave)
this.saveState();}
this.visible=(typeof this.state.open==="boolean")?this.state.open:((0,jquery_75.default)(window).width()>=580)};SidebarPanel.prototype.saveState=function(){if(!window.localStorage)
return;window.localStorage.setItem('wb-sidebar',JSON.stringify(this.state))};return SidebarPanel}());exports.SidebarPanel=SidebarPanel});define("js/ui/TextStyleSelector",["require","exports","js/UIComponent","js/jquery-builder","js/Service","js/ColorPicker","js/UIButton","js/util/EventUtil"],function(require,exports,UIComponent_60,jquery_builder_13,Service_21,ColorPicker_11,UIButton_8,EventUtil_7){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TextStyleSelector=void 0;var StyleItemType;(function(StyleItemType){StyleItemType[StyleItemType.Block=0]="Block";StyleItemType[StyleItemType.Inline=1]="Inline";StyleItemType[StyleItemType.List=2]="List"})(StyleItemType||(StyleItemType={}));var TextStyleSelector=(function(_super){__extends(TextStyleSelector,_super);function TextStyleSelector(createStyle,ctrlStyle){var _this=_super.call(this,'div')||this;_this.createStyle=createStyle;_this.ctrlStyle=ctrlStyle;_this.styles=[];_this.styleIndex={};_this.selectedStyle=null;_this.isSelectionEmpty=!0;_this.isSelectionInList=!1;_this.previewStyle=null;_this.toolbarElem=null;_this.hoverElements=[];_this.isPreviewMode=!1;_this.ignoreSelectionChanges=!1;_this.lastEventType='';_this.lastEventTime=0;var elem=_this.getElem();elem.addClass('wb-text-style-selector');_this.rawElem=elem[0];_this.itemsElem=(0,jquery_builder_13.default)('<div>').addClass('wb-ctrl-items').on('wheel',function(e){e.preventDefault();var deltaY=e.originalEvent.deltaY;_this.itemsElem[0].scrollLeft+=deltaY}).on('mousemove',function(e){e.stopPropagation();e.preventDefault()}).appendTo(elem);new UIButton_8.UIButton('',undefined,'fa fa-pencil').on('click',function(){var _a;if(_this.toolbarElem)
_this.toolbarElem.removeClass('wb-ctrl-in-dialog');wb_builder.site.changeStyles((_a=_this.selectedStyle)===null||_a===void 0?void 0:_a.style.selector)}).getElem().addClass('wb-ctrl-btn').appendTo(elem);_this.windowResizeFunc=function(){return _this.onToolbarResize()};(0,jquery_builder_13.default)(window).on('resize',_this.windowResizeFunc);_this.documentMoveFunc=function(){return _this.onDocumentMove()};(0,jquery_builder_13.default)(document).on('mousemove',_this.documentMoveFunc);return _this}
TextStyleSelector.prototype.destroy=function(){(0,jquery_builder_13.default)(window).off('resize',this.windowResizeFunc);(0,jquery_builder_13.default)(document).off('mousemove',this.documentMoveFunc);this.rawElem=null;_super.prototype.destroy.call(this)};TextStyleSelector.prototype.loadStyles=function(){var _this=this;this.styles=[];this.styleIndex={};this.itemsElem.empty();var lastStyle=null;var resetTimeout=0;var previewTimeout=0;var styles=wb_builder.site.styles;for(var _i=0,styles_1=styles;_i<styles_1.length;_i++){var s=styles_1[_i];var selector=/^\.([^\ ]+)(?:\ |$)/i.exec(s.selector);if(!selector)
continue;var preview=(0,jquery_builder_13.default)('<div>').addClass('wb-ctrl-preview').text(s.name);var styleElem=(0,jquery_builder_13.default)('<div>').addClass('wb-ctrl-item').attr('title',s.name).append(preview).appendTo(this.itemsElem);var strTag=(typeof s.tag==='string')?s.tag:s.tag[0];var type=StyleItemType.Inline;if(strTag=='p'||/h[0-9]+/.test(strTag)){type=StyleItemType.Block}else if(strTag=='ul'||strTag=='ol'){type=StyleItemType.List}
var styleItem={style:s,editorStyle:this.createStyle({name:s.name,element:(s.tag?s.tag:'span'),attributes:{'class':selector[1]}}),type:type,elem:styleElem,previewElem:preview,};(function(styleItem,self){var touchStartPos=null;styleItem.elem.on('touchstart',function(e){touchStartPos=(0,EventUtil_7.posFromEvent)(e)}).on('click touchend',function(e){var pos=(0,EventUtil_7.posFromEvent)(e);if(touchStartPos&&(Math.abs(touchStartPos.left-pos.left)>5||Math.abs(touchStartPos.top-pos.top)>5)){touchStartPos=null;return}else{touchStartPos=null;if(e.type!=self.lastEventType&&(Date.now()-self.lastEventTime)<100){return}else{self.lastEventType=e.type;self.lastEventTime=Date.now()}}
self.ignoreSelectionChanges=!0;if(previewTimeout)
clearTimeout(previewTimeout);if(resetTimeout)
clearTimeout(resetTimeout);if(self.previewStyle)
self.ctrlStyle.remove(self.previewStyle.editorStyle);self.previewStyle=null;if(lastStyle)
self.ctrlStyle.apply(lastStyle.editorStyle);lastStyle=null;if(self.selectedStyle!==styleItem){self.ctrlStyle.apply(styleItem.editorStyle);self.selectStyle(styleItem,!0)}else{self.ctrlStyle.remove(styleItem.editorStyle);self.selectStyle(null,!0)}
self.ignoreSelectionChanges=!1}).on('mouseover',function(){self.ignoreSelectionChanges=!0;self.hoverElements.push(styleItem.elem);if(resetTimeout)
clearTimeout(resetTimeout);if(self.previewStyle)
self.ctrlStyle.remove(self.previewStyle.editorStyle);if(lastStyle)
self.ctrlStyle.apply(lastStyle.editorStyle);if(!self.isPreviewMode){self.ignoreSelectionChanges=!1;previewTimeout=setTimeout(function(){self.isPreviewMode=!0;styleItem.elem.trigger('mouseover')},300);return}else if(previewTimeout){clearTimeout(previewTimeout)}
if(!lastStyle)
lastStyle=self.selectedStyle;self.selectStyle(lastStyle,!0);self.previewStyle=styleItem;self.ctrlStyle.apply(styleItem.editorStyle);self.ignoreSelectionChanges=!1}).on('mouseout',function(){var idx=self.hoverElements.indexOf(styleItem.elem);if(idx>=0)
self.hoverElements.splice(idx,1);if(previewTimeout)
clearTimeout(previewTimeout);if(resetTimeout)
clearTimeout(resetTimeout);resetTimeout=setTimeout(function(){self.ignoreSelectionChanges=!0;if(self.isPreviewMode){self.isPreviewMode=!1}
if(self.previewStyle){self.ctrlStyle.remove(self.previewStyle.editorStyle);self.previewStyle=null}
if(lastStyle){self.ctrlStyle.apply(lastStyle.editorStyle);self.selectStyle(lastStyle,!0);lastStyle=null}
self.ignoreSelectionChanges=!1},100)})})(styleItem,this);this.styles.push(styleItem);this.styleIndex[s.selector]=styleItem}
this.setSelectionParams(this.isSelectionEmpty,this.isSelectionInList,!0);Service_21.default.style.enumerateRules(styles,function(rules,_,s){if(!(s.selector in _this.styleIndex)||rules.selector!==s.selector)
return;_this.styleIndex[s.selector].previewElem.css(rules.css);if(rules.css.color){_this.styleIndex[s.selector].previewElem.css({backgroundColor:ColorPicker_11.ColorPicker.readableColor(rules.css.color)})}})};TextStyleSelector.prototype.onDocumentMove=function(){var elements=this.hoverElements;this.hoverElements=[];for(var _i=0,elements_9=elements;_i<elements_9.length;_i++){var el=elements_9[_i];el.trigger('mouseout')}};TextStyleSelector.prototype.setSelectionParams=function(isEmpty,inList,force){if(force===void 0){force=!1}
if(this.isSelectionEmpty==isEmpty&&this.isSelectionInList==inList&&!force)
return;this.isSelectionEmpty=isEmpty;this.isSelectionInList=inList;for(var _i=0,_a=this.styles;_i<_a.length;_i++){var style=_a[_i];if((style.type==StyleItemType.Inline&&isEmpty)||(style.type==StyleItemType.List&&!inList)){style.elem.addClass('disabled')}else{style.elem.removeClass('disabled')}}};TextStyleSelector.prototype.selectStyle=function(style,noScroll){if(noScroll===void 0){noScroll=!1}
if(this.selectedStyle===style)
return;if(this.selectedStyle){this.selectedStyle.elem.removeClass('active')}
this.selectedStyle=style;if(style){style.elem.addClass('active');if(!noScroll){var rawElem_1=style.elem[0];setTimeout(function(){try{rawElem_1.scrollIntoView({block:'center',inline:'center',behavior:'smooth'})}catch(ignored){try{rawElem_1.scrollIntoView({block:'center',inline:'center'})}catch(ignored){rawElem_1.scrollIntoView(!1)}}},100)}}};TextStyleSelector.prototype.findStyle=function(element){var styleClasses=element.className.trim().split(/[ \t\r\n]+/);for(var _i=0,styleClasses_1=styleClasses;_i<styleClasses_1.length;_i++){var styleClass=styleClasses_1[_i];var styleKey='.'+styleClass;if(styleKey in this.styleIndex){return this.styleIndex[styleKey]}}
return null};TextStyleSelector.prototype.waitForSize=function(tryCount){var _this=this;if(tryCount===void 0){tryCount=0}
if(!this.rawElem)
return;var rawItemsElem=this.itemsElem[0];if(tryCount==0){rawItemsElem.style.opacity='0';rawItemsElem.style.maxWidth=''}
var newWidth=this.rawElem.clientWidth;if(tryCount==0||!newWidth){if(tryCount>600)
return;window.requestAnimationFrame(function(){return _this.waitForSize(tryCount+1)});return}
rawItemsElem.style.maxWidth=(newWidth-60)+'px';rawItemsElem.style.opacity=''};TextStyleSelector.prototype.onToolbarResize=function(){this.waitForSize()};TextStyleSelector.prototype.onSelectionChange=function(elementPath,isEmpty){var foundStyle=null;var inList=!1;for(var _i=0,elementPath_1=elementPath;_i<elementPath_1.length;_i++){var element=elementPath_1[_i];if(!foundStyle){var style=this.findStyle(element.$);if(style)
foundStyle=style}
if(!inList){var tag=element.$.tagName;if(tag)
tag=tag.toLowerCase();if(tag=='ul'||tag=='ol')
inList=!0}}
this.setSelectionParams(isEmpty,inList);if(!this.ignoreSelectionChanges){if(foundStyle){this.selectStyle(foundStyle,this.previewStyle?!0:!1)}else{this.selectStyle(null)}}};TextStyleSelector.prototype.replaceElem=function(tmpElem){var _this=this;var deferred=jquery_builder_13.default.Deferred();var toolbarGroup=tmpElem.parentNode;if(!toolbarGroup)
return deferred.reject().promise();this.toolbarElem=(0,jquery_builder_13.default)(tmpElem).parents('.cke_float').eq(0);var elem=this.getElem();toolbarGroup.insertBefore(elem[0],tmpElem);toolbarGroup.removeChild(tmpElem);if(toolbarGroup.parentNode){var toolbar_1=toolbarGroup.parentNode;toolbar_1.className=toolbar_1.className+' wb-text-style-selector-tb'}
window.requestAnimationFrame(function(){_this.onToolbarResize();_this.loadStyles();deferred.resolve()});return deferred.promise()};return TextStyleSelector}(UIComponent_60.UIComponent));exports.TextStyleSelector=TextStyleSelector});define("js/AiDialog",["require","exports","jquery","Dialog","js/SliderControl","js/TextField","js/UIButton","js/core/BuilderConfig","js/util/TextUtil"],function(require,exports,jquery_76,Dialog_4,SliderControl_5,TextField_6,UIButton_9,BuilderConfig_13,TextUtil_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AiDialog=exports.checkAiAvailable=exports.AiType=void 0;var AiType;(function(AiType){AiType[AiType.Chat=0]="Chat";AiType[AiType.GenerateText=1]="GenerateText"})(AiType||(exports.AiType=AiType={}));var checkAiList={};function checkAiAvailable(aiType){var aiTypeKey='_'+aiType;var state=checkAiList[aiTypeKey];if(!state){var anyState=null;for(var k in checkAiList){anyState=checkAiList[k];break}
if(BuilderConfig_13.wbConfig.ai.sameKey&&anyState){checkAiList[aiTypeKey]=anyState;return anyState.deferred.promise()}else{state={model:null,deferred:jquery_76.default.Deferred()};checkAiList[aiTypeKey]=state}
var enabled=!1;if(aiType==AiType.Chat){enabled=BuilderConfig_13.wbConfig.ai.enabled}else if(aiType==AiType.GenerateText){enabled=BuilderConfig_13.wbConfig.ai.enabledGeneric}
if(!enabled){state.deferred.resolve({visible:BuilderConfig_13.wbConfig.ai.visible,enabled:!1})}else{jquery_76.default.post(BuilderConfig_13.wbConfig.getRawLnUrl('site/ai-get-available-model'),{aiType:aiType}).then(function(response){if(response.model){state.model=response.model;state.deferred.resolve({visible:BuilderConfig_13.wbConfig.ai.visible,enabled:!0})}else{state.deferred.resolve({visible:!1,enabled:!1})}}).fail(function(){state.deferred.resolve({visible:!1,enabled:!1})})}}
return state.deferred.promise()}
exports.checkAiAvailable=checkAiAvailable;function getAiStateByType(aiType){return checkAiList['_'+aiType]}
var AiDialog=(function(){function AiDialog(textArea,restoreText,business_type,business_name,text_topic,text_length,keywords){if(business_type===void 0){business_type=''}
if(business_name===void 0){business_name=''}
if(text_topic===void 0){text_topic=''}
if(text_length===void 0){text_length=0}
if(keywords===void 0){keywords=''}
var _this_1=this;var _a,_b;this.textArea=textArea;this.restoreText=restoreText;if(!text_topic){text_topic=this.getPageName()}
if(!business_type){business_type=((_a=BuilderConfig_13.wbConfig.websiteInfo)===null||_a===void 0?void 0:_a.businessType)||wb_builder.template.categoryName}
if(!business_name){business_name=((_b=BuilderConfig_13.wbConfig.websiteInfo)===null||_b===void 0?void 0:_b.businessName)||((!BuilderConfig_13.wbConfig.testMode&&!BuilderConfig_13.wbConfig.adminMode)?wb_builder.siteDomain:'')}
if(!text_length){text_length=this.getNumberOfSentencesInText(this.textArea.textDiv.text());text_length=text_length?text_length:1}
this.dialog=new Dialog_4.default(__("Generate Text (AI)"));var content=(0,jquery_76.default)("<div class=\"wb-property ai-modal\">\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td data=\"business_type\" class=\"pr\">\n\t\t\t\t\t\t<span class=\"wb-component-label\">".concat(__('Your business type')," <span class=\"required\">*</span></span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data=\"business_name\" class=\"pl\">\n\t\t\t\t\t\t<span class=\"wb-component-label\">").concat(__('Your business name')," <span class=\"required\">*</span></span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td data=\"text_topic\" class=\"pr\">\n\t\t\t\t\t\t<span class=\"wb-component-label\">").concat(__('Text topic')," <span class=\"required\">*</span></span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data=\"text_length\" class=\"pl\">\n\t\t\t\t\t\t<span class=\"wb-component-label\">").concat(__('Text length'),"</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td data=\"keywords\" colspan=\"2\">\n\t\t\t\t\t\t<span class=\"wb-component-label\">").concat(__('Keywords'),"</span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td data=\"buttons\" colspan=\"2\">\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td data=\"aiGenerateResults\" colspan=\"2\" style=\"display: none;\">\n\t\t\t\t\t\t<div data=\"results\"></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>"));this.business_type=new TextField_6.TextField(business_type,'',!1,!1);this.business_name=new TextField_6.TextField(business_name,'',!1,!1);this.text_topic=new TextField_6.TextField(text_topic,'',!1,!1);this.text_length=new SliderControl_5.SliderControl(1,15,1,'sentence(s)').setOnChange(function(){return _this_1.clearResults()});this.text_length.setValue(text_length);this.keywords=new TextField_6.TextField(keywords,__('effective, best, discount, etc'),!0,!1);this.generate=new UIButton_9.UIButton(__('Generate'));this.generate.setButtonStyle('success');this.generate_more=new UIButton_9.UIButton(__('Generate more'));this.generate_more.setButtonStyle('success');this.generate_more.setVisible(!1);var tips=(0,jquery_76.default)("<span class=\"tips\">"+__('Example')+":\n\t\t\t\t<a href=\"javascript:void(0);\">"+__('Slogan')+"</a>, \n\t\t\t\t<a href=\"javascript:void(0);\">"+__('3 words')+"</a>, \n\t\t\t\t<a href=\"javascript:void(0);\">"+__('About us')+"</a>, \n\t\t\t\t<a href=\"javascript:void(0);\">"+__('Title')+"</a>, \n\t\t\t\t<a href=\"javascript:void(0);\">"+__('Description')+"</a>, ...\n\t\t\t</span>");var _this=this;tips.find('a').on('click',function(){(0,jquery_76.default)(this).parents('td').find('input').val((0,jquery_76.default)(this).html());_this.clearResults()});content.find('[data="business_type"]').append(this.business_type.getElem());content.find('[data="business_name"]').append(this.business_name.getElem());content.find('[data="text_topic"]').append(this.text_topic.getElem()).append(tips);content.find('[data="text_length"]').append(this.text_length.getElem());content.find('[data="keywords"]').append(this.keywords.getElem());content.find('[data="buttons"]').append(this.generate.getElem());content.find('[data="aiGenerateResults"]').append('<hr class="end">').append(this.generate_more.getElem());this.dialog.addButton(__('Close'));this.dialog.setContent(content);this.generate.getElem().on('click',function(){_this_1.submitRequest()});this.generate_more.getElem().on('click',function(){_this_1.submitRequest()});this.business_type.getElem().on('change',function(){_this_1.clearResults()});this.business_name.getElem().on('change',function(){_this_1.clearResults()});this.text_topic.getElem().on('change',function(){_this_1.clearResults()});this.keywords.getElem().on('change',function(){_this_1.clearResults()});this.error_dialog=new Dialog_4.default(__("Error"));this.error_dialog.addButton(__('Close'))}
AiDialog.getModel=function(aiType){var state=getAiStateByType(aiType);return(state?state.model:null)};AiDialog.prototype.getPageName=function(){var _a;var page=wb_builder.site.getPage(wb_builder.pageId);var langCode=(_a=BuilderConfig_13.wbConfig.getLanguageByLocale(wb_builder.locale))===null||_a===void 0?void 0:_a.code;var page_name=(page&&!page.isFront)?__tr(page.name,langCode,page.name):__('Welcome');return page_name};AiDialog.prototype.getNumberOfSentencesInText=function(text){var sentences=text.split(/[.?!]\s+(?=[A-ZА-Я])/u).map(function(sentence){return sentence.replace(/^\s+/,'')});var filteredSentences=sentences.filter(function(sentence){return sentence.trim()!==''});return filteredSentences.length};AiDialog.prototype.showDialog=function(textArea,text_topic){if(text_topic===void 0){text_topic=''}
this.textArea=textArea;var text_length=this.getNumberOfSentencesInText(this.textArea.textDiv.text());var cur_length=this.text_length.getValue();var new_length=text_length?text_length:1;if(cur_length!=new_length){this.text_length.setValue(new_length)}
if(!text_topic){text_topic=this.getPageName()}
this.text_topic.setText(text_topic);this.dialog.show()};AiDialog.prototype.disableButtons=function(){this.generate.setText(__('Generating')).getElem().append('&nbsp;<i class="fa fa-spinner fa-spin"></i>');this.generate_more.setText(__('Generating')).getElem().append('&nbsp;<i class="fa fa-spinner fa-spin"></i>');this.generate.setEnabled(!1);this.generate_more.setEnabled(!1);this.generate.getElem().attr('disabled','disabled');this.generate_more.getElem().attr('disabled','disabled')};AiDialog.prototype.enableButtons=function(){this.generate.getElem().parents('tr').hide();this.generate_more.setText(__('Generate more'));this.generate_more.setEnabled(!0);this.generate_more.getElem().removeAttr('disabled')};AiDialog.prototype.submitRequest=function(){var _this_1=this;var state=getAiStateByType(AiType.GenerateText);if(!state||!state.model)
return;this.dialog.dialog.find('.ai_error').remove();this.hideErrors();if(!this.validate(this.business_type)||!this.validate(this.business_name)||!this.validate(this.text_topic)||!this.validate(this.keywords,!1,500)){return}
this.post_data={model:state.model,aiBusinessType:this.business_type.getValue(),aiBusinessName:this.business_name.getValue(),aiTextTopic:this.text_topic.getValue(),aiTextLength:this.text_length.getValue(),aiKeywords:this.keywords.getValue()};this.disableButtons();jquery_76.default.post(BuilderConfig_13.wbConfig.lnBaseUrl+'site/get-ai-texts',this.post_data).done(function(response){if(response.error||!response.response_texts.length){alert(__('There was some error, try again.'));return}
_this_1.showResults(response.response_texts)}).fail(function(error){var _a;_this_1.error_dialog.setContent(__((_a=error.message)!==null&&_a!==void 0?_a:'There was some error, try again.'));_this_1.error_dialog.show()}).always(function(){_this_1.enableButtons()})};AiDialog.prototype.hideErrors=function(){(0,jquery_76.default)(this.business_type.getElem()).css('border-color','#ccc');(0,jquery_76.default)(this.business_name.getElem()).css('border-color','#ccc');(0,jquery_76.default)(this.text_topic.getElem()).css('border-color','#ccc');(0,jquery_76.default)(this.keywords.getElem()).css('border-color','#ccc')};AiDialog.prototype.showError=function(elem){(0,jquery_76.default)(elem).css('border-color','red').focus()};AiDialog.prototype.validate=function(field,required,max){if(required===void 0){required=!0}
if(max===void 0){max=200}
var elem=field.getElem();var value=jquery_76.default.trim(field.getValue());if(required&&!value){this.showError(elem);return!1}
if(value.length>max){this.showError(elem);return!1}
return!0};AiDialog.prototype.showResults=function(messages){var results=[];for(var _i=0,messages_1=messages;_i<messages_1.length;_i++){var mess=messages_1[_i];mess=(0,TextUtil_4.escapeHtmlChars)(mess);results.push("<div>\n\t\t\t\t\t<span class=\"res-item\">".concat(mess,"</span>\n\t\t\t\t\t<button type=\"button\" data=\"res-button\" class=\"btn btn-sm btn-default\">").concat(__('Select'),"</button>\n\t\t\t\t</div>"))}
if(!this.dialog.dialog.find('.results').length){var data="<div class=\"results\">\n\t\t\t\t<span class=\"wb-component-label\">".concat(__('Generated texts'),":</span>\n\t\t\t\t").concat(results.join('<hr>'),"\n\t\t\t\t</div>");this.dialog.dialog.find('[data="results"]').html(data).parent().show();this.generate_more.setVisible(!0)}else{var data="<hr>".concat(results.join('<hr>'));this.dialog.dialog.find('[data="results"] .results').append(data)}
var _this=this;this.dialog.dialog.find('button[data="res-button"]').on("click",function(){_this.setTextArea(this);_this.dialog.hide()})};AiDialog.prototype.setTextArea=function(elem){var editorDiv=this.textArea.textDiv;wb_builder.historyAdd("textAreaTextChange",{element:this.textArea.id,value:editorDiv.html()},this.restoreText,this.restoreText);while(editorDiv.html().indexOf('<')===0){editorDiv=editorDiv.children()}
var newText=(0,jquery_76.default)(elem).parent().find('span').html();editorDiv.html(newText);editorDiv=this.textArea.textDiv.children();for(var i=1;i<editorDiv.length;i++){editorDiv.eq(i).remove()}
var newValue=this.textArea.textDiv.html();this.textArea.textDivValue=newValue};AiDialog.prototype.clearResults=function(){if(!this.generate){return}
this.generate.setVisible(!0).setEnabled(!0).setText(__('Generate')).getElem().removeAttr('disabled').parents('tr').eq(0).show();this.dialog.dialog.find('[data="aiGenerateResults"]').hide();this.dialog.dialog.find('[data="results"]').html('')};return AiDialog}());exports.AiDialog=AiDialog});define("js/util/DateTimeUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DateTimeUtil=(function(){function DateTimeUtil(){var _this=this;this.lang='en-GB';this.tokens={d:function(d){return _this.pad(d.getDate())},D:function(d){return _this.getDayName(d).substr(0,3)},j:function(d){return d.getDate()},l:function(d){return _this.getDayName(d)},N:function(d){return d.getDay()||7},S:function(d){return _this.getOrdinal(d.getDate())},w:function(d){return d.getDay()},z:function(d){var Y=d.getFullYear(),M=d.getMonth(),D=d.getDate();return Math.floor((Date.UTC(Y,M,D)-Date.UTC(Y,0,1))/8.64e7)},W:function(d){return _this.getWeekNumber(d)[1]},F:function(d){return _this.getMonthName(d)},m:function(d){return _this.pad(d.getMonth()+1)},M:function(d){return _this.getMonthName(d).substr(0,3)},n:function(d){return d.getMonth()+1},t:function(d){return new Date(d.getFullYear(),d.getMonth()+1,0).getDate()},L:function(d){return new Date(d.getFullYear(),1,29).getDate()==29?1:0},o:function(d){return _this.getWeekNumber(d)[0]},Y:function(d){var year=d.getFullYear();if(year<0){return'-'+('000'+Math.abs(year)).slice(-4)}
return''+year},y:function(d){var year=d.getFullYear();if(year>=0){return('0'+year).slice(-2)}else{year=Math.abs(year);return-+('0'+year).slice(-2)}},a:function(d){return d.getHours()<12?'am':'pm'},A:function(d){return d.getHours()<12?'AM':'PM'},B:function(d){return(((+d+3.6e6)%8.64e7)/8.64e4).toFixed(0)},g:function(d){return(d.getHours()%12)||12},G:function(d){return d.getHours()},h:function(d){return _this.pad((d.getHours()%12)||12)},H:function(d){return _this.pad(d.getHours())},i:function(d){return _this.pad(d.getMinutes())},s:function(d){return _this.pad(d.getSeconds())},u:function(d){return'000000'},v:function(d){return _this.padd(d.getMilliseconds())},e:function(d){return void 0},I:function(d){return d.getTimezoneOffset()==_this.getOffsets(d)[0]?0:1},O:function(d){return _this.minsToHours(-d.getTimezoneOffset(),!1)},P:function(d){return _this.minsToHours(-d.getTimezoneOffset(),!0)},T:function(d){return d.toLocaleString('en',{year:'numeric',timeZoneName:'long'}).replace(/[^A-Z]/g,'')},Z:function(d){return d.getTimezoneOffset()*-60},c:function(d){return _this.format(d,'Y-m-d\\TH:i:sP')},r:function(d){return _this.format(d,'D, d M Y H:i:s O')},U:function(d){return d.getTime()/1000|0}}}
DateTimeUtil.prototype.getDayName=function(d){return d.toLocaleString(this.lang,{weekday:'long'})};DateTimeUtil.prototype.getMonthName=function(d){return d.toLocaleString(this.lang,{month:'long'})};DateTimeUtil.prototype.getOffsets=function(d){var y=d.getFullYear();var offsets=[0,2,5,9].map(function(m){return new Date(y,m).getTimezoneOffset()});return[Math.max.apply(Math,offsets),Math.min.apply(Math,offsets)]};DateTimeUtil.prototype.getOrdinal=function(n){n=n%100;var ords=['th','st','nd','rd'];return(n<10||n>13)?ords[n%10]||'th':'th'};DateTimeUtil.prototype.getWeekNumber=function(d){var e=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var yearStart=new Date(Date.UTC(e.getUTCFullYear(),0,1));var weekNo=Math.ceil((((e.getTime()-yearStart.getTime())/86400000)+1)/7);return[e.getUTCFullYear(),weekNo]};DateTimeUtil.prototype.isDate=function(o){return Object.prototype.toString.call(o)=='[object Date]'};DateTimeUtil.prototype.minsToHours=function(mins,colon){var sign=mins<0?'-':'+';mins=Math.abs(mins);var H=this.pad(mins/60|0);var M=this.pad(mins%60);return sign+H+(colon?':':'')+M};DateTimeUtil.prototype.pad=function(n){return(n<10?'0':'')+n};DateTimeUtil.prototype.padd=function(n){return(n<10?'00':n<100?'0':'')+n};DateTimeUtil.prototype.format=function(date,format){var _this=this;if(!this.isDate(date)||typeof format!='string'){return}
return format.split('').reduce(function(acc,c,i,chars){if(c=='\\'){acc+=chars.splice(i+1,1)}else if(c in _this.tokens){acc+=_this.tokens[c](date)}else{acc+=c}
return acc},'')};return DateTimeUtil}());exports.default=DateTimeUtil});define("js/TextArea",["require","exports","jquery","CKEditor","js/ElementRegister","js/Element","Dialog","js/Service","js/element/Controls","js/element/PropertyType","js/BuilderEvent","js/util/TextUtil","js/core/BuilderConfig","js/UIButton","js/MediaLibrary","js/AiDialog","js/core/Collaboration","js/util/DateTimeUtil","js/ui/TextStyleSelector"],function(require,exports,jquery_77,CKEditor_2,ElementRegister_4,Element_5,Dialog_5,Service_22,Controls_1,PropertyType_2,BuilderEvent_7,TextUtil_5,BuilderConfig_14,UIButton_10,MediaLibrary_1,AiDialog_1,Collaboration_1,DateTimeUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TextArea=void 0;var EditTextProperty=new PropertyType_2.PropertyType('general/editText',PropertyType_2.PropertyTypeAccess.User,!0,__('Edit Text'),UIButton_10.UIButton).inline();var GenerateAITextProperty=new PropertyType_2.PropertyType('general/generateAIText',PropertyType_2.PropertyTypeAccess.User,!0,__('Generate AI Text'),UIButton_10.UIButton).inline();PropertyType_2.PropertyType.setSortOrder('general/editText',0);PropertyType_2.PropertyType.setSortOrder('general/generateAIText',1);var Backdrop=(function(){function Backdrop(){var _this=this;this.isVisible=!1;this.elem=null;this.watchInterval=0;this.topElem=(0,jquery_77.default)('<div>').addClass('wb-text-backdrop-top').on('click',function(e){return _this.onClick(e)}).appendTo(document.body).get(0);this.rightElem=(0,jquery_77.default)('<div>').addClass('wb-text-backdrop-right').on('click',function(e){return _this.onClick(e)}).appendTo(document.body).get(0);this.bottomElem=(0,jquery_77.default)('<div>').addClass('wb-text-backdrop-bottom').on('click',function(e){return _this.onClick(e)}).appendTo(document.body).get(0);this.leftElem=(0,jquery_77.default)('<div>').addClass('wb-text-backdrop-left').on('click',function(e){return _this.onClick(e)}).appendTo(document.body).get(0)}
Backdrop.prototype.onClick=function(e){e.stopPropagation();e.preventDefault();if(this.elem)
this.elem.hideEditor();};Backdrop.prototype.updateSize=function(){if(!this.elem)
return;var elem=this.elem.textDiv.get(0);var rect=elem.getBoundingClientRect();var ww=(0,jquery_77.default)(window).width();var wh=Math.max((0,jquery_77.default)(window.document).height(),(0,jquery_77.default)(window).height());var tbh=Service_22.Service.uiManager.getManager().getToolbarHeight()+25+window.scrollY;var rectTop=rect.top+window.scrollY;var rectHeight=rect.height;if(rectTop<tbh){rectHeight-=(tbh-rectTop);if(rectHeight<0)
rectHeight=0;rectTop=tbh}
this.topElem.style.height=rectTop+'px';this.rightElem.style.top=rectTop+'px';this.rightElem.style.width=(ww-rect.left-rect.width)+'px';this.rightElem.style.height=rectHeight+'px';this.bottomElem.style.top=(rectTop+rectHeight)+'px';this.bottomElem.style.height=(wh-rectTop-rectHeight)+'px';this.leftElem.style.top=rectTop+'px';this.leftElem.style.width=rect.left+'px';this.leftElem.style.height=rectHeight+'px'};Backdrop.prototype.setElement=function(elem){var _this=this;this.elem=elem;if(!this.watchInterval)
this.watchInterval=setInterval(function(){return _this.updateSize()},100);this.updateSize()};Backdrop.prototype.unsetElement=function(elem){if(this.elem===elem){this.setVisible(!1);this.elem=null;if(this.watchInterval){clearInterval(this.watchInterval);this.watchInterval=0}}};Backdrop.prototype.setVisible=function(visible){if(this.isVisible==visible)
return;this.isVisible=visible;if(visible){this.topElem.style.display='block';this.rightElem.style.display='block';this.bottomElem.style.display='block';this.leftElem.style.display='block'}else{this.topElem.style.display='none';this.rightElem.style.display='none';this.bottomElem.style.display='none';this.leftElem.style.display='none'}};return Backdrop}());var backdrop=null;var restoreNoApply=!1;var restoreText=function(record,action){var elem=window.getElementById(record.element);if(!elem){console.error("Unable to undo 'textAreaTextChange': can't find element "+record.element);return}
var value=elem.textDivValue;elem.textDivValue=record.value;record.value=value;if(!restoreNoApply)
elem.updateText();};var TextArea=exports.TextArea=(function(_super){__extends(TextArea,_super);function TextArea(data){var _this=_super.call(this,data)||this;_this.lastContent="";_this.textId="";_this.editorId="";_this.editor=null;_this.editorVisible=!1;_this.editorChosenLanguage=null;_this.textDivValue='';_this.noChangeHandling=!1;_this.customToolbar=null;_this.disableTablePlugin=!1;_this._opacity=100;_this._scaleFactors=null;_this.wflRefreshCounter=120;_this.wflInitialSize=0;_this.wasMoveRelativeHandleEnabled=!1;_this.editorTimeoutHandles={};_this._stylesComboBoxIntervalId=0;_this.elem.addClass('wb_text_element');_this.addLangLabel();CKEditor_2.CKEDITOR.timestamp=Math.random();TextArea.editorInit();TextArea.textAreaElements.push(_this);var thisClass=_this;_this.textId=_this.id+'_text';_this.editorId=_this.id+'_editor';_this._scaleFactors=(data.content&&data.content.scaleFactors)?data.content.scaleFactors:_this._scaleFactors;TextArea.rtl=(BuilderConfig_14.wbConfig.locale==='ar_AE'||BuilderConfig_14.wbConfig.locale==='he_IL'||BuilderConfig_14.wbConfig.locale==='fa_IR');_this.textDiv=(0,jquery_77.default)('<div id="'+_this.textId+'"'+(TextArea.rtl?' class="rtl"':'')+'></div>');_this.textDiv.css({"word-wrap":"break-word",padding:'0.1px 0'});_this.textDivRendered=_this.textDiv.clone().attr('id','');_this.textDiv.on('mousedown',function(){TextArea.mouseDowned=!0});_this.textDiv.on('mouseup',function(){if(!jquery_77.default.browser.msie)
TextArea.mouseDowned=!1});_this.container.append(_this.textDiv);_this.container.append(_this.textDivRendered);_this.container.css("line-height","normal");(0,jquery_77.default)(_this.container).bind("resize",function(){(0,jquery_77.default)(thisClass.textDiv).css("width",(0,jquery_77.default)(thisClass.container).width());(0,jquery_77.default)(thisClass.textDivRendered).css("width",(0,jquery_77.default)(thisClass.container).width())});_this.controls.elem.tooltip({trigger:"manual",placement:"top",html:!0,title:__("This element can be edited only in Desktop mode")});if(_this.isEditableStrict){_this.controls.onDblClick(function(e){if(thisClass.debug)
console.log("DoubleClick");thisClass.showEditor(e.pageX,e.pageY)})}
if(data&&data.content&&data.content.text!==null&&data.content.text!==undefined){_this.textDivValue=data.content.text}else{_this.textDivValue=TextArea.editorDefaultText}
if(data.content&&!data.content.__noInitCleanupWbTrOk)
_this.cleanupWbTrOk();_this.setHtml(__tr(_this.textDivValue,null,TextArea.editorDefaultText,!0));_this.setRawHtml(!1);_this.opacity=((data.content&&typeof data.content.opacity==='number')?data.content.opacity:_this.opacity);_this.elem.bind("resize",function(){thisClass.wflRefreshCounter=0;thisClass.onResize()});var toolbarActions=[{name:__('Edit Text'),icon:'fa fa-pencil',action:function(){return _this.showEditor(0,0)}}];if(!_this.isElementPreview){(0,AiDialog_1.checkAiAvailable)(AiDialog_1.AiType.GenerateText).then(function(s){if(!s||!s.visible)
return;var thisDisabled=!s.enabled;var action={name:__('Generate Text (AI)'),icon:'fa fa-lightbulb-o',action:function(){if(!thisDisabled)
_this.showAiDialog();}};if(!s.enabled){action.disabled=!0;action.disabledTooltip=__('Ask administrator to enable this feature')}
toolbarActions.push(action);_this.controls.setToolbarActions(toolbarActions)})}
_this.controls.setToolbarActions(toolbarActions);_this.setSize(null,"auto");_this.onUpdateLanguages();_this.wflInitialSize=_this.height;_this.waitFontLoaded();return _this}
TextArea.prototype.getAiDialog=function(){if(TextArea._aiDialog===null){TextArea._aiDialog=new AiDialog_1.AiDialog(this,restoreText)}
return TextArea._aiDialog};TextArea.editorInit=function(){if(TextArea.editorInitialized)
return;TextArea.editorInitialized=!0;TextArea.tinyEditor=!!wb_builder.isTouchDevice&&!wb_builder.forceFullTextEditorForTouchDevices;if(!TextArea.tinyEditor){(0,jquery_77.default)(function(){wb_builder.body.on('click',function(e){if(TextArea.mouseDowned&&!jquery_77.default.browser.mozilla){TextArea.mouseDowned=!1;return}
Dialog_5.default.hideEditors=!0;TextArea.hideEditors()})})}};TextArea.hideEditors=function(noApply){if(noApply===void 0){noApply=!1}
for(var i=0;i<TextArea.textAreaElements.length;i++){var elem=TextArea.textAreaElements[i];for(var k in elem.editorTimeoutHandles){if(elem.editorTimeoutHandles[k])
clearTimeout(elem.editorTimeoutHandles[k]);elem.editorTimeoutHandles[k]=0}}
if(TextArea.editorActive){TextArea.editorActive.hideEditor(noApply)}};Object.defineProperty(TextArea.prototype,"opacity",{get:function(){return this._opacity},set:function(value){this._opacity=Math.max(0,Math.min(100,parseInt(value)));if(this.textDiv)
this.textDiv.css('opacity',(this._opacity/100));if(this.textDivRendered)
this.textDivRendered.css('opacity',(this._opacity/100));},enumerable:!1,configurable:!0});Object.defineProperty(TextArea.prototype,"scaleFactors",{get:function(){return this._scaleFactors},set:function(value){this._scaleFactors=value},enumerable:!1,configurable:!0});TextArea.prototype.setCustomToolbar=function(customToolbar){this.customToolbar=customToolbar};TextArea.prototype.setDisableTablePlugin=function(disable){this.disableTablePlugin=disable};TextArea.prototype.switchMode=function(fromMode,toMode,initial,manual){var _this=this;if(initial===void 0){initial=!1}
if(manual===void 0){manual=!1}
_super.prototype.switchMode.call(this,fromMode,toMode,initial,manual);setTimeout(function(){if(typeof _this.height==="number"){var h=_this.calcTextHeight();if(_this.maxHeight<=_this.height)
_this.maxHeight=h;_this.setSize(null,h);_this.elem.trigger("elementresize",[_this])}},400)};TextArea.prototype.getDataDefaults=function(){return jquery_77.default.extend(_super.prototype.getDataDefaults.call(this),{minWidth:24,minHeight:24})};TextArea.prototype.getDefaultResizeMode=function(){return Controls_1.ControlsResizeMode.HORIZONTAL};TextArea.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(this.name&&!useType)
return this.name;var maxLen=useType?200:20;var val=__tr(this.textDivValue,null,TextArea.editorDefaultText,!0);if(val){val=val.replace(/<[^>]+>/g,' ').replace('&nbsp;',' ').replace(/ +/g,' ');if(val.length>maxLen)
val=val.substring(0,maxLen)+'...'}
return val?val:_super.prototype.getName.call(this,useType)};TextArea.prototype.getIcon=function(){return'fa fa-font'};TextArea.prototype.supportsAutoWidth=function(){return!0};TextArea.prototype.supportsAutoHeight=function(){return!0};TextArea.prototype.show=function(responsive,updateParentSize){if(responsive===void 0){responsive=!1}
if(updateParentSize===void 0){updateParentSize=!1}
_super.prototype.show.call(this,responsive,updateParentSize);if(responsive&&updateParentSize){this.onResize()}};TextArea.prototype.onBeforeRemove=function(options){if(!this.isEditableStrict&&!options.batch){options.preventRemoval=!0;return}
_super.prototype.onBeforeRemove.call(this,options)};TextArea.prototype.releaseResources=function(options){var idx=TextArea.textAreaElements.indexOf(this);if(idx>=0)
TextArea.textAreaElements.splice(idx,1);_super.prototype.releaseResources.call(this,options)};TextArea.prototype.cleanupWbTrOk=function(updateElement,_html){if(updateElement===void 0){updateElement=!1}
if(_html){_html=_html.replace(/<img\s[^>]*?>/gi,'');var tmpElem=(0,jquery_77.default)('<div>').html(_html);tmpElem.find('.wb_tr_ok').contents().unwrap();var res=tmpElem.html();return res}else{if(typeof(this.textDivValue)==='object'){for(var i in this.textDivValue){if(this.textDivValue[i])
this.textDivValue[i]=this.cleanupWbTrOk(!1,this.textDivValue[i]);}}else{if(this.textDivValue)
this.textDivValue=this.cleanupWbTrOk(!1,this.textDivValue);}}
if(updateElement){this.setHtml(__tr(this.textDivValue,null,null,!0))}};TextArea.prototype.waitFontLoaded=function(){if(--this.wflRefreshCounter<0||this.editorVisible)
return;if(!wb_builder.previewToolbar.isOpen)
this.onResize(!0);if(this.wflRefreshCounter>0&&this.height===this.wflInitialSize)
setTimeout(this.waitFontLoaded.bind(this),250);};TextArea.scanTextForStyleUsage=function(text){if(!text)
return[];var scanForStyles=function(str){var styleIds=[];for(var i=0;i<wb_builder.site.styles.length;i++){var selector=wb_builder.site.styles[i].selector;var className=selector.replace(/^\./,'');if(str.indexOf(className)>=0)
styleIds.push(selector);}
return styleIds};var items=[];if(typeof text==='object'){for(var i in text)
if(text.hasOwnProperty(i))
items=items.concat(scanForStyles(text[i]));}else{items=items.concat(scanForStyles(text))}
return items};TextArea.prototype.getUsedSiteStyles=function(){var items=_super.prototype.getUsedSiteStyles.call(this);items=items.concat(TextArea.scanTextForStyleUsage(this.textDivValue));return items};TextArea.prototype.buildClipboardData=function(){var result=_super.prototype.buildClipboardData.call(this);result['text/html']=__tr((0,TextUtil_5.fixEditorHtml)((0,TextUtil_5.copyMultilangValue)(this.textDivValue)));return result};TextArea.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.content={text:(0,TextUtil_5.fixEditorHtml)((0,TextUtil_5.copyMultilangValue)(this.textDivValue)),opacity:this.opacity,rtl:TextArea.rtl,scaleFactors:this.scaleFactors};return data};TextArea.prototype.onClick=function(e){if(!this.editorVisible){_super.prototype.onClick.call(this,e)}};TextArea.prototype.setHtml=function(html){html=(0,TextUtil_5.fixEditorHtml)(html);html=wb_builder.site.reloadTextTags(html);var currentVal=this.textDiv.html();if(currentVal!==html){this.textDiv.html(html)}
this.textDivRendered.html(html.replace(/\{\{date\:.+?\}\}/g,function(substring){var match=substring.match(/\{\{date\:(.+?)\}\}/);if(match){return(new DateTimeUtil_1.default).format(new Date(),match[1])||''}
return substring}))};TextArea.prototype.getHtml=function(){return this.textDiv.html()};TextArea.prototype.setRawHtml=function(value){if(value){this.textDiv.show();this.textDivRendered.hide()}else{this.textDiv.hide();this.textDivRendered.show()}};TextArea.prototype.getContainerForShadow=function(){return this.container};TextArea.prototype.setParent=function(parent,initial){if(initial===void 0){initial=!1}
_super.prototype.setParent.call(this,parent,initial)};TextArea.prototype.selectAll=function(){var _a;if(!this.editor||this.editor===!0)
return;this.editor.focus();var range=this.editor.createRange();if(range){range.selectNodeContents(range.root);range.select();(_a=this.editor.getSelection())===null||_a===void 0?void 0:_a.selectRanges([range]);var thisClass=this;setTimeout(function(){Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-edit-select',thisClass)},10)}};TextArea.prototype.insertText=function(text,isHtml){if(isHtml===void 0){isHtml=!1}
if(!this.editor||this.editor===!0)
return;this.editor.focus();if(isHtml){this.editor.insertHtml(text)}else{this.editor.insertText(text)}
Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-text',this)};TextArea.prototype.execCommand=function(command){if(!this.editor||this.editor===!0)
return!1;this.editor.focus();return command?this.editor.execCommand(command):!1};TextArea.prototype.getToolbarElem=function(button){if(!this.editor)
return null;var toolbar=(0,jquery_77.default)('#cke_'+this.textId);if(button){return toolbar.find('.cke_button__'+button)}else{return toolbar}};TextArea.prototype.showEditor=function(x,y){var _this=this;var thisClass=this;if(this.isElementPreview)
return;if(this.isLocked){this.moveBtn.elem.tooltip('show');setTimeout(function(){thisClass.moveBtn.elem.tooltip('hide')},2000);return}
Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-start',this);if(this.debug)
console.log("ShowEditor");this.wasMoveRelativeHandleEnabled=(this.moveRelativeHandle&&this.moveRelativeHandle.isEnabled())?!0:!1;if(this.wasMoveRelativeHandleEnabled&&this.moveRelativeHandle){this.moveRelativeHandle.setEnabled(!1)}
if(!backdrop)
backdrop=new Backdrop();backdrop.setElement(this);backdrop.setVisible(!0);if(this.editor)
return;TextArea.hideEditors();if(this.menu)
this.menu.hide();var styles=CKEditor_2.CKEDITOR.stylesSet.get("wb_site_styles");if(!styles){styles=CKEditor_2.CKEDITOR.stylesSet.add("wb_site_styles",[])}
styles.splice(0,styles.length);for(var i=0;i<this.system.site.styles.length;i++){var s=this.system.site.styles[i];var selector=/^\.([^\ ]+)(?:\ |$)/i.exec(s.selector);if(!selector)
continue;styles.push({name:s.name,element:(s.tag?s.tag:"span"),attributes:{"class":selector[1]}})}
this.setRawHtml(!0);this.textDiv.addClass('outline1');if(!TextArea.tinyEditor){this.textDiv.attr("contenteditable","true")}
this.controls.setButtonsCompact(!0);this.setDraggingEnabled(!1);this.setControlsEnabled(!1);Element_5.Element.hotKeysDisabled=!0;var config={title:'',stylesSet:'wb_site_styles',on:{menuShow:function(e){if(e.editor&&e.editor.contextMenu){var item=e.editor.contextMenu.findItemByCommandName('image');if(item)
item.element.remove();}},selectionChange:function(e){if(e.data.selection&&e.data.selection.getSelectedText()){Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-edit-select',thisClass)}},afterCommandExec:function(e){Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-edit-cmd-'+e.data.name,thisClass)}}};if(this.customToolbar)
config.toolbar=this.customToolbar;if(this.disableTablePlugin){config.removePlugins='tableselection,tabletools'}
this.textDiv.css('z-index',11).focus();if(TextArea.tinyEditor){if(wb_builder.touchHandler){document.removeEventListener("touchstart",wb_builder.touchHandler,!0);document.removeEventListener("touchmove",wb_builder.touchHandler,!0);document.removeEventListener("touchend",wb_builder.touchHandler,!0);document.removeEventListener("touchcancel",wb_builder.touchHandler,!0)}(0,jquery_77.default)(".wb-scroll-bar").hide();if(!TextArea.maxCont){TextArea.maxCont=(0,jquery_77.default)('<div id="WB_TextArea_maxCont"><div class="inner3" contenteditable="true"></div></div>');var inner=TextArea.maxCont.find('.inner3');TextArea.maxCont.css({border:0,left:0,top:0,width:'100%',height:(0,jquery_77.default)(window).height(),overflow:'auto',position:"fixed",background:"#ffffff",paddingBottom:30,zIndex:1001});TextArea.maxCont.on('keydown',function(e){if(e.keyCode===13){setTimeout(function(){document.execCommand('formatBlock',!1,'p')},10)}});(0,jquery_77.default)(window).on('resize',function(){if(TextArea.maxCont)
TextArea.maxCont.css({height:(0,jquery_77.default)(window).height()})});inner.on('paste',function(e){e.stopPropagation();e.preventDefault();var clipboardData=e.originalEvent.clipboardData||window.clipboardData;if(clipboardData&&clipboardData.getData){var pastedData=clipboardData.getData('Text');pastedData=pastedData.replace(/\n/gi,'<br />');(0,jquery_77.default)(this).html(pastedData)}});inner.css({margin:'60px 10px 10px'});var maxContBtnWrp=(0,jquery_77.default)('<div class="form-actions input-block-level"><span class="wb-ed-small-msg">'+__("Full featured text editor is currently not available on touch devices")+'</span><button class="btn btn-success pull-right">'+__("Apply")+'</button><button class="btn btn-default pull-right">'+__("Close")+'</button></div>');var applyBtn=maxContBtnWrp.find(".btn-success");var closeBtn=maxContBtnWrp.find(".btn-default").css({marginRight:5});maxContBtnWrp.css({top:0,right:0,marginTop:0,padding:10,borderBottom:'1px solid #E5E5E5',position:"absolute",zIndex:9001});(0,jquery_77.default)(TextArea.maxCont).append(maxContBtnWrp);(0,jquery_77.default)(document.body).append(TextArea.maxCont);applyBtn.on('click',function(){TextArea.hideEditors()});closeBtn.on('click',function(){TextArea.hideEditors(!0)});TextArea.maxCont.on('click',function(){if(TextArea.maxCont)
TextArea.maxCont.find('.inner3').focus();});TextArea.maxCont.click()}
var cColor=thisClass.getContentColor(!0);TextArea.maxCont.css({background:(cColor?cColor:'#ffffff')});var innerElem=TextArea.maxCont.find('.inner3');innerElem.html(this.textDiv.html());(0,jquery_77.default)(document.body).append(TextArea.maxCont);var tbHeight=TextArea.maxCont.children('.form-actions').eq(0).outerHeight(!0);innerElem.css({marginTop:(tbHeight+'px')});this.editor=!0}else{if(jquery_77.default.browser.msie){var html=this.textDiv.html();html=html.replace(/(<p[^>]*>)&nbsp;(<\/p>)/ig,'$1\xad$2');this.textDiv.html(html)}
this.editor=CKEditor_2.CKEDITOR.inline(this.textId,config);this.editor.on('paste',function(e){return _this.handlePaste(e)},null,null,2);for(var ts=1000;ts<=2000;ts+=1000){setTimeout(function(){var el=(0,jquery_77.default)("#cke_"+thisClass.textId);el.css({"z-index":20})},ts)}}
if(!TextArea.tinyEditor){if(jquery_77.default.browser.chrome){this.textDiv.blur();setTimeout(function(){thisClass.textDiv.focus()},100)}}
this._onStylesComboBoxCreate();this.lastContent=this.textDiv.html();this.editorVisible=!0;TextArea.editorActive=this;Dialog_5.default.hideEditors=!1;if(typeof(this.editor)==='object'&&this.editor)
this.editor.wbTextAreaInstance=this;BuilderEvent_7.GlobalEvents.triggerEvent('inplaceeditor.state.changed',new BuilderEvent_7.InPlaceEditorStateChangedEvent(!0))};TextArea.prototype.showAiDialog=function(){this.getAiDialog().showDialog(this)};TextArea.prototype._onStylesComboBoxCreate=function(){var thisClass=this;var callback=function(combo){var doc=combo.children('iframe')[0].contentDocument;if(!doc)
return;var s=doc.createElement('scr'+'ipt');s.type='text/javascript';s.src=CKEditor_2.CKEDITOR.basePath+'stylescombo.js?ts='+(new Date()).getTime();doc.getElementsByTagName('head')[0].appendChild(s)};this._stylesComboBoxIntervalId=setInterval(function(){var combo=null;if((combo=(0,jquery_77.default)('#cke_'+thisClass.textId+' .cke_combopanel:not(.dropdown_languages)')).length){clearInterval(thisClass._stylesComboBoxIntervalId);callback(combo)}},100)};TextArea.prototype.hideEditor=function(noApply){Service_22.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-end',this);if(!this.editor)
return;if(this.editor!==!0){this.editor.focus();this.editor.destroy()}
if(backdrop)
backdrop.unsetElement(this);this.editor=null;TextArea.mouseDowned=!1;if(this.wasMoveRelativeHandleEnabled&&this.moveRelativeHandle){this.moveRelativeHandle.setEnabled(!0)}
if(TextArea.tinyEditor){if(TextArea.maxCont){if(!noApply)
this.setHtml(TextArea.maxCont.find('.inner3').html());TextArea.maxCont.find('.inner3').empty();TextArea.maxCont.remove();TextArea.maxCont=null;if(wb_builder.touchHandler){document.addEventListener("touchstart",wb_builder.touchHandler,!0);document.addEventListener("touchmove",wb_builder.touchHandler,!0);document.addEventListener("touchend",wb_builder.touchHandler,!0);document.addEventListener("touchcancel",wb_builder.touchHandler,!0)}(0,jquery_77.default)(".wb-scroll-bar").show()}}else{this.textDiv.removeAttr("contenteditable");if(!noApply)
this.setHtml(this.textDiv.html());}
this.setRawHtml(!1);this.textDiv.off("click").removeClass('outline1').css('z-index','');this.setDraggingEnabled(!0);this.setControlsEnabled(!0);this.updateContentSize();Element_5.Element.hotKeysDisabled=!1;var cont=this.textDiv.html();var changed=!1;var isTrimEndSupported=(typeof(''.trimEnd)==='function');if(!this.noChangeHandling&&((isTrimEndSupported&&this.lastContent.trimEnd()!==cont.trimEnd())||(!isTrimEndSupported&&this.lastContent!==cont))){this.system.setPageModified(!0);changed=!0;var oldValue=typeof this.textDivValue==='object'?Object.assign({},this.textDivValue):this.textDivValue;restoreNoApply=noApply;wb_builder.historyAdd("textAreaTextChange",{element:this.id,value:oldValue},restoreText,restoreText)}
this.lastContent="";this.editorVisible=!1;TextArea.editorActive=null;this.setValue(cont,this.editorChosenLanguage);if(!noApply)
this.updateText();clearInterval(this._stylesComboBoxIntervalId);BuilderEvent_7.GlobalEvents.triggerEvent('inplaceeditor.state.changed',new BuilderEvent_7.InPlaceEditorStateChangedEvent(!1));if(changed){BuilderEvent_7.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_7.SiteStructureChangedBuilderEvent())}};TextArea.prototype.handlePaste=function(e){var eData=e.data;if(!eData||typeof eData.dataValue!=='string')
return;var dataArr=null;try{dataArr=JSON.parse(eData.dataValue)}catch(_){}
if(dataArr instanceof Array){for(var _i=0,dataArr_1=dataArr;_i<dataArr_1.length;_i++){var dataDef=dataArr_1[_i];var type=dataDef['class']||'';if(!type||typeof dataDef.content!=='object')
continue;if(type=='TextArea'&&dataDef.content.text){var html=__tr(dataDef.content.text).replace(/&lt;/g,'<').replace(/&gt;/g,'>');eData.dataValue=html;eData.type='html';eData.dontFilter=!0;return}else if(type=='Picture'){var icon=(0,MediaLibrary_1.getFontIconProperty)(dataDef.content.src);if(typeof dataDef.content.src=='string'){var width=100;var height=100;if(typeof dataDef.content.maxWidth==='number'){width=dataDef.content.maxWidth}
if(typeof dataDef.content.maxHeight==='number'){height=dataDef.content.maxHeight}
if(typeof dataDef.content.minWidth==='number'&&width<dataDef.content.minWidth){width=dataDef.content.minWidth}
if(typeof dataDef.content.minHeight==='number'&&height<dataDef.content.minHeight){height=dataDef.content.minHeight}
var elem=new CKEditor_2.CKEDITOR.dom.element('img');var imgElem=elem.$;imgElem.src=wb_builder.makeLocalUrl(dataDef.content.src);imgElem.setAttribute('width',''+width);imgElem.setAttribute('height',''+height);e.editor.insertElement(elem);e.stop();return}else if(typeof dataDef.content.src=='object'&&icon){var elem=new CKEditor_2.CKEDITOR.dom.element('span').addClass('fa').addClass('fa-'+icon.icon);if(icon.character){elem.addClass('wb-fa-in').setHtml('&#x'+icon.character+';')}else{elem.setHtml('&nbsp;')}
elem.$.contentEditable='false';e.editor.insertElement(elem);e.stop();return}}}
eData.dataValue='';eData.type='text';eData.dontFilter=!0}};TextArea.prototype.updateText=function(){this.onSwitchLanguage(this.system.site.currSelLang||'',!0);this.onResize();var parent=this.getParent();if(parent){if(parent instanceof Element_5.Element)
parent.updateStyle();else parent.updateSize();this.onResize()}};TextArea.prototype.getContentColor=function(contrast,elem,parentColor,lvl){if(!elem)
elem=this.container.get(0);if(elem.nodeType===3&&parentColor)
return parentColor;if(!lvl)
lvl=0;var ident='',identCount=lvl;while(identCount>0){ident+=' ';identCount--}
var style=(elem.nodeType<3&&'getComputedStyle' in window)?window.getComputedStyle(elem):null;var pc,color=null,colorStr=(style?style.color:null);if(colorStr&&(pc=colorStr.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i))){color={r:parseInt(pc[1]),g:parseInt(pc[2]),b:parseInt(pc[3])}}else if(colorStr&&(colorStr.length===4||colorStr.length===7)&&(pc=colorStr.match(/^#([0-f]+)$/i))){if(pc[0].length===3){color={r:parseInt(pc[0].substring(0,1),16),g:parseInt(pc[0].substring(1,2),16),b:parseInt(pc[0].substring(2,3),16)}}else{color={r:parseInt(pc[0].substring(0,2),16),g:parseInt(pc[0].substring(2,4),16),b:parseInt(pc[0].substring(4,6),16)}}}
if(color&&contrast){var cb=(299*color.r+587*color.g+114*color.b)/1000;if(255-cb>cb){color.r=color.g=color.b=255}else{color.r=color.g=color.b=0}}
colorStr=color?('#'+('0'+parseInt(''+color.r).toString(16)).slice(-2)+('0'+parseInt(''+color.g).toString(16)).slice(-2)+('0'+parseInt(''+color.b).toString(16)).slice(-2)):null;for(var i=0;i<elem.childNodes.length;i++){var r=this.getContentColor(contrast,elem.childNodes[i],colorStr,lvl+1);if(r)
return r}
return null};TextArea.prototype.setAndApplyValue=function(value){this.textDivValue=value;this.setHtml(__tr(this.textDivValue,null,null,!0))};TextArea.prototype.setValue=function(html,langCode){var x,value;var defaultLang=this.system.site.getLastDefLang()||'';if(!langCode&&this.system.site.currSelLang)
langCode=this.system.site.currSelLang;if(!langCode&&defaultLang)
langCode=defaultLang;if(langCode){if(typeof(this.textDivValue)==='object'&&this.textDivValue){value=this.textDivValue}else{value={};if(typeof(this.textDivValue)==='string'&&defaultLang)
value[defaultLang]=this.textDivValue}
var update=!0;if((!(langCode in value)||!(0,TextUtil_5.stripTags)(value[langCode]))&&__tr(this.textDivValue,'__DEFAULT__')===html.trim()){update=!1}
if(update)
value[langCode]=html}else{value=html}
this.textDivValue=value;(0,Collaboration_1.updateElementProperties)(this,{text:value})};TextArea.prototype.onResize=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
if(!onConstruct){this.system.setPageModified(!0);if(!this.isElementPreview)(0,Collaboration_1.resizeElement)(this);}
if(typeof this.height==="number"){var h=this.calcTextHeight();if(this.maxHeight<=this.height)
this.maxHeight=h;this.setSize(null,h);this.elem.trigger("elementresize",[this])}};TextArea.prototype.calcTextHeight=function(){var h=this.textDiv.outerHeight(!1);if(h<10&&!this.parent&&this.height>10)
h=this.height;if(h<10)
h=10;return h};TextArea.prototype.updateContentSize=function(ui){if(ui&&ui.size){ui.size.height=this.calcTextHeight();this.updateCtrlBtnsPos&&this.updateCtrlBtnsPos(ui.size.width,ui.size.height)}else{this.updateCtrlBtnsPos&&this.updateCtrlBtnsPos(this.getWidthInPixels(),this.getHeightInPixels())}};TextArea.prototype.onStopResize=function(ui){_super.prototype.onStopResize.call(this,ui);var parent=this.getParent();if(parent)
parent.updateSize();};TextArea.prototype.comProperties=function(){var thisClass=this,fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Opacity (%)')},{type:'SliderControl',id:'opacity',width:120}]}]}],callbackFunc:function(fields){thisClass.opacity=fields.opacity.getValue();thisClass.updateStyle()}});fields.opacity.setValue(this.opacity);return fields};TextArea.prototype.updateStyle=function(initial,langCode){if(initial===void 0){initial=!1}
_super.prototype.updateStyle.call(this,initial,langCode);if(!this.parent||this.parent.getChildrenLayout()==="absolute"){this.textDiv.css({position:"relative"});this.textDivRendered.css({position:"relative"})}else{this.textDiv.css({position:"relative"});this.textDivRendered.css({position:"relative"})}};TextArea.prototype.onReloadTextTags=function(){this.setHtml(this.getHtml())};TextArea.prototype.onSwitchLanguage=function(langCode,fromEditor){if(fromEditor===void 0){fromEditor=!1}
if(!fromEditor){_super.prototype.onSwitchLanguage.call(this,langCode);this.hideEditor()}
this.setHtml(__tr(this.textDivValue,langCode,null,!0));this.onResize(!0)};TextArea.prototype.getCurrentModeScaleFactor=function(){return this._scaleFactors?this._scaleFactors[Service_22.Service.modeManager.getMode()]/100:1};TextArea.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"editText",type:EditTextProperty,uiComponentOptions:{click:function(){this.showEditor(0,0)}}});this.registerProperty({name:"opacity",type:PropertyType_2.PropertyType.ElementOpacity});this.registerProperty({name:"individualShadow",type:PropertyType_2.PropertyType.IndividualShadow,uiComponentOptions:{forText:!0,},onChange:function(property,owner){if(!owner.elem||!owner.controls||!owner.elem.data("resizableExt"))
return;owner.updateStyle()}});this.registerProperty({name:"scaleFactors",type:PropertyType_2.PropertyType.SpacingModeScaleFactors,onChange:function(property,owner){owner.controls.updateMargin(owner.getActualMargins());owner.controls.updatePadding(owner.getActualPadding())}})};TextArea.pluginName='TextArea';TextArea.rtl=!1;TextArea.mouseDowned=!1;TextArea.editorDefaultText='<p class="wb-stl-normal">'+__("Enter your text here")+'</p>';TextArea.editorInitialized=!1;TextArea.tinyEditor=!1;TextArea.textAreaElements=[];TextArea.editorActive=null;TextArea.maxCont=null;TextArea._aiDialog=null;return TextArea}(Element_5.Element));Service_22.Service.textArea={hideEditors:function(){TextArea.hideEditors()},isMousedowned:function(){return TextArea.mouseDowned},resetMousedowned:function(){if(!jquery_77.default.browser.msie)
TextArea.mouseDowned=!1},getActiveEditor:function(){return TextArea.editorActive}};ElementRegister_4.ElementRegister.registerClass("TextArea",TextArea)});define("js/PreloaderMonitorUrl",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PreloaderMonitorUrl=void 0;var PreloaderMonitorUrl=(function(){function PreloaderMonitorUrl(url,method){this.url="";this.method="get";this.opts={};if(url)
this.url=url;if(method)
this.method=method}
return PreloaderMonitorUrl}());exports.PreloaderMonitorUrl=PreloaderMonitorUrl});define("js/GalleryLib",["require","exports","jquery"],function(require,exports,jquery_78){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GalleryLib=exports.isVideoFile=void 0;function buildAnimName(val){return'wb-anim-'+val.effect+(val.direction?('-'+val.direction):'')}
function buildAnimCss(val){if(!val)
return{animation:'none'};return{animation:buildAnimName(val)+' '+val.duration+'s'+' '+val.timing+' '+val.delay+'s','animation-iteration-count':val.loop?'infinite':1,}}
var config={thumbWidth:290,thumbHeight:290,minWidth:320,minHeight:240};var win=window;var GoogleMapsApi=(function(){function GoogleMapsApi(){}
GoogleMapsApi.configure=function(apiKey,locale){GoogleMapsApi.apiKey=apiKey;GoogleMapsApi.locale=locale};GoogleMapsApi.addListener=function(callback){if(win['GoogleMapsApi_ScriptReady']){callback()}else{if(!win['GoogleMapsApi_Listeners'])
win['GoogleMapsApi_Listeners']=[];win['GoogleMapsApi_Listeners'].push(callback)}
if(!win['GoogleMapsApi_ScriptLoaded']){win['GoogleMapsApi_ScriptLoaded']=!0;win['GoogleMapsApi_clb_fn']=function(){return win['GoogleMapsApi_ScriptReady']=!0};var region=(GoogleMapsApi.locale.indexOf('_')>=0)?GoogleMapsApi.locale.split('_')[1].toUpperCase():null;jquery_78.default.getScript("//maps.googleapis.com/maps/api/js?v=3.exp&key="+GoogleMapsApi.apiKey+"&sensor=false"+(region?("&region="+region+"&language="+GoogleMapsApi.locale):'')+"&callback=GoogleMapsApi_clb_fn&libraries=places");var compleFunc_2=function(){if(!win['GoogleMapsApi_ScriptReady']){setTimeout(compleFunc_2,100)}else if(win['GoogleMapsApi_Listeners']){for(var _i=0,_a=win['GoogleMapsApi_Listeners'];_i<_a.length;_i++){var callback_7=_a[_i];callback_7()}}};compleFunc_2()}};GoogleMapsApi.apiKey='';GoogleMapsApi.locale='en_US';return GoogleMapsApi}());var isVideoFile=function(src){var tsParts=src.split("?ts=");var extParts=tsParts[0].split(".");var ext=(extParts.length>1)?extParts[(extParts.length-1)]:"";if("mp4,mpeg,avi,flv,mkv,mov".indexOf(ext.toLowerCase())>=0){return!0}
return!1};exports.isVideoFile=isVideoFile;var GalleryLib=exports.GalleryLib=(function(){function GalleryLib(data){var _this_1=this;this.type="thumbs";this.slideshowInterval=5;this.slideshowSpeed=400;this.images=[];this.imageIndex=0;this.slideshowTimer=0;this.displayedImage=null;this.loadingImage=null;this.listImgCont=null;this.thumbImgCont=null;this.fullThumbWidth=0;this.fullThumbHeight=0;this.bgColor="";this.padding=0;this.imageCover=!1;this.disablePopup=!1;this.slideOpacity=100;this.thumbWidth=config.thumbWidth;this.thumbHeight=config.thumbHeight;this.thumbAlign="left";this.thumbPadding=6;this.thumbAnim=null;this.thumbShadow=null;this.showPictureCaption="always";this.captionIncludeDescription=!1;this.imageElems={};this.lightBox=null;this.initialRender=!1;this.lightBoxDisplayed=!1;this.invalid=!1;this.resizeEventHandler=null;this.transitionendEventHandler=null;this.map=null;this.mapMarkers=[];this.mapInfowindows=[];this.mapDiv=null;this.pause=!1;this.delayedUpdateTimeout=0;this.metaUpdateTimeout=0;GalleryLib.galleryLibList.push(this);this.elem=(0,jquery_78.default)('<div>').addClass('wb_gallery');this.id=data.id?data.id:'wb-gallery-id';this.height=data.height?data.height:'';this.border=data.border?data.border:{border:'5px none #FFFFFF'};this.thumbWidth=(typeof data.thumbWidth==='number'&&data.thumbWidth>0)?data.thumbWidth:config.thumbWidth;this.thumbHeight=(typeof data.thumbHeight==='number'&&data.thumbHeight>0)?data.thumbHeight:config.thumbHeight;this.thumbAlign=data.thumbAlign?data.thumbAlign:this.thumbAlign;this.thumbPadding=(data.thumbPadding||data.thumbPadding===0)?data.thumbPadding:this.thumbPadding;if(data.thumbAnim)
this.thumbAnim=data.thumbAnim;if(data.thumbShadow)
this.thumbShadow=data.thumbShadow;this.padding=(data.padding||data.padding===0)?data.padding:0;this.type=data.type?data.type:this.type;this.slideshowInterval=(typeof data.interval==='number')?data.interval:10;this.imageCover=(typeof data.imageCover==='boolean')?data.imageCover:this.imageCover;this.disablePopup=(typeof data.disablePopup==='boolean')?data.disablePopup:this.disablePopup;this.slideOpacity=(typeof data.slideOpacity==='number')?data.slideOpacity:this.slideOpacity;this.slideshowSpeed=(typeof data.speed==='number')?data.speed:400;this.setBgColor(data.bgColor?data.bgColor:'transparent');this.showPictureCaption=(typeof data.showPictureCaption==='string')?data.showPictureCaption:this.showPictureCaption;this.captionIncludeDescription=!!data.captionIncludeDescription;if(data.captionBackground)
this.setCaptionBackground(data.captionBackground);if(data.captionPosition)
this.setCaptionPosition(data.captionPosition);if(data.captionTitleStyle)
this.setCaptionTitleStyle(data.captionTitleStyle);if(data.captionDescriptionStyle)
this.setCaptionDescriptionStyle(data.captionDescriptionStyle);if(data.controlsArrow)
this.setControlsArrow(data.controlsArrow);if(data.controlsArrowSize)
this.setControlsArrowSize(data.controlsArrowSize);if(data.controlsArrowStyle)
this.setControlsArrowStyle(data.controlsArrowStyle);this.mapTypeId=data.mapTypeId||null;this.markerIconTypeId=data.markerIconTypeId||null;this.zoom=data.zoom||16;this.mapCenter=data.mapCenter||null;this.key=data.key||null;this.theme=data.theme||'default';this.color=data.color||'#eeeeee';this.showSatellite=data.showSatellite||!1;this.showZoom=data.showZoom||!1;this.showStreetView=data.showStreetView||!1;this.showFullscreen=data.showFullscreen||!1;this.allowDragging=data.allowDragging||!1;this.showRoads=data.showRoads||!1;this.showLandmarks=data.showLandmarks||!1;this.showLabels=data.showLabels||!1;this.locale=data.locale||'en_US';if(this.key)
GoogleMapsApi.configure(this.key,this.locale);if(!('wb_builder' in window)){this.initialRender=!0}
this.setImages((data.images&&data.images.length)?data.images:[]);if(data.trackResize){this.resizeEventHandler=function(){return _this_1.handleResize()};(0,jquery_78.default)(window).on('resize',this.resizeEventHandler)}
this.transitionendEventHandler=function(e){if((0,jquery_78.default)(e.target).is(".wb-viewport-block"))
_this_1.handleResize();};(0,jquery_78.default)(window).on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',this.transitionendEventHandler);(0,jquery_78.default)(document).on('mousemove',function(e){if((0,jquery_78.default)(e.target).attr('data-plugin')=='Gallery'||(0,jquery_78.default)(e.target).parents('div[data-plugin="Gallery"]').length){_this_1.pause=!0;if(_this_1.currentType=='image'){clearInterval(_this_1.slideshowTimer);_this_1.slideshowTimer=0}}else{_this_1.pause=!1;if(_this_1.currentType=='image'){_this_1.reset()}}})}
GalleryLib.getGalleryLibList=function(){return GalleryLib.galleryLibList};GalleryLib.prototype.setVisible=function(visible){this.elem.css('display',visible?'block':'none')};GalleryLib.prototype.appendTo=function(container){(0,jquery_78.default)(container).append(this.elem);this.handleResize()};GalleryLib.prototype.destroy=function(){var _a;if(this.slideshowTimer)
clearInterval(this.slideshowTimer);if(this.type==="masonry"&&this.listImgCont)
this.listImgCont.masonry("destroy");(_a=this.lightBox)===null||_a===void 0?void 0:_a.destroy();if(this.resizeEventHandler)(0,jquery_78.default)(window).off('resize',this.resizeEventHandler);if(this.transitionendEventHandler)(0,jquery_78.default)(window).off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',this.transitionendEventHandler);this.elem.remove()};GalleryLib.prototype.reset=function(callback){var _this_1=this;if(this.slideshowTimer)
clearInterval(this.slideshowTimer);if(this.slideshowInterval&&this.images.length>1){this.slideshowTimer=setInterval(function(){return _this_1.slideshowNext(callback)},this.slideshowInterval*1000)}else this.slideshowTimer=0};GalleryLib.prototype.invalidate=function(){var _this_1=this;if(!this.invalid){this.invalid=!0;if("requestAnimationFrame" in window)
requestAnimationFrame(function(){return _this_1.revalidate()});else setTimeout(function(){return _this_1.revalidate()},0)}
return this};GalleryLib.prototype.revalidate=function(){this.invalid=!1;this.render();return this};GalleryLib.prototype.applyAnimation=function(img,i,layoutReady){img.css(buildAnimCss());if(this.thumbAnim&&this.thumbAnim.normal){var anim_1=this.thumbAnim.normal;img.addClass('wb-anim-entry').removeClass('wb-anim-entry-on');var func=function(){return setTimeout(function(){img.css(buildAnimCss(__assign(__assign({},anim_1),{delay:0})));setTimeout(function(){return img.addClass('wb-anim-entry-on').removeClass('wb-anim-entry')},40)},(anim_1.delay*1000*i))};if(layoutReady)
layoutReady.done(func);else func()}
if(this.thumbAnim&&this.thumbAnim.hover){var anim=this.thumbAnim.hover;var hoverOff_1=buildAnimCss();var hoverOn_1=buildAnimCss(anim);img.addClass(buildAnimName(anim)).off('mouseover').on('mouseover',function(){return img.css(hoverOn_1)}).off('mouseout').on('mouseout',function(){return img.css(hoverOff_1)});if(anim.loop)
img.addClass('loop');}};GalleryLib.prototype.render=function(){if(this.slideshowTimer)
clearInterval(this.slideshowTimer);this.slideshowTimer=0;this.listImgCont=null;this.displayedImage=null;this.loadingImage=null;this.elem.empty();if(this.images.length==0)
return;if(!this._initialHeight)
this._initialHeight=this.elem.parent().get(0).style.height;this.elem.parent().css('height',this._initialHeight);switch(this.type){case "slideshow":this.renderSlideshow();break;case "list":this.renderList();break;case "masonry":this.renderMasonry();break;case "map":this.renderMap();break;default:this.renderThumbs();break}};GalleryLib.prototype.getThemeDefaultStyle=function(){return[]};GalleryLib.prototype.getThemeLightStyle=function(color){return[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":(color?color:'#cccccc')},{"visibility":"on"}]}]};GalleryLib.prototype.getThemeDarkStyle=function(color){return[{"featureType":"all","elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#000000"},{"lightness":40}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#000000"},{"lightness":16}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":17},{"weight":1.2}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":21}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":16}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":19}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":(color?color:'#333333')},{"lightness":17}]}]};GalleryLib.prototype.getThemeMonochromeStyle=function(color){return[{"featureType":"all","elementType":"geometry","stylers":[{"color":(color?color:'#3e44b5')}]},{"featureType":"all","elementType":"labels.text.fill","stylers":[{"gamma":0.01},{"lightness":20}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"saturation":-31},{"lightness":-33},{"weight":2},{"gamma":0.8}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"lightness":30},{"saturation":30}]},{"featureType":"poi","elementType":"geometry","stylers":[{"saturation":20}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"lightness":20},{"saturation":-20}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":10},{"saturation":-30}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"saturation":25},{"lightness":25}]},{"featureType":"water","elementType":"all","stylers":[{"lightness":-20}]}]};GalleryLib.prototype.getThemeStyle=function(theme,color){if(theme==='light'){return this.getThemeLightStyle(color)}else if(theme==='dark'){return this.getThemeDarkStyle(color)}else if(theme==='monochrome'){return this.getThemeMonochromeStyle(color)}
return this.getThemeDefaultStyle()};GalleryLib.prototype.getStyles=function(){var styles=this.getThemeStyle(this.theme,this.color);var extraStyles=[{featureType:'road',stylers:[{visibility:(this.showRoads?'on':'off')}]},{featureType:'poi',stylers:[{visibility:(this.showLandmarks?'on':'off')}]},{elementType:'labels',stylers:[{visibility:(this.showLabels?'on':'off')}]}];return styles.concat(extraStyles)};GalleryLib.prototype.getLeftArrow=function(type,active){if(type===void 0){type=null}
if(active===void 0){active=!1}
var icon=(0,jquery_78.default)('<i class="fa fa-chevron-left"></i>');switch(type){case 'shevron':icon=(0,jquery_78.default)('<i class="fa fa-chevron-left"></i>');break;case 'shevron-circle':icon=(0,jquery_78.default)('<i class="fa fa-chevron-circle-left"></i>');break;case 'arrow':icon=(0,jquery_78.default)('<i class="fa fa-arrow-left"></i>');break;case 'arrow-circle':icon=(0,jquery_78.default)('<i class="fa fa-arrow-circle-left"></i>');break;case 'caret':icon=(0,jquery_78.default)('<i class="fa fa-caret-left"></i>');break;case 'circles':icon=(0,jquery_78.default)(active?'<i class="fa fa-circle"></i>':'<i class="fa fa-circle-o"></i>');break;case 'none':return null}
if(this.controlsArrowSize){icon.css('font-size',this.controlsArrowSize)}
return icon};GalleryLib.prototype.getRightArrow=function(type,active){if(type===void 0){type=null}
if(active===void 0){active=!1}
var icon=(0,jquery_78.default)('<i class="fa fa-chevron-right"></i>');switch(type){case 'shevron':icon=(0,jquery_78.default)('<i class="fa fa-chevron-right"></i>');break;case 'shevron-circle':icon=(0,jquery_78.default)('<i class="fa fa-chevron-circle-right"></i>');break;case 'arrow':icon=(0,jquery_78.default)('<i class="fa fa-arrow-right"></i>');break;case 'arrow-circle':icon=(0,jquery_78.default)('<i class="fa fa-arrow-circle-right"></i>');break;case 'caret':icon=(0,jquery_78.default)('<i class="fa fa-caret-right"></i>');break;case 'circles':icon=(0,jquery_78.default)(active?'<i class="fa fa-circle"></i>':'<i class="fa fa-circle-o"></i>');break;case 'none':return null}
if(this.controlsArrowSize){icon.css('font-size',this.controlsArrowSize)}
return icon};GalleryLib.prototype.renderThumbs=function(){this.elem.html('<div class="wb-thumbs-only" style="width: 100%; height: 100%; overflow: auto;"></div>');this.elem.css("text-align",this.thumbAlign);var elem=this.elem.children().first();for(var i=0,c=this.images.length;i<c;i++){if((0,exports.isVideoFile)(this.images[i].src)){continue}
var img=this.addImage(elem,this.images[i],i).wrp;this.applyAnimation(img,i)}
elem.children('.wb_thumb').css('padding',(this.thumbPadding/2)+'px');if(this.thumbShadow&&this.height==='auto'){this.elem.css('overflow','visible');this.elem.children('.wb-thumbs-only').css('overflow','visible');this.elem.parent('.wb_gallery').css('overflow','visible')}else{this.elem.css('overflow','');this.elem.parent('.wb_gallery').css('overflow','')}};GalleryLib.prototype.renderSlideshow=function(){var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
this.elem.html('<div class="gallery-slideshow">'+'<div class="gallery-slide-image" style="overflow: hidden;"></div>'+'</div>');var cont=this.elem.children().first();this.renderSlideshowControls(cont);this.listImgCont=cont.children(".gallery-slide-image");this.listImgCont.css('opacity',this.slideOpacity/100);this.reset();this.imageIndex=-1;this.slideshowNext()};GalleryLib.prototype.renderSlideshowControls=function(cont){var _this_1=this;var _a;var self=this;var toNormal=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_78.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.normal)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.normal.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.normal.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.normal.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.normal.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toHoverState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_78.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.hover)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.hover.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.hover.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.hover.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.hover.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toActiveState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_78.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.active)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.active.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.active.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.active.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.active.shadow.css['text-shadow']})}else $this.css('textShadow','')};if(this.controlsArrow==='circles'){cont.children('.gallery-slide-pagination').remove();var pageElem=(0,jquery_78.default)('<div class="gallery-slide-pagination"></div>');if(this.showPictureCaption!=='none'&&this.captionPosition==='center bottom')
pageElem.addClass('gallery-slide-pagination-top');else pageElem.addClass('gallery-slide-pagination-bottom');cont.append(pageElem);var _loop_14=function(i){var circleElem=(_a=this_10.getLeftArrow(this_10.controlsArrow,i===this_10.imageIndex))===null||_a===void 0?void 0:_a.clone().hover(toHoverState,function(){if(i===self.imageIndex)
toActiveState.apply(this);else toNormal.apply(this)}).click(function(){return _this_1.slideshowTo(i)});if(circleElem){(i===this_10.imageIndex?toActiveState:toNormal).apply(circleElem.get(0));pageElem.append(circleElem)}};var this_10=this;for(var i=0;i<this.getImages().length;i++){_loop_14(i)}}else{cont.children('.gallery-slide-left, .gallery-slide-right').remove();var larr=(0,jquery_78.default)('<div class="gallery-slide-left"></div>');cont.append(larr);var larrow=this.getLeftArrow(this.controlsArrow);if(larrow)
larr.append(larrow);var rarr=(0,jquery_78.default)('<div class="gallery-slide-right"></div>');cont.append(rarr);var rarrow=this.getRightArrow(this.controlsArrow);if(rarrow)
rarr.append(rarrow);larr.click(function(){return _this_1.slideshowPrev()});rarr.click(function(){return _this_1.slideshowNext()});larr.hover(toHoverState,toNormal);toNormal.apply(larr.get(0));rarr.hover(toHoverState,toNormal);toNormal.apply(rarr.get(0))}};GalleryLib.prototype.renderList=function(){var _this_1=this;var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
var h=this.elem.height();if(!h)
h=this.elem.parent().height();var tw=this.getThumbWidth();var th=this.getThumbHeight();var thumbcont=(0,jquery_78.default)("<div></div>");var callback=function(){var img=_this_1.imageElems[_this_1.imageIndex];if(!img.parentNode||!img.parentNode.parentNode||!img.parentNode.parentNode.parentNode)
return;(0,jquery_78.default)(img.parentNode.parentNode.parentNode).children(".tmb-selected").removeClass("tmb-selected");(0,jquery_78.default)(img.parentNode.parentNode).addClass("tmb-selected")};this.imageElems={};var _loop_15=function(i){var image=this_11.images[i];var img=this_11.addImage(thumbcont,image,i,!0).img;img.css({cursor:"pointer"});this_11.imageElems[i]=img.get(0);img.click(function(){if(!_this_1.listImgCont)
return;_this_1.imageIndex=_this_1.images.indexOf(image);_this_1.displayImage(_this_1.listImgCont,callback)});var par=img.parent().parent();if(i===this_11.imageIndex){par.addClass("tmb-selected");tw=this_11.getThumbWidth()+8;th=this_11.getThumbHeight()+8}};var this_11=this;for(var i=0;i<this.images.length;i++){_loop_15(i)}
var thumbs=thumbcont.children('.wb_thumb');thumbs.css('margin','0 '+(this.getThumbPadding()/2)+'px');(0,jquery_78.default)(thumbs.get(0)).css('margin','0 '+(this.getThumbPadding()/2)+'px 0 0');(0,jquery_78.default)(thumbs.get(thumbs.length-1)).css('margin','0 0 0 '+(this.getThumbPadding()/2)+'px');this.fullThumbWidth=tw;this.fullThumbHeight=th;var thumbsWidth=tw*this.images.length+this.getThumbPadding()*(this.images.length-1);thumbcont.css({position:"absolute",left:"0",top:"5px",width:thumbsWidth+"px",height:th+"px"});var galcont=document.createElement("DIV");(0,jquery_78.default)(galcont).css({position:"relative",height:h>0?(h+"px"):''});galcont.className="gallery-list";var imgcont=document.createElement("DIV");(0,jquery_78.default)(imgcont).css({position:"relative",height:h>0?((h-th-10)+"px"):'',overflow:"hidden"});imgcont.className="gallery-list-image";var icon;var thumbdiv_in1=document.createElement("DIV");(0,jquery_78.default)(thumbdiv_in1).css({position:"relative","float":"left",height:(th+10)+"px",cursor:"pointer"});thumbdiv_in1.className="gallery-list-left";(0,jquery_78.default)(thumbdiv_in1).click(function(){return _this_1.slideBy(-_this_1.fullThumbWidth*3)});icon=this.getLeftArrow(this.controlsArrow);if(icon)
thumbdiv_in1.appendChild(icon.get(0));var thumbdiv_in2=document.createElement("DIV");(0,jquery_78.default)(thumbdiv_in2).css({position:"relative","float":"none",margin:"0 auto",maxWidth:thumbsWidth+"px",height:(th+10)+"px",overflow:"hidden",});thumbdiv_in2.className="gallery-list-thumbs";var thumbdiv_in3=document.createElement("DIV");(0,jquery_78.default)(thumbdiv_in3).css({position:"relative","float":"right",height:(th+10)+"px",cursor:"pointer"});thumbdiv_in3.className="gallery-list-right";(0,jquery_78.default)(thumbdiv_in3).click(function(){return _this_1.slideBy(_this_1.fullThumbWidth*3)});icon=this.getRightArrow(this.controlsArrow);if(icon)
thumbdiv_in3.appendChild(icon.get(0));var self=this;var toHoverState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_78.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.hover)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.hover.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.hover.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.hover.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.hover.shadow.css['text-shadow']})}else $this.css('textShadow','')};var toNormalState=function(){var _a,_b,_c,_d,_e,_f;var $this=(0,jquery_78.default)(this);if((_b=(_a=self.controlsArrowStyle)===null||_a===void 0?void 0:_a.normal)===null||_b===void 0?void 0:_b.color)
$this.css({color:self.controlsArrowStyle.normal.color});else $this.css('color','');if(((_d=(_c=self.controlsArrowStyle)===null||_c===void 0?void 0:_c.normal.shadow)===null||_d===void 0?void 0:_d.css)&&((_f=(_e=self.controlsArrowStyle)===null||_e===void 0?void 0:_e.normal.shadow)===null||_f===void 0?void 0:_f.css['text-shadow'])){$this.css({textShadow:self.controlsArrowStyle.normal.shadow.css['text-shadow']})}else $this.css('textShadow','')};(0,jquery_78.default)(thumbdiv_in1).hover(toHoverState,toNormalState);toNormalState.apply(thumbdiv_in1);(0,jquery_78.default)(thumbdiv_in3).hover(toHoverState,toNormalState);toNormalState.apply(thumbdiv_in3);var thumbdiv=document.createElement("DIV");(0,jquery_78.default)(thumbdiv).css({position:"relative",height:(th+10)+"px",overflow:"hidden"});(0,jquery_78.default)(thumbdiv_in2).append(thumbcont);thumbdiv.appendChild(thumbdiv_in1);thumbdiv.appendChild(thumbdiv_in3);thumbdiv.appendChild(thumbdiv_in2);galcont.appendChild(imgcont);galcont.appendChild(thumbdiv);this.listImgCont=(0,jquery_78.default)(imgcont);this.thumbImgCont=(0,jquery_78.default)(thumbdiv_in2);this.elem.append(galcont);this.reset(callback);this.imageIndex=-1;this.slideshowNext(callback);if(((0,jquery_78.default)(thumbdiv_in1).outerWidth()+(0,jquery_78.default)(thumbdiv_in2).outerWidth()+(0,jquery_78.default)(thumbdiv_in3).outerWidth())<this.elem.width()){(0,jquery_78.default)(thumbdiv_in1).hide();(0,jquery_78.default)(thumbdiv_in3).hide()}};GalleryLib.prototype.renderMasonry=function(){var elem=(0,jquery_78.default)('<div class="wb-masonry-items"/>');var cont=(0,jquery_78.default)('<div class="wb-masonry" style="width: 100%; height: 100%; overflow: auto;"/>');cont.append(elem);this.elem.append(cont);if(this.thumbAlign==="left")
elem.css("float","left");else if(this.thumbAlign==="right")
elem.css("float","right");else elem.css("margin","0 auto");var layoutReady=jquery_78.default.Deferred();for(var i=0,c=this.images.length;i<c;i++){if((0,exports.isVideoFile)(this.images[i].src)){continue}
var img=this.addImage(elem,this.images[i],i).wrp;this.applyAnimation(img,i,layoutReady.promise())}
elem.children('.wb_thumb').css('padding',(this.thumbPadding/2)+'px');var brd=this.getBorder();elem.masonry({itemSelector:".wb_thumb",columnWidth:this.getThumbWidth()+(brd?this.getBorderWidth(brd,1)+this.getBorderWidth(brd,3):0)+this.thumbPadding,fitWidth:!0,transitionDuration:0}).masonry('once','layoutComplete',function(){return layoutReady.resolve()});this.listImgCont=elem;if(this.thumbShadow&&this.height==='auto'){this.elem.css('overflow','visible');this.elem.children('.wb-masonry').get(0).style.setProperty("overflow","visible","important");this.elem.parent('.wb_gallery').css('overflow','visible')}else{this.elem.css('overflow','');this.elem.parent('.wb_gallery').css('overflow','')}};GalleryLib.prototype.renderMap=function(){var _this_1=this;var rootElem=this.elem.parent();if('wb_builder' in window){rootElem=rootElem.parent()}
if(rootElem.length){var minH=rootElem.css('min-height');if(minH&&/^\d+px$/.test(minH)&&parseInt(minH)>0)
this.elem.parent().css('height',minH);}
this.elem.html('<div class="wb-gallery-map" style="width: 100%; height: 100%; overflow: auto; position: absolute;"></div>');this.elem.css("text-align",this.thumbAlign);var elem=this.elem.children().first();this.map=null;this.mapDiv=null;if(this.key){GoogleMapsApi.addListener(function(){var mapTypeId=_this_1.mapTypeId||google.maps.MapTypeId.ROADMAP;var thisClass=_this_1;if(!_this_1.map){if(!_this_1.mapDiv){_this_1.mapDiv=(0,jquery_78.default)('<div>').css({width:'100%',height:'100%'}).appendTo(elem)}
_this_1.mapDiv.css("display","block");setTimeout(function(){if(thisClass.mapDiv){thisClass.map=new google.maps.Map(thisClass.mapDiv.get(0),{zoom:thisClass.zoom,center:thisClass.mapCenter&&thisClass.mapCenter.latLng?thisClass.mapCenter.latLng:new google.maps.LatLng(0,0),mapTypeId:mapTypeId,mapTypeControl:thisClass.showSatellite,zoomControl:thisClass.showZoom,streetViewControl:thisClass.showStreetView,fullscreenControl:thisClass.showFullscreen,draggable:thisClass.allowDragging,styles:thisClass.getStyles()})}},50)}
var init=function(){if(!thisClass.map){setTimeout(init,10);return}
thisClass.map.setZoom(thisClass.zoom);thisClass.map.setCenter(new google.maps.LatLng(0,0));thisClass.map.setMapTypeId(mapTypeId);thisClass.map.setOptions({mapTypeControl:thisClass.showSatellite,zoomControl:thisClass.showZoom,streetViewControl:thisClass.showStreetView,fullscreenControl:thisClass.showFullscreen,draggable:thisClass.allowDragging,styles:thisClass.getStyles()});thisClass.map.addListener("click",function(){thisClass.mapInfowindows.map(function(item){item.close()})});thisClass.mapMarkers.map(function(item){return item.setMap(null)});thisClass.mapMarkers=[];thisClass.mapInfowindows=[];var latlngbounds=new google.maps.LatLngBounds();var _loop_16=function(i,c){var image=thisClass.images[i];if(image.address&&image.address.latLng){var content=(0,jquery_78.default)('<div class="gallery-map-image" style="position: relative">'+"<img src=\"".concat(thisClass.urlEncode(image.src||image.thumb||''),"\" alt=\"").concat(image.title,"\" style=\"max-width: 100%; max-height: 100%\"/>")+"</div>");if((image.title||image.description)&&thisClass.showPictureCaption!=='none'){caption=(0,jquery_78.default)('<div class="wb-picture-caption"/>');if(thisClass.captionBackground)
caption.css("background-color",thisClass.captionBackground);if(thisClass.captionPosition)
caption.addClass(thisClass.captionPosition.split(" ").join("-"));thisClass.fillCaptionContainer(caption,image,thisClass.captionIncludeDescription);content.append(caption)}
var infowindow_1=new google.maps.InfoWindow({content:content.get(0),});infowindow_1.addListener('domready',function(){var parent=(0,jquery_78.default)(this.getContent()).parent();var height=parent.parent().innerHeight()-parent.height();(0,jquery_78.default)(this.getContent()).children('img').css('max-height',parent.height()-height)});var position=new google.maps.LatLng(image.address.latLng);latlngbounds.extend(position);var icon=undefined;if(thisClass.markerIconTypeId==='thumbs'){icon={url:image.thumb||image.src,size:new google.maps.Size(35,35),scaledSize:new google.maps.Size(35,35)}}else if(thisClass.markerIconTypeId==='camera'){icon={path:'M960 864q119 0 203.5 -84.5t84.5 -203.5t-84.5 -203.5t-203.5 -84.5t-203.5 84.5t-84.5 203.5t84.5 203.5t203.5 84.5zM1664 1280q106 0 181 -75t75 -181v-896q0 -106 -75 -181t-181 -75h-1408q-106 0 -181 75t-75 181v896q0 106 75 181t181 75h224l51 136 q19 49 69.5 84.5t103.5 35.5h512q53 0 103.5 -35.5t69.5 -84.5l51 -136h224zM960 128q185 0 316.5 131.5t131.5 316.5t-131.5 316.5t-316.5 131.5t-316.5 -131.5t-131.5 -316.5t131.5 -316.5t316.5 -131.5z',anchor:new google.maps.Point(15,30),scale:0.01,rotation:180,fillColor:"#cecece",fillOpacity:0.5,strokeWeight:1,}}
var marker_1=new google.maps.Marker({position:position,map:thisClass.map,title:image.title,icon:icon});marker_1.addListener("click",function(){thisClass.mapInfowindows.map(function(item){return item.close()});var map=marker_1.getMap();if(map){infowindow_1.open(map,marker_1)}});thisClass.mapMarkers.push(marker_1);thisClass.mapInfowindows.push(infowindow_1)}};var caption;for(var i=0,c=thisClass.images.length;i<c;i++){_loop_16(i,c)}
if(thisClass.mapCenter&&thisClass.mapCenter.latLng&&thisClass.mapCenter.latLng.lat!==0&&thisClass.mapCenter.latLng.lng!==0){thisClass.map.setCenter(thisClass.mapCenter.latLng);thisClass.map.setZoom(thisClass.zoom)}else if(thisClass.mapMarkers.length===1){thisClass.map.setCenter(new google.maps.LatLng(0,0));thisClass.map.setZoom(thisClass.zoom)}else{thisClass.map.fitBounds(latlngbounds)}};setTimeout(init,50)})}};GalleryLib.prototype.onImageLoad=function(){var _this_1=this;if(this.type==="masonry"){this.elem.find(".wb-masonry-items").masonry();this.elem.trigger("elementviewchange")}
if(this.delayedUpdateTimeout)
clearTimeout(this.delayedUpdateTimeout);this.delayedUpdateTimeout=setTimeout(function(){_this_1.delayedUpdateTimeout=0;if(_this_1.type==="masonry"){_this_1.elem.find(".wb-masonry-items").masonry();_this_1.elem.trigger("elementviewchange")}},1000)};GalleryLib.prototype.getBorderWidth=function(css,side){if(side===void 0){side=0}
var border='';if(side==1&&typeof css.borderLeft==='string')
border=css.borderLeft;if(side==1&&typeof css['border-left']==='string')
border=css['border-left'];if(side==3&&typeof css.borderRight==='string')
border=css.borderRight;if(side==3&&typeof css['border-right']==='string')
border=css['border-right'];if(!border&&typeof css.border==='string')
border=css.border;if(border.indexOf('none')===-1){var res=border.match(/^([0-9]+)px(?:| .+)$/);if(res)
return parseFloat(res[1]);}
return 0};GalleryLib.prototype.slideBy=function(delta,instant){if(instant===void 0){instant=!1}
if(!this.thumbImgCont)
return;var cont=this.thumbImgCont;var div=cont.children().first();var pos=div.position();var x=pos.left;x-=delta;var minx=-(div.width()-cont.width());if(x<minx)
x=minx;if(x>0)
x=0;var css={left:x+"px"};if(instant)
div.stop(!0,!1).css(css);else div.animate(css)};GalleryLib.prototype.handleContinuousResize=function(){if(!this.listImgCont)
return;if(this.type==="masonry"){this.listImgCont.masonry()}};GalleryLib.prototype.handleResize=function(){if(!this.listImgCont)
return;if(this.type==="list"){var h=this.elem.height();var th=this.fullThumbHeight;this.listImgCont.css({height:(h-th-10)+"px"});this.slideBy(0,!0);var larr=(0,jquery_78.default)('.gallery-list-left',this.elem);var thumbs=(0,jquery_78.default)('.gallery-list-thumbs',this.elem);var rarr=(0,jquery_78.default)('.gallery-list-right',this.elem);if((larr.outerWidth()+thumbs.outerWidth()+rarr.outerWidth())<this.elem.width()){larr.hide();rarr.hide()}else{larr.show();rarr.show()}}else if(this.type==="masonry"){this.listImgCont.css('width','');this.listImgCont.masonry()}
if(this.displayedImage)
this.updateImageSize(this.displayedImage);if(this.loadingImage)
this.updateImageSize(this.loadingImage);};GalleryLib.prototype.updateImageSize=function(imageCont){if(!this.listImgCont)
return;if(this.type==='slideshow'||this.type==='list')
return;var size=imageCont.data("_wb_size_");var stl=this.calcImageStyles(this.listImgCont,size);imageCont.css({left:stl.x+"px",top:stl.y+"px"});var img=imageCont.children('img').first();if(img&&img.length){img.css({width:stl.width+"px",height:stl.height+"px"});var imgRaw=img.get(0);imgRaw.width=stl.width;imgRaw.height=stl.height}};GalleryLib.prototype.calcImageStyles=function(displayCont,image){if(!image)
return{x:0,y:0,width:0,height:0};var cover=this.imageCover;var pad=cover?0:this.padding;var maxWidth=displayCont.innerWidth()-pad*2;var maxHeight=displayCont.innerHeight()-pad*2;var w=image.width;var h=image.height;if(cover||w>maxWidth||h>maxHeight){var ratio1=w/maxWidth;var ratio2=h/maxHeight;var ratio=cover?Math.min(ratio1,ratio2):Math.max(ratio1,ratio2);w=Math.floor(w/ratio);h=Math.floor(h/ratio)}
return{x:Math.floor((maxWidth-w)/2+pad),y:Math.floor((maxHeight-h)/2+pad),width:w,height:h}};GalleryLib.prototype.parseHash=function(){var hash=window.location.hash.substring(1),params={gid:'',pid:''};if(hash.length<5){return params}
var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue}
var pair=vars[i].split('=');if(pair.length<2){continue}
if(i==1&&pair){params.gid=pair[1]}
if(i==2&&pair){params.pid=pair[1]}}
return params};GalleryLib.prototype.displayImage=function(displayCont,callback){var _this_1=this;if(typeof callback==='function')
callback();var image=this.images[this.imageIndex];if(!image)
return;var link=(this.type!=="thumbs"&&this.type!=="masonry"&&image.link)?image.link:undefined;var cont=(link?(0,jquery_78.default)('<a>'):(0,jquery_78.default)('<div>')).addClass("gallery-image");if(link){cont.attr('href',link.url);if(link.target)
cont.attr('target',link.target);}
if(image.title)
cont.attr('title',image.title);cont.data("image",image);cont.css({display:"none"});if(this.thumbShadow&&this.thumbShadow.css&&['thumbs','masonry'].indexOf(this.type)>=0){cont.css(this.thumbShadow.css)}
var img;var imgJq;if((0,exports.isVideoFile)(image.src)){this.currentType='video';imgJq=(0,jquery_78.default)('<video class="wb-video visible" controls="" playsinline muted controlslist="nodownload nofullscreen noremoteplayback" disablepictureinpicture preload="auto">');img=imgJq[0];imgJq.on('loadedmetadata',function(){var onloaded=function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();var parent=cont.parent();_this_1.displayedImage=(parent&&parent.length)?cont:null;_this_1.loadingImage=null;img.play()};imgJq.css({'object-fit':_this_1.imageCover?'cover':'contain'});cont.css({position:'absolute'});cont.append(img);var speed=_this_1.getTransitionSpeed();if(!speed){cont.show();onloaded()}else{cont.fadeIn(speed,function(){cont.css({position:''});onloaded()})}});if(this.slideshowTimer){clearInterval(this.slideshowTimer);this.slideshowTimer=0}
var _this_3=this;var firstPlay_1=!0;imgJq.on('timeupdate',function(){var curTime=Math.round(this.currentTime);var endTime=Math.round(this.duration);if(curTime>0&&endTime>0&&curTime>=endTime&&firstPlay_1&&!_this_3.pause){firstPlay_1=!1;if(_this_3.slideshowInterval&&_this_3.images.length>1){_this_3.reset();_this_3.slideshowNext(callback)}}})}else{this.currentType='image';img=new Image();img.alt="";if(image.title)
img.alt=image.title;imgJq=(0,jquery_78.default)(img);img.onload=function(){if(_this_1.displayedImage){var caption_1=_this_1.displayedImage.data("caption");_this_1.displayedImage.fadeOut(_this_1.getTransitionSpeed(),function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();});if(caption_1){caption_1.fadeOut(_this_1.getTransitionSpeed(),function(){return caption_1.remove()})}}
cont.append(img);imgJq.css({'object-fit':_this_1.imageCover?'cover':'contain'});cont.css({position:'absolute'});cont.fadeIn(_this_1.getTransitionSpeed(),function(){if(_this_1.displayedImage)
_this_1.displayedImage.remove();var parent=cont.parent();_this_1.displayedImage=(parent&&parent.length)?cont:null;_this_1.loadingImage=null;cont.css({position:''})})}}
imgJq.css((this.imageCover||!this.border)?{"border":"none"}:this.border);displayCont.append(cont);this.loadingImage=cont;(0,jquery_78.default)('.wb-picture-caption').remove();var caption=(0,jquery_78.default)('<div class="wb-picture-caption" style="display: none;"/>');if(this.captionBackground)
caption.css("background-color",this.captionBackground);if(this.captionPosition)
caption.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer(caption,image,this.captionIncludeDescription)){if(this.showPictureCaption==='always'){caption.fadeIn(this.getTransitionSpeed());displayCont.append(caption);cont.data("caption",caption)}else if(this.showPictureCaption==='hover'){displayCont.append(caption);cont.data("caption",caption);caption.css({display:'block',opacity:0,});displayCont.hover(function(){caption.css('opacity','1')},function(){caption.css('opacity','0')})}}else{}
img.src=this.urlEncode(image.src,!0,!0);if(!link)
this.initImageLightBox(imgJq,this.imageIndex);if(this.type==='slideshow')
this.renderSlideshowControls(this.elem.children().first());if(typeof this.onImageDisplayed==='function')
this.onImageDisplayed(img.src);};GalleryLib.prototype.slideshowTo=function(index,callback){if(this.images.length===0||!this.listImgCont||this.lightBoxDisplayed)
return;this.imageIndex=index;if(this.imageIndex>=this.images.length)
this.imageIndex=0;if(this.imageIndex<0)
this.imageIndex=this.images.length-1;this.displayImage(this.listImgCont,callback)};GalleryLib.prototype.slideshowNext=function(callback){if(this.images.length===0||!this.listImgCont||this.lightBoxDisplayed)
return;this.imageIndex++;if(this.imageIndex>=this.images.length)
this.imageIndex=0;this.displayImage(this.listImgCont,callback)};GalleryLib.prototype.slideshowPrev=function(){if(this.images.length===0||!this.listImgCont)
return;this.imageIndex--;if(this.imageIndex<0)
this.imageIndex=this.images.length-1;this.displayImage(this.listImgCont)};GalleryLib.prototype.addImage=function(cont,image,idx,noLightbox){var _this_1=this;if(noLightbox===void 0){noLightbox=!1}
var isThumbsOnlyMode=(this.type==="thumbs"||this.type==="masonry");var link=(isThumbsOnlyMode&&image.link)?image.link:undefined;var div=(link?(0,jquery_78.default)('<a>'):(0,jquery_78.default)('<div>')).addClass("wb_thumb");if(link){div.attr('href',link.url);if(link.target)
div.attr('target',link.target);}
if(image.title)
div.attr('title',image.title);var tw=this.getThumbWidth();var th=this.getThumbHeight();var wrp=(0,jquery_78.default)("<div/>");wrp.css({width:tw+"px",overflow:"hidden",boxSizing:"content-box",position:'relative'});if(this.thumbShadow&&this.thumbShadow.css&&['thumbs','masonry'].indexOf(this.type)>=0){wrp.css(this.thumbShadow.css)}
if(this.type!=='masonry')
wrp.css('height',th+"px");var brd=this.getBorder();if(isThumbsOnlyMode&&brd)
wrp.css(brd);div.append(wrp);div.data("image",image);var onloadcb=function(w,h){var k;if(_this_1.type==='masonry'){k=w/tw}else{var k1=w/tw;var k2=h/th;k=Math.min(k1,k2)}
if(_this_1.imageCover){w=w/k;h=h/k;var x=Math.round((tw-w)/2);var y=(_this_1.type==='masonry')?0:Math.round((th-h)/2);img.css({left:x+"px",top:y+"px",width:w+"px",height:h+"px",objectFit:"",border:""})}else{img.css({left:0,top:0,width:"100%",height:"100%",objectFit:"contain",border:"1px solid #888"})}
try{var anim=wrp.get(0).animate([{opacity:0},{opacity:1}],150);anim.onfinish=function(){wrp.css({opacity:''})};anim.play()}catch(e){wrp.css({opacity:''})}
setTimeout(function(){return _this_1.onImageLoad()},100)};var img;var imgRaw;if((0,exports.isVideoFile)(image.src)){img=(0,jquery_78.default)('<video class="wb-video visible" autoplay loop controls="" playsinline muted controlslist="nodownload nofullscreen noremoteplayback" disablepictureinpicture preload="auto">');imgRaw=img[0];img.on('loadedmetadata',function(){var w=imgRaw.videoWidth;var h=imgRaw.videoHeight;onloadcb(w,h);if(imgRaw instanceof HTMLVideoElement)
imgRaw.play();})}else{img=(0,jquery_78.default)('<img src="" alt="" />');if(image.title)
img.attr('alt',image.title);imgRaw=img.get(0);imgRaw.onload=function(){var w=imgRaw.width;var h=imgRaw.height;onloadcb(w,h)}}
wrp.css({opacity:0});imgRaw.src=this.urlEncode(image.thumb||image.src,!0,!0);img.css({display:"block",maxWidth:"auto",position:"relative"});wrp.append(img);if(isThumbsOnlyMode&&this.getThumbWidth()>=100&&this.showPictureCaption!=='none'){var descDiv_1=(0,jquery_78.default)('<div class="wb-picture-caption"/>');if(this.captionBackground)
descDiv_1.css("background-color",this.captionBackground);if(this.captionPosition)
descDiv_1.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer(descDiv_1,image,this.captionIncludeDescription)){wrp.append(descDiv_1);if(this.showPictureCaption==='hover'){descDiv_1.css({opacity:0,transition:"opacity "+(this.slideshowSpeed/1000).toFixed(3)+"s linear"});div.hover(function(){descDiv_1.css('opacity','1')},function(){descDiv_1.css('opacity','0')})}}}
cont.append(div);if(!noLightbox&&!link)
this.initImageLightBox(img,idx);return{img:img,wrp:wrp}};GalleryLib.prototype.fillCaptionContainer=function(cont,meta,createDescription,createLink){if(createLink===void 0){createLink=!1}
var hasAny=!1;if(meta.title!==""){hasAny=!0;var title=(0,jquery_78.default)('<h3 class="wb-lightbox-title">').append((createLink&&meta.link)?(0,jquery_78.default)('<a>').attr({href:meta.link.url,target:meta.link.target?meta.link.target:null}).text(meta.title):document.createTextNode(meta.title));if(this.captionTitleStyle)
title.css(this.captionTitleStyle);cont.append(title)}
if(createDescription&&meta.description!==""){hasAny=!0;var desc=(0,jquery_78.default)('<div class="wb-lightbox-description">').text(meta.description);if(this.captionDescriptionStyle)
desc.css(this.captionDescriptionStyle);cont.append(desc)}
return hasAny};GalleryLib.prototype.updateImageMeta=function(updateImage){for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if(image.src===updateImage.src){jquery_78.default.extend(!0,image,updateImage);this.onMetaChange();break}}};GalleryLib.prototype.renderMeta=function(image,createDescription,$container,$caption){var isNew;if($caption&&$caption.length){$caption.empty();isNew=!1}else{$caption=(0,jquery_78.default)('<div class="wb-picture-caption"/>');isNew=!0}
if(this.captionBackground)
$caption.css("background-color",this.captionBackground);if(this.captionPosition)
$caption.addClass(this.captionPosition.split(" ").join("-"));if(this.fillCaptionContainer($caption,image,createDescription)){if(isNew){$caption.css("opacity",0);$container.append($caption);$caption.css("opacity",1)}
return $caption}else if(!isNew){$caption.detach()}
return null};GalleryLib.prototype.onMetaChange=function(){var _this_1=this;if(this.metaUpdateTimeout)
return;this.metaUpdateTimeout=requestAnimationFrame(function(){_this_1.metaUpdateTimeout=0;if(_this_1.type==='map'){_this_1.renderMap()}else if(_this_1.type==="thumbs"||_this_1.type==="masonry"){if(_this_1.getThumbWidth()>=100&&_this_1.showPictureCaption!=='none'){var thisClass_3=_this_1;_this_1.elem.find(".wb_thumb").each(function(){var $thumb=(0,jquery_78.default)(this);var image=$thumb.data("image");if(!image)
return;$thumb.attr('title',image.title||"");thisClass_3.renderMeta(image,!1,$thumb.children().first(),(0,jquery_78.default)(".wb-picture-caption",$thumb))})}}else{var renderListImageMeta=function($cont,fadeIn){var $parent=$cont.parent();if(!$parent||!$parent.length)
return;var image=$cont.data("image");if(!image)
return;$cont.attr('title',image.title||"");var $prevCaption=$cont.data("caption");var $caption=null;if(_this_1.showPictureCaption!=='none'){$caption=_this_1.renderMeta(image,!0,$parent,$prevCaption)}
$cont.data("caption",$caption);if($caption&&!$prevCaption){$caption.addClass("wb-no-transition");var opacity=parseFloat(getComputedStyle($cont[0]).opacity);if(opacity<1){$caption.css("opacity",opacity);if(fadeIn)
$caption.fadeTo(Math.floor((1-opacity)*_this_1.getTransitionSpeed()),1);else $caption.fadeOut(Math.floor(opacity*_this_1.getTransitionSpeed()),function(){return $caption===null||$caption===void 0?void 0:$caption.remove()})}}};if(_this_1.displayedImage)
renderListImageMeta(_this_1.displayedImage,!1);if(_this_1.loadingImage)
renderListImageMeta(_this_1.loadingImage,!0);if(_this_1.type==="list"){(0,jquery_78.default)(".wb_thumb",_this_1.elem).each(function(){var $thumb=(0,jquery_78.default)(this);var image=$thumb.data("image");$thumb.attr('title',image.title||"")})}}})};GalleryLib.prototype.constructImagesArray=function(){var images=[];for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if((0,exports.isVideoFile)(image.src)){continue}
images.push({src:image.src,w:image.width,h:image.height,msrc:null,title:(typeof image.title==='string'&&image.title.length>0)?image.title:" ",link:image.link?image.link:undefined,description:image.description?image.description:''})}
return images};GalleryLib.prototype.initImageLightBox=function(img,imageIndex){var _this_1=this;if(img.prop("tagName")=='VIDEO'){return}
var lightBoxInited=GalleryLib.lightBoxInited;GalleryLib.lightBoxInited=!0;var params;if(this.initialRender){params=this.parseHash();imageIndex=params.pid?parseInt(params.pid):imageIndex}
if((this.type==='slideshow'||this.type==='list'||this.type==='thumbs'||this.type==='masonry')&&this.disablePopup)
return;var lightBoxElem=(0,jquery_78.default)('.wb_pswp');if(!lightBoxInited&&this.initialRender&&params&&params.pid&&params.gid===this.id){this.lightBoxDisplayed=!0;var images=[];images=this.constructImagesArray();this.lightBox=(new PhotoSwipe(lightBoxElem.get(0),PhotoSwipeUI_Default,images,{index:imageIndex,galleryUID:this.id,addCaptionHTMLFn:function(item,captionElement){var cont=(0,jquery_78.default)(captionElement.children[0]);cont.empty();return _this_1.fillCaptionContainer(cont,item,!0,!0)},history:!0,}));this.lightBox.init();this.lightBox.listen('destroy',function(){_this_1.lightBoxDisplayed=!1});this.initialRender=!1}
img.css({cursor:"pointer"}).on("click touchstart touchend touchmove",function(e){var img=(0,jquery_78.default)(e.currentTarget);if(e.type==='touchstart'){img.data('pswpDisabled',!1)}else if(e.type==='touchmove'){img.data('pswpDisabled',!0)}
if((e.type==='click'||e.type==='touchend')&&!img.data('pswpDisabled')){_this_1.lightBoxDisplayed=!0;var images=[];images=_this_1.constructImagesArray();_this_1.lightBox=(new PhotoSwipe(lightBoxElem.get(0),PhotoSwipeUI_Default,images,{index:imageIndex,galleryUID:_this_1.id,addCaptionHTMLFn:function(item,captionElement){var cont=(0,jquery_78.default)(captionElement.children[0]);cont.empty();return _this_1.fillCaptionContainer(cont,item,!0,!0)},history:!0}));_this_1.lightBox.init();_this_1.lightBox.listen('destroy',function(){_this_1.lightBoxDisplayed=!1});lightBoxElem.attr('id',_this_1.id+'_pswp')}})};GalleryLib.prototype.urlEncode=function(url,quotes,hash){if(quotes===void 0){quotes=!1}
if(hash===void 0){hash=!1}
var url_=encodeURI(url).replace(/\(/g,"%28").replace(/\)/g,"%29");if(quotes){url_=url_.replace(/\'/g,"%27")}
if(hash){url_=url_.replace(/#/g,"%23")}
return url_};GalleryLib.prototype.getImages=function(){return __spreadArray([],this.images,!0)};GalleryLib.prototype.setImages=function(images){this.images=__spreadArray([],images,!0);this.invalidate()};GalleryLib.prototype.setHeight=function(height){this.height=height;this.invalidate()};GalleryLib.prototype.getType=function(){return this.type};GalleryLib.prototype.setType=function(type){this.type=type;this.invalidate()};GalleryLib.prototype.getSlideshowInterval=function(){return this.slideshowInterval};GalleryLib.prototype.getSlideshowSpeed=function(){return this.slideshowSpeed};GalleryLib.prototype.setSlideshowSpeed=function(speed){this.slideshowSpeed=speed};GalleryLib.prototype.getTransitionSpeed=function(){return(this.slideshowInterval>0)?Math.min(Math.max(0,this.slideshowInterval*1000-100),this.slideshowSpeed):0};GalleryLib.prototype.getBgColor=function(){return this.bgColor};GalleryLib.prototype.setBgColor=function(color){this.bgColor=color;this.elem.css("background-color",this.bgColor)};GalleryLib.prototype.getCaptionBackground=function(){return this.captionBackground};GalleryLib.prototype.setCaptionBackground=function(color){this.captionBackground=color;if(this.captionBackground)
this.elem.find(".wb-picture-caption").css("background-color",color);};GalleryLib.prototype.getCaptionPosition=function(){return this.captionPosition};GalleryLib.prototype.setCaptionPosition=function(position){this.captionPosition=position;if(this.captionPosition)
this.elem.find(".wb-picture-caption").removeClass("left-top center-top right-top left-center center-center right-center left-bottom center-bottom right-bottom").addClass(position.split(" ").join("-"));};GalleryLib.prototype.getCaptionTitleStyle=function(){return this.captionTitleStyle};GalleryLib.prototype.setCaptionTitleStyle=function(css){this.captionTitleStyle=css;this.elem.find(".wb-lightbox-title").css(css)};GalleryLib.prototype.getCaptionDescriptionStyle=function(){return this.captionDescriptionStyle};GalleryLib.prototype.setCaptionDescriptionStyle=function(css){this.captionDescriptionStyle=css;this.elem.find(".wb-lightbox-description").css(css)};GalleryLib.prototype.getControlsArrow=function(){return this.controlsArrow};GalleryLib.prototype.setControlsArrow=function(type){this.controlsArrow=type};GalleryLib.prototype.getControlsArrowSize=function(){return this.controlsArrowSize};GalleryLib.prototype.setControlsArrowSize=function(size){this.controlsArrowSize=size};GalleryLib.prototype.getControlsArrowStyle=function(){return this.controlsArrowStyle};GalleryLib.prototype.setControlsArrowStyle=function(style){this.controlsArrowStyle=style};GalleryLib.prototype.setFrequency=function(frequency){if(frequency>=0&&frequency<=10){this.slideshowInterval=frequency;this.reset()}};GalleryLib.prototype.getFrequency=function(){return this.slideshowInterval};GalleryLib.prototype.getBorder=function(){return this.border};GalleryLib.prototype.setBorder=function(border){this.border=border;this.elem.find('.gallery-image').css((this.imageCover||!this.border)?{"border":"none"}:this.border);this.invalidate()};GalleryLib.prototype.getPadding=function(){return this.padding};GalleryLib.prototype.getThumbWidth=function(){return this.thumbWidth?this.thumbWidth:config.thumbWidth};GalleryLib.prototype.getThumbHeight=function(){return this.thumbHeight?this.thumbHeight:config.thumbHeight};GalleryLib.prototype.getThumbAlign=function(){return this.thumbAlign};GalleryLib.prototype.getThumbPadding=function(){return this.thumbPadding};GalleryLib.prototype.setPadding=function(padding){this.padding=padding;this.invalidate()};GalleryLib.prototype.setThumbWidth=function(width){this.thumbWidth=width;this.invalidate()};GalleryLib.prototype.setThumbHeight=function(height){this.thumbHeight=height;this.invalidate()};GalleryLib.prototype.setThumbAlign=function(align){this.thumbAlign=align;this.invalidate()};GalleryLib.prototype.setThumbPadding=function(padding){this.thumbPadding=padding;this.invalidate()};GalleryLib.prototype.getThumbAnim=function(){return this.thumbAnim};GalleryLib.prototype.setThumbAnim=function(value){if(value&&('_preview' in value)&&value._preview){delete value._preview}
this.thumbAnim=value;this.invalidate()};GalleryLib.prototype.getThumbShadow=function(){return this.thumbShadow};GalleryLib.prototype.setThumbShadow=function(value){this.thumbShadow=value;this.invalidate()};GalleryLib.prototype.setImageCover=function(value){this.imageCover=value;this.invalidate()};GalleryLib.prototype.setDisablePopup=function(value){this.disablePopup=value;this.invalidate()};GalleryLib.prototype.setSlideOpacity=function(value){this.slideOpacity=value;if(this.type==="slideshow"&&this.listImgCont){this.listImgCont.css('opacity',this.slideOpacity/100)}};GalleryLib.prototype.getImageCover=function(){return this.imageCover};GalleryLib.prototype.getDisablePopup=function(){return this.disablePopup};GalleryLib.prototype.getSlideOpacity=function(){return this.slideOpacity};GalleryLib.prototype.setShowPictureCaption=function(value){this.showPictureCaption=value;this.invalidate()};GalleryLib.prototype.getShowPictureCaption=function(){return this.showPictureCaption};GalleryLib.prototype.setCaptionIncludeDescription=function(value){this.captionIncludeDescription=value;this.invalidate()};GalleryLib.prototype.getCaptionIncludeDescription=function(){return this.captionIncludeDescription};GalleryLib.prototype.getMapTypeId=function(){return this.mapTypeId};GalleryLib.prototype.setMapTypeId=function(value){this.mapTypeId=value;this.invalidate()};GalleryLib.prototype.getMarkerIconTypeId=function(){return this.markerIconTypeId};GalleryLib.prototype.setMarkerIconTypeId=function(value){this.markerIconTypeId=value;this.invalidate()};GalleryLib.prototype.getZoom=function(){return this.zoom};GalleryLib.prototype.setZoom=function(value){this.zoom=value;this.invalidate()};GalleryLib.prototype.getMapCenter=function(){return this.mapCenter};GalleryLib.prototype.setMapCenter=function(value){this.mapCenter=value;this.invalidate()};GalleryLib.prototype.getKey=function(){return this.key};GalleryLib.prototype.setKey=function(value){this.key=value;this.invalidate()};GalleryLib.prototype.getTheme=function(){return this.theme};GalleryLib.prototype.setTheme=function(value){this.theme=value;this.invalidate()};GalleryLib.prototype.getColor=function(){return this.color};GalleryLib.prototype.setColor=function(value){this.color=value;this.invalidate()};GalleryLib.prototype.getShowSatellite=function(){return this.showSatellite};GalleryLib.prototype.setShowSatellite=function(value){this.showSatellite=value;this.invalidate()};GalleryLib.prototype.getShowZoom=function(){return this.showZoom};GalleryLib.prototype.setShowZoom=function(value){this.showZoom=value;this.invalidate()};GalleryLib.prototype.getShowStreetView=function(){return this.showStreetView};GalleryLib.prototype.setShowStreetView=function(value){this.showStreetView=value;this.invalidate()};GalleryLib.prototype.getShowFullscreen=function(){return this.showFullscreen};GalleryLib.prototype.setShowFullscreen=function(value){this.showFullscreen=value;this.invalidate()};GalleryLib.prototype.getAllowDragging=function(){return this.allowDragging};GalleryLib.prototype.setAllowDragging=function(value){this.allowDragging=value;this.invalidate()};GalleryLib.prototype.getShowRoads=function(){return this.showRoads};GalleryLib.prototype.setShowRoads=function(value){this.showRoads=value;this.invalidate()};GalleryLib.prototype.getShowLandmarks=function(){return this.showLandmarks};GalleryLib.prototype.setShowLandmarks=function(value){this.showLandmarks=value;this.invalidate()};GalleryLib.prototype.getShowLabels=function(){return this.showLabels};GalleryLib.prototype.setShowLabels=function(value){this.showLabels=value;this.invalidate()};GalleryLib.lightBoxInited=!1;GalleryLib.galleryLibList=[];return GalleryLib}())});define("js/elements/form/FormButtonStyleControl",["require","exports","js/UIComponent","js/ui/MiniTabPane","js/FontStyleSelector","js/ColorPicker","js/BackgroundControl","js/BorderControl","js/Label","js/FlowLayout","js/VerticalLayout","js/ui/controls/popovers/ShadowDialogControl","js/SpacingDialogControl"],function(require,exports,UIComponent_61,MiniTabPane_5,FontStyleSelector_4,ColorPicker_12,BackgroundControl_7,BorderControl_6,Label_16,FlowLayout_16,VerticalLayout_23,ShadowDialogControl_5,SpacingDialogControl_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FormButtonStyleControl=void 0;var FormButtonStyleControl=(function(_super){__extends(FormButtonStyleControl,_super);function FormButtonStyleControl(onChange,singleBorder,showRadius){if(onChange===void 0){onChange=null}
if(singleBorder===void 0){singleBorder=!1}
if(showRadius===void 0){showRadius=!1}
var _this=_super.call(this)||this;_this.onChange=onChange;_this.singleBorder=singleBorder;_this.ignoreChange=!1;_this.showRadius=!1;_this.useShadows=!1;_this.style=new FontStyleSelector_4.FontStyleSelector(function(){return _this.handleChange()});_this.color=new ColorPicker_12.ColorPicker().setOnChange(function(){return _this.handleChange()});_this.bg=new BackgroundControl_7.BackgroundControl({useSize:!0,useOpacity:!0,useImage:!1});_this.bg.onChange=function(){return _this.handleChange()};_this.border=new BorderControl_6.BorderControl('bottom',!0);_this.border.setAbsPopover(!0);_this.border.setOnChange(function(){return _this.handleChange()});_this.shadow=new ShadowDialogControl_5.ShadowDialogControl();_this.shadow.setOnChange(function(){return _this.handleChange()});_this.spacing=new SpacingDialogControl_2.SpacingDialogControl();_this.spacing.setOnChange(function(){return _this.handleChange()});_this.tabPane=new MiniTabPane_5.MiniTabPane([{id:'normal',title:__('Default')},{id:'hover',title:__('Hover')},{id:'active',title:__('Active')},],function(tab){return _this.selectTab(tab)});_this._elem.addClass('wb-btn-style-control').append(new VerticalLayout_23.VerticalLayout().setSpacing(12).addAllChildren([_this.tabPane,new FlowLayout_16.FlowLayout().addAllChildren([new VerticalLayout_23.VerticalLayout().addAllChildren([new Label_16.Label(__('Style')),_this.style,]),(_this.borderBlock=new VerticalLayout_23.VerticalLayout()).addAllChildren([new Label_16.Label(__('Color')),_this.color,]),]),new FlowLayout_16.FlowLayout().addAllChildren([new VerticalLayout_23.VerticalLayout().addAllChildren([new Label_16.Label(__('Background')),_this.bg,]),(_this.borderBlock=new VerticalLayout_23.VerticalLayout()).addAllChildren([new Label_16.Label(__('Border')),_this.border,]),]),_this.shadowBlock=new FlowLayout_16.FlowLayout().addAllChildren([new VerticalLayout_23.VerticalLayout().addAllChildren([new Label_16.Label(__('Shadow')),_this.shadow,]),_this.spacingBlock=new VerticalLayout_23.VerticalLayout().addAllChildren([new Label_16.Label(__('Spacing')),_this.spacing,]),]),]).getElem());_this.setShowRadius(showRadius);return _this}
FormButtonStyleControl.prototype.buildInit=function(data,fields){var _this=this;if(data.value)
this.setValue(data.value);if(('change' in data)&&(typeof data.change==='function')){(function(el,func){_this.onChange=function(){func.call(el,fields)}})(this,data.change)}
if('singleBorder' in data)
this.singleBorder=data.singleBorder?!0:!1;if('showRadius' in data)
this.setShowRadius(data.showRadius?!0:!1);if('useShadows' in data)
this.setUseShadows(data.useShadows?!0:!1);};FormButtonStyleControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);if('singleBorder' in options)
this.singleBorder=options.singleBorder?!0:!1;if('showRadius' in options)
this.setShowRadius(options.showRadius?!0:!1);if('useShadows' in options)
this.setUseShadows(options.useShadows?!0:!1);};FormButtonStyleControl.prototype.setShowRadius=function(showRadius){this.showRadius=showRadius;this.border.setShowRadius(showRadius)};FormButtonStyleControl.prototype.setUseShadows=function(useShadows){this.useShadows=useShadows;this.shadowBlock.setVisible(useShadows)};FormButtonStyleControl.prototype.handleChange=function(){if(this.ignoreChange)
return;this.ignoreChange=!0;var tab=this.tabPane.getSelectedTab();if(tab.id=='normal'){this.value=this.value||{};this.value.normal=this.value.normal||{};this.value.normal.style=this.style.getValue();this.value.normal.color=this.color.getValue();this.value.normal.bg=this.bg.getValue();this.value.normal.border=this.border.getValue();this.value.normal.spacing=this.spacing.getValue();if(this.useShadows){this.value.normal.shadow=this.shadow.getValue()}
if(this.showRadius){this.value.normal.corners=(0,BorderControl_6.toRadiusValue)(this.border.getValue())}}else if(tab.id=='hover'){this.value=this.value||{};this.value.hover=this.value.hover||{};this.value.hover.style=this.style.getValue();this.value.hover.color=this.color.getValue();this.value.hover.bg=this.bg.getValue();if(this.useShadows){this.value.hover.shadow=this.shadow.getValue()}
if(this.showRadius){this.value.hover.corners=(0,BorderControl_6.toRadiusValue)(this.value.hover.border)}
if(!this.singleBorder){this.value.hover.border=this.border.getValue()}}else if(tab.id=='active'){this.value=this.value||{};this.value.active=this.value.active||{};this.value.active.style=this.style.getValue();this.value.active.color=this.color.getValue();this.value.active.bg=this.bg.getValue();if(this.useShadows){this.value.active.shadow=this.shadow.getValue()}
if(this.showRadius){this.value.active.corners=(0,BorderControl_6.toRadiusValue)(this.value.active.border)}
if(!this.singleBorder){this.value.active.border=this.border.getValue()}}
if(typeof this.onChange==='function')
this.onChange();this.onValueChanged();this.ignoreChange=!1};FormButtonStyleControl.prototype.selectTab=function(tab){if(!this.value)
return;this.ignoreChange=!0;if(tab.id=='normal'){this.style.setValue(this.value.normal.style?this.value.normal.style:null);this.color.setValue(this.value.normal.color?this.value.normal.color:null);this.bg.setValue(this.value.normal.bg?this.value.normal.bg:null);this.border.setValue(this.value.normal.border?this.value.normal.border:null);this.shadow.setValue(this.value.normal.shadow?this.value.normal.shadow:null);this.spacing.setValue(this.value.normal.spacing?this.value.normal.spacing:null);this.spacingBlock.setVisible(!0);this.borderBlock.setVisible(!0)}else if(tab.id=='hover'){this.style.setValue(this.value.hover.style?this.value.hover.style:null);this.color.setValue(this.value.hover.color?this.value.hover.color:null);this.bg.setValue(this.value.hover.bg?this.value.hover.bg:null);this.border.setValue(this.value.hover.border?this.value.hover.border:null);this.shadow.setValue(this.value.hover.shadow?this.value.hover.shadow:null);this.spacing.setValue(this.value.hover.spacing?this.value.hover.spacing:null);this.spacingBlock.setVisible(!1);if(this.singleBorder){this.borderBlock.setVisible(!1)}else{this.borderBlock.setVisible(!0)}}else if(tab.id=='active'){this.style.setValue(this.value.active.style?this.value.active.style:null);this.color.setValue(this.value.active.color?this.value.active.color:null);this.bg.setValue(this.value.active.bg?this.value.active.bg:null);this.border.setValue(this.value.active.border?this.value.active.border:null);this.shadow.setValue(this.value.active.shadow?this.value.active.shadow:null);this.spacing.setValue(this.value.active.spacing?this.value.active.spacing:null);this.spacingBlock.setVisible(!1);if(this.singleBorder){this.borderBlock.setVisible(!1)}else{this.borderBlock.setVisible(!0)}}
this.ignoreChange=!1};FormButtonStyleControl.prototype.destroy=function(){this.style.destroy();this.color.destroy();this.bg.destroy();this.border.destroy();this.tabPane.destroy();this.shadow.destroy();this.spacing.destroy();_super.prototype.destroy.call(this)};FormButtonStyleControl.prototype.getValue=function(){return{normal:__assign({},this.value.normal),hover:__assign({},this.value.hover),active:__assign({},this.value.active),}};FormButtonStyleControl.prototype.setValue=function(value){if(value){this.value={normal:__assign({},value.normal),hover:__assign({},value.hover),active:__assign({},value.active),}}else{this.value={normal:{},hover:{},active:{}}}
this.selectTab(this.tabPane.getSelectedTab())};return FormButtonStyleControl}(UIComponent_61.UIComponent));exports.FormButtonStyleControl=FormButtonStyleControl});define("js/Gallery",["require","exports","js/ElementRegister","js/Element","js/Service","js/core/BuilderConfig","js/ColorPicker","js/BorderControl","js/BuilderEvent","js/CommonTypes","js/TextControl","js/SizeSelector","js/HAlignSelector","js/GalleryLib","js/ui/GalleryTypeSelector","js/element/PropertyType","jquery","masonry","jquery-bridget","js/ui/ContainmentControl","js/AlignSelector","js/core/Collaboration"],function(require,exports,ElementRegister_5,Element_6,Service_23,BuilderConfig_15,ColorPicker_13,BorderControl_7,BuilderEvent_8,CommonTypes_10,TextControl_4,SizeSelector_12,HAlignSelector_4,GalleryLib_1,GalleryTypeSelector_2,PropertyType_3,jquery_79,masonry_1,jquery_bridget_1,ContainmentControl_2,AlignSelector_3,Collaboration_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ContainmentProperty=exports.Gallery=void 0;(0,jquery_bridget_1.default)('masonry',masonry_1.default,jquery_79.default);var Gallery=exports.Gallery=(function(_super){__extends(Gallery,_super);function Gallery(data,initial){if(initial===void 0){initial=!1}
var _this=this;var _a;_this=_super.call(this,data,initial)||this;_this.noPhotoBg='ico-tb-gallery';_this.typeSubmenu=null;_this.dialog=null;_this._images=[];_this.isBackgroundTimer=null;_this._picturesInitial=null;_this._border=data.content.border?data.content.border:{color:'#FFFFFF',style:'none',weight:5,css:{border:'5px none #FFFFFF'}};_this._captionTitleStyle=TextControl_4.TextControl.buildCss(data.content.captionTitleStyle?data.content.captionTitleStyle:{color:"#FFFFFF",size:20,align:CommonTypes_10.Alignment.Center,letterSpacing:0});_this._captionDescriptionStyle=TextControl_4.TextControl.buildCss(data.content.captionDescriptionStyle?data.content.captionDescriptionStyle:{color:"#FFFFFF",size:16,align:CommonTypes_10.Alignment.Center,letterSpacing:0});_this._lightboxBackground=data.content.lightboxBackground?data.content.lightboxBackground:_this.lightboxBackground;_this._lightboxTitleStyle=TextControl_4.TextControl.buildCss(data.content.lightboxTitleStyle?data.content.lightboxTitleStyle:_this._captionTitleStyle);_this._lightboxDescriptionStyle=TextControl_4.TextControl.buildCss(data.content.lightboxDescriptionStyle?data.content.lightboxDescriptionStyle:_this._captionDescriptionStyle);_this._controlsLightboxArrow=data.content.controlsLightboxArrow?data.content.controlsLightboxArrow:_this.controlsLightboxArrow;_this._controlsLightboxArrowSize=data.content.controlsLightboxArrowSize?data.content.controlsLightboxArrowSize:_this.controlsLightboxArrowSize;_this._controlsLightboxArrowStyle=data.content.controlsLightboxArrowStyle?data.content.controlsLightboxArrowStyle:_this.controlsLightboxArrowStyle;_this._images=(data.content.images instanceof Array)?data.content.images:[];_this._disablePopup=data.content.disablePopup?!0:!1;var locale=(BuilderConfig_15.wbConfig.locale?BuilderConfig_15.wbConfig.locale:null);if(wb_builder.site.currSelLang){var lang=BuilderConfig_15.wbConfig.getLanguageByCode(wb_builder.site.currSelLang);if(lang)
locale=lang.locale}
if(data.content.hideArrows){data.content.controlsArrow='none';delete data.content.hideArrows}
if(data.content.type==='thumbs'&&data.content.imageCover===undefined){data.content.imageCover=!0}
_this.gallery=new GalleryLib_1.GalleryLib({height:_this.height,type:data.content.type,interval:data.content.interval,speed:data.content.speed,bgColor:data.content.bgColor?data.content.bgColor:"#000000",images:_this.buildImageList(_this.images),border:(_a=_this.border)===null||_a===void 0?void 0:_a.css,padding:data.content.padding,thumbWidth:(typeof data.content.thumbWidth==='number')?data.content.thumbWidth:((typeof data.content.thumbSize==='number')?data.content.thumbSize:0),thumbHeight:(typeof data.content.thumbHeight==='number')?data.content.thumbHeight:((typeof data.content.thumbSize==='number')?data.content.thumbSize:0),thumbAlign:data.content.thumbAlign,thumbPadding:data.content.thumbPadding,thumbAnim:data.content.thumbAnim,thumbShadow:data.content.thumbShadow,imageCover:data.content.imageCover,disablePopup:!1,slideOpacity:data.content.slideOpacity||data.content.thumbOpacity,showPictureCaption:data.content.showPictureCaption,captionIncludeDescription:data.content.captionIncludeDescription,captionBackground:data.content.captionBackground?data.content.captionBackground:"rgba(0, 0, 0, 0.66)",captionPosition:data.content.captionPosition?data.content.captionPosition:"center bottom",captionTitleStyle:_this.captionTitleStyle?_this.captionTitleStyle.css:undefined,captionDescriptionStyle:_this.captionDescriptionStyle?_this.captionDescriptionStyle.css:undefined,controlsArrow:data.content.controlsArrow?data.content.controlsArrow:'chevron',controlsArrowSize:data.content.controlsArrowSize?data.content.controlsArrowSize:14,controlsArrowStyle:data.content.controlsArrowStyle?data.content.controlsArrowStyle:{normal:{color:'#FFFFFF',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#000000","forText":!0,"css":{"text-shadow":"0px 0px 1px #000000"}}},hover:{color:'#DDDDDD',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#222222","forText":!0,"css":{"text-shadow":"0px 0px 1px #222222"}}},active:{color:'#FFFFFF',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#000000","forText":!0,"css":{"text-shadow":"0px 0px 1px #000000"}}},},markerIconTypeId:data.content.markerIconTypeId?data.content.markerIconTypeId:undefined,mapTypeId:data.content.mapTypeId?data.content.mapTypeId:null,zoom:data.content.zoom?data.content.zoom:16,mapCenter:data.content.mapCenter?data.content.mapCenter:null,key:wb_builder.mapsConfig.googleMapsApiKey,theme:data.content.theme?data.content.theme:'default',color:data.content.color?data.content.color:'#eeeeee',showSatellite:(!('showSatellite' in data.content)||data.content.showSatellite),showZoom:(!('showZoom' in data.content)||data.content.showZoom),showStreetView:(!('showStreetView' in data.content)||data.content.showStreetView),showFullscreen:(!('showFullscreen' in data.content)||data.content.showFullscreen),allowDragging:(!('allowDragging' in data.content)||data.content.allowDragging),showRoads:(!('showRoads' in data.content)||data.content.showRoads),showLandmarks:(!('showLandmarks' in data.content)||data.content.showLandmarks),showLabels:(!('showLabels' in data.content)||data.content.showLabels),locale:locale||'en_US',});_this.generateThumbs();_this.container.css("height","100%");_this.gallery.appendTo(_this.container);_this.setErrorMessage(__('No images selected'));_this.displayErrorMessage(_this.images.length==0);BuilderEvent_8.GlobalEvents.on("media.meta.changed",(_this.metaChangeHandler=function(e){return _this.handleMetaChange(e)}));_this.updateMinSize(!0);if(!_this.images&&!initial)
_this.changePictures();_this.elem.on("resize",function(){return _this.gallery.handleContinuousResize()});_this.elem.on("resizestop",function(){return _this.onResize()});_this.controls.onDblClick(function(){return _this.changePictures()});_this.controls.setToolbarActions([{name:__('Change pictures'),icon:'fa fa-picture-o',action:function(){return _this.changePictures()}}]);return _this}
Object.defineProperty(Gallery.prototype,"height",{get:function(){return this._height},set:function(value){this._height=value;this.gallery.setHeight(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"border",{get:function(){return this._border},set:function(border){var _this=this;this._border=border;if(this._borderTimer)
clearTimeout(this._borderTimer);this._borderTimer=setTimeout(function(){if(border.css){_this.gallery.setBorder(border.css)}},400)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"images",{get:function(){return this._images},set:function(value){if(typeof value==="string")
value=[value];this._images=value;if(this._images.length){this.displayErrorMessage(!1)}else{this.setErrorMessage(__('No images selected'))}
this.gallery.setImages(this.buildImageList(this._images))},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"disablePopup",{get:function(){return this._disablePopup},set:function(value){this._disablePopup=value;this.gallery.setDisablePopup(this._disablePopup)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryType",{get:function(){return this.gallery.getType()},set:function(value){if(value==='map'||value==='slideshow'){this.useMinHeight=!0;this.minHeight=Math.min(this.minHeight,this.getHeightInPixels())}
this.gallery.setType(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryBgColor",{get:function(){return this.gallery.getBgColor()},set:function(value){this.gallery.setBgColor(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryPadding",{get:function(){return this.gallery.getPadding()},set:function(value){this.gallery.setPadding(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"gallerySlideShowInterval",{get:function(){return this.gallery.getFrequency()},set:function(value){this.gallery.setFrequency(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"gallerySlideShowSpeed",{get:function(){return this.gallery.getSlideshowSpeed()/1000},set:function(value){this.gallery.setSlideshowSpeed(Math.round(value*1000))},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbWidth",{get:function(){return this.gallery.getThumbWidth()},set:function(value){this.gallery.setThumbWidth(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbHeight",{get:function(){return this.gallery.getThumbHeight()},set:function(value){this.gallery.setThumbHeight(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbAlign",{get:function(){return this.gallery.getThumbAlign()},set:function(value){this.gallery.setThumbAlign(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"gallerySlideOpacity",{get:function(){return this.gallery.getSlideOpacity()},set:function(value){this.gallery.setSlideOpacity(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbPadding",{get:function(){return this.gallery.getThumbPadding()},set:function(value){this.gallery.setThumbPadding(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbAnim",{get:function(){return this.gallery.getThumbAnim()},set:function(value){this.gallery.setThumbAnim(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryThumbShadow",{get:function(){return this.gallery.getThumbShadow()},set:function(value){this.gallery.setThumbShadow(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"galleryImageContainment",{get:function(){return(this.gallery.getImageCover()?ContainmentControl_2.SizeType.Cover:ContainmentControl_2.SizeType.Contain)},set:function(value){this.gallery.setImageCover(value==ContainmentControl_2.SizeType.Cover)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showPictureCaption",{get:function(){return this.gallery.getShowPictureCaption()},set:function(value){this.gallery.setShowPictureCaption(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"captionIncludeDescription",{get:function(){return this.gallery.getCaptionIncludeDescription()},set:function(value){this.gallery.setCaptionIncludeDescription(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"captionBackground",{get:function(){return this.gallery.getCaptionBackground()||"transparent"},set:function(value){this.gallery.setCaptionBackground(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"captionPosition",{get:function(){return this.gallery.getCaptionPosition()||"center bottom"},set:function(value){this.gallery.setCaptionPosition(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"captionTitleStyle",{get:function(){return this._captionTitleStyle},set:function(value){this._captionTitleStyle=TextControl_4.TextControl.buildCss(value);if(this._captionTitleStyle.css){delete this._captionTitleStyle.css['text-decoration'];this.gallery.setCaptionTitleStyle(this._captionTitleStyle.css)}},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"captionDescriptionStyle",{get:function(){return this._captionDescriptionStyle},set:function(value){this._captionDescriptionStyle=TextControl_4.TextControl.buildCss(value);if(this._captionDescriptionStyle.css){delete this._captionDescriptionStyle.css['text-decoration'];this.gallery.setCaptionDescriptionStyle(this._captionDescriptionStyle.css)}},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"lightboxBackground",{get:function(){return this._lightboxBackground||"rgba(0, 0, 0, 1)"},set:function(value){this._lightboxBackground=value},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"lightboxTitleStyle",{get:function(){return this._lightboxTitleStyle},set:function(value){this._lightboxTitleStyle=TextControl_4.TextControl.buildCss(value);if(this._lightboxTitleStyle.css){delete this._lightboxTitleStyle.css['text-decoration']}},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"lightboxDescriptionStyle",{get:function(){return this._lightboxDescriptionStyle},set:function(value){this._lightboxDescriptionStyle=TextControl_4.TextControl.buildCss(value);if(this._lightboxDescriptionStyle.css){delete this._lightboxDescriptionStyle.css['text-decoration']}},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsArrow",{get:function(){return this.gallery.getControlsArrow()||"chevron"},set:function(value){this.gallery.setControlsArrow(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsArrowSize",{get:function(){return this.gallery.getControlsArrowSize()||14},set:function(value){this.gallery.setControlsArrowSize(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsArrowStyle",{get:function(){return this.gallery.getControlsArrowStyle()||{normal:{},hover:{},active:{}}},set:function(value){this.gallery.setControlsArrowStyle(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsLightboxArrow",{get:function(){return this._controlsLightboxArrow||"arrow"},set:function(value){this._controlsLightboxArrow=value},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsLightboxArrowSize",{get:function(){return this._controlsLightboxArrowSize||14},set:function(value){this._controlsLightboxArrowSize=value},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"controlsLightboxArrowStyle",{get:function(){return this._controlsLightboxArrowStyle||{normal:{color:'#FFFFFF',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#000000","forText":!0,"css":{"text-shadow":"0px 0px 1px #000000"}}},hover:{color:'#DDDDDD',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#222222","forText":!0,"css":{"text-shadow":"0px 0px 1px #222222"}}},active:{color:'#DDDDDD',shadow:{"angle":135,"distance":0,"size":0,"blur":1,"color":"#222222","forText":!0,"css":{"text-shadow":"0px 0px 1px #222222"}}},}},set:function(value){this._controlsLightboxArrowStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"mapTypeId",{get:function(){return this.gallery.getMapTypeId()},set:function(value){this.gallery.setMapTypeId(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"markerIconTypeId",{get:function(){return this.gallery.getMarkerIconTypeId()},set:function(value){this.gallery.setMarkerIconTypeId(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"zoom",{get:function(){return this.gallery.getZoom()},set:function(value){this.gallery.setZoom(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"mapCenter",{get:function(){return this.gallery.getMapCenter()},set:function(value){this.gallery.setMapCenter(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"key",{get:function(){return this.gallery.getKey()},set:function(value){this.gallery.setKey(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"theme",{get:function(){return this.gallery.getTheme()},set:function(value){this.gallery.setTheme(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"color",{get:function(){return this.gallery.getColor()},set:function(value){this.gallery.setColor(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showSatellite",{get:function(){return this.gallery.getShowSatellite()},set:function(value){this.gallery.setShowSatellite(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showZoom",{get:function(){return this.gallery.getShowZoom()},set:function(value){this.gallery.setShowZoom(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showStreetView",{get:function(){return this.gallery.getShowStreetView()},set:function(value){this.gallery.setShowStreetView(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showFullscreen",{get:function(){return this.gallery.getShowFullscreen()},set:function(value){this.gallery.setShowFullscreen(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"allowDragging",{get:function(){return this.gallery.getAllowDragging()},set:function(value){this.gallery.setAllowDragging(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showRoads",{get:function(){return this.gallery.getShowRoads()},set:function(value){this.gallery.setShowRoads(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showLandmarks",{get:function(){return this.gallery.getShowLandmarks()},set:function(value){this.gallery.setShowLandmarks(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"showLabels",{get:function(){return this.gallery.getShowLabels()},set:function(value){this.gallery.setShowLabels(value)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"isBackgroundElement",{get:function(){return this._isBackgroundElement},set:function(value){var _this=this;this._isBackgroundElement=value;if(this.isBackgroundTimer)
clearTimeout(this.isBackgroundTimer);var clb=function(){if(!_this.gallery){_this.isBackgroundTimer=setTimeout(clb,100);return}
if(value&&['map','slideshow'].indexOf(_this.galleryType)<0){_this.galleryType='slideshow'}
if(value){_this.controlsArrow='none'}};this.isBackgroundTimer=setTimeout(clb,400)},enumerable:!1,configurable:!0});Object.defineProperty(Gallery.prototype,"picturesInitial",{get:function(){var _this=this;if(this._picturesInitial===null){var collection=Service_23.Service.ElementComposition.getCompositionCollectionByName('Gallery');if(collection){Service_23.Service.ElementComposition.requireCollectionGroups(collection).then(function(item){var _a;for(var _i=0,_b=(item===null||item===void 0?void 0:item.groups)||[];_i<_b.length;_i++){var group=_b[_i];for(var _c=0,_d=group.compositions;_c<_d.length;_c++){var composition=_d[_c];var datas=composition.getRawData();for(var _e=0,datas_1=datas;_e<datas_1.length;_e++){var data=datas_1[_e];if(data.class==='Gallery'&&data.content&&data.content.type===_this.galleryType){_this._picturesInitial=data.content.images.map(function(item){return item.replace('{{compositionUrl}}','')});(_a=_this.comPropertiesField('images'))===null||_a===void 0?void 0:_a.revalidate();return}}}}
_this._picturesInitial=[]})}}
return this._picturesInitial},enumerable:!1,configurable:!0});Gallery.prototype.switchMode=function(fromMode,toMode,initial,manual){var _this=this;if(initial===void 0){initial=!1}
if(manual===void 0){manual=!1}
_super.prototype.switchMode.call(this,fromMode,toMode,initial,manual);if(this.gallery&&(this.galleryType==='slideshow'||this.galleryType==='list')){setTimeout(function(){if(_this.gallery)
_this.gallery.handleResize();},400)}};Gallery.prototype.getIcon=function(){return'fa fa-th-large'};Gallery.prototype.fillImageMeta=function(metaImage,meta){metaImage.title=(meta===null||meta===void 0?void 0:meta.title)?__tr(meta.title,null,"",!0):"";if(metaImage.title===""&&(meta===null||meta===void 0?void 0:meta.link)&&meta.link.name){metaImage.title=__tr(meta.link.name,null,"",!0)}
metaImage.description=(meta===null||meta===void 0?void 0:meta.description)?__tr(meta.description,null,"",!0):"";metaImage.address=meta===null||meta===void 0?void 0:meta.address};Gallery.prototype.buildImageList=function(images,ignoreMetaCache){var _this=this;if(ignoreMetaCache===void 0){ignoreMetaCache=!1}
var metaImages=[];var _loop_17=function(image){var thumbUrl=image;if(/^gallery\//.test(thumbUrl)&&!/^gallery\/thumbs\//.test(thumbUrl))
thumbUrl='gallery/thumbs/'+thumbUrl.substring(8);if(!/^https?:/i.test(thumbUrl))
thumbUrl=wb_builder.userBaseUrl+thumbUrl;var metaImage={thumb:((this_12.gallery&&this_12.gallery.getType()=='map')?thumbUrl:undefined),src:this_12.system.makeLocalUrl(image),title:'',description:''};metaImages.push(metaImage);Service_23.Service.mediaLibrary.getPathMeta(image,function(meta){if(meta)
_this.fillImageMeta(metaImage,meta);if(_this.gallery)
_this.gallery.onMetaChange();},undefined,this_12.previewCompositionId,ignoreMetaCache)};var this_12=this;for(var _i=0,images_1=images;_i<images_1.length;_i++){var image=images_1[_i];_loop_17(image)}
return metaImages};Gallery.prototype.handleMetaChange=function(e){if(!this.gallery)
return;for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if(image!=e.path&&image!="gallery/"+e.path)
continue;var metaImage={src:this.system.makeLocalUrl(image),title:'',description:''};this.fillImageMeta(metaImage,e.meta);this.gallery.updateImageMeta(metaImage);break}};Gallery.prototype.generateThumbs=function(){var type=this.galleryType;if(!this.previewCompositionId&&(type=='slideshow'||type=='list'||type=='map')){jquery_79.default.post(BuilderConfig_15.wbConfig.getLnUrl("upload_gen_thumb"),JSON.stringify({paths:this.images}))}};Gallery.prototype.getUsedMediaGalleryItems=function(){var items=_super.prototype.getUsedMediaGalleryItems.call(this);for(var _i=0,_a=this.images;_i<_a.length;_i++){var image=_a[_i];if(typeof image==="string"&&image!==""&&image!=="none"){items.push(image)}}
return items};Gallery.prototype.getUsedFonts=function(){var items=_super.prototype.getUsedFonts.call(this);if(this.captionTitleStyle&&this.captionTitleStyle.font&&this.captionTitleStyle.font!==""){items.push(this.captionTitleStyle.font)}
if(this.captionDescriptionStyle&&this.captionDescriptionStyle.font&&this.captionDescriptionStyle.font!==""){items.push(this.captionDescriptionStyle.font)}
return items};Gallery.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.content={height:this.height,type:this.galleryType,interval:this.gallerySlideShowInterval,speed:Math.round(this.gallerySlideShowSpeed*1000),bgColor:this.galleryBgColor,images:this.images,border:this.border,padding:this.galleryPadding,thumbWidth:this.galleryThumbWidth,thumbHeight:this.galleryThumbHeight,thumbAlign:this.galleryThumbAlign,thumbPadding:this.galleryThumbPadding,thumbAnim:(this.galleryThumbAnim||undefined),thumbShadow:(this.galleryThumbShadow||undefined),imageCover:(this.galleryImageContainment==ContainmentControl_2.SizeType.Cover),disablePopup:this.disablePopup,slideOpacity:this.gallerySlideOpacity,showPictureCaption:this.showPictureCaption,captionIncludeDescription:this.captionIncludeDescription,captionBackground:this.captionBackground,captionPosition:this.captionPosition,captionTitleStyle:this.captionTitleStyle,captionDescriptionStyle:this.captionDescriptionStyle,lightboxBackground:this.lightboxBackground,lightboxTitleStyle:this.lightboxTitleStyle,lightboxDescriptionStyle:this.lightboxDescriptionStyle,controlsArrow:this.controlsArrow,controlsArrowSize:this.controlsArrowSize,controlsArrowStyle:this.controlsArrowStyle,controlsLightboxArrow:this.controlsLightboxArrow,controlsLightboxArrowSize:this.controlsLightboxArrowSize,controlsLightboxArrowStyle:this.controlsLightboxArrowStyle,mapTypeId:this.mapTypeId,markerIconTypeId:this.markerIconTypeId,zoom:this.zoom,mapCenter:this.mapCenter,key:this.key,theme:this.theme,color:this.color,showSatellite:this.showSatellite,showZoom:this.showZoom,showStreetView:this.showStreetView,showFullscreen:this.showFullscreen,allowDragging:this.allowDragging,showRoads:this.showRoads,showLandmarks:this.showLandmarks,showLabels:this.showLabels,};return data};Gallery.prototype.displayEmptyMessage=function(display,noText,forceShowIcon){if(noText===void 0){noText=!1}
if(forceShowIcon===void 0){forceShowIcon=!1}
_super.prototype.displayEmptyMessage.call(this,display,noText,forceShowIcon);this.elem.css("background",display?this.noPhotoBg:"");this.gallery.setVisible(!display)};Gallery.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(!this.name||useType){return __('Gallery')}
return _super.prototype.getName.call(this)};Gallery.prototype.changePictures=function(){var _this=this;if(!this.images.length){this.dialog=Service_23.Service.mediaLibrary.open(__("Add images/videos"),!0,"image+video",!0);this.dialog.addButton(__("Close"));this.dialog.addButton(__("Apply"),function(){if(!_this.dialog)
return;_this.images=_this.dialog.getSelectedFiles();_this.generateThumbs();_this.displayEmptyMessage(_this.images.length==0);_this.dialog.hide();if(_this.images.length)
_this.changePictures();},!0);this.dialog.onClose=function(){Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-end',_this)};if(this.images.length>0){this.dialog.setSelectedFiles(this.images)}else{this.dialog.clearFileSelection()}
this.dialog.setVisible(!0)}else{Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-start',this);Service_23.Service.GalleryPictureManager.setMediaLibraryOptions({showMediaTabs:!0,customContentCallback:null});var lastImages_1=this.images;Service_23.Service.GalleryPictureManager.setValue(lastImages_1);Service_23.Service.GalleryPictureManager.setApplyCallback(function(isMetaChanged){var _a,_b;var newImages=Service_23.Service.GalleryPictureManager.getValue();if(JSON.stringify(lastImages_1)!==JSON.stringify(newImages)){(_a=_this.getProperty("images"))===null||_a===void 0?void 0:_a.triggerBeforeChange(_this,!0)}
_this.images=newImages;_this.generateThumbs();_this.displayEmptyMessage(_this.images.length==0);Service_23.Service.GalleryPictureManager.setVisible(!1);if(JSON.stringify(lastImages_1)!==JSON.stringify(_this.images)){wb_builder.setPageModified(!0);(_b=_this.getProperty("images"))===null||_b===void 0?void 0:_b.triggerChange(_this,!0)}else if(isMetaChanged){(0,Collaboration_2.updateElementProperties)(_this,{images:_this.images})}});Service_23.Service.GalleryPictureManager.setVisible(!0)}};Gallery.prototype.updateHierarchyLevel=function(dom,initial){if(dom===void 0){dom=!1}
if(initial===void 0){initial=!1}
_super.prototype.updateHierarchyLevel.call(this,dom);if(dom)
this.onResize(initial);};Gallery.prototype.supportsAutoHeight=function(){return!0};Gallery.prototype.supportsFullWidth=function(){return!0};Gallery.prototype.onResize=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
_super.prototype.onResize.call(this,onConstruct);if(this.gallery)
this.gallery.handleResize();this.elem.trigger("elementresize",[this])};Gallery.prototype.updateStyle=function(initial,langCode){if(initial===void 0){initial=!1}
_super.prototype.updateStyle.call(this,initial,langCode);if(this.gallery)
this.gallery.invalidate();};Gallery.prototype.getImages=function(){return this.images};Gallery.prototype.onSwitchLanguage=function(langCode){_super.prototype.onSwitchLanguage.call(this,langCode);this.gallery.setImages(this.buildImageList(this.images))};Gallery.prototype.updateImagesAndMeta=function(images){this.gallery.setImages(this.buildImageList(images,!0))};Gallery.prototype.updateMinSize=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
this.onResize(onConstruct)};Gallery.prototype.canUseAsBackground=function(){return!0};Gallery.prototype.updateComPropertiesGalleryType=function(type){if(!this.comDialog)
return;var fields=this.comDialog.fields;fields.imageControlsRow1.applyLayoutCellCss(0,{display:'none'});fields.imageControlsRow1.applyLayoutCellCss(1,{display:'none'});fields.imageControlsRow1.applyLayoutCellCss(2,{display:'none'});fields.galleryThumbSizeTimesLabel.setVisible(!1);fields.galleryThumbHeight.setVisible(!1);fields.imageControlsRow1.applyLayoutCellCss(3,{display:'none'});fields.imageControlsRow1.applyLayoutCellCss(4,{display:'none'});fields.imageControlsRow1.applyLayoutCellCss(5,{display:'none'});fields.imageControlsRow2.applyLayoutCellCss(0,{display:'none'});fields.imageControlsRow2.applyLayoutCellCss(1,{display:'none'});if(type==='map'){fields.imageControlsRow1.applyLayoutCellCss(2,{display:''});fields.galleryThumbSizeTimesLabel.setVisible(!0);fields.galleryThumbHeight.setVisible(!0);fields.imageControlsRow1.applyLayoutCellCss(3,{display:'none'});fields.imageControlsRow1.applyLayoutCellCss(5,{display:'none'})}else if(type==='thumbs'){fields.imageControlsRow1.applyLayoutCellCss(2,{display:''});fields.galleryThumbSizeTimesLabel.setVisible(!0);fields.galleryThumbHeight.setVisible(!0);fields.imageControlsRow1.applyLayoutCellCss(3,{display:''});fields.imageControlsRow1.applyLayoutCellCss(5,{display:''});fields.imageControlsRow2.applyLayoutCellCss(1,{display:''})}else if(type==='slideshow'){fields.imageControlsRow1.applyLayoutCellCss(0,{display:''});fields.imageControlsRow1.applyLayoutCellCss(1,{display:''});fields.imageControlsRow1.applyLayoutCellCss(4,{display:''});fields.imageControlsRow2.applyLayoutCellCss(0,{display:''});fields.imageControlsRow2.applyLayoutCellCss(1,{display:''})}else if(type==='list'){fields.imageControlsRow1.applyLayoutCellCss(0,{display:''});fields.imageControlsRow1.applyLayoutCellCss(1,{display:''});fields.imageControlsRow1.applyLayoutCellCss(2,{display:''});fields.galleryThumbSizeTimesLabel.setVisible(!0);fields.galleryThumbHeight.setVisible(!0);fields.imageControlsRow2.applyLayoutCellCss(0,{display:''});fields.imageControlsRow2.applyLayoutCellCss(1,{display:''})}else if(type==='masonry'){fields.imageControlsRow1.applyLayoutCellCss(2,{display:''});fields.imageControlsRow1.applyLayoutCellCss(3,{display:''});fields.imageControlsRow1.applyLayoutCellCss(5,{display:''});fields.imageControlsRow2.applyLayoutCellCss(1,{display:''})}};Gallery.prototype.comProperties=function(uiDef){var _this=this;var fields=_super.prototype.comProperties.call(this,{size:{sizeClass:'modal-md',minBodyHeight:384},tabs:[{children:[{type:'HorizontalLayout',columnWeights:[4,4,4],children:[{type:'VerticalLayout',css:{marginTop:15},id:'galleryImagesBlock',children:[{type:'Label',text:__('Gallery Pictures')},{type:'ImageSelector',id:'galleryImages',usePictureManager:!0}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryBgColorBlock',children:[{type:'Label',text:__('Background color')},{type:ColorPicker_13.ColorPicker,id:'galleryBgColor',big:!0,change:function(){Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-galleryBgColor-change',_this)}}]},{type:'VerticalLayout',css:{marginTop:15},id:'imageBorderBlock',children:[{type:'Label',text:__('Border')},{type:BorderControl_7.BorderControl,id:'imageBorder',noTransparent:!1,change:function(){Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-imageBorder-change',_this)}}]}]},{type:'Label',css:{marginTop:15},text:__('Gallery Type')},{type:GalleryTypeSelector_2.GalleryTypeSelector,id:'galleryType',change:function(fields){_this.updateComPropertiesGalleryType(fields.galleryType.getValue());Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-galleryType-change',_this)}},{type:'HorizontalLayout',id:'imageControlsRow1',columnWeights:[4,4,4,4,4,4,4],children:[{type:'VerticalLayout',css:{marginTop:15},id:'galleryPaddingBlock',children:[{type:'Label',text:__('Gallery padding (px)')},{type:SizeSelector_12.SizeSelector,id:'galleryPadding',min:0,max:999,repeat:!1,change:function(){Service_23.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-galleryPadding-change',_this)}}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryFrequencyBlock',children:[{type:'Label',text:__('Image change frequency (s)'),helpText:__('Enter 0 seconds to disable automatic image changing')},{type:SizeSelector_12.SizeSelector,id:'galleryFrequency',min:0,max:10,repeat:!1}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryThumbSizeBlock',children:[{type:'Label',text:__('Thumbnail Size')},{type:'FlowLayout',verticalAlign:'middle',spacing:5,children:[{type:SizeSelector_12.SizeSelector,id:'galleryThumbWidth',min:10,repeat:!1},{type:'Label',html:'&times;',id:'galleryThumbSizeTimesLabel',css:{fontWeight:'normal',fontSize:18}},{type:SizeSelector_12.SizeSelector,id:'galleryThumbHeight',min:10,repeat:!1}]}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryThumbAlignBlock',children:[{type:'Label',text:__('Align')},{type:HAlignSelector_4.HAlignSelector,id:'galleryThumbAlign',justify:!1}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryOpacityBlock',children:[{type:'Label',text:__('Slide opacity (%)')},{type:'SliderControl',id:'gallerySlideOpacity',min:0,max:100}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryThumbPaddingBlock',children:[{type:'Label',text:__('Thumb padding (px)')},{type:SizeSelector_12.SizeSelector,id:'galleryThumbPadding',min:0,max:999,repeat:!1}]}]},{type:'HorizontalLayout',id:'imageControlsRow2',columnWeights:[4,4],children:[{type:'VerticalLayout',css:{marginTop:15},id:'galleryImageCoverBlock',children:[{type:ContainmentControl_2.ContainmentControl,id:'galleryImageContainment',label:__('Filling')}]},{type:'VerticalLayout',css:{marginTop:15},id:'galleryDisablePopupBlock',children:[{type:'CheckBox',id:'galleryDisablePopup',label:__('Do not enlarge picture on click')}]},]}]},{name:__('Captions'),children:[{type:'HorizontalLayout',columnWeights:[4,4,4],children:[{type:'VerticalLayout',css:{marginTop:15},id:'pictureCaptionBlock',children:[{type:'Label',text:__('Show picture caption')},{type:'RadioBox',id:'showPictureCaptionAlways',group:'showPictureCaption',label:__('Always')},{type:'RadioBox',id:'showPictureCaptionOnHover',group:'showPictureCaption',label:__('On mouse hover')}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Caption background colour')},{type:ColorPicker_13.ColorPicker,id:'captionBackground',big:!1}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Position')},{type:AlignSelector_3.AlignSelector,id:'captionPosition',big:!1}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Picture title style')},{type:TextControl_4.TextControl,id:'captionTitleStyle',horizontal:!0}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Picture description style')},{type:TextControl_4.TextControl,id:'captionDescriptionStyle',horizontal:!0}]}]},{name:__('Lightbox'),children:[{type:'HorizontalLayout',columnWeights:[12],children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Caption background colour')},{type:ColorPicker_13.ColorPicker,id:'lightboxBackground',big:!1}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Title')},{type:TextControl_4.TextControl,id:'lightboxTitleStyle',horizontal:!0}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Description')},{type:TextControl_4.TextControl,id:'lightboxDescriptionStyle',horizontal:!0}]}]}],callbackFunc:function(fields){_this.galleryBgColor=fields.galleryBgColor.getValue();_this.gallerySlideShowInterval=fields.galleryFrequency.getValue();_this.galleryType=fields.galleryType.getValue();_this.border=fields.imageBorder.getValue();_this.galleryPadding=fields.galleryPadding.getValue();_this.galleryThumbWidth=fields.galleryThumbWidth.getValue();_this.galleryThumbHeight=fields.galleryThumbHeight.getValue();_this.galleryThumbAlign=fields.galleryThumbAlign.getValue();_this.galleryThumbPadding=fields.galleryThumbPadding.getValue();_this.gallerySlideOpacity=fields.gallerySlideOpacity.getValue();_this.galleryImageContainment=fields.galleryImageContainment.getValue();_this.disablePopup=fields.galleryDisablePopup.getValue();if(fields.showPictureCaptionOnHover.getValue()){_this.showPictureCaption="hover"}else{_this.showPictureCaption="always"}
_this.captionBackground=fields.captionBackground.getValue();_this.captionPosition=fields.captionPosition.getValue();_this.captionTitleStyle=fields.captionTitleStyle.getValue();_this.captionDescriptionStyle=fields.captionDescriptionStyle.getValue();_this.lightboxBackground=fields.lightboxBackground.getValue();_this.lightboxTitleStyle=fields.lightboxTitleStyle.getValue();_this.lightboxDescriptionStyle=fields.lightboxDescriptionStyle.getValue();var gType=_this.galleryType;if(_this.height==='auto'&&(gType==='slideshow'||gType==='list')){_this.useMinHeight=!0;if(_this.minHeight<20)
_this.minHeight=200;_this.updateStyle()}
_this.images=fields.galleryImages.getValues()}});fields.galleryType.setValue(this.galleryType);fields.galleryType.setIsBackgroundMode(this.isBackgroundElement);fields.galleryBgColor.setValue(this.galleryBgColor);fields.galleryImages.setValues(this.images);fields.imageBorder.setValue(this.border);fields.galleryFrequency.setValue(this.gallerySlideShowInterval);fields.galleryPadding.setValue(this.galleryPadding);fields.galleryThumbWidth.setValue(this.galleryThumbWidth);fields.galleryThumbHeight.setValue(this.galleryThumbHeight);fields.galleryThumbAlign.setValue(this.galleryThumbAlign);fields.galleryThumbPadding.setValue(this.galleryThumbPadding);fields.gallerySlideOpacity.setValue(this.gallerySlideOpacity);fields.galleryImageContainment.setValue(this.galleryImageContainment);fields.galleryDisablePopup.setValue(this.disablePopup);var showPictureCaption=this.showPictureCaption;fields.showPictureCaptionAlways.setValue(showPictureCaption==="always");fields.showPictureCaptionOnHover.setValue(showPictureCaption==="hover");fields.captionBackground.setValue(this.captionBackground);fields.captionPosition.setValue(this.captionPosition);fields.captionTitleStyle.setValue(this.captionTitleStyle);fields.captionDescriptionStyle.setValue(this.captionDescriptionStyle);fields.lightboxBackground.setValue(this.lightboxBackground);fields.lightboxTitleStyle.setValue(this.lightboxTitleStyle);fields.lightboxDescriptionStyle.setValue(this.lightboxDescriptionStyle);return fields};Gallery.prototype.releaseResources=function(options){_super.prototype.releaseResources.call(this,options);this.gallery.destroy();BuilderEvent_8.GlobalEvents.off("media.meta.changed",this.metaChangeHandler);if(this.menu){var item=this.menu.getItem("changeColor");item===null||item===void 0?void 0:item.ColorPickerDestroy()}};Gallery.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"galleryType",type:PropertyType_3.PropertyType.GalleryType,dependencies:["isBackgroundElement"],uiComponentOptions:function(){return{isBackground:this.isBackgroundElement}}});this.registerProperty({name:"galleryBgColor",type:PropertyType_3.PropertyType.GalleryBackgroundColor});this.registerProperty({name:"galleryPadding",type:PropertyType_3.PropertyType.GalleryPadding,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="slideshow"||this.galleryType==="list"}}});this.registerProperty({name:"galleryImageContainment",type:exports.ContainmentProperty,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="slideshow"||this.galleryType==="list"||this.galleryType==="thumbs"}}});this.registerProperty({name:"disablePopup",type:PropertyType_3.PropertyType.GalleryDisableLightbox,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&(this.galleryType==="slideshow"||this.galleryType==="list"||this.galleryType==="thumbs"||this.galleryType==="masonry"),}}});this.registerProperty({name:"images",type:PropertyType_3.PropertyType.GalleryImages,uiComponentOptions:function(){var images=this.getImages();var initialImages=this.picturesInitial;var isInitial=initialImages&&images.length===initialImages.length&&images.every(function(value,index){return initialImages&&value===initialImages[index]});return{validateText:(images.length<=0||isInitial)?('open:'+__('Change pictures')):'',}}});this.registerProperty({name:"border",type:PropertyType_3.PropertyType.ThumbnailBorder});this.registerProperty({name:"galleryThumbWidth",type:PropertyType_3.PropertyType.ThumbnailWidth,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="masonry"||this.galleryType==="list"}}});this.registerProperty({name:"galleryThumbHeight",type:PropertyType_3.PropertyType.ThumbnailHeight,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="list"}}});this.registerProperty({name:"galleryThumbAlign",type:PropertyType_3.PropertyType.ThumbnailAlignment,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="masonry"}}});this.registerProperty({name:"galleryThumbPadding",type:PropertyType_3.PropertyType.ThumbnailPadding,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="masonry"||this.galleryType==='list'}}});this.registerProperty({name:"galleryThumbAnim",type:PropertyType_3.PropertyType.ThumbnailAnimation,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="masonry"}}});this.registerProperty({name:"galleryThumbShadow",type:PropertyType_3.PropertyType.ThumbnailShadow,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="thumbs"||this.galleryType==="masonry"}}});this.registerProperty({name:"gallerySlideShowInterval",type:PropertyType_3.PropertyType.SlideShowInterval,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="slideshow"||this.galleryType==="list"}}});this.registerProperty({name:"gallerySlideShowSpeed",type:PropertyType_3.PropertyType.SlideShowSpeed,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="slideshow"||this.galleryType==="list"}}});this.registerProperty({name:"gallerySlideOpacity",type:PropertyType_3.PropertyType.SlideOpacity,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="slideshow"}}});this.registerProperty({name:"showPictureCaption",type:PropertyType_3.PropertyType.CaptionsDisplay});this.registerProperty({name:"captionIncludeDescription",type:PropertyType_3.PropertyType.CaptionsIncludeDescription,dependencies:["showPictureCaption"],uiComponentOptions:function(){return{visible:this.showPictureCaption!=='none',}}});this.registerProperty({name:"captionBackground",type:PropertyType_3.PropertyType.CaptionsBackgroundColor});this.registerProperty({name:"captionPosition",type:PropertyType_3.PropertyType.CaptionsPosition,uiComponentOptions:function(){var highlight=[];if(this.captionPosition==="center top"){highlight=[0,2]}
if(this.captionPosition==="center bottom"){highlight=[6,8]}
return{highlight:highlight}}});this.registerProperty({name:"captionTitleStyle",type:PropertyType_3.PropertyType.CaptionsTitleStyle});this.registerProperty({name:"captionDescriptionStyle",type:PropertyType_3.PropertyType.CaptionsDescriptionStyle});this.registerProperty({name:"lightboxBackground",type:PropertyType_3.PropertyType.LightboxBackgroundColor,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"lightboxTitleStyle",type:PropertyType_3.PropertyType.LightboxTitleStyle,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"lightboxDescriptionStyle",type:PropertyType_3.PropertyType.LightboxDescriptionStyle,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"controlsArrow",type:PropertyType_3.PropertyType.GalleryControlsThumbnailArrow,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&(this.galleryType==="slideshow"||this.galleryType==="list"),options:[{id:'shevron',name:__('Shevron'),html:'<span class="fa fa-chevron-left"></span><span class="fa fa-chevron-right"></span>'},{id:'shevron-circle',name:__('Shevron Circle'),html:'<span class="fa fa-chevron-circle-left"></span><span class="fa fa-chevron-circle-right"></span>'},{id:'arrow',name:__('Arrow'),html:'<span class="fa fa-arrow-left"></span><span class="fa fa-arrow-right"></span>'},{id:'arrow-circle',name:__('Arrow Circle'),html:'<span class="fa fa-arrow-circle-left"></span><span class="fa fa-arrow-circle-right"></span>'},{id:'caret',name:__('Caret'),html:'<span class="fa fa-caret-left"></span><span class="fa fa-caret-right"></span>'},this.galleryType==="slideshow"?{id:'circles',name:__('Circles'),html:'<span class="fa fa-circle-o"></span><span class="fa fa-circle-o"></span><span class="fa fa-circle-o"></span>'}:null,{id:'none',name:__('None')},].filter(function(item){return!!item}),}}});this.registerProperty({name:"controlsArrowSize",type:PropertyType_3.PropertyType.GalleryControlsThumbnailArrowSize,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&(this.galleryType==="slideshow"||this.galleryType==="list"),}}});this.registerProperty({name:"controlsArrowStyle",type:PropertyType_3.PropertyType.GalleryControlsThumbnailArrowStyle,dependencies:["galleryType","controlsArrow"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.controlsArrow!=='none'&&(this.galleryType==="slideshow"||this.galleryType==="list"),useActiveTab:this.controlsArrow==="circles",}}});this.registerProperty({name:"controlsLightboxArrow",type:PropertyType_3.PropertyType.GalleryControlsLightboxArrow,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,options:[{id:'chevron',name:__('Chevron'),html:'<span class="fa fa-chevron-left"></span><span class="fa fa-chevron-right"></span>'},{id:'chevron-circle',name:__('Chevron Circle'),html:'<span class="fa fa-chevron-circle-left"></span><span class="fa fa-chevron-circle-right"></span>'},{id:'arrow',name:__('Arrow'),html:'<span class="fa fa-arrow-left"></span><span class="fa fa-arrow-right"></span>'},{id:'arrow-circle',name:__('Arrow Circle'),html:'<span class="fa fa-arrow-circle-left"></span><span class="fa fa-arrow-circle-right"></span>'},{id:'caret',name:__('Caret'),html:'<span class="fa fa-caret-left"></span><span class="fa fa-caret-right"></span>'},]}}});this.registerProperty({name:"controlsLightboxArrowSize",type:PropertyType_3.PropertyType.GalleryControlsLightboxArrowSize,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"controlsLightboxArrowStyle",type:PropertyType_3.PropertyType.GalleryControlsLightboxArrowStyle,dependencies:["controlsLightboxArrow"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.controlsLightboxArrow!=='none',useActiveTab:this.controlsLightboxArrow==="circles",}}});this.registerProperty({name:"mapTypeId",type:PropertyType_3.PropertyType.GoogleMapType,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"markerIconTypeId",type:PropertyType_3.PropertyType.GoogleMarkerIconType,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"zoom",type:PropertyType_3.PropertyType.MapZoom,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"mapCenter",type:PropertyType_3.PropertyType.GoogleMapAddress,dependencies:["galleryType"],uiComponentOptions:function(){var _this=this;return{visible:this.galleryType==="map",label:__('Map center'),cleanable:!0,configSuplier:function(){return{zoom:_this.zoom,mapTypeId:_this.mapTypeId,}},}},onChange:function(property){var _a;console.log((_a=property.type)===null||_a===void 0?void 0:_a.component)}});this.registerProperty({name:"key",type:PropertyType_3.PropertyType.ApiGoogleMapsKey,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"theme",type:PropertyType_3.PropertyType.GoogleMapTheme,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"color",type:PropertyType_3.PropertyType.MapColor,dependencies:["galleryType","theme"],uiComponentOptions:function(){return{visible:this.galleryType==="map"&&this.theme==="monochrome"}}});this.registerProperty({name:"showSatellite",type:PropertyType_3.PropertyType.MapShowSatelliteControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showZoom",type:PropertyType_3.PropertyType.MapShowZoomControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showStreetView",type:PropertyType_3.PropertyType.MapShowStreetViewControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showFullscreen",type:PropertyType_3.PropertyType.MapShowFullScreenControl,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"allowDragging",type:PropertyType_3.PropertyType.MapAllowDragging,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showRoads",type:PropertyType_3.PropertyType.MapShowRoads,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showLandmarks",type:PropertyType_3.PropertyType.MapShowLandmarks,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}});this.registerProperty({name:"showLabels",type:PropertyType_3.PropertyType.MapShowLabels,dependencies:["galleryType"],uiComponentOptions:function(){return{visible:this.galleryType==="map"}}})};Gallery.pluginName='Gallery';Gallery.config={thumbWidth:290,thumbHeight:290,minWidth:320,minHeight:240};Gallery.selectDialog=null;Gallery.editDialog=null;return Gallery}(Element_6.Element));exports.ContainmentProperty=new PropertyType_3.PropertyType("gallery/imageCover",PropertyType_3.PropertyTypeAccess.User,!0,__("Filling"),ContainmentControl_2.ContainmentControl);ElementRegister_5.ElementRegister.registerClass("Gallery",Gallery)});define("js/IFrameControl",["require","exports","js/UIComponent"],function(require,exports,UIComponent_62){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.IFrameControl=void 0;var IFrameControl=(function(_super){__extends(IFrameControl,_super);function IFrameControl(url,params){var _this=_super.call(this,'iframe')||this;_this.params=(typeof params==="object")?params:{};_this.parseUrl(url?url:'about:blank');_this._elem.attr({'frameborder':'0','src':_this.buildUrl()}).css({width:'200px',height:'200px'});return _this}
IFrameControl.prototype.buildInit=function(data,fields){this.parseUrl(data.url?data.url:'about:blank');if(data.params&&(typeof data.params==='object'))
this.params=data.params;this._elem.attr('src',this.buildUrl())};IFrameControl.prototype.parseUrl=function(url){var _url=(url?(url+""):"").split("?");this.url=_url[0];var params=(_url.length>1)?_url[1].split("&"):[];for(var i=0;i<params.length;i++){var param=params[i].split("=");this.params[param[0]]=(param.length>1)?param[1]:""}};IFrameControl.prototype.buildUrl=function(){var url=this.url,params="";for(var k in this.params){params+=((params.length>0)?"&":"")+k+"="+encodeURIComponent(this.params[k])}
return url+((params.length>0)?("?"+params):"")};IFrameControl.prototype.setParam=function(name,value){this.params[name]=value;this._elem.attr("src",this.buildUrl())};IFrameControl.prototype.setParams=function(params){this.params=(typeof params==="object")?params:{};this._elem.attr("src",this.buildUrl())};IFrameControl.prototype.getValue=function(){return this.buildUrl()};IFrameControl.prototype.setValue=function(value,params){if(params===void 0){params=null}
this.url="";this.params=((typeof params==='object')&&params)?params:{};this.parseUrl(value);this._elem.attr("src",this.buildUrl())};return IFrameControl}(UIComponent_62.UIComponent));exports.IFrameControl=IFrameControl});define("js/util/FlowStepUtil",["require","exports","jquery"],function(require,exports,jquery_80){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.forwardFlowStep=exports.FlowStep=void 0;var FlowStep;(function(FlowStep){FlowStep[FlowStep.OpenBuilder=1]="OpenBuilder";FlowStep[FlowStep.SelectTemplate=2]="SelectTemplate";FlowStep[FlowStep.ImportWebsite=3]="ImportWebsite";FlowStep[FlowStep.Save=4]="Save";FlowStep[FlowStep.Publish=5]="Publish";FlowStep[FlowStep.HelpClick=6]="HelpClick";FlowStep[FlowStep.TemplateSearch=7]="TemplateSearch";FlowStep[FlowStep.AIChat=8]="AIChat";FlowStep[FlowStep.CompleteLinkShare=9]="CompleteLinkShare";FlowStep[FlowStep.OpenShareDialog=10]="OpenShareDialog";FlowStep[FlowStep.PremiumButtonClick=11]="PremiumButtonClick";FlowStep[FlowStep.InactiveCompositionClick=12]="InactiveCompositionClick"})(FlowStep||(exports.FlowStep=FlowStep={}));function forwardFlowStep(wbConfig,step,forAll,moreData){if(forAll===void 0){forAll=!1}
if(moreData===void 0){moreData={}}
if(!wbConfig.flowUrl||(!forAll&&!wbConfig.isB2C)||wbConfig.isEnterprise){return jquery_80.default.Deferred().resolve().promise()}
moreData.step=step;return jquery_80.default.ajax(wbConfig.flowUrl+'forward',{data:JSON.stringify(moreData),contentType:'application/json',type:'POST',async:!0,}).promise()}
exports.forwardFlowStep=forwardFlowStep});define("js/PremiumButton",["require","exports","js/jquery-builder","js/core/BuilderConfig","MobileToolbar","js/BuilderEvent","Dialog","js/IFrameControl","js/util/FlowStepUtil"],function(require,exports,jquery_builder_14,BuilderConfig_16,MobileToolbar_2,BuilderEvent_9,Dialog_6,IFrameControl_1,FlowStepUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.attachUpgradeAction=exports.onClickUpgradeAction=exports.init=void 0;function init(toolbarElem,builder){var title=(BuilderConfig_16.wbConfig.premiumButtonType==='expired')?__('Ask administrator to enable this feature'):__('Available in %sPremium version%s').replace('%s','').replace('%s','');var mobileDrawer=null;for(var _i=0,_a=MobileToolbar_2.Drawer.list;_i<_a.length;_i++){var drawer=_a[_i];if(drawer.id==='compositions'){mobileDrawer=drawer;break}}
for(var _b=0,_c=builder.getCompositionCollections();_b<_c.length;_b++){var item=_c[_b];if(item.inactive){initButton(builder,toolbarElem.find('#wb__'+item.id),title,"bottom");if(mobileDrawer){for(var i=0,il=mobileDrawer.getItemCount();i<il;i++){var drawerItem=mobileDrawer.getItem(i);if(drawerItem&&drawerItem.id===item.id){initButton(builder,drawerItem.getElem(),title,"top");break}}}}}
BuilderEvent_9.GlobalEvents.on("drawer.show",function(){hideTooltips(null)})}
exports.init=init;function initButton(builder,btn,title,tooltipPlacement){var url=builder.getPlanUpgradeUrl();btn.addClass("wb-pro-tooltip").addClass("wb-pro-tooltip-"+tooltipPlacement).attr("title",title).css(url?{cursor:"pointer"}:{}).off("click mousedown touchstart").on("click touchstart",function(e){if(url)
window.open(url);else{var $this=(0,jquery_builder_14.default)(this);hideTooltips(this);$this.tooltip("show");if(e.type==="touchstart")
setTimeout(hideTooltips,3000);}
e.stopImmediatePropagation();e.preventDefault()}).tooltip({placement:tooltipPlacement});return btn}
function hideTooltips(skip){(0,jquery_builder_14.default)('.wb-pro-tooltip').not(skip).trigger("mouseout")}
var b2bcDialog=null;function handleUpgradeClick(e,loginOnly,type){e.stopPropagation();e.preventDefault();if(type){(0,FlowStepUtil_1.forwardFlowStep)(BuilderConfig_16.wbConfig,FlowStepUtil_1.FlowStep.PremiumButtonClick,!0,{type:type})}
var b2b2cLoginUrl=BuilderConfig_16.wbConfig.getB2B2CLoginUrl(loginOnly);if(b2b2cLoginUrl){location.href=b2b2cLoginUrl}else if(BuilderConfig_16.wbConfig.upgradeUrl){window.open(BuilderConfig_16.wbConfig.upgradeUrl)}else{console.warn("no upgrade path")}
return!1}
function onClickUpgradeAction(loginOnly,type){if(loginOnly===void 0){loginOnly=!1}
window.wbUpgradeActionHandle=handleUpgradeClick;return'window.wbUpgradeActionHandle(event, '+(loginOnly?'true':'false')+(type?", \"".concat(type,"\""):'')+')'}
exports.onClickUpgradeAction=onClickUpgradeAction;function attachUpgradeAction(elem,loginOnly,type){if(loginOnly===void 0){loginOnly=!1}
elem.addEventListener('click',function(e){return handleUpgradeClick(e,loginOnly,type)});var aElem=elem;if(/\/#$/.test(aElem.href||'')){var b2b2cLoginUrl=BuilderConfig_16.wbConfig.getB2B2CLoginUrl(loginOnly);if(b2b2cLoginUrl){aElem.href=b2b2cLoginUrl}else if(BuilderConfig_16.wbConfig.upgradeUrl){aElem.href=BuilderConfig_16.wbConfig.upgradeUrl}}}
exports.attachUpgradeAction=attachUpgradeAction;var B2bcDialog=(function(_super){__extends(B2bcDialog,_super);function B2bcDialog(){var _this=_super.call(this,"")||this;_this.setSize(1024);_this.setMaximised(!0);_this.setFooterVisible(!1);_this.frame=new IFrameControl_1.IFrameControl('about:blank').css({width:'100%',height:'95%',display:'block'});_this.setContent(_this.frame);return _this}
B2bcDialog.prototype.navigate=function(url){this.frame.setValue(url);return this};return B2bcDialog}(Dialog_6.default))});define("js/core/Collaboration",["require","exports","js/ElementRegister","js/Service","js/util/EventUtil","jquery","js/core/BuilderConfig","js/ui/FlexLayoutControl","js/tools/CropTool","js/Serializable","Preloader","js/BuilderEvent","js/PremiumButton"],function(require,exports,ElementRegister_6,Service_24,EventUtil_8,jquery_81,BuilderConfig_17,FlexLayoutControl_3,CropTool_1,Serializable_4,Preloader_1,BuilderEvent_10,PremiumButton_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.resizeElement=exports.updateModuleProperties=exports.updateElementProperties=exports.updateElement=exports.removeElement=exports.moveElement=exports.addElement=exports.initCollaboration=exports.isCollaborationActive=void 0;var ActionType;(function(ActionType){ActionType.Join="join";ActionType.Leave="leave";ActionType.Users="users";ActionType.Cursor="cursor";ActionType.Add="add";ActionType.Move="move";ActionType.Remove="remove";ActionType.Update="update";ActionType.UpdateProperties="update-property";ActionType.UpdateModuleProperties="update-module-property"})(ActionType||(ActionType={}));var socket=null;var builder=null;var clients={};var clientsPanel;var inPreview=!1;var ignoreUpdatesFor="";var preloader=null;var backoff=1;var backoffMax=64;var LOG_CONNECTION_STATE=!1;function buildRequest(type,data){var req={domain:BuilderConfig_17.wbConfig.builderIdDomain,lh:BuilderConfig_17.wbConfig.getLoginHash(),pageId:builder?builder.pageId:"",actionType:type,data:JSON.stringify(data),};return JSON.stringify(req)}
function reconnect(user){if(!BuilderConfig_17.wbConfig.collaboration)
return;var soc=new WebSocket(BuilderConfig_17.wbConfig.collaboration.ws);soc.addEventListener("open",function(){return handleOpen(soc,user)});soc.addEventListener("message",function(e){return handleMessage(e,user)});soc.addEventListener("close",function(e){return handleClose(e,user)});socket=soc}
function handleOpen(soc,user){if(LOG_CONNECTION_STATE)
console.log("Connected");backoff=1;soc.send(buildRequest(ActionType.Join,user))}
function handleClose(e,user){clearClients();socket=null;if(e&&!e.wasClean&&e.code>0){var time=backoff*1000+Math.floor(Math.random()*1000);if(backoff<backoffMax)
backoff*=2;if(LOG_CONNECTION_STATE)
console.error("Connection failed, retrying in "+(time/1000)+" seconds");setTimeout(function(){if(LOG_CONNECTION_STATE)
console.log("Reconnecting...");reconnect(user)},time)}}
function handleMessage(e,user){if(!builder||!e.data)
return;var action=JSON.parse(e.data);if(!action||typeof action!=='object'||action.domain!==BuilderConfig_17.wbConfig.builderIdDomain){return}
if(action.actionType==ActionType.Join){var reqUser=JSON.parse(action.data);addClient(reqUser)}else if(action.actionType==ActionType.Leave){var reqUser=JSON.parse(action.data);removeClient(reqUser)}else if(action.actionType==ActionType.Users){var info=JSON.parse(action.data);if(typeof info.id==="string"){user.id=info.id;clients[user.id]=user}
if(typeof info.name==="string"&&info.name){user.name=info.name}
if(typeof info.color==="string"&&info.color){user.color=info.color}
if(info.clients instanceof Array){for(var _i=0,_a=info.clients;_i<_a.length;_i++){var u=_a[_i];addClient(u,!0)}
updateClientsPanel()}}else if(action.actionType==ActionType.Cursor){var cursor=JSON.parse(action.data);updateClientCursor(cursor.id||'',cursor.pageId||'',cursor.x||0,cursor.y||0)}else if(action.actionType==ActionType.Add){if(action.pageId!=builder.pageId)
return;var elemData=JSON.parse(action.data);if(elemData.id&&elemData.parentId){var cls=ElementRegister_6.ElementRegister.getClassByName(elemData['class']);if(cls){removeExisting(elemData);elemData._notInteractive=!0;var elem=new cls(elemData,!0);var parent_18=Service_24.default.element.findById(elemData.parentId);var refElem=Service_24.default.element.findById(elemData.refId);if(elem&&parent_18){parent_18.addChild(elem,!1,!1,refElem,elemData.after||!1,!1,!0)}}}}else if(action.actionType==ActionType.Move){var elemData=JSON.parse(action.data);if(elemData.id&&elemData.parentId){var elem=Service_24.default.element.findById(elemData.id);var parent_19=Service_24.default.element.findById(elemData.parentId);var refElem=Service_24.default.element.findById(elemData.refId);if(elem&&parent_19){parent_19.addChild(elem,!1,!1,refElem,elemData.after||!1,!1,!0)}}}else if(action.actionType==ActionType.Remove){var elemData=JSON.parse(action.data);if(elemData.id){var elem=Service_24.default.element.findById(elemData.id);if(elem){elem.__destruct(!1,!0)}}}else if(action.actionType==ActionType.Update){var elemData=JSON.parse(action.data);if(elemData.id){var prevElem=Service_24.default.element.findById(elemData.id);if(prevElem&&prevElem.parent){var cls=ElementRegister_6.ElementRegister.getClassByName(elemData['class']);if(cls){ignoreUpdatesFor=elemData.id;var elem=new cls(elemData,!0);prevElem.parent.addChild(elem,!1,!1,prevElem,!1,!1,!0);prevElem.remove({noHistory:!0,noConfirm:!0,ignoreCollaboration:!0});ignoreUpdatesFor=""}}}}else if(action.actionType==ActionType.UpdateProperties){var elemData=JSON.parse(action.data);if(elemData.id){var elem=Service_24.default.element.findById(elemData.id);if(elem){ignoreUpdatesFor=elemData.id;var needResize=!1;for(var propName in elemData.properties){var propType=elem.getClassType()+"::"+propName;var propValue=elemData.properties[propName];if(propName=="x"||propName=="y"||propName=="width"||propName=="height"||propName=="minWidth"||propName=="maxWidth"||propName=="minHeight"||propName=="maxHeight"||propName=="useMinWidth"||propName=="useMaxWidth"||propName=="useMinHeight"||propName=="useMaxHeight"||propName=="flexGrow"||propName=="flexShrink"){needResize=!0}
if(propType=="TextArea::text"){elem.setAndApplyValue(propValue)}else if(propType=="Picture::src"){elem.setSrc(propValue,null,!1,!0)}else if(propType=="Picture::crop"){var val=propValue?CropTool_1.CropRectangle.deserialize(propValue):propValue;elem.applyCrop(val)}else if(propType=="Gallery::images"){elem.updateImagesAndMeta(propValue)}else if(propType=="Menu::tree"){elem.setRawTree(propValue,!1)}else if(propType=="Store::noPhotoImage"||propType=="Store::watermarkImage"||propType=="Store::showDates"||propType=="Store::showItemId"||propType=="Store::storeButtons"){}else if(propName=="flexGrow"){elem.flexGrow=propValue}else if(propName=="flexShrink"){elem.flexShrink=propValue}else{var prop=elem.getProperty(propName);if(prop)
prop.set(elem,serializePropertyValue(propType,propValue),!1);}}
if(needResize)
elem.onResize();ignoreUpdatesFor=""}}}else if(action.actionType==ActionType.UpdateModuleProperties){var elemData=JSON.parse(action.data);if(elemData.id=="BlogModule"){Service_24.default.Blog.Module.updateAllElements()}else if(elemData.id=="SiteModule"){var site=builder.site;if(elemData.properties.pages){site.applyPagesAndAnchorsData(elemData.properties.pages,elemData.properties.anchors,!0);builder.bodyInstance.updateStyle(!0)}
var updateLanguages=!1;for(var k in elemData.properties){if(k=='pages'||k=='anchors'||k=='styles'||k=='usedCustomFonts')
continue;var key=k;if(k=='minMode')
key='minWebsiteMode';if(k=='maxMode')
key='maxWebsiteMode';if(k=='languages')
updateLanguages=!0;builder.site[key]=elemData.properties[k]}
if(updateLanguages)
site.onUpdateLanguages(!1,!0);Service_24.default.modeManager.setMinMaxAndEnabledModes(site.minWebsiteMode,site.maxWebsiteMode,site.modesEnabled,!0);if(elemData.properties.usedCustomFonts){site.applyCustomUsedFonts(elemData.properties.usedCustomFonts)}
if(elemData.properties.styles){site.applyStyles(elemData.properties.styles);site.updateStyle()}
if(elemData.properties.reset){if(!preloader)
preloader=new Preloader_1.default('');preloader.clearNotifications();preloader.setTitle(__("Reset"));preloader.reset();preloader.setVisible(!0);preloader.setProgress(100);setTimeout(function(){location.href=BuilderConfig_17.wbConfig.getRawLnUrl('')},5000)}
if(elemData.properties.changeTemplate){if(!preloader)
preloader=new Preloader_1.default('');preloader.clearNotifications();preloader.setTitle(__("Change template"));preloader.reset();preloader.setVisible(!0);preloader.setProgress(100)}
if(elemData.properties.changeTemplateComplete){location.href=BuilderConfig_17.wbConfig.getRawLnUrl('')}}else if(elemData.id=="StoreModule"){Service_24.default.Store.Module.load(function(){return Service_24.default.Store.reloadAll()})}}else{console.error("Unknown collaboration action type '".concat(action.actionType,"'"))}}
function isCollaborationActive(){return(BuilderConfig_17.wbConfig.collaboration&&socket&&socket.readyState==WebSocket.OPEN&&builder)?!0:!1}
exports.isCollaborationActive=isCollaborationActive;function initCollaboration(b,panel){if(!BuilderConfig_17.wbConfig.collaboration||!b)
return;builder=b;var user={id:"0",name:BuilderConfig_17.wbConfig.builderUserName||"",color:"#333",you:!0,};if(BuilderConfig_17.wbConfig.builderUserAdmin)
user.isAdmin=!0;if(LOG_CONNECTION_STATE)
console.log("Connecting...");reconnect(user);clientsPanel=(0,jquery_81.default)('<div>').addClass('wb-collaboration-panel').css({display:'none'});panel.add("collaboration",clientsPanel,!0);var cursor={left:0,top:0};var sentCursor={left:0,top:0};setInterval(function(){if(!socket||socket.readyState!=WebSocket.OPEN||!builder){return}
if(cursor.left!=sentCursor.left||cursor.top!=sentCursor.top){sentCursor=cursor;socket.send(buildRequest(ActionType.Cursor,{id:user.id,pageId:(builder?builder.pageId:''),x:cursor.left,y:cursor.top,}))}},10);(0,jquery_81.default)(document.body).on('mousemove',function(e){cursor=(0,EventUtil_8.posFromEvent)(e)});BuilderEvent_10.GlobalEvents.on('preview.show preview.hide',function(e){inPreview=e.visible;setVisibleClientCursors(!inPreview)})}
exports.initCollaboration=initCollaboration;function clearClients(){for(var id in clients){var client=clients[id];if(client.cursor)
client.cursor.remove();}
clients={};updateClientsPanel()}
function addClient(reqClient,batch){if(batch===void 0){batch=!1}
if(!socket||!builder)
return;var client={id:reqClient.id,name:reqClient.name,color:reqClient.color,cursor:(0,jquery_81.default)('<div class="wb-collaboration-cursor">'+'<svg width="334" height="465" viewBox="0 0 33.2 42.6">'+'<path style="fill:'+(reqClient.color||'#000000')+';stroke:#ffffff;stroke-width:2;" d="m 32.4,28.4 c -0.2,0.1 -0.4,0.1 -0.6,0.1 L 14.5,28 c -0.4,0 -0.9,0.2 -1.1,0.5 L 2.6,42.1 C 2.5,42.3 2.3,42.4 2.1,42.5 1.8,42.6 1.4,42.7 1.1,42.6 0.5,42.4 0.2,41.9 0.2,41.3 L 0,1.4 C 0,0.9 0.3,0.4 0.8,0.1 1.3,-0.2 1.9,0 2.3,0.3 L 32.7,26 c 0.5,0.4 0.6,1 0.4,1.6 -0.1,0.4 -0.4,0.6 -0.7,0.8 z" />'+'</svg>'+'</div>'),};if(reqClient.isAdmin)
client.isAdmin=!0;clients[reqClient.id]=client;if(client.cursor){client.cursor.append((0,jquery_81.default)('<span>').text("".concat(client.name)).css({backgroundColor:reqClient.color||'#000000'}));(0,jquery_81.default)(document.body).append(client.cursor)}
if(!batch)
updateClientsPanel();}
function removeClient(reqClient){if(!socket||!builder)
return;if(reqClient.id in clients){var client=clients[reqClient.id];if(client.cursor)
client.cursor.remove();delete clients[reqClient.id];updateClientsPanel()}}
function updateClientsPanel(){clientsPanel.empty();var has=0;var alwaysShow=!1;for(var id in clients){var client=clients[id];var line=(0,jquery_81.default)('<div>').text(" ".concat(client.name)+(client.isAdmin?' (admin)':'')).prepend((0,jquery_81.default)('<span>').addClass('fa fa-user-circle-o').css({color:client.color}));if(client.you){line.addClass('wb-collaboration-you');if(BuilderConfig_17.wbConfig.showB2B2CProfile()){alwaysShow=!0;var profileElem=(0,jquery_81.default)('<span>').html(' (<a href="#" class="wb-upgrade-action" target="_blank">'+__("Profile")+'</a>)');for(var _i=0,_a=profileElem.find('.wb-upgrade-action').toArray();_i<_a.length;_i++){var el=_a[_i];(0,PremiumButton_1.attachUpgradeAction)(el,!0,'b2b2c-profile||'+__("Profile"))}
line.append(profileElem)}}
clientsPanel.append(line);has++}
clientsPanel.css({display:(has>1||alwaysShow)?'block':'none'})}
function setVisibleClientCursors(visible){if(!builder)
return;for(var id in clients){var client=clients[id];if(client.cursor){client.cursor[0].style.display=visible?'block':'none'}}}
function updateClientCursor(id,pageId,x,y){if(!builder)
return;if(id in clients){var client=clients[id];if(client.cursor)
client.cursor.css({left:(x-window.scrollX)+'px',top:(y-window.scrollY)+'px',display:((builder.pageId==pageId&&!inPreview)?'block':'none'),})}}
function removeExisting(elemData){if(typeof elemData.content!=="object"||!elemData.content||!elemData.content.children||!(elemData.content.children instanceof Array)){return}
var children=elemData.content.children;for(var i=children.length-1;i>=0;i--){var child=children[i];if(child.id&&Service_24.default.element.findById(child.id)){children.splice(i,1)}else{removeExisting(child)}}}
function addElement(elem,refElem,after){if(!socket||socket.readyState!=WebSocket.OPEN||!builder||elem.isCustomSaved){return}
var data=elem.serialize();data.refId=refElem?refElem.id:"";data.after=after;if(data.refId=="new"&&elem.parent){var idx=elem.parent.getChildIndex(elem);if(idx>=0){var numSiblings=elem.parent.getChildren().length;if(after){if(numSiblings>idx+1){refElem=elem.parent.getChildAt(idx+1);data.after=!1}else if(idx-1>0){refElem=elem.parent.getChildAt(idx-2);data.after=!0}else{refElem=null;data.after=!0}}else{if(idx>0){refElem=elem.parent.getChildAt(idx-1);data.after=!0}else if(numSiblings>idx+2){refElem=elem.parent.getChildAt(idx+2);data.after=!1}else{refElem=null;data.after=!0}}
data.refId=refElem?refElem.id:""}}
socket.send(buildRequest(ActionType.Add,data))}
exports.addElement=addElement;function moveElement(elem,refElem,after){if(!socket||socket.readyState!=WebSocket.OPEN||!builder||elem.isCustomSaved){return}
socket.send(buildRequest(ActionType.Move,{id:elem.id,parentId:elem.parent?elem.parent.id:"",refId:refElem?refElem.id:"",after:after,}))}
exports.moveElement=moveElement;function removeElement(elem,fromAllPages){if(fromAllPages===void 0){fromAllPages=!1}
if(!socket||socket.readyState!=WebSocket.OPEN||!builder||elem.isCustomSaved){return}
socket.send(buildRequest(ActionType.Remove,{id:elem.id,fromAllPages:fromAllPages}))}
exports.removeElement=removeElement;function updateElement(elem){if(!socket||socket.readyState!=WebSocket.OPEN||!builder||elem.id==ignoreUpdatesFor||elem.isCustomSaved){return}
var data=elem.serialize();socket.send(buildRequest(ActionType.Update,data))}
exports.updateElement=updateElement;function serializePropertyValue(propType,value){if(propType=="LayoutElement::layout"){return new FlexLayoutControl_3.FlexLayoutControlValue(value)}
return value}
function updateElementProperties(elem,properties){if(!socket||socket.readyState!=WebSocket.OPEN||!builder||elem.id==ignoreUpdatesFor||elem.isCustomSaved){return}
var hasAny=!1;for(var name_3 in properties){var propType=elem.getClassType()+"::"+name_3;if(propType=="Store::noPhotoImage"||propType=="Store::watermarkImage"||propType=="Store::showDates"||propType=="Store::showItemId"||propType=="Store::storeButtons"){delete properties[name_3];continue}else if(propType=='Picture::imageUrl'){properties.src=elem.imageUrl;delete properties[name_3]}else if(name_3=='isAutoSizeEnabled'){properties.flexGrow=elem.flexGrow;properties.flexShrink=elem.flexShrink;delete properties[name_3]}
hasAny=!0}
if(!hasAny)
return;socket.send(buildRequest(ActionType.UpdateProperties,{id:elem.id,properties:Serializable_4.Serializable.copy(properties),}))}
exports.updateElementProperties=updateElementProperties;function updateModuleProperties(moduleId,properties){if(!socket||socket.readyState!=WebSocket.OPEN||!builder){return}
socket.send(buildRequest(ActionType.UpdateModuleProperties,{id:moduleId,properties:Serializable_4.Serializable.copy(properties),}))}
exports.updateModuleProperties=updateModuleProperties;function resizeElement(elem){updateElementProperties(elem,{x:elem.left,y:elem.top,width:elem.width,height:elem.height,minWidth:elem.minWidth,maxWidth:elem.maxWidth,minHeight:elem.minHeight,maxHeight:elem.maxHeight,useMinWidth:elem.useMinWidth,useMaxWidth:elem.useMaxWidth,useMinHeight:elem.useMinHeight,useMaxHeight:elem.useMaxHeight,flexGrow:elem.flexGrow,flexShrink:elem.flexShrink,})}
exports.resizeElement=resizeElement});define("js/Picture",["require","exports","js/Element","js/ElementRegister","js/CommonTypes","js/Service","js/MediaLibrary","js/UIButton","js/tools/CropTool","js/element/ControlsButton","js/element/PropertyType","js/BorderControl","jquery","js/BuilderEvent","URLControl","js/RoundCornersControl","js/ColorPicker","js/util/TextUtil","js/core/Collaboration","js/core/BuilderConfig"],function(require,exports,Element_7,ElementRegister_7,CommonTypes_11,Service_25,MediaLibrary_2,UIButton_11,CropTool_2,ControlsButton_2,PropertyType_4,BorderControl_8,jquery_82,BuilderEvent_11,URLControl_3,RoundCornersControl_2,ColorPicker_14,TextUtil_6,Collaboration_3,BuilderConfig_18){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Picture=void 0;var Picture=exports.Picture=(function(_super){__extends(Picture,_super);function Picture(data,initial,virtual,isEditable){if(data===void 0){data={content:{}}}
if(initial===void 0){initial=!1}
if(virtual===void 0){virtual=!1}
if(isEditable===void 0){isEditable=!0}
var _this=_super.call(this,data,initial,virtual,(!data||!data.customLock)&&isEditable)||this;_this.noPhotoBg='ico-tb-picture';_this.image=null;_this.imageW=null;_this.dialog=null;_this.originalSize=null;_this.myEmptyMessageText=__("Double click to change picture");_this._imageAlt=null;_this._imageUrl=null;_this._imageLink=null;_this._color="#000000";_this._opacity=100;_this._keepAspectRatio=!1;_this._imageLinkType='url';_this._scaleFactors=null;_this.customLock=!1;_this.crop=null;_this._lastSrc=null;var _data=(data&&typeof(data)==="object")?data:{};_this.loadDeferred=jquery_82.default.Deferred();_this.customLock=!!_data.customLock;if(_this.customLock)
_this.classNamePropEnabled=!1;_this.ignoreParentBounds=!0;_this.setEmptyMessageText(_this.myEmptyMessageText);_this.displayEmptyMessage(!0);_this.elem.addClass("wb_picture");_this.imgWrapper=(0,jquery_82.default)('<div>').addClass('wb-picture-wrapper').appendTo(_this.container);_this.cropBtn=new ControlsButton_2.ControlsButton('wb_crop_btn','fa fa-crop',ControlsButton_2.ControlsButtonAlign.LEFT_TOP,'pointer');_this.cropBtn.elem.on('click',function(){return _this.runCrop()});_this.controls.addButton(_this.cropBtn);_this.rotateBtn=new ControlsButton_2.ControlsButton('wb_rotate_btn','fa fa-rotate-right',ControlsButton_2.ControlsButtonAlign.LEFT_TOP,'pointer');_this.rotateBtn.elem.on('click',function(){return _this.runRotate()});_this.controls.addButton(_this.rotateBtn);_this._imageUrl=data.content.src?data.content.src:null;if(_this._imageUrl&&typeof _this._imageUrl==='object'){_this._imageUrl=(0,MediaLibrary_2.getFontIconProperty)(_this._imageUrl)}
_this._imageAlt=data.content.alt?data.content.alt:null;_this._color=data.content.color?data.content.color:"#000000";_this._border=data.content.border?data.content.border:{color:'#000000',style:'none',weight:1,css:{border:'1px none #000000'}};_this._corners=data.content.corners?data.content.corners:{lt:0,rt:0,rb:0,lb:0,css:{"border-radius":"0","-webkit-border-radius":"0","-moz-border-radius":"0"}};_this._opacity=(data.content.opacity||data.content.opacity===0)?data.content.opacity:_this._opacity;if(_this._imageUrl&&typeof _this._imageUrl==="string"&&_this._imageUrl.indexOf("user_images/")===0){_this._imageUrl=_this._imageUrl.replace("user_images/","gallery/")}
_this.crop=data.content.crop?new CropTool_2.CropRectangle(data.content.crop):((data.content.crop===undefined)?null:!1);_this._scaleFactors=(data.content&&data.content.scaleFactors)?data.content.scaleFactors:_this._scaleFactors;if(data.content.link){if(typeof data.content.link==='object'){_this._imageLink=data.content.link}else if("linkType" in data.content&&data.content.linkType){_this._imageLink={_:"Link",type:data.content.linkType,url:(data.content.link?data.content.link:void 0),title:(data.content.linkTitle?data.content.linkTitle:void 0),target:(data.content.linkTarget?data.content.linkTarget:void 0),noFollow:(data.content.linkNoFollow?data.content.linkNoFollow:null)}}}else _this._imageLink=null;_this._imageLinkType=(data.content.imageLinkType)?data.content.imageLinkType:'url';if((_this._imageUrl!==null&&_this._imageUrl!==""&&_this._imageUrl!=="none")||data._copy||_this.isElementPreview){_this.loadImage(_this.getSrc(),null,!0,!0)}else if(!initial){var circleDiameter=(data.maxWidth&&data.maxHeight&&data.maxWidth===data.maxHeight)?data.maxWidth:((data.minWidth&&data.minHeight&&data.minWidth===data.minHeight)?data.minWidth:0);var halfDiameter=Math.floor(circleDiameter/2);var makeIntoCircle_1=!!(circleDiameter&&data.content&&data.content.corners&&((data.content.corners.differ&&data.content.corners.lt>=halfDiameter&&data.content.corners.rt>=halfDiameter&&data.content.corners.lb>=halfDiameter&&data.content.corners.rb>=halfDiameter)||(!data.content.corners.differ&&data.content.corners.lt>=halfDiameter)));_this.setSize("auto","auto");setTimeout(function(){_this.changePicture(function(){if(makeIntoCircle_1&&_this.image&&_this.imageW&&_this.originalSize&&_this.originalSize.width&&_this.originalSize.height){var minCropSize=Math.min(_this.originalSize.width,_this.originalSize.height);_this.crop=new CropTool_2.CropRectangle({x:Math.round((_this.originalSize.width-minCropSize)/2),y:Math.round((_this.originalSize.height-minCropSize)/2),width:minCropSize,height:minCropSize,imgWidth:_this.originalSize.width,imgHeight:_this.originalSize.height});_this.crop.normalize();if(_this.crop.isCoveringAll()){_this.crop=!1;_this.imageW=(0,jquery_82.default)(_this.image);makeIntoCircle_1=!1}else{_this.imageW=(0,jquery_82.default)(CropTool_2.CropTool.renderCanvas(_this.image,_this.crop))}
_this.imageW.css("visibility","");_this.imgWrapper.empty();_this.imgWrapper.append(_this.imageW)}else{makeIntoCircle_1=!1}
_this.resetImageSize(!1,makeIntoCircle_1,_this.keepSize);_this.updateStyle()},!0)},500)}
if(_this.customLock||_this.isAdminLocked){_this.updateImageSize();_this.setResizingEnabled(!1,!0)}else{_this.controls.elem.tooltip({trigger:"manual",placement:"top",html:!0,title:__("This element can be edited only in Desktop mode")});_this.controls.onDblClick(function(){if(_this.debug)
console.log("DoubleClick");_this.changePicture()});_this.controls.setToolbarActions([{name:__('Change picture'),icon:'fa fa-picture-o',action:function(){return _this.changePicture()}}]);if(_this.isResizable){_this.elem.resizableExt('option','keepAutoWidth',!0);_this.elem.resizableExt('option','keepAutoHeight',!0)}}
_this.modeContextOk.resetSize=!0;_this.verifyCropable();return _this}
Object.defineProperty(Picture.prototype,"imageAlt",{get:function(){return this._imageAlt},set:function(value){this._imageAlt=value},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(value){this.setSrc(value,null,!0)},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"imageLink",{get:function(){return this._imageLink},set:function(value){this._imageLink=value;BuilderEvent_11.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_11.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"color",{get:function(){return this._color},set:function(value){this._color=value},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"border",{get:function(){var brd=(0,BorderControl_8.buildCss)(this._border||null);(0,BorderControl_8.applyRadiusValue)(brd,this._corners);return brd},set:function(value){this._border=__assign({},value);delete this._border.radius;this._corners=(0,BorderControl_8.toRadiusValue)(value)},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"corners",{get:function(){return this._corners},set:function(value){this._corners=value},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"opacity",{get:function(){return this._opacity},set:function(value){this._opacity=value},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"keepAspectRatio",{get:function(){return this._keepAspectRatio},set:function(value){this._keepAspectRatio=value},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"imageLinkType",{get:function(){return this._imageLinkType},set:function(value){this._imageLinkType=value;BuilderEvent_11.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_11.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(Picture.prototype,"scaleFactors",{get:function(){return this._scaleFactors},set:function(value){this._scaleFactors=value},enumerable:!1,configurable:!0});Picture.prototype.getDataDefaults=function(){return jquery_82.default.extend(_super.prototype.getDataDefaults.call(this),{width:"100%",minWidth:1,minHeight:1,})};Picture.prototype.getIcon=function(){return'fa fa-picture-o'};Picture.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(this.name&&!useType)
return this.name;var maxLen=useType?200:20;var val=(typeof this._imageUrl==='string')?this._imageUrl:((this._imageUrl&&this._imageUrl.icon)?this._imageUrl.icon.replace(/^fa fa-(.+)$/,'$1'):'');if(val){val=val.replace(/^(?:|.*\/)([^\/]+)$/,'$1');if(val.length>maxLen)
val=val.substring(0,maxLen)+'...'}
return val?val:_super.prototype.getName.call(this,useType)};Picture.prototype.supportsAutoWidth=function(){return!0};Picture.prototype.supportsAutoHeight=function(){return!0};Picture.prototype.supportsAutoSizeFull=function(){return!1};Picture.prototype.supportsFullWidth=function(){return!0};Picture.prototype.modeClass=function(data){return new PictureMode(data)};Picture.prototype.updateContentSize=function(ui){_super.prototype.updateContentSize.call(this,ui);if(!this.imageW)
return;this.updateImageSize()};Picture.prototype.getUsedMediaGalleryItems=function(){var items=_super.prototype.getUsedMediaGalleryItems.call(this);if(typeof this._imageUrl==="string"&&this._imageUrl!==""&&this._imageUrl!=="none")
items.push(this._imageUrl);return items};Picture.prototype.buildClipboardData=function(){var _a,_b;var result=_super.prototype.buildClipboardData.call(this);if(typeof this._imageUrl==='string'){result['text/html']='<img'+' src="'+(0,TextUtil_6.escapeHtml)(wb_builder.makeLocalUrl(this._imageUrl))+'"'+' alt="'+(0,TextUtil_6.escapeHtmlChars)(__tr(this._imageAlt)||this._imageUrl)+'"/>'}else{result['text/html']='<span class="fa fa-'+((_a=this._imageUrl)===null||_a===void 0?void 0:_a.icon)+'">'+((_b=this._imageUrl)===null||_b===void 0?void 0:_b.icon)+'</span>'}
if(this._imageLinkType=='url'&&this._imageLink&&this._imageLink.type==="url"){var url=this._imageLink.url;if(typeof url!=='string')
url=__tr(url);result['text/html']='<a href="'+(0,TextUtil_6.escapeHtmlChars)(url)+'">'+result['text/html']+'</a>'}
return result};Picture.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.customLock=this.customLock;data.content={src:this._imageUrl,color:this.color,border:this._border,corners:this.corners,opacity:this.opacity,alt:this.imageAlt,link:this.imageLink,imageLinkType:this.imageLinkType,crop:this.crop?this.crop.serialize(this.image||undefined):((this.crop===!1)?null:undefined),scaleFactors:this.scaleFactors};return data};Picture.prototype.onResize=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
_super.prototype.onResize.call(this,onConstruct);this.updateImageSize();this.elem.trigger("elementresize",[this])};Picture.prototype.onLoaded=function(){return this.loadDeferred};Picture.prototype.updateStyle=function(initial,langCode){if(initial===void 0){initial=!1}
if(langCode===void 0){langCode=null}
_super.prototype.updateStyle.call(this,initial,langCode);this.updateImageSize()};Picture.prototype.setSrc=function(url,onChange,noAutoHeight,noCollab){if(onChange===void 0){onChange=null}
if(noAutoHeight===void 0){noAutoHeight=!1}
if(noCollab===void 0){noCollab=!1}
if(url){if(typeof url==="object"){this._imageUrl=jquery_82.default.extend({},url);this.loadImage(this._imageUrl,onChange,!0,noCollab);if(this._imageLinkType==="enlarge")
this.imageLinkType="url"}else{this._imageUrl=this.makeRelUrl(url);this.loadImage(this.makeLocalUrl(url),onChange,noAutoHeight,noCollab)}}else{this._imageUrl=null;this.loadImage(null,onChange,noAutoHeight,noCollab)}
this.verifyCropable()};Picture.prototype.getSrc=function(){return this._imageUrl?((typeof this._imageUrl==="string")?this.makeLocalUrl(this._imageUrl)+'?'+Date.now():jquery_82.default.extend({},this._imageUrl)):null};Picture.prototype.getRelSrc=function(){return this._imageUrl?((typeof this._imageUrl==="string")?this.makeRelUrl(this._imageUrl):jquery_82.default.extend({},this._imageUrl)):null};Picture.prototype.getColor=function(){return this.color};Picture.prototype.setColor=function(value){this.color=value;this.updateImageSize()};Picture.prototype.updateImageSize=function(){if(!this.imageW)
return;var autoWidth=(this.height!=="auto"&&this.width==="auto"&&!this.isBackgroundElement);var css;this.container.css({width:"auto",height:autoWidth?"100%":"auto"});css={position:"relative",width:(this.width==="auto"&&!this.isBackgroundElement)?"auto":"100%",height:autoWidth?"100%":"auto",};if(autoWidth){this.imgWrapper.css({width:"auto",height:"100%"})}else{this.imgWrapper.css({width:"",height:""})}
if(this._imageUrl&&typeof this._imageUrl==="object"&&"icon" in this._imageUrl){if(this.getLayoutConstraints()===CommonTypes_11.ChildrenLayoutType.Horizontal||this.getLayoutConstraints()===CommonTypes_11.ChildrenLayoutType.Absolute){this.container.css({height:"100%",})}
this.imgWrapper.css("overflow","visible");this.imgWrapper.css("display","flex");css.overflow="visible";css.color=this._color;css.width=autoWidth?"auto":"100%";css.height="100%"}
if(this._opacity||this._opacity===0){this.imgWrapper[0].style.opacity=''+(this._opacity/100)}
this.imageW.css(css);if(this._border&&this._border.css){this.imgWrapper.css(this._border.css)}
if(this._corners&&this._corners.css){this.imgWrapper.css(this._corners.css)}
if(!this.isElementPreview){if(this.updateCtrlBtnsPos){this.updateCtrlBtnsPos(this.getWidthInPixels(),this.getWidthInPixels())}
this.verifyCropable()}};Picture.prototype.getBorderWeight=function(){var weights={left:0,right:0,top:0,bottom:0};var src=this.getSrc();if((!src||typeof(src)==='string')&&this.border&&this.border.weight){if(typeof this.border.weight==='object'){if(this.border.differ){weights.top=(this.border.style[0]==='none')?0:this.border.weight[0];weights.right=(this.border.style[1]==='none')?0:this.border.weight[1];weights.bottom=(this.border.style[2]==='none')?0:this.border.weight[2];weights.left=(this.border.style[3]==='none')?0:this.border.weight[3]}else{weights.top=weights.right=weights.bottom=weights.left=(this.border.style[0]==='none')?0:this.border.weight[0]}}else{weights.top=weights.right=weights.bottom=weights.left=(this.border.style==='none')?0:this.border.weight}}
return weights};Picture.prototype.getBorderTotalWeight=function(){var weights=this.getBorderWeight();return{horizontal:weights.left+weights.right,vertical:weights.top+weights.bottom}};Picture.prototype.resetImageSize=function(onlyGetSize,keepCrop,keepSize){if(onlyGetSize===void 0){onlyGetSize=!1}
if(keepCrop===void 0){keepCrop=!1}
if(keepSize===void 0){keepSize=!1}
var size;if(this.isLocked){this.moveBtn.elem.tooltip('show');return null}
if(this.originalSize){var w=this.originalSize.width;var h=this.originalSize.height;if(keepCrop&&this.crop&&this.crop.width&&this.crop.height){var aspectRatio=this.crop.width/this.crop.height;if(w>=h)
h=Math.round(w/aspectRatio);else w=Math.round(h*aspectRatio)}
var minW=Math.min(w,240);var k=minW/w;var minH=Math.round(k*h);var maxW=Math.round((0,jquery_82.default)(window).width()/2);var maxH=Math.round((0,jquery_82.default)(window).height()/2);k=Math.min(maxW/w,maxH/h);maxW=Math.min(Math.max(minW,Math.round(k*w)),w);maxH=Math.min(Math.max(minH,Math.round(k*h)),h);size={width:w,height:h,minWidth:minW,minHeight:minH,maxWidth:maxW,maxHeight:maxH};if(typeof this.width==="number"&&typeof this.height==="number"){size.width=maxW;size.height=maxH}else{size.width="100%";size.height="auto"}
if(onlyGetSize)
return size;if(!keepSize){this.setSize(size.width,size.height);this.minWidth=size.minWidth||0;this.minHeight=size.minHeight||0;this.maxWidth=size.maxWidth||0;this.maxHeight=size.maxHeight||0;this.useMinWidth=!0;this.useMinHeight=!1;this.useMaxWidth=!0;this.useMaxHeight=!1;this.flexGrow=1;this.flexShrink=1}
if(!keepCrop){this.crop=!1;this.imgWrapper.empty();if(this.image){this.imageW=(0,jquery_82.default)(this.image);this.imgWrapper.append(this.imageW)}else{this.imageW=null}}
if(this.parent){if("updateSize" in this.parent)
this.parent.updateSize();else this.parent.updateStyle()}
this.updateImageSize()}else{size={width:"100%",height:"auto"}}
return size};Picture.prototype.canUseAsBackground=function(){return!0};Picture.prototype.updateComPropertiesInterface=function(){_super.prototype.updateComPropertiesInterface.call(this);if(!this.comDialog)
return;var src=this.comDialog.fields.imageUrl.getValue();if(src&&typeof src==="object"){this.comDialog.fields.linkTypeUrl.setValue(!0);this.comDialog.fields.linkTypeEnlarge.setVisible(!1);this.comDialog.fields.colorLabel.setVisible(!0);this.comDialog.fields.color.setVisible(!0)}else{this.comDialog.fields.linkTypeEnlarge.setVisible(!0);this.comDialog.fields.colorLabel.setVisible(!1);this.comDialog.fields.color.setVisible(!1)}};Picture.prototype.loadImage=function(src,onChange,noAutoHeight,initial){var _this=this;if(onChange===void 0){onChange=null}
if(noAutoHeight===void 0){noAutoHeight=!1}
if(initial===void 0){initial=!1}
var thisOnChange=onChange;if(this.image){if(this.image.parentNode){this.image.parentNode.removeChild(this.image)}
this.image=null;this.imageW=null}
var sourceChanged=(src!==this._lastSrc);if(src&&typeof src==="object"){var icon=(0,MediaLibrary_2.getFontIconProperty)(src);if(icon){Picture.createFontAwesomeIconSVG(icon,function(svg,icon){_this.imageW=svg;_this.originalSize={width:icon.width,height:icon.height};_this.imgWrapper.empty();_this.imgWrapper.append(_this.imageW);_this.image=_this.imageW.get(0);_this.updateImageSize();_this.displayEmptyMessage(!1);if(typeof thisOnChange==="function")
thisOnChange.call(_this);Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-loaded',_this);if(initial&&_this.loadDeferred)
_this.loadDeferred.resolve();})}else{if(initial&&this.loadDeferred)
this.loadDeferred.resolve();}}else{if(src)
this.setEmptyMessageText(__("loading..."));this.image=new Image();this.imageW=(0,jquery_82.default)(this.image);this.imageW.css({width:'100%',height:'auto'});this.image.onload=function(){_this.setEmptyMessageText(_this.myEmptyMessageText);if(!_this.image){if(initial&&_this.loadDeferred)
_this.loadDeferred.resolve();return}
_this.originalSize={width:_this.image.naturalWidth,height:_this.image.naturalHeight};if(!noAutoHeight){_this.maxWidth=_this.image.naturalWidth;_this.useMaxWidth=!0;_this.maxHeight=_this.image.naturalHeight;_this.useMaxHeight=!0}
if(!initial&&sourceChanged)
_this.crop=!1;if(_this.crop){_this.crop.update(_this.image);_this.crop.normalize();if(_this.crop.isCoveringAll())
_this.crop=!1;else _this.imageW=(0,jquery_82.default)(CropTool_2.CropTool.renderCanvas(_this.image,_this.crop))}
_this.imgWrapper.empty();if(_this.imageW){_this.imgWrapper.append(_this.imageW);_this.imageW.css("display","block")}
_this.updateImageSize();_this.displayEmptyMessage(!1);if(initial&&_this.loadDeferred)
_this.loadDeferred.resolve();if(typeof thisOnChange==="function")
thisOnChange.call(_this);if(!initial&&_this._lastSrc)(0,Collaboration_3.resizeElement)(_this);Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-loaded',_this)};this.image.onerror=function(){if(initial&&_this.loadDeferred)
_this.loadDeferred.fail();_this.setEmptyMessageText(_this.myEmptyMessageText);_this.displayEmptyMessage(!0);_this._imageUrl="";Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-loaded',_this)};this.image.src=src?src:"";this.imageW.css("visibility",src?"visible":"hidden");this._lastSrc=src}
if(this.imageW&&(this.opacity||this.opacity===0)){this.imgWrapper.css('opacity',this.opacity/100)}};Picture.prototype.changePicture=function(onChange,noAutoHeight){var _this=this;if(noAutoHeight===void 0){noAutoHeight=!1}
if(this.isLocked){this.moveBtn.elem.tooltip('show');return}
var thisOnChange=onChange;var thisSelf=this;Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-start',this);this.dialog=Service_25.Service.mediaLibrary.open(__("Change picture"),!1,'image',!0,!0);this.dialog.addButton(__("Delete"),function(){if(!_this.dialog)
return;var list=_this.dialog.getSelectedFiles();if(!list.length)
return;if(confirm(list.length==1?__("Remove this file?"):__("Remove these files?"))){var data=_this.dialog.getCheckRemoveData(list);_this.dialog.confirmRemove(data,function(removeFiles){if(_this.dialog===null||!removeFiles.length){return}
jquery_82.default.post(BuilderConfig_18.wbConfig.getLnUrl("upload_remove"),JSON.stringify({filenames:removeFiles}));_this.dialog.removeFilesThumbs(removeFiles);_this.dialog.updateFilesExist();_this.dialog.invalidate()})}},!1,'btn-danger').hide();this.dialog.addButton(__("Cancel"));this.dialog.addButton(__("Select"),function(){var _a,_b;if(!_this.dialog)
return;var list=_this.dialog.getSelectedFiles();_this.system.setPageModified(!0);(_a=_this.getProperty("imageUrl"))===null||_a===void 0?void 0:_a.triggerBeforeChange(_this);_this.setSrc(((list.length>0)?list[0]:null),thisOnChange,noAutoHeight);(_b=_this.getProperty("imageUrl"))===null||_b===void 0?void 0:_b.triggerChange(_this);(0,Collaboration_3.updateElementProperties)(_this,{imageUrl:_this.imageUrl});_this.dialog.hide()},!0).hide();this.dialog.onClose=function(){var _a;var list=(_a=thisSelf.dialog)===null||_a===void 0?void 0:_a.getSelectedFiles();if(_this.image===null){_this.remove({noHistory:!0})}
Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-end',_this)};var url=this.getRelSrc();if(url){this.dialog.setSelectedFiles([url])}else{this.dialog.clearFileSelection()}
this.dialog.setVisible(!0)};Picture.createFontAwesomeIconSVG=function(icon,callback){if(!(icon===null||icon===void 0?void 0:icon.character)){return}
var char="&#x"+icon.character+";";var createSVG=function(icon){var html='<svg width="'+icon.width+'" height="'+icon.height+'" viewBox="0 0 '+icon.width+' '+icon.height+'" style="direction: ltr;" xmlns="http://www.w3.org/2000/svg">';html+='<text x="'+icon.xOffset+'" y="'+icon.baseLine+'" font-size="'+icon.fontSize+'" fill="currentColor" style="font-family: &quot;'+(icon.family||'').replace('"','\\&quot;')+'&quot;;">'+char+'</text>';html+='</svg>';callback((0,jquery_82.default)(html),icon)};Service_25.Service.mediaLibrary.updateFontAwesomeIconInfo(icon,createSVG)};Picture.prototype.comProperties=function(uiDef){var _this=this;var isCustom=(this._imageUrl&&typeof this._imageUrl==="object");var fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:350},tabs:[{name:__('General'),children:[{type:'HorizontalLayout',columnWeights:[5,7],children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Picture')},{type:'ImageSelector',id:'imageUrl',thumbSize:140,fontAwesomeTab:!0,select:this.updateComPropertiesInterface.bind(this)},{type:'Label',id:'colorLabel',text:__('Color'),css:{marginTop:15}},{type:ColorPicker_14.ColorPicker,id:'color',label:__('Color'),noTransparent:!1}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Alternative Text'),helpText:__('Information for an image if a user for some reason cannot view it')},{type:'MultilangTextField',id:'alt',onChange:function(){Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-alt-change',_this)}},{type:'RadioBox',id:'linkTypeUrl',css:{marginTop:15},label:__('Link to another place'),group:'link_type',value:!0},{type:'LinkSelector',id:'urlLink',multilang:!0,css:{marginLeft:'20px'},change:function(){Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-urlLink-change',_this)},click:function(){fields.linkTypeUrl.setValue(!0)}},{type:'RadioBox',id:'linkTypeEnlarge',label:__('Enlarge picture on click'),group:'link_type',css:{marginTop:'10px'},change:function(){Service_25.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-linkTypeEnlarge-change',_this)}}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Opacity (%)')},{type:'SliderControl',id:'opacity',width:120}]},{type:'FlowLayout',css:{marginTop:15},spacing:40,children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Border')},{type:BorderControl_8.BorderControl,id:'border'}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Rounded corners')},{type:RoundCornersControl_2.RoundCornersControl,id:'corners'}]}]}],init:function(fields){var aspectDiv=(0,jquery_82.default)('<div class="aspect-div"></div>');var aspectBox=(0,jquery_82.default)('<div class="aspect-box ico-aspect-ratio"></div>').attr('title',__('Keep aspect ratio'));var updateAspectBox=function(){if(_this.keepAspectRatio){aspectBox.addClass('ico-aspect-ratio');aspectBox.removeClass('ico-aspect-ratio-off')}else{aspectBox.removeClass('ico-aspect-ratio');aspectBox.addClass('ico-aspect-ratio-off')}};aspectBox.on('click',function(){_this.keepAspectRatio=!_this.keepAspectRatio;updateAspectBox()});updateAspectBox();aspectDiv.append(aspectBox);fields.sizeW.getElem().parent().css('position','relative').append(aspectDiv);var aspectInputTrigger=function(w){var size=w?fields.sizeW.getValue():fields.sizeH.getValue();if(_this.keepAspectRatio&&typeof _this.width==="number"&&typeof _this.height==="number"&&typeof size==="number"){var r=(_this.width/_this.height),val=size;if(w){fields.sizeH.setValue(Math.round(val/r))}else{fields.sizeW.setValue(Math.round(val*r))}}};fields.sizeW.on('change',function(){aspectInputTrigger(!0)});fields.sizeH.on('change',function(){aspectInputTrigger(!1)});var resetBtn=new UIButton_11.UIButton(__('Reset size'),UIButton_11.UIButton.STYLE_DEFAULT,'glyphicon glyphicon-fullscreen');resetBtn.addClass('btn-xs');resetBtn.on('click',function(){var size=_this.resetImageSize(!0);if(size&&size.width&&size.height){fields.sizeW.setValue(size.width);fields.sizeH.setValue(size.height);if(size.minWidth){fields.minWidth.setValue(size.minWidth);fields.useMinWidth.setValue(!0)}
if(size.minHeight){fields.minHeight.setValue(size.minHeight);fields.useMinHeight.setValue(!0)}
if(size.maxWidth){fields.maxWidth.setValue(size.maxWidth);fields.useMaxWidth.setValue(!0)}
if(size.maxHeight){fields.maxHeight.setValue(size.maxHeight);fields.useMaxHeight.setValue(!0)}
fields.wasReset=!0}});fields.sizeBlock.addChild(resetBtn);fields.sizeBlock.applyLayoutCellCss(3,(wb_builder.rtl?{textAlign:'left',paddingLeft:'38px',marginTop:4}:{textAlign:'right',paddingRight:'38px',marginTop:4}))},callbackFunc:function(fields){_this.imageAlt=fields.alt.getValue();_this.imageLink=fields.urlLink.getValue();_this.imageLinkType=fields.linkTypeUrl.getValue()?'url':'enlarge';if(fields.wasReset)
_this.resetImageSize();_this.color=fields.color.getValue();_this._border=fields.border.getValue();_this.corners=fields.corners.getValue();_this.opacity=fields.opacity.getValue();_this.setSrc(fields.imageUrl.getValue(),null,!0);_this.updateStyle()}});fields.wasReset=!1;fields.oldSize=this.getSize();fields.imageUrl.setValue(this._imageUrl);fields.alt.setValue(this.imageAlt);fields.urlLink.setValue(this.imageLink);fields.linkTypeUrl.setValue((this.imageLinkType==='url'));fields.linkTypeEnlarge.setValue((this.imageLinkType==='enlarge'));fields.color.setValue(this.getColor());fields.border.setValue(this._border);fields.corners.setValue(this.corners);fields.opacity.setValue(this.opacity);this.updateComPropertiesInterface();return fields};Picture.prototype.initContextMenu=function(){var _this=this;if(this.customLock)
return;_super.prototype.initContextMenu.call(this);if(!this.menu)
return;var idx=this.contextMenuFirstIndex;if(this.isResizable){this.menu.insertItemAt(idx++,'resetSize',__("Reset to original size"),function(){_this.system.setPageModified(!0);_this.resetImageSize();_this.updateStyle();(0,Collaboration_3.updateElementProperties)(_this,{width:_this.width,height:_this.height,crop:_this.crop})},!1,!1,null,"glyphicon glyphicon-fullscreen")}
this.menu.insertItemAt(idx++,'crop',__("Crop"),function(){return _this.runCrop()},!1,!1,null,"fa fa-crop",!1);this.menu.addSeparator(idx);this.menu.insertItemAt(idx++,'rotate',__("Rotate"),function(){return _this.runRotate()},!1,!1,null,"fa fa-rotate-right",!1);this.menu.addSeparator(idx)};Picture.prototype.updateContextMenu=function(isSidebar){if(isSidebar===void 0){isSidebar=!1}
_super.prototype.updateContextMenu.call(this,isSidebar);if(this.menu){var hasImageUrl=typeof this._imageUrl==="string"&&this._imageUrl!==""&&this._imageUrl!=="none";this.menu.setVisible("crop",hasImageUrl);this.menu.setVisible("rotate",hasImageUrl)}};Picture.prototype.verifyCropable=function(){var isActive=(this.image&&this.imageW&&this._imageUrl&&(typeof this._imageUrl!=='object'))?!0:!1;this.cropBtn.setActive(isActive);this.rotateBtn.setActive(isActive);if(this.cropBtn.isActive()&&!this.cropBtn.isVisible()&&this.controls.isButtonsVisible()){this.cropBtn.setVisible(!0);this.rotateBtn.setVisible(!0)}};Picture.prototype.runCrop=function(){var _this=this;if(!this.imageW||!this.image||!("naturalWidth" in this.image)){return}
var tool=new CropTool_2.CropTool();this.setSelected(!1);this.imageW.css("visibility","hidden");tool.beginCrop(this.elem,this.image,this.crop||null,this.getBorderWeight(),function(cropRect){var oldRect=_this.crop||null;_this.applyCrop(cropRect);wb_builder.historyAdd('pictureCropped',{element:_this.id,oldCropRect:oldRect,newCropRect:cropRect,},function(data){var element=window.getElementById(data.element);element.applyCrop(data.oldCropRect)},function(data){var element=window.getElementById(data.element);element.applyCrop(data.newCropRect)})},function(){_this.setSelected(!0);if(_this.imageW)
_this.imageW.css("visibility","");})};Picture.prototype.runRotate=function(){var _this=this;this.sidebar=(0,jquery_82.default)('.wb-sidebar .wb-properties-panel').parent()[0];var sidebarScroll=this.sidebar.scrollTop;var imgParent=this.imgWrapper.parent().parent();this.setSelected(!1);var loader=(0,jquery_82.default)('<div class="img-wrapper"><div class="ico-spin icon-wb-spinner"></div></div>');var spin=loader.find('.ico-spin');imgParent.append(loader);var top=Math.round(spin.position().top-spin.height()/2);spin.css('top',top+'px');var url=BuilderConfig_18.wbConfig.getLnUrl('image-rotate');var data={src:this.getSrc()};jquery_82.default.post(url,JSON.stringify(data)).done(function(response){_this.updateSrc(sidebarScroll)}).always(function(){loader.remove()})};Picture.prototype.updateSrc=function(sidebarScroll){var _a;if(sidebarScroll===void 0){sidebarScroll=0}(_a=this.sidebar)===null||_a===void 0?void 0:_a.scrollTo(0,sidebarScroll);var src=this.getSrc();if(typeof src==='string'){if(this.crop){var new_imgWidth=this.crop.imgHeight;var new_imgHeight=this.crop.imgWidth;var new_x=this.crop.imgHeight-this.crop.y-this.crop.height;var new_y=this.crop.x;var new_width=this.crop.height;var new_height=this.crop.width;this.crop.imgHeight=new_imgHeight;this.crop.imgWidth=new_imgWidth;this.crop.x=new_x;this.crop.y=new_y;this.crop.width=new_width;this.crop.height=new_height}
this.loadImage(src,null,!0,!0);(0,jquery_82.default)('div[data-property-type="image/image"] .wb-ctrl-preview').css('background-image','url("'+src+'")')}};Picture.prototype.applyCrop=function(cropRect,noSelect){if(noSelect===void 0){noSelect=!1}
if(!this.image||this.image.tagName.toUpperCase()==="SVG")
return;if(!cropRect||cropRect.isCoveringAll()){this.crop=!1;this.imageW=(0,jquery_82.default)(this.image)}else{this.crop=cropRect;this.imageW=(0,jquery_82.default)(CropTool_2.CropTool.renderCanvas(this.image,cropRect))}
this.imageW.css("visibility","");this.imgWrapper.empty();this.imgWrapper.append(this.imageW);if(!noSelect)
this.setSelected(!0);this.updateImageSize();(0,Collaboration_3.updateElementProperties)(this,{crop:this.crop})};Picture.prototype.onBeforeRemove=function(options){if(this.customLock&&!options.batch){options.preventRemoval=!0;return}
_super.prototype.onBeforeRemove.call(this,options)};Picture.prototype.setHiddenInMode=function(mode,hidden){if(this.customLock)
return;_super.prototype.setHiddenInMode.call(this,mode,hidden)};Picture.prototype.getSiteTreeNodeProperties=function(){var props=_super.prototype.getSiteTreeNodeProperties.call(this);props.hasLink=this._imageLinkType==="url"&&URLControl_3.default.isActiveLinkValue(this._imageLink);return props};Picture.prototype.getCurrentModeScaleFactor=function(){return this._scaleFactors?this._scaleFactors[Service_25.Service.modeManager.getMode()]/100:1};Picture.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"opacity",type:PropertyType_4.PropertyType.ImageOpacity,uiComponentOptions:function(){return{enabled:!this.customLock}}});this.registerProperty({name:"border",type:PropertyType_4.PropertyType.ImageBorder});this.registerProperty({name:"imageUrl",type:PropertyType_4.PropertyType.Image,uiComponentOptions:function(){return{enabled:!this.customLock}}});this.registerProperty({name:"color",type:PropertyType_4.PropertyType.IconColor,dependencies:["imageUrl"],uiComponentOptions:function(){return{visible:this._imageUrl&&typeof this._imageUrl==="object"}}});this.registerProperty({name:"imageAlt",type:PropertyType_4.PropertyType.ImageAlt,uiComponentOptions:function(){return{enabled:!this.customLock}}});this.registerProperty({name:"imageLinkType",type:PropertyType_4.PropertyType.OnClickAction,dependencies:["imageUrl"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement,enabled:!this.customLock,options:[{value:"enlarge",label:__("Enlarge picture on click"),disabled:this._imageUrl&&typeof this._imageUrl==="object"},{value:"url",label:__("URL"),helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):""},]}}});this.registerProperty({name:"imageLink",type:PropertyType_4.PropertyType.OnClickLink,dependencies:["imageLinkType"],uiComponentOptions:function(){return{enabled:!this.customLock,visible:!this.isBackgroundElement&&this._imageLinkType==="url"}}});this.registerProperty({name:"individualShadow",type:PropertyType_4.PropertyType.IndividualShadowPicture,onChange:function(property,owner){if(!owner.elem||!owner.controls||!owner.elem.data("resizableExt"))
return;owner.updateStyle()},dependencies:["imageUrl"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement,forText:(this.imageUrl!==null&&typeof this.imageUrl==='object'),}}});this.registerProperty({name:"scaleFactors",type:PropertyType_4.PropertyType.SpacingModeScaleFactors,onChange:function(property,owner){owner.controls.updateMargin(owner.getActualMargins());owner.controls.updatePadding(owner.getActualPadding())},uiComponentOptions:function(){return{visible:!this.isBackgroundElement,enabled:!this.customLock,}}})};Picture.prototype.getContainerForShadow=function(){if(this.imgWrapper){return(0,jquery_82.default)(this.imgWrapper)}
return _super.prototype.getContainerForShadow.call(this)};Picture.pluginName='Picture';return Picture}(Element_7.Element));ElementRegister_7.ElementRegister.registerClass("Picture",Picture);var PictureMode=(function(_super){__extends(PictureMode,_super);function PictureMode(){return _super!==null&&_super.apply(this,arguments)||this}
PictureMode.prototype.deserialize=function(data){_super.prototype.deserialize.call(this,data);this.crop=data.crop?__assign({},data.crop):((data.crop===null)?null:undefined)};PictureMode.prototype.serialize=function(){var result=_super.prototype.serialize.call(this);result.crop=this.crop?__assign({},this.crop):((this.crop===null)?null:undefined);return result};PictureMode.prototype.setMissing=function(elem){var _a;_super.prototype.setMissing.call(this,elem);if(this.isElemAbsolute(elem)){if(this.crop===undefined)
this.crop=(elem.crop===!1)?null:(_a=elem.crop)===null||_a===void 0?void 0:_a.serialize();}};PictureMode.prototype.applyFrom=function(elem){var _a;_super.prototype.applyFrom.call(this,elem);var abs=this.isElemAbsolute(elem);this.crop=abs?((elem.crop===!1)?null:(_a=elem.crop)===null||_a===void 0?void 0:_a.serialize()):undefined};PictureMode.prototype.applyTo=function(elem,defaultsMode){_super.prototype.applyTo.call(this,elem,defaultsMode);if(this.isElemAbsolute(elem)){var val=(this.crop===null)?null:(this.crop||defaultsMode.crop||null);elem.applyCrop(val?new CropTool_2.CropRectangle(val):null,!0)}};return PictureMode}(Element_7.Mode))});define("js/HelpSystem/Scenario",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Scenario=exports.ScenarioStep=exports.ForceBounds=exports.BoundableElement=exports.applyBounds=void 0;function applyBounds(subject,forceBounds){if(!forceBounds||typeof forceBounds!=='object')
return;if('width' in forceBounds){subject.setSize(forceBounds.width,null);if(subject.getClassType()=='Picture'){var picSubject=subject;if(picSubject.crop)
picSubject.crop.width=forceBounds.width}}
if('height' in forceBounds){subject.setSize(null,forceBounds.height);if(subject.getClassType()=='Picture'){var picSubject=subject;if(picSubject.crop)
picSubject.crop.height=forceBounds.height}}
if('individualMargin' in forceBounds&&forceBounds.individualMargin){subject.individualMargin=forceBounds.individualMargin}
if('minWidth' in forceBounds&&typeof forceBounds.minWidth==='number'){subject.minWidth=forceBounds.minWidth}
if('maxWidth' in forceBounds&&typeof forceBounds.maxWidth==='number'){subject.maxWidth=forceBounds.maxWidth}
if('minHeight' in forceBounds&&typeof forceBounds.minHeight==='number'){subject.minHeight=forceBounds.minHeight}
if('maxHeight' in forceBounds&&typeof forceBounds.maxHeight==='number'){subject.maxHeight=forceBounds.maxHeight}
if('useMinWidth' in forceBounds&&typeof forceBounds.useMinWidth==='number'){subject.useMinWidth=forceBounds.useMinWidth}
if('useMaxWidth' in forceBounds&&typeof forceBounds.useMaxWidth==='number'){subject.useMaxWidth=forceBounds.useMaxWidth}
if('useMinHeight' in forceBounds&&typeof forceBounds.useMinHeight==='number'){subject.useMinHeight=forceBounds.useMinHeight}
if('useMaxHeight' in forceBounds&&typeof forceBounds.useMaxHeight==='number'){subject.useMaxHeight=forceBounds.useMaxHeight}
if('left' in forceBounds){var left=0;if(typeof forceBounds.left==='string'){var parent_20=subject.getParent();var pWidth=parent_20?parent_20.getWidthInPixels():0;var width=forceBounds.refWidth?forceBounds.refWidth:subject.getWidthInPixels();if(forceBounds.left==='left'){left=0}else if(forceBounds.left==='right'){left=pWidth-width}else if(forceBounds.left==='center'||forceBounds.left==='middle'){left=(pWidth-width)/2}}else{left=forceBounds.left}
subject.setLocation(left,null)}
if('top' in forceBounds){var top_1=0;if(typeof forceBounds.top==='string'){var parent_21=subject.getParent();var pHeight=parent_21?parent_21.getHeightInPixels():0;if(forceBounds.top==='top'){top_1=0}else if(forceBounds.top==='bottom'){top_1=pHeight-subject.getHeightInPixels()}else if(forceBounds.top==='middle'||forceBounds.top==='center'){top_1=(pHeight-subject.getHeightInPixels())/2}}else{top_1=forceBounds.top}
subject.setLocation(null,top_1)}
subject.onResize()}
exports.applyBounds=applyBounds;var BoundableElement=(function(){function BoundableElement(type,parent,position,toPageRelative){if(position===void 0){position=null}
if(toPageRelative===void 0){toPageRelative=!1}
this.type=type;this.parent=parent;this.left=0;this.top=0;this.width=0;this.height=0;this.individualMargin=null;this.minWidth=0;this.maxWidth=1200;this.minHeight=0;this.maxHeight=600;this.useMinWidth=!1;this.useMaxWidth=!1;this.useMinHeight=!1;this.useMaxHeight=!1;if(position){if(typeof position.left==='number')
this.left=position.left;if(typeof position.top==='number')
this.top=position.top}
if(toPageRelative)
this.makePageRelative();}
BoundableElement.prototype.getClassType=function(){return this.type};BoundableElement.prototype.setSize=function(width,height){if(width===void 0){width=null}
if(height===void 0){height=null}
if(width!==null)
this.width=width;if(height!==null)
this.height=height};BoundableElement.prototype.setLocation=function(left,top){if(left===void 0){left=null}
if(top===void 0){top=null}
if(left!==null)
this.left=left;if(top!==null)
this.top=top};BoundableElement.prototype.onResize=function(){};BoundableElement.prototype.getWidth=function(){return this.width};BoundableElement.prototype.getHeight=function(){return this.height};BoundableElement.prototype.getParent=function(){return this.parent};BoundableElement.prototype.getWidthInPixels=function(){return this.width};BoundableElement.prototype.getHeightInPixels=function(){return this.height};BoundableElement.prototype.makePageRelative=function(){var off=this.getParent().container.offset();this.left+=off.left;this.top+=off.top};return BoundableElement}());exports.BoundableElement=BoundableElement;var ForceBounds=(function(){function ForceBounds(){}
return ForceBounds}());exports.ForceBounds=ForceBounds;var ScenarioStep=(function(){function ScenarioStep(){}
return ScenarioStep}());exports.ScenarioStep=ScenarioStep;var Scenario=(function(){function Scenario(){}
return Scenario}());exports.Scenario=Scenario});define("js/HelpSystem/Tooltip",["require","exports","jquery"],function(require,exports,jquery_83){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Tooltip=exports.ScenarioStepSubject=void 0;var ScenarioStepSubject=(function(){function ScenarioStepSubject(elem,tipPlacement,topOffset,leftOffset,absolute,absoluteScroll){if(tipPlacement===void 0){tipPlacement=null}
if(topOffset===void 0){topOffset=0}
if(leftOffset===void 0){leftOffset=0}
if(absolute===void 0){absolute=!1}
if(absoluteScroll===void 0){absoluteScroll=!1}
this.elem=elem;this.tipPlacement=tipPlacement;this.topOffset=topOffset;this.leftOffset=leftOffset;this.absolute=absolute;this.absoluteScroll=absoluteScroll;var elemType=elem?(''+elem[0].tagName).toLowerCase():'';if(elemType==='input'||elemType==='textarea'||elemType==='select'||elemType==='button'||elemType==='table'){this.absolute=!0;this.absoluteScroll=!0}}
ScenarioStepSubject.prototype.calcSize=function(){return ScenarioStepSubject.calcActualSize(this)};ScenarioStepSubject.calcActualSize=function(element){var elem=(element instanceof ScenarioStepSubject)?element.elem:element;var width=elem.outerWidth(!0);var height=elem.outerHeight(!0);var chlist,cWidth=0;if(elem.hasClass('wb-vertical-layout')){chlist=elem.children('.wb-horiz-lay-item');cWidth=0;for(var i=0,c=chlist.length;i<c;i++){var w=ScenarioStepSubject.calcActualSize(chlist.eq(i)).width;if(w>0&&(cWidth==0||w<cWidth))
cWidth=w}}else if((chlist=elem.children('.wb-horiz-lay-item')).length>0){cWidth=0;for(var i=0,c=chlist.length;i<c;i++){cWidth+=ScenarioStepSubject.calcActualSize(chlist.eq(i)).width}}else if((chlist=elem.eq(0).children(':not(.wb-hlp-ttip)')).length===1){var el=chlist.first();if(el.hasClass('wb-vertical-layout'))
return ScenarioStepSubject.calcActualSize(el);cWidth=el.outerWidth(!0)}
if(cWidth>0&&cWidth<width)
width=cWidth;return{width:width,height:height}};return ScenarioStepSubject}());exports.ScenarioStepSubject=ScenarioStepSubject;var Tooltip=(function(){function Tooltip(step,subject,onClose){if(onClose===void 0){onClose=null}
this.title=step.title;this.text=step.text;this.el=(0,jquery_83.default)('<div class="wb-hlp-ttip"><div class="wb-hlp-ttip-tip"><div></div></div></div>');var o=subject.elem.offset();var align=step.placement?step.placement:(subject.tipPlacement?subject.tipPlacement:'');if(align)
this.el.addClass('wb-hlp-ttip-'+align);this.el.css({whiteSpace:'normal',textTransform:'none',opacity:0.9,position:(subject.absolute?'fixed':'absolute')});if(typeof onClose==='function'){this.el.append((0,jquery_83.default)('<div class="close">&times;</div>').on('click',onClose))}
if(step.title)
this.el.append((0,jquery_83.default)('<div class="wb-hlp-ttip-title">'+step.title+'</div>').css({whiteSpace:'nowrap'}));if(step.text)
this.el.append(this.formatText(step.text));var vOffset=0;if(!step.text&&(align==='left'||align==='right')){this.el.find('.wb-hlp-ttip-tip').css({top:'93%'});vOffset=0}else{this.el.find('.wb-hlp-ttip-tip').css({top:''});vOffset=20}
if(subject.absolute){(0,jquery_83.default)(document.body).append(this.el)}else{subject.elem.append(this.el);if(subject.elem.is('li')){subject.elem.css({position:'relative'})}
var elRaw_1=subject.elem[0];if((elRaw_1.className+'').indexOf('wb_move_btn')>=0||(elRaw_1.className+'').indexOf('wb_edit_btn')>=0){elRaw_1=elRaw_1.parentNode}
if(('scrollIntoView' in elRaw_1)&&typeof elRaw_1.scrollIntoView==='function'){if(!step.subject||!step.subject.match(/^(toolbar-plugin-|item-plugin-[^-]+-prop-)/)){setTimeout(function(){try{elRaw_1.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}catch(err){try{elRaw_1.scrollIntoView({block:"center",inline:"center",})}catch(err){elRaw_1.scrollIntoView(!1)}}},40)}}}
var px=subject.absolute?(o.left-(subject.absoluteScroll?(0,jquery_83.default)(document).scrollLeft():0)):0;var py=subject.absolute?(o.top-(subject.absoluteScroll?(0,jquery_83.default)(document).scrollTop():0)):0;var sSize=subject.calcSize();if(align==='left'){o.top=py+sSize.height/2-this.el.outerHeight(!0)/2+vOffset;o.left=px-this.el.outerWidth(!0)+subject.leftOffset}else if(align==='right'){o.top=py+sSize.height/2-this.el.outerHeight(!0)/2+vOffset;o.left=px+sSize.width+7+subject.leftOffset}else if(align==='top'){o.top=py-this.el.outerHeight(!0)+subject.topOffset;o.left=px+((sSize.width-this.el.outerWidth(!0))/2)}else{o.top=py+sSize.height+subject.topOffset;o.left=px+((sSize.width-this.el.outerWidth(!0))/2)}
this.el.css({left:o.left,top:o.top})}
Tooltip.prototype.formatText=function(text){var fText=text.replace(/\*([^\*]+)\*/g,"<b>$1</b>");return fText};return Tooltip}());exports.Tooltip=Tooltip});define("js/PluginApi/UIManager",["require","exports","js/Service"],function(require,exports,Service_26){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.getManager=exports.getApiInstance=exports.init=exports.registerUI=exports.UIManager=void 0;var UIManager=(function(){function UIManager(builder){}
UIManager.prototype.getSubBar=function(){return null};UIManager.prototype.getControlToolbar=function(){return null};UIManager.prototype.getToolbarHeight=function(){return 0};UIManager.prototype.getWidgetToolbar=function(){return null};UIManager.prototype.lookupUIElement=function(type,id){return null};UIManager.prototype.lookupUIIconClass=function(type,elementId){return null};UIManager.prototype.closeAll=function(){};return UIManager}());exports.UIManager=UIManager;var uiManagers={};var uiManager=null;var builderApi=null;function registerUI(id,ctor){uiManagers[id]=ctor}
exports.registerUI=registerUI;function init(api,initUiPluginId){var uiManagerCls;if(typeof initUiPluginId==="string"&&uiManagers.hasOwnProperty(initUiPluginId)){uiManagerCls=uiManagers[initUiPluginId]}else{var firstManagerId=Object.keys(uiManagers).shift();if(!firstManagerId)
throw new Error('No UI manager');uiManagerCls=uiManagers[firstManagerId]}
builderApi=api;uiManager=new uiManagerCls(api)}
exports.init=init;function getApiInstance(){if(!builderApi)
throw new Error('You can only use this after initialization');return builderApi}
exports.getApiInstance=getApiInstance;function getManager(){if(!uiManager)
throw new Error('You can only use this after initialization');return uiManager}
exports.getManager=getManager;Service_26.Service.uiManager={getApiInstance:getApiInstance,getManager:getManager}});define("js/HelpSystem/HelpOverlay",["require","exports","js/Service","js/UserInput","Dialog","WidgetToolbar","js/HelpSystem/AnimTween","js/HelpSystem/HelpOverlayTemplatesPanel","js/UIComponent","js/BuilderEvent","js/DefaultUI/PluginToolbar","jquery"],function(require,exports,Service_27,UserInput_3,Dialog_7,WidgetToolbar_2,AnimTween_1,HelpOverlayTemplatesPanel_1,UIComponent_63,BuilderEvent_12,PluginToolbar_1,jquery_84){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.handlePageLoad=exports.init=exports.isHelpAvailable=exports.openHelp=exports.HelpOverlay=void 0;var helpDlg,helpOverlay,availableScenarioIdx={};var helpUrl=!1;var builder=null;var wbConfig=null;var HelpOverlaySection=(function(){function HelpOverlaySection(boundsFunc,element,isFixed,isGroup,isEnabled){var _a;if(isFixed===void 0){isFixed=!1}
if(isGroup===void 0){isGroup=!1}
if(isEnabled===void 0){isEnabled=!0}
this.boundsFunc=boundsFunc;this.element=element;this.isFixed=isFixed;this.isGroup=isGroup;this.isEnabled=isEnabled;this.isGroupOpen=!1;this.groupItems=[];this.bounds=this.boundsFunc(this.element);if('getClassType' in this.element){this.scenarioId=this.element.getClassType()}else{_a=this.element.getId().split('__'),this.scenarioId=_a[1]}}
HelpOverlaySection.prototype.toggleGroup=function(){if(!this.isGroup)
return;this.isGroupOpen=!this.isGroupOpen;this.element.setOpen(this.isGroupOpen);for(var _i=0,_a=this.groupItems;_i<_a.length;_i++){var itm=_a[_i];itm.isEnabled=this.isGroupOpen;if(itm.isEnabled)
itm.bounds=itm.boundsFunc(itm.element);}};HelpOverlaySection.prototype.addGroupItem=function(item){if(!this.isGroup)
return;this.groupItems.push(item)};HelpOverlaySection.prototype.hitTest=function(x,y,sx,sy){if(!this.isEnabled)
return!1;var dx=(this.isFixed?sx:x);var dy=(this.isFixed?sy:y);return(dx>=this.bounds.left&&dx<=(this.bounds.left+this.bounds.width)&&dy>=this.bounds.top&&dy<=(this.bounds.top+this.bounds.height))};return HelpOverlaySection}());var HelpOverlay=(function(_super){__extends(HelpOverlay,_super);function HelpOverlay(wbConfig){var _this=_super.call(this)||this;_this.wbConfig=wbConfig;_this.isClosable=!0;_this.sections=[];_this.selectedSection=null;_this.widgetToolbar=null;_this._isVisible=!1;_this._elem.addClass('wb-hlp-overlay').append(_this.buildInfoFeature().append((_this.tplBlock=new HelpOverlayTemplatesPanel_1.HelpOverlayTemplatesPanel(_this)).setVisible(!1).getElem())).on('mousemove',function(e){return _this.onMouseMove(e)});_this.marker=(0,jquery_84.default)('<div>').addClass('wb-hlp-overlay-marker').on('click',function(){return _this.onSectionClick()});_this._elem.append(_this.marker);_this.closeBtn=(0,jquery_84.default)('<div>').addClass('wb-hlp-overlay-close').html('&times;').on('click',function(){return closeHelpOverlay()});_this._elem.append(_this.closeBtn);(0,jquery_84.default)(document.body).append(_this._elem);return _this}
HelpOverlay.prototype.setClosable=function(closable){this.isClosable=closable;if(closable){this.closeBtn.show()}else{this.closeBtn.hide()}};HelpOverlay.prototype.buildInfoFeature=function(){var elem=(0,jquery_84.default)('<div>').addClass('wb-hlp-overlay-info');var wrp=(0,jquery_84.default)('<div>').addClass('wb-info-wrp').appendTo(elem);wrp.html('<br/>'+__("Click on element to start interactive help or press 'ESC' to close.")+'<br/>');(0,jquery_84.default)('<img>').addClass('wb-arrow-a').attr({src:'modules/builder/img/arrow.svg',alt:''}).prependTo(wrp);(0,jquery_84.default)('<img>').addClass('wb-arrow-b').attr({src:'modules/builder/img/arrow.svg',alt:''}).appendTo(wrp);return elem};HelpOverlay.prototype.buildBigLink=function(elem,name,icon,scenarioId){var _this=this;return(0,jquery_84.default)('<div>').css({fontSize:'24px',marginTop:'30px',cursor:'pointer'}).append((0,jquery_84.default)('<span>').addClass(icon).css({display:'inline-block',verticalAlign:'middle',marginRight:'10px',fontSize:'1.5em'})).append((0,jquery_84.default)('<span>').css({display:'inline-block',verticalAlign:'middle',textDecoration:'underline'}).text(name)).on('click',function(){setTimeout(function(){_this.setVisible(!1,!0)},100);Service_27.Service.HelpSystemPlayer.loadRemote(scenarioId,!1,function(){_this.setVisible(!0)})}).appendTo(elem)};HelpOverlay.prototype.onSectionClick=function(){var _this=this;if(!this.selectedSection)
return;if(this.selectedSection.isGroup){for(var _i=0,_a=this.sections;_i<_a.length;_i++){var sec=_a[_i];if(sec===this.selectedSection)
continue;if(sec.isGroup&&sec.isGroupOpen)
sec.toggleGroup();}
this.selectedSection.toggleGroup()}else{var scenarioId=this.selectedSection.scenarioId;setTimeout(function(){_this.setVisible(!1,!0)},100);Service_27.Service.HelpSystemPlayer.loadRemote(scenarioId,!1,function(){_this.setVisible(!0)})}};HelpOverlay.prototype.onMouseMove=function(e){if(!this._isVisible)
return;var found=!1;for(var _i=0,_a=this.sections;_i<_a.length;_i++){var sec=_a[_i];if(!sec.hitTest(e.pageX,e.pageY,e.originalEvent.clientX,e.originalEvent.clientY))
continue;this.selectedSection=sec;this.marker.css({display:'block',left:sec.bounds.left,top:sec.bounds.top,width:sec.bounds.width,height:sec.bounds.height,position:(sec.isFixed?'fixed':'absolute')});found=!0;break}
if(!found)
this.marker.css({display:'none'})};HelpOverlay.prototype.indexSections=function(){if(this.widgetToolbar){this.widgetToolbar.elem.parent().remove();this.widgetToolbar=null}
var scenarioIdFromItem=function(item){var src=[];if(item.id)
src.push(item.id);if(item.name)
src.push(item.name);for(var _i=0,src_1=src;_i<src_1.length;_i++){var srcId=src_1[_i];if(srcId in availableScenarioIdx)
return srcId;if(srcId=='Text'||srcId==__('Text'))
srcId='TextArea';else if(srcId=='Media'||srcId==__('Media'))
srcId='Youtube';else if(srcId=='Maps'||srcId==__('Maps'))
srcId='GoogleMaps';else if(srcId==__('Picture'))
srcId='Picture';else if(srcId==__('Gallery'))
srcId='Gallery';else if(srcId==__('Shape'))
srcId='Shape';else if(srcId==__('Line'))
srcId='Line';else if(srcId==__('Button'))
srcId='Button';else if(srcId==__('Form'))
srcId='Form';else if(srcId==__('Menu'))
srcId='Menu';else if(srcId==__('Languages'))
srcId='Languages';if(srcId in availableScenarioIdx)
return srcId}
return null};var self=this,uiManager=Service_27.Service.uiManager.getManager();this.widgetToolbar=Object.create(WidgetToolbar_2.default).init((0,PluginToolbar_1.constructPluginToolbar)(Service_27.Service.uiManager.getApiInstance(),function(){},{type:'item',isActive:function(itemDef){return(scenarioIdFromItem(itemDef)?!0:!1)},click:function(){var scenarioId=scenarioIdFromItem(this);if(!scenarioId||!this.enabled)
return;setTimeout(function(){self.setVisible(!1,!0)},100);Service_27.Service.HelpSystemPlayer.loadRemote(scenarioId,!1,function(){self.setVisible(!0)})},icon:function(id){return uiManager.lookupUIIconClass('plugin',id)}}),'wb-help-overlay-widgets',!0);if(this.widgetToolbar){(0,jquery_84.default)('<div>').addClass('wb-help-overlay-widgets-wrp').append((0,jquery_84.default)('<div>').append(this.widgetToolbar.elem)).css({top:69,height:60}).appendTo(this._elem)}
this.sections=[]};HelpOverlay.prototype.setHeight=function(height){this._elem.css({height:height})};HelpOverlay.prototype.setTemplatesVisible=function(visible,showThisTpl){if(showThisTpl===void 0){showThisTpl=!0}
if(!visible){this.tplBlock.setVisible(!1);return}
this.tplBlock.reload(showThisTpl);this.tplBlock.setVisible(!0)};HelpOverlay.prototype.setVisible=function(visible,fadeOut){var _this=this;if(fadeOut===void 0){fadeOut=!1}
if(this._isVisible===visible)
return this;this._isVisible=visible;this.marker.css({display:'none'});if(fadeOut&&!visible){var step_1,opacity_1=1;new AnimTween_1.AnimTween(600,24,function(){opacity_1-=step_1;_this._elem.css({opacity:opacity_1})},function(tween){step_1=1.0/tween.numKeyframes},function(tween){_this._elem.css({display:'none'});tween.dispose()}).start()}else{this._elem.css({display:(visible?'block':'none'),opacity:1})}
if(visible&&this.widgetToolbar)
this.widgetToolbar.ajustSize();var ea=new BuilderEvent_12.VisibilityChangedBuilderEvent(visible);BuilderEvent_12.GlobalEvents.triggerEvent(visible?"help.show":"help.hide",ea);return this};HelpOverlay.prototype.runScenario=function(tpl){var _this=this;if(tpl.id){if(this.wbConfig.testMode&&!this.isClosable){Service_27.Service.templates.applyTemplate(tpl.id,function(){Service_27.Service.HelpSystemPlayer.loadRemote('.',!0,function(){_this.setVisible(!0)})},this)}else{this.setVisible(!1);Service_27.Service.templates.applyTemplateWithDialog(tpl.id,function(){Service_27.Service.HelpSystemPlayer.loadRemote('.',!0,function(){_this.setVisible(!0)})},function(){_this.setVisible(!0)},this)}}else if(tpl.scenarioId){setTimeout(function(){_this.setVisible(!1,!0)},100);Service_27.Service.HelpSystemPlayer.loadRemote(tpl.scenarioId,!1,function(){_this.setVisible(!0)})}};return HelpOverlay}(UIComponent_63.UIComponent));exports.HelpOverlay=HelpOverlay;function openHelpOverlay(wbConfig,closable){if(closable===void 0){closable=!0}
if(!helpOverlay){helpOverlay=new HelpOverlay(wbConfig);UserInput_3.UserInput.addHotKey('Esc',function(){return closeHelpOverlay()})}
helpOverlay.indexSections();helpOverlay.setClosable(closable);helpOverlay.setTemplatesVisible(!0,closable);helpOverlay.setVisible(!0)}
function closeHelpOverlay(){helpOverlay.setVisible(!1)}
function openHelpDialog(customUrl,builder,wbConfig,inNewTab){if(inNewTab===void 0){inNewTab=!1}
if(inNewTab){window.open(customUrl,'_blank');return}
if(!helpDlg){helpDlg=new Dialog_7.default(__('Help'));helpDlg.dialog.addClass('wb-help-dialog');helpDlg.setSize(1024,null);helpDlg.setNoScroll();var iframe=(0,jquery_84.default)('<iframe>').css({border:'none',width:'100%',height:400});iframe.attr('frameborder',0);if(customUrl){iframe.attr('src',customUrl)}else{iframe.attr('src','//site.pro/help/?bare=1&lang='+wbConfig.locale)}
helpDlg.setContent(iframe);helpDlg.setAutoResize(!0,function(bh){return iframe.height(bh-15)});if(!customUrl){helpDlg.addButton(__('Download video tour'),function(){location.href=wbConfig.getRawUrl('help-video')},!1,'btn-success').css({float:(builder.rtl?'right':'left')})}
helpDlg.addButton(__('Close'))}
helpDlg.setVisible(!0)}
function openHelp(closable){if(closable===void 0){closable=!0}
if(!builder||!wbConfig||!isHelpAvailable())
return;if(helpUrl&&typeof helpUrl==='string'){openHelpDialog(helpUrl,builder,wbConfig,!0)}else{openHelpOverlay(wbConfig,closable)}}
exports.openHelp=openHelp;function showDisabledMessage(){var el=(0,jquery_84.default)('<div>').addClass('alert alert-warning').css({position:'fixed',right:0,bottom:20,zIndex:9999,padding:'4px 10px',}).text(__('Guide is temporary disabled')).appendTo(document.body);setTimeout(function(){return el.remove()},5000)}
function handleUrlHashChange(preLoad){if(preLoad===void 0){preLoad=!1}
if(!location.hash)
return!1;if(location.hash.match(/^#helpOverlay$/)){if(!preLoad)
showDisabledMessage();}else if(location.hash.match(/^#helpOverlayNone$/)){if(!preLoad)
showDisabledMessage();}else{return!1}
return!0}
function isHelpAvailable(){return(helpUrl!==!1)}
exports.isHelpAvailable=isHelpAvailable;function init(builderInst,wbConfigInst){builder=builderInst;wbConfig=wbConfigInst;helpUrl=__trr(builder.helpUrl);if(helpUrl===null)
helpUrl=!1;if(!isHelpAvailable())
return;jquery_84.default.getJSON(wbConfig.getLnUrl('scenario/list')).then(function(res){for(var _i=0,res_1=res;_i<res_1.length;_i++){var id=res_1[_i];availableScenarioIdx[id]=!0}},function(){return console.log('Error loading scenario list.')});window.addEventListener('hashchange',function(){handleUrlHashChange()},!1);handleUrlHashChange(!0)}
exports.init=init;function handlePageLoad(){if(!handleUrlHashChange()){}}
exports.handlePageLoad=handlePageLoad});define("js/NotificationRibbon",["require","exports","jquery","js/Service","js/BuilderEvent"],function(require,exports,jquery_85,Service_28,BuilderEvent_13){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.defaultMessages=exports.init=exports.NotificationRibbon=void 0;var wbConfig;var NotificationRibbonType=(function(){function NotificationRibbonType(){this.text='';this.isHtml=!1}
NotificationRibbonType.prototype.setVisible=function(visible){if(visible&&this.text){BuilderEvent_13.GlobalEvents.triggerEvent('notification.changed',new BuilderEvent_13.NotificationEvent(this.text,this.isHtml))}else{BuilderEvent_13.GlobalEvents.triggerEvent('notification.changed',new BuilderEvent_13.NotificationEvent('',!1))}};NotificationRibbonType.prototype.setText=function(text,asHtml){if(asHtml===void 0){asHtml=!1}
this.text=text;this.isHtml=asHtml;BuilderEvent_13.GlobalEvents.triggerEvent('notification.changed',new BuilderEvent_13.NotificationEvent(text,asHtml))};NotificationRibbonType.prototype.getText=function(){return this.text};return NotificationRibbonType}());exports.NotificationRibbon=new NotificationRibbonType();function init(wbConfig_){wbConfig=wbConfig_}
exports.init=init;function defaultMessages(){if(wbConfig.testMode&&!wbConfig.devTestMode&&!wbConfig.websiteImportStatus){var text=__('This is Demo version. Everything created with it will be reset after 24 hours.');var rld_1=Service_28.Service.RemoteLoginDialog;if(rld_1.isRegistrationAvailable()){text+=' <a href="javascript:void(0)" class="wb-reg-link">'+__('To save your site, use Publish button.')+'</a>';var elem=(0,jquery_85.default)('<span>').html(text);elem.find('a[class=wb-reg-link]').on('click',function(){rld_1.setVisible(!0)});exports.NotificationRibbon.setText(elem,!0)}else{exports.NotificationRibbon.setText(text)}}}
exports.defaultMessages=defaultMessages});define("js/CongratsDialog",["require","exports","jquery","Dialog","js/VerticalLayout","js/Label","js/UIButton","js/Service"],function(require,exports,jquery_86,Dialog_8,VerticalLayout_24,Label_17,UIButton_12,Service_29){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CongratsDialog=void 0;var CongratsDialog=(function(_super){__extends(CongratsDialog,_super);function CongratsDialog(){var _this=_super.call(this,'',!1)||this;_this.content.css({padding:'20px'});_this.setTitleVisible(!1);_this.setFooterVisible(!1);_this.setTitle("Congrats Stuff");_this.setContent(new Service_29.Service.UIBuilder({type:VerticalLayout_24.VerticalLayout,css:{textAlign:'center',marginBottom:'10px'},children:[{type:Label_17.Label,text:__('Congratulations, your website is live!'),css:{fontSize:'25px',lineHeight:'normal !important',overflow:'visible',margin:'20px 0px 30px 0px',textAlign:'center',cursor:'default',whiteSpace:'normal'}},{type:Label_17.Label,text:'',id:'msgLabel',css:{textAlign:'center',marginBottom:'30px',color:'#666666',cursor:'default',whiteSpace:'normal'}},{type:UIButton_12.UIButton,text:__('View Site'),buttonStyle:UIButton_12.UIButton.STYLE_SUCCESS,click:function(){window.open('http://'+wb_builder.siteDomain,'wb_builder_prewiew_published')}}]},_this.fields),!0);_this.content.prepend((0,jquery_86.default)('<button>').attr('type','button').css({position:'absolute',zIndex:999,top:'12px',right:'20px'}).addClass('close').html('&times;').on('click',function(){_this.setVisible(!1)}));return _this}
CongratsDialog.prototype.setVisible=function(visible,noAction,ignoreEvent){if(visible){var url='http://'+wb_builder.siteDomain,link='<a href="'+url+'" target="_blank">'+url+'</a>';this.fields.msgLabel.css({fontWeight:'normal'}).setHtml(String(__('Here is your website address: %s')).replace('%s',link))}
_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};return CongratsDialog}(Dialog_8.default));exports.CongratsDialog=CongratsDialog});define("js/PreloaderOverlay",["require","exports","jquery","js/UIComponent"],function(require,exports,jquery_87,UIComponent_64){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PreloaderOverlay=void 0;var PreloaderOverlay=(function(_super){__extends(PreloaderOverlay,_super);function PreloaderOverlay(value,noParentLimit){if(value===void 0){value=100}
if(noParentLimit===void 0){noParentLimit=!1}
var _this=_super.call(this,'div')||this;_this.value=value;_this.noParentLimit=noParentLimit;_this.parentLimitsRemoved=!1;_this._elem.addClass('wb-preloader-overlay');_this.progressElem=(0,jquery_87.default)('<div>').addClass('progress-bar progress-bar-striped active').css({width:'100%'});_this.progressBarElem=(0,jquery_87.default)('<div>').addClass('progress').append(_this.progressElem).appendTo(_this._elem);return _this}
PreloaderOverlay.prototype.buildInit=function(data,fields){if(data.value)
this.setValue(data.value);this.noParentLimit=!!data.noParentLimit};PreloaderOverlay.prototype.setVisible=function(visible){if(visible&&this.noParentLimit&&!this.parentLimitsRemoved){this._elem.parent().css({position:'static'});this.parentLimitsRemoved=!0}
_super.prototype.setVisible.call(this,visible);if(visible){var top_2=Math.round((this._elem.outerHeight(!1)-this.progressBarElem.outerHeight(!1))/2.0);if(top_2>0){this.progressBarElem.css({marginTop:''+top_2+'px'})}}
return this};PreloaderOverlay.prototype.setValue=function(value){this.value=Math.max(Math.min(value,100),0);this.progressElem.css({width:(this.value+'%')})};PreloaderOverlay.prototype.getValue=function(){return this.value};return PreloaderOverlay}(UIComponent_64.UIComponent));exports.PreloaderOverlay=PreloaderOverlay});define("js/util/MonitoringTimer",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.clearTimeoutEx=exports.setTimeoutEx=exports.MonitoringTimer=void 0;var MonitoringTimer=exports.MonitoringTimer=(function(){function MonitoringTimer(options){this.initial=!0;this.retryCounter=0;this.abortFunc=undefined;this.state=MonitoringTimer.STATE_INCOMPLETE;this.successData=undefined;this.errorData=undefined;this.deferred=[];this.expectedTimeoutTime=0;this.expectedMaxTimeoutTime=0;this.timeoutTimer=0;this.idleTimer=0;if(typeof options.loop!=="function")
throw new Error("Monitoring timer options must have loop callback");if(typeof options.timeout!=="number"||options.timeout<=0)
options.timeout=10000;if(typeof options.maxTimeout!=="number"||options.maxTimeout<0)
options.maxTimeout=options.timeout+10000;if(options.maxTimeout<options.timeout)
options.maxTimeout=options.timeout;if(typeof options.retryTimeout!=="number"||options.retryTimeout<0)
options.retryTimeout=options.timeout;if(typeof options.maxRetries!=="number")
options.maxRetries=-1;this.retryCounter=options.maxRetries;this.options=options;this.runLoop()}
MonitoringTimer.prototype.runLoop=function(){this.abortFunc=undefined;var val=this.options.loop.call(this,this,this.initial);this.abortFunc=(val&&typeof val==="object"&&typeof val.abort==="function")?(function(){val.abort()}):undefined};MonitoringTimer.prototype.stopScheduledTimers=function(){if(this.timeoutTimer){clearTimeout(this.timeoutTimer);this.timeoutTimer=0}
if(this.idleTimer){cancelIdleCallback(this.idleTimer);this.idleTimer=0}};MonitoringTimer.prototype.scheduleNextInternal=function(timeout,afterError){var _this=this;if(afterError===void 0){afterError=!1}
if(this.state!==MonitoringTimer.STATE_INCOMPLETE)
return;this.stopScheduledTimers();if(!afterError){this.initial=!1;this.retryCounter=(typeof this.options.maxRetries==="number")?this.options.maxRetries:-1}
if(typeof timeout!=="number")
timeout=this.options.timeout||0;if(timeout<1)
timeout=10000;var maxTimeout=this.options.maxTimeout;if(typeof maxTimeout!=="number"||maxTimeout<timeout)
maxTimeout=timeout;var now=Date.now();this.expectedTimeoutTime=now+timeout;this.expectedMaxTimeoutTime=now+maxTimeout;this.timeoutTimer=setTimeout(function(){_this.timeoutTimer=0;if(_this.idleTimer){cancelIdleCallback(_this.idleTimer);_this.idleTimer=0}
_this.runLoop()},timeout);if("requestIdleCallback" in window){var idleFunc_1=function(){var now=Date.now();if(now<_this.expectedTimeoutTime){_this.idleTimer=requestIdleCallback(idleFunc_1,{timeout:_this.expectedMaxTimeoutTime-now});return}
_this.idleTimer=0;if(_this.timeoutTimer){clearTimeout(_this.timeoutTimer);_this.timeoutTimer=0}
_this.runLoop()};this.idleTimer=requestIdleCallback(idleFunc_1,{timeout:maxTimeout})}};MonitoringTimer.prototype.scheduleNext=function(){this.scheduleNextInternal()};MonitoringTimer.prototype.done=function(result){if(this.state!==MonitoringTimer.STATE_INCOMPLETE)
return;this.state=MonitoringTimer.STATE_SUCCESS;this.successData=result;this.stopScheduledTimers();if(typeof this.options.success==="function"){this.options.success.call(this,this.successData)}
if(typeof this.options.complete==="function"){this.options.complete.call(this)}
for(var _i=0,_a=this.deferred;_i<_a.length;_i++){var deferred=_a[_i];deferred.resolve(this.successData)}};MonitoringTimer.prototype.error=function(code,message,canRetry){if(canRetry===void 0){canRetry=!1}
if(this.state)
return;this.stopScheduledTimers();if(canRetry&&this.retryCounter!==0){if(this.retryCounter>0)
this.retryCounter--;this.scheduleNextInternal(this.options.retryTimeout,!0);return}
this.state=MonitoringTimer.STATE_ERROR;this.errorData={code:code,message:message};if(typeof this.options.error==="function"){this.options.error.call(this,this.errorData)}
if(typeof this.options.complete==="function"){this.options.complete.call(this)}
for(var _i=0,_a=this.deferred;_i<_a.length;_i++){var deferred=_a[_i];deferred.reject(this.errorData)}};MonitoringTimer.prototype.cancel=function(){if(this.state!==MonitoringTimer.STATE_INCOMPLETE)
return;this.state=MonitoringTimer.STATE_CANCELLED;this.deferred=[];this.stopScheduledTimers();try{if(typeof this.abortFunc==="function")
this.abortFunc();}finally{this.abortFunc=undefined}};MonitoringTimer.prototype.promise=function(){var deferred=$.Deferred();if(this.state===MonitoringTimer.STATE_INCOMPLETE)
this.deferred.push(deferred);else if(this.state===MonitoringTimer.STATE_SUCCESS)
deferred.resolve(this.successData);else if(this.state===MonitoringTimer.STATE_ERROR)
deferred.reject(this.errorData);return deferred.promise()};MonitoringTimer.STATE_INCOMPLETE=0;MonitoringTimer.STATE_SUCCESS=1;MonitoringTimer.STATE_ERROR=2;MonitoringTimer.STATE_CANCELLED=3;return MonitoringTimer}());var nextExtendedTimeoutId=1;var extendedTimeoutTimers={};function setTimeoutEx(callback,timeout){if(typeof callback!=="function")
throw new Error("Callback must be a function");var thisCallback=callback;timeout=Math.max(1,timeout);var thisTimeoutId=nextExtendedTimeoutId;extendedTimeoutTimers[""+nextExtendedTimeoutId]=new MonitoringTimer({timeout:timeout,maxTimeout:timeout,loop:function(timer,initial){if(initial){timer.scheduleNext();return}
delete extendedTimeoutTimers[""+thisTimeoutId];try{thisCallback()}finally{timer.cancel()}}});return nextExtendedTimeoutId++}
exports.setTimeoutEx=setTimeoutEx;function clearTimeoutEx(timerId){var key=""+timerId;if(!extendedTimeoutTimers.hasOwnProperty(key))
return;extendedTimeoutTimers[key].cancel();delete extendedTimeoutTimers[key]}
exports.clearTimeoutEx=clearTimeoutEx});define("js/RemoteLoginDialog",["require","exports","js/HorizontalLayout","js/UIButton","AlertBox","js/NotificationRibbon","js/CongratsDialog","js/PreloaderOverlay","Dialog","js/Service","jquery","js/core/BuilderConfig","js/VerticalLayout","js/IFrameControl","js/Label","js/util/MonitoringTimer"],function(require,exports,HorizontalLayout_5,UIButton_13,AlertBox_1,NotificationRibbon_1,CongratsDialog_1,PreloaderOverlay_1,Dialog_9,Service_30,jquery_88,BuilderConfig_19,VerticalLayout_25,IFrameControl_2,Label_18,MonitoringTimer_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.handlePublish=exports.isProcessing=exports.init=exports.RemoteLoginDialog=exports.RemoteLoginDialogType=void 0;var RemoteLoginDialogType=(function(_super){__extends(RemoteLoginDialogType,_super);function RemoteLoginDialogType(){var _this=_super.call(this,'%inherit%')||this;_this.waitTimer=null;_this.onLoadCallback=null;_this.imageBanner=null;_this.closeBtn=null;_this.processing=!1;return _this}
RemoteLoginDialogType.prototype.isProcessing=function(){return this.processing};RemoteLoginDialogType.prototype.available=function(){if(BuilderConfig_19.wbConfig.testMode){if(wb_builder.isReseller)
return!0;if(wb_builder.demoConfig&&wb_builder.demoConfig.loginRegApiUrl&&(wb_builder.demoConfig.useRegForm||wb_builder.demoConfig.useRemoteRegForm||wb_builder.demoConfig.useLoginForm))
return!0}
return!1};RemoteLoginDialogType.prototype.setClosable=function(closable){_super.prototype.setClosable.call(this,closable);if(closable){if(this.closeBtn)
this.closeBtn.show();}else{if(this.closeBtn)
this.closeBtn.hide();}};RemoteLoginDialogType.prototype.isRegistrationAvailable=function(){return(BuilderConfig_19.wbConfig.testMode&&wb_builder.demoConfig&&wb_builder.demoConfig.loginRegApiUrl&&(wb_builder.demoConfig.useRegForm||wb_builder.demoConfig.useRemoteRegForm))};RemoteLoginDialogType.prototype.isPlainPublish=function(){return(BuilderConfig_19.wbConfig.testMode&&wb_builder.demoConfig&&wb_builder.demoConfig.hidePublishSubMenu)};RemoteLoginDialogType.prototype.handlePublish=function(force){var _this=this;if(force===void 0){force=!1}
if(!force&&!wb_builder.publishOnLoad)
return;wb_builder.publish(function(){setTimeout(function(){return _this.congratsDialog.setVisible(!0)},400)})};RemoteLoginDialogType.prototype.buildBanner=function(bannerImageUrl){var _this=this;var image=new Image();this.imageBanner=(0,jquery_88.default)('<div>').append(image).css({position:'fixed',zIndex:9990,cursor:'pointer',bottom:10,left:'50%'}).appendTo(document.body);image.onload=function(){_this.imageBanner.css({width:image.width+'px',height:image.height+'px',marginLeft:(image.width/-2.0)+'px'});(0,jquery_88.default)(image).on('click',function(){if(_this.available())
_this.setVisible(!0);});(0,jquery_88.default)('<button>').attr({type:'button'}).css({position:'absolute',zIndex:9991,color:'#333',opacity:1,top:0,right:'4px'}).addClass('close').html('&times;').on('click',function(){_this.imageBanner.remove()}).appendTo(_this.imageBanner)};image.onerror=function(){console.log("Error loading banner image '".concat(bannerImageUrl,"'."))};image.src=bannerImageUrl};RemoteLoginDialogType.prototype.getImageBanner=function(){return this.imageBanner};RemoteLoginDialogType.prototype.enableWaitTimer=function(enable){var _this=this;if(this.waitTimer){this.waitTimer.cancel();this.waitTimer=null}
this.fields.iframeAlert.setText('').setVisible(!1);if(!enable)
return;this.waitTimer=new MonitoringTimer_1.MonitoringTimer({timeout:5000,maxTimeout:30000,retryTimeout:10000,maxRetries:5,loop:function(timer,initial){var xhr=jquery_88.default.getJSON(BuilderConfig_19.wbConfig.lnBaseUrl+'create-website/notify-wait',function(data){if(data.error){timer.error(0,(data.error.message?data.error.message:data.error),!1)}else if(!data.result){timer.scheduleNext()}else{timer.done(data)}});xhr.fail(function(){timer.error(1,__('Action failed'),!0)});return xhr},success:function(data){BuilderConfig_19.wbConfig.testMode=!1;if(data.reloadData&&data.reloadData.sessUniqKey){BuilderConfig_19.wbConfig.sessUniqKey=data.reloadData.sessUniqKey;wb_builder.siteDomain=data.reloadData.domain;BuilderConfig_19.wbConfig.upgradeUrl=data.reloadData.upgradeUrl;wb_builder.formsAllowed=data.reloadData.formsAllowed;if(('pluginToolbar' in data.reloadData)&&data.reloadData.pluginToolbar){wb_builder.pluginToolbar=data.reloadData.pluginToolbar}}
NotificationRibbon_1.NotificationRibbon.setVisible(!1);_this.hide();wb_builder.publish(function(){_this.congratsDialog.setVisible(!0)})},error:function(err){_this.fields.iframeAlert.setText(err.message).setVisible(!0)}})};RemoteLoginDialogType.prototype.setVisible=function(visible,noAction,ignoreEvent,regTag){var _this=this;_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent);if(this.fields.iframe&&wb_builder.demoConfig){if(visible){this.fields.preloader.setVisible(!0);if(!this.onLoadCallback){this.fields.iframe.on('load',this.onLoadCallback=function(){_this.fields.preloader.setVisible(!1)})}
var params={builderApiUrl:BuilderConfig_19.wbConfig.lnBaseUrl+'api/create-website/',loginHash:(wb_builder.demoConfig.loginHash?wb_builder.demoConfig.loginHash:''),serverId:(wb_builder.serverId?"".concat(wb_builder.serverId):''),};if(regTag&&BuilderConfig_19.wbConfig.unbrandedTestMode)
params.regTag=regTag;this.fields.iframe.setValue(wb_builder.demoConfig.loginRegApiUrl,params);this.enableWaitTimer(!0)}else{this.enableWaitTimer(!1)}}
if(visible&&this.dialog)
this.dialog.css({"z-index":2000000})};RemoteLoginDialogType.prototype.init=function(){var _this=this;_super.prototype.__construct.call(this,'',!1);this.dialog.addClass('wb-remote-login-dialog');this.baseElem.css({maxWidth:600});this.content.css({padding:'20px'});this.setTitleVisible(!1);this.setFooterVisible(!1);this.setTitle('Login Stuff');var showLoginMode;var useRemoteRegForm=wb_builder.demoConfig?wb_builder.demoConfig.useRemoteRegForm:!1;var useRegForm=!useRemoteRegForm&&(wb_builder.demoConfig?wb_builder.demoConfig.useRegForm:!0);var useInline=useRemoteRegForm&&(wb_builder.demoConfig?wb_builder.demoConfig.inlineRemoteForm:!1);if(useInline)
useRemoteRegForm=!1;var useLoginForm=wb_builder.demoConfig?wb_builder.demoConfig.useLoginForm:!0;if(wb_builder.demoConfig&&!wb_builder.demoConfig.loginRegApiUrl){useRegForm=!1;useRemoteRegForm=!1;useInline=!1;useLoginForm=!1}
var loginRegMsg=wb_builder.demoConfig?wb_builder.demoConfig.loginRegMsg:null;this.setContent(new Service_30.Service.UIBuilder({type:VerticalLayout_25.VerticalLayout,children:[{type:'AlertBox',style:AlertBox_1.default.STYLE_WARNING,html:loginRegMsg,css:{marginTop:15},ignore:(loginRegMsg?!1:!0)},{type:PreloaderOverlay_1.PreloaderOverlay,id:'preloader',value:100,visible:!1,noParentLimit:!0},{type:HorizontalLayout_5.HorizontalLayout,id:'hl',children:[{type:VerticalLayout_25.VerticalLayout,spacing:0,ignore:!useInline,children:[{type:'AlertBox',id:'iframeAlert',style:AlertBox_1.default.STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:IFrameControl_2.IFrameControl,id:'iframe',css:{width:'100%',minHeight:'570px',marginTop:'10px'}}]},{type:VerticalLayout_25.VerticalLayout,spacing:15,ignore:!useRemoteRegForm,children:[{type:Label_18.Label,text:__('RemoteRegistrationMessage'),css:{fontWeight:'bold',whiteSpace:'pre-wrap'}},{type:UIButton_13.UIButton,id:'remoteRegisterBtn',text:__('Go to registration'),buttonStyle:UIButton_13.UIButton.STYLE_SUCCESS,click:function(e,fields){fields.remoteRegisterBtn.setEnabled(!1);wb_builder.save(!0,function(){setTimeout(function(){wb_builder.goToPage(null,BuilderConfig_19.wbConfig.lnBaseUrl+'create-website/remote-register')},100)})}}]},{type:VerticalLayout_25.VerticalLayout,id:'registerForm',spacing:15,ignore:!useRegForm,children:[{type:Label_18.Label,text:__('Sign Up'),css:{fontWeight:'bold'}},{type:'AlertBox',id:'registerAlert',style:AlertBox_1.default.STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:'TextField',id:'rEmail',placeholder:__('E-mail')},{type:'TextField',id:'rName',placeholder:__('Name')},{type:'TextField',id:'rPassword',placeholder:__('Password'),password:!0},{type:'TextField',id:'rPassword2',placeholder:__('Confirm password'),password:!0},{type:UIButton_13.UIButton,id:'registerBtn',text:__('Register'),buttonStyle:UIButton_13.UIButton.STYLE_SUCCESS,click:function(e,fields){_this.processing=!0;fields.registerForm.setEnabled(!1);fields.registerAlert.setText('').setVisible(!1);fields.preloader.setVisible(!0);jquery_88.default.post(BuilderConfig_19.wbConfig.lnBaseUrl+'create-website/',{register:1,email:fields.rEmail.getText(),name:fields.rName.getText(),password:fields.rPassword.getText(),password2:fields.rPassword2.getText()},undefined,'json').done(function(data){if(data.error){fields.registerAlert.setText((data.error.message?data.error.message:data.error)).setVisible(!0)}else{BuilderConfig_19.wbConfig.testMode=!1;if(data.reloadData&&data.reloadData.sessUniqKey){BuilderConfig_19.wbConfig.sessUniqKey=data.reloadData.sessUniqKey;wb_builder.siteDomain=data.reloadData.domain;BuilderConfig_19.wbConfig.upgradeUrl=data.reloadData.upgradeUrl}
NotificationRibbon_1.NotificationRibbon.setVisible(!1);_this.hide();wb_builder.publish(function(){_this.congratsDialog.setVisible(!0)})}
fields.registerForm.setEnabled(!0);fields.preloader.setVisible(!1);_this.processing=!1}).fail(function(){fields.registerAlert.setText(__('Action failed')).setVisible(!0);fields.registerForm.setEnabled(!0);fields.preloader.setVisible(!1);_this.processing=!1})}}]},{type:VerticalLayout_25.VerticalLayout,id:'loginForm',spacing:15,ignore:!useLoginForm,children:[{type:Label_18.Label,text:__('Login'),css:{fontWeight:'bold'}},{type:'AlertBox',id:'loginAlert',style:AlertBox_1.default.STYLE_DANGER,visible:!1,css:{marginBottom:10}},{type:'AlertBox',id:'remindAlert',style:AlertBox_1.default.STYLE_INFO,visible:!1,css:{marginBottom:10},text:__('A new password will be sent to the specified e-mail address.')},{type:'TextField',id:'lEmail',placeholder:__('E-mail')},{type:'TextField',id:'lPassword',placeholder:__('Password'),password:!0},{type:UIButton_13.UIButton,id:'lRemind',text:__('Remind password'),buttonStyle:UIButton_13.UIButton.STYLE_LINK,css:{padding:0},click:function(e,fields){fields.loginAlert.setVisible(!1);fields.remindAlert.setVisible(!0);fields.lPassword.setVisible(!1);fields.lRemind.setVisible(!1);fields.lLogin.setVisible(!0);fields.loginBtn.setVisible(!1);fields.remindBtn.setVisible(!0)}},{type:UIButton_13.UIButton,id:'lLogin',text:__('Return to login form'),buttonStyle:UIButton_13.UIButton.STYLE_LINK,css:{padding:0},visible:!1,click:(showLoginMode=function(e,fields){fields.loginAlert.setVisible(!1);fields.remindAlert.setVisible(!1);fields.lPassword.setVisible(!0);fields.lRemind.setVisible(!0);fields.lLogin.setVisible(!1);fields.loginBtn.setVisible(!0);fields.remindBtn.setVisible(!1)})},{type:UIButton_13.UIButton,id:'loginBtn',text:__('Login'),buttonStyle:UIButton_13.UIButton.STYLE_SUCCESS,click:function(e,fields){fields.loginForm.setEnabled(!1);fields.loginAlert.setText("").setVisible(!1);fields.preloader.setVisible(!0);jquery_88.default.post(BuilderConfig_19.wbConfig.lnBaseUrl+'create-website/',{login:1,email:fields.lEmail.getText(),password:fields.lPassword.getText()},undefined,'json').done(function(data){if(data.error){fields.loginAlert.setText((data.error.message?data.error.message:data.error)).setBoxStyle(AlertBox_1.default.STYLE_DANGER).setVisible(!0)}else{BuilderConfig_19.wbConfig.testMode=!1;if(data.reloadData&&data.reloadData.sessUniqKey){BuilderConfig_19.wbConfig.sessUniqKey=data.reloadData.sessUniqKey;wb_builder.siteDomain=data.reloadData.domain;BuilderConfig_19.wbConfig.upgradeUrl=data.reloadData.upgradeUrl}
NotificationRibbon_1.NotificationRibbon.setVisible(!1);_this.hide();wb_builder.publish(function(){_this.congratsDialog.setVisible(!0)})}
fields.loginForm.setEnabled(!0);fields.preloader.setVisible(!1)}).fail(function(){fields.loginAlert.setText(__('Action failed')).setVisible(!0);fields.loginForm.setEnabled(!0);fields.preloader.setVisible(!1)})}},{type:UIButton_13.UIButton,id:'remindBtn',text:__('Send Password'),buttonStyle:UIButton_13.UIButton.STYLE_SUCCESS,visible:!1,click:function(e,fields){fields.loginForm.setEnabled(!1);fields.loginAlert.setText("").setVisible(!1);fields.preloader.setVisible(!0);jquery_88.default.post(BuilderConfig_19.wbConfig.lnBaseUrl+'create-website/',{remind:1,email:fields.lEmail.getText()},undefined,'json').done(function(data){if(data.error){fields.loginAlert.setText((data.error.message?data.error.message:data.error)).setBoxStyle(AlertBox_1.default.STYLE_DANGER).setVisible(!0)}else{showLoginMode(e,fields);fields.lPassword.focus();fields.loginAlert.setText(__('Password sent')).setBoxStyle(AlertBox_1.default.STYLE_SUCCESS).setVisible(!0)}
fields.loginForm.setEnabled(!0);fields.preloader.setVisible(!1)}).fail(function(){fields.loginAlert.setText(__('Action failed')).setVisible(!0);fields.loginForm.setEnabled(!0);fields.preloader.setVisible(!1)})}}]}]}]},this.fields),!0);if(useRegForm&&useLoginForm){this.fields.hl.applyLayoutCellCss(0,{borderRight:'1px solid #d5d5d5'});this.fields.hl.applyLayoutCellCss(1,{borderLeft:'1px solid #d5d5d5',marginLeft:-1})}
this.closeBtn=(0,jquery_88.default)('<button>').addClass('close').attr({type:'button'}).html('&times;').css({position:'absolute',top:'12px',right:'20px',zIndex:99}).on('click',function(){return _this.hide()});this.closeBtn.prependTo(this.content);this.congratsDialog=new CongratsDialog_1.CongratsDialog();if(wb_builder.demoConfig&&wb_builder.demoConfig.bannerImageUrl){this.buildBanner(wb_builder.demoConfig.bannerImageUrl)}(0,jquery_88.default)(window).on('message',function(e){if(e.originalEvent.data&&typeof(e.originalEvent.data)==='object'&&('action' in e.originalEvent.data)&&e.originalEvent.data.action==='remoteLoginRegisterDisableClose'){_this.setClosable(!1)}})};return RemoteLoginDialogType}(Dialog_9.default));exports.RemoteLoginDialogType=RemoteLoginDialogType;exports.RemoteLoginDialog=new RemoteLoginDialogType();Service_30.Service.RemoteLoginDialog=exports.RemoteLoginDialog;function init(){exports.RemoteLoginDialog.init()}
exports.init=init;function isProcessing(){return exports.RemoteLoginDialog.isProcessing()}
exports.isProcessing=isProcessing;function handlePublish(){exports.RemoteLoginDialog.handlePublish()}
exports.handlePublish=handlePublish});define("js/admin/Tags",["require","exports","PropertyDialog","js/core/Validation","js/core/BuilderConfig","jquery","js/util/UID","js/ui/TreeView","js/UIButton","js/FlexLayout"],function(require,exports,PropertyDialog_3,Validation_2,BuilderConfig_20,jquery_89,UID_2,TreeView_3,UIButton_14,FlexLayout_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TemplatesTagsDialog=exports.sortTags=exports.getCurrentTags=exports.setCurrentTags=exports.CurrentTags=exports.Tags=void 0;exports.Tags={'type':[],'category':[],'tag':[],'style':[],'color':[],'plugin':[]};exports.CurrentTags=null;function setCurrentTags(tags){exports.CurrentTags=tags}
exports.setCurrentTags=setCurrentTags;function getCurrentTags(){return exports.CurrentTags}
exports.getCurrentTags=getCurrentTags;function sortTags(a,b){if(!a.name||!b.name){return 0}
var nameA=a.name.toUpperCase();var nameB=b.name.toUpperCase();if(nameA<nameB){return-1}
if(nameA>nameB){return 1}
return 0}
exports.sortTags=sortTags;function applyTreeItemData(item,data){if(data.description.trim()){item.setIcon("fa fa-folder-open")}else{item.setIcon("fa fa-folder-open-o")}
item.setName(data.name);return item}
var TemplatesTagsDialog=(function(_super){__extends(TemplatesTagsDialog,_super);function TemplatesTagsDialog(){var _this=_super.call(this,'%inherit%')||this;_super.prototype.__construct.call(_this,__('Tags '),void 0,void 0,void 0,{noScroll:!0,tabs:[{children:[{type:'HorizontalLayout',columnWeights:[4,8],columnWeightsSmall:[4,8],children:[{type:FlexLayout_4.FlexLayout,direction:"column",alignItems:"flex-start",justifyContent:"stretch",styleClass:"wb-tree-background-panel wb-tree-background-panel-md",children:[{type:(TreeView_3.TreeView),id:'tree',multiselect:!1,showCollapseButtons:!1,showDeleteButtons:!0,maxNameWidth:100,onDelete:function(item){var _a;var firstChild=_this.fields.tree.root.getChild(0);var select=_this.fields.tree.root.getChild((item===firstChild)?1:0);_this.fields.tree.setSelection(select?[select]:[],!0);(_a=item.getParent())===null||_a===void 0?void 0:_a.removeChild(item)},canAcceptItem:function(item,parent,refItem,after){return!1},beforeSelect:function(newSelection,oldSelection){for(var _i=0,oldSelection_1=oldSelection;_i<oldSelection_1.length;_i++){var item=oldSelection_1[_i];var selTagData=item.getData();selTagData.name=_this.fields.name.getValue();selTagData.description=_this.fields.description.getValue().trim();selTagData.internalDescription=_this.fields.internalDescription.getValue().trim();applyTreeItemData(item,selTagData)}},afterSelect:function(newSelection){for(var _i=0,newSelection_1=newSelection;_i<newSelection_1.length;_i++){var item=newSelection_1[_i];var selTagData=item.getData();_this.fields.name.setValue(selTagData.name);_this.fields.description.setValue(selTagData.description);_this.fields.internalDescription.setValue(selTagData.internalDescription)}
if(!newSelection.length){_this.fields.name.setValue("");_this.fields.description.setValue("");_this.fields.internalDescription.setValue("")}
_this.fields.name.focus()},},{type:UIButton_14.UIButton,id:"newItemBtn",buttonStyle:UIButton_14.UIButton.STYLE_LINK,icon:'glyphicon glyphicon-plus',text:__('New Item'),enabled:!0,click:function(){var newItem=_this.newItem();_this.fields.tree.setSelection([newItem],!0);newItem.scrollIntoView()}},]},{type:'VerticalLayout',spacing:15,children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Item Name'),helpText:'Display name of the tag. Single word is recommended, since it will be split into separate words when used in search.'},{type:'TextField',id:'name',change:function(e){var _a;var data=[];_this.fields.tree.root.traverse(function(item){var tagData=item.getData();data.push({id:tagData.id,alias:tagData.name,name:tagData.name})});var id=(_a=_this.fields.tree.getFirstSelectedItem())===null||_a===void 0?void 0:_a.getData().id;(0,Validation_2.validateUrlField)(e.name,_this.fields.tagNotice,data,id,!1,!1,!1)}},{type:'Label',id:'tagNotice',text:'',css:{color:'#F80',fontWeight:'normal',marginTop:"5px"},visible:!1}]},{type:'VerticalLayout',children:[{type:'Label',text:'Keywords (synonyms)',helpText:'Words or phrases with very close meaning, separated by "comma". This will be applied to all templates from the main group. Used in search.'},{type:'TextField',id:'description',textArea:!0,css:{height:150}}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Description'),helpText:'Internal explanation, that does not impact on search.'},{type:'TextField',id:'internalDescription',textArea:!0,css:{height:154}}]}]}]}]}],buttons:[{name:__('Cancel')},{name:__('Apply'),primary:!0,click:function(){_this.applyData()}}]});return _this}
TemplatesTagsDialog.prototype.applyData=function(){var _this=this;if(this.fields.tagNotice.isVisible()){return}
var selectedItem=this.fields.tree.getFirstSelectedItem();if(selectedItem)
this.fields.tree.deselectItem(selectedItem,!0);var tags=[];this.fields.tree.root.traverse(function(item){tags.push(item.getData())});tags.sort(sortTags);var options=[],all_tags=[];var TagsAdd=[],TagsDelete=[],TagsEdit=[];var _loop_18=function(tag){tag.name=tag.name.trim();tag.name=tag.name[0].toUpperCase()+tag.name.slice(1);options.push({id:tag.id,name:tag.name});all_tags.push(tag.id);var is_exist=exports.Tags[this_13.type].filter(function(item){return item.id==tag.id});if(!is_exist.length){TagsAdd.push(__assign({},tag))}else if(is_exist[0].name.trim()!=tag.name.trim()||is_exist[0].description.trim()!=tag.description.trim()||is_exist[0].internalDescription.trim()!=tag.internalDescription.trim()){TagsEdit.push(__assign({},tag))}};var this_13=this;for(var _i=0,tags_1=tags;_i<tags_1.length;_i++){var tag=tags_1[_i];_loop_18(tag)}
for(var _a=0,_b=exports.Tags[this.type];_a<_b.length;_a++){var tag=_b[_a];if(all_tags.indexOf(tag.id)===-1){TagsDelete.push(__assign({},tag))}}
if(!TagsAdd.length&&!TagsDelete.length&&!TagsEdit.length){this.baseField.reload(options);this.setVisible(!1);return}
var data={type:this.type,add:TagsAdd,delete:TagsDelete,edit:TagsEdit};jquery_89.default.post(BuilderConfig_20.wbConfig.getRawUrl('tagssave'),data).done(function(data){for(var _i=0,_a=Object.keys(data);_i<_a.length;_i++){var tagCat=_a[_i];var tags_2=data[tagCat];exports.Tags[tagCat]=[];for(var _b=0,_c=tags_2;_b<_c.length;_b++){var tag=_c[_b];exports.Tags[tagCat].push(tag)}
exports.Tags[tagCat].sort(sortTags)}
_this.baseField.reload(options);_this.setVisible(!1)})};TemplatesTagsDialog.prototype.selectItemById=function(id){var foundItem=null;this.fields.tree.root.traverse(function(item){if(item.getData().id==id){foundItem=item;return!1}
return!0});this.fields.tree.setSelection(foundItem?[foundItem]:[],!0)};TemplatesTagsDialog.prototype.setType=function(type){this.type=type;this.dialog.find('.modal-title').html('Tags '+type)};TemplatesTagsDialog.prototype.setField=function(field){this.baseField=field};TemplatesTagsDialog.prototype.setVisible=function(visible,noAction,ignoreEvent,noSelect){if(noAction===void 0){noAction=!1}
if(ignoreEvent===void 0){ignoreEvent=!1}
if(noSelect===void 0){noSelect=!1}
this.fields.tree.root.removeAllChildren();if(exports.Tags[this.type].length){for(var _i=0,_a=exports.Tags[this.type];_i<_a.length;_i++){var tag=_a[_i];this.fields.tree.root.addChild(applyTreeItemData(this.fields.tree.createItem(),tag).setDraggable(!1).setCollapsible(!1).setDeletable(!0).setData(jquery_89.default.extend(!0,{},tag)))}}else{this.newItem()}
if(!noSelect)
this.fields.tree.setSelection([this.fields.tree.root.getChild(0)],!0);_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};TemplatesTagsDialog.prototype.newItem=function(){var item=this.fields.tree.createItem().setIcon("fa fa-folder-open").setName("").setDraggable(!1).setCollapsible(!1).setDeletable(!0).setData({id:UID_2.UID.create(),name:"",description:"",internalDescription:"",});this.fields.tree.root.addChild(item);return item};return TemplatesTagsDialog}(PropertyDialog_3.default));exports.TemplatesTagsDialog=TemplatesTagsDialog});define("js/admin/Templates",["require","exports","Dialog","js/Service","js/CustomContainer","MsgDialog","js/TextField","js/DropdownBox","js/Label","js/VerticalLayout","jquery","js/core/BuilderConfig","js/FlexLayout","js/UIButton","js/admin/Tags"],function(require,exports,Dialog_10,Service_31,CustomContainer_6,MsgDialog_1,TextField_7,DropdownBox_7,Label_19,VerticalLayout_26,jquery_90,BuilderConfig_21,FlexLayout_5,UIButton_15,Tags_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.saveAsTemplate=void 0;var dialog,msgDialog;var buttonPreloader=null;function setButtonLoading(btn,isLoading){if(isLoading){btn.addClass('disabled').attr('disabled','disabled');if(!buttonPreloader){buttonPreloader=(0,jquery_90.default)('<span>').addClass('fa fa-spinner fa-pulse').css({display:'inline-block',marginRight:'4px'})}
btn.prepend(buttonPreloader)}else{btn.removeClass('disabled').removeAttr('disabled');buttonPreloader===null||buttonPreloader===void 0?void 0:buttonPreloader.detach()}}
function handleErrorMessage(msgDialog,data){var errorType='error';var errorLabel=__('Error');if(data.errorType=='warning'){errorType='warning';errorLabel=''}
var error='';if(data.error){var icon=(errorType='warning')?'<span class="fa fa-exclamation-triangle"></span> ':'';if(data.error instanceof Array){error=icon+data.error.join('<br/>'+icon)}else{error=data.error}}
msgDialog.setMessage(error||'Unknown Error',errorLabel,errorType)}
var ImagePreview=(function(_super){__extends(ImagePreview,_super);function ImagePreview(){var _this=_super.call(this,'a')||this;_this.addClass('wb-tpl-save-thumb wb-empty');_this.getElem().append((0,jquery_90.default)('<span>').addClass('fa fa-download'));_this.image=(0,jquery_90.default)('<img>').appendTo(_this.getElem())[0];return _this}
ImagePreview.prototype.setValue=function(src){var a=this._elem[0];if(src){var url=src+'?ts='+(new Date()).getTime();a.href=url;a.target='_blank';this.image.src=url;this.removeClass('wb-empty')}else{a.href='javascript:void(0)';a.target='';this.addClass('wb-empty')}};return ImagePreview}(CustomContainer_6.CustomContainer));function buildTagName(tag){var result=tag.name;if(tag.description.trim()){var maxLen=35-tag.name.length-3;var resultMore=[];var hasMore=!1;for(var _i=0,_a=tag.description.split(',');_i<_a.length;_i++){var term=_a[_i];term=term.trim();if(!term)
continue;if(maxLen>=term.length+2){maxLen-=term.length+2;resultMore.push(term)}else{hasMore=!0;break}}
if(resultMore.length>0){result+=' <small class="text-muted">('+resultMore.join(', ')+(hasMore?', ...':'')+')</small>'}}
return result}
var tagsDialog;var tplIds=[];function saveAsTemplate(){var _a;var categoryChanged=function(){if(fields.fldCategory)
fields.newCategoryBlock.setVisible(fields.fldCategory.getValue()=='-');};var overwriteChanged=function(){fields.currentTemplate.setVisible(fields.fldOverwrite.getValue())};var editTags=function(type){if(!BuilderConfig_21.wbConfig.isSuperAdmin)
return;if(!tagsDialog){tagsDialog=new Tags_1.TemplatesTagsDialog();tagsDialog.setSize(650)}
var field=fields['tags'+type[0].toUpperCase()+type.slice(1)];tagsDialog.setType(type);tagsDialog.setField(field);tagsDialog.setVisible(!0)};var fields;if(!dialog){dialog=new Dialog_10.default(__('Save template'));dialog.setNoScroll();dialog.content.css({padding:'0 0 15px 0'});dialog.setContent(new Service_31.Service.UIBuilder({type:FlexLayout_5.FlexLayout,direction:'row',justifyContent:'stretch',wrap:'wrap',children:[{type:VerticalLayout_26.VerticalLayout,flex:[1,1,'auto'],css:{margin:'15px 15px 0 15px'},children:[{type:Label_19.Label,text:__('Name')},{type:TextField_7.TextField,id:'fldName',change:function(){if(this.getValue()!==wb_builder.template.localId){fields.fldOverwrite.setValue(!1);overwriteChanged()}else if(tplIds.indexOf(this.getValue())>-1){}}},{type:VerticalLayout_26.VerticalLayout,css:{marginTop:15},styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,children:[{type:Label_19.Label,text:'Category folder'},{type:DropdownBox_7.DropdownBox,id:'fldCategory',change:function(){return categoryChanged()}}]},{type:VerticalLayout_26.VerticalLayout,id:'newCategoryBlock',visible:!1,css:{marginTop:15},children:[{type:Label_19.Label,text:__('New category')},{type:TextField_7.TextField,id:'fldNewCategory'}]},{type:FlexLayout_5.FlexLayout,css:{marginTop:15},spacing:10,children:[{type:FlexLayout_5.FlexLayout,direction:'column',children:[{type:Label_19.Label,text:__('Screenshot'),helpText:__('Recommended size')+': 968x660'},{type:'ImageSelector',id:'image'}]},{type:FlexLayout_5.FlexLayout,direction:'column',children:[{type:Label_19.Label,text:__('Preview')},{type:ImagePreview,id:'imagePreview'}]},]},{type:VerticalLayout_26.VerticalLayout,css:{marginTop:15},children:[{type:'CheckBox',id:'fldOverwrite',label:__('Overwrite existing template'),change:function(){return overwriteChanged()},helpText:__('If checked, then will overwrite current template by applying new data, name and category to it.')},{type:Label_19.Label,id:'currentTemplate',text:'('+wb_builder.template.id+')',css:{marginLeft:20}},{type:'CheckBox',id:'fldIsPrivate',label:__('Make private'),css:{marginTop:5},helpText:__('Private templates are visible only in admin builder mode.')},{type:'CheckBox',id:'fldNonTranslatable',label:__('Do not translate'),css:{marginTop:5},helpText:__('If not checked, then template phrases will not be translated to client\'s language when choosing that template.')+'<br>'+__('Important')+': '+__('If checked, then only original builder phrases will be translated. Your custom phrases will be translated to random phrases.')},{type:FlexLayout_5.FlexLayout,styleClass:'wb-tpl-super-admin-block',css:{padding:'5px',margin:'5px 0 0 -6px'},ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,children:[{type:'CheckBox',id:'fldIgnoreValidationErrors',label:'Ignore validation errors',helpText:'Ignore validation errors like untranslated variables, unlicensed images, ...'}]}]},{type:CustomContainer_6.CustomContainer,styleClass:'alert alert-warning',css:{marginTop:15,marginBottom:0},init:function(){this.getElem().append('<span class="glyphicon glyphicon-exclamation-sign"></span>').append('&nbsp;'+__('Unused files will not be saved'))}}]},{type:VerticalLayout_26.VerticalLayout,flex:[1,1,'auto'],css:{margin:'15px 15px 0 15px'},children:[{type:Label_19.Label,text:__('Type'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'Only one':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsType',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('type')}}]},{type:Label_19.Label,css:{marginTop:15},text:__('Category'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'Only one':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsCategory',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('category')}}]},{type:Label_19.Label,css:{marginTop:15},text:__('Tag'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'One word. As much as we can':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsTag',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('tag')}}]},{type:Label_19.Label,css:{marginTop:15},text:__('Style'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'One if possible':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsStyle',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('style')}}]},{type:Label_19.Label,css:{marginTop:15},text:__('Color'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'Predominant one':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsColor',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('color')}}]},{type:Label_19.Label,css:{marginTop:15},text:__('Plugin'),helpText:(BuilderConfig_21.wbConfig.isSuperAdmin?'All that used on the page':'')},{type:FlexLayout_5.FlexLayout,justifyContent:'stretch',children:[{type:DropdownBox_7.DropdownBox,flex:[1,1,'auto'],id:'tagsPlugin',multiselect:!0,addSelectAll:!0,searchFromStart:!0},{type:UIButton_15.UIButton,icon:'fa fa-pencil',styleClass:'wb-tpl-super-admin-block',ignore:!BuilderConfig_21.wbConfig.isSuperAdmin,click:function(){return editTags('plugin')}}]},]}]},dialog.fields),!0);fields=dialog.fields;dialog.addButton(__('Cancel'));var saveBtn_1=dialog.addButton(__('Save'),function(){var _a;var saveData={name:fields.fldName.getValue(),category:fields.fldCategory?fields.fldCategory.getValue():null,newCategory:fields.fldNewCategory.getValue(),image:fields.image.getValue(),overwrite:(fields.fldOverwrite.getValue()?1:0),isPrivate:(fields.fldIsPrivate.getValue()?1:0),nonTranslatable:(fields.fldNonTranslatable.getValue()?1:0),ignoreValidationErrors:((fields.fldIgnoreValidationErrors&&fields.fldIgnoreValidationErrors.getValue())?1:0),allTags:{},tags:{}};for(var _i=0,_b=Object.keys(Tags_1.Tags);_i<_b.length;_i++){var tagCat=_b[_i];var fldName='tags'+tagCat[0].toUpperCase()+tagCat.slice(1);var field=(_a=fields[fldName])!==null&&_a!==void 0?_a:null;if(field!==null){saveData.tags[tagCat]=field.getValue(!0)}}
setButtonLoading(saveBtn_1,!0);jquery_90.default.post(BuilderConfig_21.wbConfig.getRawUrl('tplsave'),saveData).done(function(data){if(!msgDialog){msgDialog=new MsgDialog_1.default(__('Save template'))}
if(data.complete){(0,Tags_1.setCurrentTags)(saveData.tags);if(data.tpl)
wb_builder.template=data.tpl;if(data.needRefresh)
wb_builder.templateChooser.reloadContents();msgDialog.setMessage(__('Template saved successfully'),null,'success');dialog.hide()}else{handleErrorMessage(msgDialog,data)}
msgDialog.show();setButtonLoading(saveBtn_1,!1)}).fail(function(){if(!msgDialog){msgDialog=new MsgDialog_1.default(__('Save template'))}
handleErrorMessage(msgDialog,{error:__('Saving template failed')});msgDialog.show();setButtonLoading(saveBtn_1,!1)})},!0)}
fields=dialog.fields;fields.fldName.setValue(wb_builder.template.localId);fields.imagePreview.setValue(((_a=wb_builder.template)===null||_a===void 0?void 0:_a.imagePreview)||'');fields.fldIsPrivate.setValue((wb_builder.template.isPrivate?!0:!1));fields.fldNonTranslatable.setValue((wb_builder.template.nonTranslatable?!0:!1));fields.fldOverwrite.setValue(!0);jquery_90.default.getJSON(BuilderConfig_21.wbConfig.getRawUrl('tpllist'),function(data){tplIds=data.tplIds;var selItem=null,item;if(fields.fldCategory&&data.list&&data.list.length){fields.fldCategory.removeAllItems();var defItem=new DropdownBox_7.DropdownBox.Item('+ '+__('New Item'),'-');fields.fldCategory.addItem(defItem);for(var _i=0,_a=data.list;_i<_a.length;_i++){var li=_a[_i];item=new DropdownBox_7.DropdownBox.Item(li.name,li.id,li);fields.fldCategory.addItem(item);if(li.id===wb_builder.template.categoryId){selItem=item}}
fields.fldCategory.selectItem(selItem)}
categoryChanged();var currentTags=(0,Tags_1.getCurrentTags)();if(data.allTags){for(var _b=0,_c=Object.keys(data.allTags);_b<_c.length;_b++){var tagCat=_c[_b];var tags=data.allTags[tagCat];var fldName='tags'+tagCat[0].toUpperCase()+tagCat.slice(1);var field=fields[fldName];var options=[];Tags_1.Tags[tagCat]=[];for(var _d=0,_e=tags;_d<_e.length;_d++){var tag=_e[_d];Tags_1.Tags[tagCat].push(tag);options.push({id:tag.id,name:tag.name,html:buildTagName(tag),})}
Tags_1.Tags[tagCat].sort(Tags_1.sortTags);options.sort(Tags_1.sortTags);field.reload([]);field.reload(options);if(currentTags!==null&&currentTags[tagCat]){field.setValue(currentTags[tagCat],!0)}else if(currentTags===null&&wb_builder.template.tags&&wb_builder.template.tags[tagCat]){field.setValue(wb_builder.template.tags[tagCat],!0)}}}
if(currentTags===null){(0,Tags_1.setCurrentTags)(wb_builder.template.tags?wb_builder.template.tags:{})}});overwriteChanged();fields.currentTemplate.setText('('+wb_builder.template.id+')');dialog.show()}
exports.saveAsTemplate=saveAsTemplate});define("js/ElementCompositionAdmin",["require","exports","jquery","js/Service","Dialog","MsgDialog"],function(require,exports,jquery_91,Service_32,Dialog_11,MsgDialog_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.openDialog=exports.ElementCompositionAdminModule=void 0;var saveMessageDialog=null;var ElementCompositionAdminModule=(function(){function ElementCompositionAdminModule(){}
ElementCompositionAdminModule.saveComposition=function(){if(!wb_builder.bodyInstance||wb_builder.getEditingLocked())
return;var elements=wb_builder.bodyInstance.getContentElements();if(!saveMessageDialog)
saveMessageDialog=new MsgDialog_2.default(__('Save Element Composition'));Service_32.Service.ElementComposition.saveComposition('',elements,function(){if(saveMessageDialog){saveMessageDialog.setMessage(__('Element composition saved successfully'),'','success');saveMessageDialog.show()}},function(msg){if(saveMessageDialog){saveMessageDialog.setMessage(msg,'Error','error');saveMessageDialog.show()}})};ElementCompositionAdminModule.openDialog=function(){if(!ElementCompositionAdminModule.dialog){ElementCompositionAdminModule.dialog=new ElementCompositionAdminDialog()}
ElementCompositionAdminModule.dialog.setVisible(!0)};return ElementCompositionAdminModule}());exports.ElementCompositionAdminModule=ElementCompositionAdminModule;var ElementCompositionAdminDialog=(function(_super){__extends(ElementCompositionAdminDialog,_super);function ElementCompositionAdminDialog(){var _this=_super.call(this,__('Save Element Composition'),!1)||this;_this.setContent(new Service_32.Service.UIBuilder([{type:'VerticalLayout',id:'container'}],_this.fields));_this.addButton(__('Cancel'),function(){_this.setVisible(!1)});_this.addButton(__('Save'),function(){if(!_this.msgDialog)
_this.msgDialog=new MsgDialog_2.default(__('Save Element Composition'));var elements=_this.getSelectedElements();Service_32.Service.ElementComposition.saveComposition(_this.fields.compositionId.getValue(),_this.getSelectedElements(),function(){_this.setVisible(!1);_this.msgDialog.setMessage(__('Element composition saved successfully'),'','success');_this.msgDialog.show()},function(msg){_this.msgDialog.setMessage(msg,'Error','error');_this.msgDialog.show()})},!0);return _this}
ElementCompositionAdminDialog.prototype.onShow=function(){var elem=this.getSelectedElements();if(!elem.length){this.showEmptyBlock()}else{this.showSavingBlock()}};ElementCompositionAdminDialog.prototype.showSavingBlock=function(){if(!this.savingBlock){this.savingBlock=(new Service_32.Service.UIBuilder([{type:'VerticalLayout',children:[{type:'Label',text:'Composition ID',helpText:__('ID of the new element composition. If field is left blank then next available number will be used automatically. Otherwise if composition with specified ID already exists it will be overwritten.')},{type:'TextField',id:'compositionId'}]}],this.fields)).getElem();this.fields.container.getElem().append(this.savingBlock)}
if(this.emptyBlock)
this.emptyBlock.hide();this.savingBlock.show()};ElementCompositionAdminDialog.prototype.showEmptyBlock=function(){if(!this.emptyBlock){this.emptyBlock=(0,jquery_91.default)('<div>').addClass('alert alert-info').html(__('At least one element must be selected'));this.fields.container.getElem().append(this.emptyBlock)}
if(this.savingBlock)
this.savingBlock.hide();this.emptyBlock.show()};ElementCompositionAdminDialog.prototype.getSelectedElements=function(){var elems=Service_32.Service.element.getSelected();var selected=[];for(var i in elems)
selected.push(elems[i]);return selected};return ElementCompositionAdminDialog}(Dialog_11.default));function openDialog(){ElementCompositionAdminModule.openDialog()}
exports.openDialog=openDialog});define("js/ui/InactivePublish",["require","exports","js/core/BuilderConfig","js/CustomContainer","Dialog","js/FlexLayout","jquery","js/UIButton"],function(require,exports,BuilderConfig_22,CustomContainer_7,Dialog_12,FlexLayout_6,jquery_92,UIButton_16){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.show=exports.required=void 0;var InactivePublishDialog=(function(_super){__extends(InactivePublishDialog,_super);function InactivePublishDialog(){var _this=_super.call(this)||this;_this.closeBtn=new CustomContainer_7.CustomContainer('span').addClass('close').setContent('&times;').on('click',function(){return _this.handleCancel()});_this.button=new UIButton_16.UIButton(__('Activate'),UIButton_16.UIButton.STYLE_SUCCESS).setButtonSize(UIButton_16.UIButton.SIZE_LARGE).on('click',function(){return _this.handleConfirm()});_this.deferred=null;_this.setMaxWidth(720,!0);_this.setTitleVisible(!1);_this.setFooterVisible(!1);_this.setContent(new FlexLayout_6.FlexLayout('column','flex-start','center').addClass('wb-inactive-publish').addAllChildren([_this.closeBtn,new CustomContainer_7.CustomContainer('h1').setContent(__("Publish")+': <span>'+__("Action failed")+'</span>'),new CustomContainer_7.CustomContainer('small').setContent('('+__("Website")+': '+__("Inactive")+')'),new CustomContainer_7.CustomContainer('p').setContent(__("To activate website you need a domain: parked, delegated or purchased.")),_this.button,new CustomContainer_7.CustomContainer('small').setContent('('+__("Page saved successfully")+')')]));return _this}
InactivePublishDialog.prototype.setDeferred=function(deferred){this.deferred=deferred};InactivePublishDialog.prototype.handleCancel=function(){var _a;this.setVisible(!1);(_a=this.deferred)===null||_a===void 0?void 0:_a.reject()};InactivePublishDialog.prototype.handleConfirm=function(){var _a;this.button.setIcon('fa fa-spinner fa-pulse');this.button.setButtonStyle(UIButton_16.UIButton.STYLE_DEFAULT);this.button.setEnabled(!1);location.href=BuilderConfig_22.wbConfig.websitesUrl;(_a=this.deferred)===null||_a===void 0?void 0:_a.resolve()};return InactivePublishDialog}(Dialog_12.default));var dialog=null;function required(){return BuilderConfig_22.wbConfig.inactiveMode}
exports.required=required;function show(){if(!dialog)
dialog=new InactivePublishDialog();var deferred=jquery_92.default.Deferred();dialog.setDeferred(deferred);wb_builder.save(!0,function(){return dialog===null||dialog===void 0?void 0:dialog.setVisible(!0)});return deferred.promise()}
exports.show=show});define("js/ui/BaseConfirmDialog",["require","exports","Dialog","js/Service","js/VerticalLayout","js/CustomContainer","jquery"],function(require,exports,Dialog_13,Service_33,VerticalLayout_27,CustomContainer_8,jquery_93){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.showDeferred=exports.BaseConfirmDialog=void 0;var BaseConfirmDialog=(function(_super){__extends(BaseConfirmDialog,_super);function BaseConfirmDialog(title,question,description,icon,cancelBtn,confirmBtn,noCloseOnConfirm){if(noCloseOnConfirm===void 0){noCloseOnConfirm=!1}
var _this=_super.call(this,title,!1)||this;_this.deferred=null;_this.setContent(new Service_33.Service.UIBuilder({type:VerticalLayout_27.VerticalLayout,styleClass:'wb-confirm-dlg-body',children:[{type:CustomContainer_8.CustomContainer,content:"\n\t\t\t\t\t<div class=\"wb-confirm-dlg-icon\"><span class=\"".concat(icon,"\"></span></div>\n\t\t\t\t\t<h4 class=\"wb-confirm-dlg-question\">").concat(question,"</h4>\n\t\t\t\t\t<p class=\"wb-confirm-dlg-desc\">").concat(description.replace(/[\r\n]+/g,'<br/>'),"</p>\n\t\t\t\t")},{type:'CheckBox',id:'confirm',label:__('Got it'),value:!1},]},_this.fields));var thisNoCloseOnConfirm=noCloseOnConfirm;_this.addButton(cancelBtn,function(){return _this.onCancel()});_this.addButton(confirmBtn,function(){return _this.onConfirm(thisNoCloseOnConfirm)},!0,'btn-danger');_this.footerElem.addClass('wb-confirm-dlg-footer');_this.setFooterVisible(!0);_this.setMaxWidth(480);return _this}
BaseConfirmDialog.prototype.setDeferred=function(deferred){this.deferred=deferred};BaseConfirmDialog.prototype.onConfirm=function(noCloseOnConfirm){if(noCloseOnConfirm===void 0){noCloseOnConfirm=!1}
if(!this.fields.confirm.getValue()){var cb_1=this.fields.confirm.getElem();cb_1.stop(!0,!1).animate({backgroundColor:'#d64b46'},60,function(){cb_1.stop(!0,!1).animate({backgroundColor:''},400,function(){cb_1.css({backgroundColor:''})})});return}
if(!noCloseOnConfirm)
this.setVisible(!1);if(this.deferred)
this.deferred.resolve();};BaseConfirmDialog.prototype.onCancel=function(){this.setVisible(!1);if(this.deferred)
this.deferred.reject();};return BaseConfirmDialog}(Dialog_13.default));exports.BaseConfirmDialog=BaseConfirmDialog;function showDeferred(dialog){var deferred=jquery_93.default.Deferred();dialog.setDeferred(deferred);dialog.fields.confirm.setValue(!1);dialog.setVisible(!0);return deferred}
exports.showDeferred=showDeferred});define("js/ui/MigrateBackDialog",["require","exports","js/ui/BaseConfirmDialog","js/Service","jquery","js/core/BuilderConfig"],function(require,exports,BaseConfirmDialog_1,Service_34,jquery_94,BuilderConfig_23){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.initPanel=exports.show=void 0;var dialog=null;function show(){if(!dialog)
dialog=new BaseConfirmDialog_1.BaseConfirmDialog(__("Return to the old builder version"),__("Are you sure you want to return to the old builder version?"),__("All the changes made in the new builder version will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes")+", "+__("Return"));return(0,BaseConfirmDialog_1.showDeferred)(dialog)}
exports.show=show;function initPanel(panel){if(!wb_builder.responsivePro||!wb_builder.migrateBackUrl||wb_builder.migrateBackHide)
return;var builderApi=Service_34.Service.uiManager.getApiInstance();var elem=(0,jquery_94.default)('<div>').addClass('wb-migrate-back-panel').append((0,jquery_94.default)('<span>').addClass('wb-migrate-back-close').html('&times;').on('click',function(){panel.remove(panelItem);jquery_94.default.getJSON(BuilderConfig_23.wbConfig.lnBaseUrl+'site/hide-migrate-back')})).append((0,jquery_94.default)('<div>').addClass('wb-migrate-back-text').text(__('Unhappy with changes?'))).append((0,jquery_94.default)('<button>').addClass('btn btn-danger').text(__('Return to the old builder version')).on('click',function(){return builderApi.migrateBack()}));var panelItem=panel.add("migrate",elem,!0)}
exports.initPanel=initPanel});define("js/ui/ResetTemplateDialog",["require","exports","js/ui/BaseConfirmDialog"],function(require,exports,BaseConfirmDialog_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.getDialog=exports.show=void 0;var dialog=null;function show(noCloseOnConfirm){if(noCloseOnConfirm===void 0){noCloseOnConfirm=!1}
return(0,BaseConfirmDialog_2.showDeferred)(getDialog(noCloseOnConfirm))}
exports.show=show;function getDialog(noCloseOnConfirm){if(noCloseOnConfirm===void 0){noCloseOnConfirm=!1}
if(!dialog)
dialog=new BaseConfirmDialog_2.BaseConfirmDialog(__("Reset"),__("Are you sure you want to reset current template?"),__("Once reset your information will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes, reset template"),noCloseOnConfirm);return dialog}
exports.getDialog=getDialog});define("js/ui/CompositionMenu",["require","exports","js/ContextMenu","js/ElementRegister","js/PluginApi/UIManager","js/Service","js/util/HistoryUtil"],function(require,exports,ContextMenu_3,ElementRegister_8,UIManager_1,Service_35,HistoryUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.showCompositionsMenu=exports.showAllCompositionsMenu=void 0;var compoMenu=null;var compoAllMenu=null;function showAllCompositionsMenu(e,ref){if(!compoAllMenu){compoAllMenu={menu:new ContextMenu_3.ContextMenu(),ref:ref};compoAllMenu.menu.setGridView();var collections=(0,UIManager_1.getApiInstance)().getCompositionCollections();var _loop_19=function(collection){if(collection.name=='-'){return"continue"}
compoAllMenu.menu.addItem('wb-elcol-'+collection.id,collection.name,function(){var builderApi=Service_35.default.uiManager.getApiInstance();builderApi.addElementAt(collection.id,45,30)},!1,collection.inactive,null,collection.icon)};for(var _i=0,collections_2=collections;_i<collections_2.length;_i++){var collection=collections_2[_i];_loop_19(collection)}}
compoAllMenu.menu.show(e)}
exports.showAllCompositionsMenu=showAllCompositionsMenu;function showCompositionsMenu(e,ref,after){if(!compoMenu){compoMenu={menu:new ContextMenu_3.ContextMenu(),ref:ref,after:after};var collections=(0,UIManager_1.getApiInstance)().getCompositionCollections();var _loop_20=function(collection){if(collection.name=='-'){compoMenu.menu.addSeparator();return"continue"}
compoMenu.menu.addItem('wb-elcol-'+collection.id,collection.name,function(){ElementRegister_8.ElementRegister.createElementOrComposition(collection.id,null,function(items){if(!compoMenu)
return;insertElements(items,compoMenu.ref,compoMenu.after)})},!1,!1,null,collection.icon,!1,!0,collection.inactive)};for(var _i=0,collections_3=collections;_i<collections_3.length;_i++){var collection=collections_3[_i];_loop_20(collection)}}
compoMenu.menu.setGridView();compoMenu.ref=ref;compoMenu.after=after;compoMenu.menu.show(e)}
exports.showCompositionsMenu=showCompositionsMenu;function insertElements(items,ref,after){if(!ref.parent)
return;var contData=ref.serialize();var defData={content:{layout:contData.content.layout},width:'100%'};ElementRegister_8.ElementRegister.createElement(ref.getClassType(),defData,!1,!1,function(cont){if(!ref.parent)
return;ref.parent.addChild(cont,!1,!1,ref,after);cont.updateStyle();for(var _i=0,items_6=items;_i<items_6.length;_i++){var item=items_6[_i];cont.addChild(item);item.updateStyle()}(0,HistoryUtil_1.createAddElementsHistoryRecord)(__spreadArray([cont],items,!0))})}});define("js/ui/ShareAccessDialog",["require","exports","jquery","AlertBox","js/CheckBox","js/CustomContainer","Dialog","js/FlexLayout","js/IFrameControl","TabbedPane","js/core/BuilderConfig","js/util/FlowStepUtil"],function(require,exports,jquery_95,AlertBox_2,CheckBox_8,CustomContainer_9,Dialog_14,FlexLayout_7,IFrameControl_3,TabbedPane_1,BuilderConfig_24,FlowStepUtil_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.open=void 0;var instance=null;var DIALOG_CONTENT_HEIGHT='215px';function open(){if(!instance)
instance=new ShareAccessDialog();instance.setVisible(!0)}
exports.open=open;var LinkField=(function(_super){__extends(LinkField,_super);function LinkField(){var _this=_super.call(this)||this;_this.valueInput=(0,jquery_95.default)('<input>').attr({type:'text',readonly:'readonly'}).addClass('form-control');_this.copyBtn=(0,jquery_95.default)('<button>').attr({type:'button'}).addClass('btn btn-default').append((0,jquery_95.default)('<span>').addClass('fa fa-files-o')).on('click',function(){return _this.copyValueToClipboard()});_this.value={id:'',url:''};_this.addClass('input-group').getElem().append(_this.valueInput).append((0,jquery_95.default)('<span>').addClass('input-group-btn').append(_this.copyBtn));return _this}
LinkField.prototype.copyValueToClipboard=function(){var inp=this.valueInput[0];inp.value=this.value.url;inp.focus();if(typeof inp.setSelectionRange==='function'){inp.setSelectionRange(0,inp.value.length)}else{inp.select()}
document.execCommand('copy')};LinkField.prototype.setValue=function(value){this.value=value;this.valueInput.val(value.url)};LinkField.prototype.getValue=function(){return this.value};return LinkField}(CustomContainer_9.CustomContainer));var BigIcon=(function(_super){__extends(BigIcon,_super);function BigIcon(){var _this=_super.call(this,'span')||this;_this.addClass('fa fa-users').css({display:'inline-block',fontSize:'64px',color:'#333333',textAlign:'center',margin:'20px 0',});return _this}
return BigIcon}(CustomContainer_9.CustomContainer));var Spinner=(function(_super){__extends(Spinner,_super);function Spinner(){var _this=_super.call(this,'span')||this;_this.addClass('fa fa-spinner fa-pulse');return _this}
return Spinner}(CustomContainer_9.CustomContainer));function loadShareLinks(){return jquery_95.default.ajax(BuilderConfig_24.wbConfig.getRawUrl('api/collab/load-links'),{type:'GET',async:!0,}).promise()}
function createShareLink(){return jquery_95.default.ajax(BuilderConfig_24.wbConfig.getRawUrl('api/collab/create-link'),{data:JSON.stringify({}),contentType:'application/json',type:'POST',async:!0,}).promise()}
function deleteShareLink(id){return jquery_95.default.ajax(BuilderConfig_24.wbConfig.getRawUrl('api/collab/delete-link'),{data:JSON.stringify({id:id}),contentType:'application/json',type:'POST',async:!0,}).promise()}
var ShareAccessDialog=(function(_super){__extends(ShareAccessDialog,_super);function ShareAccessDialog(){var _this=this;var _a,_b;_this=_super.call(this,__("Share access"))||this;_this.mainLayout=new FlexLayout_7.FlexLayout("column");_this.bigIcon=new BigIcon();_this.enableLinkShareCheckbox=new CheckBox_8.default(__("Enable link to share access for everyone")).onChange(function(it){return _this.setLinkShareEnabled(it)});_this.linkField=new LinkField();_this.spinner=new Spinner();_this.alertBox=new AlertBox_2.default();_this.isLinkShareEnabled=!1;_this.isLinkShareLoading=!1;_this.isShareLinkCreatedWhenOpened=!1;_this.setFooterVisible(!1);if(BuilderConfig_24.wbConfig.isB2C&&BuilderConfig_24.wbConfig.b2cShareUrl){var tabs=new TabbedPane_1.default();var linkTab=tabs.addTab(__("Access using link"));(_a=linkTab.contentElem)===null||_a===void 0?void 0:_a.css({lineHeight:'1px'});_this.mainLayout.addAllChildren([_this.enableLinkShareCheckbox,]).css({minHeight:DIALOG_CONTENT_HEIGHT}).getElem().appendTo(linkTab.contentElem);var emailTab=tabs.addTab(__("Access using email"));(_b=emailTab.contentElem)===null||_b===void 0?void 0:_b.css({lineHeight:'1px',margin:'0 -10px'});new IFrameControl_3.IFrameControl(BuilderConfig_24.wbConfig.b2cShareUrl).css({width:'100%',height:DIALOG_CONTENT_HEIGHT}).getElem().appendTo(emailTab.contentElem);_this.setContent(tabs);tabs.selectTab(0)}else{_this.setContent(_this.mainLayout.addAllChildren([_this.bigIcon,_this.enableLinkShareCheckbox,]))}
return _this}
ShareAccessDialog.prototype.setVisible=function(visible,noAction,ignoreEvent){var _this=this;_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent);if(visible&&!this.isLinkShareLoading){this.isLinkShareLoading=!0;this.isShareLinkCreatedWhenOpened=!1;this.enableLinkShareCheckbox.setEnabled(!1);this.mainLayout.removeChild(this.alertBox);this.mainLayout.addChild(this.spinner);loadShareLinks().done(function(resp){if(resp&&resp.ok){if(resp.data&&resp.data.length>0){_this.isLinkShareEnabled=!0;_this.enableLinkShareCheckbox.setValue(!0);_this.linkField.setValue(resp.data[0]);_this.mainLayout.addChild(_this.linkField);_this.isShareLinkCreatedWhenOpened=!0}else{_this.isLinkShareEnabled=!1;_this.enableLinkShareCheckbox.setValue(!1);_this.linkField.setValue({id:'',url:''});_this.mainLayout.removeChild(_this.linkField)}}else{_this.alertBox.setError((resp===null||resp===void 0?void 0:resp.error)||'Error');_this.mainLayout.addChild(_this.alertBox)}}).fail(function(err){_this.alertBox.setError(err||'Error');_this.mainLayout.addChild(_this.alertBox)}).always(function(){_this.isLinkShareLoading=!1;_this.enableLinkShareCheckbox.setEnabled(!0);_this.mainLayout.removeChild(_this.spinner)});(0,FlowStepUtil_2.forwardFlowStep)(BuilderConfig_24.wbConfig,FlowStepUtil_2.FlowStep.OpenShareDialog,!0)}else if(!visible&&!this.isShareLinkCreatedWhenOpened&&this.enableLinkShareCheckbox.getValue()){this.isShareLinkCreatedWhenOpened=!0;(0,FlowStepUtil_2.forwardFlowStep)(BuilderConfig_24.wbConfig,FlowStepUtil_2.FlowStep.CompleteLinkShare,!0)}};ShareAccessDialog.prototype.setLinkShareEnabled=function(enabled){var _this=this;if(this.isLinkShareEnabled===enabled||this.isLinkShareLoading)
return;if(this.isLinkShareEnabled&&!enabled&&!confirm(__("Are you sure you want to disable this share link?"))){this.enableLinkShareCheckbox.setValue(this.isLinkShareEnabled);return}
this.isLinkShareEnabled=enabled;this.isLinkShareLoading=!0;this.enableLinkShareCheckbox.setEnabled(!1);this.mainLayout.removeChild(this.alertBox);this.mainLayout.addChild(this.spinner);var promise;if(enabled){promise=createShareLink().done(function(resp){if(resp&&resp.ok&&resp.data){_this.linkField.setValue(resp.data[0]);_this.mainLayout.addChild(_this.linkField)}else{_this.alertBox.setError((resp===null||resp===void 0?void 0:resp.error)||'Error');_this.mainLayout.addChild(_this.alertBox)}})}else{var link=this.linkField.getValue();promise=deleteShareLink(link.id).done(function(resp){if(resp&&resp.ok&&resp.data){_this.linkField.setValue({id:'',url:''});_this.mainLayout.removeChild(_this.linkField);_this.isShareLinkCreatedWhenOpened=!1}else{_this.alertBox.setError((resp===null||resp===void 0?void 0:resp.error)||'Error');_this.mainLayout.addChild(_this.alertBox)}})}
promise.fail(function(err){_this.alertBox.setError(err||'Error');_this.mainLayout.addChild(_this.alertBox)}).always(function(){_this.isLinkShareLoading=!1;_this.enableLinkShareCheckbox.setEnabled(!0);_this.mainLayout.removeChild(_this.spinner)})};return ShareAccessDialog}(Dialog_14.default))});define("js/PluginApi/BuilderApi",["require","exports","js/ElementRegister","js/Service","js/GridAndGuidesDialog","js/HelpSystem/HelpOverlay","js/RemoteLoginDialog","js/admin/Templates","js/ElementCompositionAdmin","js/CommonTypes","js/element/MoveRelativeHandle","js/ui/InactivePublish","js/ui/MigrateBackDialog","js/ui/ResetTemplateDialog","js/util/DropZoneCalculator","js/util/HistoryUtil","jquery","js/util/FlowStepUtil","js/ui/CompositionMenu","js/core/Collaboration","js/ui/ShareAccessDialog"],function(require,exports,ElementRegister_9,Service_36,GridAndGuidesDialog_1,HelpOverlay_1,RemoteLoginDialog_1,Templates_1,ElementCompositionAdmin_1,CommonTypes_12,MoveRelativeHandle_1,InactivePublish_1,MigrateBackDialog,ResetTemplateDialog_1,DropZoneCalculator_1,HistoryUtil_2,jquery_96,FlowStepUtil_3,CompositionMenu_1,Collaboration_4,ShareAccessDialog_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BuilderApi=exports.BuilderCanvas=void 0;var BuilderCompositionType;(function(BuilderCompositionType){BuilderCompositionType.Icon="icon";BuilderCompositionType.IconAndText="icon_and_text";BuilderCompositionType.Render="render";BuilderCompositionType.RenderAndText="render_and_text"})(BuilderCompositionType||(BuilderCompositionType={}));var BuilderCanvas=(function(){function BuilderCanvas(elem){this.elem=elem;elem.addClass('wb-body')}
BuilderCanvas.prototype.append=function(elem){this.elem.append(elem)};BuilderCanvas.prototype.before=function(elem){this.elem.before(elem)};BuilderCanvas.prototype.on=function(event,handler){this.elem.on(event,handler);return this};BuilderCanvas.prototype.off=function(event,handler){this.elem.off(event,handler);return this};BuilderCanvas.prototype.contains=function(other){return this.elem[0].contains(other)};BuilderCanvas.prototype.setVisible=function(visible){if(visible){this.elem[0].style.display=''}else{this.elem[0].style.display='none'}};BuilderCanvas.prototype.getBounds=function(){return this.elem[0].getBoundingClientRect()};BuilderCanvas.prototype.setRightMargin=function(margin){this.elem[0].style.marginRight=margin+'px';this.elem.trigger('rect-changed')};return BuilderCanvas}());exports.BuilderCanvas=BuilderCanvas;var BuilderApi=(function(){function BuilderApi(builder,wbConfig){this.builder=builder;this.wbConfig=wbConfig;this.blocksCollection=null}
BuilderApi.prototype.getSiteMenus=function(){var _this=this;console.error("Deprecated BuilderApi.getSiteMenus() is used. Use BuilderApi.getSiteTree() instead.");var siteTree=this.getSiteTree();var items=[];var buildItems=function(nodes,level){if(level===void 0){level=0}
for(var _i=0,nodes_1=nodes;_i<nodes_1.length;_i++){var node=nodes_1[_i];var item={id:node.id,name:node.name,fullName:node.name,lvl:level,isCurrent:node.isCurrent,preview:node.preview,navigate:node.navigate,};items.push(item);buildItems(node.children,level+1)}};buildItems(siteTree);return[{items:items,hasOnlyLinks:function(){return!1},isEditable:function(){return!0},isRemovable:function(){return!1},edit:function(){_this.showSitePagesDialog()},remove:function(){},}]};BuilderApi.prototype.getSiteTree=function(){return this.builder.site?this.builder.site.getSiteTree():[]};BuilderApi.prototype.getLanguage=function(){for(var _i=0,_a=this.wbConfig.availableLanguages;_i<_a.length;_i++){var lang=_a[_i];if(lang.code!=this.wbConfig.langCode)
continue;return lang}
return null};BuilderApi.prototype.getLanguages=function(){return this.wbConfig.availableLanguages};BuilderApi.prototype.setLanguage=function(language){window.location.href=this.wbConfig.getLangSwapUrl(language.default?"":language.code)};BuilderApi.prototype.getSiteDomain=function(){return this.builder.siteDomain};BuilderApi.prototype.getSiteUrl=function(){return'http://'+this.builder.siteDomain};BuilderApi.prototype.getLogoUrl=function(){return this.wbConfig.getLogoUrl()};BuilderApi.prototype.getLogoMobileUrl=function(){return this.wbConfig.getLogoMobileUrl()};BuilderApi.prototype.getBaseUrl=function(includeLanguage){if(includeLanguage===void 0){includeLanguage=!1}
return includeLanguage?this.wbConfig.lnBaseUrl:this.wbConfig.baseUrl};BuilderApi.prototype.getPanelUrl=function(){return this.builder.panelUrl};BuilderApi.prototype.getB2cDomainsUrl=function(){return this.wbConfig.b2cDomainsUrl};BuilderApi.prototype.canShareAccess=function(){return(!this.wbConfig.testMode&&!this.wbConfig.isComposer&&(this.wbConfig.collaboration?!0:!1)&&!this.wbConfig.isShareLinkUser)};BuilderApi.prototype.openShareAccess=function(){(0,ShareAccessDialog_1.open)()};BuilderApi.prototype.isB2C=function(){return!!this.wbConfig.isB2C};BuilderApi.prototype.openB2CHelp=function(){if(this.wbConfig.b2cHelpUrl){window.open(this.wbConfig.b2cHelpUrl)}};BuilderApi.prototype.getWasPublished=function(){return this.builder.wasPublished};BuilderApi.prototype.getTranslations=function(){return this.builder.translations};BuilderApi.prototype.getTranslation=function($msg){return this.builder.translations[$msg]||$msg};BuilderApi.prototype.getSignUpInfo=function(){var info=this.builder.testSignUpBtn;return info?{title:__trr(info.title),url:__trr(info.url).replace('{{siteDomain}}',this.builder.siteDomain)}:null};BuilderApi.prototype.getPlanUpgradeUrl=function(){return this.wbConfig.upgradeUrl};BuilderApi.prototype.getCompositionCollections=function(){var list=this.builder.pluginToolbar;return list};BuilderApi.prototype.isRtl=function(){return this.builder.rtl};BuilderApi.prototype.isTouchDevice=function(){return this.builder.isTouchDevice};BuilderApi.prototype.isTestMode=function(){return this.wbConfig.testMode};BuilderApi.prototype.isTestModeByHost=function(){return this.wbConfig.isTestModeByHost};BuilderApi.prototype.isAdminMode=function(){return this.wbConfig.adminMode};BuilderApi.prototype.isComposerMode=function(){return this.builder.isComposer};BuilderApi.prototype.isEditingLocked=function(){return this.builder.getEditingLocked()};BuilderApi.prototype.isTestPublishEnabled=function(){return this.builder.testPublishEnabled&&!this.builder.getEditingLocked()};BuilderApi.prototype.isImportAvailable=function(){return this.wbConfig.enableImport&&!this.builder.getEditingLocked()};BuilderApi.prototype.isImportVisible=function(){return!this.wbConfig.hideImport};BuilderApi.prototype.isTemplateSelectorVisible=function(){return!this.builder.hideTemplateSelector&&!this.builder.getEditingLocked()};BuilderApi.prototype.isResetTemplateButtonVisible=function(){return!this.builder.hideResetTemplateButton&&!this.builder.getEditingLocked()};BuilderApi.prototype.showImportDialog=function(){Service_36.Service.websiteImporter.showImportDialog()};BuilderApi.prototype.isHistoryUndoAvailable=function(){return this.builder.historyHasUndo()&&!this.builder.getEditingLocked()};BuilderApi.prototype.isHistoryRedoAvailable=function(){return this.builder.historyHasRedo()&&!this.builder.getEditingLocked()};BuilderApi.prototype.isHelpChatAvailable=function(){return Service_36.Service.help.isHelpChatAvailable()};BuilderApi.prototype.showHelpChatDialog=function(){Service_36.Service.help.showHelpChatDialog()};BuilderApi.prototype.isLayoutPopupMode=function(){return!!this.builder.layoutPopupMode};BuilderApi.prototype.getLayoutPopupWidth=function(){return this.isLayoutPopupMode()?parseInt(this.builder.layoutPopupWidth):0};BuilderApi.prototype.getLayoutPopupHeight=function(){return this.isLayoutPopupMode()?parseInt(this.builder.layoutPopupHeight):0};BuilderApi.prototype.isPublishAvailable=function(){return!!((!this.isTestMode()||RemoteLoginDialog_1.RemoteLoginDialog.available()||this.builder.testSignUpBtn)&&(!this.isAdminMode()||this.isTestPublishEnabled())&&!this.builder.publishBlocked)};BuilderApi.prototype.publish=function(){if(this.builder.getEditingLocked())
return;if(this.isTestMode()&&!this.isTestPublishEnabled()){if(RemoteLoginDialog_1.RemoteLoginDialog.available()){RemoteLoginDialog_1.RemoteLoginDialog.setVisible(!0,!1,!1,"DemoTemplate")}else{var signUpInfo=this.getSignUpInfo();if(signUpInfo)
window.open(signUpInfo.url);}}else if((0,InactivePublish_1.required)()){(0,InactivePublish_1.show)()}else if(this.isPublishAvailable()){this.builder.publish()}};BuilderApi.prototype.preview=function(){return this.builder.preview(this.builder.previewToolbar)};BuilderApi.prototype.reloadPreview=function(){this.builder.preview(this.builder.previewToolbar,!0)};BuilderApi.prototype.hidePreview=function(){this.builder.previewToolbar.close()};BuilderApi.prototype.setPreviewWidth=function(width){this.builder.previewToolbar.setPreviewWidth(width)};BuilderApi.prototype.getMaxPreviewWidth=function(){return this.builder.previewToolbar.getMaxPreviewWidth()};BuilderApi.prototype.savePage=function(page){return this.builder.savePage(page)};BuilderApi.prototype.movePage=function(page,referencePage,position){return this.builder.movePage(page,referencePage,position)};BuilderApi.prototype.deletePage=function(page){return this.builder.deletePage(page)};BuilderApi.prototype.save=function(useDialog,callback){if(this.builder.getEditingLocked())
return;if(this.isTestMode()&&this.isTestModeByHost()&&!this.isTestPublishEnabled()&&RemoteLoginDialog_1.RemoteLoginDialog.available()){RemoteLoginDialog_1.RemoteLoginDialog.setVisible(!0,!1,!1,"DemoTemplate")}else{this.builder.save(useDialog,callback)}};BuilderApi.prototype.isTemplateSavingAvailable=function(){return this.isAdminMode()};BuilderApi.prototype.isTemplateSavingEnabled=function(){return(this.wbConfig.locale=='en_US'||this.wbConfig.isEnterprise)&&!this.builder.getEditingLocked()};BuilderApi.prototype.showSaveAsTemplateDialog=function(){this.builder.save(!1,function(success){if(success)(0,Templates_1.saveAsTemplate)();},null,!1,!1,!1)};BuilderApi.prototype.isBlockSavingAvailable=function(){return this.isComposerMode()};BuilderApi.prototype.isBlockSavingEnabled=function(){return this.isElementCompositionSavingEnabled()&&!this.builder.getEditingLocked()};BuilderApi.prototype.showSaveBlockDialog=function(){this.saveElementComposition()};BuilderApi.prototype.isElementCompositionSavingEnabled=function(){return this.wbConfig.locale=='en_US'};BuilderApi.prototype.saveElementComposition=function(){ElementCompositionAdmin_1.ElementCompositionAdminModule.saveComposition()};BuilderApi.prototype.goToPage=function(pageId,customUrl){this.builder.goToPage(pageId,customUrl)};BuilderApi.prototype.historyUndo=function(){this.builder.historyUndo()};BuilderApi.prototype.historyRedo=function(){this.builder.historyRedo()};BuilderApi.prototype.showBackupRestoreDialog=function(){this.builder.backupRestore()};BuilderApi.prototype.showTemplateChooser=function(){if(!this.builder.getEditingLocked())
this.builder.templateChooser.setVisible(!0);};BuilderApi.prototype.resetSite=function(needComfirmDialog){var _this=this;if(needComfirmDialog===void 0){needComfirmDialog=!1}
if(this.builder.getEditingLocked())
return;if(needComfirmDialog){(0,ResetTemplateDialog_1.show)(wb_builder.autoBackupsEnable).then(function(){return _this.resetSite(!1)});return}
var dialog=(0,ResetTemplateDialog_1.getDialog)();var clb=function(){(0,Collaboration_4.updateModuleProperties)('SiteModule',{reset:!0});location.href=_this.wbConfig.getLnUrl(_this.builder.resetUri)};if(wb_builder.autoBackupsEnable){dialog.setLoading(!0);this.builder.save(!1,function(){dialog.setLoading(!1);dialog.setVisible(!1);clb()},undefined,undefined,undefined,undefined,undefined,undefined,undefined,!0)}else{clb()}};BuilderApi.prototype.addBlockInto=function(container,e){if(this.builder.getEditingLocked())
return;if(!this.blocksCollection){var blocksName=__('Blocks').toLowerCase();for(var _i=0,_a=this.getCompositionCollections();_i<_a.length;_i++){var col=_a[_i];if((col.name||'').toLowerCase()==blocksName&&col.enabled){this.blocksCollection=col;break}}}
if(this.blocksCollection){if(this.blocksCollection.inactive&&container.getClassType()=='LayoutElement'){(0,CompositionMenu_1.showAllCompositionsMenu)(e,container)}else{var groupId=undefined;if(container.rootBlockType==CommonTypes_12.ContentBlockId.Header){groupId='header'}else if(container.rootBlockType==CommonTypes_12.ContentBlockId.Main){groupId='welcome'}else if(container.rootBlockType==CommonTypes_12.ContentBlockId.Footer){groupId='footer'}
this.addElementAt(this.blocksCollection.id+(groupId?"/".concat(groupId):''),0,0,container)}}else{console.error("Blocks collection not found")}};BuilderApi.prototype.addElementAt=function(elementId,cx,cy,container){var _this=this;if(container===void 0){container=null}
if(!elementId)
return;if(this.builder.getEditingLocked())
return;if(typeof elementId==='string'){if(document.activeElement)(0,jquery_96.default)(document.activeElement).trigger('blur');var coll=null;var rawCollId=elementId.split('/',2)[0];for(var _i=0,_a=this.getCompositionCollections();_i<_a.length;_i++){var potentialColl=_a[_i];if(potentialColl.id===rawCollId){coll=potentialColl;break}}
if(coll){var dummy_1=Service_36.Service.element.buildDummy(coll.icon,coll.name);var found=!1;if(!container){var selected=Service_36.Service.element.getSelected();for(var selKey in selected){var selElem=selected[selKey];var refElem=void 0;if(selElem.getClassType()=='LayoutElement'){container=selElem;refElem=container.getChildAt(0)}else{container=selElem.getParent();refElem=selElem}
if(!container)
continue;container.addChild(dummy_1,!1,!1,refElem?refElem:undefined,!1);window.requestAnimationFrame(function(){dummy_1.scrollIntoView(!0);setTimeout(function(){return dummy_1.scrollIntoView(!0)},300)});found=!0;break}}
wb_builder.historyBeginGroup();if(!found)
this.addElementInstAt([dummy_1],cx,cy,container,!0);wb_builder.historyEndGroup();ElementRegister_9.ElementRegister.createElementOrComposition(elementId,null,function(items){wb_builder.historyBeginGroup();Service_36.Service.element.replaceDummy(dummy_1,items);if(items.length){_this.unselectAll();items[0].setSelected(!0);items[0].setControlsVisible(!0);_this.builder.setPageModified(!0)}
wb_builder.historyEndGroup()},function(){wb_builder.historyBeginGroup();dummy_1.remove({noHistory:!0});wb_builder.historyEndGroup()})}else{ElementRegister_9.ElementRegister.createElementOrComposition(elementId,null,function(items){_this.addElementInstAt(items,cx,cy,container);(0,HistoryUtil_2.createAddElementsHistoryRecord)(items)})}}else{this.addElementInstAt(elementId,cx,cy,container);(0,HistoryUtil_2.createAddElementsHistoryRecord)(elementId)}};BuilderApi.prototype.adjustPos=function(x,y,bounds,rect,hasFullWidthElements,containerId){var cx,cy;var width=rect.width;var height=rect.height;if(typeof width!=="number")
width=/.*%$/.test(width)?bounds.width*parseFloat(width)/100:0;if(typeof height!=="number")
height=/.*%$/.test(height)?bounds.width*parseFloat(height)/100:0;if(hasFullWidthElements){cx=this.builder.autoSnapX(Math.round((bounds.width-width)/2))}else{cx=this.builder.autoSnapX(Math.max(Math.min(Math.floor(x-width/2),bounds.width-width),0))}
cy=this.builder.autoSnapY(Math.max(Math.min(Math.floor(y-height/2),bounds.height-height),0),containerId);return{x:cx,y:cy}};BuilderApi.prototype.addElementInstAt=function(items,x,y,container,isDummy){if(container===void 0){container=null}
if(isDummy===void 0){isDummy=!1}
if(this.builder.getEditingLocked())
return;if(items.length==0)
return;var bounds=null;var blocks=this.builder.getCurrentContextRootElements();bounds=this.builder.getCurrentContextCanvasClientRect();var win=(0,jquery_96.default)(window);if(Math.round(x)===Math.round(win.width()/2)&&Math.round(y)===Math.round(win.height()/2)){x=bounds.left+bounds.width/2}
var pageX=x-bounds.left;var pageY=y-bounds.top;if(container){bounds=container.getBoundingClientRect()}else{var lastContainer=null;for(var _i=0,blocks_1=blocks;_i<blocks_1.length;_i++){var block=blocks_1[_i];bounds=block.getBoundingClientRect();lastContainer=block;if(bounds.left<=x&&(bounds.left+bounds.width)>=x&&bounds.top<=y&&(bounds.top+bounds.height)>=y){container=lastContainer;break}}
if(!container)
container=lastContainer;if(!container||!bounds)
return}
x-=bounds.left;y-=bounds.top;if(!items[0].getParent()&&!isDummy){this.unselectAll()}
var item;item=items[0];var page=this.builder.site.getPage(this.builder.pageId);if(page&&page.popupMode&&!isDummy){item.isCommon=!1;item.includePages={}}
var itemSize=item.getSizeInPixels();var itemPos={left:this.builder.autoSnapX(x-itemSize.width/2),top:this.builder.autoSnapY(y-itemSize.height/2,container.id)};var calc=new DropZoneCalculator_1.DropZoneCalculator(blocks,null,itemPos,itemSize);if(!calc.dropElementsAt([item],pageX,pageY,window.scrollX,window.scrollY,!0)){item.setLocation(itemPos.left,itemPos.top);container.addChild(item)}
if(!isDummy)
item.setSelected(!0);item.scrollIntoView(!0);if(!isDummy){items[0].setControlsVisible(!0);this.builder.setPageModified(!0)}};BuilderApi.prototype.unselectAll=function(){Service_36.Service.element.unselectAll()};BuilderApi.prototype.getModes=function(){var mm=Service_36.Service.modeManager;var modes=[];for(var _i=0,_a=mm.getModes();_i<_a.length;_i++){var mode=_a[_i];modes.push({id:mode,name:mm.getModeName(mode),width:mm.getModeWidth(mode),})}
return modes};BuilderApi.prototype.getMinMode=function(){return Service_36.Service.modeManager.getMinMode()};BuilderApi.prototype.getMaxMode=function(){return Service_36.Service.modeManager.getMaxMode()};BuilderApi.prototype.compareModes=function(mode1,mode2){return Service_36.Service.modeManager.compareModes(mode1,mode2)};BuilderApi.prototype.setMode=function(mode){};BuilderApi.prototype.isFullScreenSupported=function(){return this.builder.goFullScreen(!0)};BuilderApi.prototype.toggleFullScreen=function(){return this.builder.goFullScreen(!1)};BuilderApi.prototype.showSiteSEODialog=function(){console.error("Deprecated BuilderApi.showSiteSEODialog() is being used. Use BuilderApi.showSitePagesDialog() instead.");if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changePages(this.builder.pageId);};BuilderApi.prototype.showSiteBackgroundDialog=function(){console.error("Deprecated BuilderApi.showSiteBackgroundDialog() is being used. Use BuilderApi.showSitePagesDialog() instead.");if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changePages(this.builder.pageId);};BuilderApi.prototype.showSitePagesDialog=function(){if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changePages(this.builder.pageId);};BuilderApi.prototype.showSiteStylesDialog=function(){if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changeStyles();};BuilderApi.prototype.showSiteFaviconDialog=function(){if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changeFavicon();};BuilderApi.prototype.showSitePropertiesDialog=function(){if(this.builder.getEditingLocked())
return;if(this.builder.site)
this.builder.site.changeProperties();};BuilderApi.prototype.showGridAndGuidesDialog=function(){if(this.builder.getEditingLocked())
return;GridAndGuidesDialog_1.GridAndGuidesDialog.open()};BuilderApi.prototype.getSiteLanding=function(){return!1};BuilderApi.prototype.setSiteLanding=function(enabled){console.log("Deprecated BuilderApi.setSiteLanding() is used. Landing sites are no longer supported.")};BuilderApi.prototype.hideContextMenus=function(){Service_36.Service.contextMenu.hideAll()};BuilderApi.prototype.bindCompositionButton=function(item,start,end){var _this=this;MoveRelativeHandle_1.MoveRelativeHandle.fromToolbarItem({id:item.id,name:item.name,icon:item.icon,elem:item.elem},wb_builder,function(resolver){if(_this.builder.getEditingLocked()){wb_builder.historyBeginGroup();resolver([]);wb_builder.historyEndGroup();if(typeof end==='function')
end();return}
ElementRegister_9.ElementRegister.createElementOrComposition(item.id,null,function(elements){wb_builder.historyBeginGroup();resolver(elements);wb_builder.historyEndGroup()},function(){wb_builder.historyBeginGroup();resolver([]);wb_builder.historyEndGroup()});if(typeof end==='function')
end();},start)};BuilderApi.prototype.getFeaturesetVersion=function(){return wb_builder.builderMajorVersion};BuilderApi.prototype.migrateBack=function(){var _this=this;if(!this.builder.migrateBackUrl||this.builder.getEditingLocked())
return;MigrateBackDialog.show().then(function(){return _this.builder.goToPage(null,_this.builder.migrateBackUrl)})};BuilderApi.prototype.forwardFlowStep=function(step,forAll){if(forAll===void 0){forAll=!1}(0,FlowStepUtil_3.forwardFlowStep)(this.wbConfig,step,forAll)};BuilderApi.prototype.isHelpAvailable=function(){return(0,HelpOverlay_1.isHelpAvailable)()&&!this.builder.getEditingLocked()};BuilderApi.prototype.showHelp=function(){(0,HelpOverlay_1.openHelp)()};BuilderApi.prototype.logout=function(){window.location.href=this.builder.logoutUrl};BuilderApi.prototype.init=function(elem){this.builder.body=new BuilderCanvas((0,jquery_96.default)(elem));this.builder.container=(0,jquery_96.default)(document.body);this.builder.initContinue()};return BuilderApi}());exports.BuilderApi=BuilderApi});define("js/util/ElementUtil",["require","exports","js/jquery-builder","js/Service","js/CommonTypes","js/ElementRegister"],function(require,exports,jquery_builder_15,Service_37,CommonTypes_13,ElementRegister_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.wrapElements=exports.tryWrapElements=void 0;function tryWrapElements(items,target){var targetLayout=target;if(targetLayout.getLayout().type==CommonTypes_13.ChildrenLayoutType.Absolute){return jquery_builder_15.default.Deferred().reject().promise()}
var isRoot=!targetLayout.getParent();var targetHasChildren=targetLayout.getChildren().length;var hasNonLayout=!1;for(var _i=0,items_7=items;_i<items_7.length;_i++){var el=items_7[_i];if(el.getClassType()!='LayoutElement'){hasNonLayout=!0;break}}
if(isRoot&&hasNonLayout&&targetHasChildren===1)
return wrapElements(items);return jquery_builder_15.default.Deferred().reject().promise()}
exports.tryWrapElements=tryWrapElements;function wrapElements(items,layoutType,parent){if(layoutType===void 0){layoutType=CommonTypes_13.ChildrenLayoutType.Horizontal}
if(parent===void 0){parent=null}
var deferred=jquery_builder_15.default.Deferred();var parentData=null;if(parent){parentData=parent.serialize()}
ElementRegister_10.ElementRegister.createElement('LayoutElement',__assign(__assign({},(parentData?parentData:{})),{width:((layoutType===CommonTypes_13.ChildrenLayoutType.Horizontal)?'100%':'auto'),useMaxWidth:!1,useMinWidth:!1,useMaxHeight:!1,useMinHeight:!1,anchor:null,id:null,name:null,parentId:null,content:__assign(__assign({},(parentData?parentData.content:{})),{children:[],layout:{type:layoutType,wrapRes:Service_37.Service.modeManager.MODE_PHONE,wrap:CommonTypes_13.FlexWrap.Wrap,hAlign:CommonTypes_13.FlexAlignItems.Center,vAlign:CommonTypes_13.FlexAlignItems.Center,hSpacing:CommonTypes_13.FlexAlignContent.Center,vSpacing:CommonTypes_13.FlexAlignContent.Center,}})}),!1,!1,function(wrapper){for(var _i=0,items_8=items;_i<items_8.length;_i++){var item=items_8[_i];wrapper.addChild(item)}
deferred.resolve(wrapper)},function(){return deferred.reject()});return deferred.promise()}
exports.wrapElements=wrapElements});define("js/SiteTree",["require","exports","js/CommonTypes","js/BuilderEvent","js/Element","js/LayoutElement","js/util/HistoryUtil","js/util/ElementUtil","js/element/ElementContainer","js/ui/TreeView","js/Service"],function(require,exports,CommonTypes_14,BuilderEvent_14,Element_8,LayoutElement_2,HistoryUtil_3,ElementUtil_1,ElementContainer_1,TreeView_4,Service_38){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SiteTree=void 0;var SiteTree=(function(){function SiteTree(_builderApi,root){var _this=this;this.visible=!0;this.noRender=!1;this.tree=new TreeView_4.TreeView();this.tree.root.setData(root);this.tree.buildInit({type:"TreeView",multiselect:!0,showCollapseButtons:!0,showDeleteButtons:!1,showSearch:!1,canAcceptItem:function(item,parentItem){var node=item.getData();if(node instanceof LayoutElement_2.LayoutElement&&!node.getParent()){return!1}
if(parentItem.isRoot()){return!1}
return(0,ElementContainer_1.is_element_container)(parentItem.getData())},onDrop:function(item,parentItem,refItem,after){var node=item.getData();if(!(0,ElementContainer_1.is_element_container)(parentItem.getData())||!(node instanceof Element_8.Element))
return;var refNode=refItem===null||refItem===void 0?void 0:refItem.getData();var ref=(refNode instanceof Element_8.Element)?refNode:undefined;wb_builder.historyBeginGroup();if(node.getParent())(0,HistoryUtil_3.createMoveElementsHistoryRecord)([node]);var container=parentItem.getData();if(container.childNeedWrapped()&&!(node instanceof LayoutElement_2.LayoutElement)){(0,ElementUtil_1.wrapElements)([],CommonTypes_14.ChildrenLayoutType.Vertical).done(function(wrapper){if(!(0,ElementContainer_1.is_element_container)(container)||!(node instanceof Element_8.Element))
return;if(wrapper){wrapper.addChild(node,!1,!1,null,!0);container.addChild(wrapper,!1,!1,ref,after,!0);(0,HistoryUtil_3.wrapElementHistoryRecord)(wrapper);wb_builder.historyEndGroup()}}).fail(function(){})}else{container.addChild(node,!1,!1,ref,after,!0);wb_builder.historyEndGroup()}},onDelete:function(){},onCollapse:function(item){var node=item.getData();if("collapsed" in node){node.collapsed=item.getCollapsed()}},beforeSelect:function(){},afterSelect:function(newSelection){var selectedElements=Service_38.default.element.getSelected();var toDeselect=Object.keys(selectedElements).map(function(key){return selectedElements[key]});var toSelect=[];for(var _i=0,newSelection_2=newSelection;_i<newSelection_2.length;_i++){var item=newSelection_2[_i];var node=item.getData();if(!node.isSelected())
toSelect.push(node);var idx=toDeselect.indexOf(node);if(idx>=0)
toDeselect.splice(idx,1);}
for(var _a=0,toDeselect_2=toDeselect;_a<toDeselect_2.length;_a++){var deselect=toDeselect_2[_a];deselect.setSelected(!1)}
var first=!0;for(var _b=0,toSelect_2=toSelect;_b<toSelect_2.length;_b++){var select=toSelect_2[_b];select.setSelected(!0);if(first){first=!1;select.scrollIntoView(!0)}}},itemCountChanged:function(){},},{});this.tree.getElem().attr("id","site_tree");BuilderEvent_14.GlobalEvents.on('loadinitdata.statechanged',function(e){if(e.start){_this.noRender=!0}else{_this.noRender=!1;_this.render()}});BuilderEvent_14.GlobalEvents.on('selection.changed',function(e){_this.noRender=!1;_this.render()})}
SiteTree.prototype.findItemForObject=function(obj){var foundItem=null;this.tree.root.traverse(function(item){if(item.getData()===obj){foundItem=item;return!1}
return!0});return foundItem};SiteTree.prototype.init=function(panel){var _this=this;panel.add("site-tree",this.tree.getElem(),!1,__("Page structure"),!0,30,!0);this.render();BuilderEvent_14.GlobalEvents.on("site.structure.changed",function(){return _this.render()});BuilderEvent_14.GlobalEvents.on("help.playershow",function(){return _this.render()});BuilderEvent_14.GlobalEvents.on("help.playerhide",function(){return _this.render()});BuilderEvent_14.GlobalEvents.on("site.structure.collapse site.structure.expand",function(e){var _a;return(_a=_this.findItemForObject(e.item))===null||_a===void 0?void 0:_a.setCollapsed(e.collapse)});var selectionChangeTimeout=0;var lastSelectedItem=null;BuilderEvent_14.GlobalEvents.on("selection.changed",function(e){var item=_this.findItemForObject(e.item);if(item){var selected=item.getData().isSelected();item.setSelected(selected)}
if(e.op!=="select"||!e.item)
return;if(!e.isSecondarySelection){var parent_22=e.item;while(parent_22&&typeof parent_22.getParent==="function"){parent_22=parent_22.getParent();if(parent_22&&"collapsed" in parent_22){parent_22.collapsed=!1}}
lastSelectedItem=e.item;if(selectionChangeTimeout)
clearTimeout(selectionChangeTimeout);selectionChangeTimeout=setTimeout(function(){selectionChangeTimeout=0;if(!lastSelectedItem)
return;var item=_this.findItemForObject(lastSelectedItem);if(item)
item.scrollIntoView();lastSelectedItem=null},50)}});BuilderEvent_14.GlobalEvents.on("modes.changed",function(e){console.log('test');var selectedElements=Element_8.Element.selected;var elem=selectedElements[Object.keys(selectedElements)[0]];if(selectionChangeTimeout)
clearTimeout(selectionChangeTimeout);selectionChangeTimeout=setTimeout(function(){selectionChangeTimeout=0;if(elem)
elem.scrollIntoView(!0);},500)})};SiteTree.prototype.render=function(){if(this.noRender)
return;this.tree.root.traverse(function(item){var node=item.getData();var props=node.getSiteTreeNodeProperties();var parent=item.getParent();var isRootBlock=!parent||parent.isRoot();item.setDraggable(!isRootBlock&&!props.isBackgroundElement);item.setBold(isRootBlock);item.setCollapsible(!0);item.setCollapsed((props.collapsible&&props.isCollapsed)||!1);item.setIcon(props.icon);item.setColor(props.color||null);item.setName((props.name?__tr(props.name):""));item.setTitle(props.title?props.title:'');item.setMetaText(props.meta||"");item.setItalic(props.isBackgroundElement||!1);item.setMetaIcon("link","fa fa-link",__("Link"),props.hasLink||!1);item.setMetaIcon("common","fa fa-cubes",props.isCommonInAllPages?__('Show in all pages'):__('Show in a specific pages'),props.isCommon||!1);item.setMetaIcon("grouped","fa fa-object-group",__("Group"),props.isGrouped||!1);item.setMetaIcon("hidden","fa fa-eye-slash",__("Hidden"),props.isHidden||!1);item.setMetaIcon("bg-gallery","fa fa-th-large",__("Background element")+(props.bgElementName?' ('+props.bgElementName+')':""),(props.hasBg&&props.hasBgGallery)||!1);item.setMetaIcon("bg-picture","fa fa-picture-o",__("Background element")+(props.bgElementName?' ('+props.bgElementName+')':""),(props.hasBg&&!props.hasBgGallery)||!1);item.setSelected(node.isSelected());var children=node.getSiteTreeNodeChildren();var found;var newChildren=[];var oldChildren=item.getChildren();var i;for(var _i=0,children_2=children;_i<children_2.length;_i++){var child=children_2[_i];found=null;for(i=oldChildren.length-1;i>=0;i--){if(oldChildren[i].getData()===child){found=oldChildren[i];oldChildren.splice(i,1);break}}
if(!found)
found=item.tree.createItem().setData(child);newChildren.push(found.setContextMenu(child.getSiteTreeNodeMenu()))}
for(var _a=0,oldChildren_1=oldChildren;_a<oldChildren_1.length;_a++){var oldChild=oldChildren_1[_a];item.removeChild(oldChild);oldChild.dispose()}
i=0;for(var _b=0,newChildren_1=newChildren;_b<newChildren_1.length;_b++){var newChild=newChildren_1[_b];item.addChild(newChild,i++)}},0,!0)};SiteTree.prototype.setVisible=function(visible){if(this.visible==visible)
return;this.visible=visible;if(visible){this.tree.getElem().show()}else{this.tree.getElem().hide()}};return SiteTree}());exports.SiteTree=SiteTree});define("js/elements/accordion/AccordionItem",["require","exports","js/Serializable"],function(require,exports,Serializable_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AccordionItem=void 0;var AccordionItem=(function(_super){__extends(AccordionItem,_super);function AccordionItem(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id=0;_this.title='';_this.text='';_this.deserialize(data);return _this}
return AccordionItem}(Serializable_5.Serializable));exports.AccordionItem=AccordionItem});define("js/elements/accordion/AccordionTabsDialog",["require","exports","PropertyDialog","js/VerticalLayout","js/Label","js/FlexLayout","js/Serializable","js/FlowLayout","js/UIButton","js/ui/Note","js/ui/TreeView","js/util/UID","js/MediaLibrary"],function(require,exports,PropertyDialog_4,VerticalLayout_28,Label_20,FlexLayout_8,Serializable_6,FlowLayout_17,UIButton_17,Note_2,TreeView_5,UID_3,MediaLibrary_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AccordionTabsDialog=exports.AccordionTabItem=void 0;var AccordionTabItem=(function(_super){__extends(AccordionTabItem,_super);function AccordionTabItem(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.deserialize(data);return _this}
return AccordionTabItem}(Serializable_6.Serializable));exports.AccordionTabItem=AccordionTabItem;var AccordionTabsDialog=(function(_super){__extends(AccordionTabsDialog,_super);function AccordionTabsDialog(){var _this=_super.call(this,__('Tabs List'),{noScroll:!0,tabs:[{children:[{type:FlexLayout_8.FlexLayout,leftSidebarPair:200,children:[{type:FlexLayout_8.FlexLayout,direction:"column",alignItems:"flex-start",justifyContent:"stretch",styleClass:"wb-tree-background-panel wb-tree-background-panel-sm",children:[{type:(TreeView_5.TreeView),id:'list',multiselect:!1,allowDraggingItems:!0,showCollapseButtons:!1,maxNameWidth:150,onDelete:function(item){_this.confirm(__("Confirm"),__("Do you really want to remove it?")).done(function(result){var _a;if(result&&result.clickedButtonIndex){if(item.getSelected())
_this.fields.list.setSelection([],!0);(_a=item.getParent())===null||_a===void 0?void 0:_a.removeChild(item)}})},canAcceptItem:function(item,parent,refItem,after){return parent.isRoot()},beforeSelect:function(newSelection,oldSelection){if(oldSelection.length)
_this.applyFieldsToItem(oldSelection[0]);},afterSelect:function(newSelection){_this.applyItemToFields(newSelection.length?newSelection[0]:null);_this.fields.name.getElem().focus()},},{type:UIButton_17.UIButton,id:"newItemBtn",buttonStyle:UIButton_17.UIButton.STYLE_LINK,icon:'glyphicon glyphicon-plus',text:__('Add item'),click:function(){var newItem=_this.fields.list.createItem().setIcon("fa fa-folder-open").setData(new AccordionTabItem({id:UID_3.UID.create(),isNew:!0,name:"",icon:null,rtl:!1}));_this.updateItem(newItem);_this.fields.list.root.addChild(newItem);_this.fields.list.setSelection([newItem],!0);newItem.scrollIntoView()}},{type:Note_2.Note,text:__('Use Drag and Drop to sort items')}]},{type:VerticalLayout_28.VerticalLayout,id:'editPanel',spacing:15,children:[{type:VerticalLayout_28.VerticalLayout,children:[{type:Label_20.Label,text:__('Item name')},{type:'MultilangTextField',id:'name'}]},{type:FlowLayout_17.FlowLayout,children:[{type:VerticalLayout_28.VerticalLayout,children:[{type:Label_20.Label,text:__('Item icon')},{type:'ImageSelector',id:'icon',mode:'image',multiselect:!1,thumbSize:60,mediatabs:!1,fontAwesomeTab:!0,usePictureManager:!1,showTemplateGalleryTab:!1},]},{type:VerticalLayout_28.VerticalLayout,children:[{type:Label_20.Label,text:__('Position')},{type:'HAlignSelector',id:'rtl',justify:!1,center:!1},]},]}]}]}]}],buttons:[{name:__('Cancel')},{name:__('Apply'),primary:!0,click:function(){_this.applyData()}}]})||this;_this.onApply=null;return _this}
AccordionTabsDialog.prototype.updateItem=function(item){var tab=item.getData();var name=__tr(tab.name);var noName=(name===undefined||name===null||name==="");item.setName(noName?"["+__("no name")+"]":name).setIcon(tab.icon&&typeof tab.icon==='object'&&'icon' in tab.icon?(tab.icon.prefix+tab.icon.icon):'fa fa-angle-right text-muted').setItalic(noName)};AccordionTabsDialog.prototype.applyFieldsToItem=function(item){var tab=item.getData();tab.name=this.fields.name.getValue();tab.icon=this.fields.icon.getValue();tab.rtl=this.fields.rtl.getValue()==='right';this.updateItem(item)};AccordionTabsDialog.prototype.applyItemToFields=function(item){var tab=item?item.getData():null;this.fields.name.setValue((tab&&tab.name)?tab.name:'');this.fields.icon.setValue(tab?tab.icon:null);this.fields.rtl.setValue((tab&&tab.rtl)?'right':'left');this.fields.editPanel.setVisible(!!tab)};AccordionTabsDialog.prototype.setValue=function(tabsList){this.fields.list.root.removeAllChildren();for(var _i=0,tabsList_1=tabsList;_i<tabsList_1.length;_i++){var tab=tabsList_1[_i];var name_4=__tr(tab.name);var noName=(name_4===undefined||name_4===null||name_4==="");var icon=typeof tab.icon==='object'?(0,MediaLibrary_3.getFontIconProperty)(tab.icon):null;var item=this.fields.list.createItem().setName(noName?"["+__("no name")+"]":name_4).setItalic(noName).setIcon(icon?(icon.prefix+icon.icon):'fa fa-angle-right text-muted').setData(tab);this.fields.list.root.addChild(item)}
this.fields.list.selectFirstItem()};AccordionTabsDialog.prototype.setApplyCallback=function(onApply){this.onApply=onApply};AccordionTabsDialog.prototype.applyData=function(){var item=this.fields.list.getFirstSelectedItem();if(item)
this.applyFieldsToItem(item);var tabList=[];this.fields.list.root.traverse(function(item){tabList.push(item.getData())});this.setVisible(!1);if(this.onApply)
this.onApply(tabList);};return AccordionTabsDialog}(PropertyDialog_4.default));exports.AccordionTabsDialog=AccordionTabsDialog});define("js/elements/accordion/Accordion",["require","exports","jquery","js/ElementRegister","js/Element","js/elements/accordion/AccordionLayout","js/element/PropertyType","js/TextControl","js/CommonTypes","js/UIButton","js/util/StyleUtil","js/Service","js/SpacingSelector","js/BuilderEvent","js/LayoutElement","js/MediaLibrary","js/Picture","js/ui/FlexLayoutControl","js/util/HistoryUtil","js/element/ZIndexHandle","js/elements/accordion/AccordionTabsDialog"],function(require,exports,jquery_97,ElementRegister_11,Element_9,AccordionLayout_2,PropertyType_5,TextControl_5,CommonTypes_15,UIButton_18,StyleUtil_4,Service_39,SpacingSelector_3,BuilderEvent_15,LayoutElement_3,MediaLibrary_4,Picture_1,FlexLayoutControl_4,HistoryUtil_4,ZIndexHandle_1,AccordionTabsDialog_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Accordion=void 0;var NewItemProperty=new PropertyType_5.PropertyType('accordion/newButton',PropertyType_5.PropertyTypeAccess.User,!0,__('New Item'),UIButton_18.UIButton).inline();var EditItemProperty=new PropertyType_5.PropertyType('accordion/editButton',PropertyType_5.PropertyTypeAccess.User,!0,__('Edit items'),UIButton_18.UIButton).inline();PropertyType_5.PropertyType.setSortOrder('accordion/newButton',PropertyType_5.PropertyType.sortOrderAfter('accordion/itemsButton'));PropertyType_5.PropertyType.setSortOrder('accordion/editButton',PropertyType_5.PropertyType.sortOrderAfter('accordion/newButton'));var Accordion=exports.Accordion=(function(_super){__extends(Accordion,_super);function Accordion(data){if(data===void 0){data={}}
var _this=_super.call(this,data)||this;_this.children=[];_this.resizeTimer=null;_this.resizeCallback=null;_this.zIndexHandle=new ZIndexHandle_1.ZIndexHandle(_this,11);_this.isFlexible=!0;_this._data=data;if(!_this._data.content)
_this._data.content={};if(!_this._data.content.layout)
_this._data.content.layout=AccordionLayout_2.AccordionLayout.TYPE_ACCORDION;var i,defStyle={},styles=wb_builder.site.styles;for(i=0;i<styles.length;i++){if(styles[i].selector==='.wb-stl-normal'){var textStyle=styles[i].sys.text||{};defStyle=TextControl_5.TextControl.buildCss({size:textStyle.size,font:textStyle.font,lineHeight:textStyle.size*1.4,style:{}})}}
if(!_this._data.content.titleStyle){_this._data.content.titleStyle=jquery_97.default.extend(!0,{},defStyle);_this._data.content.titleStyle.style.bold=!0;_this._data.content.titleStyle=TextControl_5.TextControl.buildCss(_this._data.content.titleStyle)}
if(!_this._data.content.background)
_this._data.content.background='#ffffff';_this.style=(data.content.style&&data.content.style)?data.content.style:{normal:{color:"#333333",bg:"#FFFFFFFF",},hover:{color:"#333333",bg:"#FFFFFFFF",},active:{color:"#333333",bg:"#FFFFFFFF",},};(function(){var _a;if(_this._data.isElementPreview)
return;(_a=_this.cover)===null||_a===void 0?void 0:_a.on('click mousemove',function(e){var _a;var px=e.pageX,py=e.pageY;var items=_this.container.find('.wb-accordion-item');var thisClass=_this;var found=!1;items.each(function(){var _a;var $item=(0,jquery_97.default)(this);if($item.hasClass('active'))
return!0;var po=$item.offset();var ps={width:$item.outerWidth(),height:$item.outerHeight()};if(px>=po.left&&px<=(po.left+ps.width)&&py>=po.top&&py<=(po.top+ps.height)){found=!0;if(thisClass.isSelected()&&e.type==='click'){$item.trigger('click')}
if(e.type==='mousemove'){(_a=thisClass.cover)===null||_a===void 0?void 0:_a.css('cursor','pointer')}
return!1}
return!0});if(!found){(_a=_this.cover)===null||_a===void 0?void 0:_a.css('cursor','default')}})})();(function(){if(_this._data.isElementPreview)
return;if(_this.resizeTimer)
clearInterval(_this.resizeTimer);var lastWidth,lastHeight;setInterval(function(){if(typeof(_this.resizeCallback)==='function'){var currentWidth=_this.getWidthInPixels(),currentHeight=_this.getHeightInPixels();if(!lastWidth||!lastHeight||lastWidth!==currentWidth||lastHeight!==currentHeight){_this.resizeCallback.call(_this,currentWidth,currentHeight);lastWidth=currentWidth;lastHeight=currentHeight}}},50)})();_this.controls.setToolbarActions([{name:__('New Item'),icon:'fa fa-plus',action:function(){return _this.createNewItem()}},{name:__('Edit items'),icon:'fa fa-pencil',action:function(){return _this.editItems()}},]);if(!data.content.children||!data.content.children.length){data.content.children=[{'class':'LayoutElement',"width":"100%","height":"auto","minHeight":100,"useMinHeight":!0,"content":{"layout":{"type":"vertical","wrapRes":"phone","wrap":"wrap","hAlign":"center","vAlign":"center","hSpacing":"center","vSpacing":"center"}}}]}
if(data.content.children&&data.content.children.length){var currentLastSelected=_this.lastSelectedIdx;var elementData=void 0;for(var i_1=0;i_1<data.content.children.length;i_1++){elementData=data.content.children[i_1];if(elementData){if(typeof elementData["class"]==="string"){if(_this.isElementPreview)
elementData.isElementPreview=!0;if(_this.previewCompositionId)
elementData.previewCompositionId=_this.previewCompositionId;elementData._copy=data._copy;ElementRegister_11.ElementRegister.createElement(elementData['class'],elementData,!0,!1,function(element){_this.addChild(element,!1,!0);element.elem.detach()})}}}
_this.lastSelectedIdx=currentLastSelected;_this.updateStyle(!0)}
_this.initDroppable();return _this}
Object.defineProperty(Accordion.prototype,"data",{get:function(){return this._data},set:function(value){this._data=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"layout",{get:function(){return this._data.content.layout},set:function(value){this._data.content.layout=value;if(this.layout!==AccordionLayout_2.AccordionLayout.TYPE_SLIDER){this._data.content.sliderInterval=null}
BuilderEvent_15.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_15.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"sliderInterval",{get:function(){if(this.layout===AccordionLayout_2.AccordionLayout.TYPE_SLIDER){return this._data.content.sliderInterval||5}
return null},set:function(value){if(this.layout===AccordionLayout_2.AccordionLayout.TYPE_SLIDER){this._data.content.sliderInterval=value}else{this._data.content.sliderInterval=null}},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"titleStyle",{get:function(){return this._data.content.titleStyle},set:function(value){this._data.content.titleStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"titleSpacing",{get:function(){return this._data.content.titleSpacing},set:function(value){this._data.content.titleSpacing=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"textSpacing",{get:function(){return this._data.content.textSpacing},set:function(value){this._data.content.textSpacing=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"background",{get:function(){return this._data.content.background},set:function(value){this._data.content.background=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"border",{get:function(){return this._data.content.border},set:function(value){this._data.content.border=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"style",{get:function(){return this._data.content.style},set:function(value){this._data.content.style=value},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"collapsed",{get:function(){return this._data.content.collapsed},set:function(value){if(value!=this._data.content.collapsed){this._data.content.collapsed=value;BuilderEvent_15.GlobalEvents.triggerEvent(value?"site.structure.collapse":"site.structure.expand",new BuilderEvent_15.SiteStructureCollapseExpandBuilderEvent(this,value))}},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"lastSelectedIdx",{get:function(){if(typeof this._data.content.lastSelectedIdx==='number'){return this._data.content.lastSelectedIdx}
if(typeof this._data.content.lastSelectedIdx==='string'){return parseInt(this._data.content.lastSelectedIdx)}
return null},set:function(value){var _a,_b;this.system.setPageModified(!0);(_a=this.getProperty("lastSelectedIdx"))===null||_a===void 0?void 0:_a.triggerBeforeChange(this);this._data.content.lastSelectedIdx=value;(_b=this.getProperty("lastSelectedIdx"))===null||_b===void 0?void 0:_b.triggerChange(this)},enumerable:!1,configurable:!0});Object.defineProperty(Accordion.prototype,"backgroundElement",{get:function(){return null},set:function(value){},enumerable:!1,configurable:!0});Accordion.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(!this.name||useType){if(this.layout==AccordionLayout_2.AccordionLayout.TYPE_ACCORDION){return __tr('Accordion')}else if(this.layout==AccordionLayout_2.AccordionLayout.TYPE_TABS){return __tr('Tabs')}else if(this.layout==AccordionLayout_2.AccordionLayout.TYPE_SLIDER){return __tr('Slider')}else{return __('Accordion')}}
return _super.prototype.getName.call(this)};Accordion.prototype.getIcon=function(){switch(this.layout){case AccordionLayout_2.AccordionLayout.TYPE_ACCORDION:return'ico-pl-accordion-accordion';case AccordionLayout_2.AccordionLayout.TYPE_TABS:return'ico-pl-accordion-tabs';case AccordionLayout_2.AccordionLayout.TYPE_SLIDER:return'ico-pl-accordion-slider';default:return'fa fa-pencil-square-o'}};Accordion.prototype.onSwitchLanguage=function(langCode){_super.prototype.onSwitchLanguage.call(this,langCode);this.render(!0)};Accordion.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);var children=[];for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];children.push(child.serialize())}
data.content={};for(var k in this._data.content){data.content[k]=this._data.content[k]}
data.content.children=children;return data};Accordion.prototype.updateStyle=function(initial,langCode){if(langCode===void 0){langCode=null}
_super.prototype.updateStyle.call(this,initial,langCode);if(this.height!='auto'){this.container.css("height","100%")}
this.render()};Accordion.prototype.reset=function(){};Accordion.prototype.render=function(updateLayout,page){if(updateLayout===void 0){updateLayout=!0}
if(!this.children.length){this.createNewItem();return}
if(!this.accordionElem){this.accordionElem=(0,jquery_97.default)('<div>').addClass('wb-accordion').attr('id',this.id+'_accordion');this.accordionElemWrapper=(0,jquery_97.default)('<div>').addClass('wb-accordion-wrapper');this.accordionElemWrapper.append(this.listElem);this.accordionElem.append(this.accordionElemWrapper);this.container.append(this.accordionElem)}
if(this.individualMargin){var padding=this.individualMargin;this.accordionElem.css("padding",(padding.paddingTop||0)+'px '+(padding.paddingRight||0)+'px '+(padding.paddingBottom||0)+'px '+(padding.paddingLeft||0)+'px')}
for(var _i=0,_a=AccordionLayout_2.AccordionLayout.getAvailableTypes();_i<_a.length;_i++){var layout=_a[_i];this.accordionElemWrapper.removeClass('wb-accordion-type-'+layout)}
this.accordionElemWrapper.addClass('wb-accordion-type-'+this.layout);if(updateLayout){this.displayEmptyMessage(this.children.length==0);if(this.children.length){for(var _b=0,_c=this.children;_b<_c.length;_b++){var item=_c[_b];item.elem.detach()}
this.resizeCallback=null;switch(this.layout){case AccordionLayout_2.AccordionLayout.TYPE_ACCORDION:this.renderAccordion();break;case AccordionLayout_2.AccordionLayout.TYPE_TABS:this.renderTabs();break;case AccordionLayout_2.AccordionLayout.TYPE_SLIDER:this.renderSlider();break}}}};Accordion.prototype.renderAccordion=function(){var _this=this;var _a,_b,_c;var thisClass=this;this.listElem=(0,jquery_97.default)('<div>').addClass('panel-group').attr('id',this.id+'-list');var style=(0,jquery_97.default)('<style/>').attr({type:"text/css"});style.html('#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel > .panel-collapse > .panel-body {'+'background-color:'+this.background+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading {'+(this.style.normal.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.normal.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading .wb-accordion-title {'+'color: '+this.style.normal.color+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading {'+(((_a=this.style.normal.border)===null||_a===void 0?void 0:_a.css)?(0,StyleUtil_4.stringifyCss)(this.style.normal.border.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel.in .panel-heading {'+(this.style.active.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.active.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel.in .panel-heading .wb-accordion-title {'+'color: '+this.style.active.color+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel.in .panel-heading {'+(((_b=this.style.active.border)===null||_b===void 0?void 0:_b.css)?(0,StyleUtil_4.stringifyCss)(this.style.active.border.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading:hover {'+(this.style.hover.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.hover.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading:hover .wb-accordion-title {'+'color: '+this.style.hover.color+'}'+'#'+this.id+'_accordion > .wb-accordion-type-accordion > .panel-group > .panel .panel-heading:hover {'+(((_c=this.style.hover.border)===null||_c===void 0?void 0:_c.css)?(0,StyleUtil_4.stringifyCss)(this.style.hover.border.css):'')+'}');this.accordionElemWrapper.empty();this.accordionElemWrapper.append(style).append(this.listElem);var _loop_21=function(idx){var child=this_14.children[idx];var itemElem=(0,jquery_97.default)('<div>').addClass('panel panel-default '+(parseInt(idx)===this_14.lastSelectedIdx?'in':''));var heading=(0,jquery_97.default)('<div>').addClass('panel-heading wb-accordion-item').attr('data-item-id',idx).attr('role','tab').attr('id',this_14.id+'-item-heading'+idx).on('click',function(){var $this=(0,jquery_97.default)(this);var $link=$this.find('.wb-accordion-title');$this.parents('.panel-group').find('.collapse').removeClass('in');$this.parents('.panel-group').find('.panel').removeClass('in');if($link.hasClass('collapsed')){thisClass.lastSelectedIdx=parseInt(idx);$this.parents('.panel-group').find('.wb-accordion-title').addClass('collapsed');$link.removeClass('collapsed');$this.parents('.panel').addClass('in');$this.parents('.panel').find('.collapse').addClass('in')}else{thisClass.lastSelectedIdx=null;$link.addClass('collapsed')}});if(this_14.titleSpacing){var titleSpacing=this_14.getActualSpacing(this_14.titleSpacing);if(titleSpacing&&titleSpacing.css){heading.css(titleSpacing.css)}}
itemElem.append(heading);var headingH4=(0,jquery_97.default)('<h4>').addClass('panel-title');heading.append(headingH4);var headingLink=(0,jquery_97.default)('<a>').addClass('wb-accordion-title '+(parseInt(idx)===this_14.lastSelectedIdx?'':'collapsed')).attr('role','button').attr('data-toggle','collapse').attr('data-parent','#'+this_14.id+'-list').attr('href','#'+this_14.id+'-item-'+idx).attr('expanded','true').attr('aria-controls',this_14.id+'-item-'+idx);var textContainer=(0,jquery_97.default)('<div>');textContainer.text(__tr((child instanceof LayoutElement_3.LayoutElement&&child.accordionTitle)?child.accordionTitle:__('[no name]')));headingLink.append(textContainer);if(child instanceof LayoutElement_3.LayoutElement&&child.accordionTitleIcon&&typeof child.accordionTitleIcon==="object"){var rtl_1=child.accordionTitleIconRtl;var icon=(0,MediaLibrary_4.getFontIconProperty)(child.accordionTitleIcon);if(icon){Picture_1.Picture.createFontAwesomeIconSVG(icon,function(svg,icon){var factor=_this.titleStyle.scaleFactors?(_this.titleStyle.scaleFactors[Service_39.default.modeManager.getMode()]/100):1;svg.css({display:'inline-block',verticalAlign:'middle',height:'1em',width:'1em',});if(rtl_1){textContainer.append(svg.css({marginLeft:'5px'}))}else{textContainer.prepend(svg.css({marginRight:'5px'}))}
Service_39.default.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-loaded',_this)})}}
var chevron=(0,jquery_97.default)('<span class="glyphicon pull-right"></span>');if(this_14.titleStyle.css){var factor=this_14.titleStyle.scaleFactors?(this_14.titleStyle.scaleFactors[Service_39.default.modeManager.getMode()]/100):1;chevron.css({lineHeight:Math.round((this_14.titleStyle.lineHeight||14)*factor)+'px'})}
headingLink.append(chevron);headingH4.append(headingLink);if(this_14.titleStyle.css)
headingH4.css(this_14.titleStyle.css);if(this_14.titleStyle.cssScaleFactors)
headingH4.css(this_14.titleStyle.cssScaleFactors[Service_39.default.modeManager.getMode()]);headingH4.css('color','');if(this_14.titleStyle.align){headingH4.addClass(this_14.titleStyle.align.toLowerCase())}
var itemBodyWrap=(0,jquery_97.default)('<div>').addClass('panel-collapse collapse '+(parseInt(idx)===this_14.lastSelectedIdx?'in':'')).attr('id',this_14.id+'-item-'+idx).attr('role','tabpanel').attr('aria-labelledby',this_14.id+'-item-heading'+idx);itemElem.append(itemBodyWrap);var itemBody=(0,jquery_97.default)('<div>').addClass('panel-body');itemBody.append(child.elem);if(this_14.border&&this_14.border.css){itemBody.css(this_14.border&&this_14.border.css)}
if(this_14.textSpacing){var textSpacing=this_14.getActualSpacing(this_14.textSpacing);if(textSpacing&&textSpacing.css){itemBody.css(textSpacing.css)}}
itemBodyWrap.append(itemBody);this_14.listElem.append(itemElem)};var this_14=this;for(var idx in this.children){_loop_21(idx)}
var selectedElem=this.accordionElem.find('[data-item-id='+this.lastSelectedIdx+']').get(0);if(selectedElem){this.accordionElem.scrollTop(selectedElem.offsetTop)}};Accordion.prototype.renderTabs=function(){var _this=this;var _a,_b;this.listElem=(0,jquery_97.default)('<div>').attr('id',this.id+'-list');var style=(0,jquery_97.default)('<style/>').attr({type:"text/css"});style.html('#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item .wb-accordion-title {'+(this.style.normal.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.normal.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item .wb-accordion-title {'+'color: '+this.style.normal.color+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item .wb-accordion-title {'+(((_a=this.style.normal.border)===null||_a===void 0?void 0:_a.css)?(0,StyleUtil_4.stringifyCss)(this.style.normal.border.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item.active .wb-accordion-title {'+(this.style.active.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.active.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item.active .wb-accordion-title {'+'color: '+this.style.active.color+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .nav > .wb-accordion-item.active .wb-accordion-title {'+(((_b=this.style.active.border)===null||_b===void 0?void 0:_b.css)?(0,StyleUtil_4.stringifyCss)(this.style.active.border.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-tabs > div > .tab-content > .tab-pane {'+'background-color:'+this.background+'}');this.accordionElemWrapper.empty();this.accordionElemWrapper.append(style).append(this.listElem);var ulElem=(0,jquery_97.default)('<ul>').addClass('nav nav-tabs').attr('role','tablist');var contentElem=(0,jquery_97.default)('<div>').addClass('tab-content');this.listElem.append(ulElem).append(contentElem);var thisClass=this;var _loop_22=function(idx){var child=this_15.children[idx];var liElem=(0,jquery_97.default)('<li>').addClass('wb-accordion-item '+(parseInt(idx)===this_15.lastSelectedIdx?'active':'')).attr('role','presentation').attr('data-item-id',idx).on('click',function(){thisClass.lastSelectedIdx=parseInt(idx);var $this=(0,jquery_97.default)(this);$this.parents('#'+thisClass.id+'-list').find('.wb-accordion-item').removeClass('active');$this.parents('#'+thisClass.id+'-list').find('.tab-pane').removeClass('active');$this.addClass('active');$this.parents('#'+thisClass.id+'-list').find('#'+thisClass.id+'-item-'+idx).addClass('active')});ulElem.append(liElem);var aElem=(0,jquery_97.default)('<a>').addClass('wb-accordion-title').attr('href','#'+this_15.id+'-item-'+idx).attr('aria-controls',this_15.id+'-item-'+idx).attr('role','tab').attr('data-toggle','tab');var textContainer=(0,jquery_97.default)('<div>');textContainer.css({display:'inline-flex',alignItems:'center'}).text(__tr((child instanceof LayoutElement_3.LayoutElement&&child.accordionTitle)?child.accordionTitle:__('[no name]')));aElem.append(textContainer);if(child instanceof LayoutElement_3.LayoutElement&&child.accordionTitleIcon&&typeof child.accordionTitleIcon==="object"){var icon=(0,MediaLibrary_4.getFontIconProperty)(child.accordionTitleIcon);if(icon){var rtl_2=child.accordionTitleIconRtl;Picture_1.Picture.createFontAwesomeIconSVG(icon,function(svg,icon){var factor=_this.titleStyle.scaleFactors?(_this.titleStyle.scaleFactors[Service_39.default.modeManager.getMode()]/100):1;svg.css({display:'inline-block',verticalAlign:'middle',height:'1em',width:'1em',});if(rtl_2){textContainer.append(svg.css({marginLeft:'5px'}))}else{textContainer.prepend(svg.css({marginRight:'5px'}))}
Service_39.default.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-edit-loaded',_this)})}}
liElem.append(aElem);if(this_15.data.content&&this_15.data.content.titleStyle&&this_15.data.content.titleStyle.css){aElem.css(this_15.data.content.titleStyle.css);aElem.css('color','')}
if(this_15.data.content&&this_15.data.content.titleStyle.cssScaleFactors&&this_15.data.content.titleStyle.cssScaleFactors){aElem.css(this_15.data.content.titleStyle.cssScaleFactors[Service_39.default.modeManager.getMode()]);aElem.css('color','')}
if(this_15.titleSpacing){var titleSpacing=this_15.getActualSpacing(this_15.titleSpacing);if(titleSpacing&&titleSpacing.css){aElem.css(titleSpacing.css)}}
var bodyElem=(0,jquery_97.default)('<div>').addClass('tab-pane '+(parseInt(idx)===this_15.lastSelectedIdx?'active':'')).attr('role','tabpanel').attr('id',this_15.id+'-item-'+idx);if(this_15.border&&this_15.border.css){bodyElem.css(this_15.border&&this_15.border.css)}
bodyElem.append(child.elem);if(this_15.textSpacing){var textSpacing=this_15.getActualSpacing(this_15.textSpacing);if(textSpacing&&textSpacing.css){bodyElem.css(textSpacing.css)}}
contentElem.append(bodyElem)};var this_15=this;for(var idx in this.children){_loop_22(idx)}};Accordion.prototype.renderSlider=function(){this.listElem=(0,jquery_97.default)('<div>').attr('id',this.id+'-list');var style=(0,jquery_97.default)('<style/>').attr({type:"text/css"});style.html('#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-indicators li {'+(this.style.normal.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.normal.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-indicators li.active {'+(this.style.active.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.active.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-indicators li:hover {'+(this.style.hover.bg.css?(0,StyleUtil_4.stringifyCss)(this.style.hover.bg.css):'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-inner > .item > .carousel-caption {'+(this.style.normal.color?'  color: '+this.style.normal.color+';':'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-inner > .item.active > .carousel-caption {'+(this.style.active.color?'  color: '+this.style.active.color+';':'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-inner > .item:hover > .carousel-caption {'+(this.style.hover.color?'  color: '+this.style.hover.color+';':'')+'}'+'#'+this.id+'_accordion > .wb-accordion-type-slider > .carousel > .carousel-inner > .item {'+'background-color:'+this.background+'}');this.accordionElemWrapper.empty();this.accordionElemWrapper.append(style).append(this.listElem);this.listElem.addClass('carousel slide').attr('data-ride','carousel');var olElem=(0,jquery_97.default)('<ol>').addClass('carousel-indicators');var contentElem=(0,jquery_97.default)('<div>').addClass('carousel-inner').attr('role','listbox');this.listElem.append(olElem).append(contentElem);var thisClass=this;var _loop_23=function(idx){var child=this_16.children[idx];var liElem=(0,jquery_97.default)('<li>').addClass('wb-accordion-item '+(parseInt(idx)===this_16.lastSelectedIdx?'active':'')).attr('data-target',this_16.id+'-list').attr('data-slide-to',idx).attr('data-item-id',idx).on('click',function(){var $this=(0,jquery_97.default)(this);thisClass.lastSelectedIdx=parseInt(idx);thisClass.updateStyle()});olElem.append(liElem);var slideElem=(0,jquery_97.default)('<div>').addClass('item '+(parseInt(idx)===this_16.lastSelectedIdx?'active':''));contentElem.append(slideElem);if(this_16.border&&this_16.border.css){slideElem.css(this_16.border&&this_16.border.css)}
slideElem.prepend((0,jquery_97.default)('<div>').append(child.elem));if(this_16.textSpacing){var textSpacing=this_16.getActualSpacing(this_16.textSpacing);if(textSpacing&&textSpacing.css){slideElem.css(textSpacing.css)}}};var this_16=this;for(var idx in this.children){_loop_23(idx)}};Accordion.prototype.editItems=function(){var _this=this;if(!Accordion.tabsDialog){Accordion.tabsDialog=new AccordionTabsDialog_1.AccordionTabsDialog()}
var tabList=[];for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];if(child instanceof LayoutElement_3.LayoutElement){tabList.push(new AccordionTabsDialog_1.AccordionTabItem({id:child.id,isNew:!1,name:child.accordionTitle,icon:child.accordionTitleIcon,rtl:child.accordionTitleIconRtl,}))}}
Accordion.tabsDialog.setValue(tabList);Accordion.tabsDialog.setApplyCallback(function(value){wb_builder.historyBeginGroup();var deletedChildren=[];for(var _i=0,_a=_this.children;_i<_a.length;_i++){var curItem=_a[_i];if(!(curItem instanceof LayoutElement_3.LayoutElement))
continue;var found=!1;for(var _b=0,value_2=value;_b<value_2.length;_b++){var newItem=value_2[_b];if(curItem.id===newItem.id)
found=!0}
if(!found)
deletedChildren.push(curItem);}(0,HistoryUtil_4.createRemoveElementsHistoryRecord)(deletedChildren,{});var _loop_24=function(newItem){if(newItem.isNew){_this.createNewItem().then(function(elem){newItem.id=elem.id})}};for(var _c=0,value_3=value;_c<value_3.length;_c++){var newItem=value_3[_c];_loop_24(newItem)}
var children=[];for(var _d=0,value_4=value;_d<value_4.length;_d++){var newItem=value_4[_d];for(var _e=0,_f=_this.children;_e<_f.length;_e++){var curItem=_f[_e];if(curItem instanceof LayoutElement_3.LayoutElement&&curItem.id===newItem.id){curItem.accordionTitle=newItem.name;curItem.accordionTitleIcon=newItem.icon;curItem.accordionTitleIconRtl=newItem.rtl;children.push(curItem);break}}}(0,HistoryUtil_4.createMoveElementsHistoryRecord)(children,_this);_this.children=children;wb_builder.historyEndGroup();BuilderEvent_15.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_15.SiteStructureChangedBuilderEvent());_this.updateStyle()});Accordion.tabsDialog.setVisible(!0)};Accordion.prototype.createNewItem=function(){var _this=this;var deferred=jquery_97.default.Deferred();var elementData={'class':'LayoutElement',"width":"100%","height":"auto","minHeight":100,"useMinHeight":!0,"content":{"layout":{"type":"vertical","wrapRes":"phone","wrap":"wrap","hAlign":"center","vAlign":"center","hSpacing":"center","vSpacing":"center"}}};if(typeof elementData["class"]==="string"){if(this.isElementPreview)
elementData.isElementPreview=!0;if(this.previewCompositionId)
elementData.previewCompositionId=this.previewCompositionId;ElementRegister_11.ElementRegister.createElement(elementData['class'],elementData,!0,!1,function(element){(0,HistoryUtil_4.createAddElementsHistoryRecord)([element]);_this.addChild(element,!1,!0);element.elem.detach();deferred.resolve(element);_this.updateStyle()})}
return deferred.promise()};Accordion.prototype.getUsedFonts=function(){var items=_super.prototype.getUsedFonts.call(this);if(this.titleStyle&&this.titleStyle.font&&this.titleStyle.font!=="")
items.push(this.titleStyle.font);return items};Accordion.prototype.supportsAutoHeight=function(){return!0};Accordion.prototype.supportsPadding=function(){return!0};Accordion.prototype.allowControlsSpacingOverflow=function(){return!1};Accordion.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"data"});this.registerProperty({name:"lastSelectedIdx"});this.registerProperty({name:"newButton",type:NewItemProperty,uiComponentOptions:{click:function(){this.createNewItem()}}});this.registerProperty({name:"editButton",type:EditItemProperty,uiComponentOptions:{click:function(){this.editItems()}}});this.registerProperty({name:"layout",type:PropertyType_5.PropertyType.AccordionLayoutType,dependencies:["data"]});this.registerProperty({name:"sliderInterval",type:PropertyType_5.PropertyType.AccordionSliderInterval,dependencies:["layout"],uiComponentOptions:function(){return{visible:this.layout===AccordionLayout_2.AccordionLayout.TYPE_SLIDER,}},});this.registerProperty({name:"titleStyle",type:PropertyType_5.PropertyType.TitleStyleCombined,dependencies:["data"],uiComponentOptions:function(){return{noScaleFactors:!1,noColorPicker:!0,useJustify:!1,}}});this.registerProperty({name:"titleSpacing",type:PropertyType_5.PropertyType.AccordionTitleSpacing,dependencies:["data"],});this.registerProperty({name:"textSpacing",type:PropertyType_5.PropertyType.AccordionTextSpacing,dependencies:["data"],});this.registerProperty({name:"border",type:PropertyType_5.PropertyType.AccordionBorder});this.registerProperty({name:"background",type:PropertyType_5.PropertyType.AccordionBackgroundColor,dependencies:["data"]});this.registerProperty({name:"style",type:PropertyType_5.PropertyType.AccordionStyle})};Accordion.prototype.getActualSpacing=function(spacing){var spacing2=__assign({},spacing.spacing);if(spacing.scaleFactors&&spacing.spacing){var factor=spacing.scaleFactors[Service_39.default.modeManager.getMode()]/100;spacing2.paddingTop=Math.round(spacing.spacing.paddingTop*factor);spacing2.paddingRight=Math.round(spacing.spacing.paddingRight*factor);spacing2.paddingBottom=Math.round(spacing.spacing.paddingBottom*factor);spacing2.paddingLeft=Math.round(spacing.spacing.paddingLeft*factor);return SpacingSelector_3.SpacingSelector.createValue(spacing2)}
return spacing2};Accordion.prototype.getLayout=function(){return new FlexLayoutControl_4.FlexLayoutControlValue()};Accordion.prototype.childNeedWrapped=function(){return!0};Accordion.prototype.addChild=function(element,noZReset,initial,refElem,after,updateStyle){if(noZReset===void 0){noZReset=!1}
if(initial===void 0){initial=!1}
if(after===void 0){after=!1}
if(updateStyle===void 0){updateStyle=!1}
element.left=0;element.top=0;var refIdx=(refElem instanceof Element_9.Element)?(refElem?this.children.indexOf(refElem):-1):-1;if(refElem&&refIdx<0)
return!1;var idx=this.children.indexOf(element);if(idx>=0&&(!refElem||refElem===element))
return!1;var oldParent=element.getParent();if(oldParent===this&&(!refElem||refElem===element))
return!1;if(oldParent){oldParent.removeChild(element);if(oldParent==this){refIdx=(refElem instanceof Element_9.Element)?(refElem?this.children.indexOf(refElem):-1):-1}}else if(element instanceof LayoutElement_3.LayoutElement)
wb_builder.bodyInstance.removeChild(element);element.setParent(this,initial);if(refIdx>=0){this.children.splice(refIdx+(after?1:0),0,element);this.lastSelectedIdx=refIdx+(after?1:0)}else{this.children.push(element);this.lastSelectedIdx=this.children.length-1}
element.setLayoutConstraints(CommonTypes_15.ChildrenLayoutType.Vertical,initial);this.zIndexHandle.assignLayer(element,noZReset);if(!initial){BuilderEvent_15.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_15.SiteStructureChangedBuilderEvent());Service_39.default.HelpSystemPlayer.notify('add-plugin-'+element.getClassType(),element)}
if(updateStyle){this.updateStyle(initial)}
return!0};Accordion.prototype.enableDropZone=function(enable){this.container.droppable(enable?"enable":"disable")};Accordion.prototype.getBoundingClientRect=function(){return this.container[0].getBoundingClientRect()};Accordion.prototype.getChildAt=function(index){return(index>=0&&index<this.children.length)?this.children[index]:null};Accordion.prototype.getChildIndex=function(element){return this.children.indexOf(element)};Accordion.prototype.setLastSelectedByChild=function(element){var idx=this.getChildIndex(element);if(this.lastSelectedIdx!==idx){this.lastSelectedIdx=idx;this.updateStyle()}};Accordion.prototype.getChildren=function(){return __spreadArray([],this.children,!0)};Accordion.prototype.isEmpty=function(){return(this.children.length==0)};Accordion.prototype.getChildrenLayout=function(){return CommonTypes_15.ChildrenLayoutType.Vertical};Accordion.prototype.getChildrenHorizontalAlign=function(){return CommonTypes_15.FlexAlignItems.Center};Accordion.prototype.getWrap=function(){return CommonTypes_15.FlexWrap.Wrap};Accordion.prototype.getHorizontalAlignment=function(){return CommonTypes_15.FlexAlignItems.Center};Accordion.prototype.getVerticalAlignment=function(){return CommonTypes_15.FlexAlignItems.Center};Accordion.prototype.getHorizontalSpacing=function(){return CommonTypes_15.FlexAlignContent.Center};Accordion.prototype.getVerticalSpacing=function(){return CommonTypes_15.FlexAlignContent.Center};Accordion.prototype.getPercentWidth=function(width){var selfWidth=this.getWidthInPixels()-(this._individualMargin?(this._individualMargin.paddingLeft+this._individualMargin.paddingRight):0);return width/selfWidth*100};Accordion.prototype.removeChild=function(element,batch){if(batch===void 0){batch=!1}
var idx=this.children.indexOf(element);if(idx>=0){this.children.splice(idx,1);element.setParent(null);this.zIndexHandle.changeLayer()}
if(this.container[0].contains(element.elem[0]))
element.elem.detach();if(!batch){BuilderEvent_15.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_15.SiteStructureChangedBuilderEvent())}
this.lastSelectedIdx=Math.max(0,Math.min(this.children.length-1,this.lastSelectedIdx||0));this.updateStyle()};Accordion.prototype.updateSize=function(forceFlexible,forcedMinHeight,fast){};Accordion.prototype.zReset=function(){this.zIndexHandle.changeLayer();for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];if(!(elem instanceof LayoutElement_3.LayoutElement))
continue;elem.zReset()}};Accordion.prototype.getSiteTreeNodeProperties=function(){var props=_super.prototype.getSiteTreeNodeProperties.call(this);props.collapsible=!0;props.isCollapsed=this.collapsed;return props};Accordion.prototype.getSiteTreeNodeChildren=function(){return this.getChildren()};Accordion.prototype.isAcceptingChildren=function(){return!1};Accordion.prototype.initDroppable=function(){var _this=this;if(!this.container)
return;this.container.droppable({tolerance:"pointer",greedy:!0,hoverClass:"wb-state-highlight",accept:".wb_element,.wb_item",drop:function(e,ui){if(e.originalEvent.isImmediatePropagationStopped())
return!1;var addItm=function(isNewItem,items,composition){var item=items[0];_this.addChild(item);wb_builder.setPageModified(!0);_this.updateStyle()};var itm=ui.draggable.wbGetClassInstance();if(itm){if(itm.removed||itm.dropAccepted)
return;addItm(!1,[itm],null)}else{var className=ui.draggable.attr('id');className=className?className.split("__")[1]:null;if(!className)
return;var data_2={content:{}};ElementRegister_11.ElementRegister.createElementOrComposition(className,function(className,idx){return data_2},function(items,composition){addItm(!0,items,composition)})}
e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();e.returnValue=!1;return!1}})};Accordion.pluginName='Accordion';Accordion.tabsDialog=null;return Accordion}(Element_9.Element));ElementRegister_11.ElementRegister.registerClass('Accordion',Accordion)});define("js/LayoutElement",["require","exports","js/ElementRegister","js/Element","js/CommonTypes","js/Service","js/BuilderEvent","js/FlowLayout","js/VerticalLayout","js/HorizontalLayout","js/BackgroundControl","js/Label","js/element/ZIndexHandle","js/BorderControl","js/RoundCornersControl","js/UIModeScaleFactors","js/element/ControlsSelectionBorder","js/element/Controls","js/element/ControlsCircleButton","js/ui/FlexLayoutControl","js/util/HistoryUtil","js/ui/BackgroundElementSelector","js/element/PropertyType","js/util/MathUtil","js/element/ElementBackground","jquery","URLControl","js/util/StyleUtil","js/util/TextUtil","js/elements/accordion/Accordion","js/util/ChangeUpdateUtil","js/ui/CompositionMenu","js/core/Collaboration","js/core/SitePage","js/MediaLibrary"],function(require,exports,ElementRegister_12,Element_10,CommonTypes_16,Service_40,BuilderEvent_16,FlowLayout_18,VerticalLayout_29,HorizontalLayout_6,BackgroundControl_8,Label_21,ZIndexHandle_2,BorderControl_9,RoundCornersControl_3,UIModeScaleFactors_4,ControlsSelectionBorder_3,Controls_2,ControlsCircleButton_2,FlexLayoutControl_5,HistoryUtil_5,BackgroundElementSelector_2,PropertyType_6,MathUtil_1,ElementBackground_2,jquery_98,URLControl_4,StyleUtil_5,TextUtil_7,Accordion_1,ChangeUpdateUtil_4,CompositionMenu_2,Collaboration_5,SitePage_2,MediaLibrary_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.LayoutElement=void 0;var LayoutElement=exports.LayoutElement=(function(_super){__extends(LayoutElement,_super);function LayoutElement(data,initial){if(data===void 0){data=null}
if(initial===void 0){initial=!1}
var _this=this;var _a;_this=_super.call(this,data,initial)||this;_this._renderedLayout=new FlexLayoutControl_5.FlexLayoutControlValue();_this._layout=new FlexLayoutControl_5.FlexLayoutControlValue();_this._originalMenu=null;_this.children=[];_this._scaleFactors=null;_this._borderRadius=null;_this._border=null;_this._isSticky=!1;_this._stickyAlign="center top";_this.zIndexHandle=new ZIndexHandle_2.ZIndexHandle(_this,11);_this.isFlexible=!0;_this.backgroundElementContainer=null;_this._backgroundElement=null;_this._collapsed=!1;_this._link=null;_this.isDnDInfoMsgVisible=!1;_this.dndInfoMsg=null;_this.rectEventHandler=null;_this.scrollEventHandler=function(e){var bgElem=_this.elem.children('.wb_content').children('.wb_detach_background');var rect=_this.elem[0].getBoundingClientRect();bgElem.css({clip:'rect('+rect.top+'px, '+rect.width+'px, '+rect.bottom+'px, '+0+'px)',})};_this._scrollEditorEventTimer=null;_this.scrollEditorEventHandler=function(e){if(_this._scrollEditorEventTimer)
clearInterval(_this._scrollEditorEventTimer);if(e.active){_this._scrollEditorEventTimer=setInterval(_this.scrollEventHandler,1000)}};_this.alignmentActionSet=0;_this.fullWidthContainer=null;_this.stickyUpdateCallback=null;_this.elem.addClass('wb-layout-element');_this.elem.on('rect-changed',_this.rectEventHandler=function(e){return _this.updateBackgroundRect(e)});_this.setEmptyMessageImage('fa fa-columns');_this._margin={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0};_this._background=null;if(data&&data.content){if("layout" in data.content)
_this._layout=_this._renderedLayout=new FlexLayoutControl_5.FlexLayoutControlValue(data.content.layout);else if("childrenLayout" in data.content){var content=data.content;content.type=content.childrenLayout;if("wrapResolution" in content)
content.wrapRes=content.wrapResolution;_this._layout=_this._renderedLayout=new FlexLayoutControl_5.FlexLayoutControlValue(content)}
if(data.content.padding){jquery_98.default.extend(_this._individualMargin,data.content.padding)}
_this._margin=data.content.margin?data.content.margin:_this._margin;_this._background=data.content.background?data.content.background:_this._background;_this._scaleFactors=data.content.scaleFactors?data.content.scaleFactors:_this._scaleFactors;_this._border=data.content.border||(0,BorderControl_9.buildCss)({color:'#000',style:'solid',weight:0});if(data.content.borderRadius)
_this._borderRadius=data.content.borderRadius;if(data.content.stickyAlign)
_this._stickyAlign=data.content.stickyAlign;if(data.content.isSticky)
_this._isSticky=!!data.content.isSticky;if(data.content.accordionTitle)
_this._accordionTitle=data.content.accordionTitle;if(data.content.accordionTitleIcon)
_this._accordionTitleIcon=data.content.accordionTitleIcon;if(_this._accordionTitleIcon&&typeof _this._accordionTitleIcon==='object'){_this._accordionTitleIcon=(0,MediaLibrary_5.getFontIconProperty)(_this._accordionTitleIcon)}
_this._accordionTitleIconRtl=data.content.accordionTitleIconRtl?data.content.accordionTitleIconRtl:((_a=wb_builder===null||wb_builder===void 0?void 0:wb_builder.rtl)!==null&&_a!==void 0?_a:!1);var elementData=void 0;if(data.content.backgroundElement){elementData=data.content.backgroundElement;if(typeof elementData["class"]==="string"){elementData.isBackgroundElement=!0;if(_this.isElementPreview)
elementData.isElementPreview=!0;if(_this.previewCompositionId)
elementData.previewCompositionId=_this.previewCompositionId;ElementRegister_12.ElementRegister.createElement(elementData['class'],elementData,!0,!1,function(element){_this.backgroundElement=element})}}
if(data.content.children){for(var i=0;i<data.content.children.length;i++){elementData=data.content.children[i];if(elementData){if(typeof elementData["class"]==="string"){if(_this.isElementPreview)
elementData.isElementPreview=!0;if(_this.previewCompositionId)
elementData.previewCompositionId=_this.previewCompositionId;elementData._copy=data._copy;ElementRegister_12.ElementRegister.createElement(elementData['class'],elementData,!0,!1,function(element){_this.addChild(element,!1,!0)})}}}}
_this._collapsed=!!data.content.collapsed;_this._link=(("link" in data.content)&&data.content.link)?data.content.link:null}
_this.initDroppable();_this.controls.updatePadding(_this.getActualPadding());_this.controls.setCloneHandler(function(type,e){if(_this.parent&&_this.parent instanceof Accordion_1.Accordion){var contData=_this.serialize();var defData={content:{layout:contData.content.layout},width:'100%',minHeight:20};ElementRegister_12.ElementRegister.createElement(_this.getClassType(),defData,!1,!1,function(cont){if(_this.parent&&_this.parent instanceof Accordion_1.Accordion){_this.parent.addChild(cont,!1,!1,_this,type==ControlsCircleButton_2.CircleButtonType.BOTTOM||type==ControlsCircleButton_2.CircleButtonType.RIGHT,!0)}})}else{(0,CompositionMenu_2.showCompositionsMenu)(e,_this,type==ControlsCircleButton_2.CircleButtonType.BOTTOM||type==ControlsCircleButton_2.CircleButtonType.RIGHT)}
e.preventDefault();e.stopPropagation()});_this.controls.setAlignmentInfoHandler({self:function(layout){_this.layout=layout},parent:function(layout){if(!_this.parent)
return;_this.parent.layout=layout;(0,Collaboration_5.updateElementProperties)(_this,{layout:layout})},});_this.controls.setAlignmentInfo(_this.buildLayoutPair());_this.updateAlignmentActions();if(_this._isSticky)
_this.stickyInit();_this.updateStyle(!0);setTimeout(function(){return _this.updateDnDInfoMessage()},500);return _this}
Object.defineProperty(LayoutElement.prototype,"layout",{get:function(){return this._layout},set:function(value){this._layout=value;this.controls.setAlignmentInfo(this.buildLayoutPair());this.updateAlignmentActions();BuilderEvent_16.GlobalEvents.triggerEvent("element.layout.changed",new BuilderEvent_16.ElementLayoutChangedBuilderEvent());BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"margin",{get:function(){return this._margin},set:function(value){this._margin=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"background",{get:function(){return this._background},set:function(value){this._background=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"scaleFactors",{get:function(){return this._scaleFactors},set:function(value){this._scaleFactors=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(value){this._borderRadius=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"border",{get:function(){var brd=(0,BorderControl_9.buildCss)(this._border||null);(0,BorderControl_9.applyRadiusValue)(brd,this._borderRadius);return brd},set:function(value){this._border=__assign({},value);delete this._border.radius;this._borderRadius=(0,BorderControl_9.toRadiusValue)(value)},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"nameProp",{get:function(){return this.name},set:function(value){if(this.name!=value){this.name=value;(0,ChangeUpdateUtil_4.waitForChangeEndToUpdate)(new ChangeUpdateUtil_4.ChangeUpdateState(function(){BuilderEvent_16.GlobalEvents.triggerEvent('site.structure.changed',new BuilderEvent_16.SiteStructureChangedBuilderEvent())}));if(this.parent instanceof Accordion_1.Accordion&&this._accordionTitle!==value){this.accordionTitle=__tr(value)}}},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"accordionTitle",{get:function(){return this._accordionTitle},set:function(value){this._accordionTitle=value;if(this.parent instanceof Accordion_1.Accordion&&this.name!==value){this.nameProp=__tr(value)}},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"accordionTitleIcon",{get:function(){return this._accordionTitleIcon},set:function(value){this._accordionTitleIcon=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"accordionTitleIconRtl",{get:function(){return this._accordionTitleIconRtl},set:function(value){this._accordionTitleIconRtl=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"isSticky",{get:function(){return this._isSticky},set:function(value){var _a;this._isSticky=value;if(value){this.stickyInit();this.zIndex+=1000}else{this.stickyDeInit();this.zIndex=Math.max(1,this.zIndex-1000)}
if(this.parent)
this.parent.zIndexHandle.assignLayer(this,!1);else if(this.system)(_a=this.system.getCurrentContextCanvas())===null||_a===void 0?void 0:_a.zIndexHandle.assignLayer(this,!1);},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"stickyAlign",{get:function(){return this._stickyAlign},set:function(value){this._stickyAlign=value},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"backgroundElement",{get:function(){return this._backgroundElement},set:function(value){if(this._backgroundElement===value)
return;if(this._backgroundElement){if(this.backgroundElementContainer){if(!value){this.backgroundElementContainer.remove();this.backgroundElementContainer=null}else{this.backgroundElementContainer.empty()}}
this._backgroundElement.isBackgroundElement=!1}
this._backgroundElement=value;if(this._backgroundElement){if(!this.backgroundElementContainer){this.backgroundElementContainer=(0,jquery_98.default)('<div class="wb-layout-bg-element" />');this.backgroundElementContainer.insertBefore(this.container)}
this.backgroundElementContainer.append(this._backgroundElement.elem);this._backgroundElement.isBackgroundElement=!0;this._backgroundElement.setParent(this);this._backgroundElement.setLayoutConstraints(CommonTypes_16.ChildrenLayoutType.Absolute);this._backgroundElement.setLocation(0,0);this._backgroundElement.setSize("100%","100%");this._backgroundElement.updateStyle()}},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"collapsed",{get:function(){return this._collapsed},set:function(value){if(value!=this._collapsed){this._collapsed=value;BuilderEvent_16.GlobalEvents.triggerEvent(value?"site.structure.collapse":"site.structure.expand",new BuilderEvent_16.SiteStructureCollapseExpandBuilderEvent(this,value))}},enumerable:!1,configurable:!0});Object.defineProperty(LayoutElement.prototype,"link",{get:function(){return this._link},set:function(value){this._link=value;BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});LayoutElement.prototype.__destruct=function(batch,noConfirm){if(batch===void 0){batch=!1}
if(noConfirm===void 0){noConfirm=!1}
_super.prototype.__destruct.call(this,batch,noConfirm);(0,jquery_98.default)(window).off('scroll',this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("site.structure.changed",this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("history.changed",this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("inplaceeditor.state.changed",this.scrollEditorEventHandler)};LayoutElement.prototype.updateBackgroundRect=function(e){var _this=this;if(e===void 0){e=null}
if(this.background){window.requestAnimationFrame(function(){var _a;if(_this.background){var bgElem=_this.elem.children('.wb_content').children('.wb_detach_background');var isFixed=((_a=_this.background)===null||_a===void 0?void 0:_a.attachment)=='fixed';if(isFixed&&!_this.isElementPreview){var rect=_this.elem[0].getBoundingClientRect();bgElem.css({position:'fixed',width:rect.width+'px',left:rect.left+'px',top:0,'background-attachment':'scroll',clip:'rect('+rect.top+'px, '+rect.width+'px, '+rect.bottom+'px, '+0+'px)',});(0,jquery_98.default)(window).on('scroll',_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.on("site.structure.changed",_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.on("history.changed",_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.on("inplaceeditor.state.changed",_this.scrollEditorEventHandler)}else{bgElem.css({position:'absolute',width:'100%',left:0,top:0,});if(isFixed&&_this.isElementPreview){bgElem.css({'background-size':'cover'})}else if(_this.background.attachment){bgElem.css({'background-attachment':_this.background.attachment})}(0,jquery_98.default)(window).off('scroll',_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("site.structure.changed",_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("history.changed",_this.scrollEventHandler);BuilderEvent_16.GlobalEvents.off("inplaceeditor.state.changed",_this.scrollEventHandler)}}})}
e===null||e===void 0?void 0:e.preventDefault();return!1};LayoutElement.prototype.updateAlignmentActions=function(){var _this=this;if(!this._layout)
return;var mode=Service_40.Service.modeManager.getMode();var actionSet=(this._layout.type==CommonTypes_16.ChildrenLayoutType.Absolute&&mode==Service_40.Service.modeManager.MODE_PHONE)?1:0;if(this.alignmentActionSet===actionSet)
return;this.alignmentActionSet=actionSet;if(this.alignmentActionSet==1){this.controls.setToolbarActions([{name:__('Auto align elements'),icon:'fa fa-level-down',action:function(){return _this.alignElements()}}])}else{this.controls.setToolbarActions([])}};LayoutElement.prototype.buildLayoutPair=function(){return{id:this.id,self:new FlexLayoutControl_5.FlexLayoutControlValue(this._layout),parent:(this.parent?new FlexLayoutControl_5.FlexLayoutControlValue(this.parent._layout):null)}};LayoutElement.prototype.getLayout=function(){return this._layout};LayoutElement.prototype.setLayout=function(layout,noHistory){if(noHistory===void 0){noHistory=!1}
if(!noHistory){(0,HistoryUtil_5.changeFlexLayoutHistoryRecord)(this)}
this.layout=layout;if(!noHistory)(0,Collaboration_5.updateElementProperties)(this,{layout:layout})};LayoutElement.prototype.switchMode=function(fromMode,toMode,initial,manual){var _this=this;if(initial===void 0){initial=!1}
if(manual===void 0){manual=!1}
_super.prototype.switchMode.call(this,fromMode,toMode,initial,manual);this.controls.updatePadding(this.getActualPadding());this.updateAlignmentActions();window.requestAnimationFrame(function(){_this.updateLayoutHeight();setTimeout(function(){return _this.updateLayoutHeight()},300);_this.updateBackgroundRect();setTimeout(function(){return _this.updateBackgroundRect()},300)})};LayoutElement.prototype.setSelected=function(selected,skipGroup,skipFade,isSecondarySelection){if(skipGroup===void 0){skipGroup=!1}
if(skipFade===void 0){skipFade=!1}
if(isSecondarySelection===void 0){isSecondarySelection=!1}
_super.prototype.setSelected.call(this,selected,skipGroup,skipFade,isSecondarySelection);if(this.children.length<=100){for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];child.controls.setParentMarginsVisible(selected)}}};LayoutElement.prototype.handleValueChange=function(type,value,valueType){if(valueType==ControlsSelectionBorder_3.ValueType.PADDING||valueType==ControlsSelectionBorder_3.ValueType.MARGIN){var factor=this.getCurrentModeScaleFactor();value/=factor}
_super.prototype.handleValueChange.call(this,type,value,valueType)};LayoutElement.prototype.getDataDefaults=function(){return jquery_98.default.extend(_super.prototype.getDataDefaults.call(this),{minWidth:20,minHeight:20,})};LayoutElement.prototype.buildClipboardData=function(){var result=_super.prototype.buildClipboardData.call(this);var childHtml=[];for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];var data=child.buildClipboardData();if(data['text/html'])
childHtml.push(data['text/html']);}
var css={'display':'flex','justify-content':this._layout.hAlign,'align-items':this._layout.vAlign,'flex-wrap':this._layout.wrap};result['text/html']='<div style="'+(0,TextUtil_7.escapeHtmlChars)((0,StyleUtil_5.stringifyCss)(css))+'">'+childHtml.join('')+'</div>';return result};LayoutElement.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);var children=[];for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];children.push(child.serialize())}
data.content={layout:this.layout.serialize(),margin:__assign({},this._margin),children:children,background:this.background,border:this.border,borderRadius:this.borderRadius,isSticky:this.isSticky,stickyAlign:this.stickyAlign,backgroundElement:this.backgroundElement?this.backgroundElement.serialize():null,scaleFactors:this._scaleFactors,collapsed:this._collapsed,link:this.link,};if(this.parent&&this.parent instanceof Accordion_1.Accordion){data.content.accordionTitle=this.accordionTitle;data.content.accordionTitleIcon=this.accordionTitleIcon;data.content.accordionTitleIconRtl=this.accordionTitleIconRtl}
return data};LayoutElement.prototype.appendRestorationData=function(serializedData){_super.prototype.appendRestorationData.call(this,serializedData);if(serializedData.content){if(serializedData.content.backgroundElement&&this.backgroundElement&&this.backgroundElement.id===serializedData.content.backgroundElement.id)
this.backgroundElement.appendRestorationData(serializedData.content.backgroundElement);if(serializedData.content.children&&serializedData.content.children.length){var childIndex={};for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];childIndex[child.id]=child}
for(var _b=0,_c=serializedData.content.children;_b<_c.length;_b++){var childData=_c[_b];if(!childIndex.hasOwnProperty(childData.id))
continue;childIndex[childData.id].appendRestorationData(childData)}}}};LayoutElement.prototype.remove=function(options){if(this.container){this.container.droppable('destroy');(0,ElementBackground_2.dispose)(this.container)}
_super.prototype.remove.call(this,options)};LayoutElement.prototype.onBeforeRemove=function(options){_super.prototype.onBeforeRemove.call(this,options);if(options.preventRemoval)
return;if(this.backgroundElement)
this.backgroundElement.onBeforeRemove(options);for(var i=this.children.length-1;i>=0;i--){if(options.preventRemoval)
return;this.children[i].onBeforeRemove(options)}};LayoutElement.prototype.releaseResources=function(options){var recursiveOptions=options.isRecursive?options:jquery_98.default.extend({},options,{isRecursive:!0});if(this.backgroundElement)
this.backgroundElement.remove(recursiveOptions);for(var i=this.children.length-1;i>=0;i--)
this.children[i].remove(recursiveOptions);if(this.isSticky)
this.stickyDeInit();_super.prototype.releaseResources.call(this,options)};LayoutElement.prototype.extractBackground=function(){if(!this.backgroundElement)
return;wb_builder.historyAdd('extractBackground',{parent:this.id,element:this.backgroundElement.id},function(data){var parent=window.getElementById(data.parent);var element=window.getElementById(data.element);if(!parent||!element){console.error("Unable to undo 'extractBackground' action. Related elements not found.");return}
element.setSelected(!1);parent.removeChild(element);parent.backgroundElement=element;parent.updateStyle();BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())},function(data){var parent=window.getElementById(data.parent);var element=window.getElementById(data.element);if(!parent||!element){console.error("Unable to redo 'extractBackground' action. Related elements not found.");return}
element.setParent(null);parent.addChild(element);parent.backgroundElement=null;parent.updateStyle();BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())});this.backgroundElement.setParent(null);this.addChild(this.backgroundElement);this.backgroundElement=null;this.updateStyle();BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())};LayoutElement.prototype.canUseAsBackground=function(){return!1};LayoutElement.prototype.onResize=function(onConstruct){_super.prototype.onResize.call(this,onConstruct);this.updateStyle(onConstruct)};LayoutElement.prototype.onCompositionLoaded=function(){(0,ElementBackground_2.apply)(this,this.background,this.container,!1,'',this.borderRadius);this.updateBackgroundRect()};LayoutElement.prototype.onLiveResize=function(width,height){_super.prototype.onLiveResize.call(this,width,height);this.updateStyle()};LayoutElement.prototype.getWrap=function(){return this.layout.wrap};LayoutElement.prototype.getHorizontalAlignment=function(){return this.layout.hAlign};LayoutElement.prototype.getVerticalAlignment=function(){return this.layout.vAlign};LayoutElement.prototype.getHorizontalSpacing=function(){return this.layout.hSpacing};LayoutElement.prototype.getVerticalSpacing=function(){return this.layout.vSpacing};LayoutElement.prototype.supportsAutoWidth=function(){return!0};LayoutElement.prototype.supportsAutoHeight=function(){return!0};LayoutElement.prototype.supportsPadding=function(){return!0};LayoutElement.prototype.supportsMargin=function(){if(this.parent&&this.parent instanceof Accordion_1.Accordion){return!1}
return!0};LayoutElement.prototype.childNeedWrapped=function(){return!1};LayoutElement.prototype.updateDnDInfoMessage=function(){this.setDnDInfoMessageVisible(this.children.length==0&&this.getHeightInPixels()>=40&&this.getWidthInPixels()>=40&&!this.isElementPreview)};LayoutElement.prototype.onClick=function(e){var _a;_super.prototype.onClick.call(this,e);var canSelectParent=!0;this._originalMenu=this.menu;var target=(0,jquery_98.default)(e.target);if(this.isDnDInfoMsgVisible&&this.parent&&(target.hasClass('wb-lednd-msg')||target.parents('.wb-lednd-msg').length)){var that=this;if(that.parent&&that.isEmpty()&&!that.isElementPreview){(_a=this.menu)===null||_a===void 0?void 0:_a.hide();this.menu=null;(0,CompositionMenu_2.showAllCompositionsMenu)(e,that);canSelectParent=!1}}
if(canSelectParent&&this.parent&&this.parent instanceof Accordion_1.Accordion){this.setSelected(!1);this.parent.setSelected(!0)}};LayoutElement.prototype.onAfterClick=function(e){_super.prototype.onAfterClick.call(this,e);this.menu=this._originalMenu};LayoutElement.prototype.setDnDInfoMessageVisible=function(visible){this.isDnDInfoMsgVisible=visible;if(visible){if(!this.dndInfoMsg){this.dndInfoMsg=(0,jquery_98.default)('<div>').addClass('wb-lednd-msg').empty();if(!this.parent){this.dndInfoMsg.append((0,jquery_98.default)('<span>').addClass('fa fa-hand-paper-o wb-drag-in-empty')).append((0,jquery_98.default)('<span>').addClass('wb-drag-in-empty-text').text(__('Drag and drop element here'))).append((0,jquery_98.default)('<div>').addClass('wb-or-in-empty').text('— '+__('OR').toLowerCase()+' —'))}
this.dndInfoMsg.append((0,jquery_98.default)('<span>').addClass('fa fa-plus-circle wb-add-in-empty')).append((0,jquery_98.default)('<span>').addClass('wb-add-in-empty-text').text(__('Click to add')))}
this.dndInfoMsg.appendTo(this.elem);this.dndInfoMsg.children('.wb-drag-in-empty').css('display',this.getHeightInPixels()>=100?'inline-block':'none');this.dndInfoMsg.children('.wb-drag-in-empty-text').css('display',this.getHeightInPixels()>=100?'inline':'none');this.dndInfoMsg.children('.wb-or-in-empty').css('display',this.getHeightInPixels()>=100?'block':'none');var emptyText=this.dndInfoMsg.children('.wb-add-in-empty-text');emptyText.css('display',emptyText.width()<this.getWidthInPixels()-20-25?'inline':'none');if(this.controls&&!this.parent){this.controls.elem.css({cursor:'pointer'})}}else if(this.dndInfoMsg){this.dndInfoMsg.detach();if(this.controls){this.controls.elem.css({cursor:''})}}};LayoutElement.prototype.updateLayoutHeight=function(){if(!this.parent||!this._layout||this._layout.type!=CommonTypes_16.ChildrenLayoutType.Absolute)
return;var rect=this.getBoundingClientRect();var height=rect.height;for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];if(elem.isHidden()||elem.isHidden(!0))
continue;var elemRect=elem.getBoundingRect();if((elemRect.top-rect.top+elemRect.height)>height){height=elemRect.top-rect.top+elemRect.height}}
if(this.setSize(null,Math.floor(height))){wb_builder.setPageModified(!0)}};LayoutElement.prototype.alignElements=function(noRepeat){var _this=this;if(noRepeat===void 0){noRepeat=!1}
var vSpacing=20;var hSpacing=10;var smallMaxWidth=50;var rect=this.getBoundingRect();var prevWidth=0;var isPrevSmall=!0;var groupList=[];var prevOffsetTop=0;var offsetTop=0;for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];var elemRect=elem.getBoundingRect();var isSmall=elemRect.width<=smallMaxWidth;if(isSmall&&isPrevSmall&&(prevWidth+hSpacing+elemRect.width)<rect.width){prevWidth+=hSpacing+elemRect.width;offsetTop=prevOffsetTop;groupList.push([elem,elemRect])}else{prevWidth=elemRect.width;groupList=[[elem,elemRect]]}
var offsetLeft=Math.round((rect.width-prevWidth)/2);for(var _b=0,groupList_1=groupList;_b<groupList_1.length;_b++){var gi=groupList_1[_b];gi[0].setLocation(offsetLeft,offsetTop);offsetLeft+=gi[1].width+hSpacing}
isPrevSmall=isSmall;prevOffsetTop=offsetTop;offsetTop+=elemRect.height+vSpacing}
if(rect.height<offsetTop){this.setSize(null,offsetTop)}
if(!noRepeat){window.requestAnimationFrame(function(){return _this.alignElements(!0)})}};LayoutElement.prototype.findFullWidthContainer=function(promoted){var promotedContainer=promoted?promoted.fullWidthContainer:undefined;if(promotedContainer&&promoted&&promoted.elem.prev('.wb_element').length>0){return promotedContainer}
var parent=this;while(parent.elem.prev('.wb_element').length==0){var newParent=parent.getParent?parent.getParent():null;if(!newParent||!(newParent instanceof LayoutElement))
break;parent=newParent}
var root=parent;if(!root.fullWidthContainer){if(promotedContainer){root.fullWidthContainer=promotedContainer}else{root.fullWidthContainer=(0,jquery_98.default)('<div>').addClass('wb-full-width-container wb-layout-absolute')}
root.elem.append(root.fullWidthContainer)}else if(promotedContainer){var nodes=promotedContainer[0].childNodes;for(var i=0;i<nodes.length;i++){root.fullWidthContainer[0].appendChild(nodes.item(i))}
promotedContainer.remove()}
return root.fullWidthContainer};LayoutElement.prototype.updateContainment=function(element){var parent=element.getParent();if(!parent||this!==parent||element.isBackgroundElement)
return;if(element instanceof LayoutElement&&element.fullWidthContainer){this.findFullWidthContainer(element);element.fullWidthContainer=null}
var currentParent=element.elem[0].parentNode;var requiredParent=this.container[0];if(element.isFullWidth&&this._layout.type===CommonTypes_16.ChildrenLayoutType.Absolute){requiredParent=this.findFullWidthContainer()[0]}
if(currentParent!==requiredParent){requiredParent.appendChild(element.elem[0])}};LayoutElement.prototype.updateLayout=function(){if(!this._renderedLayout||!this._layout)
return;var bounds=this.getBoundingRect();var childrenBounds={};if(this._renderedLayout.type!==CommonTypes_16.ChildrenLayoutType.Absolute&&this._layout.type===CommonTypes_16.ChildrenLayoutType.Absolute){this.backupResponsiveData();for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];child.backupResponsiveData();childrenBounds[child.id]=child.getBoundingRect()}}
if(this._layout.type==CommonTypes_16.ChildrenLayoutType.Vertical){this.container.removeClass('wb-layout-absolute wb-layout-horizontal').addClass('wb-layout-vertical')}else if(this._layout.type==CommonTypes_16.ChildrenLayoutType.Horizontal){this.container.removeClass('wb-layout-absolute wb-layout-vertical').addClass('wb-layout-horizontal')}else{this.container.removeClass('wb-layout-horizontal wb-layout-vertical').addClass('wb-layout-absolute')}
if(this._renderedLayout!==this._layout){for(var _b=0,_c=this.children;_b<_c.length;_b++){var child=_c[_b];child.setLayoutConstraints(this._layout.type);this.updateContainment(child)}}
if(this._renderedLayout.type!==CommonTypes_16.ChildrenLayoutType.Absolute&&this._layout.type===CommonTypes_16.ChildrenLayoutType.Absolute){this.useMinWidth=this.useMaxWidth=this.useMinHeight=this.useMaxHeight=!1;this.flexGrow=this.flexShrink=0;if(this.undoing){var requiredHeight=0;for(var _d=0,_e=this.children;_d<_e.length;_d++){var child=_e[_d];var bottom=child.getHeightInPixels()+child.getLocation().top;if(requiredHeight<bottom)
requiredHeight=bottom}
if(this.height=='auto'&&requiredHeight>0){this.setSize(null,requiredHeight)}}else{this.setSize(Math.round(bounds.width),Math.round(bounds.height));for(var _f=0,_g=this.children;_f<_g.length;_f++){var child=_g[_f];var childBounds=childrenBounds[child.id];child.setLocation(Math.round(childBounds.left-bounds.left),Math.round(childBounds.top-bounds.top));child.setSize(Math.round(childBounds.width),Math.round(childBounds.height));child.useMinWidth=child.useMaxWidth=child.useMinHeight=child.useMaxHeight=!1}}}else if(this._renderedLayout.type===CommonTypes_16.ChildrenLayoutType.Absolute&&this._layout.type!==CommonTypes_16.ChildrenLayoutType.Absolute){if(this.getLayoutConstraints()!==CommonTypes_16.ChildrenLayoutType.Absolute)
this.restoreResponsiveData();for(var _h=0,_j=this.children;_h<_j.length;_h++){var child=_j[_h];if(!(child instanceof LayoutElement)||child.getChildrenLayout()!==CommonTypes_16.ChildrenLayoutType.Absolute)
child.restoreResponsiveData();}}
this._renderedLayout=this._layout;this.updateDnDInfoMessage()};LayoutElement.prototype.getChildrenLayout=function(){return this.layout.type};LayoutElement.prototype.getChildrenHorizontalAlign=function(){return this.layout.hAlign};LayoutElement.prototype.setLayoutConstraints=function(layoutType,initial){if(initial===void 0){initial=!1}
_super.prototype.setLayoutConstraints.call(this,layoutType,initial);if(this.parent&&layoutType==CommonTypes_16.ChildrenLayoutType.Horizontal){this.controls.setCloneMode(Controls_2.CloneMode.HORIZONTAL)}else if(this.parent&&layoutType==CommonTypes_16.ChildrenLayoutType.Vertical){this.controls.setCloneMode(Controls_2.CloneMode.VERTICAL)}else{this.controls.setCloneMode(Controls_2.CloneMode.NONE)}
this.controls.setAlignmentInfo(this.buildLayoutPair());this.updateAlignmentActions()};LayoutElement.prototype.setDebugLinesVisible=function(visible){_super.prototype.setDebugLinesVisible.call(this,visible);for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];elem.setDebugLinesVisible(visible)}};LayoutElement.prototype.updateHierarchyLevel=function(dom,initial){if(dom===void 0){dom=!1}
if(initial===void 0){initial=!1}
_super.prototype.updateHierarchyLevel.call(this,dom,initial);for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];elem.updateHierarchyLevel(dom,initial)}};LayoutElement.prototype.zReset=function(){this.zIndexHandle.changeLayer();for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];if(!(elem instanceof LayoutElement))
continue;elem.zReset()}};LayoutElement.prototype.setParent=function(parent,initial){if(initial===void 0){initial=!1}
_super.prototype.setParent.call(this,parent,initial);this.isFlexible=!parent;this.updateSize(initial);this.updateDnDInfoMessage()};LayoutElement.prototype.addChild=function(element,noZReset,initial,refElem,after,updateStyle,forCollaboration){if(noZReset===void 0){noZReset=!1}
if(initial===void 0){initial=!1}
if(after===void 0){after=!1}
if(updateStyle===void 0){updateStyle=!1}
if(forCollaboration===void 0){forCollaboration=!1}
var refIdx=(refElem instanceof Element_10.Element)?(refElem?this.children.indexOf(refElem):-1):-1;if(refElem&&refIdx<0)
return!1;var idx=this.children.indexOf(element);if(idx>=0&&(!refElem||refElem===element))
return!1;var isNew=!0;var oldParent=element.getParent();if(oldParent===this&&(!refElem||refElem===element))
return!1;if(oldParent){isNew=!1;oldParent.removeChild(element);if(oldParent==this){refIdx=(refElem instanceof Element_10.Element)?(refElem?this.children.indexOf(refElem):-1):-1}}else if(element instanceof LayoutElement)
wb_builder.bodyInstance.removeChild(element);if(refElem){if(after){refElem.elem.after(element.elem)}else{refElem.elem.before(element.elem)}}else this.container.append(element.elem);element.setParent(this,initial);if(refIdx>=0)
this.children.splice(refIdx+(after?1:0),0,element);else this.children.push(element);element.setLayoutConstraints(this._layout.type,initial);this.zIndexHandle.assignLayer(element,noZReset);this.updateDnDInfoMessage();if(!initial){BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent());Service_40.Service.HelpSystemPlayer.notify('add-plugin-'+element.getClassType(),element);if(!this.isElementPreview&&!forCollaboration){if(isNew){(0,Collaboration_5.addElement)(element,refElem||null,after)}else{(0,Collaboration_5.moveElement)(element,refElem||null,after)}}}
return!0};LayoutElement.prototype.removeChild=function(element,batch){if(batch===void 0){batch=!1}
var idx=this.children.indexOf(element);if(idx>=0){this.children.splice(idx,1);element.setParent(null);this.zIndexHandle.changeLayer()}
if(this.container[0].contains(element.elem[0]))
element.elem.detach();else{var fullWidthContainer=this.findFullWidthContainer();if(fullWidthContainer&&fullWidthContainer[0].contains(element.elem[0])){element.elem.detach()}}
if(!batch){this.updateDnDInfoMessage();BuilderEvent_16.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_16.SiteStructureChangedBuilderEvent())}};LayoutElement.prototype.isEmpty=function(){return(this.children.length==0)};LayoutElement.prototype.getChildren=function(){return __spreadArray([],this.children,!0)};LayoutElement.prototype.getChildIndex=function(element){return this.children.indexOf(element)};LayoutElement.prototype.getChildAt=function(index){return(index>=0&&index<this.children.length)?this.children[index]:null};LayoutElement.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(!this.name||useType){var typeName=__('Block');if(this.layout.type==CommonTypes_16.ChildrenLayoutType.Horizontal)
typeName=__('Horizontal Layout');else if(this.layout.type==CommonTypes_16.ChildrenLayoutType.Vertical)
typeName=__('Vertical Layout');return typeName}
return _super.prototype.getName.call(this)};LayoutElement.prototype.getIcon=function(){if(this.layout.type==CommonTypes_16.ChildrenLayoutType.Horizontal){return'wbico wbico-horizontal-layout'}else if(this.layout.type==CommonTypes_16.ChildrenLayoutType.Vertical){return'wbico wbico-vertical-layout'}else{return'wbico wbico-block-layout'}};LayoutElement.prototype.getMaxPossibleHeight=function(){return 999999};LayoutElement.prototype.hasActiveLink=function(){return URLControl_4.default.isActiveLinkValue(this._link)};LayoutElement.prototype.getSiteTreeNodeProperties=function(){var props=_super.prototype.getSiteTreeNodeProperties.call(this);props.collapsible=!0;props.isCollapsed=this.collapsed;props.hasLink=this.hasActiveLink();props.hasBg=!!this.backgroundElement;props.hasBgGallery=!!this.backgroundElement&&this.backgroundElement.className==='Gallery';props.bgElementName=this.backgroundElement?this.backgroundElement.getName():null;return props};LayoutElement.prototype.getSiteTreeNodeChildren=function(){var _a;var children=this.getChildren();if(this.layout.type==CommonTypes_16.ChildrenLayoutType.Absolute){children.sort(function(a,b){var v1=a.top,v2=b.top;if(v1===v2){v1=a.left;v2=b.left}
if(v1===v2){v1=b.getZIndex();v2=a.getZIndex()}
if(v1===v2)
return 0;return(v1<v2)?-1:1})}
if((_a=this.backgroundElement)===null||_a===void 0?void 0:_a.isSelected()){children.unshift(this.backgroundElement)}
return children};LayoutElement.prototype.isAcceptingChildren=function(){return!0};LayoutElement.prototype.getContentPadding=function(){return this._individualMargin?jquery_98.default.extend({},this._individualMargin):null};LayoutElement.prototype.comProperties=function(){var _this=this;if(!this.individualMargin)
this.individualMargin={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,};var fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{name:__("Layout"),children:[{type:VerticalLayout_29.VerticalLayout,spacing:15,children:[{type:FlexLayoutControl_5.FlexLayoutControl,id:"layout"},{type:HorizontalLayout_6.HorizontalLayout,columnWeights:[2,10],children:[{type:'CheckBox',id:'isSticky',label:__('Sticky')},]},]},]},{name:__("Spacing"),type:'spacing',children:[{type:VerticalLayout_29.VerticalLayout,spacing:15,children:[{type:VerticalLayout_29.VerticalLayout,id:'scaleFactorsBlock',css:{marginTop:(this.isResizable?15:0)},children:[{type:'Label',text:__('Padding and margin scale factors')},{type:UIModeScaleFactors_4.UIModeScaleFactors,id:'scaleFactors'},]},]},]},{name:__("Style"),type:'style',children:[{type:VerticalLayout_29.VerticalLayout,spacing:15,children:[{type:FlowLayout_18.FlowLayout,children:[{type:BackgroundControl_8.BackgroundControl,id:"background",useColor:!0,useImage:!0,usePosition:!0,useRepeat:!0,useAttachment:!0,useSize:!0,useFullWidth:!1},{type:VerticalLayout_29.VerticalLayout,id:'bgElementBlock',children:[{type:Label_21.Label,text:__('Background element')},{type:BackgroundElementSelector_2.BackgroundElementSelector,id:'bgElement'},]},]},{type:HorizontalLayout_6.HorizontalLayout,columnWeights:[4,8],children:[{type:VerticalLayout_29.VerticalLayout,children:[{type:Label_21.Label,text:__('Border')},{type:BorderControl_9.BorderControl,id:'border',noTransparent:!1},]},{type:VerticalLayout_29.VerticalLayout,children:[{type:Label_21.Label,text:__('Rounded corners')},{type:RoundCornersControl_3.RoundCornersControl,id:'borderRadius'},]},]},]}]}],callbackFunc:function(fields){_this.background=fields.background.getValue();if(!fields.bgElement.getValue()){_this.extractBackground()}
_this.border=fields.border.getValue();_this.borderRadius=fields.borderRadius.getValue();_this.isSticky=fields.isSticky.getValue();_this.scaleFactors=fields.scaleFactors.getValue();if(_this._scaleFactors&&_this._scaleFactors.tv===100&&_this._scaleFactors.desktop===100&&_this._scaleFactors.tablet===100&&_this._scaleFactors.phone===100)
_this._scaleFactors=null;_this.layout=fields.layout.getValue()}});fields.background.setValue(this.background);fields.bgElementBlock.setVisible(this.backgroundElement?!0:!1);fields.bgElement.setValue(this.backgroundElement);fields.border.setValue(this.border);fields.borderRadius.setValue(this.borderRadius);fields.isSticky.setValue(this.isSticky);fields.scaleFactors.setValue(this.scaleFactors);fields.layout.setValue(this.layout);return fields};LayoutElement.prototype.isChildrenLayoutHorizontalNow=function(){return(this.layout.type===CommonTypes_16.ChildrenLayoutType.Horizontal&&(this.layout.wrapRes===""||Service_40.Service.modeManager.compareModes(Service_40.Service.modeManager.getMode(),this.layout.wrapRes)>0))};LayoutElement.prototype.getCurrentModeScaleFactor=function(){return this._scaleFactors?this._scaleFactors[Service_40.Service.modeManager.getMode()]/100:1};LayoutElement.prototype.getUsedMediaGalleryItems=function(){var items=_super.prototype.getUsedMediaGalleryItems.call(this);if(this._background&&this._background.image&&this._background.image!==''&&this._background.image!=='none'){items.push(this._background.image)}
return items};LayoutElement.prototype.initDroppable=function(){var _this=this;if(!this.container)
return;this.container.droppable({tolerance:"pointer",greedy:!0,hoverClass:"wb-state-highlight",accept:".wb_element,.wb_item",drop:function(e,ui){if(e.originalEvent.isImmediatePropagationStopped())
return!1;if(wb_builder.getEditingLocked()){e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();e.returnValue=!1}
var addItm=function(isNewItem,items,composition){var item=items[0];_this.addChild(item);wb_builder.setPageModified(!0);_this.updateStyle()};var itm=ui.draggable.wbGetClassInstance();if(itm){if(itm.removed||itm.dropAccepted)
return;addItm(!1,[itm],null)}else{var className=ui.draggable.attr('id');className=className?className.split("__")[1]:null;if(!className)
return;var data_3={content:{}};ElementRegister_12.ElementRegister.createElementOrComposition(className,function(className,idx){return data_3},function(items,composition){addItm(!0,items,composition)})}
e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();e.returnValue=!1;return!1}})};LayoutElement.prototype.updateStyle=function(initial,langCode,hardReset){if(hardReset===void 0){hardReset=!1}
_super.prototype.updateStyle.call(this,initial,langCode);this.updateLayout();if(!this.container||!this.children)
return;var isHorizontal=this.isChildrenLayoutHorizontalNow();(0,ElementBackground_2.apply)(this,this.background,this.container,hardReset,'',this.borderRadius);this.updateBackgroundRect();if(this.border&&this.border.css)
this.container.css(this.border.css);if(this.borderRadius&&this.borderRadius.css)
this.container.css(this.borderRadius.css);this.elem.css({position:this.isSticky?'fixed':''});var factor=this.getCurrentModeScaleFactor();this.container.css({position:"relative",minWidth:20,minHeight:20,padding:this._individualMargin?(Math.round(this._individualMargin.paddingTop*factor)+"px "+Math.round(this._individualMargin.paddingRight*factor)+"px "+Math.round(this._individualMargin.paddingBottom*factor)+"px "+Math.round(this._individualMargin.paddingLeft*factor)+"px"):"",overflow:(this.isSticky&&(this.stickyAlign=="left center"||this.stickyAlign=="right center"))?'auto':'',}).css(this.layout.getContainerCss(isHorizontal));if(this.layout.type===CommonTypes_16.ChildrenLayoutType.Horizontal){if(isHorizontal)
this.container.removeClass("wb-layout-temp-vertical");else this.container.addClass("wb-layout-temp-vertical")}
for(var _i=0,_a=this.children;_i<_a.length;_i++){var child=_a[_i];if(this.layout.type===CommonTypes_16.ChildrenLayoutType.Horizontal){if(isHorizontal)
child.setLayoutConstraints(CommonTypes_16.ChildrenLayoutType.Horizontal,initial);else child.setLayoutConstraints(CommonTypes_16.ChildrenLayoutType.Vertical,initial)}
child.updateStyle(initial,langCode)}
if(this.isSticky)
this.stickyUpdatePosition();};LayoutElement.prototype.isMainPopupBlock=function(){var _a;return!this.parent&&((_a=wb_builder.site.pages[wb_builder.pageId])===null||_a===void 0?void 0:_a.type)===SitePage_2.PageType.TYPE_POPUP};LayoutElement.prototype.stickyInit=function(){var _this=this;if(this.stickyUpdateCallback)
return;var watcher=0,retry=0,lastSize;var animationWatcherFunc=function(){var size=_this.stickyUpdatePosition();if(size!==lastSize){retry=0;watcher=requestAnimationFrame(animationWatcherFunc)}else if(++retry<=2)
watcher=requestAnimationFrame(animationWatcherFunc);else watcher=0;lastSize=size};this.stickyUpdateCallback=function(){if(watcher)
cancelAnimationFrame(watcher);lastSize="";retry=0;watcher=requestAnimationFrame(animationWatcherFunc)};(0,jquery_98.default)(window).on("orientationchange resize scroll",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.on("modes.changed",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.on("site.structure.changed",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.on("modal.show",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.on("modal.hide",this.stickyUpdateCallback);for(var i=250;i<5000;i+=250)
setTimeout(this.stickyUpdateCallback,i);this.elem.addClass("wb-sticky");wb_builder.bodyInstance.registerStickyElement(this)};LayoutElement.prototype.stickyDeInit=function(){if(!this.stickyUpdateCallback)
return;(0,jquery_98.default)(window).off("orientationchange resize scroll",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.off("modes.changed",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.off("site.structure.changed",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.off("modal.show",this.stickyUpdateCallback);BuilderEvent_16.GlobalEvents.off("modal.hide",this.stickyUpdateCallback);this.stickyUpdateCallback=null;this.elem.css({left:"",top:"",right:"",bottom:""});this.elem.removeClass("wb-sticky");wb_builder.bodyInstance.unregisterStickyElement(this)};LayoutElement.prototype.stickyUpdatePosition=function(){var _a;if(!this.isSticky)
return"";var rect=wb_builder.getViewportRect();if(!rect||rect.width<=0||rect.height<=0)
return"";var hAlign=(_a=(this.stickyAlign||"center top").split(" "),_a[0]),vAlign=_a[1];var css={left:(hAlign!="right")?rect.left:"auto",top:(vAlign!="bottom")?rect.top:"auto",right:(hAlign!="left")?rect.right:"auto",bottom:(vAlign!="top")?rect.bottom:"auto",width:(hAlign==="center"||this.width==="auto")?"auto":MathUtil_1.MathUtil.calcSizeInPixels(this.width,rect.width),height:(vAlign==="center"||this.height==="auto")?"auto":MathUtil_1.MathUtil.calcSizeInPixels(this.height,rect.height),maxWidth:(hAlign==="center")?"":(this.useMaxWidth?this.maxWidth:''),maxHeight:(vAlign==="center")?"":(this.useMaxHeight?this.maxHeight:''),};this.elem.css(css);wb_builder.bodyInstance.stickyInvalidate();return"".concat(rect.left,"|").concat(rect.top,"|").concat(rect.right,"|").concat(rect.bottom,"|").concat(rect.width,"|").concat(rect.height)};LayoutElement.prototype.enableDropZone=function(enable){this.container.droppable(enable?"enable":"disable")};LayoutElement.prototype.getBoundingClientRect=function(){return this.container[0].getBoundingClientRect()};LayoutElement.prototype.getCalculatedHeight=function(fast){if(fast===void 0){fast=!1}
var h=0,minHeight=this.children.length>0?0:100;for(var _i=0,_a=this.children;_i<_a.length;_i++){var elem=_a[_i];if(!elem||elem.isHidden()||elem.isHidden(!0))
continue;var b=elem.getBounds(!1,fast);h=Math.max(h,b.top2)}
h=Math.max(h,minHeight);return h};LayoutElement.prototype.updateSize=function(forceFlexible,forcedMinHeight,fast){if(forceFlexible===void 0){forceFlexible=!1}
if(forcedMinHeight===void 0){forcedMinHeight=0}
if(fast===void 0){fast=!1}
if(this.parent||this.layout.type!=CommonTypes_16.ChildrenLayoutType.Absolute)
return;if(this.isFlexible||forceFlexible){var h=this.getCalculatedHeight(fast);if(h<this.minHeight)
h=this.minHeight;if(parseInt(''+forcedMinHeight)){h=Math.max(forcedMinHeight,h)}
this.setSize(null,h+(this._individualMargin?this._individualMargin.paddingTop+this._individualMargin.paddingBottom:0))}
if(wb_builder.showLayout){wb_builder.highlightLayout(!0,fast)}};LayoutElement.prototype.getPercentWidth=function(width){var selfWidth=this.getWidthInPixels()-(this._individualMargin?(this._individualMargin.paddingLeft+this._individualMargin.paddingRight):0);return width/selfWidth*100};LayoutElement.prototype.isZIndexEnabled=function(){return this.isSticky||_super.prototype.isZIndexEnabled.call(this)};LayoutElement.prototype.isGlobalZIndex=function(){return this.isSticky||_super.prototype.isGlobalZIndex.call(this)};LayoutElement.prototype.canBeCommon=function(){return this.rootBlockType!==CommonTypes_16.ContentBlockId.Main};LayoutElement.prototype.updateContextMenu=function(isSidebar){if(isSidebar===void 0){isSidebar=!1}
_super.prototype.updateContextMenu.call(this,isSidebar);var menu=this.menu;if(!menu)
return;menu.setVisible('order',this.isSticky)};LayoutElement.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"accordionTitle",type:PropertyType_6.PropertyType.AccordionLayoutTitle,uiComponentOptions:function(){return{visible:this.parent&&this.parent instanceof Accordion_1.Accordion,}},onChange:function(){if(this.parent&&this.parent instanceof Accordion_1.Accordion){this.parent.updateStyle()}}});this.registerProperty({name:"accordionTitleIcon",type:PropertyType_6.PropertyType.AccordionLayoutTitleIcon,uiComponentOptions:function(){return{visible:this.parent&&this.parent instanceof Accordion_1.Accordion,}},onChange:function(){if(this.parent&&this.parent instanceof Accordion_1.Accordion){this.parent.updateStyle()}}});this.registerProperty({name:"accordionTitleIconRtl",type:PropertyType_6.PropertyType.AccordionLayoutTitleIconRtl,uiComponentOptions:function(){return{visible:this.parent&&this.parent instanceof Accordion_1.Accordion,}},onChange:function(){if(this.parent&&this.parent instanceof Accordion_1.Accordion){this.parent.updateStyle()}}});this.registerProperty({name:"isSticky",type:PropertyType_6.PropertyType.ElementPositionSticky});this.registerProperty({name:"stickyAlign",type:PropertyType_6.PropertyType.StickyAlignment,dependencies:["isSticky"],uiComponentOptions:function(){return{visible:this.isSticky}}});this.registerProperty({name:"layout",type:PropertyType_6.PropertyType.BlockLayout});this.registerProperty({name:"individualShadow",type:PropertyType_6.PropertyType.IndividualShadowLayout,onChange:function(property,owner){if(!owner.elem||!owner.controls||!owner.elem.data("resizableExt"))
return;owner.updateStyle()}});this.registerProperty({name:"scaleFactors",type:PropertyType_6.PropertyType.SpacingModeScaleFactors,onChange:function(property,owner){owner.controls.updateMargin(owner.getActualMargins());owner.controls.updatePadding(owner.getActualPadding())}});this.registerProperty({name:"background",type:PropertyType_6.PropertyType.LayoutElementBackground,uiComponentOptions:{useColor:!0,useImage:!0,usePosition:!0,useRepeat:!0,useAttachment:!0,useSize:!0,useFullWidth:!1,useOpacity:!0,allowVideo:!0,}});this.registerProperty({name:"backgroundElement",type:PropertyType_6.PropertyType.ElementBackgroundElement,uiComponentOptions:function(){return{visible:!!this.backgroundElement}}});this.registerProperty({name:"border",type:PropertyType_6.PropertyType.LayoutElementBgBorder});this.registerProperty({name:"link",type:PropertyType_6.PropertyType.LayoutElementOnClickLink,uiComponentOptions:function(){return{helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):__("This whole block works as a big link if an URL is specified.")}}})};LayoutElement.pluginName='LayoutElement';return LayoutElement}(Element_10.Element));ElementRegister_12.ElementRegister.registerClass("LayoutElement",LayoutElement)});define("js/util/AreaTree",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AreaTree=void 0;var AreaTreeNode=(function(){function AreaTreeNode(areas,axis){if(axis===void 0){axis="y"}
this.axis="y";this.median=0;this.leaves=null;this.areas=null;if(areas)
this.build(areas,axis);else this.axis=axis}
AreaTreeNode.prototype.build=function(areas,axis,tryDifferentAxis){if(axis===void 0){axis="y"}
if(tryDifferentAxis===void 0){tryDifferentAxis=!0}
this.axis=axis;this.median=0;this.leaves=null;this.areas=(areas.length<=AreaTreeNode.MAX_AREAS_PER_NODE)?areas:null;if(this.areas)
return;var cnt=0;if(axis==="x"){for(var _i=0,areas_1=areas;_i<areas_1.length;_i++){var area=areas_1[_i];if(area.width>0){this.median+=area.left+area.width/2;cnt++}}}else{for(var _a=0,areas_2=areas;_a<areas_2.length;_a++){var area=areas_2[_a];if(area.height>0){this.median+=area.top+area.height/2;cnt++}}}
if(cnt==0){cnt=areas.length;if(axis==="x"){for(var _b=0,areas_3=areas;_b<areas_3.length;_b++){var area=areas_3[_b];this.median+=area.left}}else{for(var _c=0,areas_4=areas;_c<areas_4.length;_c++){var area=areas_4[_c];this.median+=area.top}}}
this.median=Math.round(this.median/cnt);var left=[];var right=[];if(axis==="x"){for(var _d=0,areas_5=areas;_d<areas_5.length;_d++){var area=areas_5[_d];if(area.left<this.median||(area.width==0&&area.left==this.median))
left.push(area);if(area.left+area.width>this.median||(area.width==0&&area.left==this.median))
right.push(area);}}else{for(var _e=0,areas_6=areas;_e<areas_6.length;_e++){var area=areas_6[_e];if(area.top<this.median||(area.height==0&&area.top==this.median))
left.push(area);if(area.top+area.height>this.median||(area.height==0&&area.top==this.median))
right.push(area);}}
var nextAxis=(axis!=="x")?"x":"y";if(left.length===areas.length||right.length===areas.length){if(tryDifferentAxis)
this.build(areas,nextAxis,!1);else this.areas=areas;return}
this.leaves={left:new AreaTreeNode(left,nextAxis),right:new AreaTreeNode(right,nextAxis)}};AreaTreeNode.prototype.search=function(left,top,right,bottom,result){if(this.areas){for(var _i=0,_a=this.areas;_i<_a.length;_i++){var area=_a[_i];if(area.left<right&&area.top<bottom&&area.left+area.width>left&&area.top+area.height>top)
result[area.id]=area}}else if(this.leaves){if(this.axis==="x"){if(left<this.median)
this.leaves.left.search(left,top,right,bottom,result);if(right>this.median)
this.leaves.right.search(left,top,right,bottom,result);}else{if(top<this.median)
this.leaves.left.search(left,top,right,bottom,result);if(bottom>this.median)
this.leaves.right.search(left,top,right,bottom,result);}}};AreaTreeNode.MAX_AREAS_PER_NODE=18;return AreaTreeNode}());var AreaTree=(function(_super){__extends(AreaTree,_super);function AreaTree(){return _super!==null&&_super.apply(this,arguments)||this}
AreaTree.prototype.findIndexed=function(left,top,width,height){var result={};this.search(left,top,left+width,top+height,result);return result};AreaTree.prototype.find=function(left,top,width,height){var dict=this.findIndexed(left,top,width,height);var result=[];for(var id in dict){if(dict.hasOwnProperty(id))
result.push(dict[id]);}
return result};return AreaTree}(AreaTreeNode));exports.AreaTree=AreaTree});define("js/util/DropZoneCalculator",["require","exports","js/CommonTypes","js/util/AreaTree","js/util/ElementUtil","js/util/HistoryUtil","js/element/ElementContainer"],function(require,exports,CommonTypes_17,AreaTree_1,ElementUtil_2,HistoryUtil_6,ElementContainer_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.DropZoneCalculator=exports.DropZoneOrientation=exports.DropZoneAreaType=void 0;var DropZoneAreaType;(function(DropZoneAreaType){DropZoneAreaType[DropZoneAreaType.Ignore=0]="Ignore";DropZoneAreaType[DropZoneAreaType.Before=1]="Before";DropZoneAreaType[DropZoneAreaType.After=2]="After";DropZoneAreaType[DropZoneAreaType.Between=3]="Between";DropZoneAreaType[DropZoneAreaType.IntoResponsive=4]="IntoResponsive";DropZoneAreaType[DropZoneAreaType.IntoAbsolute=5]="IntoAbsolute";DropZoneAreaType[DropZoneAreaType.WrapBefore=6]="WrapBefore";DropZoneAreaType[DropZoneAreaType.WrapAfter=7]="WrapAfter"})(DropZoneAreaType||(exports.DropZoneAreaType=DropZoneAreaType={}));var DropZoneOrientation;(function(DropZoneOrientation){DropZoneOrientation[DropZoneOrientation.None=0]="None";DropZoneOrientation[DropZoneOrientation.Horiziontal=1]="Horiziontal";DropZoneOrientation[DropZoneOrientation.Vertical=2]="Vertical"})(DropZoneOrientation||(exports.DropZoneOrientation=DropZoneOrientation={}));var DropZoneCalculator=exports.DropZoneCalculator=(function(){function DropZoneCalculator(rootPageElements,skipElement,absoluteHelperPosition,absoluteHelperSize){this.skipElement=skipElement;this.absoluteHelperPosition=absoluteHelperPosition;this.absoluteHelperSize=absoluteHelperSize;this.areas=[];this.stickyAreas=[];this.createAreas(rootPageElements,0,!1);this.tree=new AreaTree_1.AreaTree(this.areas);this.stickyTree=new AreaTree_1.AreaTree(this.stickyAreas)}
DropZoneCalculator.prototype.createAreas=function(elements,baseLevel,isStickyParent){for(var _i=0,elements_10=elements;_i<elements_10.length;_i++){var element=elements_10[_i];if(element.hiddenResp||element.hidden)
continue;var isContainer=(0,ElementContainer_2.is_element_container)(element);var isLayoutElement=element!==this.skipElement&&isContainer;var isStickySelf=isLayoutElement&&element.isSticky;var isSticky=isStickyParent||isStickySelf;var children=isContainer?element.getChildren():null;if(element.getClassType()=='Accordion'){var accordion=element;var child=accordion.getChildAt(accordion.lastSelectedIdx||0);children=child?[child]:null}
var parent_23=element.getParent();var rect=element.getBoundingRect(!isSticky);var color=Math.round(Math.random()*255)+","+Math.round(Math.random()*255)+","+Math.round(Math.random()*255);var areaCount=void 0;var type=(isLayoutElement&&element.getChildrenLayout()===CommonTypes_17.ChildrenLayoutType.Absolute)?DropZoneAreaType.IntoAbsolute:DropZoneAreaType.IntoResponsive;var orientation_1=(element.getLayoutConstraints()===CommonTypes_17.ChildrenLayoutType.Horizontal)?DropZoneOrientation.Horiziontal:DropZoneOrientation.Vertical;var level=isStickySelf?(100*(1+element.zIndex)):baseLevel;if(element===this.skipElement){type=DropZoneAreaType.Ignore;areaCount=(element.getLayoutConstraints()==CommonTypes_17.ChildrenLayoutType.Absolute)?0:1;orientation_1=DropZoneOrientation.None;children=null}
if(isLayoutElement&&this.skipElement&&element.parent===this.skipElement){type=DropZoneAreaType.Ignore;areaCount=(element.getLayoutConstraints()==CommonTypes_17.ChildrenLayoutType.Absolute)?0:1;orientation_1=DropZoneOrientation.None;children=null}else if(element.getLayoutConstraints()==CommonTypes_17.ChildrenLayoutType.Absolute){areaCount=1;orientation_1=DropZoneOrientation.None;if(!isLayoutElement)
continue}else if(!parent_23||isStickySelf)
areaCount=1;else if(isLayoutElement)
areaCount=3;else areaCount=4;var areas=[];for(var i=areaCount;i>0;i--){var area={id:element.id+":"+i,left:rect.left,top:rect.top,width:rect.width,height:rect.height,type:type,orientation:orientation_1,level:level,sticky:isSticky,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:element,targetA:element,targetB:element,debugData:{color:color},};areas.push(area)}
if(areaCount>1){if(element.getLayoutConstraints()==CommonTypes_17.ChildrenLayoutType.Horizontal)
this.adjustElementAreas(areas,"left","width");else this.adjustElementAreas(areas,"top","height");if(parent_23){if(parent_23.getClassType()!='Accordion'){var idx=parent_23.getChildIndex(element);var sibling=parent_23.getChildAt(idx-1);if(sibling&&!sibling.hiddenResp&&!sibling.hidden){areas[0].targetA=sibling;areas[0].type=(sibling===this.skipElement)?DropZoneAreaType.Ignore:DropZoneAreaType.Between}
sibling=parent_23.getChildAt(idx+1);if(sibling&&!sibling.hiddenResp&&!sibling.hidden){areas[areaCount-1].targetB=sibling;areas[areaCount-1].type=(sibling===this.skipElement)?DropZoneAreaType.Ignore:DropZoneAreaType.Between}}}}
for(var i=areaCount-1;i>=0;i--){var area=areas[i];if(area.type===DropZoneAreaType.IntoResponsive&&children&&children.length){areas.splice(i,1);this.subdivideContainerIntoAreas(areas,element,children,rect,level,isSticky);break}}
for(var _a=0,areas_7=areas;_a<areas_7.length;_a++){var area=areas_7[_a];if(area.type===DropZoneAreaType.WrapBefore){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionBefore(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionBefore(area,"top","bottom","height","left","right","width")}else if(area.type===DropZoneAreaType.WrapAfter){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionAfter(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionAfter(area,"top","bottom","height","left","right","width")}
if(area.type===DropZoneAreaType.Before){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionBefore(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionBefore(area,"top","bottom","height","left","right","width")}else if(area.type===DropZoneAreaType.After){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionAfter(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionAfter(area,"top","bottom","height","left","right","width")}else if(area.type===DropZoneAreaType.Between){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionBetween(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionBetween(area,"top","bottom","height","left","right","width")}else if(area.type===DropZoneAreaType.IntoResponsive){if(area.orientation==DropZoneOrientation.Horiziontal)
this.calcAreaHelperPositionInto(area,"left","right","width","top","bottom","height");else this.calcAreaHelperPositionInto(area,"top","bottom","height","left","right","width")}else if(area.type===DropZoneAreaType.IntoAbsolute){area.helperPosition=this.absoluteHelperPosition;area.helperSize=this.absoluteHelperSize}
if(area.type!==DropZoneAreaType.IntoAbsolute){if(area.helperSize.width<DropZoneCalculator.helperSize){var delta=DropZoneCalculator.helperSize-area.helperSize.width;area.helperSize.width=DropZoneCalculator.helperSize;area.helperPosition.left-=delta/2}
if(area.helperSize.height<DropZoneCalculator.helperSize){var delta=DropZoneCalculator.helperSize-area.helperSize.height;area.helperSize.height=DropZoneCalculator.helperSize;area.helperPosition.top-=delta/2}}(isSticky?this.stickyAreas:this.areas).push(area)}
if(children)
this.createAreas(children,level+1,isSticky);}};DropZoneCalculator.prototype.calcAreaHelperPositionBefore=function(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp){var bounds=area.element.getBoundingRect(!area.sticky);var crossMin=bounds[crossMinProp];var crossMax=bounds[crossMaxProp];var offset=this.pxStringToNumber(area.element.elem.css("margin-"+mainMinProp));area.helperPosition[mainMinProp]=Math.round(bounds[mainMinProp]-offset-DropZoneCalculator.helperSize/2);area.helperPosition[crossMinProp]=crossMin;area.helperSize[mainSizeProp]=DropZoneCalculator.helperSize;area.helperSize[crossSizeProp]=crossMax-crossMin};DropZoneCalculator.prototype.calcAreaHelperPositionAfter=function(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp){var bounds=area.element.getBoundingRect(!area.sticky);var crossMin=bounds[crossMinProp];var crossMax=bounds[crossMaxProp];var offset=this.pxStringToNumber(area.element.elem.css("margin-"+mainMaxProp));area.helperPosition[mainMinProp]=Math.round(bounds[mainMaxProp]+offset-DropZoneCalculator.helperSize/2);area.helperPosition[crossMinProp]=crossMin;area.helperSize[mainSizeProp]=DropZoneCalculator.helperSize;area.helperSize[crossSizeProp]=crossMax-crossMin};DropZoneCalculator.prototype.calcAreaHelperPositionBetween=function(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp){var boundsA=area.targetA.getBoundingRect(!area.sticky);var boundsB=area.targetB.getBoundingRect(!area.sticky);if(boundsA[mainMaxProp]>boundsB[mainMinProp]){if(area.element===area.targetA)
this.calcAreaHelperPositionAfter(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp);else this.calcAreaHelperPositionBefore(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp)}else{var crossMin=Math.min(boundsA[crossMinProp],boundsB[crossMinProp]);var crossMax=Math.max(boundsA[crossMaxProp],boundsB[crossMaxProp]);var offsetA=this.pxStringToNumber(area.targetA.elem.css("margin-"+mainMaxProp));var offsetB=this.pxStringToNumber(area.targetB.elem.css("margin-"+mainMinProp));var mainMin=boundsA[mainMaxProp]+offsetA;var mainMax=boundsB[mainMinProp]-offsetB;area.helperPosition[mainMinProp]=Math.round((mainMin+mainMax)/2-DropZoneCalculator.helperSize/2);area.helperPosition[crossMinProp]=crossMin;area.helperSize[mainSizeProp]=DropZoneCalculator.helperSize;area.helperSize[crossSizeProp]=crossMax-crossMin}};DropZoneCalculator.prototype.calcAreaHelperPositionInto=function(area,mainMinProp,mainMaxProp,mainSizeProp,crossMinProp,crossMaxProp,crossSizeProp){var contentBounds=area.element.getContentRect(!area.sticky);area.helperPosition.left=contentBounds.left;area.helperPosition.top=contentBounds.top;area.helperSize.width=contentBounds.width;area.helperSize.height=contentBounds.height};DropZoneCalculator.prototype.adjustElementAreas=function(areas,posProp,sizeProp){areas[0].type=DropZoneAreaType.Before;if(areas.length===3){var size=Math.floor(areas[0][sizeProp]/10);var minPx=(areas[0][sizeProp]<30)?Math.floor(areas[0][sizeProp]/3):10;var maxPx=(areas[1].type===DropZoneAreaType.IntoAbsolute)?10:size;areas[2][sizeProp]=areas[0][sizeProp]=Math.min(Math.max(size,minPx),maxPx);areas[1][sizeProp]-=areas[0][sizeProp]+areas[2][sizeProp];areas[1][posProp]+=areas[0][sizeProp];areas[2][posProp]=areas[1][posProp]+areas[1][sizeProp];areas[2].type=DropZoneAreaType.After}else if(areas.length===4){var sizePropWrap=sizeProp==="width"?"height":"width";var posPropWrap=posProp==="left"?"top":"left";var offsetBefore=void 0,offsetAfter=void 0;var parent_24=areas[1].element.getParent();if(parent_24){var off=areas[1].element.elem.position()[posPropWrap];var offset=(sizePropWrap==='height'?parent_24.getHeightInPixels():parent_24.getWidthInPixels())-areas[1][sizePropWrap];offsetBefore=Math.floor(off*0.8);offsetAfter=Math.floor((offset-off)*0.8)}else{offsetBefore=offsetAfter=Math.floor(areas[1][sizePropWrap]/3)}
areas[0][sizeProp]=Math.floor(areas[0][sizeProp]/2);areas[1].type=DropZoneAreaType.WrapBefore;areas[1].orientation=areas[1].orientation===DropZoneOrientation.Horiziontal?DropZoneOrientation.Vertical:DropZoneOrientation.Horiziontal;areas[1][posPropWrap]-=offsetBefore;areas[1][sizePropWrap]=Math.floor(areas[1][sizePropWrap]/4)+offsetBefore;areas[2].type=DropZoneAreaType.WrapAfter;areas[2].orientation=areas[2].orientation===DropZoneOrientation.Horiziontal?DropZoneOrientation.Vertical:DropZoneOrientation.Horiziontal;areas[2][posPropWrap]+=areas[2][sizePropWrap]-Math.floor(areas[2][sizePropWrap]/4);areas[2][sizePropWrap]=Math.floor(areas[2][sizePropWrap]/4)+offsetAfter;areas[3][sizeProp]-=areas[0][sizeProp];areas[3][posProp]+=areas[0][sizeProp];areas[3].type=DropZoneAreaType.After}};DropZoneCalculator.prototype.subdivideContainerIntoAreas=function(areas,element,children,bounds,level,isSticky){if(!children.length)
return;var mainMinProp;var mainMaxProp;var mainSizeProp;var crossMinProp;var crossMaxProp;var crossSizeProp;var mainMin,mainMax,crossMin,crossMax,mainReverse,crossReverse;var isRtl=!1;var isDownToBottom=element.getWrap()===CommonTypes_17.FlexWrap.WrapReverse;var orientation;if(element.isChildrenLayoutHorizontalNow()){orientation=DropZoneOrientation.Horiziontal;mainMinProp="left";mainMaxProp="right";mainSizeProp="width";crossMinProp="top";crossMaxProp="bottom";crossSizeProp="height";mainReverse=isRtl;crossReverse=isDownToBottom}else{orientation=DropZoneOrientation.Vertical;mainMinProp="top";mainMaxProp="bottom";mainSizeProp="height";crossMinProp="left";crossMaxProp="right";crossSizeProp="width";mainReverse=isDownToBottom;crossReverse=isRtl}
var rows=[];var currentRow=null;for(var _i=0,children_3=children;_i<children_3.length;_i++){var child_1=children_3[_i];if((child_1.getClassType()==="LayoutElement"&&child_1.isSticky))
continue;var childBounds_1=child_1.getBoundingRect(!isSticky);mainMin=childBounds_1[mainMinProp];mainMax=childBounds_1[mainMaxProp];crossMin=childBounds_1[crossMinProp];crossMax=childBounds_1[crossMaxProp];if(!currentRow||(mainReverse?(currentRow.mainMin<mainMax):(currentRow.mainMax>mainMin))){if(currentRow){currentRow.mainMin=bounds[mainMinProp];currentRow.mainMax=bounds[mainMaxProp];if(!rows.length){if(crossReverse)
currentRow.crossMax=bounds[crossMaxProp];else currentRow.crossMin=bounds[crossMinProp]}
rows.push(currentRow)}
currentRow={elements:[],bounds:[],mainMin:mainMin,mainMax:mainMax,crossMin:crossMin,crossMax:crossMax,}}
currentRow.elements.push(child_1);currentRow.bounds.push(childBounds_1);currentRow.mainMin=Math.min(currentRow.mainMin,mainMin);currentRow.mainMax=Math.max(currentRow.mainMax,mainMax);currentRow.crossMin=Math.min(currentRow.crossMin,crossMin);currentRow.crossMax=Math.max(currentRow.crossMax,crossMax)}
if(currentRow){currentRow.mainMin=bounds[mainMinProp];currentRow.mainMax=bounds[mainMaxProp];if(!rows.length){if(crossReverse)
currentRow.crossMax=bounds[crossMaxProp];else currentRow.crossMin=bounds[crossMinProp]}
if(crossReverse)
currentRow.crossMin=bounds[crossMinProp];else currentRow.crossMax=bounds[crossMaxProp];rows.push(currentRow)}
var prevRow=null,nextRow;var isFirst,isLast,isFirstInRow,isLastInRow;var child,childBounds,nextSibling,prevSibling,leftSibling,rightSibling;var area;var midpoint;var type;for(var i=0;i<rows.length;i++){currentRow=rows[i];nextRow=(i==rows.length-1)?null:rows[i+1];if(crossReverse){crossMin=nextRow?(nextRow.crossMax+currentRow.crossMin)/2:currentRow.crossMin;crossMax=prevRow?(prevRow.crossMin+currentRow.crossMax)/2:currentRow.crossMax}else{crossMin=prevRow?(prevRow.crossMax+currentRow.crossMin)/2:currentRow.crossMin;crossMax=nextRow?(nextRow.crossMin+currentRow.crossMax)/2:currentRow.crossMax}
for(var j=0;j<currentRow.elements.length;j++){child=currentRow.elements[j];childBounds=currentRow.bounds[j];isFirstInRow=j==0;isLastInRow=j==currentRow.elements.length-1;prevSibling=isFirstInRow?(prevRow?prevRow.elements[prevRow.elements.length-1]:null):currentRow.elements[j-1];nextSibling=isLastInRow?(nextRow?nextRow.elements[0]:null):currentRow.elements[j+1];if(prevSibling&&(prevSibling.hiddenResp||prevSibling.hidden))
prevSibling=null;if(nextSibling&&(nextSibling.hiddenResp||nextSibling.hidden))
nextSibling=null;if(mainReverse){mainMin=isLastInRow?currentRow.mainMin:((currentRow.bounds[j+1][mainMaxProp]+childBounds[mainMinProp])/2);mainMax=isFirstInRow?currentRow.mainMax:((currentRow.bounds[j-1][mainMinProp]+childBounds[mainMaxProp])/2);leftSibling=nextSibling;rightSibling=prevSibling}else{mainMin=isFirstInRow?currentRow.mainMin:((currentRow.bounds[j-1][mainMaxProp]+childBounds[mainMinProp])/2);mainMax=isLastInRow?currentRow.mainMax:((currentRow.bounds[j+1][mainMinProp]+childBounds[mainMaxProp])/2);leftSibling=prevSibling;rightSibling=nextSibling}
midpoint=(childBounds[mainMinProp]+childBounds[mainMaxProp])/2;if(child===this.skipElement||(leftSibling&&leftSibling===this.skipElement))
type=DropZoneAreaType.Ignore;else if(leftSibling)
type=DropZoneAreaType.Between;else type=mainReverse?DropZoneAreaType.After:DropZoneAreaType.Before;areas.push({id:child.id+":left",left:(mainMinProp==="left")?mainMin:crossMin,top:(mainMinProp==="top")?mainMin:crossMin,width:(mainMinProp==="left")?(midpoint-mainMin):(crossMax-crossMin),height:(mainMinProp==="top")?(midpoint-mainMin):(crossMax-crossMin),type:type,orientation:orientation,level:level,sticky:isSticky,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:child,targetA:(leftSibling&&!mainReverse)?leftSibling:child,targetB:(leftSibling&&mainReverse)?leftSibling:child,debugData:{color:Math.round(Math.random()*255)+","+Math.round(Math.random()*255)+","+Math.round(Math.random()*255),},});if(child===this.skipElement||(rightSibling&&rightSibling===this.skipElement))
type=DropZoneAreaType.Ignore;else if(rightSibling)
type=DropZoneAreaType.Between;else type=mainReverse?DropZoneAreaType.Before:DropZoneAreaType.After;areas.push({id:child.id+":right",left:(mainMinProp==="left")?midpoint:crossMin,top:(mainMinProp==="top")?midpoint:crossMin,width:(mainMinProp==="left")?(mainMax-midpoint):(crossMax-crossMin),height:(mainMinProp==="top")?(mainMax-midpoint):(crossMax-crossMin),type:type,orientation:orientation,level:level,sticky:isSticky,helperPosition:{left:0,top:0},helperSize:{width:0,height:0},element:child,targetA:(rightSibling&&mainReverse)?rightSibling:child,targetB:(rightSibling&&!mainReverse)?rightSibling:child,debugData:{color:Math.round(Math.random()*255)+","+Math.round(Math.random()*255)+","+Math.round(Math.random()*255),},})}
prevRow=currentRow}};DropZoneCalculator.prototype.pxStringToNumber=function(value){return/px$/.test(value)?parseFloat(value):0};DropZoneCalculator.prototype.findAllAreasAt=function(pageX,pageY,scrollX,scrollY){return this.tree.find(pageX,pageY,1,1).concat(this.stickyTree.find(pageX-scrollX,pageY-scrollY,1,1))};DropZoneCalculator.prototype.findAreaAt=function(pageX,pageY,scrollX,scrollY){var areas=this.findAllAreasAt(pageX,pageY,scrollX,scrollY);var topArea=null;for(var _i=0,areas_8=areas;_i<areas_8.length;_i++){var area=areas_8[_i];if(!topArea||topArea.level<area.level)
topArea=area}
return topArea};DropZoneCalculator.prototype.dropElementsAt=function(elements,pageX,pageY,scrollX,scrollY,useElementSizeInAbsolute,tryWrap){if(useElementSizeInAbsolute===void 0){useElementSizeInAbsolute=!1}
if(tryWrap===void 0){tryWrap=!1}
wb_builder.historyBeginGroup();if(elements[0]&&elements[0].index&&elements[0].id!='new'){(0,HistoryUtil_6.createMoveElementsHistoryRecord)(elements)}
var area=this.findAreaAt(pageX,pageY,scrollX,scrollY);if(!area||area.type===DropZoneAreaType.Ignore)
return!1;var parent=null;switch(area.type){case DropZoneAreaType.WrapBefore:case DropZoneAreaType.WrapAfter:parent=area.targetA.getParent();break;case DropZoneAreaType.Before:case DropZoneAreaType.After:case DropZoneAreaType.Between:{parent=area.targetA.getParent();break}
case DropZoneAreaType.IntoResponsive:case DropZoneAreaType.IntoAbsolute:{parent=area.targetA;break}}
if(!parent)
return!1;var insertItems=function(elements){if(!area||!parent)
return;var parentBounds=parent===null||parent===void 0?void 0:parent.getBoundingRect(!0);var _loop_25=function(element){switch(area.type){case DropZoneAreaType.WrapBefore:{var orientation_2=(parent.getChildrenLayout()===CommonTypes_17.ChildrenLayoutType.Horizontal)?CommonTypes_17.ChildrenLayoutType.Vertical:CommonTypes_17.ChildrenLayoutType.Horizontal;(0,ElementUtil_2.wrapElements)([],orientation_2,parent).done(function(wrapper){if(wrapper&&parent&&area){parent.addChild(wrapper,!1,!1,area.targetA,!1);wrapper.addChild(area.targetA);wrapper.addChild(element,!1,!1,area.targetA,!1);(0,HistoryUtil_6.wrapElementHistoryRecord)(wrapper);if(parent.getChildren().length===1){var parentSite=parent.getSize();wrapper.setSize(parentSite.width,parentSite.height);var parentParent=parent.getParent();if(parentParent){parentParent.addChild(wrapper,!1,!1,parent,!1);parent.remove({noHistory:!0})}(0,HistoryUtil_6.changeLayoutTypeHistoryRecord)(wrapper,parent)}}}).fail(function(){});break}
case DropZoneAreaType.WrapAfter:{var orientation_3=(parent.getChildrenLayout()===CommonTypes_17.ChildrenLayoutType.Horizontal)?CommonTypes_17.ChildrenLayoutType.Vertical:CommonTypes_17.ChildrenLayoutType.Horizontal;(0,ElementUtil_2.wrapElements)([],orientation_3,parent).done(function(wrapper){if(wrapper&&parent&&area){parent.addChild(wrapper,!1,!1,area.targetA,!0);wrapper.addChild(area.targetA);wrapper.addChild(element,!1,!1,area.targetA,!0);(0,HistoryUtil_6.wrapElementHistoryRecord)(wrapper);if(parent.getChildren().length===1){var parentSite=parent.getSize();wrapper.setSize(parentSite.width,parentSite.height);var parentParent=parent.getParent();if(parentParent){parentParent.addChild(wrapper,!1,!1,parent,!1);parent.remove({noHistory:!0})}(0,HistoryUtil_6.changeLayoutTypeHistoryRecord)(wrapper,parent)}}}).fail(function(){});break}
case DropZoneAreaType.Before:{if(parent.getClassType()=='Accordion'&&!(element.getClassType()=='LayoutElement')){(0,ElementUtil_2.wrapElements)([],CommonTypes_17.ChildrenLayoutType.Vertical).done(function(wrapper){if(wrapper&&parent&&area){parent.addChild(wrapper,!1,!1,area.targetB,!1);parent.updateStyle();wrapper.addChild(element,!1,!1,null,!0);(0,HistoryUtil_6.wrapElementHistoryRecord)(wrapper)}}).fail(function(){})}else{parent.addChild(element,!1,!1,area.targetA,!1)}
break}
case DropZoneAreaType.After:{if(parent.getClassType()=='Accordion'&&!(element.getClassType()=='LayoutElement')){(0,ElementUtil_2.wrapElements)([],CommonTypes_17.ChildrenLayoutType.Vertical).done(function(wrapper){if(wrapper&&parent&&area){parent.addChild(wrapper,!1,!1,area.targetB,!0);parent.updateStyle();wrapper.addChild(element,!1,!1,null,!0);(0,HistoryUtil_6.wrapElementHistoryRecord)(wrapper)}}).fail(function(){})}else{parent.addChild(element,!1,!1,area.targetA,!0)}
area.targetA=element;break}
case DropZoneAreaType.Between:{if(parent.getClassType()=='Accordion'&&!(element.getClassType()=='LayoutElement')){(0,ElementUtil_2.wrapElements)([],CommonTypes_17.ChildrenLayoutType.Vertical).done(function(wrapper){if(wrapper&&parent&&area){parent.addChild(wrapper,!1,!1,area.targetA,!0);parent.updateStyle();wrapper.addChild(element,!1,!1,null,!0);(0,HistoryUtil_6.wrapElementHistoryRecord)(wrapper)}}).fail(function(){})}else{parent.addChild(element,!1,!1,area.targetB,!1)}
break}
case DropZoneAreaType.IntoResponsive:{parent.addChild(element);break}
case DropZoneAreaType.IntoAbsolute:{parent.addChild(element);if(useElementSizeInAbsolute){var size=element.getSizeInPixels();element.setLocation(pageX-parentBounds.left-Math.round(size.width/2),pageY-parentBounds.top-Math.round(size.height/2))}else{var hpLeft=area.helperPosition.left;var hpTop=area.helperPosition.top;var hpWidth=area.helperSize.width;var hpHeight=area.helperSize.height;if(element.id=='new'){hpLeft=hpTop=-35;hpWidth=hpHeight=70}
element.setLocation(pageX-parentBounds.left+hpLeft,pageY-parentBounds.top+hpTop);if(hpWidth&&hpHeight){if(element.shouldHaveAutoHeight()){hpHeight='auto'}
element.setSize(hpWidth,hpHeight)}}
break}}
element.onResize();element.updateStyle()};for(var _i=0,elements_11=elements;_i<elements_11.length;_i++){var element=elements_11[_i];_loop_25(element)}
parent.updateStyle();parent.updateSize();wb_builder.historyEndGroup()};if(tryWrap){(0,ElementUtil_2.tryWrapElements)(elements,parent).done(function(wrapper){if(wrapper)
insertItems([wrapper]);}).fail(function(){return insertItems(elements)})}else{insertItems(elements)}
wb_builder.site.invalidateAnchorOffsets();return!0};DropZoneCalculator.helperSize=4;DropZoneCalculator.debugDone=!1;return DropZoneCalculator}())});define("js/util/WindowAutoScrollUtil",["require","exports","jquery"],function(require,exports,jquery_99){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.WindowAutoScrollUtil=void 0;var WindowAutoScrollUtil=exports.WindowAutoScrollUtil=(function(){function WindowAutoScrollUtil(){this.timeout=null;this.currentClientPos=null;this.currentDeltaFunction=null;this.currentCallback=null}
WindowAutoScrollUtil.prototype.start=function(clientPos,callback,deltaFunc){this.currentClientPos=clientPos;this.currentDeltaFunction=deltaFunc||WindowAutoScrollUtil.defaultDeltaFunction;this.currentCallback=callback;this.tick()};WindowAutoScrollUtil.prototype.stop=function(){if(this.timeout!==null){clearTimeout(this.timeout);this.timeout=null}};WindowAutoScrollUtil.prototype.tick=function(){var _this=this;this.stop();if(!this.currentClientPos||!this.currentDeltaFunction||!this.currentCallback)
return;var clientPos=jquery_99.default.extend({},this.currentClientPos);var delta=this.currentDeltaFunction(clientPos);if(delta.left||delta.top){window.scrollTo(Math.min(document.body.clientWidth-window.innerWidth,window.scrollX+delta.left),Math.min(document.body.clientHeight-window.innerHeight,window.scrollY+delta.top));this.timeout=setTimeout(function(){return _this.tick()},WindowAutoScrollUtil.INTERVAL)}
try{this.currentCallback(clientPos,{left:clientPos.left+window.scrollX,top:clientPos.top+window.scrollY,})}catch(err){this.stop();throw err}};WindowAutoScrollUtil.defaultDeltaFunction=function(clientPos){var delta={left:0,top:0};var documentBounds=document.body.getBoundingClientRect();var canvasBounds=wb_builder.body.getBounds();var clientWidth=(0,jquery_99.default)(window).width();var clientHeight=(0,jquery_99.default)(window).height();var offset={left:canvasBounds.left-documentBounds.left,top:canvasBounds.top-documentBounds.top,right:documentBounds.right-canvasBounds.right,bottom:documentBounds.bottom-canvasBounds.bottom,};if(clientPos.top<WindowAutoScrollUtil.RANGE+offset.top){delta.top=Math.min(Math.max(clientPos.top-WindowAutoScrollUtil.RANGE-offset.top,-WindowAutoScrollUtil.RANGE),0)}else if(clientPos.top>clientHeight-WindowAutoScrollUtil.RANGE-offset.bottom){delta.top=Math.min(Math.max(clientPos.top+WindowAutoScrollUtil.RANGE+offset.bottom-clientHeight,0),WindowAutoScrollUtil.RANGE)}
if(clientPos.left<WindowAutoScrollUtil.RANGE+offset.left){delta.left=Math.min(Math.max(clientPos.left-WindowAutoScrollUtil.RANGE-offset.left,-WindowAutoScrollUtil.RANGE),0)}else if(clientPos.left>clientWidth-WindowAutoScrollUtil.RANGE-offset.right){delta.left=Math.min(Math.max(clientPos.left+WindowAutoScrollUtil.RANGE+offset.right-clientWidth,0),WindowAutoScrollUtil.RANGE)}
return delta};WindowAutoScrollUtil.fitHtmlElementIntoWindow=function($element,padding){if(padding===void 0){padding=5}
var bounds=$element[0].getBoundingClientRect();var $win=(0,jquery_99.default)(window);var deltaLeft=0,deltaTop=0;var max=$win.width()-bounds.width-padding;if(bounds.left>max)
deltaLeft=max-bounds.left;if(bounds.left+deltaLeft<padding)
deltaLeft=padding-bounds.left;max=$win.height()-bounds.height-padding;if(bounds.top>max)
deltaTop=max-bounds.top;if(bounds.top+deltaTop<padding)
deltaTop=padding-bounds.top;$element.css({left:parseFloat($element.css("left"))+deltaLeft,top:parseFloat($element.css("top"))+deltaTop,})};WindowAutoScrollUtil.INTERVAL=15;WindowAutoScrollUtil.RANGE=50;return WindowAutoScrollUtil}())});define("js/element/MoveRelativeHandle",["require","exports","js/Service","js/CommonTypes","js/util/EventUtil","js/util/DropZoneCalculator","js/util/WindowAutoScrollUtil","jquery"],function(require,exports,Service_41,CommonTypes_18,EventUtil_9,DropZoneCalculator_2,WindowAutoScrollUtil_1,jquery_100){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MoveRelativeHandle=void 0;function subOffset(off1,off2){off1.left-=off2.left;off1.top-=off2.top;return off1}
var commonOnUpInit=!1;var currentItem=null;var startHandle=null;var showDebugBounds=!1;var debugBounds=(0,jquery_100.default)('<div>').css({position:'absolute',padding:0,margin:0,fontSize:'1px',lineHeight:'1px',overflow:'hidden',display:'block',zIndex:999,border:'1px solid blue',pointerEvents:'none',touchAction:'none',});var windowScrollUtil=new WindowAutoScrollUtil_1.WindowAutoScrollUtil();var elementsFromPoint=(typeof document.elementsFromPoint==='function')?document.elementsFromPoint:((typeof document.msElementsFromPoint==='function')?document.msElementsFromPoint:null);function inBody(left,top){var isIn=!1,bBody=wb_builder.body;if(elementsFromPoint){var elList=elementsFromPoint.call(document,left,top);for(var i=0,c=elList.length;i<c;i++){if(!bBody.contains(elList[i]))
continue;isIn=!0;break}}else{isIn=bBody.contains(document.elementFromPoint(left,top))}
return isIn}
function commonOnMove(e){if(!startHandle)
return;if(!startHandle.moveStarted){startHandle.start(e)}
if(!currentItem)
return;windowScrollUtil.start((0,EventUtil_9.clientPosFromEvent)(e),function(cPos,mPos){if(!currentItem){windowScrollUtil.stop();return}
var area=inBody(cPos.left,cPos.top)?currentItem.dropAreas.findAreaAt(mPos.left,mPos.top,window.scrollX,window.scrollY):null;currentItem.helper.css({left:mPos.left-currentItem.offset.left,top:mPos.top-currentItem.offset.top,});if(area){currentItem.helper.removeClass("wb-drag-helper-err");WindowAutoScrollUtil_1.WindowAutoScrollUtil.fitHtmlElementIntoWindow(currentItem.helper);if(currentItem.element.getLayoutConstraints()==CommonTypes_18.ChildrenLayoutType.Absolute&&currentItem.element.id!='new'&&area.type===DropZoneCalculator_2.DropZoneAreaType.IntoAbsolute&&area.targetA){var tab=area.targetA.elem[0].getBoundingClientRect();currentItem.placeholder.addClass("hidden");currentItem.helper[0].style.display='none';currentItem.element.controls.setMuted(!1);var snapPos={position:{left:mPos.left+area.helperPosition.left-tab.left-window.scrollX,top:mPos.top+area.helperPosition.top-tab.top-window.scrollY}};currentItem.element.snapHandle.handleDraggableDrag({type:'drag'},snapPos);currentItem.element.setLocation(snapPos.position.left,snapPos.position.top);if(currentItem.element.parent&&currentItem.element.parent.id!=area.targetA.id){area.targetA.addChild(currentItem.element);if(backdrop)
backdrop.update(area.targetA.getBoundingClientRect());var loc=currentItem.element.getLocation(!0);currentItem.element.snapHandle.handleDraggableStop({type:'dragstop'},{position:loc});currentItem.element.snapHandle.handleDraggableStart({type:'dragstart'},{position:loc})}
var rect=currentItem.element.getBoundingRect();var targetHeight=currentItem.targetHeight;var reqTargetHeight=rect.bottom-tab.top;if(targetHeight.element!==area.targetA){if(targetHeight.element&&targetHeight.height>0){targetHeight.element.setSize(null,targetHeight.height)}
targetHeight.element=area.targetA;targetHeight.height=tab.height}
if(targetHeight.height<reqTargetHeight){targetHeight.element.setSize(null,reqTargetHeight)}else if(tab.height>targetHeight.height&&tab.height>reqTargetHeight){targetHeight.element.setSize(null,Math.max(targetHeight.height,reqTargetHeight))}}else{currentItem.helper[0].style.display='';currentItem.placeholder.removeClass("hidden").css({left:(area.type===DropZoneCalculator_2.DropZoneAreaType.IntoAbsolute)?mPos.left+area.helperPosition.left:(area.helperPosition.left+(area.sticky?window.scrollX:0)),top:(area.type===DropZoneCalculator_2.DropZoneAreaType.IntoAbsolute)?mPos.top+area.helperPosition.top:(area.helperPosition.top+(area.sticky?window.scrollY:0)),width:area.helperSize.width,height:area.helperSize.height,})}}else{currentItem.helper.addClass("wb-drag-helper-err");currentItem.placeholder.addClass("hidden");wb_builder.bodyInstance.hideInfoTip()}
if(currentItem.onChange)
currentItem.onChange();})}
function commonOnUp(e){if(!currentItem){if(startHandle)
startHandle.cancel();return}
var cPos=(0,EventUtil_9.clientPosFromEvent)(e);if(inBody(cPos.left,cPos.top)){wb_builder.setPageModified(!0);var mPos=(0,EventUtil_9.posFromEvent)(e);currentItem.element.left=currentItem.startPosition.left;currentItem.element.top=currentItem.startPosition.top;var isDraggingSelected=!1;var srcParent_1=currentItem.element.getParent();var elements=[];if(srcParent_1&&currentItem.element.getLayoutConstraints()!=CommonTypes_18.ChildrenLayoutType.Absolute){var selectedElements=Service_41.Service.element.getSelected();for(var id in selectedElements){if(srcParent_1===selectedElements[id].getParent()){elements.push(selectedElements[id]);if(id==currentItem.element.id){isDraggingSelected=!0}}}
if(isDraggingSelected){elements=elements.sort(function(a,b){var ai=srcParent_1.getChildIndex(a);var bi=srcParent_1.getChildIndex(b);return(ai==bi)?0:((ai<bi)?-1:1)})}}
if(!isDraggingSelected)
elements=[currentItem.element];currentItem.dropAreas.dropElementsAt(elements,mPos.left,mPos.top,window.scrollX,window.scrollY,!1,(startHandle&&!startHandle.isDummyPayload)?!0:!1);if(currentItem.onChange)
currentItem.onChange();}
if(startHandle)
startHandle.cancel();if(currentItem.onDone)
currentItem.onDone();wb_builder.bodyInstance.hideInfoTip();currentItem=null;startHandle=null}
var BackDrop=(function(){function BackDrop(){this.active=!1;this.top=(0,jquery_100.default)('<div>').addClass('wb-move-overlay wb-move-overlay-top');this.right=(0,jquery_100.default)('<div>').addClass('wb-move-overlay wb-move-overlay-right');this.bottom=(0,jquery_100.default)('<div>').addClass('wb-move-overlay wb-move-overlay-bottom');this.left=(0,jquery_100.default)('<div>').addClass('wb-move-overlay wb-move-overlay-left')}
BackDrop.prototype.update=function(bounds){var win=(0,jquery_100.default)(window);var wWidth=win.width();var wHeight=win.height();this.top.css({left:bounds.left,width:bounds.width,height:bounds.top});this.right.css({width:wWidth-bounds.left-bounds.width});this.bottom.css({left:bounds.left,width:bounds.width,height:wHeight-bounds.top-bounds.height});this.left.css({width:bounds.left})};BackDrop.prototype.attach=function(bounds){this.update(bounds);(0,jquery_100.default)(document.body).append(this.top).append(this.right).append(this.bottom).append(this.left);this.active=!0};BackDrop.prototype.detach=function(){this.active=!1;this.top.detach();this.right.detach();this.bottom.detach();this.left.detach()};return BackDrop}());var backdrop=null;function handleBackdropStart(element){if(backdrop&&backdrop.active)
handleBackdropEnd();var parent=element.getParent();if(!parent||parent.getChildrenLayout()!=CommonTypes_18.ChildrenLayoutType.Absolute)
return;if(!backdrop)
backdrop=new BackDrop();backdrop.attach(parent.getBoundingClientRect())}
function handleBackdropEnd(){if(!backdrop||!backdrop.active)
return;backdrop.detach()}
var MoveRelativeHandle=(function(){function MoveRelativeHandle(elements,builder,onChange,onDone,onStart){if(onChange===void 0){onChange=null}
if(onDone===void 0){onDone=null}
if(onStart===void 0){onStart=null}
this.elements=elements;this.builder=builder;this.onChange=onChange;this.onDone=onDone;this.onStart=onStart;this.moveStarted=!1;this.startEvent=null;this.enabled=!0;this.noTargetChecks=!1;this.isDummyPayload=!1;this.lastEventType='';this.lastEventTime=0;if(!commonOnUpInit){commonOnUpInit=!0;var body=(0,jquery_100.default)(document.body);document.addEventListener('mousemove',commonOnMove,!0);document.addEventListener('mouseup',commonOnUp,!0);document.addEventListener('touchmove',commonOnMove,!0);document.addEventListener('touchend',commonOnUp,!0);document.addEventListener('touchcancel',commonOnUp,!0);if(showDebugBounds)
body.append(debugBounds);}}
MoveRelativeHandle.fromToolbarItem=function(elem,builder,onDone,onStart){var dummy=Service_41.Service.element.buildDummy(elem.icon,elem.name);var handle=new MoveRelativeHandle([dummy],builder,null,function(){var parent=dummy.getParent();if(!parent)
return;onDone(function(items){Service_41.Service.element.replaceDummy(dummy,items)})},function(){if(typeof onStart==='function')
onStart();var off=elem.elem.offset();var offWidth=elem.elem.width();var offHeight=elem.elem.height();dummy.pageLeft=off.left-((dummy.width-offWidth)/2);dummy.pageTop=off.top-((dummy.height-offHeight)/2)});handle.noTargetChecks=!0;handle.isDummyPayload=!0;handle.bindToElement(elem.elem);return handle};MoveRelativeHandle.prototype.updateElements=function(elements){this.elements=elements};MoveRelativeHandle.prototype.bindToElement=function(elem){var _this=this;elem.on('mousedown touchstart',function(e){if(e.button!==0&&e.button!==undefined)
return;_this.onDown(e)})};MoveRelativeHandle.prototype.triggerDown=function(e,dryRun){if(dryRun===void 0){dryRun=!1}
this.onDown(e,dryRun)};MoveRelativeHandle.prototype.triggerUp=function(e){commonOnUp(e.originalEvent)};MoveRelativeHandle.prototype.isEnabled=function(){return this.enabled};MoveRelativeHandle.prototype.setEnabled=function(enabled){this.enabled=enabled};MoveRelativeHandle.prototype.onDown=function(e,dryRun){if(dryRun===void 0){dryRun=!1}
if(e.type=='mousedown'&&this.lastEventType=='touchstart'&&(Date.now()-this.lastEventTime)<100){return}else{this.lastEventType=e.type;this.lastEventTime=Date.now()}
if(!this.enabled||this.elements.length==0||this.elements[0].isLocked||this.startEvent)
return;if(e.type=='touchstart'&&!this.noTargetChecks&&!this.elements[0].isSelected())
return;if(!this.noTargetChecks){var target=e.target?(0,jquery_100.default)(e.target):null;if(target&&!target.hasClass('wb_controls')&&!target.hasClass('wb_cover')&&!target.hasClass('wb_move_btn')&&!target.parent().hasClass('wb_move_btn'))
return}
if(!dryRun){this.moveStarted=!1;this.startEvent=e.originalEvent;startHandle=this}
e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();return!1};MoveRelativeHandle.prototype.cancel=function(){windowScrollUtil.stop();this.startEvent=null;if(currentItem){if(currentItem.placeholder)
currentItem.placeholder.remove();if(currentItem.helper)
currentItem.helper.remove();currentItem.element.controls.setMuted(!1);currentItem.element.controls.setResizeHandlesVisible(!0);currentItem.element.controls.setButtonsVisible(!0);currentItem.element.snapHandle.handleDraggableStop({type:'dragstop'},{position:currentItem.element.getLocation(!0)})}
handleBackdropEnd();startHandle=null;this.moveStarted=!1};MoveRelativeHandle.prototype.start=function(e){if(!this.startEvent||wb_builder.getEditingLocked()){this.cancel();return}
var element=this.elements[0];var isNew=element.id==="new"&&!element.getParent()&&!element.index;if(element.id!=="new"&&!element.getParent())
return;var se=this.startEvent;var p2=(0,EventUtil_9.posFromEvent)(se);if((0,EventUtil_9.moveEventDiff)(se,e)<=4)
return;var bounds=element.getBoundingRect(!0);var dropAreas=new DropZoneCalculator_2.DropZoneCalculator(wb_builder.bodyInstance.getChildren(),element,{left:isNew?-50:(bounds.left-p2.left),top:isNew?-50:(bounds.top-p2.top)},{width:isNew?100:bounds.width,height:isNew?100:bounds.height});this.moveStarted=!0;wb_builder.bodyInstance.cacheBounds();element.cacheBounds();if(this.onStart)
this.onStart();if(!element.isSelected()){Service_41.Service.element.unselectAll()}
element.setSelected(!0,!0,!0);element.controls.setResizeHandlesVisible(!1);var placeholder=(0,jquery_100.default)('<div class="wb-drag-placeholder hidden">').appendTo(document.body);var helper=Service_41.Service.element.buildDummy(element.getEmtyMessageImage(),element.getName(),70,70,!0).elem.css({zIndex:''}).appendTo(document.body);if(!elementsFromPoint)
helper.addClass('wb-drag-helper-fallback');element.controls.setOutlineActive(!1);element.controls.setHover(!1);element.controls.setMuted(!0);element.controls.setButtonsVisible(!1);element.setSelected(!0,!0,!0);element.snapHandle.handleDraggableStart({type:'dragstart'},{position:element.getLocation(!0)});handleBackdropStart(element);currentItem={handle:this,dropAreas:dropAreas,startPosition:{left:element.left,top:element.top},targetHeight:{element:null,height:0},helper:helper,placeholder:placeholder,onChange:this.onChange,onDone:this.onDone,element:element,offset:{left:35,top:35},}};return MoveRelativeHandle}());exports.MoveRelativeHandle=MoveRelativeHandle});define("js/element/ElementContainer",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.is_element_container=void 0;function is_element_container(elem){var type=elem.getClassType();return(type=='LayoutElement'||type=='Accordion')}
exports.is_element_container=is_element_container});define("js/BuilderEvent",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MenuStructureChangedBuilderEvent=exports.EditingChangedBuilderEvent=exports.AnchorsMovedBuilderEvent=exports.AnchorsChangedBuilderEvent=exports.SiteStructureCollapseExpandBuilderEvent=exports.InPlaceEditorStateChangedEvent=exports.SelectionChangedBuilderEvent=exports.ElementLayoutChangedBuilderEvent=exports.SiteStructureChangedBuilderEvent=exports.HistoryChangedBuilderEvent=exports.FontsChangedBuilderEvent=exports.MediaLibraryMetaChangedBuilderEvent=exports.StoreCategoriesChangedBuilderEvent=exports.VisibilityChangedBuilderEvent=exports.PaymentGatewayChangeEvent=exports.LoadInitDataStateChangeEvent=exports.PagesChangedBuilderEvent=exports.PageLoadBuilderEvent=exports.BuilderInitBuilderEvent=exports.BlocksResizeBuilderEvent=exports.ModesSettingsChangeBuilderEvent=exports.ModesChangeBuilderEvent=exports.LanguagesUpdateBuilderEvent=exports.PagesChangedEvent=exports.ContextMenuEvent=exports.SaveEvent=exports.NotificationEvent=exports.PreviewSizeChangedEvent=exports.BooleanValueChangedBuilderEvent=exports.BuilderEvent=exports.BuilderEventListener=exports.GlobalEvents=void 0;var GlobalEvents;(function(GlobalEvents){var eventListeners={};function triggerEvent(eventType,event){event.eventType=eventType.toLowerCase();event.defaultPrevented=!1;event.propagationStopped=!1;if(eventType in eventListeners){var listeners=eventListeners[eventType].slice();for(var i=listeners.length-1;i>=0&&!event.propagationStopped;i--)
listeners[i](event);}}
GlobalEvents.triggerEvent=triggerEvent;function on(eventType,handler){var types=eventType.toLowerCase().split(" ");for(var _i=0,types_1=types;_i<types_1.length;_i++){var type=types_1[_i];if(type==="")
continue;if(!(type in eventListeners))
eventListeners[type]=[];eventListeners[type].unshift(handler)}}
GlobalEvents.on=on;function off(eventType,handler){var types=eventType.toLowerCase().split(" ");for(var _i=0,types_2=types;_i<types_2.length;_i++){var type=types_2[_i];if(type==="")
continue;if(type in eventListeners){if(handler){var listeners=eventListeners[type];for(var i=listeners.length-1;i>=0;i--)
if(listeners[i]===handler)
listeners.splice(i,1);}else{delete eventListeners[type]}}}}
GlobalEvents.off=off})(GlobalEvents||(exports.GlobalEvents=GlobalEvents={}));var BuilderEventListener=(function(){function BuilderEventListener(thisBinding,callback){this.thisBinding=thisBinding;this.callback=callback}
BuilderEventListener.prototype.invoke=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}
this.callback.apply(this.thisBinding,args)};return BuilderEventListener}());exports.BuilderEventListener=BuilderEventListener;var BuilderEvent=(function(){function BuilderEvent(){this.defaultPrevented=!1;this.propagationStopped=!1}
BuilderEvent.prototype.preventDefault=function(){this.defaultPrevented=!0;return this};BuilderEvent.prototype.stopPropagation=function(){this.propagationStopped=!0;return this};BuilderEvent.prototype.stopImmediatePropagation=function(){this.propagationStopped=!0;return this};return BuilderEvent}());exports.BuilderEvent=BuilderEvent;var BooleanValueChangedBuilderEvent=(function(_super){__extends(BooleanValueChangedBuilderEvent,_super);function BooleanValueChangedBuilderEvent(value){var _this=_super.call(this)||this;_this.value=value;return _this}
return BooleanValueChangedBuilderEvent}(BuilderEvent));exports.BooleanValueChangedBuilderEvent=BooleanValueChangedBuilderEvent;var PreviewSizeChangedEvent=(function(_super){__extends(PreviewSizeChangedEvent,_super);function PreviewSizeChangedEvent(width){var _this=_super.call(this)||this;_this.width=width;return _this}
return PreviewSizeChangedEvent}(BuilderEvent));exports.PreviewSizeChangedEvent=PreviewSizeChangedEvent;var NotificationEvent=(function(_super){__extends(NotificationEvent,_super);function NotificationEvent(message,isHtml){if(message===void 0){message=''}
if(isHtml===void 0){isHtml=!1}
var _this=_super.call(this)||this;_this.message=message;_this.isHtml=isHtml;return _this}
return NotificationEvent}(BuilderEvent));exports.NotificationEvent=NotificationEvent;var SaveEvent=(function(_super){__extends(SaveEvent,_super);function SaveEvent(){return _super.call(this)||this}
return SaveEvent}(BuilderEvent));exports.SaveEvent=SaveEvent;var ContextMenuEvent=(function(_super){__extends(ContextMenuEvent,_super);function ContextMenuEvent(menu,x,y,target){if(x===void 0){x=0}
if(y===void 0){y=0}
if(target===void 0){target=null}
var _this=_super.call(this)||this;_this.menu=menu;_this.x=x;_this.y=y;_this.target=target;return _this}
return ContextMenuEvent}(BuilderEvent));exports.ContextMenuEvent=ContextMenuEvent;var PagesChangedEvent=(function(_super){__extends(PagesChangedEvent,_super);function PagesChangedEvent(){return _super.call(this)||this}
return PagesChangedEvent}(BuilderEvent));exports.PagesChangedEvent=PagesChangedEvent;var LanguagesUpdateBuilderEvent=(function(_super){__extends(LanguagesUpdateBuilderEvent,_super);function LanguagesUpdateBuilderEvent(initial,visibility,initLangs){if(visibility===void 0){visibility=!1}
if(initLangs===void 0){initLangs=!1}
var _this=_super.call(this)||this;_this.initial=initial;_this.visibility=visibility;_this.initLangs=initLangs;return _this}
return LanguagesUpdateBuilderEvent}(BuilderEvent));exports.LanguagesUpdateBuilderEvent=LanguagesUpdateBuilderEvent;var ModesChangeBuilderEvent=(function(_super){__extends(ModesChangeBuilderEvent,_super);function ModesChangeBuilderEvent(previousMode,previousDataMode,mode,dataMode,manual,isTriggered){if(isTriggered===void 0){isTriggered=!1}
var _this=_super.call(this)||this;_this.previousMode=previousMode;_this.previousDataMode=previousDataMode;_this.mode=mode;_this.dataMode=dataMode;_this.manual=manual;_this.isTriggered=isTriggered;return _this}
return ModesChangeBuilderEvent}(BuilderEvent));exports.ModesChangeBuilderEvent=ModesChangeBuilderEvent;var ModesSettingsChangeBuilderEvent=(function(_super){__extends(ModesSettingsChangeBuilderEvent,_super);function ModesSettingsChangeBuilderEvent(previousMinMode,previousMaxMode,previousModesEnabled,minMode,maxMode,modesEnabled,manual,isTriggered){if(isTriggered===void 0){isTriggered=!1}
var _this=_super.call(this)||this;_this.previousMinMode=previousMinMode;_this.previousMaxMode=previousMaxMode;_this.previousModesEnabled=previousModesEnabled;_this.minMode=minMode;_this.maxMode=maxMode;_this.modesEnabled=modesEnabled;_this.manual=manual;_this.isTriggered=isTriggered;return _this}
return ModesSettingsChangeBuilderEvent}(BuilderEvent));exports.ModesSettingsChangeBuilderEvent=ModesSettingsChangeBuilderEvent;var BlocksResizeBuilderEvent=(function(_super){__extends(BlocksResizeBuilderEvent,_super);function BlocksResizeBuilderEvent(contentBlock,customWidth,customHeight,noSave){var _this=_super.call(this)||this;_this.contentBlock=contentBlock;_this.width=(customWidth||customWidth===0)?customWidth:contentBlock.getWidthInPixels();_this.height=(customHeight||customHeight===0)?customHeight:contentBlock.getHeightInPixels();_this.noSave=noSave?!0:!1;return _this}
return BlocksResizeBuilderEvent}(BuilderEvent));exports.BlocksResizeBuilderEvent=BlocksResizeBuilderEvent;var BuilderInitBuilderEvent=(function(_super){__extends(BuilderInitBuilderEvent,_super);function BuilderInitBuilderEvent(){return _super.call(this)||this}
return BuilderInitBuilderEvent}(BuilderEvent));exports.BuilderInitBuilderEvent=BuilderInitBuilderEvent;var PageLoadBuilderEvent=(function(_super){__extends(PageLoadBuilderEvent,_super);function PageLoadBuilderEvent(pageId,pageData){var _this=_super.call(this)||this;_this.pageId=pageId;_this.pageData=pageData;return _this}
return PageLoadBuilderEvent}(BuilderEvent));exports.PageLoadBuilderEvent=PageLoadBuilderEvent;var PagesChangedBuilderEvent=(function(_super){__extends(PagesChangedBuilderEvent,_super);function PagesChangedBuilderEvent(){return _super.call(this)||this}
return PagesChangedBuilderEvent}(BuilderEvent));exports.PagesChangedBuilderEvent=PagesChangedBuilderEvent;var LoadInitDataStateChangeEvent=(function(_super){__extends(LoadInitDataStateChangeEvent,_super);function LoadInitDataStateChangeEvent(start){var _this=_super.call(this)||this;_this.start=start;return _this}
return LoadInitDataStateChangeEvent}(BuilderEvent));exports.LoadInitDataStateChangeEvent=LoadInitDataStateChangeEvent;var PaymentGatewayChangeEvent=(function(_super){__extends(PaymentGatewayChangeEvent,_super);function PaymentGatewayChangeEvent(){return _super.call(this)||this}
return PaymentGatewayChangeEvent}(BuilderEvent));exports.PaymentGatewayChangeEvent=PaymentGatewayChangeEvent;var VisibilityChangedBuilderEvent=(function(_super){__extends(VisibilityChangedBuilderEvent,_super);function VisibilityChangedBuilderEvent(visible){var _this=_super.call(this)||this;_this.visible=visible;return _this}
return VisibilityChangedBuilderEvent}(BuilderEvent));exports.VisibilityChangedBuilderEvent=VisibilityChangedBuilderEvent;var StoreCategoriesChangedBuilderEvent=(function(_super){__extends(StoreCategoriesChangedBuilderEvent,_super);function StoreCategoriesChangedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return StoreCategoriesChangedBuilderEvent}(BuilderEvent));exports.StoreCategoriesChangedBuilderEvent=StoreCategoriesChangedBuilderEvent;var MediaLibraryMetaChangedBuilderEvent=(function(_super){__extends(MediaLibraryMetaChangedBuilderEvent,_super);function MediaLibraryMetaChangedBuilderEvent(path,meta){var _this=_super.call(this)||this;_this.path=path;_this.meta=meta;return _this}
return MediaLibraryMetaChangedBuilderEvent}(BuilderEvent));exports.MediaLibraryMetaChangedBuilderEvent=MediaLibraryMetaChangedBuilderEvent;var FontsChangedBuilderEvent=(function(_super){__extends(FontsChangedBuilderEvent,_super);function FontsChangedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return FontsChangedBuilderEvent}(BuilderEvent));exports.FontsChangedBuilderEvent=FontsChangedBuilderEvent;var HistoryChangedBuilderEvent=(function(_super){__extends(HistoryChangedBuilderEvent,_super);function HistoryChangedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return HistoryChangedBuilderEvent}(BuilderEvent));exports.HistoryChangedBuilderEvent=HistoryChangedBuilderEvent;var SiteStructureChangedBuilderEvent=(function(_super){__extends(SiteStructureChangedBuilderEvent,_super);function SiteStructureChangedBuilderEvent(batchDestroy){if(batchDestroy===void 0){batchDestroy=!1}
var _this=_super.call(this)||this;_this.batchDestroy=batchDestroy;return _this}
return SiteStructureChangedBuilderEvent}(BuilderEvent));exports.SiteStructureChangedBuilderEvent=SiteStructureChangedBuilderEvent;var ElementLayoutChangedBuilderEvent=(function(_super){__extends(ElementLayoutChangedBuilderEvent,_super);function ElementLayoutChangedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return ElementLayoutChangedBuilderEvent}(BuilderEvent));exports.ElementLayoutChangedBuilderEvent=ElementLayoutChangedBuilderEvent;var SelectionChangedBuilderEvent=(function(_super){__extends(SelectionChangedBuilderEvent,_super);function SelectionChangedBuilderEvent(item,op,isSecondarySelection){if(isSecondarySelection===void 0){isSecondarySelection=!1}
var _this=_super.call(this)||this;_this.item=item;_this.op=op;_this.isSecondarySelection=isSecondarySelection;return _this}
return SelectionChangedBuilderEvent}(BuilderEvent));exports.SelectionChangedBuilderEvent=SelectionChangedBuilderEvent;var InPlaceEditorStateChangedEvent=(function(_super){__extends(InPlaceEditorStateChangedEvent,_super);function InPlaceEditorStateChangedEvent(active){var _this=_super.call(this)||this;_this.active=active;return _this}
return InPlaceEditorStateChangedEvent}(BuilderEvent));exports.InPlaceEditorStateChangedEvent=InPlaceEditorStateChangedEvent;var SiteStructureCollapseExpandBuilderEvent=(function(_super){__extends(SiteStructureCollapseExpandBuilderEvent,_super);function SiteStructureCollapseExpandBuilderEvent(item,collapse){var _this=_super.call(this)||this;_this.item=item;_this.collapse=collapse;return _this}
return SiteStructureCollapseExpandBuilderEvent}(BuilderEvent));exports.SiteStructureCollapseExpandBuilderEvent=SiteStructureCollapseExpandBuilderEvent;var AnchorsChangedBuilderEvent=(function(_super){__extends(AnchorsChangedBuilderEvent,_super);function AnchorsChangedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return AnchorsChangedBuilderEvent}(BuilderEvent));exports.AnchorsChangedBuilderEvent=AnchorsChangedBuilderEvent;var AnchorsMovedBuilderEvent=(function(_super){__extends(AnchorsMovedBuilderEvent,_super);function AnchorsMovedBuilderEvent(){return _super!==null&&_super.apply(this,arguments)||this}
return AnchorsMovedBuilderEvent}(BuilderEvent));exports.AnchorsMovedBuilderEvent=AnchorsMovedBuilderEvent;var EditingChangedBuilderEvent=(function(_super){__extends(EditingChangedBuilderEvent,_super);function EditingChangedBuilderEvent(editingLocked){var _this=_super.call(this)||this;_this.editingLocked=editingLocked;return _this}
return EditingChangedBuilderEvent}(BuilderEvent));exports.EditingChangedBuilderEvent=EditingChangedBuilderEvent;var MenuStructureChangedBuilderEvent=(function(_super){__extends(MenuStructureChangedBuilderEvent,_super);function MenuStructureChangedBuilderEvent(menu){var _this=_super.call(this)||this;_this.menu=menu;return _this}
return MenuStructureChangedBuilderEvent}(BuilderEvent));exports.MenuStructureChangedBuilderEvent=MenuStructureChangedBuilderEvent});define("js/CanvasGrid",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.CanvasGrid=void 0;var CanvasGrid=(function(){function CanvasGrid(body){this.body=body;this.gridRenderState=null;this.showGrid=!1;this.gridSize=10;this.gridColor='rgba(0, 0, 0, 0.3)'}
CanvasGrid.prototype.render=function(forceReRender){if(forceReRender===void 0){forceReRender=!1}
var renderState=this.gridSize+"|"+this.gridColor;if(!forceReRender&&this.gridRenderState===renderState)
return;this.gridRenderState=renderState;var canvas=document.createElement('canvas');canvas.width=canvas.height=this.gridSize;var ctx=canvas.getContext("2d");if(ctx){ctx.strokeStyle=this.gridColor;ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(0.5,this.gridSize-0.5);ctx.lineTo(this.gridSize-0.5,this.gridSize-0.5);ctx.lineTo(this.gridSize-0.5,0.5);ctx.stroke()}
var dataUrl=canvas.toDataURL("image/png");var blocks=this.body.getChildren();for(var _i=0,blocks_2=blocks;_i<blocks_2.length;_i++){var block=blocks_2[_i];if(block.grid)
block.grid.css({"opacity":1,"background-image":"url("+dataUrl+")"})}};CanvasGrid.prototype.fromCookie=function(val){if(!val)
return;var gridSettings=val.split("/");this.showGrid=gridSettings.length>0&&gridSettings[0]==="Y";if(gridSettings.length>1){var gridSize=parseInt(gridSettings[1]);if(!isNaN(gridSize))
this.gridSize=gridSize}
if(gridSettings.length>2){this.gridColor=gridSettings[2]}};CanvasGrid.prototype.getSize=function(){return this.gridSize};CanvasGrid.prototype.setSize=function(gridSize){if(typeof gridSize==="string"){gridSize=parseInt(gridSize,10);if(isNaN(gridSize))
return}
this.gridSize=Math.min(Math.max(gridSize,5),100);this.render()};CanvasGrid.prototype.getColor=function(){return this.gridColor};CanvasGrid.prototype.setColor=function(gridColor){this.gridColor=gridColor;this.render()};CanvasGrid.prototype.isVisible=function(){return this.showGrid};CanvasGrid.prototype.setVisible=function(visible,forceReRender){if(forceReRender===void 0){forceReRender=!1}
this.showGrid=visible;this.render(forceReRender);var blocks=this.body.getChildren();for(var _i=0,blocks_3=blocks;_i<blocks_3.length;_i++){var block=blocks_3[_i];if(block.grid)
block.grid.css("display",(visible?"block":"none"));}};return CanvasGrid}());exports.CanvasGrid=CanvasGrid});define("js/ui/LinkControl",["require","exports","jquery","js/Service","js/UIComponent","js/DropdownBox","js/VerticalLayout","js/SizeSelector","js/BuilderEvent","js/util/TextUtil","js/ui/NewMenuItemDialog"],function(require,exports,jquery_101,Service_42,UIComponent_65,DropdownBox_8,VerticalLayout_30,SizeSelector_13,BuilderEvent_17,TextUtil_8,NewMenuItemDialog_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.LinkControl=void 0;var LinkControl=(function(_super){__extends(LinkControl,_super);function LinkControl(){var _this=_super.call(this)||this;_this.fields={};_this.multilang=!1;_this.showNoLinkOption=!1;_this.noLinkTitle=!1;_this.noEmail=!1;_this.noPhone=!1;_this.noFiles=!1;_this.noTarget=!1;_this.noIndexing=!1;_this.noPopup=!1;_this.valueIsInvalid=!1;_this.newItemDialog=null;_this._anchorsChangedEventListener=function(){if(_this.fields.pageSelector)
_this.updatePageList();};BuilderEvent_17.GlobalEvents.on("pages.changed anchors.changed",_this._anchorsChangedEventListener);return _this}
LinkControl.prototype.destroy=function(){if(this.newItemDialog)
this.newItemDialog.dispose();_super.prototype.destroy.call(this);BuilderEvent_17.GlobalEvents.off("pages.changed anchors.changed",this._anchorsChangedEventListener)};LinkControl.prototype.buildInit=function(data,fields){var _this=this;this.fields=(fields||{});this.multilang=!!data.multilang;this.showNoLinkOption=!!data.showNoLinkOption;this.noLinkTitle=!!data.noLinkTitle;this.noEmail=!!data.noEmail;this.noPhone=!!data.noPhone;this.noFiles=!!data.noFiles;this.noTarget=!!data.noTarget;this.noIndexing=!!data.noIndexing;this.noPopup=!!data.noPopup;var textFieldType=this.multilang?"MultilangTextField":"TextField";var editPage=function(pageId,selectAfterDone,newPopup,selectOnApply){var dlg=wb_builder.site.changePages(pageId,newPopup);dlg.waitClose().done(function(selectedPageId){_this.updatePageList();if(selectAfterDone&&selectedPageId){var page=wb_builder.site.getPage(selectedPageId);if(page){if(page.popupMode){_this.fields.popupRadio.setValue(!0);_this.fields.popupSelector.setValue(""+selectedPageId)}else{_this.fields.pageRadio.setValue(!0);_this.fields.pageSelector.setValue(""+selectedPageId)}}}});if(selectOnApply){dlg.getApplyPromise().then(function(page){if(!page)
return;if(page.popupMode){_this.fields.popupRadio.setValue(!0);_this.fields.popupSelector.setValue(page.id)}else{_this.fields.pageRadio.setValue(!0);_this.fields.pageSelector.setValue(page.id)}}).fail(function(){return console.log('bubuuuu')})}};var newPage=function(newPopup){if(!_this.newItemDialog){_this.newItemDialog=new NewMenuItemDialog_1.NewMenuItemDialog();_this.newItemDialog.setTitle(__("New Page"));_this.newItemDialog.setAllowLinks(!1)}
_this.newItemDialog.waitClose().then(function(mi){if(!mi||!mi.link||!mi.link.url)
return;var page=wb_builder.site.getPage(mi.link.url);if(!page)
return;_this.updatePageList();_this.fields.pageSelector.setValue(""+page.id);_this.updateUI()});_this.newItemDialog.setTitle(newPopup?__("New Popup"):__("New Page"));_this.newItemDialog.setAllowPages(!newPopup);_this.newItemDialog.setAllowPopups(newPopup);_this.newItemDialog.reset();_this.newItemDialog.setVisible(!0)};var offset=jquery_101.default.extend({marginTop:5},wb_builder.rtl?{paddingRight:20}:{paddingLeft:20});Service_42.Service.UIBuilder.buildLayout({type:VerticalLayout_30.VerticalLayout,children:[{type:VerticalLayout_30.VerticalLayout,css:{backgroundColor:"#f5f5f5",border:"1px solid #e3e3e3",padding:"16px 8px 15px 8px"},children:[{type:"RadioBox",id:"pageRadio",group:"linkType"+this._instanceIndex,label:__("Page on your Website"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("page"),change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"pageSelectorWrapper",css:offset,children:[{type:DropdownBox_8.DropdownBox,id:"pageSelector",change:function(){_this.fields.pageRadio.setValue(!0);if(_this.valueIsInvalid){var psVal=_this.fields.pageSelector.getValue().split("#",2);if(wb_builder.site.getPage(psVal[0]))
_this.updatePageList();}
_this.updateUI()},editable:!0,editBtnText:__("Edit"),edit:function(){editPage(_this.fields.pageSelector.getValue(),!1,undefined,!0)},newItemBtnText:__("New Page"),newItem:function(){newPage(!1)},},]},{type:"RadioBox",id:"webAddressRadio",group:"linkType"+this._instanceIndex,label:__("Web Address"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("url"),css:{marginTop:15},change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"webUrlWrapper",css:offset,children:[{type:textFieldType,id:"webUrl",placeholder:"https://",textarea:!1,change:function(){_this.fields.webAddressRadio.setValue(!0);_this.updateUI()},},]},{type:VerticalLayout_30.VerticalLayout,visible:!this.noFiles,children:[{type:"RadioBox",id:"galleryFileRadio",group:"linkType"+this._instanceIndex,label:__("File from your Website"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("file"),css:{marginTop:15},change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"galleryFileSelectorWrapper",css:offset,children:[{type:"LinkEditSelector",id:"galleryFileSelector",multilang:this.multilang,edit:function(langCode){_this.fields.galleryFileRadio.setValue(!0);_this.updateUI();var libraryDlg=Service_42.Service.mediaLibrary.open(__('Select media'),!1,'all',!0,!1);libraryDlg.addButton(__('Cancel'));libraryDlg.addButton(__('Select'),function(){var list=libraryDlg.getSelectedFiles();if(list.length>0){if(_this.multilang&&wb_builder.site.languages.length){var val=_this.fields.galleryFileSelector.getValue();val[langCode]=list[0];_this.fields.galleryFileSelector.setValue(val)}else{_this.fields.galleryFileSelector.setValue(list[0])}
_this.fields.galleryFileSelector.triggerValueChanged()}
libraryDlg.hide()},!0);var value=_this.fields.galleryFileSelector.getValue();if(value&&value.length)
libraryDlg.setSelectedFiles([value]);libraryDlg.show();return!1},},]},]},{type:VerticalLayout_30.VerticalLayout,visible:!this.noEmail,children:[{type:"RadioBox",id:"emailRadio",group:"linkType"+this._instanceIndex,label:__("E-mail Address"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("email"),css:{marginTop:15},change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"emailAddressWrapper",css:offset,children:[{type:textFieldType,id:"emailAddress",textarea:!1,change:function(){_this.fields.emailRadio.setValue(!0);_this.updateUI()},},]},]},{type:VerticalLayout_30.VerticalLayout,visible:!this.noPhone,children:[{type:"RadioBox",id:"phoneRadio",group:"linkType"+this._instanceIndex,label:__("Phone Number"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("phone"),css:{marginTop:15},change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"phoneNumberWrapper",css:offset,children:[{type:textFieldType,id:"phoneNumber",textarea:!1,change:function(){_this.fields.phoneRadio.setValue(!0);_this.updateUI()},},]},]},{type:"RadioBox",id:"popupRadio",group:"linkType"+this._instanceIndex,label:__("Popup"),iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("popup"),css:{marginTop:15},change:function(){_this.updateUI()}},{type:VerticalLayout_30.VerticalLayout,id:"popupSelectorWrapper",css:offset,children:[{type:DropdownBox_8.DropdownBox,id:"popupSelector",change:function(){_this.fields.popupRadio.setValue(!0);_this.updateUI()},editable:!0,editBtnText:__("Edit"),newItemBtnText:__("New Popup"),newItem:function(){newPage(!0)},},]},{type:"RadioBox",id:"noLinkRadio",visible:!!data.showNoLinkOption,label:__("Empty"),group:"linkType"+this._instanceIndex,iconPlacement:"after",iconCss:{color:"#aaaaaa"},icon:LinkControl.getIconForType("empty"),css:{marginTop:15},change:function(){_this.updateUI()}},]},{type:VerticalLayout_30.VerticalLayout,id:"bottomBlock",visible:!this.noLinkTitle||!this.noTarget||!this.noIndexing||!this.noPopup,css:{marginTop:15},children:[{type:VerticalLayout_30.VerticalLayout,id:"titleBlock",visible:!data.noLinkTitle,css:{marginTop:15},children:[{type:"Label",text:__("Link Title"),helpText:__('Link Title will pop up when you hover over the link')},{type:textFieldType,id:"title",textarea:!1,css:{marginTop:5}},]},{type:"CheckBox",id:"openInNewWindow",visible:!this.noTarget,label:__("Open in New Window"),css:{marginTop:10},click:function(){_this.updateUI()}},{type:"CheckBox",id:"nofollow",visible:!this.noIndexing,label:__('"nofollow" link'),css:{marginTop:10},helpText:('<div style="width: 180px;">'+__('Enable this option if you want search systems not to index the link.')+'<br />'+__('You can read more about it %shere%s.').replace('%s','<a href="https://en.wikipedia.org/wiki/Nofollow" target="_blank" style="display: inline-block; max-width: 100%; word-break: break-all;">').replace('%s','</a>')+'</div>')},{type:"CheckBox",id:"openAsPopup",visible:!this.noPopup,label:__('Open as Popup'),css:{marginTop:10},click:function(){_this.updateUI()}},{type:"FlowLayout",id:'linkPopupBlock',css:{marginTop:5},children:[{type:VerticalLayout_30.VerticalLayout,css:{},children:[{type:SizeSelector_13.SizeSelector,id:'linkPopupWidth',min:100}]},{type:VerticalLayout_30.VerticalLayout,css:{},children:[{type:"Label",text:' x ',css:{marginTop:7,fontWeight:'normal'}}]},{type:VerticalLayout_30.VerticalLayout,css:{},children:[{type:SizeSelector_13.SizeSelector,id:'linkPopupHeight',min:100}]}]}]},]},this._elem,this.fields);this.setValue(data.value||{_:"Link",type:"url"})};LinkControl.prototype.getValue=function(){if(this.fields.noLinkRadio.getValue()){return null}
var value;if(this.fields.pageRadio.getValue()){var psVal=this.fields.pageSelector.getValue().split("#",2);value={_:"Link",type:"page",url:psVal[0],};if(psVal.length>1&&psVal[1]!=="")
value.anchor=psVal[1]}else if(this.fields.popupRadio.getValue()){value={_:"Link",type:"page",url:this.fields.popupSelector.getValue(),}}else if(this.fields.galleryFileRadio.getValue()){value={_:"Link",type:"file",url:this.fields.galleryFileSelector.getValue(),}}else if(this.fields.emailRadio.getValue()){value={_:"Link",type:"email",url:this.fields.emailAddress.getValue(),};value.type="email";value.url=this.fields.emailAddress.getValue()}else if(this.fields.phoneRadio.getValue()){value={_:"Link",type:"phone",url:this.fields.phoneNumber.getValue(),};value.type="phone";value.url=this.fields.phoneNumber.getValue()}else{value={_:"Link",type:"url",url:this.fields.webUrl.getValue(),}}
var title=this.fields.titleBlock.isVisible()?this.fields.title.getValue():null;if(title!==null&&title!=="")
value.title=title;if(this.fields.openInNewWindow.getValue())
value.target=!0;if(this.fields.nofollow.getValue())
value.nofollow=!0;if(this.fields.openAsPopup.getValue()){value.popup=!0;value.popupWidth=this.fields.linkPopupWidth.getValue();value.popupHeight=this.fields.linkPopupHeight.getValue()}
return value};LinkControl.prototype.setValue=function(value){this.fields.webAddressRadio.setValue(!0);this.fields.pageSelector.selectItem(null);this.fields.popupSelector.selectItem(null);this.fields.webUrl.setValue("");this.fields.galleryFileSelector.clearValue();this.fields.emailAddress.setValue("");this.fields.phoneNumber.setValue("");this.fields.title.setValue("");this.fields.openInNewWindow.setValue(!1);this.fields.nofollow.setValue(!1);this.fields.openAsPopup.setValue(!1);this.fields.linkPopupWidth.setValue(400);this.fields.linkPopupHeight.setValue(320);this.valueIsInvalid=!1;this.updatePageList();if(value){if("type" in value){switch(value.type){case "page":{var pageId=value.url||null;var page=pageId?wb_builder.site.getPage(pageId):null;if(page&&page.popupMode){this.fields.popupRadio.setValue(!0);this.fields.popupSelector.setValue(""+pageId)}else{this.fields.pageRadio.setValue(!0);if(pageId&&!page){this.valueIsInvalid=!0;var nonExistingItem=new DropdownBox_8.Item("- "+__("Page removed")+" -",""+pageId,null,'','');this.fields.pageSelector.addItem(nonExistingItem);nonExistingItem.css({fontStyle:"italic",color:"#CCC"})}
var psVal=""+pageId;if(value.anchor&&value.anchor!==""){var psVal2=psVal+"#"+value.anchor;if(this.fields.pageSelector.getItemById(psVal2))
psVal=psVal2}
this.fields.pageSelector.setValue(psVal)}
break}
case "url":{this.fields.webAddressRadio.setValue(!0);this.fields.webUrl.setValue(value.url||"");break}
case "file":{this.fields.galleryFileRadio.setValue(!0);if(!value.url||value.url==="")
this.fields.galleryFileSelector.clearValue();else this.fields.galleryFileSelector.setValue(value.url);break}
case "email":{this.fields.emailRadio.setValue(!0);this.fields.emailAddress.setValue(value.url||"");break}
case "phone":{this.fields.phoneRadio.setValue(!0);this.fields.phoneNumber.setValue(value.url||"");break}}
this.fields.title.setValue(value.title||"");this.fields.openInNewWindow.setValue(!!value.target);this.fields.nofollow.setValue(!!value.nofollow);this.fields.openAsPopup.setValue(!!value.popup);this.fields.linkPopupWidth.setValue(value.popupWidth||400);this.fields.linkPopupHeight.setValue(value.popupHeight||320)}else{console.error("Invalid link property format",value)}}else if(this.showNoLinkOption){this.fields.noLinkRadio.setValue(!0)}
this.updateUI()};LinkControl.prototype.updatePageList=function(){var _a,_b;this.fields.pageSelector.setEditable(!1);this.fields.popupSelector.setEditable(!1);var curPage=(_a=this.fields.pageSelector.getSelectedItem())===null||_a===void 0?void 0:_a.getId();var curPopup=(_b=this.fields.popupSelector.getSelectedItem())===null||_b===void 0?void 0:_b.getId();this.fields.pageSelector.removeAllItems();this.fields.popupSelector.removeAllItems();wb_builder.site.refreshAnchors();var popupItems=[];this.buildTree(popupItems);if(popupItems.length){for(var _i=0,popupItems_1=popupItems;_i<popupItems_1.length;_i++){var item=popupItems_1[_i];this.fields.popupSelector.addItem(item)}}
if(curPage){var item=this.fields.pageSelector.getItemById(curPage);if(item)
this.fields.pageSelector.selectItem(item);}
if(curPopup){var item=this.fields.popupSelector.getItemById(curPopup);if(item)
this.fields.popupSelector.selectItem(item);}
this.fields.pageSelector.setEditable(!0);this.fields.popupSelector.setEditable(!0)};LinkControl.prototype.buildTree=function(popupItems,level,parentId){if(level===void 0){level=0}
if(parentId===void 0){parentId=null}
var pages=[];var sitePages=wb_builder.site.pages;for(var pid in sitePages){if(!sitePages.hasOwnProperty(pid))
continue;var page=sitePages[pid];if(page.parentId!==parentId)
continue;if(page.isServicePage())
continue;pages.push(page)}
pages=pages.sort(function(a,b){if(a.sortOrder==b.sortOrder)
return(a.id<b.id)?-1:1;return(a.sortOrder<b.sortOrder)?-1:1});for(var _i=0,pages_2=pages;_i<pages_2.length;_i++){var page=pages_2[_i];var pageItem=new DropdownBox_8.Item(__tr(page.name),""+page.id,page,'',page.getPageIcon());if(!page.popupMode){pageItem.css(wb_builder.rtl?{paddingRight:20+level*20}:{paddingLeft:20+level*20});this.fields.pageSelector.addItem(pageItem);var anchors=wb_builder.site.getAnchors(page.id);for(var _a=0,anchors_1=anchors;_a<anchors_1.length;_a++){var anchor=anchors_1[_a];var anchorItem=new DropdownBox_8.Item("#"+anchor+" ("+__tr(page.name)+")",page.id+"#"+anchor,page,"#"+(0,TextUtil_8.escapeHtml)(anchor),"");anchorItem.css(jquery_101.default.extend({color:"#999",fontSize:"12px"},wb_builder.rtl?{paddingRight:20+level*20+20}:{paddingLeft:20+level*20+20}));this.fields.pageSelector.addItem(anchorItem)}}else{popupItems.push(pageItem)}
this.buildTree(popupItems,level+(page.popupMode?0:1),page.id)}};LinkControl.getIconForType=function(type){if(!type||type==="")
return"";if(typeof(type)==="object"){if(!type.type)
return"fa fa-exclamation-triangle";if(type.type==="page"&&type.url){var page=wb_builder.site.getPage(type.url);if(!page)
return"fa fa-exclamation-triangle";type=page.popupMode?"popup":"page"}else type=type.type}
switch(type){case "page":return"fa fa-share";case "url":return"fa fa-globe";case "file":return"fa fa-file-o";case "email":return"fa fa-envelope-o";case "phone":return"fa fa-phone";case "popup":return"fa fa-window-maximize";case "empty":return"fa fa-ban"}
return"fa fa-exclamation-triangle"};LinkControl.prototype.updateUI=function(){var allowNewWindow=!0;var allowNoFollow=!0;var allowPopup=!1;var disableNewWindow=!1;var disablePopup=!1;if(this.fields.pageRadio.getValue()||this.fields.webAddressRadio.getValue()){allowPopup=!0}else if(this.fields.popupRadio.getValue()||this.fields.noLinkRadio.getValue()){allowNewWindow=!1;allowNoFollow=!1}
var newWindow=allowNewWindow&&this.fields.openInNewWindow.getValue();var openAsPopup=allowPopup&&this.fields.openAsPopup.getValue();if(newWindow&&openAsPopup){openAsPopup=!1;this.fields.openAsPopup.setValue(!1)}
if(newWindow&&allowPopup){allowPopup=!1;disablePopup=!0}else if(openAsPopup&&allowNewWindow){allowNewWindow=!1;disableNewWindow=!0}
this.fields.pageSelectorWrapper.setVisible(this.fields.pageRadio.getValue());this.fields.webUrlWrapper.setVisible(this.fields.webAddressRadio.getValue());this.fields.galleryFileSelectorWrapper.setVisible(this.fields.galleryFileRadio.getValue());this.fields.emailAddressWrapper.setVisible(this.fields.emailRadio.getValue());this.fields.phoneNumberWrapper.setVisible(this.fields.phoneRadio.getValue());this.fields.popupSelectorWrapper.setVisible(this.fields.popupRadio.getValue());this.fields.openInNewWindow.setVisible((allowNewWindow||disableNewWindow)&&!this.noTarget);this.fields.openInNewWindow.setEnabled(!disableNewWindow);this.fields.nofollow.setVisible(allowNoFollow&&!this.noIndexing);this.fields.openAsPopup.setVisible((allowPopup||disablePopup)&&!this.noPopup);this.fields.openAsPopup.setEnabled(!disablePopup);this.fields.linkPopupBlock.setVisible(this.fields.openAsPopup.getValue()&&this.fields.openAsPopup.isEnabled()&&this.fields.openAsPopup.isVisible());this.fields.bottomBlock.setVisible(this.fields.titleBlock.isVisible()||this.fields.openInNewWindow.isVisible()||this.fields.nofollow.isVisible()||this.fields.openAsPopup.isVisible())};LinkControl.supportsMultipleObjectBindings=function(){return!1};LinkControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return LinkControl}(UIComponent_65.UIComponent));exports.LinkControl=LinkControl});define("js/ui/NewMenuItemDialog",["require","exports","jquery","Dialog","js/Service","js/DropdownBox","js/core/SitePage","js/ui/LinkControl","js/CustomContainer"],function(require,exports,jquery_102,Dialog_15,Service_43,DropdownBox_9,SitePage_3,LinkControl_1,CustomContainer_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.NewMenuItemDialog=void 0;var NewMenuItemDialogFields=(function(){function NewMenuItemDialogFields(){}
return NewMenuItemDialogFields}());var NewMenuItemDialog=(function(_super){__extends(NewMenuItemDialog,_super);function NewMenuItemDialog(){var _this=_super.call(this,__("Add Menu Item"))||this;_this.allowPages=!0;_this.allowLinks=!0;_this.allowPopups=!0;_this.ignorePageIds=null;_this.fields=new NewMenuItemDialogFields();_this.setMaxWidth(360);_this.setContent(_this.buildUI(),!0);_this.cancelButton=_this.addButton(__('Cancel'),function(){_this.hide()});_this.saveButton=_this.addButton(__('Apply'),function(){return _this.applyChanges()},!0);return _this}
NewMenuItemDialog.prototype.dispose=function(){_super.prototype.dispose.call(this)};NewMenuItemDialog.prototype.buildUI=function(){var _this=this;var fields=this.fields;var linkCheckTimeout=0;var ui=new Service_43.Service.UIBuilder({type:'VerticalLayout',children:[{type:'Label',text:__('Name'),id:"itemNameLabel"},{type:'MultilangTextField',id:'itemName',textarea:!1,change:function(){if(linkCheckTimeout)
clearTimeout(linkCheckTimeout);linkCheckTimeout=setTimeout(function(){linkCheckTimeout=0;_this.updatePageLinkSuggestion()},300)}},{type:CustomContainer_10.CustomContainer,id:"pageLinkSuggestion",styleClass:"alert alert-warning",css:{marginTop:15},visible:!1},{type:'FlowLayout',id:"typeSelectorBlock",css:{marginTop:15},columns:[4,4,4],children:[{type:'RadioBox',group:'menu_item_type_'+this.id,id:'menuItemTypePage',label:__('Page'),change:function(){return _this.updateUI()}},{type:'RadioBox',group:'menu_item_type_'+this.id,id:'menuItemTypeLink',label:__('Link'),change:function(){return _this.updateUI()}},{type:'RadioBox',group:'menu_item_type_'+this.id,id:'menuItemTypePopup',label:__('Popup'),change:function(){return _this.updateUI()}},]},{type:'VerticalLayout',id:'copyFromBlock',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Copy layout from')},{type:'DropdownBox',id:'copyLayoutFrom'},]},{type:CustomContainer_10.CustomContainer,id:"flagsTable",css:{marginTop:15},content:'<table class="wb-new-page-flags-table">'+'<tbody>'+'<tr>'+'<td>&lt;header&gt;</td>'+'<td></td>'+'</tr>'+'<tr>'+'<td>&lt;body&gt;</td>'+'<td></td>'+'</tr>'+'<tr>'+'<td>&lt;footer&gt;</td>'+'<td></td>'+'</tr>'+'</tbody>'+'</table>',init:function(){var _this=this;var changeFunc=function(){var td=this.getElem().closest("tr").find("td:nth(0)");if(this.getValue())
td.addClass("inactive");else td.removeClass("inactive")};var tdClickFunc=function(e){e.stopImmediatePropagation();e.preventDefault();var input=(0,jquery_102.default)(this).data("ctl");input.setValue(!input.getValue());changeFunc.call(input)};var svgHtml='<svg viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">'+'<line x1="0" y1="0" x2="100" y2="100" stroke="#b2b2b2" />'+'<line x1="100" y1="0" x2="0" y2="100" stroke="#b2b2b2" />'+'</svg>';Service_43.Service.UIBuilder.buildLayout({type:'CheckBox',id:'copyClearHeader',label:__('Clear header contents'),change:changeFunc},this.getElem().find("tr:nth(0) td:nth(1)"),fields);Service_43.Service.UIBuilder.buildLayout({type:'CheckBox',id:'copyClearBody',label:__('Clear body contents'),change:changeFunc},this.getElem().find("tr:nth(1) td:nth(1)"),fields);Service_43.Service.UIBuilder.buildLayout({type:'CheckBox',id:'copyClearFooter',label:__('Clear footer contents'),change:changeFunc},this.getElem().find("tr:nth(2) td:nth(1)"),fields);this.getElem().find("tr:nth(0) td:nth(0)").data("ctl",fields.copyClearHeader).on("click touchstart",tdClickFunc).append((0,jquery_102.default)(svgHtml));this.getElem().find("tr:nth(1) td:nth(0)").data("ctl",fields.copyClearBody).on("click touchstart",tdClickFunc).append((0,jquery_102.default)(svgHtml));this.getElem().find("tr:nth(2) td:nth(0)").data("ctl",fields.copyClearFooter).on("click touchstart",tdClickFunc).append((0,jquery_102.default)(svgHtml));this.setPopupMode=function(isPopupMode){if(isPopupMode){_this.getElem().find("tr:nth(0), tr:nth(2)").addClass("hidden")}else{_this.getElem().find("tr:nth(0), tr:nth(2)").removeClass("hidden")}}}},]},{type:'VerticalLayout',id:'menuItemBlockLink',css:{marginTop:15},children:[{type:LinkControl_1.LinkControl,id:'link',noLinkTitle:!0,showNoLinkOption:!0},]},{type:'VerticalLayout',id:'menuItemBlockPopup',css:{marginTop:15},children:[{type:'FlowLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Width')},{type:'SizeSelector',id:'popupWidth',change:function(){return _this.updateUI()},fixedWidth:90,units:[{suffix:'',label:'px'},{suffix:'%',min:1,max:100,precision:2,step:1}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},{type:'VerticalLayout',id:'popupMinWidthBlock',children:[{type:'CheckBox',id:'popupUseMinWidth',label:__('Min'),change:function(){return _this.updateUI()}},{type:'SizeSelector',id:'popupMinWidth',fixedWidth:90,units:[{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},{type:'VerticalLayout',id:'popupMaxWidthBlock',children:[{type:'CheckBox',id:'popupUseMaxWidth',label:__('Max'),change:function(){return _this.updateUI()}},{type:'SizeSelector',id:'popupMaxWidth',fixedWidth:90,units:[{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},]},{type:'FlowLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Height')},{type:'SizeSelector',id:'popupHeight',change:function(){return _this.updateUI()},fixedWidth:90,units:[{fixedValue:'auto',label:__('auto')},{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},]},]},]},this.fields);this.reset();return ui};NewMenuItemDialog.prototype.reset=function(){if(this.allowPages)
this.fields.menuItemTypePage.setValue(!0);else if(this.allowLinks)
this.fields.menuItemTypeLink.setValue(!0);else this.fields.menuItemTypePopup.setValue(!0);this.fields.itemName.setValue(__("New Page"));this.fields.link.setValue({_:"Link",type:"url"});this.fields.popupWidth.setValue(400);this.fields.popupMinWidth.setValue(100);this.fields.popupMaxWidth.setValue(100);this.fields.popupUseMinWidth.setValue(!1);this.fields.popupUseMaxWidth.setValue(!1);this.fields.popupHeight.setValue(320);this.fields.popupMinWidthBlock.setVisible(!1);this.fields.popupMaxWidthBlock.setVisible(!1);this.updateUI();this.fields.copyClearHeader.setValue(!1);this.fields.copyClearBody.setValue(!1);this.fields.copyClearFooter.setValue(!1);this.fields.flagsTable.getElem().find(".inactive").removeClass("inactive");var items=this.fields.copyLayoutFrom.getItems();this.fields.copyLayoutFrom.selectItem(items.length?items[0]:null);return this};NewMenuItemDialog.prototype.updateUI=function(){var _this=this;this.fields.menuItemBlockLink.setVisible(this.fields.menuItemTypeLink.getValue());this.fields.menuItemBlockPopup.setVisible(this.fields.menuItemTypePopup.getValue());this.fields.popupUseMinWidth.css({marginTop:this.fields.popupUseMinWidth.getValue()?'0px':'23px',marginBottom:this.fields.popupUseMinWidth.getValue()?'1px':''});this.fields.popupUseMaxWidth.css({marginTop:this.fields.popupUseMaxWidth.getValue()?'0px':'23px',marginBottom:this.fields.popupUseMaxWidth.getValue()?'1px':''});this.fields.popupMinWidth.setVisible(this.fields.popupUseMinWidth.getValue());this.fields.popupMinWidth.setEnabled(this.fields.popupUseMinWidth.getValue());this.fields.popupMaxWidth.setVisible(this.fields.popupUseMaxWidth.getValue());this.fields.popupMaxWidth.setEnabled(this.fields.popupUseMaxWidth.getValue());var unit=this.fields.popupWidth.getCurrentUnit();var isPercent=(unit===null||unit===void 0?void 0:unit.suffix)==='%';this.fields.popupMinWidthBlock.setVisible(isPercent);this.fields.popupMaxWidthBlock.setVisible(isPercent);var isPopup=this.fields.menuItemTypePopup.getValue();var cpyVal=this.fields.copyLayoutFrom.getValue();this.fields.copyLayoutFrom.removeAllItems();var buildTree=function(nodes,level){for(var _i=0,nodes_2=nodes;_i<nodes_2.length;_i++){var node=nodes_2[_i];if(node.isAnchor)
continue;if(node.isServicePage)
continue;var addLevel=0;if(node.isPopup===isPopup){addLevel=1;var item=new DropdownBox_9.DropdownBox.Item(node.name,node.pageId,null);item.css(wb_builder.rtl?{paddingRight:20+level*20}:{paddingLeft:20+level*20});_this.fields.copyLayoutFrom.addItem(item)}
buildTree(node.children,level+addLevel)}};buildTree(wb_builder.site.getSiteTree(),0);var showBlock=this.fields.copyLayoutFrom.getItems().length>0;this.fields.copyFromBlock.setVisible(showBlock&&!this.fields.menuItemTypeLink.getValue());this.fields.copyClearHeader.setVisible(!this.fields.menuItemTypePopup.getValue());this.fields.copyClearFooter.setVisible(!this.fields.menuItemTypePopup.getValue());this.fields.copyLayoutFrom.setValue(cpyVal);this.fields.flagsTable.setPopupMode(isPopup);this.updatePageLinkSuggestion()};NewMenuItemDialog.prototype.updatePageLinkSuggestion=function(){var _this=this;if(!this.allowPages||!this.allowLinks||this.ignorePageIds===null||!this.fields.menuItemTypePage.getValue()){this.fields.pageLinkSuggestion.setVisible(!1);return}
var found=null;var searchText=this.fields.itemName.getValue();for(var pid in wb_builder.site.pages){if(!wb_builder.site.pages.hasOwnProperty(pid)||this.ignorePageIds.hasOwnProperty(pid))
continue;var page=wb_builder.site.pages[pid];if(page.type!==SitePage_3.PageType.TYPE_PAGE)
continue;if(__tr_intersects(page.name,searchText)){found=page;break}}
if(!found){this.fields.pageLinkSuggestion.setVisible(!1);return}
var path=[];for(var parentId=found.parentId;parentId;){var parent_25=wb_builder.site.getPage(parentId);if(!parent_25){this.fields.pageLinkSuggestion.setVisible(!1);return}
path.unshift(__tr(parent_25.name));parentId=parent_25.parentId}
var pageId=found.id;var name=found.name;this.fields.pageLinkSuggestion.setVisible(!0);var suggestion=(0,jquery_102.default)('<p></p>');suggestion.text(__("Page with name \"%s\" already exists.").replace("%s",__tr(found.name)));if(path.length)
suggestion.append(document.createElement("BR"),document.createTextNode(__("Page location: %s").replace("%s",path.join(" > "))));suggestion.append(document.createElement("BR"),document.createTextNode(__("There is no menu item that links to this page.")));var link=(0,jquery_102.default)('<a href="javascript:void(0)"></a>');link.text(__("Set link to existing page"));suggestion.append(document.createElement("BR"),link);this.fields.pageLinkSuggestion.setContent(suggestion);link.on("click touchstart",function(e){e.stopImmediatePropagation();e.preventDefault();_this.fields.link.setValue({_:"Link",type:"page",url:pageId});_this.fields.menuItemTypePage.setValue(!1);_this.fields.menuItemTypeLink.setValue(!0);_this.fields.itemName.setValue(name);_this.updateUI()})};NewMenuItemDialog.prototype.applyChanges=function(){var _this=this;var newMenuItem={name:this.fields.itemName.getValue(),link:null};if(this.fields.menuItemTypeLink.getValue()){newMenuItem.link=this.fields.link.getValue();this.setCloseData(newMenuItem);this.hide()}else{var newPage_1=new SitePage_3.Page();newPage_1.name=this.fields.itemName.getValue();newPage_1.copyFrom=this.fields.copyLayoutFrom.getValue();newPage_1.copyClearHeader=this.fields.copyClearHeader.getValue();newPage_1.copyClearBody=this.fields.copyClearBody.getValue();newPage_1.copyClearFooter=this.fields.copyClearFooter.getValue();if(newPage_1.copyFrom){var srcPage=wb_builder.site.getPage(newPage_1.copyFrom);if(srcPage){newPage_1.background=srcPage.background;newPage_1.background2=srcPage.background2}}
if(this.fields.menuItemTypePopup.getValue()){newPage_1.type=SitePage_3.PageType.TYPE_POPUP;var unit=this.fields.popupWidth.getCurrentUnit();var isPercent=(unit===null||unit===void 0?void 0:unit.suffix)==='%';newPage_1.popupWidth=this.fields.popupWidth.getValue();newPage_1.popupMinWidth=(this.fields.popupUseMinWidth.getValue()&&isPercent)?this.fields.popupMinWidth.getValue():null;newPage_1.popupMaxWidth=(this.fields.popupUseMaxWidth.getValue()&&isPercent)?this.fields.popupMaxWidth.getValue():null;newPage_1.popupHeight=this.fields.popupHeight.getValue()}
this.setLoading(!0);wb_builder.savePage(newPage_1).done(function(result){newPage_1.isNew=!1;wb_builder.site.addPage(newPage_1);newMenuItem.link={_:"Link",type:"page",url:newPage_1.id};_this.setCloseData(newMenuItem);_this.hide();Service_43.Service.notifications.createNotification({type:"success",timeout:5000,icon:"fa fa-check",text:newPage_1.popupMode?__("New popup created successfully"):__("New page created successfully")})}).fail(function(err){if(typeof err==="string")
_this.alert(__("Error"),err);else _this.alert(__("Error"),__("Unknown error"))}).always(function(){_this.setLoading(!1)})}};NewMenuItemDialog.prototype.setVisible=function(visible,noAction,ignoreEvent){var _this=this;_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent);if(visible){this.setCloseData(null);if(!ignoreEvent){this.dialog.one("shown.bs.modal",function(){return _this.fields.itemName.focus()})}}};NewMenuItemDialog.prototype.updateTypeSelectorRowVisibility=function(){var cnt=0;if(this.allowPages)
cnt++;if(this.allowLinks)
cnt++;if(this.allowPopups)
cnt++;this.fields.typeSelectorBlock.setVisible(cnt>1)};NewMenuItemDialog.prototype.setAllowPages=function(allow){this.allowPages=allow;this.fields.typeSelectorBlock.applyLayoutCellCss(0,{display:allow?"":"none"});this.updateTypeSelectorRowVisibility();return this};NewMenuItemDialog.prototype.setAllowLinks=function(allow){this.allowLinks=allow;this.fields.typeSelectorBlock.applyLayoutCellCss(1,{display:allow?"":"none"});this.updateTypeSelectorRowVisibility();return this};NewMenuItemDialog.prototype.setAllowPopups=function(allow){this.allowPopups=allow;this.fields.typeSelectorBlock.applyLayoutCellCss(2,{display:allow?"":"none"});this.updateTypeSelectorRowVisibility();return this};NewMenuItemDialog.prototype.setIgnorePageIds=function(pageIds){this.ignorePageIds=pageIds;return this};return NewMenuItemDialog}(Dialog_15.default));exports.NewMenuItemDialog=NewMenuItemDialog});define("js/ui/PagesDialog",["require","exports","jquery","Dialog","js/Service","js/FlexLayout","js/DropdownBox","js/core/SitePage","js/BackgroundControl","js/UIButton","js/util/TextUtil","js/util/TextUtil","js/ColorPicker","js/ui/Note","js/ui/NewMenuItemDialog","js/CustomContainer","js/core/Validation","js/ui/TreeView","js/BuilderEvent","js/core/Collaboration"],function(require,exports,jquery_103,Dialog_16,Service_44,FlexLayout_9,DropdownBox_10,SitePage_4,BackgroundControl_9,UIButton_19,TextUtil,TextUtil_9,ColorPicker_15,Note_3,NewMenuItemDialog_2,CustomContainer_11,Validation_3,TreeView_6,BuilderEvent_18,Collaboration_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PagesDialog=exports.PAGE_BACKGROUND_OPTIONS=void 0;var PagesDialogFields=(function(){function PagesDialogFields(){}
return PagesDialogFields}());exports.PAGE_BACKGROUND_OPTIONS={useAttachment:!0,useSize:!0,useFullWidth:!1,useOpacity:!0,allowVideo:!0};var PagesDialog=(function(_super){__extends(PagesDialog,_super);function PagesDialog(){var _this=_super.call(this,__('Pages'),!1)||this;_this.isDirty=!1;_this.newItemDialog=null;_this.seoPreviewData=null;_this.applyDeferred=null;_this.pageUsages=null;_this.dialog.addClass('wb-modal-settings wb-pages-dialog');_this.fields=new PagesDialogFields();_this.setContent(_this.buildUI(),!0);_this.cancelButton=_this.addButton(__('Close'),function(){var _a;(_a=_this.applyDeferred)===null||_a===void 0?void 0:_a.reject();_this.applyDeferred=null;_this.hide()},!1);_this.saveButton=_this.addButton(__('Apply'),function(){var _a,_b;(_a=_this.applyDeferred)===null||_a===void 0?void 0:_a.resolve(((_b=_this.fields.pageList2.getFirstSelectedItem())===null||_b===void 0?void 0:_b.getData())||null);_this.applyDeferred=null;_this.hide()},!0);_this.dialog.on("hide.bs.modal",function(){var selectedItem=_this.fields.pageList2.getFirstSelectedItem();if(selectedItem&&_this.isDirty){_this.save(selectedItem).then(function(){_this.setDirty(!1);_this.updateDeletableFlags();_this.onSelectItem(_this.fields.pageList2.getFirstSelectedItem());(0,Collaboration_6.updateModuleProperties)('SiteModule',{pages:wb_builder.site.serializePages(),anchors:wb_builder.site.serializeAnchors(),})})}});return _this}
PagesDialog.prototype.dispose=function(){if(this.newItemDialog)
this.newItemDialog.dispose();_super.prototype.dispose.call(this)};PagesDialog.prototype.updateScriptsLabels=function(page,fields){var labelFields=[fields.headSnippetsLabel,fields.bodySnippetsLabel,fields.bodyStartSnippetsLabel];var title=(page.id==="!defaults")?__('Scripts are added as plain HTML to every page of the website.'):__('The script will be added after common script as a plain HTML to a selected page of the website.');for(var _i=0,labelFields_1=labelFields;_i<labelFields_1.length;_i++){var label=labelFields_1[_i];label.setHelpText(title)}};PagesDialog.prototype.getApplyPromise=function(){return this.applyDeferred?this.applyDeferred.promise():jquery_103.default.Deferred().reject().promise()};PagesDialog.prototype.buildUI=function(){var _this=this;var thisDlg=this;var fields=this.fields;fields.updateScriptsLabels=this.updateScriptsLabels;var generalTab={name:__("General"),type:"general",children:[{type:'VerticalLayout',children:[{type:'VerticalLayout',id:"hintBlock",css:{marginTop:15},children:[{type:'CustomContainer',id:'hint404',styleClass:'alert alert-info',css:{marginTop:15,marginBottom:0},content:__("If enabled, this page will be shown to a visitor when they try to reach a non-existent page on your website")},{type:'CustomContainer',id:'hintMaintenance',styleClass:'alert alert-info',css:{marginTop:15,marginBottom:0},content:__("If enabled, this page will be shown to a visitor when they try to reach any page on your website")}]},{type:'FlowLayout',id:"pageEnabledBlock",css:{marginTop:15},children:[{type:'CheckBox',id:'pageEnabled',label:__('Enabled'),change:function(){return _this.setDirty().updateUI()}},]},{type:'FlowLayout',id:"pageTypeBlock",css:{marginTop:15},children:[{type:'RadioBox',group:'page_type',id:'pageTypePage',label:__('Page'),change:function(){return _this.setDirty().updateUI()}},{type:'RadioBox',group:'page_type',id:'pageTypePopup',label:__('Popup'),change:function(){return _this.setDirty().updateUI()}},]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Item Name'),id:"pageNameLabel"},{type:'MultilangTextField',id:'pageName',textarea:!1,onChange:function(){return _this.setDirty().updateSEOPlaceholders().updateSEOPreview()}},]},{type:'VerticalLayout',id:"pageFieldsBlock",children:[{type:'CheckBox',id:'isHomePage',label:__('This is home page'),css:{marginTop:10},change:function(){return _this.setDirty()}},{type:'CheckBox',id:'showPopupOnOpen',label:__('Show popup when page is opened'),css:{marginTop:10},change:function(){_this.setDirty();_this.fields.popupPageOnOpen.setVisible(_this.fields.showPopupOnOpen.isVisible()&&_this.fields.showPopupOnOpen.isEnabled()&&_this.fields.showPopupOnOpen.getValue())}},{type:'DropdownBox',id:'popupPageOnOpen'},]},{type:'VerticalLayout',id:"newPageBlock",css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Copy layout from')},{type:'DropdownBox',id:'copyLayoutFrom'},]},{type:'CheckBox',id:'copyClearHeader',label:__('Clear header contents'),css:{marginTop:10}},{type:'CheckBox',id:'copyClearBody',label:__('Clear body contents'),css:{marginTop:10}},{type:'CheckBox',id:'copyClearFooter',label:__('Clear footer contents'),css:{marginTop:10}},]},{type:'VerticalLayout',id:"popupFieldsBlock",css:{marginTop:15},children:[{type:'FlowLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Width')},{type:'SizeSelector',id:'popupWidth',change:function(){_this.setDirty();var unit=_this.fields.popupWidth.getCurrentUnit();var isPercent=(unit===null||unit===void 0?void 0:unit.suffix)==='%';_this.fields.popupMinWidthBlock.setVisible(isPercent);_this.fields.popupMaxWidthBlock.setVisible(isPercent)},fixedWidth:90,units:[{suffix:'',label:'px'},{suffix:'%',min:1,max:100,precision:2,step:1}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},{type:'VerticalLayout',id:'popupMinWidthBlock',children:[{type:'CheckBox',id:'popupUseMinWidth',label:__('Min'),change:function(){_this.setDirty();_this.fields.popupMinWidth.setVisible(_this.fields.popupUseMinWidth.getValue());_this.fields.popupMinWidth.setEnabled(_this.fields.popupUseMinWidth.getValue());_this.fields.popupUseMinWidth.css({marginTop:_this.fields.popupUseMinWidth.getValue()?'0px':'23px',marginBottom:_this.fields.popupUseMinWidth.getValue()?'1px':''})}},{type:'SizeSelector',id:'popupMinWidth',change:function(){_this.setDirty()},fixedWidth:90,units:[{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},{type:'VerticalLayout',id:'popupMaxWidthBlock',children:[{type:'CheckBox',id:'popupUseMaxWidth',label:__('Max'),change:function(){_this.setDirty();_this.fields.popupMaxWidth.setVisible(_this.fields.popupUseMaxWidth.getValue());_this.fields.popupMaxWidth.setEnabled(_this.fields.popupUseMaxWidth.getValue());_this.fields.popupUseMaxWidth.css({marginTop:_this.fields.popupUseMaxWidth.getValue()?'0px':'23px',marginBottom:_this.fields.popupUseMaxWidth.getValue()?'1px':''})}},{type:'SizeSelector',id:'popupMaxWidth',change:function(){_this.setDirty()},fixedWidth:90,units:[{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},]},{type:'FlowLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Height')},{type:'SizeSelector',id:'popupHeight',change:function(){_this.setDirty()},fixedWidth:90,units:[{fixedValue:'auto',label:__('auto')},{suffix:'',label:'px'}],unitsWidth:47,small:!0,hideSpinner:!0,},],css:{minWidth:90}},]},]},{type:CustomContainer_11.CustomContainer,id:"noLinkWarning",visible:!1,css:{marginTop:10},content:'<div class="alert alert-warning"><i class="fa fa-folder-open-o"></i> '+__("No menu items linked to this page")+'</div>'},]}]};var seoTab={name:__("SEO"),type:"seo",children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:CustomContainer_11.CustomContainer,id:"faviconNotice",css:{marginTop:10},content:'<div class="alert alert-warning">'+__("Favicon: Not found. %s").replace("%s",'<a href="javascript:void(0)">'+__("Change")+'</a>')+'</div>',init:function(){this.getElem().find("a").on("click",function(){wb_builder.site.changeFavicon().waitClose().then(function(){thisDlg.dialog.one("shown.bs.modal",function(){thisDlg.updateUI();thisDlg.updateSEOPreview();thisDlg.fields.tabs.selectTab(-1,thisDlg.fields.tabs.getTabByType("seo"))})})})}},{type:'VerticalLayout',id:'titleBlock',children:[{type:'Label',text:__('Title'),helpText:__("Title is critical to giving users a quick insight into the content of a result and why it's relevant to their query. It's often the primary piece of information used to decide which result to click on.")},{type:'MultilangTextField',id:'title',onChange:function(){_this.setDirty();_this.updateSEOPreview()}}]},{type:'CheckBox',id:'noIndex',label:__('Do not index page'),css:{marginTop:10},change:function(){return _this.setDirty()},helpText:__('If checked the page will be excluded from search results of search engines like Google.')},{type:'VerticalLayout',id:'descriptionBlock',css:{marginTop:10},children:[{type:'Label',text:__('Description'),helpText:__("The description attribute is a good way to provide a concise, human-readable summary of each page's content. Accurate meta descriptions can help improve your clickthrough.")},{type:'MultilangTextField',id:'description',textArea:!0,onChange:function(){_this.setDirty();_this.updateSEOPreview()}}]},{type:FlexLayout_9.FlexLayout,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",css:{marginTop:10},children:[{type:'VerticalLayout',id:'imageBlock',css:{marginRight:wb_builder.rtl?0:10,marginLeft:wb_builder.rtl?10:0},children:[{type:'Label',text:__('Image'),helpText:__('Unique image representing the content of the page. It will be used by social graphs like Facebook Open Graph and Twitter Cards when the page is liked or shared.')},{type:'ImageSelector',id:'image',select:function(){_this.setDirty();_this.updateSEOPreview()}}]},{type:'VerticalLayout',id:'keywordsBlock',css:{flex:"1 1 100%"},children:[{type:'Label',text:__('Keywords'),helpText:__("Keywords are words or phrases your target audience would type in the search box when looking for the subject of your web page.")},{type:'MultilangTextField',id:'keywords',textArea:!0,height:67,onChange:function(){_this.setDirty();_this.updateSEOPreview()}}]},]},{type:'VerticalLayout',id:'aliasBlock',css:{marginTop:10},children:[{type:'Label',text:__('User friendly URL'),helpText:__('This is an alias for the page. For example if you specify value "apple" then this website page will have URL "yourwebsite.com/apple".')},{type:'MultilangTextField',id:'alias',onChange:function(){_this.setDirty();_this.validateAlias();_this.updateSEOPreview()},onReload:function(){this._elem.find('.__alias__').remove();(0,jquery_103.default)(this.getInputs()).each(function(){var prefix=(0,jquery_103.default)('<i class="__alias__">').css({fontStyle:'normal',position:'absolute',left:12,top:0,lineHeight:'34px',zIndex:3,color:'#999'});(0,jquery_103.default)(this).parent().append(prefix)})}},{type:'Label',id:'aliasNotice',text:'',css:{color:'#F80',fontWeight:'normal',marginTop:"5px"},visible:!1}]},{type:'VerticalLayout',id:'seoPreviewBlock',css:{marginTop:10},children:[{type:'Label',text:__('Preview'),helpText:__('Check how SEO settings affect appearance in browser, search results and social networks sharing widgets.')},{type:'FlowLayout',css:{marginTop:5},children:[{type:'RadioBox',group:'seo_preview_type',id:'seoPreviewSearch',label:__('Search Results'),value:!0,change:function(){return _this.updateSEOPreview()}},{type:'RadioBox',group:'seo_preview_type',id:'seoPreviewBrowser',label:__('Browser'),change:function(){return _this.updateSEOPreview()}},{type:'RadioBox',group:'seo_preview_type',id:'seoPreviewSocial',label:__('Social Networks'),change:function(){return _this.updateSEOPreview()}},]},{type:CustomContainer_11.CustomContainer,id:"seoPreviewHtml",css:{border:"1px solid #dcdddf",marginTop:10,overflow:"hidden"},content:""}]}]}]};var backgroundTab={name:__("Background"),type:"background",children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:'FlowLayout',children:[{type:'VerticalLayout',css:{maxWidth:360},children:[{type:'Label',id:'mainTitle',text:__('Page Background')},__assign(__assign({type:BackgroundControl_9.BackgroundControl,id:'bgPage'},exports.PAGE_BACKGROUND_OPTIONS),{change:function(){_this.setDirty()}})]}]},{type:'Button',id:'moreLine',buttonStyle:UIButton_19.UIButton.STYLE_LINK,styleClass:'more-line',text:__('Add other Background over this?'),click:function(){_this.fields.moreLine.setVisible(!1);_this.fields.moreInfo.setVisible(!0);return!1}},{type:'VerticalLayout',id:'moreInfo',css:{marginTop:15},children:[{type:'Label',text:__('Secondary background')},{type:BackgroundControl_9.BackgroundControl,id:'bg2Page',change:function(){_this.setDirty();_this.fields.moreLine.setVisible(!1);_this.fields.moreInfo.setVisible(!0)}}]}]}]};var scriptsTab={name:__("Scripts"),type:"scripts",children:[{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Before %s').replace("%s","</head>"),id:'headSnippetsLabel'},{type:'TextField',id:'headSnippetsHtml',textArea:!0,ace:!0,css:{height:100},change:function(){return _this.setDirty()}},{type:'Label',text:__('After %s').replace("%s","<body>"),css:{marginTop:15},id:'bodyStartSnippetsLabel'},{type:'TextField',id:'bodyStartSnippetsHtml',textArea:!0,ace:!0,css:{height:100},change:function(){return _this.setDirty()}},{type:'Label',text:__('Before %s').replace("%s","</body>"),css:{marginTop:15},id:'bodySnippetsLabel'},{type:'TextField',id:'bodySnippetsHtml',textArea:!0,ace:!0,css:{height:100},change:function(){return _this.setDirty()}},]}]};var ui=new Service_44.Service.UIBuilder({type:'HorizontalLayout',id:"panels",columnWeights:[5,7],columnWeightsSmall:[5,7],children:[{type:FlexLayout_9.FlexLayout,id:"leftPane",direction:"column",alignItems:"flex-start",justifyContent:"stretch",styleClass:"wb-tree-background-panel wb-tree-background-panel-lg",children:[{type:(TreeView_6.TreeView),id:"pageList2",css:{height:"auto"},multiselect:!1,showCollapseButtons:!0,showDeleteButtons:!0,maxNameWidth:200,searchFunc:function(item,searchText){var page=item.getData();if(page.id==="!defaults"||page.isServicePage())
return!1;return __tr_contains(page.name,searchText)||__tr_contains(page.title,searchText)||__tr_contains(page.alias,searchText)},onDelete:function(item){var page=item.getData();if(page.id=="!defaults"||page.isFront||page.isNew||page.isServicePage())
return;var name=__tr(page.name,'__DEFAULT__',null,!0,!0);_this.confirm(__("Confirm"),__('You are about to delete page %s entirely from your website.').replace('%s','"'+name+'"')+' '+__('Do you really want to remove it?')).done(function(result){if(result===null||result===void 0?void 0:result.clickedButtonIndex){if(item.getSelected())
_this.setDirty(!1);_this.setLoading(!0);wb_builder.deletePage(page).done(function(){var _a;if(!wb_builder.site.getPage(page.id)){_this.selectFirstPage();(_a=item.getParent())===null||_a===void 0?void 0:_a.removeChild(item)}
_this.updateDynamicDropdowns()}).fail(function(err){if(typeof err==="string")
_this.alert(__("Error"),err);else _this.alert(__("Error"),__("Unknown error"))}).always(function(){_this.setLoading(!1)})}})},canAcceptItem:function(_item,parent,refItem,after){if(parent.getSeparator())
return!1;var page;if(refItem){if(refItem.getSeparator())
return!after;page=refItem.getData();if(page.id==="!defaults")
return after;if(page.isServicePage())
return!1}else{if(parent.isRoot())
return!0;page=parent.getData();if(page.isNew||page.id==="!defaults"||page.isServicePage())
return!1}
return!0},onDrop:function(item,parent,refItem,after){var page=item.getData();if(page.id=="!defaults"||page.isNew||page.isServicePage())
return;_this.setLoading(!0);var position;var refPage;if(refItem){position=after?"after":"before";refPage=refItem.getSeparator()?null:refItem.getData();if(refPage&&refPage.isNew){refItem=after?refItem.getPrevSibling():refItem.getNextSibling();refPage=(!refItem||refItem.getSeparator())?null:refItem.getData()}
if(!refPage){position=after?"first":"last"}else if(refPage.id==="!defaults"){position="first";refPage=null}}else{position="last";refPage=parent.isRoot()?null:parent.getData();if(refPage&&(refPage.id=="!defaults"||refPage.isNew||refPage.isServicePage()))
refPage=null}
wb_builder.movePage(page,refPage,position).done(function(){_this.updateDeletableFlags()}).fail(function(err){if(typeof err==="string")
_this.alert(__("Error"),err);else _this.alert(__("Error"),__("Unknown error"))}).always(function(){_this.setLoading(!1)})},beforeSelect:function(_newSelection,currentSelection){var _a;var def=jquery_103.default.Deferred();(0,jquery_103.default)(":focus").blur();var selectedItem=currentSelection.length?currentSelection[0]:null;if(selectedItem&&_this.isDirty){_this.save(selectedItem).then(function(){_this.updateDeletableFlags();def.resolve(!0);(0,Collaboration_6.updateModuleProperties)('SiteModule',{pages:wb_builder.site.serializePages(),anchors:wb_builder.site.serializeAnchors(),})}).fail(function(){def.resolve(!1)})}else{if(selectedItem&&selectedItem.getData().isNew){(_a=selectedItem.getParent())===null||_a===void 0?void 0:_a.removeChild(selectedItem)}
def.resolve(!0)}
return def},afterSelect:function(newSelection){_this.onSelectItem(newSelection.length?newSelection[0]:null)}},{type:UIButton_19.UIButton,id:"newItemBtn",buttonStyle:UIButton_19.UIButton.STYLE_LINK,icon:'glyphicon glyphicon-plus',text:__('New Page'),enabled:this.canAddPages(),click:function(){var selectedItem=_this.fields.pageList2.getFirstSelectedItem();if(!_this.canAddPages()||(selectedItem&&selectedItem.getData().isNew))
return;(0,jquery_103.default)(":focus").blur();_this.newItem()}},{type:Note_3.Note,text:__('Use Drag and Drop to sort and categorize items')}]},{type:'TabbedPane',id:"tabs",tabs:[generalTab,seoTab,backgroundTab,scriptsTab]}]},this.fields);this.fields.pageTypePage.setValue(!0);this.fields.pageTypePopup.setValue(!1);this.updateUI();this.updateStaticDropdowns();return ui};PagesDialog.prototype.onSelectItem=function(item){if(!item){this.fields.title.setPlaceholder("");this.fields.description.setPlaceholder("");this.fields.keywords.setPlaceholder("");this.setCloseData(null);this.setDirty(!1);return}
var page=item.getData();var isNew=page.isNew;var isDefault=(page.id==="!defaults");var isPopup=!!page.popupMode;var isServicePage=!!page.isServicePage();this.setCloseData((isNew||isDefault)?null:page.id);this.fields.newItemBtn.setEnabled(!isNew&&this.canAddPages());this.fields.hintBlock.setVisible(isServicePage);this.fields.hint404.setVisible(page.type===SitePage_4.PageType.TYPE_404);this.fields.hintMaintenance.setVisible(page.type===SitePage_4.PageType.TYPE_MAINTENANCE);this.fields.pageEnabledBlock.setVisible(isServicePage);this.fields.pageTypeBlock.setVisible(!isServicePage);this.fields.pageTypePage.setEnabled(isNew&&!page.lockNewPageType);this.fields.pageTypePopup.setEnabled(isNew&&!page.lockNewPageType);this.fields.pageTypePage.setValue(!isPopup);this.fields.pageTypePopup.setValue(isPopup);this.fields.pageEnabled.setValue(page.enabled);this.fields.newPageBlock.setVisible(isNew);this.fields.copyClearHeader.setValue(!!page.copyClearHeader);this.fields.copyClearBody.setValue(!!page.copyClearBody);this.fields.copyClearFooter.setValue(!!page.copyClearFooter);this.fields.pageName.setValue(page.name);this.fields.isHomePage.setVisible(!isServicePage);this.fields.isHomePage.setValue(!!page.isFront);this.fields.noIndex.setValue(!!page.noindex);this.fields.showPopupOnOpen.setValue(!!page.openPopupPageId);this.fields.popupPageOnOpen.setValue(page.openPopupPageId);this.fields.popupWidth.setValue(page.popupWidth||400);this.fields.popupUseMinWidth.setValue(page.popupMinWidth!==null);this.fields.popupMinWidth.setVisible(page.popupMinWidth!==null);this.fields.popupMinWidth.setValue(page.popupMinWidth||100);this.fields.popupUseMaxWidth.setValue(page.popupMaxWidth!==null);this.fields.popupMaxWidth.setVisible(page.popupMaxWidth!==null);this.fields.popupMaxWidth.setValue(page.popupMaxWidth||100);var unit=this.fields.popupWidth.getCurrentUnit();var isPercent=(unit===null||unit===void 0?void 0:unit.suffix)==='%';this.fields.popupMinWidthBlock.setVisible(isPercent);this.fields.popupMaxWidthBlock.setVisible(isPercent);this.fields.popupUseMinWidth.css({marginTop:this.fields.popupUseMinWidth.getValue()?'0px':'23px',marginBottom:this.fields.popupUseMinWidth.getValue()?'1px':''});this.fields.popupUseMaxWidth.css({marginTop:this.fields.popupUseMaxWidth.getValue()?'0px':'23px',marginBottom:this.fields.popupUseMaxWidth.getValue()?'1px':''});this.fields.popupHeight.setValue(page.popupHeight||320);var aliasAllowed=!isDefault&&!page.isFront;this.fields.titleBlock.setVisible(!isDefault);this.fields.aliasBlock.setVisible(!isDefault);this.fields.seoPreviewBlock.setVisible(!isDefault);this.fields.alias.setValue((aliasAllowed&&page.alias)?page.alias:'');this.fields.alias.setEnabled(aliasAllowed);this.fields.title.setValue(page.title);this.fields.keywords.setValue(page.keywords);this.fields.description.setValue(page.description);this.fields.alias.setValue(page.alias);this.fields.image.setValue(page.image);this.validateAlias();this.updateSEOPlaceholders();this.updateSEOPreview();this.fields.bgPage.setValue(page.background);var isBg2Visible=!!(page.background2&&((page.background2.image&&page.background2.image!==""&&page.background2.image!=="none"&&page.background2.opacity)||(page.background2.color&&page.background2.color!==""&&page.background2.color!=="transparent"&&ColorPicker_15.ColorPicker.colorTextToObject(page.background2.color).a)));this.fields.moreLine.setVisible(!isBg2Visible);this.fields.moreInfo.setVisible(isBg2Visible);this.fields.bg2Page.setValue(page.background2);this.fields.headSnippetsHtml.setValue(page.headSnippetsHtml);this.fields.bodyStartSnippetsHtml.setValue(page.bodyStartSnippetsHtml);this.fields.bodySnippetsHtml.setValue(page.bodySnippetsHtml);this.updateNoLinkWarning();this.updateUI();this.setDirty(!1)};PagesDialog.prototype.validate=function(){var _a;var pageName=this.fields.pageName.getValue()||"";var errors=[];var selectedItem=this.fields.pageList2.getFirstSelectedItem();if(((_a=selectedItem===null||selectedItem===void 0?void 0:selectedItem.getData())===null||_a===void 0?void 0:_a.id)!=="!defaults"){if(pageName===null||pageName==="")
errors.push(__("'%s' field is required.").replace("%s",__("Item Name")));else if(typeof pageName==="object"){var defLang=wb_builder.site.getLastDefLang();if(!defLang){console.error("Unable to validate page name since default language is unknown")}else if(!pageName.hasOwnProperty(defLang)||pageName[defLang]===null||pageName[defLang]===""){errors.push(__("'%s' field is required.").replace("%s",__("Item Name")))}}}
return errors};PagesDialog.prototype.validateAlias=function(){var _a;var data=[];for(var i in wb_builder.site.pages){var page=wb_builder.site.pages[i];data.push({id:page.id,alias:page.alias,name:page.name})}
var id=((_a=this.fields.pageList2.getFirstSelectedItem())===null||_a===void 0?void 0:_a.getData().id)||"";(0,Validation_3.validateUrlField)(this.fields.alias,this.fields.aliasNotice,data,id)};PagesDialog.prototype.setDirty=function(dirty){if(dirty===void 0){dirty=!0}
this.isDirty=dirty;return this};PagesDialog.prototype.updateUI=function(){var selectedItem=this.fields.pageList2.getFirstSelectedItem();var page=selectedItem===null||selectedItem===void 0?void 0:selectedItem.getData();var isDefault=(page===null||page===void 0?void 0:page.id)=="!defaults";var isPopup=this.fields.pageTypePopup.getValue();var isFront=!isPopup&&!!(page===null||page===void 0?void 0:page.isFront);var isServicePage=!!(page===null||page===void 0?void 0:page.isServicePage());var isEnabled=this.fields.pageEnabled.getValue();selectedItem===null||selectedItem===void 0?void 0:selectedItem.setDisabled(isServicePage&&!isEnabled);this.fields.faviconNotice.setVisible(!wb_builder.site.favicon||wb_builder.site.favicon==="");this.fields.tabs.setTabVisible(this.fields.tabs.getTabByType("general"),!isDefault);this.fields.tabs.setTabVisible(this.fields.tabs.getTabByType("seo"),!isPopup&&(!isServicePage||isEnabled));this.fields.tabs.setTabVisible(this.fields.tabs.getTabByType("background"),!isPopup&&(!isServicePage||isEnabled));this.fields.tabs.setTabVisible(this.fields.tabs.getTabByType("scripts"),!isPopup&&(!isServicePage||isEnabled));var defaultTab=this.fields.tabs.getTabByType(isDefault?"seo":"general");if(!this.fields.tabs.isTabVisible(this.fields.tabs.getSelectedTabDef()))
this.fields.tabs.selectTab(-1,defaultTab);this.fields.pageName.setEnabled(!isServicePage||isEnabled);this.fields.noIndex.setEnabled(!isServicePage||isEnabled);this.fields.noIndex.setVisible(!isServicePage);this.fields.descriptionBlock.setVisible(!isServicePage);this.fields.imageBlock.setVisible(!isServicePage);this.fields.keywordsBlock.setVisible(!isServicePage);this.fields.aliasBlock.setVisible(!isServicePage);this.fields.seoPreviewBlock.setVisible(!isServicePage);this.fields.pageFieldsBlock.setVisible(!isPopup);this.fields.popupFieldsBlock.setVisible(isPopup);this.fields.copyClearHeader.setVisible(!isPopup);this.fields.copyClearFooter.setVisible(!isPopup);this.fields.isHomePage.setEnabled(!isFront);this.setAliasSlashVisible(!0);this.updateDynamicDropdowns()};PagesDialog.prototype.updateDynamicDropdowns=function(){var _a,_b;var selectedItem=this.fields.pageList2.getFirstSelectedItem();var isNew=!!((_a=selectedItem===null||selectedItem===void 0?void 0:selectedItem.getData())===null||_a===void 0?void 0:_a.isNew);var isServicePage=!!((_b=selectedItem===null||selectedItem===void 0?void 0:selectedItem.getData())===null||_b===void 0?void 0:_b.isServicePage());var isPopup=this.fields.pageTypePopup.getValue();var cpyVal=this.fields.copyLayoutFrom.getValue();var popVal=this.fields.popupPageOnOpen.getValue();this.fields.copyLayoutFrom.removeAllItems();this.fields.popupPageOnOpen.removeAllItems();var sitePages=wb_builder.site.pages;var item;for(var pid in sitePages){if(!sitePages.hasOwnProperty(pid)||sitePages[pid].isServicePage())
continue;var page=sitePages[pid];if(!!page.popupMode===isPopup){item=new DropdownBox_10.DropdownBox.Item(__tr(page.name),page.id,page);this.fields.copyLayoutFrom.addItem(item)}
if(page.popupMode){item=new DropdownBox_10.DropdownBox.Item(__tr(page.name),page.id,page);this.fields.popupPageOnOpen.addItem(item)}}
this.fields.newPageBlock.setVisible(isNew);this.fields.copyLayoutFrom.setValue(cpyVal);var showPopupChoice=this.fields.popupPageOnOpen.getItems().length>0;if(showPopupChoice)
this.fields.popupPageOnOpen.setValue(popVal);else this.fields.showPopupOnOpen.setValue(!1);this.fields.showPopupOnOpen.setVisible(showPopupChoice&&!isServicePage);this.fields.popupPageOnOpen.setVisible(showPopupChoice&&!isServicePage&&this.fields.showPopupOnOpen.getValue())};PagesDialog.prototype.updateStaticDropdowns=function(){};PagesDialog.prototype.findTreeItemById=function(id){if(!this.fields.pageList2||!this.fields.pageList2.root.getChildren().length)
return null;var foundItem=null;this.fields.pageList2.root.traverse(function(item){if(id==="!separator"){if(item.getSeparator()){foundItem=item;return!1}}else if(item.getData().id==id){foundItem=item;return!1}
return!0});return foundItem};PagesDialog.prototype.findHomePageTreeItem=function(){if(!this.fields.pageList2||!this.fields.pageList2.root.getChildren().length)
return null;var foundItem=null;this.fields.pageList2.root.traverse(function(item){if(item.getData().isFront){foundItem=item;return!1}
return!0});return foundItem};PagesDialog.prototype.selectFirstPage=function(){var selectItem=this.findHomePageTreeItem();if(!selectItem){selectItem=this.findTreeItemById("!defaults")}
if(selectItem)
this.fields.pageList2.setSelection([selectItem],!0);};PagesDialog.prototype.selectPageById=function(id,newPopup){var item=this.findTreeItemById(id);if(item){this.fields.pageList2.setSelection([item],!0)}else if(id=="!new"){this.newItem(newPopup)}};PagesDialog.prototype.newItem=function(_newPopup){var _this=this;if(!this.newItemDialog){this.newItemDialog=new NewMenuItemDialog_2.NewMenuItemDialog();this.newItemDialog.setTitle(__("New Page"));this.newItemDialog.setAllowLinks(!1)}
this.newItemDialog.waitClose().then(function(mi){if(!mi||!mi.link||!mi.link.url)
return;var page=wb_builder.site.getPage(mi.link.url);if(!page)
return;var item=_this.fields.pageList2.createItem().setName(__tr(page.name)).setIcon(_this.getPageIcon(page)).setData(page).setCollapsible(!0);var separator=_this.findTreeItemById("!separator");_this.fields.pageList2.root.addChild(item,separator,!1);_this.fields.pageList2.setSelection([item],!0);_this.setDirty(!1);setTimeout(function(){item.scrollIntoView();_this.fields.pageName.focus()},500)});this.newItemDialog.reset();this.newItemDialog.setVisible(!0)};PagesDialog.prototype.setAliasSlashVisible=function(visible){var ml=(wb_builder.site.languages.length>0);var dl=wb_builder.site.getLastDefLang();(0,jquery_103.default)(this.fields.alias.getInputs()).each(function(){var $this=(0,jquery_103.default)(this);var $parent=(0,jquery_103.default)(this).parent();var langCode=$parent.children('span').text().toLowerCase();$parent.find('.__alias__').text((visible?(((ml&&langCode!==dl)?'/'+langCode:'')+'/'):''));$this.css('padding-left',((ml&&langCode!==dl)?40:20)+'px')})};PagesDialog.prototype.getFallbackAlias=function(){var pageName=this.fields.pageName.getValue();var pageIsFront=this.fields.isHomePage.getValue();return(!pageIsFront?__trf(pageName,TextUtil.sanitizeAlias):null)};PagesDialog.prototype.updateSEOPlaceholders=function(){var _a;var page=(_a=this.fields.pageList2.getFirstSelectedItem())===null||_a===void 0?void 0:_a.getData();if(page&&page.id==="!defaults"){this.fields.title.setPlaceholder("");this.fields.description.setPlaceholder("");this.fields.keywords.setPlaceholder("")}else{var defaultTitle_1="";var pageName_1=__trf(this.fields.pageName.getValue()||"",TextUtil.sanitizeAlias);var fallbackTitle={};var mergeTr=function(_text1,_text2,langCode){var t1=__tr(defaultTitle_1,langCode)||"";var t2=__tr(pageName_1,langCode)||"";if(t1!==""&&t2!=="")
return t1+" - "+t2;if(t1!=="")
return t1;return t2};if(wb_builder.site.languages.length){for(var _i=0,_b=wb_builder.site.languages;_i<_b.length;_i++){var langDef=_b[_i];fallbackTitle[langDef.code]=mergeTr(defaultTitle_1,pageName_1,langDef.code)}}else{fallbackTitle=mergeTr(defaultTitle_1,pageName_1)}
this.fields.title.setPlaceholder(fallbackTitle,!0);this.fields.description.setPlaceholder(__trf(wb_builder.meta.description,TextUtil.sanitizeAlias));this.fields.keywords.setPlaceholder(__trf(wb_builder.meta.keywords,TextUtil.sanitizeAlias))}
this.fields.alias.setPlaceholder(this.getFallbackAlias(),!0);return this};PagesDialog.prototype.cloneObject=function(obj){if(obj===null||obj===void 0||typeof obj==="boolean"||typeof obj==="string"||typeof obj==="number")
return obj;if(Array.isArray(obj))
return jquery_103.default.extend(!0,[],obj);return jquery_103.default.extend(!0,{},obj)};PagesDialog.prototype.loadData=function(){var _this=this;var fields=this.fields;this.pageUsages=null;wb_builder.getPagesUsage().then(function(data){if(!data)
return;_this.pageUsages={};for(var pageId in data.usages){for(var refPageId in data.usages[pageId]){if(refPageId===wb_builder.pageId)
continue;for(var _i=0,_a=data.usages[pageId][refPageId];_i<_a.length;_i++){var elemId=_a[_i];if(window.getElementById(elemId))
continue;if(!_this.pageUsages.hasOwnProperty(pageId))
_this.pageUsages[pageId]=0;_this.pageUsages[pageId]++}}}
var menus=Service_44.Service.menu.getElemList();for(var menuId in menus){menus[menuId].traverseItems(function(item){if(!_this.pageUsages)
return;if(item.link&&item.link.type==="page"&&typeof item.link.url==="string"){if(!_this.pageUsages.hasOwnProperty(item.link.url))
_this.pageUsages[item.link.url]=0;_this.pageUsages[item.link.url]++}})}
_this.fields.pageList2.root.traverse(function(item){var page=item.getData();if(page)
item.setIcon(_this.getPageIcon(page));});_this.updateNoLinkWarning()});fields.pageList2.setSelection([],!0);fields.pageList2.root.removeAllChildren();var defaultPage=new SitePage_4.Page();defaultPage.id="!defaults";defaultPage.isNew=!1;defaultPage.title=this.cloneObject(wb_builder.meta.title);defaultPage.description=this.cloneObject(wb_builder.meta.description);defaultPage.keywords=this.cloneObject(wb_builder.meta.keywords);defaultPage.image=this.cloneObject(wb_builder.meta.image);defaultPage.noindex=!!wb_builder.meta.noIndex;defaultPage.background=this.cloneObject(wb_builder.bodyInstance.bgSite);defaultPage.background2=this.cloneObject(wb_builder.bodyInstance.bg2Site);defaultPage.headSnippetsHtml=this.cloneObject(wb_builder.site.headSnippetsHtml);defaultPage.bodyStartSnippetsHtml=this.cloneObject(wb_builder.site.bodyStartSnippetsHtml);defaultPage.bodySnippetsHtml=this.cloneObject(wb_builder.site.bodySnippetsHtml);var item=this.fields.pageList2.createItem().setIcon("fa fa-gear").setName(__("Default (for all pages)")).setData(defaultPage).setCollapsible(!1).setDraggable(!1).setDeletable(!1);this.fields.pageList2.root.addChild(item);this.buildTree(this.fields.pageList2.root);this.fields.pageList2.root.addChild(this.fields.pageList2.createItem().setSeparator(!0));var page404=wb_builder.get404Page();if(page404){this.fields.pageList2.root.addChild(this.fields.pageList2.createItem().setIcon(this.getPageIcon(page404)).setName(page404.name?__tr(page404.name):__("Custom 404 page")).setData(page404).setDisabled(!page404.enabled).setCollapsible(!1).setDraggable(!1).setDeletable(!1))}
var pageMaintenance=wb_builder.getMaintenancePage();if(pageMaintenance){this.fields.pageList2.root.addChild(this.fields.pageList2.createItem().setIcon(this.getPageIcon(pageMaintenance)).setName(pageMaintenance.name?__tr(pageMaintenance.name):__("Custom Maintenance page")).setData(pageMaintenance).setDisabled(!pageMaintenance.enabled).setCollapsible(!1).setDraggable(!1).setDeletable(!1))}
this.updateDeletableFlags();this.selectFirstPage()};PagesDialog.prototype.getPageName=function(page){var name=page.name;if(typeof name!=="string"){if(!name)
name="New Page";else name=__tr(name)}
return name};PagesDialog.prototype.getPageIcon=function(page){if(page.id==="!defaults")
return"fa fa-gear";var icon=page.getPageIcon();if(this.pageUsages!==null&&page.id!=="!defaults"&&page.type===SitePage_4.PageType.TYPE_PAGE&&!page.isFront){if(!this.pageUsages.hasOwnProperty(page.id))
icon="fa fa-folder-open-o"}
return icon};PagesDialog.prototype.updateNoLinkWarning=function(){var show=!1;if(this.pageUsages){var curItem=this.fields.pageList2.getFirstSelectedItem();if(curItem){var page=curItem.getData();if(page&&!page.isNew&&page.id!=="!defaults"&&page.type===SitePage_4.PageType.TYPE_PAGE){show=!this.pageUsages.hasOwnProperty(page.id)}}}
this.fields.noLinkWarning.setVisible(show);return this};PagesDialog.prototype.buildTree=function(parentTreeItem,parentId){if(parentId===void 0){parentId=null}
var pages=[];var sitePages=wb_builder.site.pages;for(var pid in sitePages){if(!sitePages.hasOwnProperty(pid))
continue;var page=sitePages[pid];if(page.parentId!==parentId)
continue;if(page.type===SitePage_4.PageType.TYPE_MAINTENANCE||page.type===SitePage_4.PageType.TYPE_404)
continue;pages.push(page)}
pages=pages.sort(function(a,b){if(a.sortOrder==b.sortOrder)
return(a.id<b.id)?-1:1;return(a.sortOrder<b.sortOrder)?-1:1});for(var _i=0,pages_3=pages;_i<pages_3.length;_i++){var page=pages_3[_i];var pageItem=this.fields.pageList2.createItem().setIcon(this.getPageIcon(page)).setName(this.getPageName(page)).setData(page).setCollapsible(!0);parentTreeItem.addChild(pageItem);this.buildTree(pageItem,page.id)}};PagesDialog.prototype.setVisible=function(visible,noAction,ignoreEvent){var _this=this;var _a;if(noAction===void 0){noAction=!1}
if(ignoreEvent===void 0){ignoreEvent=!1}(_a=this.applyDeferred)===null||_a===void 0?void 0:_a.reject();this.applyDeferred=null;if(visible&&!noAction){if(!ignoreEvent){this.applyDeferred=jquery_103.default.Deferred();this.loadData();this.dialog.one("shown.bs.modal",function(){return _this.fields.pageName.focus()})}}
this.updateUI();_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};PagesDialog.prototype.setTreeVisible=function(visible){this.fields.leftPane.setVisible(visible);if(visible){this.fields.panels.setColWeight(1,7);this.fields.panels.applyLayoutCellCss(0,{display:""})}else{this.fields.panels.setColWeight(1,12);this.fields.panels.applyLayoutCellCss(0,{display:"none"})}};PagesDialog.prototype.save=function(treeItem){var _this=this;var def=jquery_103.default.Deferred();var errors=this.validate();if(errors.length){this.alert(__("Error"),errors.join("<br />"));return def.reject().promise()}
this.setLoading(!0);var page=treeItem.getData();var pageClone=new SitePage_4.Page(page.serialize());pageClone.isFront=this.fields.isHomePage.getValue();if(!pageClone.isServicePage()){pageClone.type=this.fields.pageTypePopup.getValue()?SitePage_4.PageType.TYPE_POPUP:SitePage_4.PageType.TYPE_PAGE;pageClone.enabled=!0}else{pageClone.enabled=this.fields.pageEnabled.getValue()}
if(pageClone.isNew){var refPage=null;var refPosition="last";var sibling=treeItem.getPrevSibling();if(sibling){refPage=sibling.getData();refPosition="after"}else{var parent_26=treeItem.getParent();if(parent_26&&!parent_26.isRoot())
refPage=parent_26.getData();if(refPage&&(refPage.id==="!defaults"||refPage.isNew))
refPage=null}
pageClone._placementRefPage=refPage?refPage.id:null;pageClone._placementRefPosition=refPosition;pageClone.copyFrom=this.fields.copyLayoutFrom.getValue();pageClone.copyClearHeader=this.fields.copyClearHeader.getValue();pageClone.copyClearBody=this.fields.copyClearBody.getValue();pageClone.copyClearFooter=this.fields.copyClearFooter.getValue()}
pageClone.name=this.fields.pageName.getValue();pageClone.noindex=this.fields.noIndex.getValue();pageClone.openPopupPageId=(!pageClone.popupMode&&this.fields.showPopupOnOpen.getValue())?this.fields.popupPageOnOpen.getValue():null;var unit=this.fields.popupWidth.getCurrentUnit();var isPercent=(unit===null||unit===void 0?void 0:unit.suffix)==='%';pageClone.popupWidth=(pageClone.popupMode)?this.fields.popupWidth.getValue():null;pageClone.popupMinWidth=(pageClone.popupMode&&this.fields.popupUseMinWidth.getValue()&&isPercent)?this.fields.popupMinWidth.getValue():null;pageClone.popupMaxWidth=(pageClone.popupMode&&this.fields.popupUseMaxWidth.getValue()&&isPercent)?this.fields.popupMaxWidth.getValue():null;pageClone.popupHeight=(pageClone.popupMode)?this.fields.popupHeight.getValue():null;pageClone.title=this.fields.title.getValue();pageClone.description=this.fields.description.getValue();pageClone.keywords=this.fields.keywords.getValue();pageClone.alias=this.fields.alias.getValue();pageClone.image=this.fields.image.getValue();pageClone.background=this.fields.bgPage.getValue();pageClone.background2=this.fields.bg2Page.getValue();pageClone.headSnippetsHtml=this.fields.headSnippetsHtml.getValue();pageClone.bodyStartSnippetsHtml=this.fields.bodyStartSnippetsHtml.getValue();pageClone.bodySnippetsHtml=this.fields.bodySnippetsHtml.getValue();wb_builder.savePage(pageClone).done(function(result){page.enabled=pageClone.enabled;page.type=pageClone.type;page.noindex=pageClone.noindex;page.name=pageClone.name;page.openPopupPageId=pageClone.openPopupPageId;page.popupWidth=pageClone.popupWidth;page.popupMinWidth=pageClone.popupMinWidth;page.popupMaxWidth=pageClone.popupMaxWidth;page.popupHeight=pageClone.popupHeight;if(wb_builder.pageId===page.id&&page.type===SitePage_4.PageType.TYPE_POPUP){var children=wb_builder.bodyInstance.getChildren();for(var i in children){if(children[i].rootBlockType==='body'){children[i].width=page.popupWidth||children[i].width;if(page.popupMinWidth){children[i].minWidth=parseInt(String(page.popupMinWidth))||children[i].minWidth;children[i].useMinWidth=!0}else{children[i].useMinWidth=!1}
if(page.popupMaxWidth){children[i].maxWidth=parseInt(String(page.popupMaxWidth))||children[i].maxWidth;children[i].useMaxWidth=!0}else{children[i].useMaxWidth=!1}
children[i].height=page.popupHeight||children[i].height}}}
page.title=pageClone.title;page.description=pageClone.description;page.keywords=pageClone.keywords;page.alias=pageClone.alias;page.image=pageClone.image;page.background=pageClone.background;page.background2=pageClone.background2;page.headSnippetsHtml=pageClone.headSnippetsHtml;page.bodyStartSnippetsHtml=pageClone.bodyStartSnippetsHtml;page.bodySnippetsHtml=pageClone.bodySnippetsHtml;if(page.id=="!defaults"){wb_builder.meta.title=_this.cloneObject(page.title);wb_builder.meta.description=_this.cloneObject(page.description);wb_builder.meta.keywords=_this.cloneObject(page.keywords);wb_builder.meta.image=_this.cloneObject(page.image);wb_builder.meta.noIndex=page.noindex;wb_builder.bodyInstance.bgSite=_this.cloneObject(page.background);wb_builder.bodyInstance.bg2Site=_this.cloneObject(page.background2);wb_builder.site.headSnippetsHtml=_this.cloneObject(page.headSnippetsHtml);wb_builder.site.bodyStartSnippetsHtml=_this.cloneObject(page.bodyStartSnippetsHtml);wb_builder.site.bodySnippetsHtml=_this.cloneObject(page.bodySnippetsHtml);Service_44.Service.notifications.createNotification({type:"success",timeout:5000,icon:"fa fa-check",text:__("Defaults updated successfully")})}else{if(pageClone.isFront){var currentHomePageItem=_this.findHomePageTreeItem();if(currentHomePageItem){var currentHomePage=currentHomePageItem.getData();if(currentHomePage!==page){currentHomePage.isFront=!1;currentHomePageItem.setIcon(_this.getPageIcon(currentHomePage))}}
page.isFront=!0}
if(page.isNew){page.isNew=!1;if(typeof result.parentId==="string")
page.parentId=result.parentId;if(typeof result.sortOrder==="number")
page.sortOrder=result.sortOrder;wb_builder.site.addPage(page);Service_44.Service.notifications.createNotification({type:"success",timeout:5000,icon:"fa fa-check",text:__("New page created successfully")})}else{Service_44.Service.notifications.createNotification({type:"success",timeout:5000,icon:"fa fa-check",text:__("Page saved successfully")})}}
if(page.id!="!defaults"){treeItem.setIcon(_this.getPageIcon(page)).setName(_this.getPageName(page))}
wb_builder.bodyInstance.updateStyle(!0);def.resolve()}).fail(function(err){if(typeof err==="string")
_this.alert(__("Error"),err);else _this.alert(__("Error"),__("Unknown error"));def.reject()}).always(function(){_this.setLoading(!1)});BuilderEvent_18.GlobalEvents.triggerEvent("pages.changed",new BuilderEvent_18.PagesChangedBuilderEvent());return def.promise()};PagesDialog.prototype.canAddPages=function(){return!0};PagesDialog.prototype.clearSEOPreview=function(){if(this.seoPreviewData!==null){this.seoPreviewData=null;this.fields.seoPreviewHtml.setContent("")}};PagesDialog.prototype.expectSEOPreviewData=function(type){if(!this.seoPreviewData||this.seoPreviewData.type!==type){this.clearSEOPreview();this.seoPreviewData={type:type};return!1}
return!0};PagesDialog.prototype.updateSEOPreview=function(){var selectedItem=this.fields.pageList2.getFirstSelectedItem();if(!selectedItem)
return this;var page=selectedItem.getData();if(!page||page.id==="!defaults")
return this;var title=__tr(this.fields.title.getValue());if(!title||title==="")
title=__tr(this.fields.pageName.getValue());if(!title||title==="")
title=__("New Page");var description=__tr(this.fields.description.getValue());if(!description||description==="")
description=__tr(wb_builder.meta.description);var icon=wb_builder.site.favicon;var image=this.fields.image.getValue();if(!image||image==="")
image=this.cloneObject(wb_builder.meta.image);var alias=__tr(this.fields.alias.getValue());if(!alias||alias==="")
alias=__tr(this.getFallbackAlias());var baseUrl=wb_builder.enableForcedHttpsPort?"https://":"http://";baseUrl+=wb_builder.siteDomain;var url=baseUrl+"/"+(alias||"");if(this.fields.seoPreviewSearch.getValue()){if(!this.expectSEOPreviewData("search")){this.seoPreviewData.heading=(0,jquery_103.default)('<div class="wb-seo-preview-search-heading"></div>');this.seoPreviewData.icon=(0,jquery_103.default)('<span class="wb-seo-preview-search-icon"></span>');this.seoPreviewData.address=(0,jquery_103.default)('<span class="wb-seo-preview-search-address"></span>');this.seoPreviewData.title=(0,jquery_103.default)('<div class="wb-seo-preview-search-title"></div>');this.seoPreviewData.description=(0,jquery_103.default)('<div class="wb-seo-preview-search-description"></div>');this.fields.seoPreviewHtml.getElem().css({padding:"8px",background:"transparent"}).append(this.seoPreviewData.heading,this.seoPreviewData.title,this.seoPreviewData.description);this.seoPreviewData.heading.append(this.seoPreviewData.icon,this.seoPreviewData.address)}
if(icon){this.seoPreviewData.icon.empty();var img=(0,jquery_103.default)('<img/>');img.attr("src",wb_builder.makeLocalUrl(icon));this.seoPreviewData.icon.append(img)}else{this.seoPreviewData.icon.html('<i class="fa fa-globe"></i>')}
var address=(0,TextUtil_9.escapeHtml)(baseUrl);if(alias&&alias!=="")
address+='<span>'+(0,TextUtil_9.escapeHtml)(" › "+alias.replace(/\//g," › "))+'</span>';this.seoPreviewData.address.html(address);this.seoPreviewData.title.text(title);if(!description||description==="")
this.seoPreviewData.description.addClass("hidden");else this.seoPreviewData.description.removeClass("hidden").text(description)}
if(this.fields.seoPreviewBrowser.getValue()){if(!this.expectSEOPreviewData("browser")){this.seoPreviewData.container=(0,jquery_103.default)('<div class="wb-seo-preview-browser-container"></div>');this.seoPreviewData.tabs=(0,jquery_103.default)('<div class="wb-seo-preview-browser-tabs"></div>');this.seoPreviewData.tab=(0,jquery_103.default)('<div class="wb-seo-preview-browser-tab"></div>');this.seoPreviewData.icon=(0,jquery_103.default)('<div class="wb-seo-preview-browser-icon"></div>');this.seoPreviewData.title=(0,jquery_103.default)('<div class="wb-seo-preview-browser-title"></div>');this.seoPreviewData.close=(0,jquery_103.default)('<div class="wb-seo-preview-browser-close"><i class="fa fa-close"></i></div>');this.seoPreviewData.tabContent=(0,jquery_103.default)('<div class="wb-seo-preview-browser-tab-content"></div>');this.seoPreviewData.addressBar=(0,jquery_103.default)('<div class="wb-seo-preview-browser-address-bar"></div>');this.seoPreviewData.lock=(0,jquery_103.default)('<span class="wb-seo-preview-browser-lock"><i class="fa fa-lock"></i></span>');this.seoPreviewData.address=(0,jquery_103.default)('<span class="wb-seo-preview-browser-address"></span>');this.fields.seoPreviewHtml.getElem().css({padding:"16px 0",background:"transparent"}).append(this.seoPreviewData.container);this.seoPreviewData.container.append(this.seoPreviewData.tabs,this.seoPreviewData.tabContent);this.seoPreviewData.tabs.append(this.seoPreviewData.tab);this.seoPreviewData.tab.append(this.seoPreviewData.icon,this.seoPreviewData.title,this.seoPreviewData.close);this.seoPreviewData.tabContent.append(this.seoPreviewData.addressBar);this.seoPreviewData.addressBar.append(this.seoPreviewData.lock,this.seoPreviewData.address)}
if(icon){this.seoPreviewData.icon.empty();var img=(0,jquery_103.default)('<img/>');img.attr("src",wb_builder.makeLocalUrl(icon));this.seoPreviewData.icon.append(img)}else{this.seoPreviewData.icon.html('<i class="fa fa-globe"></i>')}
this.seoPreviewData.title.text(title);this.seoPreviewData.address.text(url)}
if(this.fields.seoPreviewSocial.getValue()){if(!this.expectSEOPreviewData("social")){this.seoPreviewData.container=(0,jquery_103.default)('<div class="wb-seo-preview-social-container"></div>');this.seoPreviewData.image=(0,jquery_103.default)('<div class="wb-seo-preview-social-image"></div>');this.seoPreviewData.content=(0,jquery_103.default)('<div class="wb-seo-preview-social-content"></div>');this.seoPreviewData.title=(0,jquery_103.default)('<div class="wb-seo-preview-social-title"></div>');this.seoPreviewData.description=(0,jquery_103.default)('<div class="wb-seo-preview-social-description"></div>');this.seoPreviewData.address=(0,jquery_103.default)('<div class="wb-seo-preview-social-address"></div>');this.fields.seoPreviewHtml.getElem().css({padding:"8px",background:"#f5f5f5"}).append(this.seoPreviewData.container);this.seoPreviewData.container.append(this.seoPreviewData.image,this.seoPreviewData.content);this.seoPreviewData.content.append(this.seoPreviewData.title,this.seoPreviewData.description,this.seoPreviewData.address)}
if(image){this.seoPreviewData.image.empty();this.seoPreviewData.image.removeClass("hidden");var img=(0,jquery_103.default)('<img/>');img.attr("src",wb_builder.makeLocalUrl(image));this.seoPreviewData.image.append(img)}else{this.seoPreviewData.image.addClass("hidden")}
this.seoPreviewData.title.text(title);if(!description||description==="")
this.seoPreviewData.description.addClass("hidden");else this.seoPreviewData.description.removeClass("hidden").text(description);this.seoPreviewData.address.text(url)}
return this};PagesDialog.prototype.updateDeletableFlags=function(){var homeItem=null;this.fields.pageList2.root.traverse(function(item){if(item.getSeparator())
return;var page=item.getData();if(page.isFront)
homeItem=item;item.setDeletable(!page.isFront&&!page.isNew&&page.id!=="!defaults"&&!page.isServicePage())});homeItem=homeItem;for(;homeItem&&!homeItem.isRoot();homeItem=homeItem===null||homeItem===void 0?void 0:homeItem.getParent())
homeItem.setDeletable(!1);return this};return PagesDialog}(Dialog_16.default));exports.PagesDialog=PagesDialog});define("js/store/StoreItem",["require","exports","js/Serializable","js/store/StoreModule"],function(require,exports,Serializable_7,StoreModule_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreItem=exports.StoreItemVariant=exports.StoreItemCustomFieldValue=void 0;var StoreItemCustomFieldValue=(function(_super){__extends(StoreItemCustomFieldValue,_super);function StoreItemCustomFieldValue(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.fieldId="";_this.value=null;_this.deserialize(data);return _this}
return StoreItemCustomFieldValue}(Serializable_7.Serializable));exports.StoreItemCustomFieldValue=StoreItemCustomFieldValue;var StoreItemVariant=(function(_super){__extends(StoreItemVariant,_super);function StoreItemVariant(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id='';_this.price=0;_this.discount=0;_this.quantity=0;_this.sku='';_this.image='';_this.deserialize(data);return _this}
return StoreItemVariant}(Serializable_7.Serializable));exports.StoreItemVariant=StoreItemVariant;var StoreItem=(function(_super){__extends(StoreItem,_super);function StoreItem(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name='';_this.description='';_this.price=0;_this.discount=0;_this.weight=0;_this.quantity=0;_this.sku='';_this.image=null;_this.altImages=[];_this.itemType="";_this.categories=[];_this.isHidden=!1;_this.customFields=[];_this.variants=[];_this.dateTimeCreated=null;_this.dateTimeModified=null;_this.seoTitle='';_this.seoDescription='';_this.seoKeywords='';_this.seoAlias='';_this.deserialize(data);return _this}
StoreItem.prototype.buildSearchBlob=function(){return StoreModule_1.Module.buildSearchBlob(this)};StoreItem.prototype.isStockManageable=function(){return this.sku?!0:!1};StoreItem.prototype.maxQuantity=function(){var quantity=this.quantity;for(var _i=0,_a=this.variants;_i<_a.length;_i++){var v=_a[_i];if(v.price>0&&quantity<v.quantity){quantity=v.quantity}}
return quantity};StoreItem.prototype.minPrice=function(){var minPrice=0;for(var _i=0,_a=this.variants;_i<_a.length;_i++){var v=_a[_i];if(v.price>0&&(minPrice==0||v.price<minPrice)){minPrice=v.price}}
if(minPrice==0)
minPrice=this.price;return minPrice};return StoreItem}(Serializable_7.Serializable));exports.StoreItem=StoreItem});define("js/store/StoreItemTypeField",["require","exports","js/Serializable"],function(require,exports,Serializable_8){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreItemTypeField=void 0;var StoreItemTypeField=(function(_super){__extends(StoreItemTypeField,_super);function StoreItemTypeField(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name='';_this.type="";_this.isHidden=!1;_this.isSearchable=!1;_this.isSearchInterval=!1;_this.deserialize(data);return _this}
return StoreItemTypeField}(Serializable_8.Serializable));exports.StoreItemTypeField=StoreItemTypeField});define("js/store/StoreItemType",["require","exports","js/Serializable"],function(require,exports,Serializable_9){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreItemType=void 0;var StoreItemType=(function(_super){__extends(StoreItemType,_super);function StoreItemType(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name='';_this.fields=[];_this.deserialize(data);return _this}
return StoreItemType}(Serializable_9.Serializable));exports.StoreItemType=StoreItemType});define("js/store/StoreItemFieldType",["require","exports","js/Serializable"],function(require,exports,Serializable_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreItemFieldType=exports.StoreItemFieldTypeOption=void 0;var StoreItemFieldTypeOption=(function(_super){__extends(StoreItemFieldTypeOption,_super);function StoreItemFieldTypeOption(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name='';_this.value='';_this.deserialize(data);return _this}
return StoreItemFieldTypeOption}(Serializable_10.Serializable));exports.StoreItemFieldTypeOption=StoreItemFieldTypeOption;var StoreItemFieldType=exports.StoreItemFieldType=(function(_super){__extends(StoreItemFieldType,_super);function StoreItemFieldType(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name='';_this.microdataKey=null;_this.type=StoreItemFieldType.TYPE_INPUT;_this.typeId=0;_this.options=[];_this.isTranslatable=!0;_this.hasEmptyOption=!1;_this.subType='';_this.isStatic=!1;_this.deserialize(data);return _this}
StoreItemFieldType.buildStaticTypes=function(){return[new StoreItemFieldType({id:1,name:__('Text Field'),type:StoreItemFieldType.TYPE_INPUT,isStatic:!0,icon:'text-field.svg'}),new StoreItemFieldType({id:2,name:__('Text Area'),type:StoreItemFieldType.TYPE_TEXTAREA,isStatic:!0,icon:'text-area.svg'}),new StoreItemFieldType({id:3,name:__('Checkbox'),type:StoreItemFieldType.TYPE_CHECKBOX,isStatic:!0,icon:'checkbox.svg'}),new StoreItemFieldType({id:4,name:__('Radio Button'),type:StoreItemFieldType.TYPE_RADIOBOX,isStatic:!0,icon:'radio-button.svg'}),new StoreItemFieldType({id:5,name:__('Dropdown'),type:StoreItemFieldType.TYPE_DROPDOWN,isStatic:!0,icon:'dropdown.svg'}),new StoreItemFieldType({id:6,name:__('Dropdown'),type:StoreItemFieldType.TYPE_VARIANT,subType:StoreItemFieldType.SUBTYPE_VARIANT_DROPDOWN,isStatic:!0,icon:'dropdown.svg'}),new StoreItemFieldType({id:7,name:__('Buttons'),type:StoreItemFieldType.TYPE_VARIANT,subType:StoreItemFieldType.SUBTYPE_VARIANT_BUTTONS,isStatic:!0,icon:'buttons.svg'}),new StoreItemFieldType({id:8,name:__('Color buttons'),type:StoreItemFieldType.TYPE_VARIANT,subType:StoreItemFieldType.SUBTYPE_VARIANT_COLOR_BTNS,isStatic:!0,icon:'color-buttons.svg'}),new StoreItemFieldType({id:9,name:__('Image buttons'),type:StoreItemFieldType.TYPE_VARIANT,subType:StoreItemFieldType.SUBTYPE_VARIANT_IMG_BTNS,isStatic:!0,icon:'image-buttons.svg'})]};StoreItemFieldType.hasSupportForOptions=function(selType){return(selType===StoreItemFieldType.TYPE_CHECKBOX||selType===StoreItemFieldType.TYPE_RADIOBOX||selType===StoreItemFieldType.TYPE_DROPDOWN||selType===StoreItemFieldType.TYPE_VARIANT)};StoreItemFieldType.TYPE_INPUT='input';StoreItemFieldType.TYPE_TEXTAREA='textarea';StoreItemFieldType.TYPE_CHECKBOX='checkbox';StoreItemFieldType.TYPE_RADIOBOX='radiobox';StoreItemFieldType.TYPE_DROPDOWN='dropdown';StoreItemFieldType.TYPE_VARIANT='variant';StoreItemFieldType.SUBTYPE_VARIANT_DROPDOWN='';StoreItemFieldType.SUBTYPE_VARIANT_BUTTONS='buttons';StoreItemFieldType.SUBTYPE_VARIANT_COLOR_BTNS='color';StoreItemFieldType.SUBTYPE_VARIANT_IMG_BTNS='image';return StoreItemFieldType}(Serializable_10.Serializable))});define("js/store/StoreCategory",["require","exports","js/Serializable"],function(require,exports,Serializable_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreCategory=void 0;var StoreCategory=(function(_super){__extends(StoreCategory,_super);function StoreCategory(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.parentId=null;_this.name='';_this.description='';_this.image=null;_this.viewType='thumbs';_this.deserialize(data);return _this}
return StoreCategory}(Serializable_11.Serializable));exports.StoreCategory=StoreCategory});define("js/store/StoreDestinationZone",["require","exports","js/Serializable"],function(require,exports,Serializable_12){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreDestinationZone=void 0;var StoreDestinationZone=(function(_super){__extends(StoreDestinationZone,_super);function StoreDestinationZone(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name="";_this.countries=[];_this.deserialize(data);return _this}
StoreDestinationZone.prototype.isSpecial=function(){if(typeof this.id==='number'){return this.id<0}
return(this.id!==""&&!/^[0-9a-f]{32}$/.test(this.id))};return StoreDestinationZone}(Serializable_12.Serializable));exports.StoreDestinationZone=StoreDestinationZone});define("js/store/StoreTaxRule",["require","exports","js/Serializable"],function(require,exports,Serializable_13){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreTaxRule=exports.StoreTaxRuleRate=void 0;var StoreTaxRuleRate=(function(_super){__extends(StoreTaxRuleRate,_super);function StoreTaxRuleRate(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.destinationZoneId=null;_this.rate=0;_this.deserialize(data);return _this}
return StoreTaxRuleRate}(Serializable_13.Serializable));exports.StoreTaxRuleRate=StoreTaxRuleRate;var StoreTaxRule=(function(_super){__extends(StoreTaxRule,_super);function StoreTaxRule(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name="";_this.categoryId=null;_this.minOrderAmount=0;_this.appliesToProducts=!0;_this.appliesToShipping=!0;_this.rates=[];_this.deserialize(data);return _this}
return StoreTaxRule}(Serializable_13.Serializable));exports.StoreTaxRule=StoreTaxRule});define("js/store/StoreTypes",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StorePriceOptions=exports.StoreCurrency=void 0;var StoreCurrency=(function(){function StoreCurrency(code,prefix,postfix){this.code=code;this.prefix=prefix;this.postfix=postfix}
return StoreCurrency}());exports.StoreCurrency=StoreCurrency;var StorePriceOptions=(function(){function StorePriceOptions(decimalPoint,decimalPlaces,thousandsSeparator){if(decimalPoint===void 0){decimalPoint='.'}
if(decimalPlaces===void 0){decimalPlaces=2}
if(thousandsSeparator===void 0){thousandsSeparator=''}
this.decimalPoint=decimalPoint;this.decimalPlaces=decimalPlaces;this.thousandsSeparator=thousandsSeparator}
return StorePriceOptions}());exports.StorePriceOptions=StorePriceOptions});define("js/UniqueIdentifier",["require","exports","js/util/UID"],function(require,exports,UID_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UniqueIdentifier=void 0;var UniqueIdentifier=(function(){function UniqueIdentifier(){}
UniqueIdentifier.assignIds=function(list){var i;for(i=0;i<list.length;i++){if(!list[i].id)
list[i].id=UID_4.UID.create();}
return list};return UniqueIdentifier}());exports.UniqueIdentifier=UniqueIdentifier});define("js/elements/form/EditFieldOptionsDialog",["require","exports","PropertyDialog","js/UIButton","js/SizeSelector","js/TextField","js/FlexLayout","MultilangTextField","js/CustomContainer","js/Label"],function(require,exports,PropertyDialog_5,UIButton_20,SizeSelector_14,TextField_8,FlexLayout_10,MultilangTextField_3,CustomContainer_12,Label_22){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.EditFieldOptionsDialog=void 0;var OptionElement=(function(_super){__extends(OptionElement,_super);function OptionElement(option,list){var _this=_super.call(this,'row','space-around','center',10)||this;_this.option=option;_this.name=new MultilangTextField_3.default('');_this.setWrap('wrap').addClass('wb-ctrl-item').css({marginTop:10,background:'#fff'});_this.addAllChildren([new CustomContainer_12.CustomContainer('span').addClass('fa fa-arrows-v').css({cursor:'move',fontSize:'21px',color:'#999'}),_this.name,new UIButton_20.UIButton('',undefined,'fa fa-remove').setTitle(__('Remove')).css({minWidth:34,width:34,height:34,padding:0}).on('click',function(){return list.removeField(_this)}),]).setItemFlex(0,0,1,'10px').setItemFlex(1,1,1,'100px').setItemFlex(1,1,1,'35px');_this.load();return _this}
OptionElement.prototype.load=function(){this.name.setValue(this.option||'')};OptionElement.prototype.store=function(){this.option=this.name.getValue()};OptionElement.prototype.focus=function(){this.name.focus()};return OptionElement}(FlexLayout_10.FlexLayout));var OptionsContainer=(function(_super){__extends(OptionsContainer,_super);function OptionsContainer(){var _this=_super.call(this,'column')||this;_this.optionsElements=[];_this.dragging=null;_this.getElem().sortable({distance:3,axis:'y',items:'> .wb-ctrl-item',cursor:'move',start:function(e,ui){return _this.onSortStart(e,ui)},stop:function(e,ui){return _this.onSortStop(e,ui)}});_this.header=new FlexLayout_10.FlexLayout('row','space-between','center',10).css({paddingTop:'10px'}).addAllChildren([new Label_22.Label('').css({minWidth:'9px'}),new Label_22.Label(__('Options')),]).setItemFlex(0,0,1,'10px').setItemFlex(1,1,1,'100px').setItemFlex(1,1,1,'35px').css({borderBottom:'1px solid #aaa'});return _this}
OptionsContainer.prototype.buildInit=function(data,fields){};OptionsContainer.prototype.onSortStart=function(e,ui){this.dragging={idx:ui.item.index()};ui.placeholder.css({marginBottom:20})};OptionsContainer.prototype.onSortStop=function(e,ui){var idx=ui.item.index();if(!this.dragging||this.dragging.idx==idx)
return;var elem=this.optionsElements.splice(this.dragging.idx-1,1);this.optionsElements.splice(idx-1,0,elem[0]);this.dragging=null};OptionsContainer.prototype.setValue=function(fields){this.removeChild(this.header);this.removeAllChildren();this.optionsElements=[];for(var i=0;i<fields.length;i++){this.addField(fields[i])}};OptionsContainer.prototype.getValue=function(){return this.optionsElements.map(function(el){el.store();return el.option})};OptionsContainer.prototype.addField=function(field){if(this.optionsElements.length==0){this.addChild(this.header)}
var el=new OptionElement(field,this);this.optionsElements.push(el);this.addChild(el);return el};OptionsContainer.prototype.removeField=function(field){var idx=this.optionsElements.indexOf(field);if(idx>=0){var el=this.optionsElements.splice(idx,1);this.removeChild(el[0])}
if(this.optionsElements.length==0){this.removeChild(this.header)}};OptionsContainer.prototype.newField=function(){return this.addField('')};return OptionsContainer}(FlexLayout_10.FlexLayout));function iconName(icon,name){return'<span class="'+icon+'"></span> '+name}
var EditFieldOptionsDialog=(function(_super){__extends(EditFieldOptionsDialog,_super);function EditFieldOptionsDialog(field,onApply){var _this=_super.call(this,'',{tabs:[{name:__('Options'),children:[{type:'VerticalLayout',children:[{type:'HorizontalLayout',id:"textareaBlock",children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Rows')},{id:"textareaRow",type:SizeSelector_14.SizeSelector},]},],},{type:'VerticalLayout',id:"dateBlock",spacing:12,children:[{type:'HorizontalLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Min date')},{id:"dateMin",type:TextField_8.TextField,inputType:'date',placeholder:"00:00"},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max date')},{id:"dateMax",type:TextField_8.TextField,inputType:'date',placeholder:"00:00"},],},],},{type:'HorizontalLayout',children:[{type:'VerticalLayout',children:[{id:"dateUseDate",type:'CheckBox',label:__('Show date')},],},{type:'VerticalLayout',children:[{id:"dateUseTime",type:'CheckBox',label:__('Show time')},],},],},],},{type:'FlowLayout',id:"textBlock",children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Min length')},{id:"lengthMin",type:SizeSelector_14.SizeSelector,min:0},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max length')},{id:"lengthMax",type:SizeSelector_14.SizeSelector,min:0,max:999999},],},],},{type:'FlowLayout',id:"numberBlock",children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Min')},{id:"numberMin",type:SizeSelector_14.SizeSelector,min:-9999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max')},{id:"numberMax",type:SizeSelector_14.SizeSelector,min:-9999,max:999999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Step')},{id:"numberStep",type:SizeSelector_14.SizeSelector,min:0.0001,precision:4},],},],},{type:'VerticalLayout',id:"fileBlock",spacing:12,children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Allowed MIME types')+' ('+__('separated by ","')+')',helpText:__('Search for correct mime type on page %s.').replace('%s','<a href="https://mimetype.io/all-types" target="_blank">https://mimetype.io/all-types</a>')},{id:"fileTypes",type:TextField_8.TextField,placeholder:__('Leave blank to allow any file')},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max file size (Mb)')},{id:"fileMaxSize",type:SizeSelector_14.SizeSelector},],},{type:'VerticalLayout',children:[{id:"fileMultiple",type:'CheckBox',label:__('Allow multiple file selection'),},],},{type:'VerticalLayout',children:[{id:"fileSaving",type:'CheckBox',label:__('Save attachments in submissions log'),},],},]},{type:'VerticalLayout',id:"optionsBlock",spacing:12,children:[{type:'VerticalLayout',id:"optionsBlock",spacing:12,children:[{type:OptionsContainer,id:'options'},{type:'Button',text:__('Add Option'),buttonStyle:UIButton_20.UIButton.STYLE_LINK,icon:'fa fa-plus',styleClass:'btn-sm',click:function(e,fields){fields.options.newField()}},],},{type:'VerticalLayout',id:'layoutBlock',spacing:6,children:[{type:'Label',text:__('Layout')},{type:'FlowLayout',children:[{id:"layoutV",type:'RadioBox',group:'layout',value:'vertical',label:__("Vertical"),icon:'wbico wbico-vertical-layout'},{id:"layoutH",type:'RadioBox',group:'layout',value:'horizontal',label:__("Horizontal"),icon:'wbico wbico-horizontal-layout'},],},],},]},{type:'VerticalLayout',id:"rangeBlock",children:[{type:'VerticalLayout',children:[{type:'Label',text:__('From')},{type:'FlowLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Min')},{id:"rangeFromMin",type:SizeSelector_14.SizeSelector,min:-9999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max')},{id:"rangeFromMax",type:SizeSelector_14.SizeSelector,min:-9999,max:999999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Step')},{id:"rangeFromStep",type:SizeSelector_14.SizeSelector,min:0.0001,precision:4},],},]},]},{type:'VerticalLayout',css:{marginTop:23},children:[{type:'Label',text:__('To')},{type:'FlowLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Min')},{id:"rangeToMin",type:SizeSelector_14.SizeSelector,min:-9999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Max')},{id:"rangeToMax",type:SizeSelector_14.SizeSelector,min:-9999,max:999999,precision:4},],},{type:'VerticalLayout',children:[{type:'Label',text:__('Step')},{id:"rangeToStep",type:SizeSelector_14.SizeSelector,min:0.0001,precision:4},],},]},]},]},]},]},],buttons:[{name:__('Close')},{name:__('Apply'),primary:!0,click:function(){_this.storeValues();_this.onApply(_this.field)}}]})||this;_this.field=field;_this.onApply=onApply;_this.setTitle(__('Edit Field Options'));_this.dialog.addClass('wb-modal-settings-420');_this.fields.dateUseTime.onChange(function(){return _this.updateVisibility()});_this.fields.dateUseDate.onChange(function(){return _this.updateVisibility()});_this.updateVisibility();return _this}
EditFieldOptionsDialog.prototype.updateField=function(field){this.field=field;this.loadValues();this.updateVisibility()};EditFieldOptionsDialog.prototype.onShow=function(){this.loadValues();this.updateVisibility()};EditFieldOptionsDialog.prototype.loadValues=function(){this.fields.textareaRow.setValue(null);this.fields.dateMin.setValue('');this.fields.dateMax.setValue('');this.fields.dateUseDate.setValue(!0);this.fields.dateUseTime.setValue(!1);this.fields.lengthMin.setValue(null);this.fields.lengthMax.setValue(null);this.fields.numberMin.setValue(null);this.fields.numberMax.setValue(null);this.fields.numberStep.setValue(null);this.fields.rangeFromMin.setValue(null);this.fields.rangeFromMax.setValue(null);this.fields.rangeFromStep.setValue(null);this.fields.rangeToMin.setValue(null);this.fields.rangeToMax.setValue(null);this.fields.rangeToStep.setValue(null);this.fields.fileMaxSize.setValue(null);this.fields.fileTypes.setValue('');this.fields.fileMultiple.setValue(!1);this.fields.fileSaving.setValue(!1);this.fields.options.setValue([]);if(this.field.settings){if(['textarea'].indexOf(this.field.type)>=0){this.fields.textareaRow.setValue(this.field.settings.textareaRow)}
if(['date'].indexOf(this.field.type)>=0){this.fields.dateMin.setValue(this.field.settings.dateMin||'');this.fields.dateMax.setValue(this.field.settings.dateMax||'');this.fields.dateUseDate.setValue(!!(this.field.settings?this.field.settings.dateUseDate:!0));this.fields.dateUseTime.setValue(!!(this.field.settings?this.field.settings.dateUseTime:!0))}
if(['input'].indexOf(this.field.type)>=0){this.fields.lengthMin.setValue(this.field.settings.lengthMin);this.fields.lengthMax.setValue(this.field.settings.lengthMax)}
if(['number'].indexOf(this.field.type)>=0){this.fields.numberMin.setValue(this.field.settings.numberMin);this.fields.numberMax.setValue(this.field.settings.numberMax);this.fields.numberStep.setValue(this.field.settings.numberStep)}
if(['file'].indexOf(this.field.type)>=0){this.fields.fileMaxSize.setValue(this.field.settings.fileMaxSize||2);this.fields.fileTypes.setValue(this.field.settings.fileTypes||'');this.fields.fileMultiple.setValue(this.field.settings.fileMultiple||!1);this.fields.fileSaving.setValue(this.field.settings.fileSaving||!1)}
if(['radiobox','checkbox'].indexOf(this.field.type)>=0){this.fields.options.setValue(this.field.settings.options&&this.field.settings.options.length>0?this.field.settings.options:(this.field.type==='radiobox'?['','']:['']));this.fields.layoutV.setValue(this.field.settings.layout==='vertical');this.fields.layoutH.setValue(this.field.settings.layout!=='vertical')}
if(['select'].indexOf(this.field.type)>=0){this.fields.options.setValue(this.field.settings.options&&this.field.settings.options.length>0?this.field.settings.options:[''])}
if(['range'].indexOf(this.field.type)>=0){this.fields.rangeFromMin.setValue(this.field.settings.rangeFromMin);this.fields.rangeFromMax.setValue(this.field.settings.rangeFromMax);this.fields.rangeFromStep.setValue(this.field.settings.rangeFromStep);this.fields.rangeToMin.setValue(this.field.settings.rangeToMin);this.fields.rangeToMax.setValue(this.field.settings.rangeToMax);this.fields.rangeToStep.setValue(this.field.settings.rangeToStep)}}};EditFieldOptionsDialog.prototype.storeValues=function(){this.field.settings={};if(['textarea'].indexOf(this.field.type)>=0){this.field.settings.textareaRow=this.fields.textareaRow.getValue()}
if(['date'].indexOf(this.field.type)>=0){this.field.settings.dateMin=this.fields.dateMin.getValue();this.field.settings.dateMax=this.fields.dateMax.getValue();this.field.settings.dateUseDate=this.fields.dateUseDate.getValue();this.field.settings.dateUseTime=this.fields.dateUseTime.getValue()}
if(['input'].indexOf(this.field.type)>=0){this.field.settings.lengthMin=this.fields.lengthMin.getValue();this.field.settings.lengthMax=this.fields.lengthMax.getValue()}
if(['number'].indexOf(this.field.type)>=0){this.field.settings.numberMin=this.fields.numberMin.getValue();this.field.settings.numberMax=this.fields.numberMax.getValue();this.field.settings.numberStep=this.fields.numberStep.getValue()}
if(['file'].indexOf(this.field.type)>=0){this.field.settings.fileMaxSize=this.fields.fileMaxSize.getValue();this.field.settings.fileTypes=this.fields.fileTypes.getValue();this.field.settings.fileMultiple=this.fields.fileMultiple.getValue();this.field.settings.fileSaving=this.fields.fileSaving.getValue()}
if(['radiobox','checkbox'].indexOf(this.field.type)>=0){var value=this.fields.options.getValue();if(value.length===1&&value[0]==='')
value=[];this.field.settings.options=value;this.field.settings.layout=this.fields.layoutH.getValue()?'horizontal':'vertical'}
if(['select'].indexOf(this.field.type)>=0){var value=this.fields.options.getValue();this.field.settings.options=value}
if(['range'].indexOf(this.field.type)>=0){this.field.settings.rangeFromMin=this.fields.rangeFromMin.getValue();this.field.settings.rangeFromMax=this.fields.rangeFromMax.getValue();this.field.settings.rangeFromStep=this.fields.rangeFromStep.getValue();this.field.settings.rangeToMin=this.fields.rangeToMin.getValue();this.field.settings.rangeToMax=this.fields.rangeToMax.getValue();this.field.settings.rangeToStep=this.fields.rangeToStep.getValue()}};EditFieldOptionsDialog.prototype.updateVisibility=function(){this.fields.layoutH.setGroup('layout'+this.id);this.fields.layoutV.setGroup('layout'+this.id);this.fields.textareaBlock.setVisible(!1);this.fields.dateBlock.setVisible(!1);this.fields.textBlock.setVisible(!1);this.fields.numberBlock.setVisible(!1);this.fields.fileBlock.setVisible(!1);this.fields.optionsBlock.setVisible(!1);this.fields.rangeBlock.setVisible(!1);this.fields.layoutBlock.setVisible(!1);if(['textarea'].indexOf(this.field.type)>=0){this.fields.textareaBlock.setVisible(!0)}
if(['date'].indexOf(this.field.type)>=0){this.fields.dateBlock.setVisible(!0);var useDate=this.fields.dateUseDate.getValue();var useTime=this.fields.dateUseTime.getValue();if(!useDate&&!useTime){this.fields.dateUseTime.setValue(!0);useTime=!0}
this.fields.dateMin.setType((useDate&&useTime?'datetime-local':(useDate?'date':'time')));this.fields.dateMax.setType((useDate&&useTime?'datetime-local':(useDate?'date':'time')))}
if(['input'].indexOf(this.field.type)>=0){this.fields.textBlock.setVisible(!0)}
if(['number'].indexOf(this.field.type)>=0){this.fields.numberBlock.setVisible(!0)}
if(['file'].indexOf(this.field.type)>=0){this.fields.fileBlock.setVisible(!0)}
if(['radiobox','checkbox'].indexOf(this.field.type)>=0){this.fields.optionsBlock.setVisible(!0);this.fields.layoutBlock.setVisible(!0)}
if(['select'].indexOf(this.field.type)>=0){this.fields.optionsBlock.setVisible(!0);this.fields.layoutBlock.setVisible(!1)}
if(['range'].indexOf(this.field.type)>=0){this.fields.rangeBlock.setVisible(!0)}};EditFieldOptionsDialog.supportedType=function(type){return['textarea','date','input','text','number','file','radiobox','select','checkbox','range',].indexOf(type)>=0};return EditFieldOptionsDialog}(PropertyDialog_5.default));exports.EditFieldOptionsDialog=EditFieldOptionsDialog});define("js/elements/form/EditFormDialog",["require","exports","jquery","PropertyDialog","js/CustomContainer","js/UIButton","js/FlexLayout","MultilangTextField","js/CheckBox","js/Label","js/DropdownBox","js/Serializable","js/elements/form/Form","js/elements/form/EditFieldOptionsDialog","js/WYSIWYGControl"],function(require,exports,jquery_104,PropertyDialog_6,CustomContainer_13,UIButton_21,FlexLayout_11,MultilangTextField_4,CheckBox_9,Label_23,DropdownBox_11,Serializable_14,Form_1,EditFieldOptionsDialog_1,WYSIWYGControl_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.EditFormDialog=exports.FieldsContainer=exports.FormFieldType=void 0;var FormFieldType=(function(_super){__extends(FormFieldType,_super);function FormFieldType(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id='';_this.name='';_this.deserialize(data);return _this}
FormFieldType.buildStaticTypes=function(){return[new FormFieldType({id:'input',name:__('Text')}),new FormFieldType({id:'number',name:__('Number')}),new FormFieldType({id:'phone',name:__('Phone')}),new FormFieldType({id:'email',name:__('Email')}),new FormFieldType({id:'textarea',name:__('Textarea')}),new FormFieldType({id:'checkbox',name:__('Checkbox')}),new FormFieldType({id:'date',name:__('Date / Time')}),new FormFieldType({id:'file',name:__('Attachment')}),new FormFieldType({id:'radiobox',name:__('Radio box')}),new FormFieldType({id:'select',name:__('Dropdown')}),new FormFieldType({id:'hidden',name:__('Hidden')}),new FormFieldType({id:'range',name:__('Range')}),]};return FormFieldType}(Serializable_14.Serializable));exports.FormFieldType=FormFieldType;var FieldTypeSelector=(function(_super){__extends(FieldTypeSelector,_super);function FieldTypeSelector(){var _this=_super.call(this)||this;_this.noSearch=!0;_this.setEditable(!1);_this.setOnSelect(function(item){var original=item===null||item===void 0?void 0:item.getOriginal();if(item&&original){if(_this.field){_this.field.type=original.id}
_this.setEditable(EditFieldOptionsDialog_1.EditFieldOptionsDialog.supportedType(item.getId()))}});return _this}
FieldTypeSelector.prototype.buildInit=function(data,fields){_super.prototype.buildInit.call(this,data,fields);if(typeof data.onEditOptions==='function')
this.onEditOptions(data.onEditOptions);};FieldTypeSelector.prototype.onEditOptions=function(func){this.editOptions=func;return this};FieldTypeSelector.prototype.onEdit=function(fields){if(this.editOptions)
this.editOptions();};FieldTypeSelector.prototype.reload=function(){var _a,_b;if((_b=(_a=this.field)===null||_a===void 0?void 0:_a.type)===null||_b===void 0?void 0:_b.match('wb_store_')){this.optionsSource=[new FormFieldType({id:this.field.type,name:__('Service')})]}else{this.optionsSource=FormFieldType.buildStaticTypes()}
_super.prototype.reload.call(this)};FieldTypeSelector.prototype.setField=function(field){var _a;if((_a=field.type)===null||_a===void 0?void 0:_a.match('wb_store_')){this.optionsSource=[new FormFieldType({id:field.type,name:__('Service')})];_super.prototype.reload.call(this)}
this.field=field;this.setValue(field.type||null);this.setEditable(EditFieldOptionsDialog_1.EditFieldOptionsDialog.supportedType(this.field.type))};return FieldTypeSelector}(DropdownBox_11.DropdownBox));var FieldElement=(function(_super){__extends(FieldElement,_super);function FieldElement(field,list){var _this=_super.call(this,'row','space-around','center',10)||this;_this.field=field;_this.list=list;_this.enabled=_this.cbInit(new CheckBox_9.default('').onChange(function(v){return _this.onEnableChange(v)}));_this.required=_this.cbInit(new CheckBox_9.default(''));_this.nameHtml=new WYSIWYGControl_2.WYSIWYGControl();_this.name=new MultilangTextField_4.default('').setPlaceholder(__('Name'));_this.default=new MultilangTextField_4.default('').setPlaceholder('');_this.type=new FieldTypeSelector().on('change',function(){return _this.onTypeChange()});_this.enabledLayout=new FlexLayout_11.FlexLayout('column').setAlignItems('center').setTitle(__('Enabled')).addAllChildren([_this.enabled.css({margin:0,display:'flex'})]);_this.msgElem=null;var column=0;_this.nameHtml.buildInit({height:34,config:{forcePasteAsPlainText:!0},blur:function(fields){_this.onValueChanged()},type:"WYSIWYGControl"},{});_this.nameHtml.addClass('wb-form-edit-name-wysiwyg-control');_this.nameHtml.css({fontSize:'12px',lineHeight:'20px'});_this.setWrap('wrap').addClass('wb-ctrl-item').css({marginTop:10,background:'#fff',minWidth:'750px'});_this.addAllChildren([new CustomContainer_13.CustomContainer('span').addClass('fa fa-arrows-v sortable').css({cursor:'move',fontSize:'21px',color:'#999'}),_this.enabledLayout,_this.type.onEditOptions(function(){var optionsDialog=_this.getOptionsDialog();optionsDialog.setVisible(!0);optionsDialog.updateField(_this.field)}),_this.name,_this.nameHtml,_this.default,new FlexLayout_11.FlexLayout('column').setAlignItems('center').setTitle(__('Required')).addAllChildren([_this.required.css({margin:0,display:'flex'})]),_this.removeBtn=new UIButton_21.UIButton('',undefined,'fa fa-remove').setTitle(__('Remove')).css({minWidth:34,width:34,height:34,padding:0}).on('click',function(){return list.removeField(_this)}),]).setItemFlex(column++,0,1,'10px').setItemFlex(column++,1,1,'20px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'50px').setItemFlex(column++,0,1,'35px');_this.load();return _this}
FieldElement.prototype.cbInit=function(cb){var elem=cb.getElem();elem.css({marginTop:1,fontSize:10});elem.find('label').css({minHeight:13});elem.find('input').css({marginTop:0,marginBottom:0});return cb};FieldElement.prototype.onEnableChange=function(enabled){if(this.field.type=='wb_store_countryCode'){console.log(enabled,this.field.type);if(!enabled){if(!this.msgElem){this.msgElem=(0,jquery_104.default)('<div>').addClass('alert alert-info small').css({padding:'4px 10px',margin:'5px 0 0 0',width:'100%',}).append((0,jquery_104.default)('<span>').addClass('fa fa-exclamation-circle').css({display:'inline-block',margin:'0 5px 0 0'})).append(__('When country is disabled use "World" location for all shipping methods and tax rules'))}
this.getElem().append(this.msgElem)}else if(this.msgElem){this.msgElem.detach()}}};FieldElement.prototype.onTypeChange=function(){var item=this.type.getSelectedItem();var itemOri=item?item.getOriginal():null;this.required.css({'visibility':'visible'});if(item&&itemOri&&(itemOri.id=='hidden')){this.required.setValue(!1);this.required.setEnabled(!1);this.required.css({'visibility':'hidden'})}else if(item&&itemOri&&(itemOri.id=='')){this.required.setValue(!1);this.required.setEnabled(!1)}else{this.required.setEnabled(!0)}
if(item&&itemOri&&(['checkbox','file','radiobox','date'].indexOf(itemOri.id)>=0)){this.default.setValue('');this.default.css({'visibility':'hidden'})}else{this.default.setValue(this.field.default||'');this.default.css({'visibility':'visible'})}
if(item&&itemOri&&(['checkbox','radiobox'].indexOf(itemOri.id)>=0)){this.nameHtml.setVisible(!0);this.name.setVisible(!1)}else{this.nameHtml.setVisible(!1);this.name.setVisible(!0)}
this.list.reload();this.storeFields()};FieldElement.prototype.reload=function(){this.type.reload();this.enabledLayout.setVisible(this.list.getIsStore())};FieldElement.prototype.load=function(){var _a;this.enabledLayout.setVisible(this.list.getIsStore());this.enabled.setValue(this.field.enabled||!1);if(['checkbox','radiobox'].indexOf(this.field.type)>=0){this.nameHtml.setValue(this.field.name||'')}else{this.name.setValue(this.field.name||'')}
if(this.field.type==='hidden'){this.required.setValue(!1);this.required.css({'visibility':'hidden'})}else{this.required.setValue(this.field.required||!1);this.required.css({'visibility':'visible'})}
if(['checkbox','file','radiobox'].indexOf(this.field.type)>=0){this.default.setValue('');this.default.css({'visibility':'hidden'})}else{this.default.setValue(this.field.default||'');this.default.css({'visibility':'visible'})}
if((_a=this.field.type)===null||_a===void 0?void 0:_a.match('wb_store_')){this.removeBtn.setEnabled(!1);this.name.setEnabled(!1);this.nameHtml.setEnabled(!1);this.default.setEnabled(!1);this.type.setEnabled(!1)}
this.type.reload();this.type.setField(this.field);this.type.setValue(this.field.type||'');this.onTypeChange();this.storeFields()};FieldElement.prototype.store=function(){var _a;this.field.enabled=this.enabled.isVisible()?this.enabled.getValue():!0;this.field.required=this.required.getValue();if(['checkbox','radiobox'].indexOf(this.field.type)>=0){this.field.name=this.nameHtml.getValue()}else{this.field.name=this.name.getValue()}
if(typeof this.field.name==='string'){this.field.name=this.field.name.trim()}else if(typeof this.field.name==='object'){for(var n in this.field.name){this.field.name[n]=this.field.name[n].trim()}}
this.field.default=this.default.getValue();if(!((_a=this.field.type)===null||_a===void 0?void 0:_a.match('wb_store_'))){this.field.type=this.type.getValue()}
this.storeFields()};FieldElement.prototype.storeFields=function(){this.field=Form_1.default.fillDefaultOptions(this.field)};FieldElement.prototype.getOptionsDialog=function(){var _this=this;if(!this.optionsDialog){this.optionsDialog=new EditFieldOptionsDialog_1.EditFieldOptionsDialog(this.field,function(newField){_this.optionsDialog.setVisible(!1)})}
return this.optionsDialog};FieldElement.prototype.focus=function(){this.name.focus()};return FieldElement}(FlexLayout_11.FlexLayout));var FieldsContainer=(function(_super){__extends(FieldsContainer,_super);function FieldsContainer(){var _this=_super.call(this,'column')||this;_this.fieldElements=[];_this.dragging=null;_this.isStore=!1;_this.getElem().sortable({handle:".sortable",distance:3,axis:'y',items:'> .wb-ctrl-item',cursor:'move',start:function(e,ui){return _this.onSortStart(e,ui)},stop:function(e,ui){return _this.onSortStop(e,ui)}});var column=0;_this.header=new FlexLayout_11.FlexLayout('row','space-between','center',10).css({paddingTop:'10px',minWidth:'750px'}).addAllChildren([new Label_23.Label('').css({minWidth:'9px'}),_this.enabled=new FlexLayout_11.FlexLayout('column').setAlignItems('center').addAllChildren([new Label_23.Label(__('Enabled')),]),new Label_23.Label(__('Type')).css({minWidth:'121px',paddingRight:'44px'}),new Label_23.Label(__('Name')),new Label_23.Label(__('Placeholder')),new FlexLayout_11.FlexLayout('column').setAlignItems('center').addAllChildren([new Label_23.Label(__('Required')),]),new Label_23.Label(''),]).setItemFlex(column++,0,1,'10px').setItemFlex(column++,1,1,'20px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'150px').setItemFlex(column++,1,1,'50px').setItemFlex(column++,0,1,'35px').css({borderBottom:'1px solid #aaa'});_this.enabled.setVisible(!1);return _this}
FieldsContainer.prototype.buildInit=function(data,fields){if(data.isStore)
this.setIsStore(data.isStore);};FieldsContainer.prototype.setIsStore=function(isStore){this.isStore=isStore;this.enabled.setVisible(isStore);for(var _i=0,_a=this.fieldElements;_i<_a.length;_i++){var field=_a[_i];field.reload()}};FieldsContainer.prototype.getIsStore=function(){return this.isStore};FieldsContainer.prototype.onSortStart=function(e,ui){this.dragging={idx:ui.item.index()};ui.placeholder.css({marginBottom:20})};FieldsContainer.prototype.onSortStop=function(e,ui){var idx=ui.item.index();if(!this.dragging||this.dragging.idx==idx)
return;var elem=this.fieldElements.splice(this.dragging.idx-1,1);this.fieldElements.splice(idx-1,0,elem[0]);this.dragging=null};FieldsContainer.prototype.reload=function(){for(var _i=0,_a=this.fieldElements;_i<_a.length;_i++){var field=_a[_i];field.reload()}};FieldsContainer.prototype.setValue=function(fields){this.removeChild(this.header);this.removeAllChildren();this.fieldElements=[];for(var i=0;i<fields.length;i++){this.addField(fields[i])}};FieldsContainer.prototype.getValue=function(){return this.fieldElements.map(function(el){el.store();return el.field})};FieldsContainer.prototype.addField=function(field){if(this.fieldElements.length==0){this.addChild(this.header)}
var el=new FieldElement(field,this);this.fieldElements.push(el);this.addChild(el);return el};FieldsContainer.prototype.removeField=function(field){var idx=this.fieldElements.indexOf(field);if(idx>=0){var el=this.fieldElements.splice(idx,1);this.removeChild(el[0])}
if(this.fieldElements.length==0){this.removeChild(this.header)}};FieldsContainer.prototype.newField=function(){return this.addField({enabled:!0,required:!0,type:'input',settings:{},name:'',default:'',})};return FieldsContainer}(FlexLayout_11.FlexLayout));exports.FieldsContainer=FieldsContainer;var EditFormDialog=(function(_super){__extends(EditFormDialog,_super);function EditFormDialog(onApply){var _this=_super.call(this,'',{tabs:[{name:__('Fields'),children:[{type:FieldsContainer,id:'fields'},{type:'Button',text:__('Add Option'),buttonStyle:UIButton_21.UIButton.STYLE_LINK,icon:'fa fa-plus',styleClass:'btn-sm',click:function(e,fields){fields.fields.newField()}}]},],buttons:[{name:__('Close')},{name:__('Apply'),primary:!0,click:function(){_this.onApply(_this.fields.fields.getValue())}}]})||this;_this.onApply=onApply;_this.setTitle(__('Edit Fields'));_this.dialog.addClass('wb-modal-settings');_this.list=[];return _this}
EditFormDialog.prototype.loadFields=function(fields){this.list=fields.map(function(item){return __assign({},item)});this.fields.fields.setValue(this.list)};return EditFormDialog}(PropertyDialog_6.default));exports.EditFormDialog=EditFormDialog});define("js/globals",["require","exports","js/core/BuilderConfig","js/util/TextUtil"],function(require,exports,BuilderConfig_25,TextUtil_10){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});window.__tr=function(value_,langCode,defText,stripTagsCheck){if(langCode===void 0){langCode=null}
if(defText===void 0){defText=null}
if(stripTagsCheck===void 0){stripTagsCheck=!1}
if(!value_)
return value_;var site=(wb_builder&&wb_builder.site)?wb_builder.site:null;var defLang=site?site.getLastDefLang():null,currLang=site?site.currSelLang:null,mDefText=defText||'',returnValue=null;if(langCode==='__DEFAULT__')
langCode=defLang;if(typeof value_==='string'||typeof value_==="number"){returnValue=""+value_}else if(typeof value_==='object'){var value=value_;if(langCode&&(langCode in value)&&(stripTagsCheck&&(0,TextUtil_10.stripTags)(value[langCode])||!stripTagsCheck&&value[langCode]))
returnValue=value[langCode];else if(currLang&&(currLang in value)&&(stripTagsCheck&&(0,TextUtil_10.stripTags)(value[currLang])||!stripTagsCheck&&value[currLang]))
returnValue=value[currLang];else if(defLang&&(defLang in value)&&(stripTagsCheck&&(0,TextUtil_10.stripTags)(value[defLang])||!stripTagsCheck&&value[defLang]))
returnValue=value[defLang];else{for(var i in value){if(stripTagsCheck&&(0,TextUtil_10.stripTags)(value[i])||!stripTagsCheck&&value[i]){returnValue=value[i];break}}}}
return returnValue?returnValue:mDefText};window.__tr_contains=function(text,searchText){if(searchText===undefined||searchText===null||searchText==="")
return!1;if(typeof searchText==="object"){for(var ln in searchText){if(!searchText.hasOwnProperty(ln)||typeof searchText[ln]!=="string")
continue;if(__tr_contains(text,searchText[ln]))
return!0}
return!1}
searchText=searchText.toLowerCase();if(text!==null&&typeof text==="object"){for(var ln in text){if(!text.hasOwnProperty(ln))
continue;var lnText=text[ln];if(typeof lnText!=="string")
continue;if(lnText.toLowerCase().indexOf(searchText)>=0)
return!0}}else if(typeof text==="string"&&text.toLowerCase().indexOf(searchText)>=0)
return!0;return!1};window.__tr_intersects=function(text,searchText){if(searchText===undefined||searchText===null||searchText==="")
return!1;if(typeof searchText==="object"){for(var ln in searchText){if(!searchText.hasOwnProperty(ln)||typeof searchText[ln]!=="string")
continue;if(__tr_intersects(text,searchText[ln]))
return!0}
return!1}
searchText=searchText.toLowerCase();if(text!==null&&typeof text==="object"){for(var ln in text){if(!text.hasOwnProperty(ln))
continue;var lnText=text[ln];if(typeof lnText!=="string")
continue;if(lnText.toLowerCase()==searchText)
return!0}}else if(typeof text==="string"&&text.toLowerCase()==searchText)
return!0;return!1};window.__trf=function(value,func){if(!value)
return value;if(typeof(func)!=='function')
return value;if(typeof value==='string'||typeof value==="number"){return func((""+value))}else if(typeof value==='object'){var obj={};for(var i in value){obj[i]=func(value[i])}
return obj}
return null};window.__trr=function(value){var _a;return __tr(value,(_a=BuilderConfig_25.wbConfig.getLanguageByLocale(BuilderConfig_25.wbConfig.locale))===null||_a===void 0?void 0:_a.code,null,!0)};window.__pr=function(value){if(value&&value instanceof Array){var newValue=[];for(var i=0,len=value.length;i<len;i++){newValue[i]=window.__pr(value[i])}
return newValue.join('')}
var message=null;if(typeof value==='object'&&('key' in value)){message=__(value.key);if(('vars' in value)&&(value.vars instanceof Array)){for(var i=0;i<value.vars.length;i++){message=message.replace(/(?:%s|%d)/,value.vars[i])}}}else if(typeof value==='string'){message=__(value)}else{message=value}
return message};var gt=window.Gettext?new window.Gettext({"domain":"webbuilder"}):null;window.__=function(msgId){if(gt)
return gt.gettext(msgId);return msgId};window.__c=function(msg){return'{{'+msg+'}}'};window.getElementById=function(id){var foundElem=null;wb_builder.bodyInstance.traverseElements(function(elem,isRoot,isBackground){if(elem.id===id){foundElem=elem;return 1}
return 0});return foundElem}});define("js/elements/form/FormInquiries",["require","exports","jquery","js/Service","js/VerticalLayout","js/PreloaderOverlay","Dialog","js/UIComponent","MsgDialog","js/core/BuilderConfig","js/util/TextUtil"],function(require,exports,jquery_105,Service_45,VerticalLayout_31,PreloaderOverlay_2,Dialog_17,UIComponent_66,MsgDialog_3,BuilderConfig_26,TextUtil_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.InquiriesDialog=void 0;var InquiryListItem=(function(){function InquiryListItem(formUuid,item,actionCallback){this.formUuid=formUuid;this.elem=null;this.detailsElem=null;this.detailsCell=null;this.removeButton=null;this.columns=[];this.data=item;this.actionCallback=actionCallback}
InquiryListItem.prototype.getElem=function(){var _this=this;var _a;if(!this.elem){this.elem=(0,jquery_105.default)('<tr>');var currency={};var priceOptions={};for(var i=0;i<3;i++){this.columns.push((0,jquery_105.default)('<td>').appendTo(this.elem))}
this.columns[0].text((_a=this.data.createdAt)!==null&&_a!==void 0?_a:'-');var html=this.renderAnswers(this.data.fields.slice(0,2));if(this.data.fields.length>2)
html.concat('<br>.....');this.columns[1].html(html);var btn=(0,jquery_105.default)('<a href="javascript:void(0)">').text(__('Details'));this.columns[2].append(btn);btn.on("click touchend",function(){if(_this.detailsElem)
_this.detailsElem.toggleClass("hidden");})}
return this.elem};InquiryListItem.prototype.getDetailsElem=function(){var _this=this;if(!this.detailsElem){if(!this.elem)
this.getElem();this.detailsCell=(0,jquery_105.default)('<td>').css({padding:"15px"});this.detailsCell.attr("colspan",this.columns.length);var row=void 0;var cell=void 0;this.detailsCell.append(row=(0,jquery_105.default)('<div class="row">'));row.append(cell=(0,jquery_105.default)('<div class="col-sm-6">').css({marginBottom:15}));cell.append((0,jquery_105.default)('<strong>').text(__('Details')));cell.append((0,jquery_105.default)('<br>'));cell.append((0,jquery_105.default)('<div>').html(this.renderAnswers(this.data.fields)));var removeBtn=(0,jquery_105.default)('<button class="btn btn-danger"><i class="fa fa-trash-o"></i></button>').css({marginBottom:5,marginTop:5}).append(document.createTextNode(" "+__('Remove inquiry')));removeBtn.on("click touchend",function(e){e.stopImmediatePropagation();e.preventDefault();if(_this.actionCallback&&confirm(__("Are you sure you want to remove this inquiry?")))
_this.actionCallback(_this,"remove",{id:_this.data.id})});cell.append(removeBtn);this.detailsElem=(0,jquery_105.default)('<tr>').addClass("hidden").append(this.detailsCell)}
return this.detailsElem};InquiryListItem.prototype.renderAnswers=function(fields){var webUrl='//'+wb_builder.siteDomain+'/forms_log_attachments';var convertToUrl=function(value){if(value===!0||value===!1||typeof value==='object')
return'';var fileNameParts=value.split('/');var fileName=fileNameParts[fileNameParts.length-1]||__('Download');return'<a href="'+webUrl+value+'" target="_blank">'+fileName+'</a>'};return fields.map(function(item){var answer=typeof item.answer==='string'?(0,TextUtil_11.escapeHtmlChars)(item.answer):item.answer;if(item.type==='file'){answer=Array.isArray(answer)?('<ul>'+answer.map(function(item){return'<li>'+convertToUrl(item)+'</li>'}).join('')+'</ul>'):convertToUrl(answer)}
if(item.type==='range'){answer=typeof answer==='object'?((0,TextUtil_11.escapeHtmlChars)(answer.from)+' - '+(0,TextUtil_11.escapeHtmlChars)(answer.to)):'-'}
if(Array.isArray(answer))
answer=answer.map(function(item){return(0,TextUtil_11.escapeHtmlChars)(item)}).join(', ');if(answer===!0||answer===!1)
answer=answer?__('Yes'):__('No');var name=__tr(item.name||item.default);name=(0,jquery_105.default)('<div>').html(jquery_105.default.trim(name)).text();return name+': '+answer}).join('<br>')};return InquiryListItem}());var InquiryList=(function(_super){__extends(InquiryList,_super);function InquiryList(){var _this=_super.call(this,'div')||this;_this.css({maxHeight:400,overflowY:'auto'});var respTable=(0,jquery_105.default)('<div>').addClass('table-responsive').appendTo(_this._elem),table=(0,jquery_105.default)('<table>').addClass('table table-bordered table-condensed').css({margin:0}).appendTo(respTable),thead=(0,jquery_105.default)('<thead>').appendTo(table);_this.tbody=(0,jquery_105.default)('<tbody>').appendTo(table);(0,jquery_105.default)('<tr>').append((0,jquery_105.default)('<th>').css({whiteSpace:'nowrap'}).text(__('Date/Time'))).append((0,jquery_105.default)('<th>').css({whiteSpace:'nowrap'}).text(__('Contents'))).append((0,jquery_105.default)('<th>').text('')).appendTo(thead);return _this}
InquiryList.prototype.buildInit=function(data,fields){};InquiryList.prototype.removeAllItems=function(){this.tbody.children("tr").each(function(idx,elem){if(elem.parentNode)
elem.parentNode.removeChild(elem);})};InquiryList.prototype.addItem=function(item){this.tbody.append(item.getElem());this.tbody.append(item.getDetailsElem())};return InquiryList}(UIComponent_66.UIComponent));function fetchOrders(formUuid){var deferred=jquery_105.default.Deferred();if(BuilderConfig_26.wbConfig.testMode){return deferred.resolve({ok:!0,list:[],version:0}).promise()}
jquery_105.default.getJSON(BuilderConfig_26.wbConfig.lnBaseUrl+'forms/remote-log/',{formUuid:formUuid}).then(function(data){if(!data||typeof data!=="object"||('error' in data)){deferred.reject((data&&("error" in data))?data.error.message:'')}else if(data.ok){deferred.resolve(data)}else{deferred.reject('')}}).fail(function(error){return deferred.reject(error)});return deferred.promise()}
var InquiriesDialog=exports.InquiriesDialog=(function(_super){__extends(InquiriesDialog,_super);function InquiriesDialog(formUuid){var _this=_super.call(this,__('Forms Inquiries Log'))||this;_this.formUuid=formUuid;_this.lastUpdateData=[];_this.msgDialog=null;_this.setMaxWidth(992,!0);_this.initButtons();Service_45.Service.UIBuilder.buildLayout({type:VerticalLayout_31.VerticalLayout,children:[{type:'CustomContainer',id:'errorMessage',visible:!1},{type:PreloaderOverlay_2.PreloaderOverlay,id:'preloader',visible:!1,noParentLimit:!0},{type:InquiryList,id:'table'}]},_this.content.empty(),_this.fields);return _this}
InquiriesDialog.prototype.initButtons=function(){var _this=this;this.removeAllButtons();var that=this;this.addButton(__('Export to CSV').replace('CSV','XLSX'),function(){if(_this.lastUpdateData.length){var url=BuilderConfig_26.wbConfig.lnBaseUrl+'forms/export-log/?formUuid='+_this.formUuid;var a=document.createElement('a');a.href=url;a.target='_blank';a.click()}},!1,!this.lastUpdateData.length?undefined:'btn-disabled',!this.lastUpdateData.length);this.addButton(__('Remove all').replace('CSV','XLSX'),function(){_this.confirm(__("Confirm"),__('Are you sure you want to remove all inquries from this form?')).then(function(result){if(result&&result.clickedButtonIndex){jquery_105.default.post(BuilderConfig_26.wbConfig.lnBaseUrl+'forms/remove-all-inquiry/?formUuid='+that.formUuid,undefined,function(data){if(!data||typeof data!=="object"||('error' in data)){if(data&&("error" in data))
that.showErrorMessage(__pr(data.error.message));else that.showErrorMessage("Unable to send request")}else if(data.ok){setTimeout(that.updateContent.bind(that),0)}},'json').fail(function(){that.showErrorMessage("Unable to send request")}).always(function(){that.fields.preloader.setVisible(!1)})}})},!1,'btn-danger');this.addButton(__('Close'))};InquiriesDialog.prototype.updateDialogContent=function(data){this.fields.table.removeAllItems();for(var i=(data.length-1);i>=0;i--){var item=data[i];this.fields.table.addItem(item)}
this.initButtons()};InquiriesDialog.prototype.updateContent=function(){var _this=this;if(BuilderConfig_26.wbConfig.testMode)
return;this.fields.preloader.setVisible(!0);this.fields.errorMessage.setVisible(!1);fetchOrders(this.formUuid).then(function(data){_this.lastUpdateData=[];if(!data)
return;InquiriesDialog.version=data.version;for(var _i=0,_a=data.list;_i<_a.length;_i++){var itemData=_a[_i];_this.lastUpdateData.push(new InquiryListItem(_this.formUuid,itemData,_this.onInquiryAction.bind(_this)))}
if(InquiriesDialog.version<1&&!InquiriesDialog.outdatedNotified){InquiriesDialog.outdatedNotified=!0;_this.showNotification(__("Your published website is outdated and doesn't support latest forms functionality. Please republish your website."))}}).fail(function(error){_this.lastUpdateData=[];if(!error)
return;_this.fields.errorMessage.setContent((0,jquery_105.default)('<div class="alert alert-danger" style="white-space: pre-wrap">').text(__pr(error)));_this.fields.errorMessage.setVisible(!0)}).always(function(){_this.updateDialogContent(_this.lastUpdateData);_this.fields.preloader.setVisible(!1)})};InquiriesDialog.prototype.onInquiryAction=function(item,actionId,actionData){var _this=this;if(actionId==="remove"){this.fields.preloader.setVisible(!0);jquery_105.default.post(BuilderConfig_26.wbConfig.lnBaseUrl+'forms/remove-inquiry/'+item.data.id,actionData,function(data){if(!data||typeof data!=="object"||('error' in data)){if(data&&("error" in data))
_this.showErrorMessage(__pr(data.error.message));else _this.showErrorMessage("Unable to send request")}else if(data.ok){setTimeout(_this.updateContent.bind(_this),0)}},'json').fail(function(){_this.showErrorMessage("Unable to send request")}).always(function(){_this.fields.preloader.setVisible(!1)})}};InquiriesDialog.prototype.setVisible=function(visible,noAction,ignoreEvent){if(visible){this.updateContent()}
_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};InquiriesDialog.prototype.showErrorMessage=function(message){if(!this.msgDialog)
this.msgDialog=new MsgDialog_3.default();this.msgDialog.setTitle(__('Error'));this.msgDialog.setMessage(message);this.msgDialog.setVisible(!0)};InquiriesDialog.prototype.showNotification=function(message){if(!this.msgDialog)
this.msgDialog=new MsgDialog_3.default();this.msgDialog.setTitle(__('Note'));this.msgDialog.setMessage(message);this.msgDialog.setVisible(!0)};InquiriesDialog.version=1;InquiriesDialog.outdatedNotified=!1;return InquiriesDialog}(Dialog_17.default))});define("js/elements/form/FormLabelPositionControl",["require","exports","js/UIComponent","RadioBox","js/VerticalLayout","js/FlowLayout"],function(require,exports,UIComponent_67,RadioBox_3,VerticalLayout_32,FlowLayout_19){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FormLabelPositionType=exports.FormLabelPositionControl=void 0;function iconName(icon,name){return'<span class="'+icon+'"></span> '+name}
var FormLabelPositionControl=(function(_super){__extends(FormLabelPositionControl,_super);function FormLabelPositionControl(){var _this=_super.call(this)||this;_this.value=null;_this.typeLeft=new RadioBox_3.default('',!1,"FormLabelPositionType").setLabel(__("Left")).onChange(function(v){if(v)
_this.onLayoutChange(FormLabelPositionType.Left);});_this.typeAbove=new RadioBox_3.default('',!1,"FormLabelPositionType").setLabel(__("Above")).onChange(function(v){if(v)
_this.onLayoutChange(FormLabelPositionType.Above);});_this.typeAsPlaceholder=new RadioBox_3.default('',!1,"FormLabelPositionType").setLabel(__("As placeholder")).onChange(function(v){if(v)
_this.onLayoutChange(FormLabelPositionType.AsPlaceholder);});_this._elem.addClass('wb-flex-layout-ctrl').append(new VerticalLayout_32.VerticalLayout().setSpacing(12).addAllChildren([new FlowLayout_19.FlowLayout().setSpacing(8).addAllChildren([_this.typeLeft,_this.typeAbove,_this.typeAsPlaceholder,]),]).getElem());return _this}
FormLabelPositionControl.prototype.buildInit=function(data,fields){};FormLabelPositionControl.prototype.onLayoutChange=function(layout){if(!this.value)
return;this.value=layout;this.onValueChanged()};FormLabelPositionControl.prototype.setValue=function(value){this.value=value;this.typeLeft.setValue(value==FormLabelPositionType.Left);this.typeAbove.setValue(value==FormLabelPositionType.Above);this.typeAsPlaceholder.setValue(value==FormLabelPositionType.AsPlaceholder)};FormLabelPositionControl.prototype.getValue=function(){return this.value};FormLabelPositionControl.supportsMultipleObjectBindings=function(){return!1};FormLabelPositionControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return FormLabelPositionControl}(UIComponent_67.UIComponent));exports.FormLabelPositionControl=FormLabelPositionControl;var FormLabelPositionType;(function(FormLabelPositionType){FormLabelPositionType.Left="left";FormLabelPositionType.Above="above";FormLabelPositionType.AsPlaceholder="as-placeholder"})(FormLabelPositionType||(exports.FormLabelPositionType=FormLabelPositionType={}))});define("js/elements/form/FormFieldsControl",["require","exports","js/UIComponent","js/Service","js/VerticalLayout","js/jquery-builder","js/WYSIWYGControl"],function(require,exports,UIComponent_68,Service_46,VerticalLayout_33,jquery_builder_16,WYSIWYGControl_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FormFieldsControl=void 0;var FormFieldsControl=exports.FormFieldsControl=(function(_super){__extends(FormFieldsControl,_super);function FormFieldsControl(){var _this=_super.call(this)||this;Service_46.Service.UIBuilder.buildLayout({type:VerticalLayout_33.VerticalLayout,spacing:5,children:[{type:'Label',text:__('Simple fields')},_this.createSimpleFieldUI(0,!1),_this.createSimpleFieldUI(1,!1),_this.createSimpleFieldUI(2,!1),_this.createSimpleFieldUI(3,!1),_this.createSimpleFieldUI(4,!1),_this.createSimpleFieldUI(5,!1),_this.createSimpleFieldUI(6,!1),{type:'Label',text:__('Options')},_this.createSelectFieldUI(7),_this.createSelectFieldUI(8),{type:'Label',text:__('Message field')},_this.createSimpleFieldUI(9,!0),{type:'Label',text:__('Attachment field')},_this.createSimpleFieldUI(10,!1),{type:'Label',text:__('Checkboxes')},_this.createWysiwygFieldUI(11,!1),_this.createWysiwygFieldUI(12,!1),]},_this._elem,_this.fields={});return _this}
FormFieldsControl.prototype.buildInit=function(data,fields){};FormFieldsControl.prototype.createSimpleFieldUI=function(index,textArea,baseUIObject){var _this=this;if(textArea===void 0){textArea=!1}
if(baseUIObject===void 0){baseUIObject=null}
var id='formField'+index;if(typeof baseUIObject!=="object")
baseUIObject={};var $asterisk=(0,jquery_builder_16.default)('<div class="req-asterisk">');$asterisk.css({position:"absolute",left:wb_builder.rtl?"8.5px":"1.5px",top:"-10px",color:"#E00",fontSize:"10px"});$asterisk.attr("title",__("Required"));$asterisk.attr("data-placement",'left');$asterisk.html('<i class="fa fa-asterisk"></i>');setTimeout(function(){$asterisk.tooltip()},0);return jquery_builder_16.default.extend(!0,baseUIObject,{type:'CheckBox',id:id+'Enable',label:[{type:"FlowLayout",css:{width:260},children:[{type:'MultilangTextField',id:id,textArea:textArea,css:{top:'-7px',width:216},onChange:function(fields){_this.onValueChanged()}},{type:'CheckBox',id:id+'Required',css:{marginRight:'0px'},label:[{type:"CustomContainer",id:id+"Asterisk",content:$asterisk}],change:function(fields){fields[id+"Asterisk"].getElem().find(".req-asterisk").css("color",fields[id+"Required"].getValue()?"#E00":"#222");_this.onValueChanged()}}]}],change:function(fields){var enabled=fields[id+'Enable'].getValue();fields[id].setEnabled(enabled);fields[id+"Required"].setVisible(enabled);_this.onValueChanged()}})};FormFieldsControl.prototype.createWysiwygFieldUI=function(index,textArea,baseUIObject){var _this=this;if(textArea===void 0){textArea=!1}
if(baseUIObject===void 0){baseUIObject=null}
var id='formField'+index;if(typeof baseUIObject!=="object")
baseUIObject={};var $asterisk=(0,jquery_builder_16.default)('<div class="req-asterisk">');$asterisk.css({position:"absolute",left:wb_builder.rtl?"8.5px":"1.5px",top:"-10px",color:"#E00",fontSize:"10px"});$asterisk.attr("title",__("Required"));$asterisk.attr("data-placement",'left');$asterisk.html('<i class="fa fa-asterisk"></i>');setTimeout(function(){$asterisk.tooltip()},0);return jquery_builder_16.default.extend(!0,baseUIObject,{type:'CheckBox',id:id+'Enable',label:[{type:"FlowLayout",css:{width:260},children:[{type:WYSIWYGControl_3.WYSIWYGControl,id:id,css:{top:'-7px',width:216,fontSize:'12px',lineHeight:'14px'},config:{forcePasteAsPlainText:!0},blur:function(fields){_this.onValueChanged()}},{type:'CheckBox',id:id+'Required',css:{marginRight:'0px'},label:[{type:"CustomContainer",id:id+"Asterisk",content:$asterisk}],change:function(fields){fields[id+"Asterisk"].getElem().find(".req-asterisk").css("color",fields[id+"Required"].getValue()?"#E00":"#222");_this.onValueChanged()}}]}],change:function(fields){var enabled=fields[id+'Enable'].getValue();fields[id].setEnabled(enabled);fields[id+"Required"].setVisible(enabled);_this.onValueChanged()}})};FormFieldsControl.prototype.createSelectFieldUI=function(index,baseUIObject){var _this=this;if(baseUIObject===void 0){baseUIObject=null}
var id='formField'+index;if(typeof baseUIObject!=="object")
baseUIObject={};return jquery_builder_16.default.extend(!0,baseUIObject,{type:'CheckBox',id:id+'Enable',label:[{type:'MultilangTextField',id:id,css:{top:'-7px',width:216},onChange:function(fields){_this.onValueChanged()}},{type:'Tooltip',text:__('Write options as separate lines')},{type:'MultilangTextField',id:id+"Opts",css:{width:216},textArea:!0,minHeight:58,onChange:function(){_this.onValueChanged()}}],css:{position:'relative',marginTop:11},change:function(fields){var enabled=fields[id+'Enable'].getValue();fields[id].setEnabled(enabled);fields[id+"Opts"].setEnabled(enabled);_this.onValueChanged()}})};FormFieldsControl.prototype.setValue=function(value){var m,i,j,k,field,optionsText;for(k in this.fields){if(!this.fields.hasOwnProperty(k))
continue;if(!(m=(''+k).match(/^formField([0-9]+)Enable$/)))
continue;i=parseInt(m[1],10);field=(value&&value[i])?value[i]:FormFieldsControl.defaultValue[i];this.fields[k].setValue(field.checked!==undefined?field.checked:!1);this.fields[k].trigger('change');this.fields['formField'+i].setValue(field.name!==undefined?field.name:'');if(this.fields.hasOwnProperty('formField'+i+'Required')){this.fields['formField'+i+'Required'].setValue(field.required!==undefined?field.required:!1);this.fields['formField'+i+'Required'].trigger("change")}
if(field.type==='select'){if(typeof field.options==='object'){optionsText={};for(j in field.options){if(field.options.hasOwnProperty(j))
optionsText[j]=field.options[j].split(';').join("\n");}}else{optionsText=field.options!==undefined?field.options.split(';').join("\n"):''}
this.fields['formField'+i+'Opts'].setValue(optionsText)}}};FormFieldsControl.prototype.getValue=function(){var m,i,j,k,field,optionsText;var value=jquery_builder_16.default.extend(!0,{},FormFieldsControl.defaultValue);for(k in this.fields){if(!this.fields.hasOwnProperty(k))
continue;if(!(m=(''+k).match(/^formField([0-9]+)Enable$/)))
continue;i=parseInt(m[1],10);field=value[i];field.checked=this.fields[k].getValue();field.name=this.fields['formField'+i].getValue();if(field.type==="checkbox"){var cleanVal=function(val){if(typeof val!=='string')
return val;return val.replace(/<p[^>]*>/ig,"").replace(/<\/p[^>]*>/ig,"<br /><br />").replace(/\s*(?:(?:<br[^>]*>|&nbsp;)\s*)+$/i,"")};if((typeof field.name==='object')&&field.name){for(var n in field.name)
if(field.name.hasOwnProperty(n))
field.name[n]=cleanVal(field.name[n]);}else{field.name=cleanVal(field.name)}}
if(this.fields.hasOwnProperty('formField'+i+'Required'))
field.required=!!this.fields['formField'+i+'Required'].getValue();if(field.type==='select'){optionsText=this.fields['formField'+i+'Opts'].getValue();if(typeof optionsText==='object'){field.options={};for(j in optionsText)
if(optionsText.hasOwnProperty(j))
field.options[j]=optionsText[j].split("\n").join(';');}else{field.options=optionsText.split("\n").join(';')}}}
return value};FormFieldsControl.supportsMultipleObjectBindings=function(){return!1};FormFieldsControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};FormFieldsControl.defaultValue=[{checked:!0,type:"input",name:__("Name"),options:"",required:!0},{checked:!0,type:"input",name:__("Email"),options:"",required:!0},{checked:!1,type:"input",name:__("Country"),options:"",required:!0},{checked:!1,type:"input",name:__("City"),options:"",required:!0},{checked:!1,type:"input",name:__("Address"),options:"",required:!0},{checked:!1,type:"input",name:__("Your Field"),options:"",required:!0},{checked:!1,type:"input",name:__("Your Field"),options:"",required:!0},{checked:!1,type:"select",name:__("How did you find us?"),options:__("Found on google;Followed link from other site;Friend told me"),required:!0},{checked:!1,type:"select",name:__("Your Question?"),options:__("Yes;No;May be"),required:!0},{checked:!0,type:"textarea",name:__("Message"),options:"",required:!0},{checked:!1,type:"file",name:__("Attachments"),options:"",required:!1},{checked:!1,type:"checkbox",name:__("I want to receive newsletters"),options:"",required:!1},{checked:!1,type:"checkbox",name:__("I agree to the Terms and Conditions"),options:"",required:!0}];return FormFieldsControl}(UIComponent_68.UIComponent))});define("js/elements/form/FormDirectionControl",["require","exports","js/UIComponent","RadioBox","js/VerticalLayout","js/FlowLayout"],function(require,exports,UIComponent_69,RadioBox_4,VerticalLayout_34,FlowLayout_20){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FormDirectionType=exports.FormDirectionControl=void 0;function iconName(icon,name){return'<span class="'+icon+'"></span> '+name}
var FormDirectionControl=(function(_super){__extends(FormDirectionControl,_super);function FormDirectionControl(){var _this=_super.call(this)||this;_this.value=null;_this.vertical=new RadioBox_4.default('',!1,"FormDirectionType").setLabelHtml(iconName('wbico wbico-vertical-layout',__("Vertical"))).onChange(function(v){if(v)
_this.onLayoutChange(FormDirectionType.Vertical);});_this.horizontal=new RadioBox_4.default('',!1,"FormDirectionType").setLabelHtml(iconName('wbico wbico-horizontal-layout',__("Horizontal"))).onChange(function(v){if(v)
_this.onLayoutChange(FormDirectionType.Horizontal);});_this._elem.addClass('wb-flex-layout-ctrl').append(new VerticalLayout_34.VerticalLayout().setSpacing(12).addAllChildren([new FlowLayout_20.FlowLayout().setSpacing(8).addAllChildren([_this.vertical,_this.horizontal,]),]).getElem());return _this}
FormDirectionControl.prototype.buildInit=function(data,fields){};FormDirectionControl.prototype.onLayoutChange=function(layout){if(!this.value)
return;this.value=layout;this.onValueChanged()};FormDirectionControl.prototype.setValue=function(value){this.value=value;this.vertical.setValue(value==FormDirectionType.Vertical);this.horizontal.setValue(value==FormDirectionType.Horizontal)};FormDirectionControl.prototype.getValue=function(){return this.value};FormDirectionControl.supportsMultipleObjectBindings=function(){return!1};FormDirectionControl.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options)};return FormDirectionControl}(UIComponent_69.UIComponent));exports.FormDirectionControl=FormDirectionControl;var FormDirectionType;(function(FormDirectionType){FormDirectionType.Vertical="vertical";FormDirectionType.Horizontal="horizontal"})(FormDirectionType||(exports.FormDirectionType=FormDirectionType={}))});define("js/elements/form/Form",["require","exports","js/jquery-builder","js/Element","js/SizeSelector","js/Service","js/ElementRegister","js/element/PropertyType","js/TextControl","js/CheckBox","js/TextField","js/CommonTypes","js/util/TextUtil","ModeManager","MultilangTextField","URLControl","js/UIButton","js/elements/form/EditFormDialog","js/elements/form/FormInquiries","js/HAlignSelector","js/elements/form/FormButtonStyleControl","js/UIComponent","js/BorderControl","js/BackgroundControl","js/elements/form/FormLabelPositionControl","js/SpacingDialogControl","js/ColorPicker","js/util/StyleUtil","js/elements/form/FormDirectionControl","js/ui/controls/popovers/ShadowDialogControl","js/core/Collaboration","ImagePicker","js/Picture","js/MediaLibrary"],function(require,exports,jquery_builder_17,Element_11,SizeSelector_15,Service_47,ElementRegister_13,PropertyType_7,TextControl_6,CheckBox_10,TextField_9,CommonTypes_19,TextUtil_12,ModeManager_3,MultilangTextField_5,URLControl_5,UIButton_22,EditFormDialog_1,FormInquiries_1,HAlignSelector_5,FormButtonStyleControl_1,UIComponent_70,BorderControl_10,BackgroundControl_10,FormLabelPositionControl_1,SpacingDialogControl_3,ColorPicker_16,StyleUtil_6,FormDirectionControl_1,ShadowDialogControl_6,Collaboration_7,ImagePicker_3,Picture_2,MediaLibrary_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EditFormProperty=new PropertyType_7.PropertyType('form/editFormButton',PropertyType_7.PropertyTypeAccess.User,!1,__('Edit Form'),UIButton_22.UIButton,function(){return new UIButton_22.UIButton('').css({minWidth:'220px',marginLeft:'auto',marginRight:'auto'})});var InquiresProperty=new PropertyType_7.PropertyType('form/inquiresButton',PropertyType_7.PropertyTypeAccess.User,!1,__('Inquires'),UIButton_22.UIButton,function(){return new UIButton_22.UIButton('').css({minWidth:'220px',marginLeft:'auto',marginRight:'auto',marginBottom:'24px'})});var EmailSendTo=new PropertyType_7.PropertyType("form/sendTo",PropertyType_7.PropertyTypeAccess.User,!0,__("Form will be sent to this Email"),TextField_9.TextField,null,{placeholder:'example@yourmail.com',helpText:'<div style="width: 180px;">'+__('You can specify several emails separated by semicolons.')+'</div>',});var EmailSendFrom=new PropertyType_7.PropertyType("form/sendFrom",PropertyType_7.PropertyTypeAccess.User,!0,__("Form will be sent from this Email"),TextField_9.TextField,null,{placeholder:'no-reply@yourmail.com',helpText:'<div style="width: 180px;">'+__('Specify email here if you want the form to be always sent from one email address.')+'<br /><br />'+__('Note: Make sure that domain of specified email address has DNS record of type %sSPF%s. If it does not then you may not receive mails to your inbox.').replace('%s','<a href="https://en.wikipedia.org/wiki/Sender_Policy_Framework" target="_blank">').replace('%s','</a>')+'<br /><br />'+__('You can also specify combination of email and name.')+' '+__('The value must be of the following format: %s').replace('%s',('<br />'+__('Name')+' '+'&lt;'+__('Email')+'&gt;'))+'</div>',});var EmailSubject=new PropertyType_7.PropertyType("form/subject",PropertyType_7.PropertyTypeAccess.User,!0,__("With Subject"),TextField_9.TextField);var EmailSentAlertMessage=new PropertyType_7.PropertyType("form/sentAlertMessage",PropertyType_7.PropertyTypeAccess.User,!0,__("Form sent Message"),MultilangTextField_5.default,null,{helpText:__('Message on the page which appears on successful form sending')});var EnablePostUrl=new PropertyType_7.PropertyType("form/enablePostUrl",PropertyType_7.PropertyTypeAccess.User,!0,__("Submit to URL instead"),CheckBox_10.default,null,{helpText:__('Post form data to this URL instead of sending it via email')});var PostUrl=new PropertyType_7.PropertyType("form/postUrl",PropertyType_7.PropertyTypeAccess.User,!0,"",TextField_9.TextField,null,{placeholder:"http://"});var SubmitButtonText=new PropertyType_7.PropertyType("formButton/submitButtonText",PropertyType_7.PropertyTypeAccess.User,!0,__("Submit button text"),MultilangTextField_5.default);var ButtonTextIcon=new PropertyType_7.PropertyType("formButton/submitButtonText",PropertyType_7.PropertyTypeAccess.User,!1,__("Item icon"),ImagePicker_3.default,function(){return UIComponent_70.UIComponent.wrapControl(new ImagePicker_3.default())},{mode:'image',multiselect:!1,thumbSize:60,mediatabs:!1,fontAwesomeTab:!0,usePictureManager:!1,showTemplateGalleryTab:!1}).inline(6);var BtnIconAlignment=new PropertyType_7.PropertyType("formButton/submitButtonRtl",PropertyType_7.PropertyTypeAccess.User,!0,__('Position'),HAlignSelector_5.HAlignSelector,null,{justify:!1,center:!1},!1).inline(6);var FormRedirectUrl=new PropertyType_7.PropertyType("formButton/formRedirectUrl",PropertyType_7.PropertyTypeAccess.User,!0,__("URL after submit"),URLControl_5.default,function(){return UIComponent_70.UIComponent.wrapControl(new URLControl_5.default())},{multilang:!0,noEmail:!0,noPhone:!0,noFiles:!0,noLinkTitle:!0,noIndexing:!0,noPopup:!0});var BtnTextAlignment=new PropertyType_7.PropertyType("formButton/buttonAlign",PropertyType_7.PropertyTypeAccess.User,!0,__('Align'),HAlignSelector_5.HAlignSelector,null,{},!1);var BtnNewLine=new PropertyType_7.PropertyType("formButton/buttonNewLine",PropertyType_7.PropertyTypeAccess.User,!0,__('Place on the new line'),CheckBox_10.default,null);var BtnFontControl=new PropertyType_7.PropertyType("formButton/buttonFont",PropertyType_7.PropertyTypeAccess.User,!0,__('Font'),TextControl_6.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!0,noSpacing:!1,noStyle:!0,needLineHeight:!0,noColorPicker:!0},!1);var BtnButtonStyle=new PropertyType_7.PropertyType("formButton/style",PropertyType_7.PropertyTypeAccess.User,!0,'',FormButtonStyleControl_1.FormButtonStyleControl,null,{singleBorder:!0,showRadius:!0,useShadows:!0});var FormDirection=new PropertyType_7.PropertyType("form/formDirection",PropertyType_7.PropertyTypeAccess.User,!0,__("Layout"),FormDirectionControl_1.FormDirectionControl);var FieldsFont=new PropertyType_7.PropertyType("formFields/fieldsFont",PropertyType_7.PropertyTypeAccess.User,!0,__('Font'),TextControl_6.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!1,noSpacing:!1,noStyle:!1,needLineHeight:!0,noColorPicker:!1,useJustify:!1},!1);var FieldsBackground=new PropertyType_7.PropertyType("formFields/fieldsBackground",PropertyType_7.PropertyTypeAccess.User,!0,__('Background'),BackgroundControl_10.BackgroundControl,null,{useImage:!1}).inline(6);var FieldsBorder=new PropertyType_7.PropertyType("formFields/fieldsBorder",PropertyType_7.PropertyTypeAccess.User,!0,__('Border'),BorderControl_10.BorderControl,null,{showRadius:!0}).inline(6);var FieldsSpacing=new PropertyType_7.PropertyType("formFields/fieldsSpacing",PropertyType_7.PropertyTypeAccess.User,!0,__('Spacing'),SpacingDialogControl_3.SpacingDialogControl).inline(6);var FieldsShadow=new PropertyType_7.PropertyType("formFields/fieldsShadow",PropertyType_7.PropertyTypeAccess.User,!0,__('Shadow'),ShadowDialogControl_6.ShadowDialogControl).inline(6);var LabelFont=new PropertyType_7.PropertyType("formLabels/font",PropertyType_7.PropertyTypeAccess.User,!0,__("Font"),TextControl_6.TextControl,null,{ttplacement:"top",horizontal:!0,noSize:!1,noAlign:!1,noSpacing:!1,noStyle:!1,needLineHeight:!0,noColorPicker:!1,useJustify:!1,useStyleForLink:!0},!1);var LabelColumnWidthFixed=new PropertyType_7.PropertyType("formLabels/columnWidthFixed",PropertyType_7.PropertyTypeAccess.User,!0,__("Label Column Width"),CheckBox_10.default);var LabelColumnWidth=new PropertyType_7.PropertyType("formLabels/columnWidth",PropertyType_7.PropertyTypeAccess.User,!0,"",SizeSelector_15.SizeSelector,null,{min:1,max:9999,hideSpinner:!0,units:'px'});var LabelPosition=new PropertyType_7.PropertyType("formLabels/labelPosition",PropertyType_7.PropertyTypeAccess.User,!0,__("Position"),FormLabelPositionControl_1.FormLabelPositionControl);var OnsubmitJs=new PropertyType_7.PropertyType("advanced/onsubmitJs",PropertyType_7.PropertyTypeAccess.User,!0,__('onSubmit JS event'),TextField_9.TextField,void 0,{helpText:__('JavaScript code which will be triggered when submitting on the form.')});var UseGclidCapture=new PropertyType_7.PropertyType("advanced/useGclidCapture",PropertyType_7.PropertyTypeAccess.User,!0,__("Capture GCLID identifier"),CheckBox_10.default,null,{helpText:'<a href="https://support.google.com/google-ads/answer/9744275" target="_blank">https://support.google.com/google-ads/answer/9744275</a>'});PropertyType_7.PropertyType.setCategoryName("form",__("Form"));PropertyType_7.PropertyType.setCategoryName("formButton",__("Button"));PropertyType_7.PropertyType.setCategoryName("formFields",__("Fields"));PropertyType_7.PropertyType.setCategoryName("formLabels",__("Labels"));PropertyType_7.PropertyType.setSortOrder('form',10);PropertyType_7.PropertyType.setSortOrder('formButton',21);PropertyType_7.PropertyType.setSortOrder('formFields',32);PropertyType_7.PropertyType.setSortOrder('formLabels',43);function upgradeData(data,styles){data.content.fields=upgradeFields(data.content.fields?data.content.fields:__spreadArray([],Form.defaultValue,!0),data.content.isStore||!1);if('labelStyle' in data.content&&data.content.labelStyle){for(var _i=0,styles_2=styles;_i<styles_2.length;_i++){var style=styles_2[_i];if(style.selector===('.'+data.content.labelStyle)){data.content.labelFont=style.sys.text}}
delete data.content.labelStyle;data.height='auto'}
return data}
function upgradeFields(value,isStore){var _a,_b,_c,_d,_f,_g;if(!value)
return[];var val=[];for(var i in value){var tmp={enabled:value[i].enabled!==undefined?value[i].enabled:value[i].checked,type:value[i].type,name:value[i].name,settings:'settings' in value[i]?value[i].settings:{},default:'default' in value[i]?value[i].default:'',required:value[i].required,};if(value[i]&&('options' in value[i])&&value[i].options){var options=value[i].options||'';var newOptions=[];if(typeof options==='string'){newOptions=options.split(';')}else if(Array.isArray(options)){newOptions=options}else if(typeof options==='object'){newOptions=[];for(var lang in options){var value_5=options[lang];var values=value_5.split(';');for(var idx in values){var item=values[idx];newOptions[idx]=(newOptions[idx]||{});newOptions[idx][lang]=item}}}
tmp.settings=tmp.settings||{};tmp.settings.options=newOptions}
if(((_a=tmp.settings)===null||_a===void 0?void 0:_a.options)&&((_b=tmp.settings)===null||_b===void 0?void 0:_b.options[0])&&typeof((_c=tmp.settings)===null||_c===void 0?void 0:_c.options[0])!=='string'&&(((_d=tmp.settings)===null||_d===void 0?void 0:_d.options[0][0])||((_f=tmp.settings)===null||_f===void 0?void 0:_f.options[0]['0']))){tmp.settings.options=Object.values((_g=tmp.settings)===null||_g===void 0?void 0:_g.options[0])}
tmp=Form.fillDefaultOptions(tmp);tmp.enabled=tmp.enabled===undefined?!0:tmp.enabled;if(tmp.enabled||isStore)
val.push(tmp);}
return val}
var Form=(function(_super){__extends(Form,_super);function Form(data,initial,virtual){if(data===void 0){data={}}
if(initial===void 0){initial=!1}
if(virtual===void 0){virtual=!1}
var _this=_super.call(this,data,initial,virtual)||this;_this.form=null;_this.allStyle=null;_this.mobStyle=null;_this.defaultIsEmailTab=!1;_this._isStore=!1;_this._email="";_this._emailFrom="";_this._subject=__("Email from the site");_this._formSentMessage=__("Form was sent.");_this._maxFileSizeTotal=2;_this._button=__("Submit");_this._buttonAlign='right';_this._labelFont=null;_this._labelPosition=FormLabelPositionControl_1.FormLabelPositionType.Left;_this._labelColWidth=0;_this._formDirection=FormDirectionControl_1.FormDirectionType.Vertical;_this._smtpEnable=!1;_this._smtpHost=null;_this._smtpPort=null;_this._smtpEncryption=null;_this._smtpUsername=null;_this._smtpPassword=null;_this._recVersion=null;_this._recSiteKey=null;_this._recSecretKey=null;_this._useGclidCapture=!1;_this.textStyle=null;_this._enablePostUrl=!1;_this._postUrl='';_this._redirectUrl=null;_this._buttonTextIcon=null;_this._iconRtlEnabled='left';_this._buttonNewLine=!1;_this.onApplyCallback=null;_this.onUpdateStyle=null;var wasRestored=('_restoreId' in data);_this.addLangLabel();data.content=data.content||{};data=upgradeData(data,_this.system.site.styles);_this._formUuid=(data.content&&data.content.formUuid)?data.content.formUuid:HasherUtil.crc32Hex(''+(new Date()).getTime());_this._isStore=data.content.isStore?data.content.isStore:!1;_this.fields=data.content.fields?data.content.fields:[];_this._buttonAlign=data.content.buttonAlign?data.content.buttonAlign:_this._buttonAlign;_this._buttonFont=data.content.buttonFont?data.content.buttonFont:{"color":"#000000","size":14,"font":"Arial,Helvetica,sans-serif","style":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"lineHeight":20,"letterSpacing":0,"textTransform":"none","css":{"font-size":"14px","font-style":"normal","font":"normal normal 14px Arial,Helvetica,sans-serif","font-family":"Arial,Helvetica,sans-serif","color":"#000000","text-decoration":"none","line-height":"20px","text-transform":"none"},};_this._buttonStyle=data.content.buttonStyle?data.content.buttonStyle:{"normal":{"style":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"color":"#333333","bg":{"color":"#ffffff","css":{"background":"#ffffff none repeat left top","opacity":1}},"border":{"differ":!1,"differRadius":!1,"color":["#cccccc","#cccccc","#cccccc","#cccccc"],"style":["solid","solid","solid","solid"],"weight":[1,1,1,1],"css":{"border":"1px solid #cccccc"}},},"hover":{"style":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"color":"#333333","bg":{"color":"#e6e6e6","image":"none","position":"left top","attachment":"scroll","repeat":"repeat","size":"auto auto","fullWidth":!1,"opacity":100,"isVideo":!1,"timeStartAt":null,"timeEndAt":null,"css":{"background":"#e6e6e6 none repeat left top","background-size":"auto auto","opacity":1}}},"active":{"style":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"color":"#333333","bg":{"color":"#e6e6e6","image":"none","position":"left top","attachment":"scroll","repeat":"repeat","size":"auto auto","fullWidth":!1,"opacity":100,"isVideo":!1,"timeStartAt":null,"timeEndAt":null,"css":{"background":"#e6e6e6 none repeat left top","background-size":"auto auto","opacity":1}}}};_this._button=data.content.button?data.content.button:_this._button;_this._buttonNewLine=data.content.buttonNewLine?data.content.buttonNewLine:!1;_this._fieldsShadow=data.content.fieldsShadow?data.content.fieldsShadow:null;_this._fieldsSpacing=data.content.fieldsSpacing?data.content.fieldsSpacing:{scaleFactors:null,spacing:{"sameValues":!1,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"paddingTop":6,"paddingRight":12,"paddingBottom":6,"paddingLeft":12,"css":{"margin":"0px 0px 0px 0px","padding":"6px 12px 6px 12px"}}};_this._fieldsFont=data.content.fieldsFont?data.content.fieldsFont:{color:"#555",size:14,decoration:"none",font:"Arial,sans-serif",style:{},align:CommonTypes_19.Alignment.Left,lineHeight:20,css:{font:"normal normal 14px Arial,sans-serif",color:"#555","text-align":"left","text-decoration":"none","line-height":"20px"}};_this._fieldsBackground=data.content.fieldsBackground?data.content.fieldsBackground:_this._fieldsBackground;_this._fieldsBorder=data.content.fieldsBorder?data.content.fieldsBorder:_this._fieldsBorder;_this._labelFont=data.content.labelFont?data.content.labelFont:{color:"#333333",size:13,decoration:"none",font:"Arial,sans-serif",style:{},align:CommonTypes_19.Alignment.Left,lineHeight:18,css:{font:"normal normal 13px Arial,sans-serif",color:"#333333","text-align":"left","text-decoration":"none","line-height":"18px"},linksTextColor:'#337ab7',linksHoverColor:'#23527c',cssForLinks:{normal:{color:'#337ab7'},hover:{color:'#23527c'}},};_this._labelPosition=data.content.labelPosition?data.content.labelPosition:_this._labelPosition;_this._labelColWidth=data.content.labelColWidth?data.content.labelColWidth:_this._labelColWidth;_this._formDirection=data.content.formDirection?data.content.formDirection:_this._formDirection;_this._email=data.content.email?data.content.email:_this._email;_this._emailFrom=data.content.emailFrom?data.content.emailFrom:_this._emailFrom;_this._subject=data.content.subject?data.content.subject:_this._subject;_this._formSentMessage=data.content.sentMessage?data.content.sentMessage:_this._formSentMessage;var applySmtpDefaults=(!wasRestored&&!data._copy&&!_this.isElementPreview&&(!data.content.smtpHost&&!data.content.smtpPort&&!data.content.smtpUsername&&!data.content.smtpPassword)&&_this.system.formConfig&&(_this.system.formConfig.smtpDefaultHost||_this.system.formConfig.smtpDefaultPort||_this.system.formConfig.smtpDefaultUsername||_this.system.formConfig.smtpDefaultPassword));if(applySmtpDefaults){_this._smtpEnable=_this.system.formConfig.smtpDefaultEnabled;_this._smtpHost=_this.system.formConfig.smtpDefaultHost;_this._smtpPort=_this.system.formConfig.smtpDefaultPort;_this._smtpEncryption=_this.system.formConfig.smtpDefaultEncryption;_this._smtpUsername=_this.system.formConfig.smtpDefaultUsername;_this._smtpPassword=_this.system.formConfig.smtpDefaultPassword}else{_this._smtpEnable=data.content.smtpEnable?data.content.smtpEnable:!1;_this._smtpHost=data.content.smtpHost?data.content.smtpHost:null;_this._smtpPort=data.content.smtpPort?data.content.smtpPort:null;_this._smtpEncryption=data.content.smtpEncryption?data.content.smtpEncryption:null;_this._smtpUsername=data.content.smtpUsername?data.content.smtpUsername:null;_this._smtpPassword=data.content.smtpPassword?data.content.smtpPassword:null}
_this._useGclidCapture=data.content.useGclidCapture?data.content.useGclidCapture:!1;_this._recVersion=data.content.recVersion?data.content.recVersion:'v2';_this._recSiteKey=data.content.recSiteKey?data.content.recSiteKey:null;_this._recSecretKey=data.content.recSecretKey?data.content.recSecretKey:null;_this._maxFileSizeTotal=data.content.maxFileSizeTotal?data.content.maxFileSizeTotal:2;_this._enablePostUrl=!!data.content.enablePostUrl;_this._postUrl=data.content.postUrl?data.content.postUrl:'';_this._redirectUrl=data.content.redirectUrl?data.content.redirectUrl:null;_this._buttonTextIcon=data.content.buttonTextIcon?data.content.buttonTextIcon:null;if(_this._buttonTextIcon&&typeof _this._buttonTextIcon==='object'){_this._buttonTextIcon=(0,MediaLibrary_6.getFontIconProperty)(_this._buttonTextIcon)}
if(typeof data.content.iconRtlEnabled==='string'){_this._iconRtlEnabled=data.content.iconRtlEnabled}else if(typeof data.content.iconRtlEnabled==='boolean'){_this._iconRtlEnabled=data.content.iconRtlEnabled?'right':'left'}else{_this._iconRtlEnabled='left'}
_this.textStyle=data.content.textStyle?data.content.textStyle:{color:"#333333",size:13,decoration:"none",font:"Arial,sans-serif",style:{},align:"left",lineHeight:18,css:{font:"normal normal 13px Arial,sans-serif",color:"#333333","text-align":"left","text-decoration":"none","line-height":"18px"}};_this._onsubmitJs=data.content.onsubmitJs?data.content.onsubmitJs:null;_this.updateStyle(!0);return _this}
Object.defineProperty(Form.prototype,"fields",{get:function(){return this._fields||[]},set:function(value){this._fields=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"isStore",{get:function(){return this._isStore},set:function(value){this._isStore=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"email",{get:function(){return this._email},set:function(value){this._email=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"emailFrom",{get:function(){return this._emailFrom},set:function(value){this._emailFrom=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"subject",{get:function(){return this._subject},set:function(value){this._subject=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"formSentMessage",{get:function(){return this._formSentMessage},set:function(value){this._formSentMessage=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"maxFileSizeTotal",{get:function(){return this._maxFileSizeTotal},set:function(value){this._maxFileSizeTotal=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"button",{get:function(){return this._button},set:function(value){this._button=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"buttonAlign",{get:function(){return this._buttonAlign},set:function(value){this._buttonAlign=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"buttonFont",{get:function(){return this._buttonFont},set:function(value){this._buttonFont=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(value){this._buttonStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"fieldsShadow",{get:function(){return this._fieldsShadow},set:function(value){this._fieldsShadow=(value&&Object.keys(value).length)?value:null},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"fieldsSpacing",{get:function(){return this._fieldsSpacing},set:function(value){this._fieldsSpacing=(value&&Object.keys(value).length)?value:{scaleFactors:null,spacing:{"sameValues":!1,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"paddingTop":6,"paddingRight":12,"paddingBottom":6,"paddingLeft":12,"css":{"margin":"0px 0px 0px 0px","padding":"6px 12px 6px 12px"}}}},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"fieldsFont",{get:function(){return this._fieldsFont},set:function(value){this._fieldsFont=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"fieldsBackground",{get:function(){return this._fieldsBackground},set:function(value){this._fieldsBackground=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"fieldsBorder",{get:function(){return this._fieldsBorder},set:function(value){this._fieldsBorder=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"labelFont",{get:function(){return this._labelFont},set:function(value){this._labelFont=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(value){this._labelPosition=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"labelColWidth",{get:function(){return this._labelColWidth},set:function(value){this._labelColWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"labelColWidthFixed",{get:function(){return!!this._labelColWidth},set:function(value){if(value){if(!this._labelColWidth)
this._labelColWidth=200}else this._labelColWidth=0},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"formDirection",{get:function(){return this._formDirection},set:function(value){var _a,_b,_c,_d;this._formDirection=value;if(value===FormDirectionControl_1.FormDirectionType.Horizontal){if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left)
this.labelPosition=FormLabelPositionControl_1.FormLabelPositionType.Above;this.fieldsSpacing=this.fieldsSpacing||{spacing:null,scaleFactors:null};this.fieldsSpacing.spacing=this.fieldsSpacing.spacing||{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};if(!((_a=this.fieldsSpacing.spacing)===null||_a===void 0?void 0:_a.marginLeft)||((_b=this.fieldsSpacing.spacing)===null||_b===void 0?void 0:_b.marginLeft)<10){this.fieldsSpacing.spacing.marginLeft=10}
if(!((_c=this.fieldsSpacing.spacing)===null||_c===void 0?void 0:_c.marginRight)||((_d=this.fieldsSpacing.spacing)===null||_d===void 0?void 0:_d.marginRight)<10){this.fieldsSpacing.spacing.marginRight=10}}},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpEnable",{get:function(){return this._smtpEnable},set:function(value){this._smtpEnable=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpHost",{get:function(){return this._smtpHost},set:function(value){this._smtpHost=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpPort",{get:function(){return this._smtpPort},set:function(value){this._smtpPort=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpEncryption",{get:function(){return this._smtpEncryption},set:function(value){this._smtpEncryption=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpUsername",{get:function(){return this._smtpUsername},set:function(value){this._smtpUsername=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"smtpPassword",{get:function(){return this._smtpPassword},set:function(value){this._smtpPassword=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"recVersion",{get:function(){return this._recVersion||'v2'},set:function(value){this._recVersion=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"recSiteKey",{get:function(){return this._recSiteKey},set:function(value){this._recSiteKey=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"recSecretKey",{get:function(){return this._recSecretKey},set:function(value){this._recSecretKey=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"useGclidCapture",{get:function(){return this._useGclidCapture},set:function(value){this._useGclidCapture=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"enablePostUrl",{get:function(){return this._enablePostUrl},set:function(value){this._enablePostUrl=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"postUrl",{get:function(){return this._postUrl},set:function(value){this._postUrl=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"redirectUrl",{get:function(){return this._redirectUrl},set:function(value){this._redirectUrl=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"buttonTextIcon",{get:function(){return this._buttonTextIcon},set:function(value){this._buttonTextIcon=value;if(!!this._buttonTextIcon){(0,jquery_builder_17.default)('div[data-property-type="formButton/submitButtonRtl"]').show()}else{(0,jquery_builder_17.default)('div[data-property-type="formButton/submitButtonRtl"]').hide()}},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"iconRtlEnabled",{get:function(){return this._iconRtlEnabled},set:function(value){this._iconRtlEnabled=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"buttonNewLine",{get:function(){return this._buttonNewLine},set:function(value){this._buttonNewLine=value},enumerable:!1,configurable:!0});Object.defineProperty(Form.prototype,"onsubmitJs",{get:function(){return this._onsubmitJs},set:function(value){this._onsubmitJs=value},enumerable:!1,configurable:!0});Form.prototype.getDataDefaults=function(){return jquery_builder_17.default.extend(_super.prototype.getDataDefaults.call(this),{width:350,height:'auto',minWidth:200,minHeight:72})};Form.prototype.getIcon=function(){return'fa fa-list-alt'};Form.prototype.supportsAutoWidth=function(){return!0};Form.prototype.supportsAutoHeight=function(){return!0};Form.prototype.recheckInactive=function(){};Form.prototype.getUsedFonts=function(){var items=_super.prototype.getUsedFonts.call(this);if(this.textStyle&&this.textStyle.font&&this.textStyle.font!=="")
items.push(this.textStyle.font);if(this._buttonFont&&this._buttonFont.font&&this._buttonFont.font!=="")
items.push(this._buttonFont.font);if(this._fieldsFont&&this._fieldsFont.font&&this._fieldsFont.font!=="")
items.push(this._fieldsFont.font);if(this._labelFont&&this._labelFont.font&&this._labelFont.font!=="")
items.push(this._labelFont.font);return items};Form.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.content={isStore:this.isStore,labelColWidth:this.labelColWidth,fieldsWidth:this.container.find('input[type=text],input[type=file],select,textarea').outerWidth(),formUuid:this._formUuid,fields:this.fields,button:this.button,buttonAlign:this.buttonAlign,buttonFont:this.buttonFont,buttonStyle:this.buttonStyle,buttonNewLine:this.buttonNewLine,fieldsShadow:this.fieldsShadow,fieldsSpacing:this.fieldsSpacing,fieldsFont:this.fieldsFont,fieldsBackground:this.fieldsBackground,fieldsBorder:this.fieldsBorder,email:this.email,emailFrom:this.emailFrom,subject:this.subject,sentMessage:this.formSentMessage,smtpEnable:this.smtpEnable,smtpHost:this.smtpHost,smtpPort:this.smtpPort,smtpEncryption:this.smtpEncryption,smtpUsername:this.smtpUsername,smtpPassword:this.smtpPassword,recVersion:this.recVersion,recSiteKey:this.recSiteKey,recSecretKey:this.recSecretKey,maxFileSizeTotal:this.maxFileSizeTotal,textStyle:this.textStyle,labelFont:this.labelFont,labelPosition:this.labelPosition,formDirection:this.formDirection,enablePostUrl:this.enablePostUrl,postUrl:this.postUrl,redirectUrl:this.redirectUrl,timestamp:(new Date()).getTime(),useGclidCapture:this.useGclidCapture,buttonTextIcon:this.buttonTextIcon,iconRtlEnabled:this.iconRtlEnabled==='right',onsubmitJs:this.onsubmitJs,};return data};Form.prototype.switchMode=function(fromMode,toMode,initial,manual){if(initial===void 0){initial=!1}
if(manual===void 0){manual=!1}
_super.prototype.switchMode.call(this,fromMode,toMode,initial,manual);if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left&&toMode===ModeManager_3.default.MODE_PHONE){var formId='wb_'+this.id+'_form';if(!this.mobStyle){this.mobStyle=(0,jquery_builder_17.default)('<style type="text/css">'+'#'+formId+' table td, #'+formId+' table th, #'+formId+' table tr { display: block; height: auto!important; } '+'#'+formId+' table th { width: 100%!important; white-space: normal !important; } '+'#'+formId+' table td { width: 100%!important; } '+'#'+formId+' table td .checkbox-label input { width: auto!important; }'+'#'+formId+' table > tbody { display: flex; flex-direction: column; height: 100%; }'+'#'+formId+' table > tbody > tr { flex-grow: 1; }'+'#'+formId+' table > tbody > tr.area-row { display: flex;flex-grow: 100;flex-direction: column; }'+'#'+formId+' table > tbody > tr.area-row > th { flex-grow: 1; }'+'#'+formId+' table > tbody > tr.area-row > td { flex-grow: 1000; }'+'</style>')}
if(this.form){this.form.attr('id',formId);this.form.prepend(this.mobStyle)}}else{if(this.mobStyle)
this.mobStyle.detach();}};Form.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(!this.name||useType){return __('Form')}
return _super.prototype.getName.call(this)};Form.prototype.setDefaultIsEmailTab=function(defaultIsEmailTab){this.defaultIsEmailTab=defaultIsEmailTab};Form.prototype.updateStyle=function(initial,langCode){var _a,_b,_c,_d,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27,_28,_29,_30,_31,_32,_33,_34,_35,_36,_37,_38,_39,_40,_41,_42,_43,_44,_45,_46,_47,_48,_49,_50,_51,_52;if(initial===void 0){initial=!1}
_super.prototype.updateStyle.call(this,initial,langCode);var builderApi=Service_47.default.uiManager.getApiInstance();langCode=langCode||this.system.site.currSelLang;var html,field,i,w,h,fld,isFlex;if(!this.form){this.form=(0,jquery_builder_17.default)('<form class="wb_form"></form>');this.form.bind("submit",function(){return!1});this.form.css({width:"100%",height:"100%"});this.container.append(this.form)}
var isRtl=langCode?this.system.site.isRtlLang(langCode):this.system.site.rtl;if(isRtl){this.form.removeClass('wb_form_ltr');this.form.addClass('wb_form_rtl')}else{this.form.removeClass('wb_form_rtl');this.form.addClass('wb_form_ltr')}
this.form.empty();html="";html+='<table>';var countFields=0;for(i=0;i<this.fields.length;i++){field=this.fields[i];if(!field||!field.enabled)
continue;w=this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left?(this.labelColWidth?(' width: '+this.labelColWidth+'px; white-space: normal;'):''):' width: 100%;';h=(field.type==='textarea')?'':' height: 1%;';fld="";isFlex=!1;var hideName=!1;var opts=[];var placeholder=jquery_builder_17.default.trim(__tr(field.default||'',langCode));if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.AsPlaceholder){var placeholderW=(0,jquery_builder_17.default)('<div>').html(jquery_builder_17.default.trim(__tr(field.name||'',langCode)));placeholder=placeholderW.text()}
switch(field.type){case "input":opts=[];if((_a=field.settings)===null||_a===void 0?void 0:_a.lengthMax)
opts.push('maxlength="'+field.settings.lengthMax+'"');if((_b=field.settings)===null||_b===void 0?void 0:_b.lengthMin)
opts.push('minlength="'+field.settings.lengthMin+'"');fld+='<input type="text" class="form-control form-field" value="" placeholder="'+placeholder+'" '+opts.join(' ')+'/>';break;case "select":fld+='<select class="form-control form-field">';opts=(field.settings&&field.settings.options)?field.settings.options:[];fld+='<option selected disabled>'+placeholder+'</option>';for(var j=0;j<opts.length;j++)
if(jquery_builder_17.default.trim(__tr(opts[j],langCode)).length>1){fld+='<option>'+jquery_builder_17.default.trim(__tr(opts[j],langCode)).replace("<","&lt;").replace(">","&gt;")+'</option>'}
fld+='</select>';break;case "textarea":opts=[];if((_c=field.settings)===null||_c===void 0?void 0:_c.textareaRow)
opts.push('rows="'+field.settings.textareaRow+'"');fld+='<textarea class="form-control form-field" placeholder="'+placeholder+'" '+opts.join(' ')+'></textarea>';isFlex=!0;break;case "file":fld+='<div class="form-file-wrapper">';fld+='<input class="form-control form-field" type="file" multiple="multiple" />';if((_d=field.settings)===null||_d===void 0?void 0:_d.fileMaxSize){fld+='<p>'+__tr(builderApi.getTranslation('Max file size (Mb): %s'),langCode||((_f=builderApi.getLanguage())===null||_f===void 0?void 0:_f.code)||'en').replace('%s',String((_g=field.settings)===null||_g===void 0?void 0:_g.fileMaxSize))+'</p>'}
if(!((_h=field.settings)===null||_h===void 0?void 0:_h.fileMultiple)){fld+='<p>'+__tr(builderApi.getTranslation('Max number of files: 1'),langCode||((_j=builderApi.getLanguage())===null||_j===void 0?void 0:_j.code)||'en')+'</p>'}
fld+='</div';break;case "checkbox":opts=(field.settings&&field.settings.options)?field.settings.options:[];if(opts.length<=0||(opts.length===1&&__tr(opts[0],langCode).length===0)){fld+='<div>';hideName=!0;fld+='<label class="checkbox-label"><input type="checkbox" class="form-control form-field" value="1" /> '+jquery_builder_17.default.trim(__tr(field.name,langCode)||'')+(field.required?'<span class="text-danger">&nbsp;*</span>':'')+'</label>'}else{var inline=((_k=field.settings)===null||_k===void 0?void 0:_k.layout)!=='vertical';fld+='<div class="checkbox-inline-group">';for(var j=0;j<opts.length;j++){if(jquery_builder_17.default.trim(__tr(opts[j],langCode)).length>0){fld+='<label class="'+(inline?'checkbox-inline':'checkbox-label')+'"><input type="checkbox" class="'+(inline?'':'form-control form-field')+'" value="1" /> '+(0,TextUtil_12.escapeHtmlChars)(jquery_builder_17.default.trim(__tr(opts[j],langCode)))+'</label>'}}}
fld+='</div>';break;case "radiobox":var inline=((_l=field.settings)===null||_l===void 0?void 0:_l.layout)!=='vertical';if(inline)
fld+='<div class="radio-inline-group">';else fld+='<div>';opts=(field.settings&&field.settings.options)?field.settings.options:[];for(var j=0;j<opts.length;j++){if(jquery_builder_17.default.trim(__tr(opts[j],langCode)).length>0){fld+='<label class="'+(inline?'radio-inline':'radio-label')+'"><input type="radio" class="'+(inline?'':'form-control form-field')+'" value="1" /> '+(0,TextUtil_12.escapeHtmlChars)(jquery_builder_17.default.trim(__tr(opts[j],langCode)))+'</label>'}}
fld+='</div>';break;case "number":opts=[];if((_m=field.settings)===null||_m===void 0?void 0:_m.numberMax)
opts.push('max="'+field.settings.numberMax+'"');if((_o=field.settings)===null||_o===void 0?void 0:_o.numberMin)
opts.push('min="'+field.settings.numberMin+'"');if((_p=field.settings)===null||_p===void 0?void 0:_p.numberStep)
opts.push('step="'+field.settings.numberStep+'"');fld+='<input type="number" class="form-control form-field" value="" placeholder="'+placeholder+'" '+opts.join(' ')+'/>';break;case "phone":fld+='<input type="text" class="form-control form-field" value="" placeholder="'+placeholder+'"/>';break;case "email":fld+='<input type="email" class="form-control form-field" value="" placeholder="'+placeholder+'"/>';break;case "date":var dateType=((_q=field.settings)===null||_q===void 0?void 0:_q.dateUseDate)&&((_r=field.settings)===null||_r===void 0?void 0:_r.dateUseTime)?'datetime-local':(((_s=field.settings)===null||_s===void 0?void 0:_s.dateUseDate)?'date':'time');fld+='<input type="'+dateType+'" class="form-control form-field" value="" min="'+((_t=field.settings)===null||_t===void 0?void 0:_t.dateMin)+'" max="'+((_u=field.settings)===null||_u===void 0?void 0:_u.dateMax)+'"/>';break;case "hidden":fld+='<input type="hidden" value="" />';continue;case "range":opts=[];fld+='<div class="form-range-field"><div>';if((_v=field.settings)===null||_v===void 0?void 0:_v.rangeFromMax)
opts.push('max="'+field.settings.rangeFromMax+'"');if((_w=field.settings)===null||_w===void 0?void 0:_w.rangeFromMin)
opts.push('min="'+field.settings.rangeFromMin+'"');if((_x=field.settings)===null||_x===void 0?void 0:_x.rangeFromStep)
opts.push('step="'+field.settings.rangeFromStep+'"');fld+='<input type="number" class="form-control form-field" value="" placeholder="'+placeholder+'" '+opts.join(' ')+'/>';fld+='</div><div>';fld+=' - ';fld+='</div><div>';opts=[];if((_y=field.settings)===null||_y===void 0?void 0:_y.rangeToMax)
opts.push('max="'+field.settings.rangeToMax+'"');if((_z=field.settings)===null||_z===void 0?void 0:_z.rangeToMin)
opts.push('min="'+field.settings.rangeToMin+'"');if((_0=field.settings)===null||_0===void 0?void 0:_0.rangeToStep)
opts.push('step="'+field.settings.rangeToStep+'"');fld+='<input type="number" class="form-control form-field" value="" placeholder="'+placeholder+'" '+opts.join(' ')+'/>';fld+='</div></div>';break}
var label=(field.name?__tr(field.name,langCode):'');if(field.type!=='checkbox'&&field.type!=='radiobox'){label=(0,TextUtil_12.escapeHtmlChars)(label)}
if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.AsPlaceholder){label=''}else if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left){label='<th style="'+h+w+'">'+((hideName)?'':(label+(field.required?'<span class="text-danger">&nbsp;*</span>':'')));'</th>'}else if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Above||field.type==='checkbox'||field.type==='radiobox'){label='<th style="'+h+w+'">'+((hideName)?'':(label+(field.required?'<span class="text-danger">&nbsp;*</span>':'')))+'</th>'}
html+='<tr'+(isFlex?' class="area-row"':'')+'>'+label+'<td style="'+h+'"><div>'+fld+'</div></td>'+'</tr>';countFields++}
if(this.recSiteKey&&this.recSecretKey&&this.recVersion==='v2'){html+='<tr>'+'<th style="height: 1%;">&nbsp;</th>'+'<td style="height: 1%;"><div class="wb-recaptcha-placeholder"><span>'+__tr(builderApi.getTranslation("I'm not a robot"),langCode||((_1=builderApi.getLanguage())===null||_1===void 0?void 0:_1.code)||'en')+'</span></div></td>'+'</tr>'}
var buttonColspan=2;if(this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal){buttonColspan=1}
var buttonIcon='';var icon=(0,MediaLibrary_6.getFontIconProperty)(this.buttonTextIcon);if(icon){var size=(this===null||this===void 0?void 0:this.buttonFont)?this.buttonFont.size+'px':'14px';Picture_2.Picture.createFontAwesomeIconSVG(icon,function(svg,icon){svg.css({display:'inline-block',verticalAlign:'middle',position:'relative',top:'-1px',height:'1em',width:'1em'});buttonIcon=svg[0].outerHTML})}
var buttonNewLine='';if(this.buttonNewLine===!0&&this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal){buttonNewLine='btn-new-line'}
html+='<tr class="'+buttonNewLine+'">'+(buttonColspan===1?'<th></th>':'')+'<td colspan="'+buttonColspan+'" class="text-'+this.buttonAlign+'">'+'<button type="submit" class="btn btn-default">'+(this._iconRtlEnabled==='right'?'':buttonIcon+' ')+(0,TextUtil_12.escapeHtml)(__tr(this.button,langCode))+(this._iconRtlEnabled==='right'?' '+buttonIcon:'')+'</button>'+'</td>'+'</tr>'+'</table>';this.form.append(html);this.form.css({width:"100%",height:"100%"});var button=(0,jquery_builder_17.default)('[type="submit"]',this.form);if(this.buttonFont){button.css((0,HAlignSelector_5.convertCssTextAlignByCurLocale)(this.buttonFont.css?this.buttonFont.css:{}));if(this.buttonFont.cssScaleFactors&&this.buttonFont.cssScaleFactors[Service_47.default.modeManager.getMode()]){button.css((0,HAlignSelector_5.convertCssTextAlignByCurLocale)(this.buttonFont.cssScaleFactors[Service_47.default.modeManager.getMode()]))}}
if(this.buttonStyle){button.css(((_2=this.buttonStyle.normal.shadow)===null||_2===void 0?void 0:_2.css)?this.buttonStyle.normal.shadow.css:{});button.css(((_3=this.buttonStyle.normal.bg)===null||_3===void 0?void 0:_3.css)?this.buttonStyle.normal.bg.css:{});button.css(((_4=this.buttonStyle.normal.border)===null||_4===void 0?void 0:_4.css)?this.buttonStyle.normal.border.css:{});button.css({'color':this.buttonStyle.normal.color?this.buttonStyle.normal.color:''});button.css(((_5=this.buttonStyle.normal.corners)===null||_5===void 0?void 0:_5.css)?this.buttonStyle.normal.corners.css:{});button.css(((_6=this.buttonStyle.normal.style)===null||_6===void 0?void 0:_6.css)?this.buttonStyle.normal.style.css:{});var factor=1;if(((_7=this.buttonStyle.normal.spacing)===null||_7===void 0?void 0:_7.scaleFactors)&&((_8=this.buttonStyle.normal.spacing)===null||_8===void 0?void 0:_8.scaleFactors)[Service_47.default.modeManager.getMode()]){factor=((_9=this.buttonStyle.normal.spacing)===null||_9===void 0?void 0:_9.scaleFactors)[Service_47.default.modeManager.getMode()]/100}
var spacing={paddingTop:((_11=(_10=this.buttonStyle.normal.spacing)===null||_10===void 0?void 0:_10.spacing)===null||_11===void 0?void 0:_11.paddingTop)?Math.round(((_13=(_12=this.buttonStyle.normal.spacing)===null||_12===void 0?void 0:_12.spacing)===null||_13===void 0?void 0:_13.paddingTop)*factor):'0',paddingRight:((_15=(_14=this.buttonStyle.normal.spacing)===null||_14===void 0?void 0:_14.spacing)===null||_15===void 0?void 0:_15.paddingRight)?Math.round(((_17=(_16=this.buttonStyle.normal.spacing)===null||_16===void 0?void 0:_16.spacing)===null||_17===void 0?void 0:_17.paddingRight)*factor):'0',paddingBottom:((_19=(_18=this.buttonStyle.normal.spacing)===null||_18===void 0?void 0:_18.spacing)===null||_19===void 0?void 0:_19.paddingBottom)?Math.round(((_21=(_20=this.buttonStyle.normal.spacing)===null||_20===void 0?void 0:_20.spacing)===null||_21===void 0?void 0:_21.paddingBottom)*factor):'0',paddingLeft:((_23=(_22=this.buttonStyle.normal.spacing)===null||_22===void 0?void 0:_22.spacing)===null||_23===void 0?void 0:_23.paddingLeft)?Math.round(((_25=(_24=this.buttonStyle.normal.spacing)===null||_24===void 0?void 0:_24.spacing)===null||_25===void 0?void 0:_25.paddingLeft)*factor):'0',marginTop:((_27=(_26=this.buttonStyle.normal.spacing)===null||_26===void 0?void 0:_26.spacing)===null||_27===void 0?void 0:_27.marginTop)?Math.round(((_29=(_28=this.buttonStyle.normal.spacing)===null||_28===void 0?void 0:_28.spacing)===null||_29===void 0?void 0:_29.marginTop)*factor):'0',marginRight:((_31=(_30=this.buttonStyle.normal.spacing)===null||_30===void 0?void 0:_30.spacing)===null||_31===void 0?void 0:_31.marginRight)?Math.round(((_33=(_32=this.buttonStyle.normal.spacing)===null||_32===void 0?void 0:_32.spacing)===null||_33===void 0?void 0:_33.marginRight)*factor):'0',marginBottom:((_35=(_34=this.buttonStyle.normal.spacing)===null||_34===void 0?void 0:_34.spacing)===null||_35===void 0?void 0:_35.marginBottom)?Math.round(((_37=(_36=this.buttonStyle.normal.spacing)===null||_36===void 0?void 0:_36.spacing)===null||_37===void 0?void 0:_37.marginBottom)*factor):'0',marginLeft:((_39=(_38=this.buttonStyle.normal.spacing)===null||_38===void 0?void 0:_38.spacing)===null||_39===void 0?void 0:_39.marginLeft)?Math.round(((_41=(_40=this.buttonStyle.normal.spacing)===null||_40===void 0?void 0:_40.spacing)===null||_41===void 0?void 0:_41.marginLeft)*factor):'0',};button.css(spacing)}
this.form.append((0,jquery_builder_17.default)('<style type="text/css">[data-id='+this.id+'] input::placeholder, [data-id='+this.id+'] textarea::placeholder { color: inherit; opacity: 0.8; }</style>'));(0,jquery_builder_17.default)(['input','textarea','select'].join(','),this.form).css((0,HAlignSelector_5.convertCssTextAlignByCurLocale)(this.fieldsFont&&this.fieldsFont.css?this.fieldsFont.css:{}));var formId='wb_'+this.id+'_form';if(!this.allStyle){this.allStyle=(0,jquery_builder_17.default)('<style type="text/css"></style>')}
this.allStyle.html('#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-text,'+'#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-minutes-field,'+'#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-hour-field,'+'#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-day-field,'+'#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-month-field,'+'#'+formId+' input[type="datetime-local"]::-webkit-datetime-edit-year-field,'+'#'+formId+' input[type="datetime-local"]::-webkit-inner-spin-button,'+'#'+formId+' input[type="date"]::-webkit-datetime-edit-text,'+'#'+formId+' input[type="date"]::-webkit-datetime-edit-day-field,'+'#'+formId+' input[type="date"]::-webkit-datetime-edit-month-field,'+'#'+formId+' input[type="date"]::-webkit-datetime-edit-year-field,'+'#'+formId+' input[type="date"]::-webkit-inner-spin-button,'+'#'+formId+' input[type="time"]::-webkit-datetime-edit-text,'+'#'+formId+' input[type="time"]::-webkit-datetime-edit-minutes-field,'+'#'+formId+' input[type="time"]::-webkit-datetime-edit-hour-field'+' { '+(0,StyleUtil_6.stringifyCss)(((_42=this.fieldsFont)===null||_42===void 0?void 0:_42.css)||{})+' }'+"\n"+'#'+formId+' input[type="datetime-local"]::-webkit-calendar-picker-indicator,'+'#'+formId+' input[type="date"]::-webkit-calendar-picker-indicator'+' { background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 24 24"><path fill="%23'+ColorPicker_16.ColorPicker.colorObjectToText(ColorPicker_16.ColorPicker.colorTextToObject(((_43=this.fieldsFont)===null||_43===void 0?void 0:_43.color)||'#000000')).replace('#','')+'" d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"/></svg>\')'+' }'+"\n"+'#'+formId+' input[type="time"]::-webkit-calendar-picker-indicator'+' { background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 24 24"><path fill="%23'+ColorPicker_16.ColorPicker.colorObjectToText(ColorPicker_16.ColorPicker.colorTextToObject(((_44=this.fieldsFont)===null||_44===void 0?void 0:_44.color)||'#000000')).replace('#','')+'" d="M12 20C16.4 20 20 16.4 20 12S16.4 4 12 4 4 7.6 4 12 7.6 20 12 20M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M15.3 16.2L14 17L11 11.8V7H12.5V11.4L15.3 16.2Z"></path></svg>\')'+' }'+"\n");if(this.form)
this.form.attr('id',formId);this.form.prepend(this.allStyle);(0,jquery_builder_17.default)('input, textarea, select',this.form).css(this.fieldsBackground&&this.fieldsBackground.css?this.fieldsBackground.css:{});(0,jquery_builder_17.default)('input, textarea, select',this.form).css(this.fieldsBorder&&this.fieldsBorder.css?this.fieldsBorder.css:{});this.form.removeClass('wb_vertical_form wb_mob_form wb_placeholder_form');if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Above)
this.form.addClass('wb_vertical_form');if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left)
this.form.addClass('wb_mob_form');if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.AsPlaceholder)
this.form.addClass('wb_placeholder_form wb_vertical_form');this.form.removeClass('wb_form_vertical wb_form_horizontal');if(this.formDirection===FormDirectionControl_1.FormDirectionType.Vertical)
this.form.addClass('wb_form_vertical');if(this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal)
this.form.addClass('wb_form_horizontal');if(this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal&&countFields===1)
this.form.addClass('inline');if(this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left&&Service_47.default.modeManager.getMode()===ModeManager_3.default.MODE_PHONE){if(!this.mobStyle){this.mobStyle=(0,jquery_builder_17.default)('<style type="text/css">'+'#'+formId+' table td, #'+formId+' table th, #'+formId+' table tr { display: block; height: auto!important; } '+'#'+formId+' table th { width: 100%!important; white-space: normal !important; } '+'#'+formId+' table td { width: 100%!important; } '+'#'+formId+' table td .checkbox-label input { width: auto!important; }'+'#'+formId+' table > tbody { display: flex; flex-direction: column; height: 100%; }'+'#'+formId+' table > tbody > tr { flex-grow: 1; }'+'#'+formId+' table > tbody > tr.area-row { display: flex;flex-grow: 100;flex-direction: column; }'+'#'+formId+' table > tbody > tr.area-row > th { flex-grow: 1; }'+'#'+formId+' table > tbody > tr.area-row > td { flex-grow: 1000; }'+'</style>')}
if(this.form)
this.form.prepend(this.mobStyle);}else{if(this.mobStyle)
this.mobStyle.detach();}
this.form.css((this.textStyle&&this.textStyle.css)||{});if(this.labelFont){var labels=(0,jquery_builder_17.default)("th, th > div, .checkbox-label, .checkbox-inline, .radio-label, .radio-inline, .form-file-wrapper p",this.form);labels.css((0,HAlignSelector_5.convertCssTextAlignByCurLocale)(this.labelFont.css?this.labelFont.css:{}));if(this.labelFont.cssScaleFactors&&this.labelFont.cssScaleFactors[Service_47.default.modeManager.getMode()]){labels.css((0,HAlignSelector_5.convertCssTextAlignByCurLocale)(this.labelFont.cssScaleFactors[Service_47.default.modeManager.getMode()]))}
var labelsLinks=(0,jquery_builder_17.default)('a',this.form);if(this.labelFont.cssForLinks&&this.labelFont.cssForLinks.normal)
labelsLinks.css(this.labelFont.cssForLinks.normal);}
if(this.fieldsShadow&&this.fieldsShadow.css&&this.fieldsShadow.css.boxShadow){var selectors=['tr td > div input','tr td > div textarea','tr td > div select',];(0,jquery_builder_17.default)(selectors.join(','),this.form).css({boxShadow:this.fieldsShadow.css.boxShadow})}
if(this.fieldsShadow&&this.fieldsShadow.css&&this.fieldsShadow.css['box-shadow']){var selectors=['tr td > div input','tr td > div textarea','tr td > div select',];(0,jquery_builder_17.default)(selectors.join(','),this.form).css({boxShadow:this.fieldsShadow.css['box-shadow']})}
if(this.fieldsSpacing){var factor=1;if(this.fieldsSpacing.scaleFactors&&this.fieldsSpacing.scaleFactors[Service_47.default.modeManager.getMode()]){factor=this.fieldsSpacing.scaleFactors[Service_47.default.modeManager.getMode()]/100}
var selectors=['tr td > div input[type="text"]','tr td > div input[type="number"]','tr td > div input[type="file"]','tr td > div input[type="datetime-local"]','tr td > div input[type="date"]','tr td > div input[type="time"]','tr td > div input[type="tel"]','tr td > div input[type="email"]','tr td > div textarea','tr td > div select',];(0,jquery_builder_17.default)(selectors.join(','),this.form).css({paddingTop:Math.round((((_45=this.fieldsSpacing.spacing)===null||_45===void 0?void 0:_45.paddingTop)||0)*factor),paddingBottom:Math.round((((_46=this.fieldsSpacing.spacing)===null||_46===void 0?void 0:_46.paddingBottom)||0)*factor),paddingLeft:Math.round((((_47=this.fieldsSpacing.spacing)===null||_47===void 0?void 0:_47.paddingLeft)||0)*factor),paddingRight:Math.round((((_48=this.fieldsSpacing.spacing)===null||_48===void 0?void 0:_48.paddingRight)||0)*factor),});(0,jquery_builder_17.default)("tr",this.form).css({borderTop:Math.round((((_49=this.fieldsSpacing.spacing)===null||_49===void 0?void 0:_49.marginTop)||0)*factor)+"px solid transparent",borderBottom:Math.round((((_50=this.fieldsSpacing.spacing)===null||_50===void 0?void 0:_50.marginBottom)||0)*factor)+"px solid transparent",borderLeft:Math.round((((_51=this.fieldsSpacing.spacing)===null||_51===void 0?void 0:_51.marginLeft)||0)*factor)+"px solid transparent",borderRight:Math.round((((_52=this.fieldsSpacing.spacing)===null||_52===void 0?void 0:_52.marginRight)||0)*factor)+"px solid transparent",})}
if(this.isElementPreview&&this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal&&this.fields.length>=3){this.elem.css({width:'700px'})}
if(typeof this.onUpdateStyle==='function'){this.onUpdateStyle()}};Form.prototype.comProperties=function(_uiDef){var thisClass=this,fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:356,sizeClass:'modal-lg'},noScroll:!1,tabs:[{name:__('Fields'),children:[{type:'VerticalLayout',spacing:12,children:[{type:'VerticalLayout',spacing:5,children:[{type:EditFormDialog_1.FieldsContainer,id:'formFields',isStore:thisClass.isStore},{type:'Button',text:__('Add Option'),buttonStyle:UIButton_22.UIButton.STYLE_LINK,icon:'fa fa-plus',styleClass:'btn-sm',click:function(){fields.formFields.newField()}}]},{type:'VerticalLayout',spacing:5,children:[{type:'Label',text:__('Submit button text')},{type:'MultilangTextField',id:'formFromSubmit',css:{top:'-7px'}}]},{type:'VerticalLayout',spacing:5,children:[{type:'Label',text:__('URL after submit')},{type:'LinkSelector',id:'formRedirectUrl',multilang:!0,noEmail:!0,noPhone:!0,noFiles:!0,noLinkTitle:!0,noIndexing:!0,noPopup:!0,css:{top:'-7px'}}]}]},]},{name:__('Email settings'),type:'mailSettings',children:[{type:'VerticalLayout',children:[{type:'HorizontalLayout',children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Form will be sent to this Email'),helpText:'<div style="width: 180px;">'+__('You can specify several emails separated by semicolons.')+'</div>'},{type:'TextField',id:'formFromEmail',placeholder:'example@yourmail.com',change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-formFromEmail-change',thisClass)}}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Form will be sent from this Email'),helpText:'<div style="width: 180px;">'+__('Specify email here if you want the form to be always sent from one email address.')+'<br /><br />'+__('Note: Make sure that domain of specified email address has DNS record of type %sSPF%s. If it does not then you may not receive mails to your inbox.').replace('%s','<a href="https://en.wikipedia.org/wiki/Sender_Policy_Framework" target="_blank">').replace('%s','</a>')+'<br /><br />'+__('You can also specify combination of email and name.')+' '+__('The value must be of the following format: %s').replace('%s',('<br />'+__('Name')+' '+'&lt;'+__('Email')+'&gt;'))+'</div>'},{type:'TextField',id:'formFromSenderEmail',placeholder:('no-reply@'+wb_builder.siteDomain),change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-formFromSenderEmail-change',thisClass)}}]}]},{type:'Label',text:__('With Subject'),css:{marginTop:15}},{type:'TextField',id:'formFromSubject'},{type:'Label',text:__('Form sent Message'),css:{marginTop:15}},{type:'MultilangTextField',id:'formFromSentMessage'},]}]},{name:__('SMTP'),type:'smtpSettings',children:[{type:'CheckBox',label:__('SMTP Enable'),id:'smtpEnable',change:function(){if(this.getValue()){fields.smtpLine2.setEnabled(!0);fields.smtpLine3.setEnabled(!0)}else{fields.smtpLine2.setEnabled(!1);fields.smtpLine3.setEnabled(!1)}}},{type:'HorizontalLayout',id:'smtpLine2',columnWeights:[4,3,5],enabled:!1,children:[{type:'TextField',id:'smtpHost',placeholder:__('SMTP Host'),title:__('SMTP Host'),uiComponentOptions:function(){return{validateText:((this.smtpHost||'').indexOf('.google.com')>=0||(this.smtpHost||'').indexOf('.gmail.com')>=0)?('open:'+__('Please enable %sless security access%s in Gmail account').replace('%s','<a href="https://support.google.com/a/answer/6260879" target="_blank">').replace('%s','</a>')):''}},},{type:'TextField',id:'smtpPort',placeholder:__('SMTP Port'),title:__('SMTP Port')},{type:'FlowLayout',css:{marginTop:5},children:[{type:'RadioBox',label:__('None'),id:'smtpEncryptionNone',inline:!0,group:'encryption',title:__('SMTP Encryption')},{type:'RadioBox',label:__('TLS'),id:'smtpEncryptionTLS',inline:!0,group:'encryption',title:__('SMTP Encryption')},{type:'RadioBox',label:__('SSL'),id:'smtpEncryptionSSL',inline:!0,group:'encryption',title:__('SMTP Encryption')}]}]},{type:'HorizontalLayout',id:'smtpLine3',css:{marginTop:10},enabled:!1,children:[{type:'TextField',id:'smtpUsername',placeholder:__('SMTP Username'),title:__('SMTP Username')},{type:'TextField',id:'smtpPassword',password:!0,placeholder:__('SMTP Password'),title:__('SMTP Password')}]}]},{name:__('Settings'),type:'settings',children:[{type:'Label',text:__('Google reCAPTCHA')+' (v2)',helpText:__('Go to %s and register new site to get keys.').replace('%s','<a href="https://www.google.com/recaptcha/" target="_blank">Google ReCaptcha</a>')},{type:'HorizontalLayout',children:[{type:'TextField',id:'recSiteKey',placeholder:__('Site key'),title:__('Site key'),change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-recSiteKey-change',thisClass)}},{type:'TextField',id:'recSecretKey',placeholder:__('Secret Key'),title:__('Secret Key'),change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-recSecretKey-change',thisClass)}}]},{type:'HorizontalLayout',css:{marginTop:15},children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Label Font')},{type:'StyleSelector',id:'formLabelFont',emptyChoice:!0,change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-formLabelFont-change',thisClass)}}]},{type:'VerticalLayout',children:[{type:'FlowLayout',children:[{type:'CheckBox',label:'',id:'formLabelWidthFixed',change:function(fields){fields.formLabelWidth.setEnabled(this.getValue());Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-formLabelWidthFixed-change',thisClass)}},{type:'Label',text:__('Label Column Width'),click:function(_e,fields){fields.formLabelWidthFixed.setValue(!fields.formLabelWidthFixed.getValue());fields.formLabelWidthFixed.trigger('change')}}]},{type:SizeSelector_15.SizeSelector,id:'formLabelWidth',enabled:!1,noFixedWidth:!0,min:0,change:function(){Service_47.default.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-formLabelWidth-change',thisClass)}}]}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'CheckBox',label:__('Post form data to this URL instead of sending it via email'),css:{marginBottom:5},id:'enablePostUrl',change:function(fields){fields.postUrl.setEnabled(fields.enablePostUrl.getValue())}},{type:'TextField',id:'postUrl',placeholder:'http://'}]}]}],callbackFunc:function(fields){thisClass.fields=fields.formFields.getValue();thisClass.email=fields.formFromEmail.getValue();thisClass.emailFrom=fields.formFromSenderEmail.getValue();thisClass.subject=fields.formFromSubject.getValue();thisClass.formSentMessage=fields.formFromSentMessage.getValue();thisClass.button=fields.formFromSubmit.getValue();thisClass.redirectUrl=fields.formRedirectUrl.getValue();thisClass.smtpEnable=fields.smtpEnable.getValue();thisClass.smtpHost=fields.smtpHost.getText();thisClass.smtpPort=fields.smtpPort.getText();if(fields.smtpEncryptionTLS.getValue()){thisClass.smtpEncryption='tls'}else if(fields.smtpEncryptionSSL.getValue()){thisClass.smtpEncryption='ssl'}else{thisClass.smtpEncryption=null}
thisClass.smtpUsername=fields.smtpUsername.getText();thisClass.smtpPassword=fields.smtpPassword.getText();thisClass.recSiteKey=fields.recSiteKey.getText();thisClass.recSecretKey=fields.recSecretKey.getText();thisClass.labelColWidth=((fields.formLabelWidthFixed.getValue()&&fields.formLabelWidth.getValue())?fields.formLabelWidth.getValue():0);thisClass.enablePostUrl=fields.enablePostUrl.getValue();thisClass.postUrl=fields.postUrl.getValue();thisClass.updateStyle();if(typeof thisClass.onApplyCallback==="function")
thisClass.onApplyCallback();}});fields.formFields.setValue(this.fields);fields.formFromEmail.setValue(this.email);fields.formFromSenderEmail.setValue(this.emailFrom);fields.formFromSubject.setValue(this.subject);fields.formFromSentMessage.setValue(this.formSentMessage);fields.formFromSubmit.setValue(this.button);fields.formRedirectUrl.setValue(this.redirectUrl);fields.smtpEnable.setValue(this.smtpEnable);fields.smtpEnable.trigger('change');fields.smtpHost.setText(this.smtpHost?this.smtpHost:'');fields.smtpPort.setText(this.smtpPort?this.smtpPort:'');fields.smtpEncryptionNone.setValue(!0);fields.smtpEncryptionTLS.setValue((this.smtpEncryption==='tls'));fields.smtpEncryptionSSL.setValue((this.smtpEncryption==='ssl'));fields.smtpUsername.setText(this.smtpUsername?this.smtpUsername:'');fields.smtpPassword.setText(this.smtpPassword?this.smtpPassword:'');fields.recSiteKey.setText(this.recSiteKey?this.recSiteKey:'');fields.recSecretKey.setText(this.recSecretKey?this.recSecretKey:'');fields.formLabelWidth.setValue((this.labelColWidth?this.labelColWidth:0));fields.formLabelWidthFixed.setValue((!!this.labelColWidth));fields.formLabelWidthFixed.trigger('change');fields.enablePostUrl.setValue(this.enablePostUrl);fields.postUrl.setValue(this.postUrl);fields.enablePostUrl.trigger('change');return fields};Form.prototype.comPropertiesFields=function(_uiDef){var thisClass=this,fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:356,sizeClass:'modal-lg'},noScroll:!1,tabs:[{name:__('Fields'),children:[{type:'VerticalLayout',spacing:12,children:[{type:'VerticalLayout',spacing:5,children:[{type:EditFormDialog_1.FieldsContainer,id:'formFields',isStore:thisClass.isStore},{type:'Button',text:__('Add Option'),buttonStyle:UIButton_22.UIButton.STYLE_LINK,icon:'fa fa-plus',styleClass:'btn-sm',click:function(){fields.formFields.newField()}}]},]},]},],callbackFunc:function(fields){thisClass.fields=fields.formFields.getValue();thisClass.updateStyle();if(typeof thisClass.onApplyCallback==="function")
thisClass.onApplyCallback();}});fields.formFields.setValue(this.fields);return fields};Form.prototype.onSwitchLanguage=function(langCode){_super.prototype.onSwitchLanguage.call(this,langCode);this.updateStyle(!0,langCode)};Form.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"fields"});this.registerProperty({name:"editFormButton",type:EditFormProperty,uiComponentOptions:{icon:'fa fa-pencil',click:function(){this.openEditFormDialog()}}});this.registerProperty({name:"inquiresButton",type:InquiresProperty,uiComponentOptions:{icon:'fa fa-file-o',click:function(){this.openInquiresDialog()}}});this.registerProperty({name:"button",type:SubmitButtonText});this.registerProperty({name:"buttonTextIcon",type:ButtonTextIcon});this.registerProperty({name:"iconRtlEnabled",type:BtnIconAlignment,uiComponentOptions:function(){return{visible:!!this.buttonTextIcon}}});this.registerProperty({name:"buttonNewLine",type:BtnNewLine,dependencies:['formDirection'],uiComponentOptions:function(){return{visible:this.formDirection===FormDirectionControl_1.FormDirectionType.Horizontal}}});this.registerProperty({name:"redirectUrl",type:FormRedirectUrl});this.registerProperty({name:"buttonNormal"});this.registerProperty({name:"buttonHover"});this.registerProperty({name:"buttonActive"});this.registerProperty({name:"buttonAlign",type:BtnTextAlignment});this.registerProperty({name:"buttonFont",type:BtnFontControl,uiComponentOptions:function(){return{noScaleFactors:!1,useTranform:!0,noAlign:!0,}}});this.registerProperty({name:"buttonStyle",type:BtnButtonStyle,dependencies:["buttonNormal","buttonHover","buttonActive"]});this.registerProperty({name:"fieldsFont",type:FieldsFont});this.registerProperty({name:"fieldsBackground",type:FieldsBackground});this.registerProperty({name:"fieldsBorder",type:FieldsBorder});this.registerProperty({name:"fieldsSpacing",type:FieldsSpacing});this.registerProperty({name:"fieldsShadow",type:FieldsShadow});this.registerProperty({name:"formDirection",type:FormDirection});this.registerProperty({name:"labelFont",type:LabelFont,uiComponentOptions:function(){return{noScaleFactors:!1,useTranform:!0,useStyleForLink:!0,}}});this.registerProperty({name:"labelColWidthFixed",type:LabelColumnWidthFixed,dependencies:["labelPosition"],uiComponentOptions:function(){return{visible:this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left}}});this.registerProperty({name:"labelColWidth",type:LabelColumnWidth,dependencies:["labelColWidthFixed","labelPosition"],uiComponentOptions:function(){return{visible:this.labelColWidthFixed&&this.labelPosition===FormLabelPositionControl_1.FormLabelPositionType.Left}}});this.registerProperty({name:"labelPosition",type:LabelPosition});this.registerProperty({name:"email",type:EmailSendTo,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:!this.enablePostUrl,validateText:!this.email||/^\s*[^ @]+@[^ @]+\.[^\ \.]+(\s*[;,]\s*[^ @]+@[^ @]+\.[^\ \.]+)*\s*$/.test(this.email||'')?'':('open:'+__('Email is incorrect')),}}});this.registerProperty({name:"emailFrom",type:EmailSendFrom,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{placeholder:'no-reply@'+wb_builder.siteDomain,enabled:!this.enablePostUrl,validateText:!this.emailFrom||/^\s*[^ @]+@[^ @]+\.[^\ \.]+\s*$/.test(this.emailFrom||'')?'':('open:'+__('Email is incorrect')),}}});this.registerProperty({name:"subject",type:EmailSubject,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:!this.enablePostUrl}}});this.registerProperty({name:"formSentMessage",type:EmailSentAlertMessage});this.registerProperty({name:"smtpEnable",type:PropertyType_7.PropertyType.SmtpEnabled});this.registerProperty({name:"smtpHost",type:PropertyType_7.PropertyType.SmtpHost,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable,validateText:((this.smtpHost||'').indexOf('.google.com')>=0||(this.smtpHost||'').indexOf('.gmail.com')>=0)?('open:'+__('Please enable %sless security access%s in Gmail account').replace('%s','<a href="https://support.google.com/a/answer/6260879" target="_blank">').replace('%s','</a>')):''}}});this.registerProperty({name:"smtpPort",type:PropertyType_7.PropertyType.SmtpPort,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}});this.registerProperty({name:"smtpEncryption",type:PropertyType_7.PropertyType.SmtpEncryption,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}});this.registerProperty({name:"smtpUsername",type:PropertyType_7.PropertyType.SmtpUsername,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}});this.registerProperty({name:"smtpPassword",type:PropertyType_7.PropertyType.SmtpPassword,dependencies:["smtpEnable"],uiComponentOptions:function(){return{enabled:this.smtpEnable}}});this.registerProperty({name:"enablePostUrl",type:EnablePostUrl});this.registerProperty({name:"postUrl",type:PostUrl,dependencies:["enablePostUrl"],uiComponentOptions:function(){return{enabled:this.enablePostUrl}}});this.registerProperty({name:"recVersion",type:PropertyType_7.PropertyType.CaptchaVersion});this.registerProperty({name:"recSiteKey",type:PropertyType_7.PropertyType.CaptchaSiteKey});this.registerProperty({name:"recSecretKey",type:PropertyType_7.PropertyType.CaptchaSecretKey});this.registerProperty({name:"useGclidCapture",type:UseGclidCapture});this.registerProperty({name:"onsubmitJs",type:OnsubmitJs})};Form.prototype.supportsOnClickJs=function(){return!1};Form.prototype.openEditFormDialog=function(){var _this=this;if(!this.editFormDialog){this.editFormDialog=new EditFormDialog_1.EditFormDialog(function(newVal){var property=_this.getProperty('fields');var historyData={length:0};if(_this.system&&property){historyData={length:1,key:{element:_this.id,property:property,value:property===null||property===void 0?void 0:property.serialize(_this),}}}
_this.fields=newVal;if(_this.system&&property){var swapPropertyValues=function(historyData){var value;for(var key in historyData){if(!historyData.hasOwnProperty(key)||key==="length")
continue;var bv=historyData[key];var element=window.getElementById(bv.element);if(!element){console.error("Unable to undo 'changeProperties': can't find element "+bv.element);continue}
value=bv.property.serialize(element);element.undoing=!0;bv.property.deserialize(element,bv.value,!1,!0);bv.value=value;window.requestAnimationFrame(function(){if(element)
element.undoing=!1})}};_this.system.historyAdd("changeProperties",historyData,swapPropertyValues,swapPropertyValues)}
_this.updateStyle();_this.editFormDialog.setVisible(!1);(0,Collaboration_7.updateElementProperties)(_this,{fields:_this.fields})})}
this.editFormDialog.setVisible(!0);this.editFormDialog.loadFields(this.fields)};Form.prototype.openInquiresDialog=function(){if(!this.inquiresDialog){this.inquiresDialog=new FormInquiries_1.InquiriesDialog(this._formUuid)}
this.inquiresDialog.setVisible(!0)};Form.fillDefaultOptions=function(field){var newSettings={};field.settings=field.settings||{};if(['textarea'].indexOf(field.type)>=0){newSettings.textareaRow=field.settings.textareaRow||4}
if(['date'].indexOf(field.type)>=0){newSettings.dateMax=field.settings.dateMax;newSettings.dateMin=field.settings.dateMin;newSettings.dateUseDate=!!(field.settings?field.settings.dateUseDate:!0);newSettings.dateUseTime=!!(field.settings?field.settings.dateUseTime:!0)}
if(['input'].indexOf(field.type)>=0){newSettings.lengthMin=field.settings.lengthMin||0;newSettings.lengthMax=field.settings.lengthMax||255}
if(['number'].indexOf(field.type)>=0){newSettings.numberMin=field.settings.numberMin||0;newSettings.numberMax=field.settings.numberMax||0;newSettings.numberStep=field.settings.numberStep||1}
if(['file'].indexOf(field.type)>=0){newSettings.fileMaxSize=field.settings.fileMaxSize||2;newSettings.fileTypes=field.settings.fileTypes||'';newSettings.fileMultiple=!!(field.settings?field.settings.fileMultiple:!1);newSettings.fileSaving=!!(field.settings?field.settings.fileSaving:!1)}
if(['radiobox','checkbox'].indexOf(field.type)>=0){newSettings.options=field.settings.options&&field.settings.options.length>0?field.settings.options:(field.type==='radiobox'?['','']:['']);newSettings.layout=field.settings.layout==='horizontal'?'horizontal':'vertical'}
if(['select'].indexOf(field.type)>=0){newSettings.options=field.settings.options&&field.settings.options.length>0?field.settings.options:['']}
if(['range'].indexOf(field.type)>=0){newSettings.rangeFromMin=field.settings.rangeFromMin||0;newSettings.rangeFromMax=field.settings.rangeFromMax||10;newSettings.rangeFromStep=field.settings.rangeFromStep||1;newSettings.rangeToMin=field.settings.rangeToMin||0;newSettings.rangeToMax=field.settings.rangeToMax||10;newSettings.rangeToStep=field.settings.rangeToStep||1}
field.settings=newSettings;return field};Form.pluginName='Form';Form.defaultValue=[{enabled:!0,type:"input",name:__("Name"),options:"",required:!0},{enabled:!0,type:"input",name:__("Email"),options:"",required:!0},{enabled:!1,type:"input",name:__("Country"),options:"",required:!0},{enabled:!1,type:"input",name:__("City"),options:"",required:!0},{enabled:!1,type:"input",name:__("Address"),options:"",required:!0},{enabled:!1,type:"input",name:__("Your Field"),options:"",required:!0},{enabled:!1,type:"input",name:__("Your Field"),options:"",required:!0},{enabled:!1,type:"select",name:__("How did you find us?"),settings:{options:[__("Found on google"),__("Followed link from other site"),__("Friend told me")]},required:!0},{enabled:!1,type:"select",name:__("Your Question?"),settings:{options:[__("Yes"),__("No"),__("May be")]},required:!0},{enabled:!0,type:"textarea",name:__("Message"),options:"",required:!0},{enabled:!1,type:"file",name:__("Attachments"),options:"",required:!1},{enabled:!1,type:"checkbox",name:__("I want to receive newsletters"),options:"",required:!1},{enabled:!1,type:"checkbox",name:__("I agree to the Terms and Conditions"),options:"",required:!0}];return Form}(Element_11.Element));exports.default=Form;Service_47.default.forms={Form:Form,};ElementRegister_13.ElementRegister.registerClass('Form',Form)});define("js/store/StoreCoupon",["require","exports","js/Serializable"],function(require,exports,Serializable_15){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreCoupon=exports.buildTypeList=exports.StoreCouponType=void 0;var StoreCouponType;(function(StoreCouponType){StoreCouponType[StoreCouponType.PERCENTAGE=0]="PERCENTAGE";StoreCouponType[StoreCouponType.FIXED_AMOUNT=1]="FIXED_AMOUNT"})(StoreCouponType||(exports.StoreCouponType=StoreCouponType={}));function buildTypeList(){return[{id:StoreCouponType.PERCENTAGE,name:__('Percentage')},{id:StoreCouponType.FIXED_AMOUNT,name:__('Fixed amount')},]}
exports.buildTypeList=buildTypeList;var StoreCoupon=(function(_super){__extends(StoreCoupon,_super);function StoreCoupon(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.code="";_this.itemType=0;_this.type=StoreCouponType.PERCENTAGE;_this.value=0;_this.dateFrom="";_this.dateTo="";_this.enabled=!0;_this.applyToDiscounted=!1;_this.description="";_this.deserialize(data);return _this}
return StoreCoupon}(Serializable_15.Serializable));exports.StoreCoupon=StoreCoupon});define("js/store/StoreModule",["require","exports","jquery","js/store/StoreItem","js/store/StoreItemType","js/store/StoreItemFieldType","js/store/StoreCategory","js/store/StoreDestinationZone","js/store/StoreTaxRule","js/store/StoreShippingMethod","js/store/StoreTypes","js/Serializable","js/UniqueIdentifier","js/CommonTypes","js/store/StoreCoupon","js/store/StoreItem","js/store/StoreCategory"],function(require,exports,jquery_106,StoreItem_1,StoreItemType_1,StoreItemFieldType_1,StoreCategory_1,StoreDestinationZone_1,StoreTaxRule_1,StoreShippingMethod_1,StoreTypes_1,Serializable_16,UniqueIdentifier_1,CommonTypes_20,StoreCoupon_1,StoreItem_2,StoreCategory_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ModuleExtFields=exports.ModuleForCompositions=exports.Module=exports.extFieldTrigger=exports.Category=exports.Item=void 0;Object.defineProperty(exports,"Item",{enumerable:!0,get:function(){return StoreItem_2.StoreItem}});Object.defineProperty(exports,"Category",{enumerable:!0,get:function(){return StoreCategory_2.StoreCategory}});var itemTypesIdx={};var itemFieldTypesIdx={};var StoreModule=(function(){function StoreModule(isUsedForCompositions){this.isUsedForCompositions=isUsedForCompositions;this.needToSave=!1;this.needToTranslateItems=!1;this.items=[];this.itemTypes=[];this.itemFieldTypes=[];this.categories=[];this.destinationZones=[];this.taxRules=[];this.shippingMethods=[];this.billingShippingRequired=null;this.coupons=[];this.currency=new StoreTypes_1.StoreCurrency('USD','$','');this.priceOptions=new StoreTypes_1.StorePriceOptions();this.minOrderPrice=0;this.noPhotoImage=null;this.watermarkImage=null;this.showDates=!1;this.showItemId=!1;this.advancedInvoiceDocNumMode=!1;this.invoiceDocumentNumberFormat="INV {N:8}";this.termsCheckboxEnabled=!1;this.termsCheckboxText=__('I agree to the Terms and Conditions');this.currenciesIndex={};this.currencies=[new StoreTypes_1.StoreCurrency('USD','$',''),new StoreTypes_1.StoreCurrency('EUR','€',''),new StoreTypes_1.StoreCurrency('GBP','£',''),new StoreTypes_1.StoreCurrency('AED','',''),new StoreTypes_1.StoreCurrency('AFN','',''),new StoreTypes_1.StoreCurrency('ALL','',''),new StoreTypes_1.StoreCurrency('AMD','',' ֏'),new StoreTypes_1.StoreCurrency('ANG','',''),new StoreTypes_1.StoreCurrency('AOA','',''),new StoreTypes_1.StoreCurrency('ARS','$',''),new StoreTypes_1.StoreCurrency('AUD','A$',''),new StoreTypes_1.StoreCurrency('AWG','',''),new StoreTypes_1.StoreCurrency('AZN','',' ₼'),new StoreTypes_1.StoreCurrency('BAM','',''),new StoreTypes_1.StoreCurrency('BBD','',''),new StoreTypes_1.StoreCurrency('BDT','',''),new StoreTypes_1.StoreCurrency('BGN','',' лв.'),new StoreTypes_1.StoreCurrency('BHD','',''),new StoreTypes_1.StoreCurrency('BIF','',''),new StoreTypes_1.StoreCurrency('BMD','',''),new StoreTypes_1.StoreCurrency('BND','',''),new StoreTypes_1.StoreCurrency('BOB','',''),new StoreTypes_1.StoreCurrency('BRL','',''),new StoreTypes_1.StoreCurrency('BSD','',''),new StoreTypes_1.StoreCurrency('BTN','',''),new StoreTypes_1.StoreCurrency('BWP','',''),new StoreTypes_1.StoreCurrency('BYN','',' Br'),new StoreTypes_1.StoreCurrency('BZD','',''),new StoreTypes_1.StoreCurrency('CAD','C$',''),new StoreTypes_1.StoreCurrency('CDF','',''),new StoreTypes_1.StoreCurrency('CHF','',' Fr'),new StoreTypes_1.StoreCurrency('CLP','',' $'),new StoreTypes_1.StoreCurrency('CNY','','¥'),new StoreTypes_1.StoreCurrency('COP','$',''),new StoreTypes_1.StoreCurrency('CRC','',''),new StoreTypes_1.StoreCurrency('CUC','',''),new StoreTypes_1.StoreCurrency('CUP','',''),new StoreTypes_1.StoreCurrency('CVE','',''),new StoreTypes_1.StoreCurrency('CZK','',' Kč'),new StoreTypes_1.StoreCurrency('DJF','',''),new StoreTypes_1.StoreCurrency('DKK','',' kr'),new StoreTypes_1.StoreCurrency('DOP','',''),new StoreTypes_1.StoreCurrency('DZD','',''),new StoreTypes_1.StoreCurrency('EGP','',' L.E.'),new StoreTypes_1.StoreCurrency('ERN','',''),new StoreTypes_1.StoreCurrency('ETB','',''),new StoreTypes_1.StoreCurrency('FJD','',''),new StoreTypes_1.StoreCurrency('FKP','',''),new StoreTypes_1.StoreCurrency('GEL','',''),new StoreTypes_1.StoreCurrency('GGP','',''),new StoreTypes_1.StoreCurrency('GHS','',''),new StoreTypes_1.StoreCurrency('GIP','',''),new StoreTypes_1.StoreCurrency('GMD','',''),new StoreTypes_1.StoreCurrency('GNF','',''),new StoreTypes_1.StoreCurrency('GTQ','',' Q'),new StoreTypes_1.StoreCurrency('GYD','',''),new StoreTypes_1.StoreCurrency('HKD','HK$',''),new StoreTypes_1.StoreCurrency('HNL','',''),new StoreTypes_1.StoreCurrency('HRK','',' kn'),new StoreTypes_1.StoreCurrency('HTG','',''),new StoreTypes_1.StoreCurrency('HUF','',' Ft'),new StoreTypes_1.StoreCurrency('IDR','Rp',''),new StoreTypes_1.StoreCurrency('ILS','₪',''),new StoreTypes_1.StoreCurrency('IMP','',''),new StoreTypes_1.StoreCurrency('INR','₹',''),new StoreTypes_1.StoreCurrency('IQD','',''),new StoreTypes_1.StoreCurrency('IRR','',' ریال'),new StoreTypes_1.StoreCurrency('IRR','',' تومان'),new StoreTypes_1.StoreCurrency('ISK','',' kr'),new StoreTypes_1.StoreCurrency('JEP','',''),new StoreTypes_1.StoreCurrency('JMD','',''),new StoreTypes_1.StoreCurrency('JOD','',''),new StoreTypes_1.StoreCurrency('JPY','¥',''),new StoreTypes_1.StoreCurrency('KES','',''),new StoreTypes_1.StoreCurrency('KGS','',''),new StoreTypes_1.StoreCurrency('KHR','',''),new StoreTypes_1.StoreCurrency('KMF','',''),new StoreTypes_1.StoreCurrency('KPW','',''),new StoreTypes_1.StoreCurrency('KRW','₩',''),new StoreTypes_1.StoreCurrency('KWD','',''),new StoreTypes_1.StoreCurrency('KYD','',''),new StoreTypes_1.StoreCurrency('KZT','',' тңг'),new StoreTypes_1.StoreCurrency('LAK','',''),new StoreTypes_1.StoreCurrency('LBP','',''),new StoreTypes_1.StoreCurrency('LKR','',''),new StoreTypes_1.StoreCurrency('LRD','',''),new StoreTypes_1.StoreCurrency('LSL','',''),new StoreTypes_1.StoreCurrency('LYD','',''),new StoreTypes_1.StoreCurrency('MAD','',''),new StoreTypes_1.StoreCurrency('MDL','',' lei'),new StoreTypes_1.StoreCurrency('MGA','',''),new StoreTypes_1.StoreCurrency('MKD','',''),new StoreTypes_1.StoreCurrency('MMK','',''),new StoreTypes_1.StoreCurrency('MNT','',''),new StoreTypes_1.StoreCurrency('MOP','',''),new StoreTypes_1.StoreCurrency('MRU','',''),new StoreTypes_1.StoreCurrency('MUR','',''),new StoreTypes_1.StoreCurrency('MVR','',''),new StoreTypes_1.StoreCurrency('MWK','',''),new StoreTypes_1.StoreCurrency('MXN','Mex$',''),new StoreTypes_1.StoreCurrency('MYR','RM',''),new StoreTypes_1.StoreCurrency('MZN','',''),new StoreTypes_1.StoreCurrency('NAD','',''),new StoreTypes_1.StoreCurrency('NGN','',''),new StoreTypes_1.StoreCurrency('NIO','',''),new StoreTypes_1.StoreCurrency('NOK','',' kr'),new StoreTypes_1.StoreCurrency('NPR','',''),new StoreTypes_1.StoreCurrency('NZD','NZ$',''),new StoreTypes_1.StoreCurrency('OMR','',''),new StoreTypes_1.StoreCurrency('PAB','',''),new StoreTypes_1.StoreCurrency('PEN','S/ ',''),new StoreTypes_1.StoreCurrency('PGK','',''),new StoreTypes_1.StoreCurrency('PHP','₱',''),new StoreTypes_1.StoreCurrency('PKR','',''),new StoreTypes_1.StoreCurrency('PLN','',' zł'),new StoreTypes_1.StoreCurrency('PRB','',''),new StoreTypes_1.StoreCurrency('PYG','',''),new StoreTypes_1.StoreCurrency('QAR','',' QR'),new StoreTypes_1.StoreCurrency('RON','',' Lei'),new StoreTypes_1.StoreCurrency('RSD','',' din'),new StoreTypes_1.StoreCurrency('RUB','',' ₽'),new StoreTypes_1.StoreCurrency('RWF','',''),new StoreTypes_1.StoreCurrency('SAR','',' SR'),new StoreTypes_1.StoreCurrency('SBD','',''),new StoreTypes_1.StoreCurrency('SCR','',''),new StoreTypes_1.StoreCurrency('SDG','',''),new StoreTypes_1.StoreCurrency('SEK','',' kr'),new StoreTypes_1.StoreCurrency('SGD','S$',''),new StoreTypes_1.StoreCurrency('SHP','',''),new StoreTypes_1.StoreCurrency('SLL','',''),new StoreTypes_1.StoreCurrency('SOS','',''),new StoreTypes_1.StoreCurrency('SRD','',''),new StoreTypes_1.StoreCurrency('SSP','',''),new StoreTypes_1.StoreCurrency('STN','',''),new StoreTypes_1.StoreCurrency('SYP','',''),new StoreTypes_1.StoreCurrency('SZL','',''),new StoreTypes_1.StoreCurrency('THB','',' ฿'),new StoreTypes_1.StoreCurrency('TJS','',''),new StoreTypes_1.StoreCurrency('TMT','',' m'),new StoreTypes_1.StoreCurrency('TND','',''),new StoreTypes_1.StoreCurrency('TOP','',''),new StoreTypes_1.StoreCurrency('TRY','',' TL'),new StoreTypes_1.StoreCurrency('TTD','',''),new StoreTypes_1.StoreCurrency('TVD','',''),new StoreTypes_1.StoreCurrency('TWD','NT$',''),new StoreTypes_1.StoreCurrency('TZS','',''),new StoreTypes_1.StoreCurrency('UAH','',' грн'),new StoreTypes_1.StoreCurrency('UGX','',''),new StoreTypes_1.StoreCurrency('UYU','',''),new StoreTypes_1.StoreCurrency('UZS','',' som'),new StoreTypes_1.StoreCurrency('VEF','Bs. ',''),new StoreTypes_1.StoreCurrency('VES','',''),new StoreTypes_1.StoreCurrency('VND','','₫'),new StoreTypes_1.StoreCurrency('VUV','',''),new StoreTypes_1.StoreCurrency('WST','',''),new StoreTypes_1.StoreCurrency('XAF','',''),new StoreTypes_1.StoreCurrency('XCD','',''),new StoreTypes_1.StoreCurrency('XOF','',''),new StoreTypes_1.StoreCurrency('XPF','',''),new StoreTypes_1.StoreCurrency('YER','',''),new StoreTypes_1.StoreCurrency('ZAR','R ',''),new StoreTypes_1.StoreCurrency('ZMW','','')];this.stockSettings={enableManagement:!1,showStockAmount:!1,hideOutOfStock:!1,sendLowStockNotifications:!1,notificationTriggerStockAmount:0,};this.defaultTax={enabled:!1,destinationZoneId:"",};this.apiKeys=[];this.companyInfo="";this.invoiceTextBeginning="";this.invoiceTextEnding="";this.invoiceTitlePhrase=__('Invoice');this.invoiceLogo=null;this.signImage=null;this.signImageAlign=null;this.logoAlign=null;this.logoHeight=200;this.signatureHeight=200;this.dateFormat='{YYYY}-{MM}-{DD}';this.paymentGateways=[];this.dataLoaded=!1;this.initialLoadDone=!1;this.builder=null;this.wbConfig=null;this.saveProvider=!1;this.configForm={isStore:!0,subject:__("Email from the site"),sentMessage:__("Form was sent."),button:__("Submit"),buttonAlign:"right",buttonStyle:{normal:{bg:{"color":"#4faf54","image":"none","position":"left top","attachment":"scroll","repeat":"repeat","size":"auto auto","fullWidth":!1,"opacity":100,"isVideo":!1,"timeStartAt":null,"timeEndAt":null,"css":{"background":"#4faf54 repeat left top","background-size":"auto auto","opacity":1}},color:"#ffffff",border:{"differ":!1,"differRadius":!1,"color":["#000000","#000000","#000000","#000000"],"style":["none","none","none","none"],"weight":[0,0,0,0],"radius":0,"css":{"border":"0px none #000000"},}},active:{shadow:{"angle":180,"distance":3,"size":0,"blur":5,"color":"rgba(0, 0, 0, 0.125)","forText":!1,"css":{"box-shadow":"0px 3px 5px 0px rgba(0, 0, 0, 0.125)"}},bg:{"color":"#4faf54","image":"none","position":"left top","attachment":"scroll","repeat":"repeat","size":"auto auto","fullWidth":!1,"opacity":100,"isVideo":!1,"timeStartAt":null,"timeEndAt":null,"css":{"background":"#4faf54 repeat left top","background-size":"auto auto","opacity":1}},color:"#ffffff",border:{"differ":!1,"differRadius":!1,"color":["#000000","#000000","#000000","#000000"],"style":["none","none","none","none"],"weight":[0,0,0,0],"radius":0,"css":{"border":"0px none #000000"},}},hover:{bg:{"color":"#6bbc6f","image":"none","position":"left top","attachment":"scroll","repeat":"repeat","size":"auto auto","fullWidth":!1,"opacity":100,"isVideo":!1,"timeStartAt":null,"timeEndAt":null,"css":{"background":"#6bbc6f repeat left top","background-size":"auto auto","opacity":1}},color:"#ffffff",border:{"differ":!1,"differRadius":!1,"color":["#000000","#000000","#000000","#000000"],"style":["none","none","none","none"],"weight":[0,0,0,0],"radius":0,"css":{"border":"0px none #000000"},}}},fieldsShadow:null,fieldsSpacing:{"scaleFactors":null,"spacing":{"sameValues":!1,"marginTop":0,"marginRight":0,"marginBottom":0,"marginLeft":0,"paddingTop":6,"paddingRight":12,"paddingBottom":6,"paddingLeft":12,"css":{"margin":"0px 0px 0px 0px","padding":"6px 12px 6px 12px"}}},fieldsFont:{"color":"#555","size":14,"font":"Arial,sans-serif","style":{},"align":CommonTypes_20.Alignment.Left,"lineHeight":20,"css":{"font":"normal normal 14px Arial,sans-serif","color":"#555","text-align":"left","text-decoration":"none","line-height":"20px"}},textStyle:{"color":"#333333","size":13,"font":"Arial,sans-serif","style":{},"align":CommonTypes_20.Alignment.Left,"lineHeight":18,"css":{"font":"normal normal 13px Arial,sans-serif","color":"#333333","text-align":"left","text-decoration":"none","line-height":"18px"}},labelFont:{"color":"#454545","size":14,"font":"'Josefin Sans',Arial,sans-serif","style":{"bold":!0,"italic":!1,"underline":!1,"css":{"font-weight":"bold","font-style":"normal","text-decoration":"none"}},"align":CommonTypes_20.Alignment.Left,"lineHeight":0,"letterSpacing":0,"textTransform":"none","scaleFactors":null,"css":{"font-size":"14px","font-style":"normal","font":"normal bold 14px 'Josefin Sans',Arial,sans-serif","font-family":"'Josefin Sans',Arial,sans-serif","color":"#454545","text-decoration":"none","text-align":"left","text-transform":"none"},"cssScaleFactors":null,"cssRaw":"font-size: 14px; font-style: normal; font: normal bold 14px 'Josefin Sans',Arial,sans-serif; font-family: 'Josefin Sans',Arial,sans-serif; color: #454545; text-decoration: none; text-align: left; text-transform: none;","linksTextColor":"#337ab7","linksTextStyle":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"linksHoverColor":"#23527c","linksHoverStyle":{"bold":!1,"italic":!1,"underline":!1,"css":{"font-weight":"normal","font-style":"normal","text-decoration":"none"}},"cssForLinks":{"normal":{"color":"#337ab7"},"hover":{"color":"#23527c"}}},};this.contactFields=[];this.billingFields=[];this.translations={};this.initialLoadListeners=[]}
Object.defineProperty(StoreModule.prototype,"billingForm",{get:function(){var value={class:'Form',width:'100%',content:{}};value.content=this.configForm||{isStore:!0,fields:[]};value.content.isStore=!0;value.content.fields=this.billingFields||[];return value},enumerable:!1,configurable:!0});Object.defineProperty(StoreModule.prototype,"contactForm",{get:function(){var value={class:'Form',width:'100%',content:{}};value.content=this.configForm||{isStore:!0,fields:[]};value.content.isStore=!0;value.content.fields=this.contactFields||[];return value},enumerable:!1,configurable:!0});StoreModule.prototype.init=function(builder,wbConfig){this.builder=builder;this.wbConfig=wbConfig;this.needToTranslateItems=this.builder.translateStoreItems?!0:!1;for(var _i=0,_a=this.currencies;_i<_a.length;_i++){var currency=_a[_i];this.currenciesIndex[currency.code]=currency}};StoreModule.prototype.sortItems=function(){this.items.sort(function(a,b){return(a.itemType==b.itemType)?0:(a.itemType<b.itemType?-1:1)})};StoreModule.prototype.prepareIndexes=function(){itemTypesIdx={};for(var _i=0,_a=this.itemTypes;_i<_a.length;_i++){var item=_a[_i];itemTypesIdx['#'+item.id]=item}
itemFieldTypesIdx={};for(var _b=0,_c=this.itemFieldTypes;_b<_c.length;_b++){var item=_c[_b];itemFieldTypesIdx['#'+item.id]=item}};StoreModule.prototype.hasVariantFields=function(itemTypeId){var itemType=this.findItemTypeById(itemTypeId);if(itemType){for(var _i=0,_a=itemType.fields;_i<_a.length;_i++){var field=_a[_i];var type=this.findItemFieldTypeById(field.type);if(type&&type.type==StoreItemFieldType_1.StoreItemFieldType.TYPE_VARIANT&&type.options.length>0){return!0}}}
return!1};StoreModule.prototype.findCurrencyByCode=function(code){return(code in this.currenciesIndex)?this.currenciesIndex[code]:null};StoreModule.prototype.findItemTypeById=function(id){return(('#'+id)in itemTypesIdx)?itemTypesIdx['#'+id]:null};StoreModule.prototype.findItemFieldTypeById=function(id){return(('#'+id)in itemFieldTypesIdx)?itemFieldTypesIdx['#'+id]:null};StoreModule.prototype.findItemTypeField=function(itemType,id){for(var _i=0,_a=itemType.fields;_i<_a.length;_i++){var field=_a[_i];if(field.id===id)
return field}
return null};StoreModule.prototype.getDefaultTaxRate=function(itemType){var rateVal=0;if(this.defaultTax.enabled){var destinationZoneId=this.defaultTax.destinationZoneId;for(var _i=0,_a=this.taxRules;_i<_a.length;_i++){var rule=_a[_i];if(!rule.appliesToProducts||(rule.categoryId&&rule.categoryId!=itemType)){continue}
for(var _b=0,_c=rule.rates;_b<_c.length;_b++){var rate=_c[_b];if(rate.destinationZoneId==destinationZoneId){rateVal+=rate.rate;break}}}}
return rateVal/100};StoreModule.prototype.buildSearchBlob=function(item){var value=__tr(item.name)+'; '+item.id;var itemType=this.findItemTypeById(item.itemType);if(itemType){for(var _i=0,_a=item.customFields;_i<_a.length;_i++){var field=_a[_i];value+='; '+this.stringifyFieldValue(field,this.findItemTypeField(itemType,field.fieldId))}}
return value.toLowerCase()};StoreModule.prototype.stringifyFieldValue=function(customFieldValue,fieldData){if(!customFieldValue||!fieldData)
return null;var fieldValue=customFieldValue.value;var fieldTypeData=this.findItemFieldTypeById(fieldData.type);if(fieldTypeData&&fieldTypeData.options&&fieldTypeData.options.length>0){var fieldValueArr=isNaN(fieldValue)?fieldValue:[fieldValue];if(fieldValueArr instanceof Array){var fieldValueArrNew=[];for(var _i=0,_a=fieldTypeData.options;_i<_a.length;_i++){var opt=_a[_i];for(var _b=0,fieldValueArr_1=fieldValueArr;_b<fieldValueArr_1.length;_b++){var val=fieldValueArr_1[_b];if(opt.id!=val)
continue;fieldValueArrNew.push(__tr(opt.name));break}}
fieldValue=fieldValueArrNew.join(', ')}}else{fieldValue=__tr(fieldValue)}
if(typeof fieldValue==='string')
fieldValue=JSON.stringify(fieldValue);if(isNaN(fieldValue)&&!fieldValue)
return null;return fieldValue};StoreModule.prototype.formatDate=function(date,noTime){if(noTime===void 0){noTime=!1}
if(!date)
return'';if(noTime){var parts=date.match(/([0-9]+)\-([0-9]+)\-([0-9]+)/);if(!parts)
parts=date.match(/([0-9]+)\-([0-9]+)\-([0-9]+)\ ([0-9]+)\:([0-9]+)\:([0-9]+)/);if(!parts)
return'';return parts[1]+'-'+parts[2]+'-'+parts[3]}else{var parts=date.match(/([0-9]+)\-([0-9]+)\-([0-9]+)\ ([0-9]+)\:([0-9]+)\:([0-9]+)/);if(!parts)
return'';return parts[1]+'-'+parts[2]+'-'+parts[3]+' '+parts[4]+':'+parts[5]}};StoreModule.prototype.buildDate=function(noTime){if(noTime===void 0){noTime=!1}
var date=new Date(),year=(''+date.getFullYear()),month=(''+(date.getMonth()+1)),day=(''+date.getDate()),hours=(''+date.getHours()),minutes=(''+date.getMinutes()),seconds=(''+date.getSeconds());return year+'-'+((month.length==1)?('0'+month):month)+'-'+((day.length==1)?('0'+day):day)+(noTime?'':(' '+((hours.length==1)?('0'+hours):hours)+':'+((minutes.length==1)?('0'+minutes):minutes)+':'+((seconds.length==1)?('0'+seconds):seconds)))};StoreModule.prototype.getFormattedPrice=function(price,point,places,currency,thousandsSeparator){if(thousandsSeparator===void 0){thousandsSeparator=this.priceOptions.thousandsSeparator}
point=point?point:this.priceOptions.decimalPoint;places=places?places:this.priceOptions.decimalPlaces;price=(price+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+price)?0:+price;var prec=!isFinite(+places)?0:Math.abs(places);var sep=(typeof thousandsSeparator==='undefined')?'':thousandsSeparator;var dec=(typeof point==='undefined')?'.':point;var toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+Math.round(n*k)/k};var s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0')}
price=s.join(dec);var prefix=currency?currency.prefix:'';var postfix=currency?(currency.postfix?currency.postfix:((currency.code&&!prefix)?(' '+currency.code):'')):'';return prefix+price+postfix};StoreModule.prototype.onInitialLoadChange=function(func){this.initialLoadListeners.push(func)};StoreModule.prototype.offInitialLoadChange=function(func){var idx=this.initialLoadListeners.indexOf(func);if(idx>=0)
this.initialLoadListeners.splice(idx,1);};StoreModule.prototype.triggerInitialLoadChange=function(loaded){for(var _i=0,_a=this.initialLoadListeners;_i<_a.length;_i++){var l=_a[_i];l.call(this,loaded)}};StoreModule.prototype.resetInitialLoad=function(){this.initialLoadDone=!1;this.triggerInitialLoadChange(!1)};StoreModule.prototype.load=function(func,noDefault){var _this=this;noDefault=noDefault||this.initialLoadDone;var url=this.wbConfig?this.wbConfig.getLnUrl('store/data/',{tr:(this.needToTranslateItems?'1':'0'),nodefault:(noDefault?'1':'0'),onlydefault:(this.isUsedForCompositions?'1':'0')}):'store/data/?tr='+(this.needToTranslateItems?'1':'0')+'&nodefault='+(noDefault?'1':'0')+'&onlydefault='+(this.isUsedForCompositions?'1':'0');this.dataLoaded=!1;jquery_106.default.get(url).done(function(data){_this.initialLoadDone=!0;_this.dataLoaded=!0;if(data){if(data.items){_this.items=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreItem_1.StoreItem,data.items))}
if(data.itemTypes){_this.itemTypes=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreItemType_1.StoreItemType,data.itemTypes))}
if(data.itemFieldTypes){_this.itemFieldTypes=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreItemFieldType_1.StoreItemFieldType,data.itemFieldTypes,StoreItemFieldType_1.StoreItemFieldType.buildStaticTypes()))}
if(data.categories){_this.categories=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreCategory_1.StoreCategory,data.categories))}
if(data.destinationZones){_this.destinationZones=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreDestinationZone_1.StoreDestinationZone,data.destinationZones))}
if(data.taxRules){_this.taxRules=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreTaxRule_1.StoreTaxRule,data.taxRules))}
if(data.shippingMethods){_this.shippingMethods=UniqueIdentifier_1.UniqueIdentifier.assignIds(Serializable_16.Serializable.deserializeArray(StoreShippingMethod_1.StoreShippingMethod,data.shippingMethods))}
if('billingShippingRequired' in data){_this.billingShippingRequired=data.billingShippingRequired}
if(data.coupons){_this.coupons=Serializable_16.Serializable.deserializeArray(StoreCoupon_1.StoreCoupon,data.coupons)}
if(data.currency)
_this.currency=data.currency;if(data.priceOptions)
_this.priceOptions=data.priceOptions;if(data.currencies)
_this.currencies=data.currencies;if(data.noPhotoImage!==undefined)
_this.noPhotoImage=data.noPhotoImage;if(data.watermarkImage!==undefined)
_this.watermarkImage=data.watermarkImage;_this.showDates=data.showDates?!0:!1;_this.showItemId=data.showItemId?!0:!1;if(data.configForm)
_this.configForm=data.configForm;if(data.contactFields)
_this.contactFields=data.contactFields;if(data.billingFields)
_this.billingFields=data.billingFields;if(data.translations)
_this.translations=data.translations;if(data.paymentGateways){_this.paymentGateways=data.paymentGateways;for(var _i=0,_a=_this.paymentGateways;_i<_a.length;_i++){var gateway=_a[_i];if(!gateway.hasOwnProperty("enabled"))
gateway.enabled=gateway.hasOwnProperty("key")&&!!gateway.key}}
if(data.invoiceDocumentNumberFormat)
_this.invoiceDocumentNumberFormat=data.invoiceDocumentNumberFormat;if(data.stockSettings)
_this.stockSettings=data.stockSettings;if(data.defaultTax)
_this.defaultTax=data.defaultTax;if(data.apiKeys)
_this.apiKeys=data.apiKeys;if(data.companyInfo)
_this.companyInfo=data.companyInfo;if(data.invoiceTextBeginning)
_this.invoiceTextBeginning=data.invoiceTextBeginning;if(data.invoiceTextEnding)
_this.invoiceTextEnding=data.invoiceTextEnding;if(data.invoiceTitlePhrase)
_this.invoiceTitlePhrase=data.invoiceTitlePhrase;if(data.invoiceLogo)
_this.invoiceLogo=data.invoiceLogo;if(data.signImage)
_this.signImage=data.signImage;if(data.signImageAlign)
_this.signImageAlign=data.signImageAlign;if(data.logoAlign)
_this.logoAlign=data.logoAlign;if(data.logoHeight)
_this.logoHeight=data.logoHeight;if(data.signatureHeight)
_this.signatureHeight=data.signatureHeight;if(data.dateFormat)
_this.dateFormat=data.dateFormat;if(data.termsCheckboxEnabled!==undefined)
_this.termsCheckboxEnabled=data.termsCheckboxEnabled;if(data.termsCheckboxText!==undefined)
_this.termsCheckboxText=data.termsCheckboxText||'';if(data.minOrderPrice!==undefined)
_this.minOrderPrice=data.minOrderPrice;if(data.hasOwnProperty("advancedInvoiceDocNumMode")){_this.advancedInvoiceDocNumMode=!!data.advancedInvoiceDocNumMode}else{_this.advancedInvoiceDocNumMode=!/^([^{}]+ |){N:\d+}$/i.test(_this.invoiceDocumentNumberFormat)}}
if(!_this.saveProvider&&_this.builder&&!_this.isUsedForCompositions){_this.saveProvider=!0;_this.builder.regSaveDataProvider('store',function(){return(_this.needToSave?_this.serialize():null)})}
_this.triggerInitialLoadChange(!0);if(typeof func==='function')
func.call(_this);}).fail(function(){console.error('Loading store data failed.')})};StoreModule.prototype.serialize=function(){return{currency:this.currency,priceOptions:this.priceOptions,items:Serializable_16.Serializable.copy(this.items),itemTypes:Serializable_16.Serializable.copy(this.itemTypes),itemFieldTypes:Serializable_16.Serializable.serializeValue(this.itemFieldTypes,null,function(idx,itm){return!itm.isStatic}),categories:Serializable_16.Serializable.copy(this.categories),destinationZones:Serializable_16.Serializable.copy(this.destinationZones),taxRules:Serializable_16.Serializable.copy(this.taxRules),shippingMethods:Serializable_16.Serializable.copy(this.shippingMethods),billingShippingRequired:this.billingShippingRequired,coupons:Serializable_16.Serializable.copy(this.coupons),noPhotoImage:this.noPhotoImage,watermarkImage:this.watermarkImage,showDates:this.showDates,showItemId:this.showItemId,configForm:this.configForm,contactFields:this.contactFields,billingFields:this.billingFields,paymentGateways:this.paymentGateways,advancedInvoiceDocNumMode:this.advancedInvoiceDocNumMode,invoiceDocumentNumberFormat:this.invoiceDocumentNumberFormat,stockSettings:this.stockSettings,defaultTax:this.defaultTax,apiKeys:this.apiKeys,companyInfo:this.companyInfo,invoiceTextBeginning:this.invoiceTextBeginning,invoiceTextEnding:this.invoiceTextEnding,invoiceTitlePhrase:this.invoiceTitlePhrase,invoiceLogo:this.invoiceLogo,signImage:this.signImage,signImageAlign:this.signImageAlign,logoAlign:this.logoAlign,logoHeight:this.logoHeight,signatureHeight:this.signatureHeight,termsCheckboxEnabled:this.termsCheckboxEnabled,termsCheckboxText:this.termsCheckboxText,minOrderPrice:this.minOrderPrice,dateFormat:this.dateFormat}};return StoreModule}());var extFieldListeners=new(function(){function class_3(){this.billingShippingRequired=[];this.companyInfo=[];this.invoiceDocumentNumberFormat=[]}
return class_3}());function extFieldTrigger(field){if(field in extFieldListeners){for(var _i=0,_a=extFieldListeners[field];_i<_a.length;_i++){var func=_a[_i];func()}}}
exports.extFieldTrigger=extFieldTrigger;var ModuleExtFieldsType=(function(){function ModuleExtFieldsType(){this.fields={billingShippingRequired:new(function(){function class_4(){}
class_4.prototype.getValue=function(){return exports.Module.billingShippingRequired?!0:!1};class_4.prototype.on=function(type,func){extFieldListeners.billingShippingRequired.push(func)};return class_4}()),companyInfo:new(function(){function class_5(){}
class_5.prototype.getValue=function(){return exports.Module.companyInfo};class_5.prototype.on=function(type,func){extFieldListeners.companyInfo.push(func)};return class_5}()),invoiceDocumentNumberFormat:new(function(){function class_6(){}
class_6.prototype.getValue=function(){return exports.Module.invoiceDocumentNumberFormat};class_6.prototype.on=function(type,func){extFieldListeners.invoiceDocumentNumberFormat.push(func)};return class_6}()),invoiceDocumentNumberSeries:new(function(){function class_7(){}
class_7.prototype.getValue=function(){return exports.Module.invoiceDocumentNumberFormat};class_7.prototype.on=function(type,func){extFieldListeners.invoiceDocumentNumberFormat.push(func)};return class_7}()),invoiceDocumentNumberLength:new(function(){function class_8(){}
class_8.prototype.getValue=function(){return exports.Module.invoiceDocumentNumberFormat};class_8.prototype.on=function(type,func){extFieldListeners.invoiceDocumentNumberFormat.push(func)};return class_8}()),}}
ModuleExtFieldsType.prototype.getUiFields=function(){return this.fields};return ModuleExtFieldsType}());exports.Module=new StoreModule(!1);exports.ModuleForCompositions=new StoreModule(!0);exports.ModuleExtFields=new ModuleExtFieldsType()});define("js/blog/Blog",["require","exports","jquery","js/ElementRegister","js/Element","js/blog/BlogPost","js/blog/BlogPropertyDialog","js/Service","js/blog/BlogLayout","js/element/PropertyType","js/TextControl","js/UIButton","js/CheckBox","js/element/ControlsSelection","js/util/UID","js/HAlignSelector"],function(require,exports,jquery_107,ElementRegister_14,Element_12,BlogPost_2,BlogPropertyDialog,Service_48,BlogLayout_2,PropertyType_8,TextControl_7,UIButton_23,CheckBox_11,ControlsSelection_2,UID_5,HAlignSelector_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Blog=void 0;var NewItemProperty=new PropertyType_8.PropertyType('blog/newButton',PropertyType_8.PropertyTypeAccess.User,!0,__('New Blog Post'),UIButton_23.UIButton).inline();PropertyType_8.PropertyType.setSortOrder('blog/newButton',PropertyType_8.PropertyType.sortOrderAfter('blog/itemsButton'));var DisableAnchorNavProperty=new PropertyType_8.PropertyType('listing/disableAnchorNav',PropertyType_8.PropertyTypeAccess.User,!0,__('Disable anchor navigation'),CheckBox_11.default,null,{helpText:__("Disable scrolling to this element when it's not at the top of the page")});var Blog=exports.Blog=(function(_super){__extends(Blog,_super);function Blog(data){if(data===void 0){data={}}
var _this=_super.call(this,Blog.dataValidate(data))||this;_this.currPage=1;_this.totalPages=0;_this.currentItemsPerPage=0;_this.currentCategory=null;_this.posts=[];_this.previewPostId=null;_this.loading=!1;_this.resizeTimer=null;_this.resizeCallback=null;_this._data=data;var useCompositionBlogModule=_this.virtualElement||_this.isElementPreview;_this.blogService=useCompositionBlogModule?Service_48.Service.BlogForCompositions:Service_48.Service.Blog;if(!_this._data.content)
_this._data.content={};if(!_this._data.content.layout)
_this._data.content.layout=BlogLayout_2.BlogLayout.TYPE_LIST;if(!_this._data.content.itemsPerPage)
_this._data.content.itemsPerPage=6;if(!_this._data.content.thumbWidth)
_this._data.content.thumbWidth=240;if(!_this._data.content.thumbHeight)
_this._data.content.thumbHeight=200;if(!_this._data.content.thumbAlign)
_this._data.content.thumbAlign='left';if(!_this._data.content.thumbPadding&&_this._data.content.thumbPadding!==0)
_this._data.content.thumbPadding=20;if(!_this._data.content.captionBackground)
_this._data.content.captionBackground='rgba(235, 235, 235, 0.92)';_this._data.content.noCornerPadding=('noCornerPadding' in _this._data.content)?!!_this._data.content.noCornerPadding:!0;var i,defStyle={},styles=wb_builder.site.styles;for(i=0;i<styles.length;i++){if(styles[i].selector==='.wb-stl-normal'){var textStyle=styles[i].sys.text||{};defStyle=TextControl_7.TextControl.buildCss({color:'#333333',size:textStyle.size,font:textStyle.font,lineHeight:textStyle.size*1.4,style:{}})}}
if(!_this._data.content.titleStyle){_this._data.content.titleStyle=jquery_107.default.extend(!0,{},defStyle);_this._data.content.titleStyle.style.bold=!0;_this._data.content.titleStyle=TextControl_7.TextControl.buildCss(_this._data.content.titleStyle)}
if(!_this._data.content.descriptionStyle)
_this._data.content.descriptionStyle=jquery_107.default.extend(!0,{},defStyle);if(!_this._data.content.dateStyle)
_this._data.content.dateStyle=jquery_107.default.extend(!0,{},defStyle);if(!_this._data.content.background)
_this._data.content.background='#ffffff';_this._data.content.displayShortText=('displayShortText' in _this._data.content)?!!_this._data.content.displayShortText:!0;_this._data.content.disableAnchorNav=(('disableAnchorNav' in _this._data.content)&&_this._data.content.disableAnchorNav);if(!_this._data.content.shortTextLength)
_this._data.content.shortTextLength=200;_this._data.content.displayTitle=('displayTitle' in _this._data.content)?!!_this._data.content.displayTitle:!0;_this._data.content.displayDate=('displayDate' in _this._data.content)?!!_this._data.content.displayDate:!0;_this._data.content.category=_this._data.content.category?_this._data.content.category:null;if(typeof _this._data.content.category==='number')
_this._data.content.category=null;_this._data.content.useThumbnails=('useThumbnails' in _this._data.content)?!!_this._data.content.useThumbnails:!0;_this.currentItemsPerPage=_this._data.content.itemsPerPage;_this.currentCategory=_this._data.content.category;_this.blogService.Module.elemList.push(_this);(function(){var _a,_b;if(_this._data.isElementPreview)
return;var postClick=function(postId){_this.renderPreview(postId)};var pageClick=function($page){var page;if($page.hasClass('prev')){page=Math.max(1,_this.currPage-1)}else if($page.hasClass('next')){page=Math.min(_this.currPage+1,_this.totalPages)}else{page=parseInt($page.text())}
if(page!==_this.currPage)
_this.switchPage(page);};(_a=_this.cover)===null||_a===void 0?void 0:_a.on('click mousemove',function(e){var _a;var px=e.pageX,py=e.pageY,isHover=!1;var pages=_this.container.find('.wb-blog-paging .btn');pages.each(function(){var $page=(0,jquery_107.default)(this);if($page.hasClass('active'))
return!0;var po=$page.offset();var ps={width:$page.outerWidth(),height:$page.outerHeight()};if(px>=po.left&&px<=(po.left+ps.width)&&py>=po.top&&py<=(po.top+ps.height)){if(e.type==='click'){return pageClick($page)}
isHover=!0;return!1}
return!0});if(_this.previewPostId&&_this.previewBackBtn){var pbbo=_this.previewBackBtn.offset();var pbbs={width:_this.previewBackBtn.outerWidth(),height:_this.previewBackBtn.outerHeight()};if(px>=pbbo.left&&px<=(pbbo.left+pbbs.width)&&py>=pbbo.top&&py<=(pbbo.top+pbbs.height)){if(e.type==='click'){_this.previewBackBtn.trigger('click')}
isHover=!0}}
if(e.type==='mousemove'){(_a=_this.cover)===null||_a===void 0?void 0:_a.css('cursor',(isHover?'pointer':'default'))}});(_b=_this.cover)===null||_b===void 0?void 0:_b.on('dblclick',function(e){if(_this.system.getEditingLocked())
return;if(_this.previewPostId){_this.blogService.Module.editBlogPost(_this.findPostById(_this.previewPostId),function(post){if(post.state!==BlogPost_2.BlogPost.STATE_ACTIVE)
_this.hidePreview();_this.blogService.Module.updateAllElements()})}else{var px_1=e.pageX,py_1=e.pageY;var posts=_this.container.find('.wb-blog-item');var thisClass_4=_this;var found_2=!1;posts.each(function(){var $post=(0,jquery_107.default)(this);if($post.hasClass('active'))
return!0;var po=$post.offset();var ps={width:$post.outerWidth(),height:$post.outerHeight()};if(px_1>=po.left&&px_1<=(po.left+ps.width)&&py_1>=po.top&&py_1<=(po.top+ps.height)){var postId=$post.attr('data-post-id');if(postId){thisClass_4.blogService.Module.editBlogPost(thisClass_4.findPostById(postId),function(){thisClass_4.blogService.Module.updateAllElements()});found_2=!0}
return!1}
return!0});if(!found_2){_this.blogService.Module.editBlog()}}})})();(function(){if(_this._data.isElementPreview)
return;if(_this.resizeTimer)
clearInterval(_this.resizeTimer);var lastWidth,lastHeight;setInterval(function(){if(typeof(_this.resizeCallback)==='function'){var currentWidth=_this.getWidthInPixels(),currentHeight=_this.getHeightInPixels();if(!lastWidth||!lastHeight||lastWidth!==currentWidth||lastHeight!==currentHeight){_this.resizeCallback.call(_this,currentWidth,currentHeight);lastWidth=currentWidth;lastHeight=currentHeight}}},50)})();_this.controls.setToolbarActions([{name:__('Edit posts'),icon:'fa fa-pencil',action:function(){return _this.blogService.Module.editBlog()}},{name:__('New Blog Post'),icon:'fa fa-plus',action:function(){return _this.blogService.Module.editBlogPost(_this.createNewPost())}}]);_this.setLoading(!0);_this.blogService.Module.load({success:function(){_this.loadData(_this.currPage,function(){if(!_this._data.isElementPreview&&!_this._data.id&&!_this.posts.length){_this.blogService.Module.editBlogPost(new BlogPost_2.BlogPost({state:BlogPost_2.BlogPost.STATE_ACTIVE}))}
_this.updateStyle(!0)})},error:function(error){return alert(error.message)},complete:function(){return _this.setLoading(!1)}});return _this}
Object.defineProperty(Blog.prototype,"data",{get:function(){return this._data},set:function(value){this._data=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"itemsPerPage",{get:function(){return this._data.content.itemsPerPage},set:function(value){this._data.content.itemsPerPage=Math.max(1,value);this.currPage=1},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"layout",{get:function(){return this._data.content.layout},set:function(value){this._data.content.layout=value;this.currPage=1},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"thumbWidth",{get:function(){return this._data.content.thumbWidth},set:function(value){this._data.content.thumbWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"thumbHeight",{get:function(){return this._data.content.thumbHeight},set:function(value){this._data.content.thumbHeight=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"thumbAlign",{get:function(){return this._data.content.thumbAlign},set:function(value){this._data.content.thumbAlign=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"thumbPadding",{get:function(){return this._data.content.thumbPadding},set:function(value){this._data.content.thumbPadding=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"captionBackground",{get:function(){return this._data.content.captionBackground},set:function(value){this._data.content.captionBackground=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"noCornerPadding",{get:function(){return this._data.content.noCornerPadding},set:function(value){this._data.content.noCornerPadding=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"titleStyle",{get:function(){return this._data.content.titleStyle},set:function(value){this._data.content.titleStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"dateStyle",{get:function(){return this._data.content.dateStyle},set:function(value){this._data.content.dateStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"descriptionStyle",{get:function(){return this._data.content.descriptionStyle},set:function(value){this._data.content.descriptionStyle=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"background",{get:function(){return this._data.content.background},set:function(value){this._data.content.background=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"displayShortText",{get:function(){return this._data.content.displayShortText},set:function(value){this._data.content.displayShortText=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"disableAnchorNav",{get:function(){return this._data.content.disableAnchorNav},set:function(value){this._data.content.disableAnchorNav=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"shortTextLength",{get:function(){return this._data.content.shortTextLength},set:function(value){this._data.content.shortTextLength=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"displayDate",{get:function(){return this._data.content.displayDate},set:function(value){this._data.content.displayDate=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"displayTitle",{get:function(){return this._data.content.displayTitle},set:function(value){this._data.content.displayTitle=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"category",{get:function(){return this._data.content.category},set:function(value){this._data.content.category=value;this.currPage=1},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"useThumbnails",{get:function(){return this._data.content.useThumbnails},set:function(value){this._data.content.useThumbnails=value},enumerable:!1,configurable:!0});Object.defineProperty(Blog.prototype,"Posts",{get:function(){return this.posts},enumerable:!1,configurable:!0});Blog.dataValidate=function(data){if(data&&!data.width){data.width=900;data.height=620}
return data};Blog.prototype.supportsPadding=function(){return!0};Blog.prototype.getIcon=function(){return'fa fa-pencil-square-o'};Blog.prototype.hidePreview=function(){this.previewElem.hide();this.listElem.show();this.pagingElem.show();this.previewPostId=null};Blog.prototype.renderPreview=function(postId){var _this=this;if(!this.previewElem){this.previewElem=this.blogElem.children('.wb-blog-preview');this.previewElem=(0,jquery_107.default)('<div>').addClass('wb-blog-preview').hide();var backBlock=(0,jquery_107.default)('<div>').addClass('back');this.previewBackBtn=(0,jquery_107.default)('<button>').attr('type','button').addClass('btn btn-default').text('< '+__('Back')).on('click',function(){return _this.hidePreview()});backBlock.append(this.previewBackBtn);this.previewElem.append(backBlock);var previewContent=(0,jquery_107.default)('<div>').addClass('item');this.previewElem.append(previewContent);this.blogElem.append(this.previewElem)}
var post=this.findPostById(postId);if(post){this.previewElem.children('.item').html(__tr(post.text));this.listElem.hide();this.pagingElem.hide();this.previewElem.show();this.previewPostId=postId}};Blog.prototype.onSwitchLanguage=function(langCode){_super.prototype.onSwitchLanguage.call(this,langCode);this.render(!0,!1);if(this.previewPostId)
this.renderPreview(this.previewPostId);};Blog.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.content={};for(var k in this._data.content){data.content[k]=this._data.content[k]}
return data};Blog.prototype.comProperties=function(){var _this=this;var fields=_super.prototype.comProperties.call(this,BlogPropertyDialog.build(this,function(){return _this._data}));if(this.comDialog)
this.comDialog.dialog.addClass('wb-modal-settings-900');BlogPropertyDialog.updateData(fields);return fields};Blog.prototype.updateStyle=function(initial,langCode){if(langCode===void 0){langCode=null}
_super.prototype.updateStyle.call(this,initial,langCode);this.render()};Blog.prototype.render=function(updateLayout,updatePaging,page){var _this=this;if(updateLayout===void 0){updateLayout=!0}
if(updatePaging===void 0){updatePaging=!0}
if(!this.blogElem){this.blogElem=(0,jquery_107.default)('<div>').addClass('wb-blog');this.blogFilters=(0,jquery_107.default)('<div>').addClass('wb-blog-filters').hide();this.blogFilters.append((0,jquery_107.default)('<select>').addClass('wb-blog-cat-select form-control').append((0,jquery_107.default)('<option>').text(__('All')).attr('selected','selected')));this.blogElem.append(this.blogFilters);this.blogElemWrapper=(0,jquery_107.default)('<div>').addClass('wb-blog-wrapper');this.listElem=(0,jquery_107.default)('<div>').addClass('wb-blog-list');this.preloaderElem=(0,jquery_107.default)('<div class="wb-blog-preloader"><div class="ico-spin wb-icon-spinner"></div></div>');this.pagingElem=(0,jquery_107.default)('<div class="wb-blog-paging"><div class="btn-group" role="group"></div></div>');this.blogElemWrapper.append(this.listElem);this.blogElemWrapper.append(this.preloaderElem);this.blogElem.append(this.blogElemWrapper);this.blogElem.append(this.pagingElem);this.container.append(this.blogElem)}
if(this.individualMargin){var padding=this.individualMargin;this.blogElem.css("padding",(padding.paddingTop||0)+'px '+(padding.paddingRight||0)+'px '+(padding.paddingBottom||0)+'px '+(padding.paddingLeft||0)+'px')}
for(var _i=0,_a=BlogLayout_2.BlogLayout.getAvailableTypes();_i<_a.length;_i++){var layout=_a[_i];this.blogElemWrapper.removeClass('wb-blog-type-'+layout)}
this.blogElemWrapper.addClass('wb-blog-type-'+this.layout);this.blogElem.css('background-color',this.background);this.listElem.css({'text-align':this.thumbAlign,'margin':(this.noCornerPadding?-(this.thumbPadding/2)+'px':0)});if(!this._data.isElementPreview){if(this.category){this.blogFilters.hide()}else{this.blogFilters.show()}}
this.pagingElem.css('text-align',this.thumbAlign);if(updateLayout){this.loadData((page||this.currPage),function(){_this.resizeCallback=null;switch(_this.layout){case BlogLayout_2.BlogLayout.TYPE_THUMBS:_this.renderThumbs();break;case BlogLayout_2.BlogLayout.TYPE_LIST:_this.renderList();break;case BlogLayout_2.BlogLayout.TYPE_ONETHREE:_this.renderOneThree();break}
if(updatePaging)
_this.renderPaging();})}else if(updatePaging){this.renderPaging()}};Blog.prototype.findPostById=function(id){if(this.posts&&this.posts.length){for(var _i=0,_a=this.posts;_i<_a.length;_i++){var post=_a[_i];if(post.id===id){return post}}}
return null};Blog.prototype.createNewPost=function(){var date=new Date();var post=new BlogPost_2.BlogPost({id:UID_5.UID.create(),state:BlogPost_2.BlogPost.STATE_ACTIVE,dateDate:''+date.getUTCFullYear()+'-'+((date.getMonth()+1)<10?'0':'')+(date.getMonth()+1)+'-'+(date.getDate()<10?'0':'')+date.getDate(),dateTime:(date.getHours()<10?'0':'')+date.getHours()+':'+(date.getMinutes()<10?'0':'')+date.getMinutes()});return post};Blog.prototype.setLoading=function(loading){if(!this.preloaderElem)
this.render(!1,!1);this.loading=loading;if(this.loading){this.listElem.css('opacity',0.5);this.preloaderElem.css('display','flex')}else{this.listElem.css('opacity',1);this.preloaderElem.css('display','none')}};Blog.prototype.reset=function(){this.posts=[];this.currPage=1;this.totalPages=0;this.currentItemsPerPage=this.itemsPerPage;this.currentCategory=this.category};Blog.prototype.loadData=function(page,callback){var _this=this;if(page===this.currPage&&this.totalPages>0&&this.currentItemsPerPage&&this.currentItemsPerPage===this.itemsPerPage&&this.currentCategory===this.category){callback()}else{this.currentItemsPerPage=this.itemsPerPage;this.currentCategory=this.category;this.currPage=page;this.setLoading(!0);this.blogService.API.loadPosts(BlogPost_2.BlogPost.STATE_ACTIVE,{success:function(data){_this.totalPages=Math.ceil(data.total/_this.itemsPerPage);_this.posts=[];for(var _i=0,_a=data.list;_i<_a.length;_i++){var li=_a[_i];_this.posts.push(new BlogPost_2.BlogPost(li))}
callback()},complete:function(){return _this.setLoading(!1)}},this.currentItemsPerPage,this.currPage,this.currentCategory)}};Blog.prototype.switchPage=function(page){var pagingGroup=this.pagingElem.children();pagingGroup.children().removeClass('active');pagingGroup.children('[data-page="'+page+'"]').addClass('active');if(page===1){pagingGroup.children('.prev').attr('disabled','disabled')}else{pagingGroup.children('.prev').removeAttr('disabled')}
if(page===this.totalPages){pagingGroup.children('.next').attr('disabled','disabled')}else{pagingGroup.children('.next').removeAttr('disabled')}
this.render(!0,!1,page)};Blog.prototype.renderPaging=function(){if(this.totalPages>1){var pagingGroup=this.pagingElem.children();pagingGroup.empty();pagingGroup.append((0,jquery_107.default)('<div>').attr('type','button').addClass('btn btn-default prev').html('&laquo;'));for(var page=1;page<=this.totalPages;page++){var $page=(0,jquery_107.default)('<div>').attr('type','button').attr('data-page',page).addClass('btn btn-default .page').text(page);if(page===this.currPage)
$page.addClass('active');pagingGroup.append($page)}
pagingGroup.append((0,jquery_107.default)('<div>').attr('type','button').addClass('btn btn-default next').html('&raquo;'));this.pagingElem.show()}else{this.pagingElem.hide()}};Blog.prototype.getShortText=function(post){var text=__tr(post.shortText);if(!text.length){text=(0,jquery_107.default)('<div>').append(__tr(post.text)).text()}
return text?(text.substring(0,this.shortTextLength)+(text.length>this.shortTextLength?'...':'')):''};Blog.prototype.getPrettyDate=function(post){return(post.dateDate&&post.dateTime)?(post.dateDate+' '+post.dateTime):((/(\d{4}\-\d{2}\-\d{2}\ \d{2}:\d{2}):\d{2}/.test(post.createdDate))?RegExp.$1:'')};Blog.prototype.renderThumbs=function(){this.listElem.empty();var finalCaptionHeight;var isPostWithoutContent=!this.displayTitle&&!this.displayDate&&!this.displayShortText;for(var _i=0,_a=this.posts;_i<_a.length;_i++){var post=_a[_i];var padding=this.thumbPadding/2;var item=(0,jquery_107.default)('<div>').addClass('wb-blog-item').attr('data-post-id',post.id).css({width:(this.thumbWidth+padding*2)+'px',height:(this.thumbHeight+padding*2)+'px',padding:padding+'px'});var wrapper=(0,jquery_107.default)('<div>').addClass('wrapper');var thumb=null;if(this.useThumbnails||isPostWithoutContent){if(this.useThumbnails&&post.thumbnail){thumb=(0,jquery_107.default)('<div>').css('background-image','url("'+wb_builder.makeLocalUrl(post.thumbnail)+'")')}else if((this.useThumbnails&&!post.thumbnail)||isPostWithoutContent){thumb=(0,jquery_107.default)('<div>').addClass('no-thumbnail').append((0,jquery_107.default)('<span>').addClass('glyphicon glyphicon-picture'))}
if(thumb){thumb.addClass('blog-item-thumbnail');wrapper.append(thumb)}}
if(!isPostWithoutContent){var caption=(0,jquery_107.default)('<div>').addClass('caption');var captionHeight=10;if(this.displayTitle){var titleHeight=this.titleStyle.lineHeight||20;if(this.titleStyle.scaleFactors&&this.titleStyle.scaleFactors[Service_48.Service.modeManager.getMode()]){captionHeight+=titleHeight*(this.titleStyle.scaleFactors[Service_48.Service.modeManager.getMode()])/100}else{captionHeight+=titleHeight}
var title=(0,jquery_107.default)('<span>').addClass('title').text(__tr(post.title));if(this.titleStyle.css){var css=this.titleStyle.css;if(this.titleStyle.cssScaleFactors&&this.titleStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]){css=this.titleStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]}
title.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(css))}
caption.append(title)}
if(this.displayDate){var dateStr=this.getPrettyDate(post);if(dateStr){var dateHeight=this.dateStyle.lineHeight||20;if(this.dateStyle.scaleFactors&&this.dateStyle.scaleFactors[Service_48.Service.modeManager.getMode()]){captionHeight+=dateHeight*(this.dateStyle.scaleFactors[Service_48.Service.modeManager.getMode()])/100}else{captionHeight+=dateHeight}
var date=(0,jquery_107.default)('<span>').addClass('date').text(dateStr);if(this.dateStyle.css){var css=this.dateStyle.css;if(this.dateStyle.cssScaleFactors&&this.dateStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]){css=this.dateStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]}
date.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(css))}
caption.append(date)}}
if(this.displayShortText){var descriptionHeight=(this.descriptionStyle.lineHeight||20)*2;if(this.descriptionStyle.scaleFactors&&this.descriptionStyle.scaleFactors[Service_48.Service.modeManager.getMode()]){captionHeight+=descriptionHeight*(this.descriptionStyle.scaleFactors[Service_48.Service.modeManager.getMode()])/100}else{captionHeight+=descriptionHeight}
var shortText=this.getShortText(post);if(shortText){var description=(0,jquery_107.default)('<span>').addClass('description').text(shortText).css('height',descriptionHeight);if(this.descriptionStyle.css){var css=this.descriptionStyle.css;if(this.descriptionStyle.cssScaleFactors&&this.descriptionStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]){css=this.descriptionStyle.cssScaleFactors[Service_48.Service.modeManager.getMode()]}
description.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(css))}
caption.append(description)}}
if(thumb)
thumb.css('padding-bottom',captionHeight);caption.css({'background-color':this.captionBackground,height:captionHeight});if(!this.useThumbnails){caption.css({'min-height':'100%','padding-top':((this.thumbHeight-captionHeight)/2)+'px'})}
wrapper.append(caption);finalCaptionHeight=captionHeight}
item.append(wrapper);this.listElem.append(item)}};Blog.prototype.renderList=function(){var _this=this;this.listElem.empty();var isPostWithoutContent=!this.displayTitle&&!this.displayDate&&!this.displayShortText;for(var _i=0,_a=this.posts;_i<_a.length;_i++){var post=_a[_i];var item=(0,jquery_107.default)('<div>').addClass('wb-blog-item').attr('data-post-id',post.id).css({margin:(this.thumbPadding/2)+'px','padding-right':this.thumbPadding+'px','background-color':this.captionBackground,height:this.thumbHeight+'px'});if(this.useThumbnails||isPostWithoutContent){var thumb=null;if(this.useThumbnails&&post.thumbnail){thumb=(0,jquery_107.default)('<div>').css('background-image','url("'+wb_builder.makeLocalUrl(post.thumbnail)+'")')}else if((this.useThumbnails&&!post.thumbnail)||isPostWithoutContent){thumb=(0,jquery_107.default)('<div>').addClass('no-thumbnail').append((0,jquery_107.default)('<span>').addClass('glyphicon glyphicon-picture'))}
if(thumb){thumb.addClass('blog-item-thumbnail');thumb.css('width',isPostWithoutContent?'100%':this.thumbWidth+'px');item.append(thumb)}}
if(!isPostWithoutContent){var captionBlock=(0,jquery_107.default)('<div>').addClass('caption');if(this.useThumbnails||isPostWithoutContent){captionBlock.css({'margin-left':-this.thumbWidth+'px','padding-left':this.thumbWidth+'px'})}
var captionBody=(0,jquery_107.default)('<div>');var captionMinHeight=0,captionPadding=15;if(this.displayTitle){var title=(0,jquery_107.default)('<span>').addClass('title').text(__tr(post.title));if(this.titleStyle.css)
title.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(this.titleStyle.css));captionBody.append(title);captionMinHeight+=this.titleStyle.lineHeight||20}
if(this.displayDate){var dateStr=this.getPrettyDate(post);if(dateStr){var date=(0,jquery_107.default)('<span>').addClass('date').text(dateStr);if(this.dateStyle.css)
date.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(this.dateStyle.css));captionBody.append(date);captionMinHeight+=this.dateStyle.lineHeight||20}}
if(this.displayShortText){var shortText=this.getShortText(post);if(shortText){var description=(0,jquery_107.default)('<span>').addClass('description').text(shortText);if(this.descriptionStyle.css)
description.css((0,HAlignSelector_6.convertCssTextAlignByCurLocale)(this.descriptionStyle.css));captionBody.append(description);var descrLineHeight=this.descriptionStyle.lineHeight||20;var maxDescrHeight=this.thumbHeight-(captionPadding*2)-captionMinHeight;captionMinHeight+=(Math.floor(maxDescrHeight/descrLineHeight)*descrLineHeight)}}
if(captionMinHeight>0)
captionBody.css('max-height',captionMinHeight+'px');var captionWrapper=(0,jquery_107.default)('<div>').addClass('caption-wrapper');captionWrapper.append(captionBody);captionBlock.append(captionWrapper);item.append(captionBlock)}
this.listElem.append(item)}
var maxCaptionWidth=200;var maxWidth=this.thumbWidth+maxCaptionWidth;var thumbnails=this.blogElem.find('.blog-item-thumbnail');this.resizeCallback=function(width,height){if(width<=maxWidth){_this.blogElem.addClass('mobile');thumbnails.css('height',(Math.min(_this.thumbHeight,(_this.thumbHeight/_this.thumbWidth*width)))+'px')}else{_this.blogElem.removeClass('mobile');thumbnails.css('height','')}}};Blog.prototype.renderOneThree=function(){var _this=this;this.renderThumbs();this.blogElemWrapper.addClass('wb-blog-type-thumbs');this.listElem.children().each(function(idx){if(idx%4===0){(0,jquery_107.default)(this).addClass('big')}});var maxColWidth=200;var maxWidth=maxColWidth*3+this.thumbPadding*2;this.resizeCallback=function(width,height){if(width<=maxWidth){_this.blogElem.addClass('mobile')}else{_this.blogElem.removeClass('mobile')}}};Blog.prototype.getUsedFonts=function(){var items=_super.prototype.getUsedFonts.call(this);if(this.titleStyle&&this.titleStyle.font&&this.titleStyle.font!=="")
items.push(this.titleStyle.font);if(this.dateStyle&&this.dateStyle.font&&this.dateStyle.font!=="")
items.push(this.dateStyle.font);if(this.descriptionStyle&&this.descriptionStyle.font&&this.descriptionStyle.font!=="")
items.push(this.descriptionStyle.font);return items};Blog.prototype.getDefaultResizeMode=function(){return ControlsSelection_2.ControlsResizeMode.HORIZONTAL};Blog.prototype.supportsAutoHeight=function(){return!0};Blog.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"data"});this.registerProperty({name:"itemsButton",type:PropertyType_8.PropertyType.BlogItemsButton,uiComponentOptions:{click:function(){this.blogService.Module.editBlog()}}});this.registerProperty({name:"newButton",type:NewItemProperty,uiComponentOptions:{click:function(){this.blogService.Module.editBlogPost(this.createNewPost())}}});this.registerProperty({name:"category",type:PropertyType_8.PropertyType.BlogCategory,dependencies:["data"],uiComponentOptions:function(){var options=[{id:0,name:__("All")}];var categories=this.blogService.Module.getCategories();if(categories&&categories.length)
for(var _i=0,categories_1=categories;_i<categories_1.length;_i++){var category=categories_1[_i];options.push({id:category.id,parentId:category.parentId||void 0,name:category.name})}
return{options:options,}}});this.registerProperty({name:"itemsPerPage",type:PropertyType_8.PropertyType.ItemsPerPage,dependencies:["data"]});this.registerProperty({name:"layout",type:PropertyType_8.PropertyType.BlogLayoutType,dependencies:["data"]});this.registerProperty({name:"thumbWidth",type:PropertyType_8.PropertyType.ThumbnailWidth,dependencies:["data","layout","useThumbnails"],uiComponentOptions:function(){return{visible:this.layout!=BlogLayout_2.BlogLayout.TYPE_ONETHREE,enabled:this.useThumbnails}}});this.registerProperty({name:"thumbHeight",type:PropertyType_8.PropertyType.ThumbnailHeight,dependencies:["data","useThumbnails"],uiComponentOptions:function(){return{enabled:this.useThumbnails}}});this.registerProperty({name:"thumbAlign",type:PropertyType_8.PropertyType.ThumbnailAlignment,dependencies:["data","layout","useThumbnails"],uiComponentOptions:function(){return{visible:this.layout!=BlogLayout_2.BlogLayout.TYPE_LIST,enabled:this.useThumbnails}}});this.registerProperty({name:"thumbPadding",type:PropertyType_8.PropertyType.ThumbnailPadding,dependencies:["data","useThumbnails"],uiComponentOptions:function(){return{enabled:this.useThumbnails}}});this.registerProperty({name:"captionBackground",type:PropertyType_8.PropertyType.BlogCaptionsBackgroundColor,dependencies:["data"]});this.registerProperty({name:"titleStyle",type:PropertyType_8.PropertyType.TitleStyleCombined,dependencies:["data"],uiComponentOptions:function(){return{noScaleFactors:!1,}}});this.registerProperty({name:"descriptionStyle",type:PropertyType_8.PropertyType.TextStyleCombined,dependencies:["data"],uiComponentOptions:function(){return{noScaleFactors:!1,}}});this.registerProperty({name:"dateStyle",type:PropertyType_8.PropertyType.DateStyleCombined,dependencies:["data"],uiComponentOptions:function(){return{noScaleFactors:!1,}}});this.registerProperty({name:"background",type:PropertyType_8.PropertyType.BlogElementBackgroundColor,dependencies:["data"]});this.registerProperty({name:"displayTitle",type:PropertyType_8.PropertyType.ListingShowTitle,dependencies:["data"]});this.registerProperty({name:"displayDate",type:PropertyType_8.PropertyType.ListingShowDates,dependencies:["data"]});this.registerProperty({name:"displayShortText",type:PropertyType_8.PropertyType.ListingShowDescription,dependencies:["data"]});this.registerProperty({name:"disableAnchorNav",type:DisableAnchorNavProperty,dependencies:["data"]});this.registerProperty({name:"useThumbnails",type:PropertyType_8.PropertyType.UseThumbnails,dependencies:["data"]});this.registerProperty({name:"shortTextLength",type:PropertyType_8.PropertyType.ListingMaxDescriptionLength,dependencies:["data","shortTextLength"],uiComponentOptions:function(){return{visible:this.displayShortText,}}})};Blog.pluginName='Blog';return Blog}(Element_12.Element));ElementRegister_14.ElementRegister.registerClass('Blog',Blog)});define("js/Body",["require","exports","js/jquery-builder","js/core/BuilderConfig","js/Service","js/Element","js/ContextMenu","js/BuilderEvent","js/CommonTypes","js/CanvasGrid","js/LayoutElement","js/util/WindowAutoScrollUtil","js/BackgroundControl","js/element/Controls","js/element/ZIndexHandle","js/UserInput","js/ui/PagesDialog","js/util/UID","js/store/StoreModule"],function(require,exports,jquery_builder_18,BuilderConfig_27,Service_49,Element_13,ContextMenu_4,BuilderEvent_19,CommonTypes_21,CanvasGrid_1,LayoutElement_4,WindowAutoScrollUtil_2,BackgroundControl_11,Controls_3,ZIndexHandle_3,UserInput_4,PagesDialog_1,UID_6,StoreModule_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Body=void 0;function collectChildren(element,list,recourse){if(recourse===void 0){recourse=!1}
var children=element.getChildren();for(var _i=0,children_4=children;_i<children_4.length;_i++){var elem=children_4[_i];list.push(elem);if(recourse&&elem.getClassType()=='LayoutElement'){collectChildren(elem,list,recourse)}}}
var Body=(function(){function Body(data,elem){var _this=this;this.elem=elem;this.blocks={};this.children=[];this.menu=null;this.pagesMenu=null;this.noBackground=!1;this.cssRuleIndexes={a:-1,b:-1,c:-1};this.mouseUpEventHandler=null;this.clickEventHandler=null;this.rectEventHandler=null;this.lastBgFixed=!1;this.locTip=null;this.zIndexHandle=new ZIndexHandle_3.ZIndexHandle(this,1000);this.stickyElements=[];this.stickyInvalid=!1;this.stickyUpdateCallback=null;if(!wb_builder.pageId)
throw new Error("Can't create body instance when no page is loaded");var page=wb_builder.site.getPage(wb_builder.pageId);var popupMode=(page&&page.popupMode);this.site=(0,jquery_builder_18.default)('<div id="site">').addClass('wb-site');elem.append(this.site);this.updateLanguageDirection();this.siteCover=(0,jquery_builder_18.default)('<div>').addClass('site_cover').appendTo(this.site);this.siteRoot=(0,jquery_builder_18.default)('<div>').addClass('root wb-layout-vertical').appendTo(this.site);this.secBg=(0,jquery_builder_18.default)('<div class="wb_sbg"></div>');this.siteRoot.append(this.secBg);if(popupMode){this.noBackground=!0;this.site.addClass("wb-center-content wb-pp-mode")}
this.bgSite=data.content.bgSite?data.content.bgSite:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}};this.bg2Site=data.content.bg2Site?data.content.bg2Site:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}};this.blocksData=data.content.blocksData?data.content.blocksData:{};this.grid=new CanvasGrid_1.CanvasGrid(this);this.grid.fromCookie(wb_builder.getCookie("wb_showgrid"));var lastEventSkippedType='';var lastEventSkippedTime=0;this.elem.on('mouseup',this.mouseUpEventHandler=function(e){if((0,Controls_3.isDoingResize)()){lastEventSkippedType=e.type;lastEventSkippedTime=Date.now()}}).on('click',this.clickEventHandler=function(e){if(e.type=='click'&&(lastEventSkippedType=='mouseup'||lastEventSkippedType=='touchend')&&(Date.now()-lastEventSkippedTime)<100){return}
Service_49.Service.group.groupEdit(null);if(!UserInput_4.UserInput.blockNextMouseUpDeselect)
Service_49.Service.element.unselectAll();UserInput_4.UserInput.blockNextMouseUpDeselect=!1;(0,ContextMenu_4.hideAllContextMenus)();e.stopPropagation()}).on('rect-changed',this.rectEventHandler=function(){return _this.updateBackgroundRect()});BuilderEvent_19.GlobalEvents.on('block.main.updatesize',function(){var mainBlock;if(!(mainBlock=_this.getContentBlock(CommonTypes_21.ContentBlockId.Main)))
return;mainBlock.updateSize()});this.initContextMenu();this.updateStyle();this.stickyInit()}
Body.prototype.cleanup=function(){if(this.elem){if(this.mouseUpEventHandler){this.elem.off('mouseup',this.mouseUpEventHandler)}
if(this.clickEventHandler){this.elem.off('click',this.clickEventHandler)}
if(this.rectEventHandler){this.elem.off('rect-changed',this.rectEventHandler)}}};Body.prototype.showInfoTip=function(message,left,top,hAlign,vAlign){var _this=this;if(hAlign===void 0){hAlign="right"}
if(vAlign===void 0){vAlign="down"}
if(!this.locTip){this.locTip=(0,jquery_builder_18.default)('<div class="wb_loctip wb-ethereal"></div>');var docBody_1=(0,jquery_builder_18.default)(document.body);docBody_1.ready(function(){if(_this.locTip)
docBody_1.append(_this.locTip);})}
this.locTip.html(message).css({display:'block',left:left,top:top});if(hAlign!=="right"||vAlign!=="down"){var bounds=this.locTip[0].getBoundingClientRect();if(hAlign==="left")
left-=bounds.width;else if(hAlign==="center")
left-=bounds.width/2;if(vAlign==="up")
top-=bounds.height;else if(vAlign==="center")
top-=bounds.height/2;this.locTip.css({left:left,top:top})}
WindowAutoScrollUtil_2.WindowAutoScrollUtil.fitHtmlElementIntoWindow(this.locTip)};Body.prototype.hideInfoTip=function(){if(this.locTip)
this.locTip.css('display','none');};Body.prototype.getCanvasClientRect=function(){return this.site[0].getBoundingClientRect()};Body.prototype.setDebugLinesVisible=function(visible){for(var k in this.blocks){this.blocks[k].setDebugLinesVisible(visible)}};Body.prototype.getSiteTreeNodeProperties=function(){return{icon:null,name:"Page"}};Body.prototype.getSiteTreeNodeChildren=function(){return this.getChildren()};Body.prototype.getSiteTreeNodeMenu=function(){return this.menu};Body.prototype.isSelected=function(){return!1};Body.prototype.setSelected=function(selected){};Body.prototype.enableDropZones=function(enable){for(var k in this.blocks){this.blocks[k].enableDropZone(enable)}};Body.prototype.switchMode=function(fromMode,toMode,initial){if(initial===void 0){initial=!1}};Body.prototype.getBlockData=function(blockId){return(this.blocksData&&this.blocksData[blockId])?this.blocksData[blockId]:null};Body.prototype.useBlockDataByDefault=function(blockId){return(this.blocksData&&this.blocksData[blockId]&&this.blocksData[blockId].useDefault)};Body.prototype.onBeforeSwitchLanguage=function(){for(var bid in this.blocks){if(typeof this.blocks[bid].onBeforeSwitchLanguage==='function'){this.blocks[bid].onBeforeSwitchLanguage()}}};Body.prototype.onSwitchLanguage=function(langCode){this.updateLanguageDirection(langCode);for(var bid in this.blocks){if(typeof this.blocks[bid].onSwitchLanguage==='function'){this.blocks[bid].onSwitchLanguage(langCode)}}};Body.prototype.updateLanguageDirection=function(langCode){var rtl=wb_builder.site.rtl,lang;if(langCode&&(lang=BuilderConfig_27.wbConfig.getLanguageByCode(langCode))){rtl=lang.rtl}
this.site.attr({dir:(rtl?'rtl':'ltr')})};Body.prototype.__destruct=function(){var _a,_b;this.stickyDeInit();for(var bid in this.blocks){if(typeof(this.blocks[bid].__destruct)==="function"){this.blocks[bid].__destruct(!0)}}
var siteBgVideoElem=this.site.children('.wb_site_video_background');(0,BackgroundControl_11.disposeVideoBackground)(siteBgVideoElem);this.siteCover.detach();this.site.empty().append(this.siteCover);this.site.detach();(_a=this.pagesMenu)===null||_a===void 0?void 0:_a.dispose();(_b=this.menu)===null||_b===void 0?void 0:_b.dispose()};Body.prototype.serialize=function(){return{"class":"Body",content:{blocksData:Object.assign({},this.blocksData),bgSite:this.bgSite,bg2Site:this.bg2Site,}}};Body.prototype.addElement=function(blockId,elem,noZReset,initial){if(noZReset===void 0){noZReset=!1}
if(initial===void 0){initial=!1}
var _blockId=blockId;if(elem instanceof LayoutElement_4.LayoutElement&&!blockId){this.blocks[_blockId=elem.rootBlockType||elem.id]=elem;this.children.push(elem);elem.setLayoutConstraints(CommonTypes_21.ChildrenLayoutType.Vertical,initial);elem.updateStyle(initial);this.siteRoot.append(elem.elem);elem.updateHierarchyLevel(!0,initial)}else{if(!this.blocks[_blockId]&&_blockId==="wb_left")
_blockId="wb_right";if(!this.blocks[_blockId]&&_blockId==="wb_right")
_blockId="wb_left";if(!this.blocks[_blockId])
_blockId=CommonTypes_21.ContentBlockId.Main;if(!this.blocks[_blockId])
_blockId="wb_main";if(!this.blocks[_blockId])
_blockId="wb_content";if(!this.blocks[_blockId]){if(this.isEmpty())
this.iniDefaultBlock();for(var k in this.blocks){_blockId=k;break}}
if(this.blocks[_blockId]){this.blocks[_blockId].addChild(elem,noZReset,initial)}}
return _blockId};Body.prototype.addChild=function(element,noZReset,initial,refElem,after){var refIdx=(refElem instanceof Element_13.Element)?(refElem?this.children.indexOf(refElem):-1):-1;if(refElem&&refIdx<0)
return!1;var idx=this.children.indexOf(element);if(idx>=0&&(!refElem||refElem===element))
return!1;var oldParent=element.getParent();if(!oldParent&&(!refElem||refElem===element))
return!1;if(oldParent){oldParent.removeChild(element)}else if(element instanceof LayoutElement_4.LayoutElement){this.removeChild(element);refIdx=(refElem instanceof Element_13.Element)?(refElem?this.children.indexOf(refElem):-1):-1}
if(refElem){if(after){refElem.elem.after(element.elem)}else{refElem.elem.before(element.elem)}}else this.siteRoot.append(element.elem);this.blocks[element.rootBlockType||element.id]=element;element.setParent(null);if(refIdx>=0)
this.children.splice(refIdx+(after?1:0),0,element);else this.children.push(element);element.setLayoutConstraints(CommonTypes_21.ChildrenLayoutType.Vertical);if(!initial)
element.updateStyle();if(!initial){BuilderEvent_19.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_19.SiteStructureChangedBuilderEvent())}
return!0};Body.prototype.removeChild=function(element,batch){if(batch===void 0){batch=!1}
var idx=this.children.indexOf(element);if(idx>=0){this.children.splice(idx,1);delete this.blocks[element.rootBlockType||element.id];element.elem.detach()}
if(!batch){BuilderEvent_19.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_19.SiteStructureChangedBuilderEvent())}};Body.prototype.iniDefaultBlock=function(){var block=new LayoutElement_4.LayoutElement({'class':'LayoutElement',id:UID_6.UID.create(),rootBlockType:CommonTypes_21.ContentBlockId.Main});block.setLayoutConstraints(CommonTypes_21.ChildrenLayoutType.Vertical);this.addElement('',block,!0,!0)};Body.prototype.isEmpty=function(){for(var ignored in this.blocks){return!1}
return!0};Body.prototype.zReset=function(){this.zIndexHandle.changeLayer();for(var blockId in this.blocks){this.blocks[blockId].zReset()}};Body.prototype.getContentBlock=function(blockId){return this.blocks[blockId]?this.blocks[blockId]:null};Body.prototype.getContentBlocks=function(){var blocks=[];for(var blockId in this.blocks)
if(this.blocks.hasOwnProperty(blockId))
blocks.push(this.blocks[blockId]);return blocks};Body.prototype.getContentElements=function(recourse){if(recourse===void 0){recourse=!1}
var list=[];for(var k in this.blocks){collectChildren(this.blocks[k],list,recourse)}
return list};Body.prototype.getStringifyElements=function(){var elements=[];if(StoreModule_2.Module.items.length){elements.push(JSON.stringify(StoreModule_2.Module.items))}
this.traverseElements(function(element,isRoot,isBackground,rootBlockType){if(element.className=='Blog'){elements.push(JSON.stringify(element.Posts))}else if(isRoot){elements.push(JSON.stringify(element.serialize()))}
return CommonTypes_21.TraverseControl.Continue});return elements.join(',')};Body.prototype.isFileInUseInElements=function(filename,elements){var _a,_b,_c,_d,_e,_f;if((((_a=wb_builder.site.pages[wb_builder.pageId].background)===null||_a===void 0?void 0:_a.image)&&((_c=(_b=wb_builder.site.pages[wb_builder.pageId].background)===null||_b===void 0?void 0:_b.image)===null||_c===void 0?void 0:_c.indexOf('/'+filename))!==-1)||(((_d=wb_builder.site.pages[wb_builder.pageId].background2)===null||_d===void 0?void 0:_d.image)&&((_f=(_e=wb_builder.site.pages[wb_builder.pageId].background2)===null||_e===void 0?void 0:_e.image)===null||_f===void 0?void 0:_f.indexOf('/'+filename))!==-1)||(elements.indexOf('/'+filename+'"')!==-1)){return!0}
return!1};Body.prototype.getChildren=function(){return __spreadArray([],this.children,!0)};Body.prototype.getChildIndex=function(element){return this.children.indexOf(element)};Body.prototype.getChildAt=function(index){return(index>=0&&index<this.children.length)?this.children[index]:null};Body.prototype.traverseElements=function(callback){this.traverseElementsInternal(this.children,!0,!1,null,callback)};Body.prototype.traverseElementsInternal=function(elements,isRoot,isBackground,rootBlockType,callback){for(var _i=0,elements_12=elements;_i<elements_12.length;_i++){var element=elements_12[_i];if(isRoot)
rootBlockType=element.rootBlockType;var ctl=callback(element,isRoot,isBackground,rootBlockType);if(ctl===CommonTypes_21.TraverseControl.Break)
return!1;if(ctl!==CommonTypes_21.TraverseControl.SkipChildren){if(element instanceof LayoutElement_4.LayoutElement){var bgElement=element.backgroundElement;if(bgElement)
if(!this.traverseElementsInternal([bgElement],!1,!0,rootBlockType,callback))
return!1}
if('getChildren' in element)
if(!this.traverseElementsInternal(element.getChildren(),!1,!1,rootBlockType,callback))
return!1}}
return!0};Body.prototype.updateSize=function(block){console.warn("Body.updateSize() is deprecated.");var parent=block.elem;while(parent.length&&parent.attr("id")!=="site"&&(parent=parent.parent())){var maxH=0;parent.children(".hbox").css("height","");parent.children().each(function(){if((0,jquery_builder_18.default)(this).hasClass("site_cover")||(0,jquery_builder_18.default)(this).hasClass("wb-active-zone")||(0,jquery_builder_18.default)(this).hasClass("wb_sbg")||(0,jquery_builder_18.default)(this).hasClass("wb_site_background"))
return;var height=(((0,jquery_builder_18.default)(this).css("minHeight")+"").replace("px","")*1);var height2=(0,jquery_builder_18.default)(this).outerHeight(!0);var h=(0,jquery_builder_18.default)(this).position().top+((height&&height>height2)?height:height2);if(h>maxH)
maxH=h});parent.css("height",maxH+"px");parent.children(".hbox").css("height",maxH+"px")}
for(var k in this.blocks){var mBlock=this.blocks[k];mBlock.setSize(null,mBlock.elem.height())}};Body.prototype.updateBackgroundRect=function(){var _this=this;window.requestAnimationFrame(function(){var siteBgElem=_this.site.children('.wb_site_background');if(_this.lastBgFixed){var rect=_this.site[0].getBoundingClientRect();siteBgElem.css({position:'fixed',width:rect.width+'px',left:rect.left+'px',top:rect.top+(window.scrollY||0)+'px',})}else{siteBgElem.css({position:'absolute',width:'100%',left:0,top:0,})}
_this.site.find('.root').find('.wb-layout-element').trigger('rect-changed')})};Body.prototype.applySiteBackground=function(background){if(!background||typeof(background)!=='object')
return;var siteBgElem=this.site.children('.wb_site_background');var siteBgVideoElem=this.site.children('.wb_site_video_background');if(background.isVideo&&background.image){siteBgElem.hide();if(!siteBgVideoElem.length){siteBgVideoElem=(0,jquery_builder_18.default)('<div class="wb_site_video_background wb_video_background" id="wb_site_video_background">');this.site.prepend(siteBgVideoElem)}
siteBgVideoElem.show();(0,BackgroundControl_11.runVideoByBackground)(background,siteBgVideoElem);this.site.css('background-color',''+background.color);if(typeof background.opacity==="number")
siteBgVideoElem.css('opacity',(background.opacity/100));}else if(background.css&&typeof(background.css)==='object'){(0,BackgroundControl_11.runVideoByBackground)(null,siteBgVideoElem);siteBgVideoElem.hide();if(!siteBgElem.length){siteBgElem=(0,jquery_builder_18.default)('<div class="wb_site_background">').css({position:'absolute',width:'100%',height:'100%',top:0,left:0});this.site.prepend(siteBgElem)}
siteBgElem.show();var bg=jquery_builder_18.default.extend(!0,{},background);var bgColor=bg.color;bg.color='transparent';if(bg.attachment=='fixed'){bg.attachment='scroll';this.lastBgFixed=!0}else{this.lastBgFixed=!1}
this.updateBackgroundRect();siteBgElem.css((0,BackgroundControl_11.buildCss)(bg,PagesDialog_1.PAGE_BACKGROUND_OPTIONS,!0).css||{});this.site.css('background-color',''+bgColor)}};Body.prototype.updateStyle=function(updateBlocks,initial){if(updateBlocks===void 0){updateBlocks=!1}
if(initial===void 0){initial=!1}
if(this.noBackground){this.applySiteBackground({color:'transparent',css:{background:'transparent'}});this.secBg.css({background:'transparent'})}else{var p=wb_builder.site.getPage(wb_builder.pageId);var bg=(p&&p.background&&((p.background.image&&p.background.image!=="none")||(p.background.color&&p.background.color!=="transparent")))?jquery_builder_18.default.extend(!0,{},p.background):jquery_builder_18.default.extend(!0,{},this.bgSite);var css=bg.css;if(css.background&&bg.image&&bg.image!=="none"){css.background=css.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(bg.image,!0)+'")')}
var pos,m;this.applySiteBackground(bg);var bg2=(p&&p.background2&&((p.background2.image&&p.background2.image!=="none")||(p.background2.color&&p.background2.color!=="transparent")))?jquery_builder_18.default.extend(!0,{},p.background2):jquery_builder_18.default.extend(!0,{},this.bg2Site);css=bg2.css;if(css.background&&bg2.image&&bg2.image!=="none"){css.background=css.background.replace(/url\([^\)]+\)/i,'url("'+wb_builder.makeLocalUrl(bg2.image,!0)+'")')}
if(css.background&&bg2.attachment==='fixed'&&(m=bg2.position.split(' '))&&m.length===2&&m[1]==='top'){pos=m[0]+' '+this.elem.getBounds().top+'px';css.background=css.background.replace(bg2.position,pos)}
this.secBg.css(css)}
this.site.css('min-width',Service_49.Service.modeManager.getMinWidth());if(updateBlocks){for(var k in this.blocks)
this.blocks[k].updateStyle(!0);}};Body.prototype.cacheBounds=function(){for(var k in this.blocks)
this.blocks[k].cacheBounds();};Body.prototype.initContextMenu=function(){var _this=this;var thisClass=this;this.menu=new ContextMenu_4.ContextMenu("wb_body_contextmenu");this.pagesMenu=new ContextMenu_4.ContextMenu();if(!wb_builder.isComposer){this.menu.addItem("comConfig",__("Background"),function(){wb_builder.site.changePages().waitClose().done(function(){_this.updateStyle(!0,!1)})},!1,!1,null,"glyphicon glyphicon-cog")}
this.menu.onShow=function(ctxmenu,e){var ea=new BuilderEvent_19.ContextMenuEvent(ctxmenu,(e?e.pageX:0),(e?e.pageY:0),thisClass);BuilderEvent_19.GlobalEvents.triggerEvent('contextmenu.show',ea)}};Body.prototype.stickyInit=function(){var _this=this;if(this.stickyUpdateCallback)
return;var watcher=0,retry=0,lastSize;var animationWatcherFunc=function(){var size=_this.stickyUpdate();if(size!==lastSize){retry=0;watcher=requestAnimationFrame(animationWatcherFunc)}else if(++retry<=2)
watcher=requestAnimationFrame(animationWatcherFunc);else watcher=0;lastSize=size};this.stickyUpdateCallback=function(){if(watcher)
cancelAnimationFrame(watcher);lastSize="";retry=0;watcher=requestAnimationFrame(animationWatcherFunc)};(0,jquery_builder_18.default)(window).on("orientationchange resize scroll",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.on("modes.changed",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.on("site.structure.changed",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.on("modal.show",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.on("modal.hide",this.stickyUpdateCallback);for(var i=250;i<5000;i+=250)
setTimeout(this.stickyUpdateCallback,i);};Body.prototype.stickyDeInit=function(){if(!this.stickyUpdateCallback)
return;(0,jquery_builder_18.default)(window).off("orientationchange resize scroll",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.off("modes.changed",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.off("site.structure.changed",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.off("modal.show",this.stickyUpdateCallback);BuilderEvent_19.GlobalEvents.off("modal.hide",this.stickyUpdateCallback);this.stickyUpdateCallback=null;this.siteRoot.css({paddingLeft:"",paddingTop:"",paddingRight:"",paddingBottom:""})};Body.prototype.registerStickyElement=function(element){this.stickyElements.push(element);this.stickyInvalidate()};Body.prototype.unregisterStickyElement=function(element){var idx=this.stickyElements.indexOf(element);if(idx>=0){this.stickyElements.splice(idx,1);this.stickyInvalidate()}};Body.prototype.stickyInvalidate=function(){var _this=this;if(this.stickyInvalid)
return;this.stickyInvalid=!0;requestAnimationFrame(function(){return _this.stickyUpdate()})};Body.prototype.stickyUpdate=function(){this.stickyInvalid=!1;var viewportRect=wb_builder.getViewportRect();if(!viewportRect||viewportRect.width<=0||viewportRect.height<=0)
return"";viewportRect.right=viewportRect.left+viewportRect.width;viewportRect.bottom=viewportRect.top+viewportRect.height;var padding={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};for(var _i=0,_a=this.stickyElements;_i<_a.length;_i++){var element=_a[_i];var _b=(element.stickyAlign||"center top").split(" "),hAlign=_b[0],vAlign=_b[1];var rect=element.getBoundingClientRect();if(rect.top<=viewportRect.top&&rect.bottom>=viewportRect.bottom){if(hAlign==="left")
padding.paddingLeft=Math.max(padding.paddingLeft,Math.round(rect.right-viewportRect.left));else if(hAlign==="right")
padding.paddingRight=Math.max(padding.paddingRight,Math.round(viewportRect.right-rect.left));}else if(rect.left<=viewportRect.left&&rect.right>=viewportRect.right){if(vAlign==="top")
padding.paddingTop=Math.max(padding.paddingTop,Math.round(rect.bottom-viewportRect.top));else if(vAlign==="bottom")
padding.paddingBottom=Math.max(padding.paddingBottom,Math.round(viewportRect.bottom-rect.top));}}
this.siteRoot.css(padding);var mainBlock=this.getContentBlock(CommonTypes_21.ContentBlockId.Main);if(mainBlock){var minBodyHeight=viewportRect.height-padding.paddingTop-padding.paddingBottom;for(var k in this.blocks){if(!this.blocks.hasOwnProperty(k))
continue;var block=this.blocks[k];if(block.isSticky)
continue;var margin=block.individualMargin;minBodyHeight-=((k===CommonTypes_21.ContentBlockId.Main)?0:block.getHeightInPixels())+(margin?(margin.marginTop+margin.marginBottom):0)}
mainBlock.forceMinHeightCss(Math.max(0,minBodyHeight))}
return"".concat(viewportRect.left,"|").concat(viewportRect.top,"|").concat(viewportRect.right,"|").concat(viewportRect.bottom,"|").concat(viewportRect.width,"|").concat(viewportRect.height)};Body.prototype.getCurrentPaddingTop=function(){var p=parseInt(this.siteRoot.css('padding-top'));return p?p:0};return Body}());exports.Body=Body});define("js/core/SitePage",["require","exports","js/util/UID"],function(require,exports,UID_7){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Page=exports.PageType=void 0;var PageType;(function(PageType){PageType[PageType.TYPE_PAGE=0]="TYPE_PAGE";PageType[PageType.TYPE_POPUP=1]="TYPE_POPUP";PageType[PageType.TYPE_404=2]="TYPE_404";PageType[PageType.TYPE_MAINTENANCE=3]="TYPE_MAINTENANCE"})(PageType||(exports.PageType=PageType={}));var Page=(function(){function Page(data){this.parentId=null;this.enabled=!0;this.type=PageType.TYPE_PAGE;this.sortOrder=0;this.isNew=!0;this.site=null;this.isNew=!data||(data.hasOwnProperty("isNew")&&!!data.isNew);this.id=data?data.id:UID_7.UID.create();this.parentId=(data&&data.parentId)?data.parentId:null;this.type=(data&&data.type)?data.type:PageType.TYPE_PAGE;this.enabled=this.isServicePage()?(data&&data.enabled?data.enabled:!1):!0;this.sortOrder=(data&&data.sortOrder)?data.sortOrder:0;this.isFront=!!(data&&data.isFront);this.name=(data&&data.name)?data.name:"";this.title=(data&&data.title)?data.title:"";this.alias=(data&&data.alias)?data.alias:"";this.keywords=(data&&data.keywords)?data.keywords:"";this.description=(data&&data.description)?data.description:"";this.image=(data&&data.image)?data.image:null;this.noindex=!!(data&&data.noindex);this.copyFrom=(data&&data.copyFrom)?data.copyFrom:null;this.copyClearHeader=!!(data&&data.copyClearHeader);this.copyClearBody=!!(data&&data.copyClearBody);this.copyClearFooter=!!(data&&data.copyClearFooter);this.blocks=(data&&data.blocks)?data.blocks:{};this.importedFromUrl=(data&&data.importedFromUrl)?data.importedFromUrl:null;this.fixedHeader=!!(data&&data.fixedHeader);this.noPageBg=!!(data&&data.noPageBg);this.background=(data&&data.background)?data.background:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}};this.background2=(data&&data.background2)?data.background2:{color:"transparent",image:"none",position:"left top",repeat:"repeat",css:{background:"transparent none repeat scroll left top"}};this.popupWidth=(data&&data.popupWidth)?data.popupWidth:null;this.popupMinWidth=(data&&data.popupMinWidth)?data.popupMinWidth:null;this.popupMaxWidth=(data&&data.popupMaxWidth)?data.popupMaxWidth:null;this.popupHeight=(data&&data.popupHeight)?data.popupHeight:null;this.openPopupPageId=(data&&data.openPopupPageId)?data.openPopupPageId:null;this.headSnippetsHtml=(data&&data.headSnippetsHtml)?data.headSnippetsHtml:"";this.bodySnippetsHtml=(data&&data.bodySnippetsHtml)?data.bodySnippetsHtml:"";this.bodyStartSnippetsHtml=(data&&data.bodyStartSnippetsHtml)?data.bodyStartSnippetsHtml:""}
Object.defineProperty(Page.prototype,"popupMode",{get:function(){return this.type===PageType.TYPE_POPUP},enumerable:!1,configurable:!0});Page.prototype.isServicePage=function(){return this.type===PageType.TYPE_404||this.type===PageType.TYPE_MAINTENANCE};Page.prototype.getPageIcon=function(){var icon="fa fa-folder-open";if(this.type===PageType.TYPE_404)
icon="fa ico-404";else if(this.type===PageType.TYPE_MAINTENANCE)
icon="fa fa-wrench";else if(this.popupMode)
icon="fa fa-window-maximize";else if(this.isFront)
icon="fa fa-home";return icon};Page.prototype.serialize=function(){var data={id:this.id,parentId:this.parentId,enabled:this.enabled,type:this.type,sortOrder:this.sortOrder,isNew:this.isNew,name:this.name,isFront:!!this.isFront,title:this.title,alias:this.alias,keywords:this.keywords,description:this.description,image:this.image||undefined,noindex:!!this.noindex,background:this.background,background2:this.background2,copyFrom:this.copyFrom,copyClearHeader:this.copyClearHeader||undefined,copyClearBody:this.copyClearBody||undefined,copyClearFooter:this.copyClearFooter||undefined,fixedHeader:this.fixedHeader,importedFromUrl:this.importedFromUrl||undefined,noPageBg:this.noPageBg,popupMode:!!this.popupMode,popupWidth:this.popupWidth||undefined,popupMinWidth:this.popupMinWidth||undefined,popupMaxWidth:this.popupMaxWidth||undefined,popupHeight:this.popupHeight||undefined,openPopupPageId:this.openPopupPageId||undefined,headSnippetsHtml:this.headSnippetsHtml||undefined,bodySnippetsHtml:this.bodySnippetsHtml||undefined,bodyStartSnippetsHtml:this.bodyStartSnippetsHtml||undefined};if(this.isNew&&this._placementRefPage!==void 0){data._placementRefPage=this._placementRefPage;data._placementRefPosition=this._placementRefPosition}
return data};return Page}());exports.Page=Page});define("js/FontManager",["require","exports","js/BuilderEvent","js/core/BuilderConfig","jquery","js/util/TextUtil"],function(require,exports,BuilderEvent_20,BuilderConfig_28,jquery_108,TextUtil){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FontManager=exports.FontManagerModule=exports.UploadedFont=exports.GoogleFontUsage=exports.GoogleFont=exports.GoogleFontVariantData=void 0;var GoogleFontVariantData=(function(){function GoogleFontVariantData(weight,italic){this.weight=weight;this.italic=italic}
return GoogleFontVariantData}());exports.GoogleFontVariantData=GoogleFontVariantData;var GoogleFont=(function(){function GoogleFont(data){this.earlyAccessUrl=null;if(data){this.family=data.family;this.category=data.category;this.variants=[];for(var i=0;i<data.variants.length;i++)
this.variants.push(GoogleFont.getVariantUrlValue(data.variants[i]));this.variants.sort();this.subsets=data.subsets.slice();this.subsets.sort();this.earlyAccessUrl=data.hasOwnProperty("earlyAccessUrl")?data.earlyAccessUrl:null}}
GoogleFont.getVariantUrlValue=function(variant){if(variant==="regular")
return"400";if(variant==="italic")
return"400i";if(/^[0-9]{3}italic$/.test(variant))
return variant.substr(0,3)+"i";return variant};GoogleFont.parseVariantCode=function(variant){if(/^[0-9]+i$/.test(variant))
return new GoogleFontVariantData(variant.substr(0,variant.length-1),!0);return new GoogleFontVariantData(variant,!1)};GoogleFont.getVariantName=function(variant){var vd=GoogleFont.parseVariantCode(variant);switch(vd.weight){case "100":{vd.weight=__("Thin")+" "+vd.weight;break}
case "200":{vd.weight=__("Extra-Light")+" "+vd.weight;break}
case "300":{vd.weight=__("Light")+" "+vd.weight;break}
case "400":{vd.weight=__("Regular")+" "+vd.weight;break}
case "500":{vd.weight=__("Medium")+" "+vd.weight;break}
case "600":{vd.weight=__("Semi-Bold")+" "+vd.weight;break}
case "700":{vd.weight=__("Bold")+" "+vd.weight;break}
case "800":{vd.weight=__("Extra-Bold")+" "+vd.weight;break}
case "900":{vd.weight=__("Black")+" "+vd.weight;break}}
return vd.weight+(vd.italic?" "+__("Italic"):"")};GoogleFont.getSubsetName=function(subset){switch(subset){case "arabic":return __("Arabic");case "bengali":return __("Bengali");case "cyrillic":return __("Cyrillic");case "cyrillic-ext":return __("Cyrillic Extended");case "devanagari":return __("Devanagari");case "greek":return __("Greek");case "greek-ext":return __("Greek Extended");case "gujarati":return __("Gujarati");case "gurmukhi":return __("Gurmukhi");case "hebrew":return __("Hebrew");case "kannada":return __("Kannada");case "khmer":return __("Khmer");case "latin":return __("Latin");case "latin-ext":return __("Latin Extended");case "malayalam":return __("Malayalam");case "myanmar":return __("Myanmar");case "oriya":return __("Oriya");case "sinhala":return __("Sinhala");case "tamil":return __("Tamil");case "telugu":return __("Telugu");case "thai":return __("Thai");case "vietnamese":return __("Vietnamese")}
return subset};GoogleFont.prototype.getLocalUrl=function(){return BuilderConfig_28.wbConfig.getRawLnUrl('fonts',{data:btoa(JSON.stringify(this.serialize()))})};GoogleFont.prototype.getUrl=function(variants,subsets){if(this.earlyAccessUrl)
return"https://"+this.earlyAccessUrl;return"https://fonts.googleapis.com/css?family="+this.family+":"+variants.join(",")+(subsets.length?("&subset="+subsets.join(",")):"")};GoogleFont.prototype.getCssFontFamily=function(){var fontFamily="'"+this.family+"'";switch(this.category){case "sans-serif":fontFamily+=",Arial,sans-serif";break;case "serif":fontFamily+=",Arial,serif";break;case "monospace":fontFamily+=",Arial,monospace";break;case "handwriting":fontFamily+=",Arial,cursive";break;default:fontFamily+=",Arial,"+this.category;break}
return fontFamily};GoogleFont.prototype.clone=function(){var obj=new GoogleFont();obj.family=this.family;obj.category=this.category;obj.earlyAccessUrl=this.earlyAccessUrl;obj.variants=this.variants.slice();obj.subsets=this.subsets.slice();return obj};GoogleFont.fromJson=function(data){var obj=new GoogleFont();obj.family=data.family;obj.category=data.category;obj.earlyAccessUrl=data.hasOwnProperty("earlyAccessUrl")?data.earlyAccessUrl:null;obj.variants=data.variants;obj.subsets=data.subsets;return obj};GoogleFont.prototype.serialize=function(){return{family:this.family,category:this.category,earlyAccessUrl:this.earlyAccessUrl,variants:this.variants,subsets:this.subsets}};return GoogleFont}());exports.GoogleFont=GoogleFont;var GoogleFontUsage=(function(){function GoogleFontUsage(font){this.font=font;this.variants=[];this.subsets=[]}
GoogleFontUsage.fromJson=function(data){var obj=new GoogleFontUsage(GoogleFont.fromJson(data.font));obj.variants=data.variants;obj.subsets=data.subsets;return obj};GoogleFontUsage.prototype.serialize=function(){return{font:this.font.serialize(),variants:this.variants,subsets:this.subsets}};GoogleFontUsage.prototype.clone=function(){var obj=new GoogleFontUsage(this.font.clone());obj.variants=this.variants.slice();obj.subsets=this.subsets.slice();return obj};return GoogleFontUsage}());exports.GoogleFontUsage=GoogleFontUsage;var UploadedFont=(function(){function UploadedFont(data){if(data){this.name=typeof data.name==='string'?data.name.replace(/[\\'\-"]/g,""):data.name;this.woff2=data.woff2;this.woff=data.woff;this.otf=data.otf;this.ttf=data.ttf;this.eot=data.eot;this.svg=data.svg}}
UploadedFont.prototype.serialize=function(){return{name:this.name,woff2:this.woff2,woff:this.woff,otf:this.otf,ttf:this.ttf,eot:this.eot,svg:this.svg,}};UploadedFont.prototype.clone=function(){return new UploadedFont(this.serialize())};return UploadedFont}());exports.UploadedFont=UploadedFont;var FontManagerModule=(function(){function FontManagerModule(){this.state="none";this.uploadedFonts={};this.uploadedFontElements={};this.fontElements={};this.ready=!1;this.error=null;this.fontThumbs=null}
FontManagerModule.getHardcodedFontList=function(){return["Arial","Batang","Capture it","Avenir Light","Comic Sans MS","Courier New","Dotum","Georgia","Gulim","Helvetica","Microsoft JhengHei","Malgun Gothic","MingLiU","Myriad Set Pro","Nanum Gothic","BYekan","BNazanin","BZar","IranNastaliq","IRANSansWeb","AtlanticCruise","Vazir","Nahid","Lucida Grande","PMingLiU","Tahoma","Times New Roman","Trebuchet MS","Verdana","Sylfaen"]};FontManagerModule.getForcedCustomFonts=function(){return["Exo 2","Open Sans","Open Sans Condensed","PT Sans","PT Sans Caption","PT Sans Narrow","Roboto","Roboto Condensed","Roboto Slab"]};FontManagerModule.prototype.forceCustomFontsUsage=function(){if(!this.ready)
return;var i,forcedFonts={};for(var _i=0,_a=FontManagerModule.getForcedCustomFonts();_i<_a.length;_i++){i=_a[_i];forcedFonts[i]=!0}
for(i in this.availableFonts){var font=this.availableFonts[i];if(!forcedFonts.hasOwnProperty(font.family))
continue;var usage=new GoogleFontUsage(font);usage.subsets=font.subsets.slice();usage.variants=font.variants.slice();wb_builder.site.usedCustomFonts[i]=usage;this.createFontLinkElementForFont(font)}
for(i in this.uploadedFonts){var font=this.uploadedFonts[i];var uploaded=new UploadedFont(font);wb_builder.site.uploadedFonts[uploaded.name]=uploaded;this.createUploadedFontLinkElementForFont(uploaded)}};FontManagerModule.prototype.init=function(){if(this.state!="none")
return;var thisClass=this;this.availableFonts={};this.state="loading";jquery_108.default.ajax({url:wb_builder.availableFontsUrl,type:"GET",dataType:"json",async:!0,success:function(resp){if(resp.error){thisClass.state="error";thisClass.error=resp.error}else{for(var i=0;i<resp.items.length;i++)
thisClass.availableFonts[resp.items[i].family]=new GoogleFont(resp.items[i]);thisClass.state="done";thisClass.ready=!0;thisClass.forceCustomFontsUsage()}},error:function(){thisClass.state="error";thisClass.error=__("Failed to load list of available fonts")+" (1)"}})};FontManagerModule.prototype.loadFontThumbs=function(callback){var _this=this;if(this.fontThumbs)
callback();else{var cb_2=callback;jquery_108.default.ajax({url:wb_builder.fontThumbsUrl,type:"GET",dataType:"json",async:!0,success:function(resp){_this.fontThumbs=resp;cb_2()},error:function(){_this.state="error";_this.error=__("Failed to load list of available fonts")+" (2)";cb_2()}})}};FontManagerModule.prototype.createFontLinkElementForFont=function(font,doc){var fontId=font.family;var elem=(0,jquery_108.default)('<link/>').attr({rel:"stylesheet",type:"text/css",href:(BuilderConfig_28.wbConfig.forceLocalFonts?font.getLocalUrl():font.getUrl(font.variants,font.subsets))});if(!doc)
doc=document;doc.getElementsByTagName('head')[0].appendChild(elem.get(0));return this.fontElements[fontId]=elem};FontManagerModule.prototype.createUploadedFontLinkElementForFont=function(font,doc){var fontName=font.name;if(!doc&&this.uploadedFontElements[fontName]){this.uploadedFontElements[fontName].remove()}
var elem=(0,jquery_108.default)('<style/>').attr({type:"text/css",});var css="@font-face {\n font-family: '"+fontName+"';";var urls=[];if(font.woff2)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.woff2),!0)+"') format('woff2')");if(font.woff)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.woff),!0)+"') format('woff')");if(font.otf)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.otf),!0)+"') format('opentype')");if(font.ttf)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.ttf),!0)+"') format('truetype')");if(font.eot)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.eot),!0)+"') format('embedded-opentype')");if(font.svg)
urls.push("url('"+TextUtil.urlEncode(wb_builder.makeLocalUrl(font.svg),!0)+"') format('svg')");if(urls.length){css+="\n src: "+urls.join(', ')+';'}
css+="\n}";elem.html(css);if(!doc)
doc=document;doc.getElementsByTagName('head')[0].appendChild(elem.get(0));return this.uploadedFontElements[fontName]=elem};FontManagerModule.prototype.getFontThumbnail=function(font){var $item;if(this.fontThumbs&&this.fontThumbs.hasOwnProperty(font.family)){$item=(0,jquery_108.default)('<img>').attr("src",this.fontThumbs[font.family]).attr("alt",font.family).attr("title",font.family)}else{this.createFontLinkElement(font.family);$item=(0,jquery_108.default)('<span>').css({fontSize:"20px",fontFamily:font.family,padding:"0 10px"}).attr("title",font.family);$item.text(font.family)}
return $item};FontManagerModule.prototype.getUploadedFontThumbnail=function(font){var $item;this.createUploadedFontLinkElement(font);$item=(0,jquery_108.default)('<span>').css({fontSize:"20px",fontFamily:font.name,padding:"0 10px"}).attr("title",font.name);$item.text(font.name);return $item};FontManagerModule.prototype.createFontLinkElement=function(fontId){if(fontId in this.fontElements)
return this.fontElements[fontId];if(!(fontId in this.availableFonts))
return null;return this.createFontLinkElementForFont(this.availableFonts[fontId])};FontManagerModule.prototype.createUploadedFontLinkElement=function(font){if(this.uploadedFontElements[font.name])
return this.uploadedFontElements[font.name];return this.createUploadedFontLinkElementForFont(font)};FontManagerModule.prototype.removeFontLinkElement=function(fontId){if(fontId in this.fontElements)
this.fontElements[fontId].remove();};FontManagerModule.prototype.addCustomFontUsage=function(font,forPreview){if(forPreview===void 0){forPreview=!1}
var fontFamily=font.split(',')[0].replace(/^["']/,'').replace(/["']$/,'');for(var i in this.availableFonts){var font_1=this.availableFonts[i];if(font_1.family!=fontFamily)
continue;if(wb_builder.site.usedCustomFonts.hasOwnProperty(i))
break;if(!forPreview){var usage=new GoogleFontUsage(font_1);usage.subsets=font_1.subsets.slice();usage.variants=font_1.variants.slice();wb_builder.site.usedCustomFonts[i]=usage;var e=new BuilderEvent_20.FontsChangedBuilderEvent();BuilderEvent_20.GlobalEvents.triggerEvent("fonts.changed",e)}
this.createFontLinkElement(i)}};return FontManagerModule}());exports.FontManagerModule=FontManagerModule;exports.FontManager=new FontManagerModule()});define("js/ElementComposition",["require","exports","js/CommonTypes","Site","js/Service","js/ColorPicker","js/BorderControl","jquery","js/util/UID"],function(require,exports,CommonTypes_22,Site_2,Service_50,ColorPicker_17,BorderControl_11,jquery_109,UID_8){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ElementCompositionCollection=exports.ElementCompositionGroup=exports.ElementComposition=exports.ElementCompositionCreationData=exports.DisplayCompositionAs=void 0;var DisplayCompositionAs;(function(DisplayCompositionAs){DisplayCompositionAs.Icon="icon";DisplayCompositionAs.IconAndText="icon_and_text";DisplayCompositionAs.Render="render";DisplayCompositionAs.RenderAndText="render_and_text";DisplayCompositionAs.Image="image";DisplayCompositionAs.ImageAndText="image_and_text"})(DisplayCompositionAs||(exports.DisplayCompositionAs=DisplayCompositionAs={}));var ElementCompositionCreationData=(function(){function ElementCompositionCreationData(composition,elementData,fonts,styles){this.composition=composition;this.elementData=jquery_109.default.extend(!0,[],elementData);this.fonts=fonts;this.styles=[];for(var _i=0,styles_3=styles;_i<styles_3.length;_i++){var styleDef=styles_3[_i];var style=new Site_2.Style(styleDef);style.ident=0;this.styles.push(style)}}
ElementCompositionCreationData.prototype.replaceStrings=function(find,replaceWith,includeStyles){ElementCompositionCreationData.replaceDataStringsInternal(find,replaceWith,this.elementData);if(includeStyles)
ElementCompositionCreationData.replaceDataStringsInternal(find,replaceWith,this.styles);};ElementCompositionCreationData.replaceDataStringsInternal=function(find,replaceWith,data){for(var i in data){if(!data.hasOwnProperty(i))
continue;if(typeof data[i]==="string"){if(typeof find==="string")
data[i]=data[i].split(find).join(replaceWith);else data[i]=data[i].replace(find,replaceWith)}else if(typeof data==="object")
this.replaceDataStringsInternal(find,replaceWith,data[i]);}};ElementCompositionCreationData.prototype.replaceStyles=function(startingIndex,selectorPrefix,namePrefix,reuseStyles){var idMap={};var nextTmpId=0;for(var _i=0,_a=this.styles;_i<_a.length;_i++){var style=_a[_i];var oldId=style.selector.replace(/^\./,'');var newId=selectorPrefix+startingIndex;var tmpId="wb-tmp-stl-id-"+(nextTmpId++);var reusing=!1;if(reuseStyles){for(var _b=0,reuseStyles_1=reuseStyles;_b<reuseStyles_1.length;_b++){var checkStyle=reuseStyles_1[_b];if(checkStyle.equals(style)){reusing=!0;newId=checkStyle.selector.replace(/^\./,'');break}}}
idMap[tmpId]=newId;if(newId!=oldId){if(!reusing){for(var _c=0,_d=style.ruleSets;_c<_d.length;_c++){var ruleSet=_d[_c];for(var _e=0,_f=ruleSet.rules;_e<_f.length;_e++){var rule=_f[_e];rule.selector=rule.selector.replace(style.selector,"."+tmpId)}}
style.name=namePrefix+startingIndex;startingIndex++}
style.selector="."+newId;this.replaceStrings(oldId,tmpId,!1)}else{startingIndex++}}
for(var tmpId in idMap){if(!idMap.hasOwnProperty(tmpId))
continue;var newId=idMap[tmpId];for(var _g=0,_h=this.styles;_g<_h.length;_g++){var style=_h[_g];for(var _j=0,_k=style.ruleSets;_j<_k.length;_j++){var ruleSet=_k[_j];for(var _l=0,_m=ruleSet.rules;_l<_m.length;_l++){var rule=_m[_l];rule.selector=rule.selector.replace(tmpId,newId)}}}
this.replaceStrings(tmpId,newId,!1)}
return startingIndex};ElementCompositionCreationData.prototype.cleanupElementData=function(){this.cleanupElementDataLevel(this.elementData,0)};ElementCompositionCreationData.prototype.cleanupElementDataLevel=function(elementData,level){var _loop_26=function(data){if(!data["class"]||!data.content)
return"continue";data.id=UID_8.UID.create();switch(data["class"]){case "LayoutElement":{var children=data.content.children;if(children&&children.length>0){this_17.cleanupElementDataLevel(children,level+1)}
break}
case "Menu":{if(data.content){var skipAnchors_1=Object.keys(wb_builder.site.pages).length>1;var tree_1=[];var nextId=100;var prevName_1="";var buildMenuTree_1=function(nodes,idp,level){if(idp===void 0){idp=null}
if(level===void 0){level=0}
for(var _i=0,nodes_3=nodes;_i<nodes_3.length;_i++){var node=nodes_3[_i];if(skipAnchors_1&&node.isAnchor)
continue;if(node.isServicePage)
continue;if(node.isPopup){buildMenuTree_1(node.children,idp,level);continue}
var name_5=node.humanReadableAnchorName||node.name;if(node.isAnchor&&prevName_1===name_5)
continue;prevName_1=name_5;var link={_:"Link",type:"page",url:node.pageId};if(node.isAnchor)
link.anchor=node.anchor;var id=UID_8.UID.create();tree_1.push({id:id,idp:skipAnchors_1?idp:null,name:name_5,link:link});if(level<2&&node.children)
buildMenuTree_1(node.children,id,level+1);}};buildMenuTree_1(wb_builder.site.getSiteTree());data.content.tree=tree_1}
break}
case "Picture":{if(level==0&&elementData.length==1&&data.content.src&&typeof data.content.src!=="object")
data.content.src=null;break}}};var this_17=this;for(var _i=0,elementData_1=elementData;_i<elementData_1.length;_i++){var data=elementData_1[_i];_loop_26(data)}};return ElementCompositionCreationData}());exports.ElementCompositionCreationData=ElementCompositionCreationData;var ElementComposition=exports.ElementComposition=(function(){function ElementComposition(data){this.minWidth=null;this.previewCreationData=null;this.id=data.id;this.name=data.name;this.url=data.url;this.width=data.width;this.height=data.height;this.displayAs=data.displayAs;this.iconClass=data.iconClass;this.iconUrl=data.iconUrl;this.thumbUrl=data.thumbUrl;this.hasGallery=data.hasGallery;this.fonts=data.fonts;this.styles=data.styles;this.data=data.data}
ElementComposition.prototype.getCreationData=function(isPreview){if(isPreview){if(this.previewCreationData===null){this.previewCreationData=new ElementCompositionCreationData(this,this.data,this.fonts,this.styles);this.fillPreviewData();this.ensurePreviewIsVisible();this.limitCompositionMaxWidth();this.previewCreationData.replaceStrings("{{compositionUrl}}",this.url+"/",!0);for(var _i=0,_a=this.previewCreationData.elementData;_i<_a.length;_i++){var elementData=_a[_i];elementData.isElementPreview=!0;elementData.previewCompositionId=this.id}
ElementComposition.nextUniquePreviewStyleId=this.previewCreationData.replaceStyles(ElementComposition.nextUniquePreviewStyleId,"wb-stl-eci-preview-","Composition Preview ")}
return this.previewCreationData}
var creationData=new ElementCompositionCreationData(this,this.data,this.fonts,this.styles);creationData.replaceStrings("{{compositionUrl}}","",!0);creationData.cleanupElementData();return creationData};ElementComposition.prototype.limitCompositionMaxWidth=function(){var cd=this.previewCreationData;if(!cd||cd.elementData.length!=1)
return;for(var _i=0,_a=cd.elementData;_i<_a.length;_i++){var el=_a[_i];if(el.class==="TextArea"){if((el.width==='auto'||el.width==='100%')&&(!el.useMaxWidth||!el.maxWidth)){el.width='auto';el.useMaxWidth=!0;el.maxWidth=540}}else if(el.class==="Gallery"){if(typeof el.width!=='number'){el.width=1200}}}};ElementComposition.prototype.fillPreviewData=function(){var cd=this.previewCreationData;if(!(cd===null||cd===void 0?void 0:cd.elementData.length))
return;Service_50.Service.elementRegister.traverseSerializedElementData(cd.elementData,function(data){if(data["class"]==="Menu"){var md=data;if(!md.content)
md.content={};var nextId=100;var tree=[];var count=0;var queue=wb_builder.site.getSiteTree();var skipAnchors=Object.keys(wb_builder.site.pages).length>1;var prevName="";while(queue.length){var node=queue.shift();if(node.isPopup||(skipAnchors&&node.isAnchor))
continue;if(node.isServicePage)
continue;var name_6=node.humanReadableAnchorName||node.name;if(node.isAnchor&&name_6===prevName)
continue;prevName=name_6;tree.push({id:nextId++,idp:0,name:name_6,link:null});if(++count>=5)
break;if(!skipAnchors&&!queue.length){queue=node.children}}
if(tree.length>=3)
md.content.tree=tree}
return CommonTypes_22.TraverseControl.Continue})};ElementComposition.prototype.ensurePreviewIsVisible=function(){var cd=this.previewCreationData;if(!(cd===null||cd===void 0?void 0:cd.elementData.length))
return;var ctl=Service_50.Service.elementRegister.traverseSerializedElementData(cd.elementData,function(data){if(data["class"]!="LayoutElement")
return CommonTypes_22.TraverseControl.Break;var ld=data;if(ld.content.backgroundElement)
return CommonTypes_22.TraverseControl.Break;if(ld.content.background){if(ld.content.background.image&&ld.content.background.opacity)
return CommonTypes_22.TraverseControl.Break;if(ld.content.background.color&&ColorPicker_17.ColorPicker.colorTextToObject(ld.content.background.color).a)
return CommonTypes_22.TraverseControl.Break}
if(ld.content.border){for(var i=0;i<4;i++)
if((0,BorderControl_11.getBorderWidth)(ld.content.border,i))
return CommonTypes_22.TraverseControl.Break}
return CommonTypes_22.TraverseControl.Continue});if(ctl===CommonTypes_22.TraverseControl.Break)
return;var layoutElementWidth=600;var layoutElementHeight=600;Service_50.Service.elementRegister.traverseSerializedElementData(cd.elementData,function(data,parentStack){var _a;var ld=data;var isLeafNode=!ld.content.children||!ld.content.children.length;if(isLeafNode){ld.content.background={attachment:"scroll",color:"#707070",fullWidth:!1,image:null,isVideo:!1,opacity:100,position:"left top",repeat:"repeat",size:"auto auto",timeEndAt:null,timeStartAt:null,css:{background:"#707070 none repeat scroll left top"}}}
if(parentStack.length==0){ld.width=layoutElementWidth;ld.height=layoutElementHeight;ld.useMinWidth=!1;ld.useMaxWidth=!1;ld.useMinHeight=!1;ld.useMaxHeight=!1;ld.flexGrow=0;ld.flexShrink=0}else if(isLeafNode){if(ld.content.children&&ld.content.children.length){var type=ld.content.type||((_a=ld.content.layout)===null||_a===void 0?void 0:_a.type);var propName=void 0,maxSize=void 0;if(type==CommonTypes_22.ChildrenLayoutType.Vertical){propName="width";maxSize=layoutElementWidth}else{propName="height";maxSize=layoutElementHeight}
var sumSize=0,autoCount=0,s=void 0;for(var _i=0,_b=ld.content.children;_i<_b.length;_i++){var child=_b[_i];if(typeof child[propName]==="number"&&!isNaN(child[propName])&&child[propName]>0)
sumSize+=Math.min(maxSize,child[propName])/maxSize;else if(typeof child[propName]==="string"&&child[propName]!=="auto"&&!isNaN(s=parseFloat(child[propName]))&&s>0)
sumSize+=s/100;else autoCount++}
var sizeMultiplier=1;var autoSize=1/ld.content.children.length;if(sumSize){if(autoCount){if(sumSize>=1){autoSize=sumSize/(ld.content.children.length-autoCount);sumSize+=autoSize*autoCount}else{autoSize=(1-sumSize)/autoCount;sumSize=1}}
sizeMultiplier=1/sumSize}
for(var _c=0,_d=ld.content.children;_c<_d.length;_c++){var child=_d[_c];if(typeof child[propName]==="number"&&!isNaN(child[propName])&&child[propName]>0)
child[propName]=Math.floor(100*sizeMultiplier*Math.min(maxSize,child[propName])/maxSize)+"%";else if(typeof child[propName]==="string"&&child[propName]!=="auto"&&!isNaN(s=parseFloat(child[propName]))&&s>0)
child[propName]=Math.floor(s*sizeMultiplier)+"%";else child[propName]=Math.floor(autoSize*sizeMultiplier)+"%"}}}})};ElementComposition.prototype.shouldMergeGallery=function(){if(!this.hasGallery||this.data.length==0)
return!1;if(this.data.length==1&&this.data[0]["class"]==="Picture")
return!1;return!0};ElementComposition.prototype.getMinWidth=function(){if(this.minWidth===null){var analyzeData_1=function(elements,parentLayoutType){var containerMaxWidth=0;for(var _i=0,elements_13=elements;_i<elements_13.length;_i++){var element=elements_13[_i];var width=(typeof element.width==="number"&&!(typeof element.flexGrow==="number"&&element.flexGrow!==0))?element.width:0;var minWidth=(typeof element.minWidth==="number"&&typeof element.useMinWidth==="boolean"&&element.useMinWidth)?element.minWidth:0;var maxWidth=(typeof element.maxWidth==="number"&&typeof element.useMaxWidth==="boolean"&&element.useMaxWidth)?element.maxWidth:0;if(width&&maxWidth)
maxWidth=Math.min(width,maxWidth);else if(!maxWidth)
maxWidth=width;if(minWidth)
maxWidth=Math.max(minWidth,maxWidth);if(!maxWidth&&element.class==="LayoutElement"&&"content" in element&&element.content&&"children" in element.content&&element.content.children)
maxWidth=analyzeData_1(element.content.children,element.content.layoutType||CommonTypes_22.ChildrenLayoutType.Absolute);if(parentLayoutType===CommonTypes_22.ChildrenLayoutType.Horizontal)
containerMaxWidth+=maxWidth;else containerMaxWidth=Math.max(containerMaxWidth,maxWidth)}
return containerMaxWidth};if(this.data.length===1&&typeof this.data[0].class==="string"&&this.data[0].class==="Picture"){this.minWidth=0}else this.minWidth=analyzeData_1(this.data,CommonTypes_22.ChildrenLayoutType.Vertical)*1.1;if(this.minWidth===null)
this.minWidth=0}
return this.minWidth};ElementComposition.prototype.getRawData=function(){return this.data};ElementComposition.nextUniquePreviewStyleId=1;return ElementComposition}());var ElementCompositionGroup=(function(){function ElementCompositionGroup(data){this.compositions=[];this.id=data.id;this.name=data.name;this.width=data.width;if(data.compositions){for(var _i=0,_a=data.compositions;_i<_a.length;_i++){var compositionData=_a[_i];this.compositions.push(new ElementComposition(compositionData))}}}
return ElementCompositionGroup}());exports.ElementCompositionGroup=ElementCompositionGroup;var ElementCompositionCollection=(function(){function ElementCompositionCollection(data){this.numCompos=0;this.groupsLoaded=!1;this.groups=[];this.availableInPlans=[];this.id=data.id;this.name=data.name;this.inactive=data.inactive;if(('numCompos' in data)&&typeof data.numCompos==='number'){this.numCompos=data.numCompos}
if(data.groups)
this.applyGroups(data.groups);if(data.availableInPlans){this.availableInPlans=data.availableInPlans}}
ElementCompositionCollection.prototype.applyGroups=function(groupsData){this.groupsLoaded=!0;for(var _i=0,groupsData_1=groupsData;_i<groupsData_1.length;_i++){var data=groupsData_1[_i];this.groups.push(new ElementCompositionGroup(data))}};return ElementCompositionCollection}());exports.ElementCompositionCollection=ElementCompositionCollection});define("js/ElementRegister",["require","exports","jquery","js/Service","js/CommonTypes"],function(require,exports,jquery_110,Service_51,CommonTypes_23){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.registerPaymentGateway=exports.registerClass=exports.ElementRegister=exports.ElementRestorationData=void 0;var ElementRestorationData=(function(){function ElementRestorationData(element){this.data=element.serialize();element.appendRestorationData(this.data)}
ElementRestorationData.prototype.restore=function(){var restoredElement=null;exports.ElementRegister.restoreElement(this.data,function(elem){restoredElement=elem});return restoredElement};return ElementRestorationData}());exports.ElementRestorationData=ElementRestorationData;var ElementRegisterType=(function(){function ElementRegisterType(){this.classList={};this.pluginRegistry={};this.paymentGateways=[]}
ElementRegisterType.prototype.registerClass=function(className,cls,plugin,active,baseUri){if(plugin===void 0){plugin=!1}
if(active===void 0){active=!1}
if(baseUri===void 0){baseUri=''}
cls.prototype.className=className;this.classList[className]=cls;window['WB_'+className]=cls;if(plugin){var meta=cls._metaData_;var item={id:className,textId:(meta.id?meta.id:null),icon:(meta.icon?meta.icon:'ico-tb ico-tb-no-bg')+' #ico-pl-'+className,iconImage:(!!meta.icon),name:(meta.name?meta.name:className),borderless:(!!meta.isBorderless),active:(!!active),baseUri:baseUri};this.pluginRegistry[className]=item;if(item.textId){this.classList[item.textId]=cls}}};ElementRegisterType.prototype.getClassByName=function(className){return this.classList[className]};ElementRegisterType.prototype.getPluginNameByClassName=function(className){if(this.classList.hasOwnProperty(className)){var cls=this.classList[className];if(cls.hasOwnProperty("_metaData_")){return cls._metaData_.name}else if(cls.hasOwnProperty('pluginName')){return cls.pluginName}}
return null};ElementRegisterType.prototype.isClassEnabled=function(className){var item=this.pluginRegistry[className];return((!!item)&&item.active)};ElementRegisterType.prototype.registerPaymentGateway=function(gateway){if(gateway&&typeof gateway==='object'&&('id' in gateway))
this.paymentGateways.push(gateway);};ElementRegisterType.prototype.getPaymentGateways=function(){var i,gateway,list=[];for(i=0;i<this.paymentGateways.length;i++){gateway=this.paymentGateways[i];var id=(('className' in gateway)&&gateway.className)?gateway.className:gateway.id;if((('forceActive' in gateway)&&gateway.forceActive)||((typeof this.pluginRegistry[id]==='object')&&this.pluginRegistry[id].active)){list.push(gateway)}}
list.sort(function(a,b){var ap=("priority" in a)?a.priority:0;var bp=("priority" in b)?b.priority:0;if(ap==bp){var an=a.name.toLowerCase(),bn=b.name.toLowerCase();if(an==bn)
return 0;return(an>bn)?1:-1}
return(ap>bp)?-1:1});return list};ElementRegisterType.prototype.registerClassAll=function(items){for(var i in items){this.pluginRegistry[i]=items[i]}};ElementRegisterType.prototype.getPluginRegistry=function(){return this.pluginRegistry};ElementRegisterType.prototype.getPluginNameById=function(id){return((id in this.pluginRegistry)&&this.pluginRegistry[id])?this.pluginRegistry[id].name:id};ElementRegisterType.prototype.getPluginUriById=function(id){if((id in this.pluginRegistry)&&this.pluginRegistry[id]&&this.pluginRegistry[id].baseUri){return this.pluginRegistry[id].baseUri}else{return''}};ElementRegisterType.prototype.mergeElementDataArrays=function(data1,data2){var mergedData=[];if(!data2||typeof data2==="function"){var extData=void 0;var idx=0;for(var _i=0,data1_1=data1;_i<data1_1.length;_i++){var data=data1_1[_i];if(!data.hasOwnProperty("class")||!data["class"])
continue;extData=data2?data2(data["class"],idx++):null;mergedData.push(jquery_110.default.extend(!0,{},data,extData))}}else{var extensionDataStack=data2.slice();var foundIdx=void 0;for(var _a=0,data1_2=data1;_a<data1_2.length;_a++){var data=data1_2[_a];if(!data.hasOwnProperty("class")||!data["class"])
continue;foundIdx=-1;for(var i=0,il=extensionDataStack.length;i<il;i++){if(extensionDataStack[i].hasOwnProperty("class")&&extensionDataStack[i]["class"]===data["class"]){foundIdx=i;break}}
if(foundIdx<0){for(var i=0,il=extensionDataStack.length;i<il;i++){if(!extensionDataStack[i].hasOwnProperty("class")){foundIdx=i;break}}}
if(foundIdx>=0){mergedData.push(jquery_110.default.extend(!0,{},data,extensionDataStack[foundIdx]));extensionDataStack.splice(foundIdx,1)}else{mergedData.push(jquery_110.default.extend(!0,{},data))}}}
return mergedData};ElementRegisterType.prototype.createElementComposition=function(composition,defaultData,isPreview,successCallback,errorCallback){var _this=this;var onDone=successCallback;var onError=errorCallback;var createComposition=composition;var createData=defaultData;var createPreview=isPreview;var creationData=composition.getCreationData(isPreview);var create=function(){var data=_this.mergeElementDataArrays(creationData.elementData,createData);var elements=[];var countdown=data.length;var errors=!1;var createInternal=function(element){if(element)
elements.push(element);if(--countdown<=0){if(errors){if(typeof onError==="function")
onError();}else{onDone(elements)}}};var errorInternal=function(){errors=!0;if(--countdown<=0){if(typeof onError==="function")
onError();}};for(var _i=0,data_4=data;_i<data_4.length;_i++){var elementData=data_4[_i];if(!elementData["class"])
continue;_this.createElement(elementData["class"],elementData,createPreview,createPreview,createInternal,errorInternal)}};if(isPreview)
create();else Service_51.Service.ElementComposition.mergeResources(creationData,create)};ElementRegisterType.prototype.restoreElement=function(data,successCallback,errorCallback){if(!data.hasOwnProperty("class")||!data.hasOwnProperty("_restoreId")||!data.hasOwnProperty("_restoreIndex")){console.error("ElementRegister.restoreElement() called without minimum required data");if(typeof errorCallback==="function")
errorCallback();return}
this.createElement(data["class"],data,!1,!1,successCallback,errorCallback)};ElementRegisterType.prototype.createElement=function(className,defaultData,initial,virtual,successCallback,errorCallback){var cls=this.getClassByName(className);if(!cls){if(typeof errorCallback==="function")
errorCallback();return}
try{if(defaultData===null)
defaultData={};defaultData._isNew=!initial;var element=new cls(defaultData,initial,virtual);if(typeof successCallback==="function")
successCallback(element);}catch(err){console.error(err);if(typeof errorCallback==="function")
errorCallback();}};ElementRegisterType.prototype.createElementOrComposition=function(classNameOrCollectionId,defaultData,successCallback,errorCallback){var _this=this;var compo=Service_51.Service.ElementComposition;var _a=classNameOrCollectionId.split('/',2),collectionId=_a[0],groupId=_a[1];var collection=compo.getCompositionCollection(collectionId);if(!collection)
collection=compo.getCompositionCollection("virtual-"+collectionId);if(!collection)
collection=compo.getCompositionCollection("auto-"+collectionId);if(collection){var create_1=function(composition){wb_builder.historyBeginGroup();_this.createElementComposition(composition,defaultData,!1,function(elements){successCallback(elements,composition);wb_builder.historyEndGroup()},function(){errorCallback===null||errorCallback===void 0?void 0:errorCallback();wb_builder.historyEndGroup()})};if(collection.numCompos==1){compo.requireCollectionGroups(collection).done(function(collection){if(!collection)
return;create_1(collection.groups[0].compositions[0])}).fail(function(error){console.error(error);if(typeof errorCallback==="function")
errorCallback();})}else{compo.open(collection,groupId,defaultData,create_1,errorCallback)}
return}
var cls=this.getClassByName(classNameOrCollectionId);if(cls){var onDone_1=successCallback;var data=(typeof defaultData==="function")?defaultData(classNameOrCollectionId,0):((defaultData&&defaultData.length)?defaultData[0]:null);this.createElement(classNameOrCollectionId,data,!1,!1,function(element){var ePos=element.getLocation();onDone_1([element],null)},errorCallback);return}
console.error("No composition collection or plugin with such id: ",classNameOrCollectionId);if(typeof errorCallback==="function")
errorCallback();};ElementRegisterType.prototype.traverseSerializedElementData=function(dataArray,callback,parentStack){if(parentStack===void 0){parentStack=[]}
var ctl;for(var _i=0,dataArray_1=dataArray;_i<dataArray_1.length;_i++){var data=dataArray_1[_i];if(!("class" in data)||!data.content)
continue;ctl=callback(data,parentStack);if(ctl===CommonTypes_23.TraverseControl.Break)
return ctl;if(ctl===CommonTypes_23.TraverseControl.SkipChildren)
continue;if(data["class"]==="LayoutElement"){var ld=data;parentStack.push(data);if(ld.content.backgroundElement){if(CommonTypes_23.TraverseControl.Break===this.traverseSerializedElementData([ld.content.backgroundElement],callback,parentStack)){parentStack.pop();return CommonTypes_23.TraverseControl.Break}}
if(ld.content.children&&ld.content.children.length){if(CommonTypes_23.TraverseControl.Break===this.traverseSerializedElementData(ld.content.children,callback,parentStack)){parentStack.pop();return CommonTypes_23.TraverseControl.Break}}
parentStack.pop()}}
return CommonTypes_23.TraverseControl.Continue};return ElementRegisterType}());exports.ElementRegister=new ElementRegisterType();function registerClass(className,cls,plugin,active){if(plugin===void 0){plugin=!1}
if(active===void 0){active=!1}
exports.ElementRegister.registerClass(className,cls,plugin,active)}
exports.registerClass=registerClass;function registerPaymentGateway(gateway){exports.ElementRegister.registerPaymentGateway(gateway)}
exports.registerPaymentGateway=registerPaymentGateway;Service_51.Service.elementRegister=exports.ElementRegister});define("js/ButtonGroup",["require","exports","js/UIContainer"],function(require,exports,UIContainer_7){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ButtonGroup=void 0;var ButtonGroup=(function(_super){__extends(ButtonGroup,_super);function ButtonGroup(){var _this=_super.call(this)||this;_this.addClass('btn-group');_this._elem.attr({role:'group'});return _this}
ButtonGroup.prototype.buildInit=function(data,fields){};return ButtonGroup}(UIContainer_7.UIContainer));exports.ButtonGroup=ButtonGroup});define("js/HelpSystem/PlayerControls",["require","exports","js/UIContainer","js/UIButton","js/Service","js/ButtonGroup","js/FlowLayout"],function(require,exports,UIContainer_8,UIButton_24,Service_52,ButtonGroup_1,FlowLayout_21){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PlayerControls=void 0;var SpeedSelectorFields=(function(){function SpeedSelectorFields(){}
return SpeedSelectorFields}());var SpeedSelector=(function(_super){__extends(SpeedSelector,_super);function SpeedSelector(){var _this=_super.call(this)||this;_this.fields=new SpeedSelectorFields();_this.baseSpeed=3;_this.onSpeedChange=null;Service_52.Service.UIBuilder.buildLayout([{type:ButtonGroup_1.ButtonGroup,children:[{type:UIButton_24.UIButton,id:'val',borderless:!0,text:'1.0x',buttonSize:UIButton_24.UIButton.SIZE_SMALL,menuWidth:80,menuUp:[{name:'0.25x',click:function(){_this.applySpeed(0,0.25)}},{name:'0.5x',click:function(){_this.applySpeed(0,0.50)}},{name:'1.0x',click:function(){_this.applySpeed(0,1.00)}},{name:'1.5x',click:function(){_this.applySpeed(0,1.50)}},{name:'2.0x',click:function(){_this.applySpeed(0,2.00)}}]}]}],_this,_this.fields);return _this}
SpeedSelector.prototype.buildInit=function(data,fields){_super.prototype.buildInit.call(this,data,fields);if(('baseSpeed' in data)&&data.baseSpeed){var val=data.baseSpeed*1;if(val>0&&!isNaN(val))
this.baseSpeed=val}
if(('change' in data)&&typeof data.change==='function'){this.onSpeedChange=data.change}};SpeedSelector.prototype.applySpeed=function(speed,pSpeed){if(pSpeed===void 0){pSpeed=0}
var speedVal=Math.ceil((speed>0)?speed:(this.baseSpeed*pSpeed));var maxSpeed=Math.ceil(this.baseSpeed*1.75);if(pSpeed===0)
pSpeed=speedVal/this.baseSpeed;this.fields.val.setText(pSpeed+((pSpeed===1||pSpeed===2)?'.0':'')+'x');if(this.onSpeedChange)
this.onSpeedChange(speedVal,maxSpeed);};return SpeedSelector}(FlowLayout_21.FlowLayout));var PlayerControlsFields=(function(){function PlayerControlsFields(){}
return PlayerControlsFields}());var PlayerControls=(function(_super){__extends(PlayerControls,_super);function PlayerControls(onClose){var _this=_super.call(this)||this;_this.onClose=onClose;_this.fields=new PlayerControlsFields();_this.closeTimeout=0;_this.addClass('wb-hlp-player-controls');return _this}
PlayerControls.prototype.setStep=function(pos,total){this.fields.label.setText(pos+' of '+total)};PlayerControls.prototype.setSpeed=function(speed){this.fields.speedGroup.applySpeed(speed)};PlayerControls.prototype.setEndState=function(endState,autoClose){var _this=this;if(autoClose===void 0){autoClose=!1}
if(this.closeTimeout)
clearTimeout(this.closeTimeout);if(endState){this.fields.playBtn.setVisible(!1);this.fields.nextBtn.setVisible(!1);this.fields.closeBtn.setVisible(!0);this.fields.label.setVisible(!1);this.fields.speedLabel.setVisible(!1);this.fields.speedGroup.setVisible(!1);this.fields.speedGroupSep.setVisible(!1);if(autoClose)
this.closeTimeout=setTimeout(function(){return _this.onClose()},3000)}else{this.fields.playBtn.setVisible(!0);this.fields.nextBtn.setVisible(!0);this.fields.closeBtn.setVisible(!0);this.fields.label.setVisible(!0);this.fields.speedLabel.setVisible(!0);this.fields.speedGroup.setVisible(!0);this.fields.speedGroupSep.setVisible(!0)}
this.css({marginLeft:-this.getElem().outerWidth()/2.0})};PlayerControls.prototype.getFields=function(){return this.fields};PlayerControls.init=function(onPlay,onNext,onClose,onSpeedChange){var ins=new PlayerControls(onClose);ins.onSpeedChange=onSpeedChange;Service_52.Service.UIBuilder.buildLayout({type:'FlowLayout',verticalAlign:'middle',spacing:0,children:[{type:'Button',text:'',attr:{title:__('Play')},buttonSize:UIButton_24.UIButton.SIZE_SMALL,icon:'fa fa-pause',borderless:!0,id:'playBtn',click:onPlay},{type:'Button',text:'',attr:{title:__('Next')},buttonSize:UIButton_24.UIButton.SIZE_SMALL,icon:'fa fa-step-forward',borderless:!0,id:'nextBtn',click:onNext,css:{marginLeft:10,marginRight:10}},{type:'Label',text:'0/0',id:'label',css:{paddingLeft:15,marginBottom:2,borderLeft:'1px solid #ccc'}},{type:'Label',text:__('Speed'),id:'speedLabel',css:{marginLeft:15,marginRight:10,marginBottom:2,paddingLeft:'15px',fontWeight:'normal',borderLeft:'1px solid #ccc'}},{type:SpeedSelector,id:'speedGroup',change:onSpeedChange},{type:'Label',html:'&nbsp;',id:'speedGroupSep',css:{marginBottom:2,paddingLeft:'6px',borderLeft:'1px solid #ccc'}},{type:'Button',text:'',attr:{title:__('Close')},buttonSize:UIButton_24.UIButton.SIZE_SMALL,icon:'fa fa-times',borderless:!0,id:'closeBtn',click:onClose}]},ins,ins.fields);ins.css({position:'fixed',zIndex:99999,bottom:10,left:'50%',background:'#fff',border:'1px solid #ccc',padding:5});return ins};return PlayerControls}(UIContainer_8.UIContainer));exports.PlayerControls=PlayerControls});define("js/HelpSystem/PlayerCanvas",["require","exports","jquery","js/LayoutElement","js/CommonTypes","js/BuilderEvent","js/Service","js/util/UID"],function(require,exports,jquery_111,LayoutElement_5,CommonTypes_24,BuilderEvent_21,Service_53,UID_9){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PlayerCanvas=void 0;var PlayerCanvas=exports.PlayerCanvas=(function(_super){__extends(PlayerCanvas,_super);function PlayerCanvas(more){if(more===void 0){more=!1}
var _this=_super.call(this,{content:{layout:{type:CommonTypes_24.ChildrenLayoutType.Vertical}}},!0)||this;_this.elementIdx={};_this.elementList=[];_this.id='canvas';_this.isFlexible=!1;_this.wrapper=(0,jquery_111.default)('<div>').addClass("wb-site wb-site-canvas wb-viewport-mode-".concat(Service_53.Service.modeManager.getMode())).css({width:'100%',height:wb_builder.bodyInstance.site.height(),backgroundColor:(more?'#ffffff':'rgba(0, 0, 0, 0.80)')});_this.wrapper.append(_this.elem);_this.wrapper.insertBefore(wb_builder.bodyInstance.site);BuilderEvent_21.GlobalEvents.on('modes.changed',function(e){_this.wrapper.removeClass("wb-viewport-mode-phone wb-viewport-mode-tablet wb-viewport-mode-desktop wb-viewport-mode-tv").addClass("wb-viewport-mode-".concat(e.mode))});var blockContent={width:"100%",height:"auto",useMinWidth:!1,useMaxWidth:!1,useMinHeight:!1,useMaxHeight:!1,content:{layout:{type:"vertical",wrapRes:"phone",wrap:"nowrap",hAlign:"center",vAlign:"center",hSpacing:"center",vSpacing:"center"}}};var blockSpecificContent={};blockSpecificContent[CommonTypes_24.ContentBlockId.Header]={name:"Header",anchor:"header"};blockSpecificContent[CommonTypes_24.ContentBlockId.Main]={name:"Body",anchor:"main"};blockSpecificContent[CommonTypes_24.ContentBlockId.Footer]={name:"Footer",anchor:"footer"};for(var blockId in blockSpecificContent){if(!blockSpecificContent.hasOwnProperty(blockId))
return _this;Service_53.Service.elementRegister.createElement("LayoutElement",jquery_111.default.extend(!0,{},blockContent,blockSpecificContent[blockId],{id:UID_9.UID.create(),rootBlockType:blockId}),!0,!0,function(block){_this.registerElementAdd(block);_this.addChild(block)})}
return _this}
PlayerCanvas.prototype.getRegisteredElements=function(){return this.elementList};PlayerCanvas.prototype.registerElementAdd=function(element){if(element.getClassType()=='LayoutElement'){this.elementIdx[element.id]=element}
this.elementList.push(element)};PlayerCanvas.prototype.findChildById=function(id){return(id in this.elementIdx)?this.elementIdx[id]:null};PlayerCanvas.prototype.dispose=function(){this.wrapper.remove()};PlayerCanvas.prototype.getCanvasClientRect=function(){return this.wrapper[0].getBoundingClientRect()};PlayerCanvas.pluginName='PlayerCanvas';return PlayerCanvas}(LayoutElement_5.LayoutElement))});define("js/HelpSystem/ScenarioBuilder",["require","exports","jquery","js/HelpSystem/Scenario","js/CommonTypes","js/element/PropertyType","js/Service","js/util/ComparisonUtil"],function(require,exports,jquery_112,Scenario_1,CommonTypes_25,PropertyType_9,Service_54,ComparisonUtil_4){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.buildFromCurrent=exports.init=void 0;var dict={};var lastBuilder=null;var elementDefaults={};var USE_VARIATION=!1;function init(builder,wbConfig){lastBuilder=builder;jquery_112.default.getJSON(wbConfig.getLnUrl('scenario/dict')).then(function(res){if(res&&(typeof res==='object'))
dict=res},function(){return console.log('Error loading scenario dictionary.')})}
exports.init=init;function buildFromCurrent(builder,useOverlay){if(useOverlay===void 0){useOverlay=!0}
var scenario=new Scenario_1.Scenario();scenario.baseUrl='scenarios/';scenario.name=__('Current Template');scenario.requireSpace=600;scenario.steps=[{title:"Lets create site",text:"Lets create site",subject:"toolbar-ctrl-change"}];var requirement=buildBackgroundSteps(scenario,builder);var elements=builder.bodyInstance.getChildren();buildChildren(elements,scenario,requirement,useOverlay);return scenario}
exports.buildFromCurrent=buildFromCurrent;function buildChildren(elements,scenario,requirement,useOverlay,absolute){if(absolute===void 0){absolute=!1}
if(absolute){elements.sort(function(e1,e2){var p1=getOffset(e1,!0),p2=getOffset(e2,!0);var l1=e1.getLocation(),l2=e2.getLocation();if((l1.top+p1.top)==(l2.top+p2.top)){if(e1.getZIndex()==e2.getZIndex())
return 0;return((e1.getZIndex()>e2.getZIndex())?1:-1)}
return(((l1.top+p1.top)>(l2.top+p2.top))?1:-1)})}
for(var _i=0,elements_14=elements;_i<elements_14.length;_i++){var elem=elements_14[_i];var classType=elem.getClassType();if(classType==='LinkExchangeBadge')
continue;requirement=buildChild(elem,scenario,requirement,useOverlay);requirement=null;if(classType==='LayoutElement'){var contaner=elem;buildChildren(contaner.getChildren(),scenario,requirement,useOverlay,contaner.getChildrenLayout()==CommonTypes_25.ChildrenLayoutType.Absolute)}}}
function buildChild(elem,scenario,requirement,useOverlay,forceParent){var classType=elem.getClassType();var creationStep=buildCreateStep(scenario,classType,elem,requirement,useOverlay,forceParent);requirement=null;if(classType==='Picture'){requirement=buildPictureSteps(scenario,creationStep,classType,elem)}else if(classType==='Gallery'){requirement=buildGallerySteps(scenario,creationStep,classType,elem)}else if(classType==='Menu'){requirement=buildMenuSteps(scenario,creationStep,classType,elem)}else if(classType==='TextArea'){requirement=buildTextSteps(scenario,creationStep,classType,elem)}else if(classType==='LayoutElement'){requirement=buildLayoutElementSteps(scenario,creationStep,classType,elem,useOverlay)}
requirement=buildPropertiesSteps(scenario,creationStep,classType,elem,requirement);requirement=buildResizeStep(scenario,creationStep,classType,elem,requirement,useOverlay);return requirement}
var ignorePropertyTypes=[PropertyType_9.PropertyType.ElementPositionLeft,PropertyType_9.PropertyType.ElementPositionTop];function buildPropertiesSteps(scenario,creationStep,classType,elem,requirement){var _a,_b,_c;var buttons=[],properties=[],property;var propDict=elem.getProperties();for(var propName in propDict){if(propDict.hasOwnProperty(propName)){property=propDict[propName];if(!property.type||property.type.isElementReference||!property.type.component||property.type.accessLevel!=PropertyType_9.PropertyTypeAccess.User)
continue;properties.push(propDict[propName])}}
if(!properties.length)
return requirement;properties.sort(function(a,b){if(a.type===b.type)
return 0;var av=(a.dependencies&&a.dependencies.indexOf(b.name)>=0)?1:0;var bv=(b.dependencies&&b.dependencies.indexOf(a.name)>=0)?1:0;if(av==bv){av=a.type?(a.type.isButton?10000:0)+a.type.sortOrder:0;bv=b.type?(b.type.isButton?10000:0)+b.type.sortOrder:0}
return(av<bv)?-1:1});requirement=buildElementSelectStep(scenario,creationStep,classType,requirement);var needsResize=typeof elem.width==="number"&&typeof elem.height==="number";var defaults=getElementDefaults(classType);for(var _i=0,properties_2=properties;_i<properties_2.length;_i++){var property_1=properties_2[_i];if(!property_1.type||ignorePropertyTypes.indexOf(property_1.type)>=0)
continue;if(classType==="TextArea"&&property_1.type===PropertyType_9.PropertyType.ElementHeight)
continue;if(needsResize&&(property_1.type===PropertyType_9.PropertyType.ElementWidth||property_1.type===PropertyType_9.PropertyType.ElementHeight))
continue;var options=property_1.getUIComponentOptions(elem);if(("visible" in options)&&!options.visible)
continue;if(("enabled" in options)&&!options.enabled)
continue;if(property_1.type.isButton){}else{var value=property_1.serialize(elem);if(defaults&&defaults.hasOwnProperty(property_1.name)){if(ComparisonUtil_4.ComparisonUtil.checkEqualsRecursive(defaults[property_1.name],value))
continue}
scenario.steps.push({title:((_a=dict.Change)===null||_a===void 0?void 0:_a.title)||__("Change"),text:((_b=dict.Change)===null||_b===void 0?void 0:_b.text)||"",audio:((_c=dict.Change)===null||_c===void 0?void 0:_c.audio)||"",requirements:requirement?[requirement]:undefined,subject:'item-plugin-'+classType+'-prop-'+property_1.name+'['+creationStep.id+']',defaultContent:{value:value},objectives:['item-plugin-'+classType+'-prop-'+property_1.name+'-change']})}
requirement=null}
return requirement}
function buildElementSelectStep(scenario,creationStep,classType,requirement){var _a,_b,_c;scenario.steps.push({title:((_a=dict.Select)===null||_a===void 0?void 0:_a.title)||__("Select"),text:((_b=dict.Select)===null||_b===void 0?void 0:_b.text)||"",audio:((_c=dict.Select)===null||_c===void 0?void 0:_c.audio)||"",requirements:requirement?[requirement]:undefined,subject:'item-plugin-'+classType+'['+creationStep.id+']',objectives:['item-plugin-'+classType+'-select']});return"timeout:100"}
function buildBackgroundSteps(scenario,builder){scenario.steps.push({title:((dict.Click&&dict.Click.title)?dict.Click.title:__('Click')),text:((dict.Click&&dict.Click.text)?dict.Click.text:''),subject:'toolbar-ctrl-config',objectives:['toolbar-ctrl-config-click']});scenario.steps.push({title:((dict.Click&&dict.Click.title)?dict.Click.title:__('Click')),text:((dict.Click&&dict.Click.text)?dict.Click.text:''),subject:'toolbar-ctrl-config-background',objectives:['config-background-open']});var bg,p=builder.site.getPage(builder.pageId);if(p&&p.background&&((p.background.image&&p.background.image!=='none')||(p.background.color&&p.background.color!=='transparent'))){bg=p.background}else{bg=builder.bodyInstance.bgSite}
bg=jquery_112.default.extend(!0,{},bg);delete bg.opacity;if(bg.css)
delete bg.css.opacity;scenario.steps.push({title:((dict.Change&&dict.Change.title)?dict.Change.title:__('Change')),text:((dict.Change&&dict.Change.text)?dict.Change.text:''),audio:((dict.Change&&dict.Change.audio)?dict.Change.audio:''),requirements:['timeout:500'],subject:'config-background-prop-bgPage',defaultContent:{value:bg},objectives:['config-background-prop-bgPage-change']});scenario.steps.push({title:((dict.Apply&&dict.Apply.title)?dict.Apply.title:__('Apply')),text:((dict.Apply&&dict.Apply.text)?dict.Apply.text:''),audio:((dict.Apply&&dict.Apply.audio)?dict.Apply.audio:''),subject:'config-background-prop-apply',objectives:['config-background-apply']});return null}
function buildLayoutElementSteps(scenario,creationStep,classType,elem,useOverlay){var requirement=null;var bgElem=elem.backgroundElement;if(bgElem){requirement=buildChild(bgElem,scenario,requirement,useOverlay,elem);scenario.steps.push({title:((dict.Select&&dict.Select.title)?dict.Select.title:__('Select')),text:((dict.Select&&dict.Select.text)?dict.Select.text:''),subject:'item-plugin-'+bgElem.getClassType()+'-edit-btn[0]',requirements:(requirement?[requirement]:[]),objectives:['item-plugin-'+bgElem.getClassType()+'-setAsBg']});requirement=null}
return requirement}
function buildMenuSteps(scenario,creationStep,classType,elem){var rawElem=elem,editOpen=!1;var editStep={title:((dict.Edit&&dict.Edit.title)?dict.Edit.title:__('Edit')),text:((dict.Edit&&dict.Edit.text)?dict.Edit.text:''),audio:((dict.Edit&&dict.Edit.audio)?dict.Edit.audio:''),subject:'item-plugin-'+classType+'-edit-btn[0]',objectives:['item-plugin-'+classType+'-menu-edit']};var cc=0;var numItems=0;for(var itemKey in rawElem.items)
numItems++;for(var itemKey in rawElem.items){var item=rawElem.items[itemKey];if(cc>0){if(!editOpen){scenario.steps.push(editStep);editOpen=!0}
scenario.steps.push({title:((dict.Click&&dict.Click.title)?dict.Click.title:__('Click')),text:((dict.Click&&dict.Click.text)?dict.Click.text:''),requirements:['timeout:500'],subject:'item-plugin-'+classType+'-menu-edit-newItemButton[0]',objectives:['item-plugin-'+classType+'-menu-edit-newItemButton-click']})}
scenario.steps.push({title:((dict.Edit&&dict.Edit.title)?dict.Edit.title:__('Edit')),text:((dict.Edit&&dict.Edit.text)?dict.Edit.text:''),audio:((dict.Edit&&dict.Edit.audio)?dict.Edit.audio:''),requirements:['timeout:500'],subject:'item-plugin-'+classType+'-menu-new-fldName[0]',defaultContent:{'value':item.name},objectives:['item-plugin-'+classType+'-menu-new-fldName-change']});scenario.steps.push({title:((dict.Apply&&dict.Apply.title)?dict.Apply.title:__('Apply')),text:((dict.Apply&&dict.Apply.text)?dict.Apply.text:''),audio:((dict.Apply&&dict.Apply.audio)?dict.Apply.audio:''),subject:'item-plugin-'+classType+'-menu-new-apply[0]',objectives:['item-plugin-'+classType+'-menu-new-apply']});if(item.link&&item.link.target){if(!editOpen){scenario.steps.push(editStep);editOpen=!0}
scenario.steps.push({title:((dict.Edit&&dict.Click.title)?dict.Click.title:__('Click')),text:((dict.Edit&&dict.Click.text)?dict.Click.text:''),audio:((dict.Edit&&dict.Click.audio)?dict.Click.audio:''),requirements:['timeout:500'],subject:'item-plugin-'+classType+'-menu-edit-fldNewWindow[0]',defaultContent:{'value':!0},objectives:['item-plugin-'+classType+'-menu-edit-fldNewWindow-change']})}
cc++}
if(editOpen){scenario.steps.push({title:((dict.Apply&&dict.Apply.title)?dict.Apply.title:__('Apply')),text:((dict.Apply&&dict.Apply.text)?dict.Apply.text:''),audio:((dict.Apply&&dict.Apply.audio)?dict.Apply.audio:''),requirements:['timeout:500'],subject:'item-plugin-'+classType+'-menu-edit-apply[0]',objectives:['item-plugin-'+classType+'-menu-edit-apply']})}
return null}
function buildTextSteps(scenario,creationStep,classType,elem){var rawElem=elem;scenario.steps.push({title:((dict.Edit&&dict.Edit.title)?dict.Edit.title:__('Edit')),text:((dict.Edit&&dict.Edit.text)?dict.Edit.text:''),audio:((dict.Edit&&dict.Edit.audio)?dict.Edit.audio:''),placement:'right',subject:'item-plugin-'+classType+'-edit-btn['+creationStep.id+']',objectives:['item-plugin-'+classType+'-edit-start']});scenario.steps.push({title:((dict.Select&&dict.Select.title)?dict.Select.title:__('Select')),text:((dict.Select&&dict.Select.text)?dict.Select.text:''),subject:'item-plugin-'+classType+'['+creationStep.id+']',objectives:['item-plugin-'+classType+'-edit-select']});scenario.steps.push({title:((dict.Edit&&dict.Edit.title)?dict.Edit.title:__('Edit')),text:((dict.Edit&&dict.Edit.text)?dict.Edit.text:''),audio:((dict.Edit&&dict.Edit.audio)?dict.Edit.audio:''),subject:'item-plugin-'+classType+'['+creationStep.id+']',defaultContent:{value:rawElem.textDivValue},objectives:['item-plugin-'+classType+'-edit-text']});scenario.steps.push({title:((dict.Click&&dict.Click.title)?dict.Click.title:__('Click')),text:((dict.Click&&dict.Click.text)?dict.Click.text:''),subject:"item-plugin-TextArea-edit-cmd-closebtn["+creationStep.id+"]",objectives:["item-plugin-TextArea-edit-end"]});return null}
function buildPictureSteps(scenario,creationStep,classType,elem){creationStep.defaultContent={src:elem.getSrc()};if(creationStep.forceBounds)
creationStep.forceBounds.event='item-plugin-'+classType+'-edit-loaded';return null}
function buildGallerySteps(scenario,creationStep,classType,elem){creationStep.defaultContent=elem.serialize().content;creationStep.defaultContent.images=creationStep.defaultContent.images.map(function(it){return wb_builder.makeLocalUrl(it)});return null}
function buildCreateStep(scenario,classType,elem,requirement,useOverlay,forceParent){var isRootBlock=!!elem.rootBlockType;var pos=elem.getLocation();var rHoff=USE_VARIATION?Math.round(Math.random()*(30+30)-30):0;var rVoff=USE_VARIATION?Math.round(Math.random()*(30+30)-30):0;var parent=isRootBlock?null:(forceParent?forceParent:elem.getParent());var parentIsRootBlock=parent&&!!parent.rootBlockType;var cData=elem.serialize().content;if(!cData)
cData={};var step={title:((dict.Add&&dict.Add.title)?dict.Add.title.replace('%s',__(classType)):(__('Add')+' '+classType)),text:((dict.Add&&dict.Add.text)?dict.Add.text:''),id:(isRootBlock||!useOverlay)?elem.id:('step-'+elem.id),elemId:(isRootBlock||!useOverlay)?elem.id:('step-'+elem.id),block:parent?((parentIsRootBlock||!useOverlay)?parent.id:('step-'+parent.id)):null,subject:'toolbar-plugin-'+classType,objectives:['add-plugin-'+classType],forceBounds:{top:pos.top+rVoff,left:pos.left+rHoff,individualMargin:cData.individualMargin,minWidth:cData.minWidth,maxWidth:cData.maxWidth,minHeight:cData.minHeight,maxHeight:cData.maxHeight,useMinWidth:cData.useMinWidth,useMaxWidth:cData.useMaxWidth,useMinHeight:cData.useMinHeight,useMaxHeight:cData.useMaxHeight,}};if(requirement)
step.requirements=[requirement];if(!isRootBlock)
scenario.steps.push(step);return step}
function buildResizeStep(scenario,creationStep,classType,elem,requirement,useOverlay){var needsMovement=USE_VARIATION&&elem.getLayoutConstraints()===CommonTypes_25.ChildrenLayoutType.Absolute;if(needsMovement){var pos=elem.getLocation();scenario.steps.push({title:((dict.Move&&dict.Move.title)?dict.Move.title.replace('%s',__(classType)):__('Move')),text:((dict.Move&&dict.Move.text)?dict.Move.text:''),subject:'item-plugin-'+classType+'-move-btn['+creationStep.id+']',requirements:(requirement?[requirement]:[]),objectives:['item-plugin-'+classType+'-move-start'],forceBounds:{event:'item-plugin-'+classType+'-move-end',top:pos.top,left:pos.left}});requirement='item-plugin-'+classType+'-move-end'}
var needsResize=typeof elem.width==="number"&&typeof elem.height==="number";if(needsResize){scenario.steps.push({title:((dict.Resize&&dict.Resize.title)?dict.Resize.title.replace('%s',__(classType)):__('Resize')),text:((dict.Resize&&dict.Resize.text)?dict.Resize.text:''),audio:((dict.Resize&&dict.Resize.audio)?dict.Resize.audio:''),placement:'right',subject:'item-plugin-'+classType+'['+creationStep.id+']',requirements:(requirement?[requirement]:[]),objectives:['item-plugin-'+classType+'-resize-start'],forceBounds:{event:'item-plugin-'+classType+'-resize-end',width:elem.getWidth(),height:elem.getHeight()}});requirement='item-plugin-'+classType+'-resize-end'}
return requirement}
function buildPropertiesOpenStep(scenario,classType,requirement){if(requirement===void 0){requirement=null}
scenario.steps.push({title:((dict.Properties&&dict.Properties.title)?dict.Properties.title:__('Properties')),text:((dict.Properties&&dict.Properties.text)?dict.Properties.text:''),audio:((dict.Properties&&dict.Properties.audio)?dict.Properties.audio:''),subject:'item-plugin-'+classType+'-edit-btn[0]',requirements:(requirement?[requirement]:[]),objectives:['item-plugin-'+classType+'-prop-open']})}
function buildPropertiesApplyStep(scenario,classType){scenario.steps.push({title:((dict.Apply&&dict.Apply.title)?dict.Apply.title:__('Apply')),text:((dict.Apply&&dict.Apply.text)?dict.Apply.text:''),audio:((dict.Apply&&dict.Apply.audio)?dict.Apply.audio:''),subject:'item-plugin-'+classType+'-prop-apply[0]',objectives:['item-plugin-'+classType+'-prop-apply']})}
function getOffset(elem,useOverlay){var pOff;if(useOverlay){var parent_27=elem.getParent();pOff=parent_27?parent_27.container.offset():{left:0,top:0};pOff.top-=(lastBuilder?lastBuilder.body.getBounds().top:128)}else{pOff={left:0,top:0}}
return pOff}
function getElementDefaults(classType){if(!elementDefaults.hasOwnProperty(classType)){Service_54.Service.elementRegister.createElement(classType,{content:{}},!0,!0,function(elem){var defaults={};var properties=elem.getProperties();for(var propName in properties){if(!properties.hasOwnProperty(propName))
continue;var property=properties[propName];if(!property.type||!property.getter||property.type.isButton||!property.type.component)
continue;defaults[propName]=property.serialize(elem)}
elementDefaults[classType]=defaults;elem.remove({noHistory:!0})},function(){elementDefaults[classType]=null})}
return elementDefaults[classType]}});define("js/HelpSystem/VirtualCursor",["require","exports","jquery","js/HelpSystem/AnimTween"],function(require,exports,jquery_113,AnimTween_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.VirtualCursor=void 0;var VirtualCursor=(function(){function VirtualCursor(){var _this=this;this.tween=null;this.elem=(0,jquery_113.default)('<div>').css({position:'fixed',zIndex:99999,left:200,top:200});this.pointer=(0,jquery_113.default)('<svg width="334" height="465" viewBox="0 0 33.2 42.6">'+'<path style="fill:#000000;stroke:#ffffff;stroke-width:2;" d="m 32.4,28.4 c -0.2,0.1 -0.4,0.1 -0.6,0.1 L 14.5,28 c -0.4,0 -0.9,0.2 -1.1,0.5 L 2.6,42.1 C 2.5,42.3 2.3,42.4 2.1,42.5 1.8,42.6 1.4,42.7 1.1,42.6 0.5,42.4 0.2,41.9 0.2,41.3 L 0,1.4 C 0,0.9 0.3,0.4 0.8,0.1 1.3,-0.2 1.9,0 2.3,0.3 L 32.7,26 c 0.5,0.4 0.6,1 0.4,1.6 -0.1,0.4 -0.4,0.6 -0.7,0.8 z" />'+'</svg>').css({width:24,height:25,position:'relative',zIndex:3}).appendTo(this.elem);this.clickIndicator=(0,jquery_113.default)('<div>').addClass('click-pulse').css({zIndex:1,borderRadius:30,border:'2px solid #000',opacity:0,position:'absolute'}).appendTo(this.elem);this.clickIndicator.clone().css({borderColor:'#fff'}).appendTo(this.elem);this.clickIndicator.clone().css({marginLeft:'-120px'}).appendTo(this.elem);this.clickIndicator.clone().css({marginLeft:'120px'}).appendTo(this.elem);this.elem.on('click',function(){return _this.animClick()})}
VirtualCursor.prototype.getElem=function(){return this.elem};VirtualCursor.prototype.dispose=function(){this.elem.detach()};VirtualCursor.prototype.animClick=function(onDone,multi){if(onDone===void 0){onDone=null}
if(multi===void 0){multi=!1}
var list=this.elem.children('.click-pulse');list.eq(0).addClass('vcursor-click-pulse');if(multi){list.eq(2).addClass('vcursor-click-pulse');list.eq(3).addClass('vcursor-click-pulse')}
setTimeout(function(){return list.eq(1).addClass('vcursor-click-pulse')},100);setTimeout(function(){list.removeClass('vcursor-click-pulse');if(onDone)
onDone();},500)};VirtualCursor.prototype.moveTo=function(destination,onDone,durration,fps){var _this=this;if(onDone===void 0){onDone=null}
if(durration===void 0){durration=200}
if(fps===void 0){fps=24}
if(this.tween)
this.tween.dispose();var dest={left:0,top:0},difX=0,difY=0;if(destination.left&&typeof destination.left==='number')
dest.left=destination.left;if(destination.top&&typeof destination.top==='number')
dest.top=destination.top;this.tween=new AnimTween_2.AnimTween(durration,fps,function(){var subjectPos=_this.elem.offset();_this.elem.css({left:subjectPos.left+difX,top:subjectPos.top-window.scrollY+difY})},function(tween){var subjectPos=_this.elem.offset();difX=((dest.left&&typeof dest.left==='number')?(dest.left-subjectPos.left):0)/tween.numKeyframes;difY=((dest.top&&typeof dest.top==='number')?(dest.top-subjectPos.top):0)/tween.numKeyframes},onDone).start()};return VirtualCursor}());exports.VirtualCursor=VirtualCursor});define("js/HelpSystem/HelpSystemPlayer",["require","exports","js/ElementRegister","js/UserInput","Site","Dialog","js/HelpSystem/Scenario","js/HelpSystem/PlayerControls","js/HelpSystem/Tooltip","js/HelpSystem/PlayerCanvas","js/HelpSystem/ScenarioBuilder","js/HelpSystem/AnimTween","js/HelpSystem/VirtualCursor","js/Service","jquery","js/BuilderEvent","js/PluginApi/UIManager","js/CommonTypes"],function(require,exports,ElementRegister_15,UserInput_5,Site_3,Dialog_18,Scenario_2,PlayerControls_1,Tooltip_1,PlayerCanvas_1,ScenarioBuilder_1,AnimTween_3,VirtualCursor_1,Service_55,jquery_114,BuilderEvent_22,UIManager_2,CommonTypes_26){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HelpSystemPlayer=void 0;var instance,builder,wbConfig;var HelpSystemPlayer=exports.HelpSystemPlayer=(function(){function HelpSystemPlayer(){var _this=this;this.scenario=null;this.stepIndex=-1;this.selfTip=null;this.currentStepSubject=null;this.stepParams=[];this.forceList=[];this.forcingBounds=!1;this.audio=null;this.bgAudio=null;this.autoAdvance=!1;this.delayedAutoAdvance=this.autoAdvance;this.delayedTimer=0;this.performInProgress=!1;this.performStack=[];this.debug=!1;this.vDesktop=null;this.subjectMap={};this.currElemSubject=null;this.canvas=null;this.cursor=null;this.timerHandles={eventDelay:0,stepDelay:0,resizeTween:null,moveTween:null};this.hotkeysEnabled=!1;this.waitForAudio=!1;this.doneCallback=null;this.playToggleLock=!1;this.controls=PlayerControls_1.PlayerControls.init(function(){if(_this.playToggleLock)
return;_this.playToggleLock=!0;setTimeout(function(){_this.playToggleLock=!1},300);if(!_this.delayedTimer)
_this.delayedAutoAdvance=_this.autoAdvance;if(_this.delayedAutoAdvance){_this.delayedAutoAdvance=!1;_this.controls.getFields().playBtn.getElem().attr({title:__('Play')});_this.controls.getFields().playBtn.setIcon('fa fa-play');_this.controls.getFields().nextBtn.setEnabled(!0)}else{_this.delayedAutoAdvance=!0;_this.controls.getFields().nextBtn.setEnabled(!1);_this.controls.getFields().playBtn.getElem().attr({title:__('Stop')});_this.controls.getFields().playBtn.setIcon('fa fa-pause')}
_this.delayedPlayPause()},function(){if(!_this.autoAdvance&&!_this.performInProgress)
_this.perform(!1);},function(){_this.end()},function(speed,speedMax){if(!_this.scenario)
return;var k=0.6;_this.scenario.stepDelay=HelpSystemPlayer.STEP_DELAY+Math.round(HelpSystemPlayer.STEP_DELAY*(6-speed)*k);var sp=(HelpSystemPlayer.STEP_DELAY+Math.round(HelpSystemPlayer.STEP_DELAY*(6-1)*k))*0.5;_this.scenario.animDuration=Math.max(Math.round(_this.scenario.stepDelay*HelpSystemPlayer.ANIM_DURATION/sp),HelpSystemPlayer.ANIM_DURATION)});this.controls.setVisible(!1);(0,jquery_114.default)(document.body).append(this.controls.getElem());UserInput_5.UserInput.addHotKey('esc',function(){if(_this.hotkeysEnabled)
_this.end();});window.addEventListener('hashchange',function(){_this.handleUrlHashChange()},!1)}
HelpSystemPlayer.init=function(builderInstance,wbConfigInst){builder=builderInstance;wbConfig=wbConfigInst;if(!instance)
instance=new HelpSystemPlayer();Service_55.Service.HelpSystemPlayer=HelpSystemPlayer;(0,ScenarioBuilder_1.init)(builderInstance,wbConfig);return instance};HelpSystemPlayer.notify=function(event,subject){if(subject===void 0){subject=null}
if(!instance)
return;instance.handleEvent(event,subject)};HelpSystemPlayer.loadRemote=function(name,live,doneCallback){if(live===void 0){live=!1}
if(doneCallback===void 0){doneCallback=null}
if(!instance||!name)
return;if(name==='.'){instance.load((0,ScenarioBuilder_1.buildFromCurrent)(builder,!live));instance.start(!1,!0,!live,!live,doneCallback)}else{jquery_114.default.getJSON(wbConfig.lnBaseUrl+'scenario/load/'+name).then(function(res){if(res){instance.load(res);instance.start(!1,!0,!live,!1,doneCallback)}else{console.log("Scenario '".concat(name,"' not found."))}},function(){console.log('Error loading scenario.')})}};HelpSystemPlayer.getCanvas=function(){return instance?instance.canvas:null};HelpSystemPlayer.prototype.delayedPlayPause=function(){var _this=this;if(this.delayedTimer)
clearTimeout(this.delayedTimer);if(this.performInProgress){this.delayedTimer=setTimeout(function(){return _this.delayedPlayPause()},17)}else{if(this.delayedAutoAdvance){if(!this.autoAdvance)
this.perform(!0);}else{this.autoAdvance=!1;if(this.timerHandles.stepDelay)
clearTimeout(this.timerHandles.stepDelay);}}};HelpSystemPlayer.prototype.handlePageLoad=function(serverSideScenario){var _this=this;if(serverSideScenario===void 0){serverSideScenario=null}
if(serverSideScenario){this.load(serverSideScenario);setTimeout(function(){_this.start()},1000)}else{this.handleUrlHashChange()}};HelpSystemPlayer.prototype.handleUrlHashChange=function(){};HelpSystemPlayer.prototype.handleEvent=function(event,subject){var _this=this;if(subject===void 0){subject=null}
if(this.forcingBounds){if(this.debug)
console.log("ignoring event ".concat(event," - currently forcing bounds"));return}
if(this.debug)
console.log("Handle event ".concat(event," - subject: ").concat(subject?'Y':'N'));if(!this.scenario||this.stepIndex<0)
return;if(event&&event.match(/^add-plugin-[^-]+$/)&&this.canvas&&subject){this.canvas.registerElementAdd(subject)}
this.processForces(event);var step=this.scenario.steps[this.stepIndex];var match;if(!this.selfTip){if(step.requirements&&step.requirements.length>0){var _loop_27=function(i){if(!step.requirements[i])
return"continue";if(step.requirements[i]===event){step.requirements.splice(i,1);if(this_18.debug)
console.log("Satisfy requirement ".concat(event,", remaining ").concat(step.requirements.length));}else if((match=step.requirements[i].match(/^timeout:([0-9]+)$/i))){if(this_18.timerHandles.eventDelay)
clearTimeout(this_18.timerHandles.eventDelay);this_18.timerHandles.eventDelay=setTimeout(function(){if(step.requirements)
_this.handleEvent(step.requirements[i],null);},parseInt(match[1],10))}};var this_18=this;for(var i=(step.requirements.length-1);i>=0;i--){_loop_27(i)}}
if(!step.requirements||step.requirements.length===0){if(this.debug)
console.log("Render step",step);this.renderStep(step,this.stepParams);this.stepParams=[]}}
if(this.selfTip||(!step.subject&&(!step.requirements||step.requirements.length===0))){if(step.objectives&&step.objectives.length>0){for(var i=(step.objectives.length-1);i>=0;i--){if(step.objectives[i]===event){if(!this.currElemSubject&&event&&event.match(/^add-plugin-[^-]+$/)&&subject){this.currElemSubject=subject}
step.objectives.splice(i,1);this.stepParams.push(subject);if(this.debug)
console.log("Complete objective ".concat(event,", remaining ").concat(step.objectives.length));}}}
if(!step.objectives||step.objectives.length===0){if(this.currElemSubject&&step.forceBounds){if(this.debug)
console.log("Queue force bounds",step.forceBounds);this.forceList.unshift(Object.assign({subject:this.currElemSubject},step.forceBounds));this.processForces(event)}
if(!this.currElemSubject&&step.forceBounds){console.error('Error no subject for forcing')}
if(this.debug)
console.log("Advance step");this.next()}else if(event=='scenario-start'&&this.autoAdvance&&this.stepIndex===0){this.handleAutoAdvance()}}};HelpSystemPlayer.prototype.processForces=function(event){this.forcingBounds=!0;for(var i=(this.forceList.length-1);i>=0;i--){var forceBounds=this.forceList[i];if(forceBounds.event&&forceBounds.event!==event)
continue;this.forceList.splice(i,1);if(this.debug)
console.log("Force bounds",forceBounds);if(forceBounds.subject)(0,Scenario_2.applyBounds)(forceBounds.subject,forceBounds);}
this.forcingBounds=!1};HelpSystemPlayer.prototype.renderStep=function(step,params){var _this=this;this.clearStep();this.currentStepSubject=this.resolveTargetPath(step.subject,params,step.id,!0);if(this.currentStepSubject){if(!this.scenario)
return;this.selfTip=new Tooltip_1.Tooltip(step,this.currentStepSubject,function(){_this.closeTooltip()});if(this.currentStepSubject.elem){var pathParts=step.subject.split('-');if(pathParts.length>=4&&pathParts[0]=="item"&&pathParts[1]=="plugin"&&pathParts[3]=="prop"){var elem_1=this.currentStepSubject.elem;var panel_1=elem_1.closest(".wb-sidebar-item-content").get(0);elem_1.parents(".wb-property-group.collapsed").removeClass("collapsed");setTimeout(function(){var panelRect=panel_1.getBoundingClientRect();var elemRect=elem_1.get(0).getBoundingClientRect();var bestLeft=Math.max(panelRect.left,panelRect.left+(panelRect.width-elemRect.width)/2);var bestTop=Math.max(panelRect.top,panelRect.top+(panelRect.height-elemRect.height)/2);var xDelta=0;var yDelta=bestTop-elemRect.top;try{panel_1.scrollBy({left:-xDelta,top:-yDelta,behavior:'smooth'})}catch(err){panel_1.scrollBy(-xDelta,-yDelta)}},Math.floor(this.scenario.stepDelay/2))}}
if(step.audio){if(this.debug)
console.log("Play audio: ".concat(step.audio));if(this.audio)
this.audio.pause();this.audio=new Audio((this.scenario.baseUrl?this.scenario.baseUrl:'')+step.audio);this.audio.onload=function(){if(!_this.audio)
return;if(_this.debug)
console.log("Audio loaded: ".concat(step.audio));_this.audio.play()};this.audio.onerror=function(){console.error("Failed to load audio: ".concat(step.audio))};this.audio.load();this.audio.play()}}else{if(step.subject)
console.error("No subject: "+step.subject);}};HelpSystemPlayer.prototype.updateUrl=function(url,scenario){if(!this.canvas||!scenario||!scenario.baseUrl||typeof url!=='string'||url.match(/^(http|https):\/\/.+/i))
return url;return scenario.baseUrl+url};HelpSystemPlayer.prototype.closeTooltip=function(){if(this.selfTip){this.selfTip.el.remove();this.selfTip=null}};HelpSystemPlayer.prototype.clearStep=function(){this.closeTooltip();this.currElemSubject=null;this.currentStepSubject=null};HelpSystemPlayer.prototype.resolveTargetPath=function(path,params,mappingId,trackElemSubject){if(mappingId===void 0){mappingId=null}
if(trackElemSubject===void 0){trackElemSubject=!1}
if(!path)
return null;var pathParts=path.split('[');var idxStr=(pathParts.length>1&&pathParts[1].length>1)?pathParts[1].substring(0,pathParts[1].length-1):null;var idx=(idxStr&&idxStr.match(/^[0-9]+$/))?parseInt(idxStr,10):-1;var hasIndex=(pathParts.length>1);if(isNaN(idx))
idx=-1;pathParts=pathParts[0].split('-');var manager=(0,UIManager_2.getManager)();switch(pathParts[0]){case 'desktop':if(!this.vDesktop)
return null;return new Tooltip_1.ScenarioStepSubject(this.vDesktop,'right');case 'preview':var sub=(pathParts[1]+'-'+pathParts[2]);if(sub==='close-btn'){var elem=manager.lookupUIElement('preview','close');if(elem)
elem.elem.css({position:'relative'});return elem}else if(sub==='resize-border'){if(pathParts.length>3&&pathParts[3]==='left'){return new Tooltip_1.ScenarioStepSubject(builder.previewToolbar.getResizerElement(!0),'right',200,8)}else{return new Tooltip_1.ScenarioStepSubject(builder.previewToolbar.getResizerElement(!1),'left',200,-4)}}
break;case 'toolbar':if(pathParts[1]==='ctrl'){var elemId=pathParts[2];if(elemId==='config'){if(pathParts.length>3&&pathParts[3]){elemId+='-'+pathParts[3]}}
var sub_1=manager.lookupUIElement('control',elemId);if(sub_1)
return sub_1}else if(pathParts[1]==='plugin'){var sub_2=manager.lookupUIElement('plugin',pathParts[2]);if(sub_2)
return sub_2}
break;case 'item':if(pathParts[1]==='plugin'){var list=void 0;if(this.debug)
console.log("--identify",hasIndex,idxStr,idx,this.subjectMap);if(hasIndex&&idxStr&&(idxStr in this.subjectMap)){list=[this.subjectMap[idxStr]]}else if(hasIndex&&idx>=0&&params.length>0){list=params}else{list=this.canvas?this.canvas.getRegisteredElements():builder.bodyInstance.getContentElements()}
for(var _i=0,list_2=list;_i<list_2.length;_i++){var elem=list_2[_i];var id=elem.getClassType();if(pathParts[2]===id){if(mappingId)
this.subjectMap[mappingId]=elem;if(trackElemSubject)
this.currElemSubject=elem;if(pathParts.length>4){var sub_3=(pathParts[3]+'-'+pathParts[4]);if(sub_3==='edit-cmd'){var telm=elem.getToolbarElem(pathParts[5]);if(!telm)
telm=elem.getToolbarElem();return new Tooltip_1.ScenarioStepSubject(telm,'left',0,0,!0,!0)}else if(sub_3==='edit-btn'){elem.setControlsVisible(!0);return new Tooltip_1.ScenarioStepSubject(elem.editBtn.elem,'left')}else if(sub_3==='move-btn'){elem.setControlsVisible(!0);return new Tooltip_1.ScenarioStepSubject(elem.moveBtn.elem,'right')}else if(pathParts[3]==='prop'||pathParts[3]==='menu'){var prop=pathParts[4]+((pathParts.length>5)?('-'+pathParts[5]):'');if(pathParts[3]!=='prop')
prop=pathParts[3]+'-'+prop;var field=elem.comPropertiesField(prop);if(this.debug)
console.log("Resolving property subject",prop,elem,field);if(field){if(pathParts[4]==='apply'){return new Tooltip_1.ScenarioStepSubject(field.getElem(),'left',0,0,!0,!0)}else if(pathParts[4]==='tab'){return new Tooltip_1.ScenarioStepSubject(field.getElem(),'bottom',0,0,!0,!0)}else{return new Tooltip_1.ScenarioStepSubject(field.getElem(),'bottom')}}}}else{return new Tooltip_1.ScenarioStepSubject(elem.elem)}}}}
break;case 'config':if(pathParts[1]==='background'){var autoId=pathParts[0]+'-'+pathParts[1];var dialog=this.subjectMap[autoId];if(dialog){if(pathParts[2]==='prop'){var prop=dialog.propertyDialogField(pathParts[3]);if(prop)
return new Tooltip_1.ScenarioStepSubject(prop.getElem());}}}
break}
return null};HelpSystemPlayer.prototype.load=function(scenario){this.end();this.scenario=scenario;if(!('animDuration' in this.scenario)||!this.scenario.animDuration||isNaN(this.scenario.animDuration)){this.scenario.animDuration=HelpSystemPlayer.ANIM_DURATION}
if(!('stepDelay' in this.scenario)||!this.scenario.stepDelay||isNaN(this.scenario.stepDelay)){this.scenario.stepDelay=HelpSystemPlayer.STEP_DELAY}
if(builder.isTouchDevice){if(this.scenario.audio)
this.scenario.audio=null;if(this.scenario.steps)
for(var _i=0,_a=this.scenario.steps;_i<_a.length;_i++){var step=_a[_i];if(step.audio)
step.audio=undefined}}};HelpSystemPlayer.prototype.getTargetCanvas=function(step,defaultBlock){if(step===void 0){step=null}
if(defaultBlock===void 0){defaultBlock=null}
var blockId=(step&&step.block)?step.block:(defaultBlock?defaultBlock:CommonTypes_26.ContentBlockId.Main);if(blockId in this.subjectMap)
return this.subjectMap[blockId];if(this.canvas){var el=blockId?this.canvas.findChildById(blockId):null;return el?el:this.canvas}else{blockId=blockId.replace("step-","");var block=builder.bodyInstance.getContentBlock(blockId);if(!block)
throw Error("Block '"+blockId+"' not found");return block}};HelpSystemPlayer.prototype.cursorGoElem=function(step,subject,type){var _this=this;if(type===void 0){type=''}
if(!step.cursorReady&&this.cursor&&subject){var cursorPos=subject.elem.offset();if(type=='prop'){cursorPos.left+=subject.getWidthInPixels()-10;cursorPos.top+=10}else if(type=='move'){cursorPos.left+=10;cursorPos.top+=10}else if(type=='resize'){if(subject.getClassType()=='TextArea'){cursorPos.left+=subject.elem.outerWidth(!1)-3;cursorPos.top+=Math.round(subject.elem.outerHeight(!1)*0.3)}else{cursorPos.left+=subject.elem.outerWidth(!1)-8;cursorPos.top+=subject.elem.outerHeight(!1)-8}}else{cursorPos.left+=Math.round(subject.elem.outerWidth(!1)/2.0);cursorPos.top+=Math.round(subject.elem.outerHeight(!1)/2.0)}
this.cursor.moveTo(cursorPos,function(){if(_this.cursor)
_this.cursor.animClick(function(){step.cursorReady=!0;_this.perform(_this.autoAdvance)})});return!0}
return!1};HelpSystemPlayer.prototype.cursorGoControl=function(step,control,type,multi){var _this=this;if(multi===void 0){multi=!1}
if((!step.cursorReadyControl||!step.cursorReadyControl[type])&&this.cursor&&control){var elem=(control instanceof Tooltip_1.ScenarioStepSubject)?control.elem:control;var cursorPos=elem.offset();var size=Tooltip_1.ScenarioStepSubject.calcActualSize(elem);cursorPos.left+=Math.round(size.width/2.0);cursorPos.top+=Math.round(size.height/2.0);this.cursor.moveTo(cursorPos,function(){if(_this.cursor)
_this.cursor.animClick(function(){if(!step.cursorReadyControl)
step.cursorReadyControl={};step.cursorReadyControl[type]=!0;_this.perform(_this.autoAdvance)},multi)});return!0}
return!1};HelpSystemPlayer.prototype.perform=function(autoAdvance){var _this=this;if(autoAdvance===void 0){autoAdvance=!1}
if(!this.scenario||this.stepIndex<0)
return;this.performInProgress=!0;this.autoAdvance=autoAdvance;var step=this.scenario.steps[this.stepIndex];if(this.debug)
console.log('performing step',autoAdvance,JSON.stringify(step));if(step.objectives.length>0){var _loop_28=function(i){var parts=step.objectives[i].split('-');if(parts[0]==='add'){if(parts[1]==='plugin'){var subject=this_19.resolveTargetPath(step.subject,this_19.stepParams);if(this_19.cursorGoControl(step,subject,step.objectives[i]))
return{value:void 0};var manager_1=(0,UIManager_2.getManager)();var pluginId_1=parts[2];var addPlugin_1=function(){var ElemType=ElementRegister_15.ElementRegister.getClassByName(pluginId_1);var elDef={content:(step.defaultContent?step.defaultContent:{})};if(step.elemId)
elDef.id=step.elemId;if(pluginId_1==='Picture'){if(elDef.content.src)
elDef.content.src=_this.updateUrl(elDef.content.src,_this.scenario);}else if(pluginId_1==='Gallery'){if(elDef.content.images&&elDef.content.images instanceof Array){elDef.content.images=elDef.content.images.map(function(img){return _this.updateUrl(img,_this.scenario)})}}else if(pluginId_1==='Menu'){elDef.forceNewDialog=!0}
var el=new ElemType(elDef,!0);if(step.id){_this.subjectMap[step.id]=el;if(_this.debug)
console.log("add element to map",step.id,el);}
var block=_this.getTargetCanvas(step);block.addChild(el);if(step.forceBounds)(0,Scenario_2.applyBounds)(el,step.forceBounds);_this.performStack.push(el);if(el.getClassType()==='Picture'||el.getClassType()==='Gallery'){_this.handleEvent('item-plugin-'+pluginId_1+'-edit-start',el);_this.handleEvent('item-plugin-'+pluginId_1+'-edit-end',el)}
if(el.getClassType()==='Picture'){el.loadImage(el.getSrc())}};if(subject){var thisSubject_1=subject,subjectEl_1,difW_1=0,difH_1=0,animDurr_1=this_19.scenario.animDuration;if(this_19.timerHandles.resizeTween)
this_19.timerHandles.resizeTween.dispose();this_19.timerHandles.resizeTween=new AnimTween_3.AnimTween(animDurr_1,24,function(){var coff=subjectEl_1.offset();subjectEl_1.css({left:coff.left+difW_1,top:coff.top-window.scrollY+difH_1});manager_1.closeAll()},function(tween){var off=thisSubject_1.elem.offset();off.top-=window.scrollY;subjectEl_1=thisSubject_1.elem.clone().detach().css({left:off.left,top:off.top,position:'fixed'}).addClass('ui-draggable-dragging').attr({id:''});var targetPos=new Scenario_2.BoundableElement(pluginId_1,_this.getTargetCanvas(step));targetPos.left=(0,jquery_114.default)(window).width()/2.0;targetPos.top=(0,jquery_114.default)(window).height()/2.0;if(step.forceBounds)(0,Scenario_2.applyBounds)(targetPos,step.forceBounds);targetPos.makePageRelative();if(_this.cursor)
_this.cursor.moveTo(targetPos,null,animDurr_1,24);targetPos.top-=window.scrollY;(0,jquery_114.default)(document.body).append(subjectEl_1);difW_1=(targetPos.left-off.left)/tween.numKeyframes;difH_1=(targetPos.top-off.top)/tween.numKeyframes},function(){subjectEl_1.remove();addPlugin_1();_this.performInProgress=!1;_this.handleAutoAdvance()},function(){subjectEl_1.remove()}).start();return{value:void 0}}else{manager_1.closeAll();addPlugin_1()}}}else if(parts[0]==='item'){if(parts[1]==='plugin'){if(parts[3]==='resize'){var subject=(this_19.performStack.length>0)?this_19.performStack[this_19.performStack.length-1]:null;if(this_19.cursorGoElem(step,subject,'resize'))
return{value:void 0};this_19.handleEvent('item-plugin-'+parts[2]+'-resize-start',subject);if(step.forceBounds&&subject){var targetBounds_1=step.forceBounds,thisSubject_2=subject,difW_2=0,difH_2=0,animDurr_2=this_19.scenario.animDuration;if(this_19.timerHandles.resizeTween)
this_19.timerHandles.resizeTween.dispose();this_19.timerHandles.resizeTween=new AnimTween_3.AnimTween(animDurr_2,24,function(){thisSubject_2.setSize(thisSubject_2.getWidthInPixels()+difW_2,thisSubject_2.getHeightInPixels()+difH_2);thisSubject_2.onResize()},function(tween){if(_this.cursor&&targetBounds_1.width){var cursorPos=_this.cursor.getElem().offset();cursorPos.top+=targetBounds_1.height-thisSubject_2.getHeightInPixels();cursorPos.left+=targetBounds_1.width-thisSubject_2.getWidthInPixels();_this.cursor.moveTo(cursorPos,null,animDurr_2,24)}
difW_2=(targetBounds_1.width?(targetBounds_1.width-thisSubject_2.getWidthInPixels()):0)/tween.numKeyframes;difH_2=(targetBounds_1.height?(targetBounds_1.height-thisSubject_2.getHeightInPixels()):0)/tween.numKeyframes},function(){thisSubject_2.elem.trigger('resize');_this.handleEvent('item-plugin-'+parts[2]+'-resize-end',thisSubject_2);_this.performInProgress=!1;_this.handleAutoAdvance()}).start();return{value:void 0}}}else if(parts[3]==='move'){var subject=(this_19.performStack.length>0)?this_19.performStack[this_19.performStack.length-1]:null;if(this_19.cursorGoElem(step,subject,'move'))
return{value:void 0};this_19.handleEvent('item-plugin-'+parts[2]+'-move-start',subject);if(step.forceBounds&&subject){var targetBounds_2=step.forceBounds,thisSubject_3=subject,difX_1=0,difY_1=0,animDurr_3=this_19.scenario.animDuration;if(this_19.timerHandles.moveTween)
this_19.timerHandles.moveTween.dispose();this_19.timerHandles.moveTween=new AnimTween_3.AnimTween(animDurr_3,24,function(){var subjectPos=thisSubject_3.getLocation();thisSubject_3.setLocation(subjectPos.left+difX_1,subjectPos.top+difY_1)},function(tween){var parent=thisSubject_3.getParent();var cursorPos=new Scenario_2.BoundableElement('',_this.getTargetCanvas(step,(parent?parent.id:null)),targetBounds_2,!0);cursorPos.left+=10;cursorPos.top+=10;if(_this.cursor)
_this.cursor.moveTo(cursorPos,null,animDurr_3,24);var subjectPos=thisSubject_3.getLocation();difX_1=((targetBounds_2.left&&typeof targetBounds_2.left==='number')?(targetBounds_2.left-subjectPos.left):0)/tween.numKeyframes;difY_1=((targetBounds_2.top&&typeof targetBounds_2.top==='number')?(targetBounds_2.top-subjectPos.top):0)/tween.numKeyframes},function(){_this.handleEvent('item-plugin-'+parts[2]+'-move-end',thisSubject_3);_this.performInProgress=!1;_this.handleAutoAdvance()}).start();return{value:void 0}}}else if(parts[3]==='edit'){var act=(parts.length>4)?parts[4]:'';var subject=this_19.currElemSubject;if(subject){var defValue=(step.defaultContent&&('value' in step.defaultContent)?step.defaultContent.value:'1234');if(parts[2]=='TextArea'){if(act==='select'){if(this_19.cursorGoElem(step,subject))
return{value:void 0};subject.selectAll()}else if(act==='text'){subject.insertText(defValue,!0)}else if(act==='cmd'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};subject.execCommand(parts[5])}else{if(parts[4]=='start'){if(this_19.cursorGoElem(step,subject))
return{value:void 0};subject.showEditor(0,0)}
if(parts[4]=='end'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};subject.hideEditor()}}}}}else if(parts[3]==='select'){var subject=this_19.currElemSubject;var resolvedSubject=void 0;if(!subject&&step.subject&&(resolvedSubject=this_19.resolveTargetPath(step.subject,this_19.stepParams))){subject=resolvedSubject}
if(this_19.cursorGoElem(step,subject,'select'))
return{value:void 0};if(!step.keepCurrentSelection)
Service_55.Service.element.unselectAll();subject.setSelected(!0)}else if(parts[3]==='setAsBg'){var subject=this_19.currElemSubject;if(this_19.cursorGoElem(step,subject,'prop'))
return{value:void 0};subject.setAsBackground()}else if(parts[3]==='prop'||parts[3]==='menu'){var subject=this_19.currElemSubject;if(this_19.debug)
console.log("--subject=",subject);if(subject){var defValue=(step.defaultContent&&('value' in step.defaultContent)?step.defaultContent.value:'1234');if(parts[4]==='open'){if(this_19.cursorGoElem(step,subject,'prop'))
return{value:void 0};subject.comProperties()}else if(parts[4]==='close'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};subject.closeComProperties()}else if(parts[4]==='apply'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};subject.applyComProperties()}else if(parts[4]==='tab'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};var field=subject.comPropertiesField(parts[4]+'-'+parts[5]);if(field){field.select();HelpSystemPlayer.notify('item-plugin-'+parts[2]+'-prop-'+parts[4]+'-'+parts[5],subject)}}else if(parts[4]==='urlLink'&&parts[2]=='Picture'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};var field=subject.comPropertiesField(parts[4]);if(field){field.setValue({type:'url',url:defValue});HelpSystemPlayer.notify('item-plugin-'+parts[2]+'-prop-'+parts[4]+'-change',subject)}}else if(parts[4]==='linkTypeEnlarge'&&parts[2]=='Picture'){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,step.objectives[i]))
return{value:void 0};var field=subject.comPropertiesField(parts[4]);if(field){field.setValue(!0);HelpSystemPlayer.notify('item-plugin-'+parts[2]+'-prop-'+parts[4]+'-change',subject)}}else{var propName=void 0,actName=void 0;if(parts[3]!=='prop'){propName=parts[3]+'-'+parts[4]+((parts[3]==='menu')?((parts.length>5)?('-'+parts[5]):''):'');actName=((parts[3]==='menu')?parts[6]:parts[5])}else{propName=parts[4];actName=parts[5]}
if(parts[2]=='Menu'){if(propName==='menu-new-apply'||propName==='menu-edit-apply'||propName.match(/^menu\-edit\-select\:[0-9]+$/)){if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,propName))
return{value:void 0};subject.applyComProperties(parts[3]+'-'+parts[4]+((parts.length>5)?('-'+parts[5]):''));return"continue"}else if(propName==='menu-new'){if(this_19.cursorGoElem(step,subject,'prop'))
return{value:void 0};subject.openEditMenuItems(!0);return"continue"}else if(propName==='menu-edit'){if(this_19.cursorGoElem(step,subject,'prop'))
return{value:void 0};subject.openEditMenuItems(!1);return"continue"}}
var multi=step.objectives[i].match(/^.+\-bg[^\-]+\-change$/)?!0:!1;if(this_19.currentStepSubject&&this_19.cursorGoControl(step,this_19.currentStepSubject,propName,multi))
return{value:void 0};var field_1=subject.comPropertiesField(propName);var property=subject.getProperty(propName);if(property&&actName==='change'){if(field_1&&("onValueChanged" in field_1)){property.deserialize(subject,defValue,!0,!0);setTimeout(function(){return field_1===null||field_1===void 0?void 0:field_1.onValueChanged()},10)}else{property.deserialize(subject,defValue,!0,!0)}}else if(field_1&&actName==='click'){field_1.trigger('click')}else if(field_1){if(parts[2]=='Shape'&&propName==='borderRadius'&&typeof defValue!=='object'){field_1.setValue({lt:defValue,rt:defValue,rb:defValue,lb:defValue})}else{field_1.setValue(defValue)}
if(parts[2]=='Picture'&&(propName==='sizeW'||propName==='sizeH')){field_1.trigger('change')}else if(parts[2]=='GoogleMaps'&&propName==='gmapAddress'){var gmap=subject.comPropertiesField('gmap');if(gmap&&step.defaultContent&&('ll' in step.defaultContent)){gmap.setLatLng(step.defaultContent.ll)}}else if(parts[2]=='GoogleMaps'&&propName==='gmapZoomLevel'){field_1.trigger('change')}else if(parts[2]=='Youtube'&&propName==='videoId'){field_1.trigger('paste')}else if(parts[2]=='Form'){field_1.trigger('change')}
HelpSystemPlayer.notify('item-plugin-'+parts[2]+((parts[3]==='prop')?('-'+parts[3]):'')+'-'+propName+'-'+actName,subject)}}}}}}else if(parts[0]==='toolbar'){if(parts[1]==='plugin'){var subject=this_19.resolveTargetPath(step.subject,[]);if(parts[3]=='open'){if(subject){if(this_19.cursorGoControl(step,subject,step.objectives[i]))
return{value:void 0};var buttons=subject.elem.children('a, button, .btn');if(buttons.length>0){buttons.first().trigger('mouseover')}else{subject.elem.trigger('mouseover')}}}}else if(parts[1]==='ctrl'){var subject=this_19.resolveTargetPath(step.subject,[]);if(parts[3]=='click'){if(subject){if(this_19.cursorGoControl(step,subject,step.objectives[i]))
return{value:void 0};var buttons=subject.elem.children('a, button, .btn');if(buttons.length>0){buttons.first().trigger('click')}else{subject.elem.trigger('click')}
if(this_19.autoAdvance)
this_19.handleEvent(step.objectives[i]);}}}}else if(parts[0]==='config'){if(parts[1]==='background'){var subject=this_19.resolveTargetPath(step.subject,[]);var multi=step.objectives[i].match(/^.+\-bgPage\-change$/)?!0:!1;if(subject&&this_19.cursorGoControl(step,subject,step.objectives[i],multi))
return{value:void 0};var autoId=parts[0]+'-'+parts[1];if(parts[2]==='open'){this_19.subjectMap[autoId]=builder.site.changePages()}else if(parts[2]==='apply'){var dialog=this_19.subjectMap[autoId];if(dialog)
dialog.propertyDialogApply(!0);}else if(parts[2]==='prop'){var dialog=this_19.subjectMap[autoId];if(dialog){var prop=dialog.propertyDialogField(parts[3]);if(parts[4]==='change'){if(prop){var val=prop.getValue();if(step.defaultContent&&('value' in step.defaultContent)){val=step.defaultContent.value}
prop.setValue(val);if(typeof prop.triggerChange==='function'){prop.triggerChange()}
if(parts[3]==='bgPage'&&this_19.canvas&&val&&val.css){this_19.canvas.elem.css(val.css);if(this_19.canvas.elem.get(0).style.backgroundColor==='transparent'){this_19.canvas.elem.css({backgroundColor:'#ffffff'})}}}}}}}}};var this_19=this;for(var i=(step.objectives.length-1);i>=0;i--){var state_1=_loop_28(i);if(typeof state_1==="object")
return state_1.value}}else{if(this.debug)
console.log("Advance step 2");this.next()}
this.performInProgress=!1;if(this.debug)
console.log('performing step done');this.handleAutoAdvance()};HelpSystemPlayer.prototype.handleAutoAdvance=function(){var _this=this;if(!this.scenario)
return;if(this.debug)
console.log('try auto advance',this.autoAdvance,this.performInProgress);if(this.autoAdvance&&!this.performInProgress){if(this.debug)
console.log('auto advance',this.audio);if(this.waitForAudio&&this.audio&&!this.audio.ended){if(this.debug)
console.log('wait for audio',this.audio);this.audio.addEventListener('ended',function(){if(!_this.scenario)
return;if(_this.debug)
console.log('wait for audio done - advance');if(_this.timerHandles.stepDelay)
clearTimeout(_this.timerHandles.stepDelay);_this.timerHandles.stepDelay=setTimeout(function(){return _this.perform(_this.autoAdvance)},_this.scenario.stepDelay)})}else{if(this.debug)
console.log('advance');if(this.timerHandles.stepDelay)
clearTimeout(this.timerHandles.stepDelay);this.timerHandles.stepDelay=setTimeout(function(){return _this.perform(_this.autoAdvance)},this.scenario.stepDelay)}}};HelpSystemPlayer.prototype.next=function(){if(!this.scenario||this.stepIndex<0)
return;if((this.scenario.steps.length-1)<=this.stepIndex){this.controls.setEndState(!0,!0);this.clearStep();this.autoAdvance=!1}else{this.clearStep();this.stepIndex++;this.controls.setStep(this.stepIndex+1,this.scenario.steps.length);this.handleEvent('scenario-next-step');this.handleAutoAdvance()}};HelpSystemPlayer.prototype.setStyle=function(style){if(style===void 0){style=null}
var scenarioStyle,normalStyle;for(var _i=0,_a=builder.site.styles;_i<_a.length;_i++){var style_1=_a[_i];if(style_1.selector==='.wb-stl-scenario'){scenarioStyle=style_1}else if(style_1.selector==='.wb-stl-normal'){normalStyle=style_1}}
if(scenarioStyle){var idx=builder.site.styles.indexOf(scenarioStyle);builder.site.styles.splice(idx,1)}
if(!style||!normalStyle||!this.scenario||!this.scenario.style){builder.site.updateStyle();return}
scenarioStyle=new Site_3.default.Style(normalStyle.serialize());scenarioStyle.name='Scenario';scenarioStyle.selector='.wb-stl-scenario';scenarioStyle.ruleSets=jquery_114.default.extend(!0,[],normalStyle.ruleSets);if(this.scenario.style.color){scenarioStyle.ruleSets[0].rules[0].css.color=this.scenario.style.color;if(!scenarioStyle.sys.text)
scenarioStyle.sys.text={};scenarioStyle.sys.text.color=this.scenario.style.color}
builder.site.styles.push(scenarioStyle);builder.site.updateStyle()};HelpSystemPlayer.prototype.start=function(doNotCallEnd,autoPlay,useCanvas,useMoreCanvas,doneCallback){var _this=this;if(doNotCallEnd===void 0){doNotCallEnd=!1}
if(autoPlay===void 0){autoPlay=!1}
if(useCanvas===void 0){useCanvas=!1}
if(useMoreCanvas===void 0){useMoreCanvas=!1}
if(doneCallback===void 0){doneCallback=null}
this.playToggleLock=!1;if(!this.scenario||this.scenario.steps.length===0)
return;if(!doNotCallEnd)
this.end();this.doneCallback=doneCallback;if(autoPlay){this.autoAdvance=!0;this.controls.getFields().nextBtn.setEnabled(!1);this.controls.getFields().playBtn.getElem().attr({attr:__('Stop')});this.controls.getFields().playBtn.setIcon('fa fa-pause')}
this.subjectMap={};if(useCanvas){this.canvas=new PlayerCanvas_1.PlayerCanvas(useMoreCanvas);var step_2,opacity_2=0,thisCanvas_1=this.canvas;new AnimTween_3.AnimTween(300,24,function(){opacity_2+=step_2;thisCanvas_1.elem.css({opacity:opacity_2})},function(tween){thisCanvas_1.elem.css({opacity:opacity_2});step_2=1.0/tween.numKeyframes},function(tween){tween.dispose()}).start()}else if(this.canvas){this.canvas.dispose();this.canvas=null}
if(this.canvas){for(var _i=0,_a=this.canvas.getRegisteredElements();_i<_a.length;_i++){var preCreatedElem=_a[_i];this.subjectMap[preCreatedElem.id]=preCreatedElem}}else{for(var _b=0,_c=builder.bodyInstance.getContentBlocks();_b<_c.length;_b++){var block=_c[_b];this.subjectMap[block.id]=block}}
if(this.scenario.requireSpace&&this.scenario.requireSpace>0){for(var _d=0,_e=this.scenario.steps;_d<_e.length;_d++){var step=_e[_d];if(!this.canvas){if(step.subject=='config-background-prop-bgPage'){var p=builder.site.getPage(builder.pageId);if(p&&p.background&&((p.background.image&&p.background.image!=='none')||(p.background.color&&p.background.color!=='transparent'))){p.background={css:{background:''}}}
builder.bodyInstance.bgSite={css:{background:''}};builder.bodyInstance.updateStyle()}}}
if(!this.canvas){for(var _f=0,_g=builder.bodyInstance.getContentBlocks();_f<_g.length;_f++){var block=_g[_f];for(var _h=0,_j=block.getChildren();_h<_j.length;_h++){var child=_j[_h];child.remove({})}}}}
this.stepIndex=0;this.stepParams=[];this.forceList=[];this.performStack=[];this.vDesktop=(0,jquery_114.default)('<div>').css({position:'fixed',left:-1,top:((0,jquery_114.default)(window).height()/2),width:1,height:1,zIndex:999,overflow:'visible'}).appendTo(document.body);this.cursor=new VirtualCursor_1.VirtualCursor();(0,jquery_114.default)(document.body).append(this.cursor.getElem());this.hotkeysEnabled=!0;this.currElemSubject=null;Service_55.Service.element.unselectAll();this.controls.setEndState(!1);this.controls.setSpeed(3);this.controls.setStep(this.stepIndex+1,this.scenario.steps.length);this.controls.setVisible(!0);if(this.scenario.audio){if(this.bgAudio)
this.bgAudio.pause();this.bgAudio=new Audio((this.scenario.baseUrl?this.scenario.baseUrl:'')+this.scenario.audio);this.bgAudio.loop=!0;this.bgAudio.onload=function(){if(_this.bgAudio)
_this.bgAudio.play();};this.bgAudio.onerror=function(){if(!_this.scenario)
return;console.error("Failed to load audio: ".concat(_this.scenario.audio))};this.bgAudio.load();this.bgAudio.play()}
if(this.scenario.style)
this.setStyle(this.scenario.style);this.handleEvent('scenario-start');var ea=new BuilderEvent_22.VisibilityChangedBuilderEvent(!0);BuilderEvent_22.GlobalEvents.triggerEvent("help.playershow",ea)};HelpSystemPlayer.prototype.end=function(){if(!this.scenario)
return;if(this.doneCallback){this.doneCallback.call(this);this.doneCallback=null}
this.clearStep();this.stepIndex=-1;this.forceList=[];this.performInProgress=!1;if(this.vDesktop){this.vDesktop.remove();this.vDesktop=null}
this.subjectMap={};this.controls.setVisible(!1);if(this.bgAudio)
this.bgAudio.pause();this.bgAudio=null;if(this.canvas){this.canvas.dispose();this.canvas=null}
if(this.cursor){this.cursor.dispose();this.cursor=null}
this.hotkeysEnabled=!1;this.handleEvent('scenario-end');this.setStyle(null);Dialog_18.default.closeAll();if(this.timerHandles.eventDelay)
clearTimeout(this.timerHandles.eventDelay);if(this.timerHandles.stepDelay)
clearTimeout(this.timerHandles.stepDelay);if(this.timerHandles.resizeTween)
this.timerHandles.resizeTween.dispose();if(this.timerHandles.moveTween)
this.timerHandles.moveTween.dispose();Service_55.Service.element.unselectAll();var ea=new BuilderEvent_22.VisibilityChangedBuilderEvent(!1);BuilderEvent_22.GlobalEvents.triggerEvent("help.playerhide",ea)};HelpSystemPlayer.ANIM_DURATION=400;HelpSystemPlayer.STEP_DELAY=500;return HelpSystemPlayer}())});define("js/PreviewToolbar",["require","exports","jquery","js/HelpSystem/HelpSystemPlayer","js/BuilderEvent","js/util/EventUtil","js/Service"],function(require,exports,jquery_115,HelpSystemPlayer_1,BuilderEvent_23,EventUtil_10,Service_56){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=exports.PreviewToolbar=void 0;var WINDOW_SIDE_PADDING=20+17;var PreviewToolbar=(function(){function PreviewToolbar(builder){var _this=this;this.isOpen=!1;this.lastScrollPosition=0;this.isDebugMode=!1;this.lockToMaxWidth=!0;this.builder=builder;this.body=(0,jquery_115.default)('<div>').addClass('wb-preview-body').hide();if(window.CSS&&typeof window.CSS.supports==='function'&&window.CSS.supports('-webkit-overflow-scrolling','touch')){this.body.css({'overflow':'auto','-webkit-overflow-scrolling':'touch',})}
this.bodyCover=(0,jquery_115.default)('<div>').addClass('wb-preview-cover').appendTo(this.body).hide();this.loaderOverlay=(0,jquery_115.default)('<div><div class="ico-spin icon-wb-spinner"></div></div>').addClass('wb-preview-loader-overlay').hide();this.iframe=document.createElement('iframe');var update=function(){if(_this.bodySize){_this.updateFramHeight();_this.updateBody()}};(0,jquery_115.default)(this.iframe).attr({frameborder:'0',scrolling:'yes'}).on('load',function(){_this.loaderOverlay.hide();update();_this.toggleDebugMode(!0);HelpSystemPlayer_1.HelpSystemPlayer.notify('preview-loaded',_this)});(0,jquery_115.default)(window).on('resize orientationchange',function(){if(_this.bodySize){var width=_this.getMaxPreviewWidth();if(_this.lockToMaxWidth?(_this.bodySize.width!==width):(_this.bodySize.width>width)){_this.bodySize.width=width}
BuilderEvent_23.GlobalEvents.triggerEvent('preview.size.changed',new BuilderEvent_23.PreviewSizeChangedEvent(_this.bodySize.width))}
update()});var mouse=null,mouseMoved=!1;this.resizerRight=(0,jquery_115.default)('<div>').addClass('wb-preview-sizer-r').on('mousedown touchstart',function(e){var pos=(0,EventUtil_10.posFromEvent)(e);mouse={v:_this.body.width(),t:6,x:pos.left,y:pos.top};mouseMoved=!1;_this.bodyCover.show()}).appendTo(this.body);this.resizerLeft=(0,jquery_115.default)('<div>').addClass('wb-preview-sizer-l').on('mousedown touchstart',function(e){var pos=(0,EventUtil_10.posFromEvent)(e);mouse={v:_this.body.width(),t:4,x:pos.left,y:pos.top};mouseMoved=!1;_this.bodyCover.show()}).appendTo(this.body);this.resizerTooltip=(0,jquery_115.default)('<div>').addClass('wb-preview-sizer-tt').css({display:'none'}).appendTo(this.body);(0,jquery_115.default)('<div class="wb_selection_dot"></div>').css({left:1,top:"50%",marginTop:-4}).appendTo(this.resizerRight);(0,jquery_115.default)('<div class="wb_selection_dot"></div>').css({right:1,top:"50%",marginTop:-4}).appendTo(this.resizerLeft);var minModeWidth=Service_56.default.modeManager.getMinWidth();(0,jquery_115.default)(window).on('mousemove touchmove',function(e){if(mouse){var pos=(0,EventUtil_10.posFromEvent)(e);if(mouse.t===6)
_this.body.width(Math.max(mouse.v+(pos.left-mouse.x)*2.0,minModeWidth));if(mouse.t===4)
_this.body.width(Math.max(mouse.v+(mouse.x-pos.left)*2.0,minModeWidth));if(!mouseMoved){mouseMoved=!0;HelpSystemPlayer_1.HelpSystemPlayer.notify('preview-resize-start',_this)}
var rect=_this.body[0].getBoundingClientRect();_this.setPreviewWidth(rect.width);_this.setTooltipVisible(!0,rect.width+'px',((pos.left>(rect.left+(rect.width/2)))?rect.width:0),pos.top-rect.top+11)}}).on('mouseup touchend touchcancel',function(){if(mouseMoved)
HelpSystemPlayer_1.HelpSystemPlayer.notify('preview-resize-end',_this);_this.setTooltipVisible(!1);mouse=null;mouseMoved=!1;_this.bodyCover.hide()});this.builder.body.before(this.body);this.builder.body.before(this.loaderOverlay);this.bodySize={width:minModeWidth,height:200};this.setVisible(!1)}
PreviewToolbar.prototype.setTooltipVisible=function(visible,value,x,y){if(value===void 0){value=''}
if(x===void 0){x=0}
if(y===void 0){y=0}
if(visible){this.resizerTooltip.text(value).css({display:'',left:x,top:y})}else{this.resizerTooltip.css({display:'none'})}};PreviewToolbar.prototype.toggleDebugMode=function(keep){if(keep===void 0){keep=!1}
if(!keep)
this.isDebugMode=!this.isDebugMode;if(!this.iframe.contentDocument)
return;if(this.isDebugMode){(0,jquery_115.default)(this.iframe.contentDocument.body).addClass('wb-site-debug')}else{(0,jquery_115.default)(this.iframe.contentDocument.body).removeClass('wb-site-debug')}};PreviewToolbar.prototype.updateFramHeight=function(){if(!this.bodySize||!this.body)
return;this.bodySize.height=(0,jquery_115.default)(window).height()-this.body.offset().top};PreviewToolbar.prototype.updateBody=function(){this.body.css({width:this.bodySize.width,height:this.bodySize.height})};PreviewToolbar.prototype.setVisible=function(visible){var ea=new BuilderEvent_23.VisibilityChangedBuilderEvent(visible);BuilderEvent_23.GlobalEvents.triggerEvent(visible?"preview.show":"preview.hide",ea);if(visible&&this.builder&&this.builder.bodyInstance){var maxMode=Service_56.default.modeManager.getMaxMode();if(maxMode&&maxMode!=Service_56.default.modeManager.MODE_TV)
this.setPreviewWidth(Math.min(Service_56.default.modeManager.getModeWidth(maxMode),(0,jquery_115.default)(document.body).width()-WINDOW_SIDE_PADDING));else this.setPreviewWidth((0,jquery_115.default)(document.body).width()-WINDOW_SIDE_PADDING)}
return this};PreviewToolbar.prototype.open=function(){if(!this.isOpen){this.body.append(this.iframe);var doc=(0,jquery_115.default)(document);this.lastScrollPosition=doc.scrollTop();doc.scrollTop(0);this.isOpen=!0;this.builder.body.setVisible(!1);this.setVisible(!0);this.loaderOverlay.show();this.body.show();this.updateBody();(0,jquery_115.default)(document.body).css({backgroundColor:'#aaaaaa'});(0,jquery_115.default)(document.body).on('keyup',this.keyup.bind(this));(0,jquery_115.default)(window).on('message',this.onmessage.bind(this));HelpSystemPlayer_1.HelpSystemPlayer.notify('preview-open',this)}
return this.iframe.contentWindow};PreviewToolbar.prototype.close=function(){if(this.isOpen){this.isOpen=!1;this.setVisible(!1);this.body.hide();this.loaderOverlay.hide();this.builder.body.setVisible(!0);if(this.iframe&&this.iframe.contentWindow){this.iframe.contentWindow.document.open();try{this.iframe.contentWindow.document.write('')}catch(e){console.error(e)}
this.iframe.contentWindow.document.close();(0,jquery_115.default)(this.iframe).detach()}
if(this.lastScrollPosition){(0,jquery_115.default)(document).scrollTop(this.lastScrollPosition);this.lastScrollPosition=0}(0,jquery_115.default)(window).trigger('resize');BuilderEvent_23.GlobalEvents.triggerEvent('block.main.updatesize',{});(0,jquery_115.default)(document.body).css({backgroundColor:'#ffffff'});(0,jquery_115.default)(document.body).off('keyup',this.keyup.bind(this));(0,jquery_115.default)(window).off('message',this.onmessage.bind(this));HelpSystemPlayer_1.HelpSystemPlayer.notify('preview-close',this)}};PreviewToolbar.prototype.getResizerElement=function(left){if(left===void 0){left=!1}
return left?this.resizerLeft:this.resizerRight};PreviewToolbar.prototype.getMaxPreviewWidth=function(){return(0,jquery_115.default)(document.body).width()-WINDOW_SIDE_PADDING};PreviewToolbar.prototype.setPreviewWidth=function(width){if(!this.bodySize)
return;var lockWidth=this.getMaxPreviewWidth();this.lockToMaxWidth=width>=lockWidth;this.bodySize.width=Math.min(lockWidth,width);this.updateBody();this.updateFramHeight();BuilderEvent_23.GlobalEvents.triggerEvent('preview.size.changed',new BuilderEvent_23.PreviewSizeChangedEvent(this.bodySize.width))};PreviewToolbar.prototype.keyup=function(e){if(e.key==='Escape'){this.close()}};PreviewToolbar.prototype.onmessage=function(event){if(event&&event.originalEvent&&event.originalEvent.data&&event.originalEvent.data){var key=event.originalEvent.data.keyup;if(key==='Escape'){this.close()}
var ready=event.originalEvent.data.ready;if(ready&&this.iframe.contentWindow){this.iframe.contentWindow.focus()}}};return PreviewToolbar}());exports.PreviewToolbar=PreviewToolbar;function init(builder){var tb=new PreviewToolbar(builder);return tb}
exports.init=init});define("js/ui/ChangeTemplateDialog",["require","exports","js/ui/BaseConfirmDialog"],function(require,exports,BaseConfirmDialog_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.show=void 0;var dialog=null;function show(){if(!dialog)
dialog=new BaseConfirmDialog_3.BaseConfirmDialog(__("Change template"),__("Are you sure you want to change current template?"),__("Once changed your information will be lost."),"wb-reset-template-dlg-icon",__("Cancel"),__("Yes, change template"));return(0,BaseConfirmDialog_3.showDeferred)(dialog)}
exports.show=show});define("js/DefaultUI/LanguageSelector",["require","exports","js/core/BuilderConfig","jquery"],function(require,exports,BuilderConfig_29,jquery_116){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.LanguageSelector=exports.flagFromLangCode=void 0;function flagFromLangCode(language){var countryCode=language?language.countryCode:'';var languageCode=language?language.code:'';var flagCountry;switch(countryCode){case 'us':flagCountry='gb';break;case 'cs':flagCountry='rs';break;case 'ct':flagCountry='es-ct';break;case 'gb':flagCountry='gb-wls';break;case 'gl':flagCountry='gal';break;case 'ae':flagCountry='eg';break;default:flagCountry=countryCode}
switch(languageCode){case 'myv':flagCountry='ru-mo';case 'ast':flagCountry='es-ast'}
return'flag-icon-'+flagCountry}
exports.flagFromLangCode=flagFromLangCode;var LanguageSelector=(function(){function LanguageSelector(builder,onOpen){var _this=this;this.isOpen=!1;var language=builder.getLanguage();var languages=builder.getLanguages();var lcCount=0;for(var _i=0,languages_1=languages;_i<languages_1.length;_i++){var li=languages_1[_i];if(!li.hidden)
lcCount++}
var selector=(0,jquery_116.default)('<div class="lang-selector btn-group langs li">').append('<button type="button" class="btn"><i class="'+flagFromLangCode(language)+'"></i></button>').append("\n\t\t\t\t<button type=\"button\" class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">\n\t\t\t\t\t<span class=\"caret\"></span>\n\t\t\t\t</button>\n\t\t\t");var contClass='lang-col-1';if(lcCount>=4)
contClass='lang-col-2';if(lcCount>=9)
contClass='lang-col-3';if(lcCount>=16)
contClass='lang-col-4';var langList=(0,jquery_116.default)('<ul class="dropdown-menu">').addClass(contClass).appendTo(selector);var cc=0;var _loop_29=function(lang){if(lang.hidden)
return"continue";var langElem=(0,jquery_116.default)('<li>').appendTo(langList);if(language&&lang.id==language.id)
langElem.addClass('active');(0,jquery_116.default)('<a>').attr({href:BuilderConfig_29.wbConfig.getLangSwapUrl(lang.default?"":lang.code)}).on('click',function(e){e.preventDefault();builder.setLanguage(lang);return!1}).append('<i class="'+flagFromLangCode(lang)+'">').append(' '+lang.name).appendTo(langElem);cc++};for(var _a=0,languages_2=languages;_a<languages_2.length;_a++){var lang=languages_2[_a];_loop_29(lang)}
var self=this;selector.find("a").on("click",function(){self.setOpen(!0);builder.goToPage(null,(0,jquery_116.default)(this).attr("href"));return!1});selector.find('button').on('click touchend',function(e){if(typeof onOpen==='function')
onOpen();_this.setOpen(!_this.isOpen);e.stopPropagation();e.preventDefault();return!1});this.elem=selector}
LanguageSelector.prototype.setOpen=function(visible){if(visible){this.isOpen=!0;this.elem.addClass('open')}else{this.isOpen=!1;this.elem.removeClass('open')}};return LanguageSelector}());exports.LanguageSelector=LanguageSelector});define("js/ui/TemplateChooserWizard",["require","exports","jquery","AlertBox","js/CustomContainer","js/FlexLayout","js/Label","js/PreloaderOverlay","js/Service","js/TemplateChooser","js/TextField","js/UIButton","js/core/BuilderConfig"],function(require,exports,jquery_117,AlertBox_3,CustomContainer_14,FlexLayout_12,Label_24,PreloaderOverlay_3,Service_57,TemplateChooser_1,TextField_10,UIButton_25,BuilderConfig_30){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Wizard=exports.showTemplateChooserWizard=void 0;var wizard=null;function showTemplateChooserWizard(){if(!wizard){wizard=new Wizard(!0);wizard.appendTo(document.body)}
wizard.setVisible(!0);wizard.loadTagCompletions()}
exports.showTemplateChooserWizard=showTemplateChooserWizard;var Wizard=(function(_super){__extends(Wizard,_super);function Wizard(standAlone,chooser){if(standAlone===void 0){standAlone=!1}
if(chooser===void 0){chooser=null}
var _this=this;var _a,_b;_this=_super.call(this,"column","stretch","stretch")||this;_this.standAlone=standAlone;_this.chooser=chooser;_this.tagCompletions=[];_this.addClass("wb-template-chooser-wizard"+(chooser?"":" wb-standalone"));var children=[_this.loader=new PreloaderOverlay_3.PreloaderOverlay(100).setVisible(!1),new FlexLayout_12.FlexLayout("column","flex-start","center").addClass("wb-tcw-form").addAllChildren([new CustomContainer_14.CustomContainer("h1").setText(__('Create New Website')),_this.alert=new AlertBox_3.default().setBoxStyle("danger").setVisible(!1),_this.businessNameGroup=new FlexLayout_12.FlexLayout("column").addClass("form-group").addAllChildren([new Label_24.Label("").addClass("control-label").setHtml(__("Your business name")+' <span>*</span>'),_this.businessName=new TextField_10.TextField(((_a=BuilderConfig_30.wbConfig.websiteInfo)===null||_a===void 0?void 0:_a.businessName)||'',BuilderConfig_30.wbConfig.__txt("Fox resort")).addClass("input-lg").onEnter(function(){return _this.createWebsite()}),]),_this.businessTypeGroup=new FlexLayout_12.FlexLayout("column").addClass("form-group").addAllChildren([new Label_24.Label("").addClass("control-label").setHtml(__("Your business type")+' <span>*</span>'),_this.businessType=new TextField_10.TextField(((_b=BuilderConfig_30.wbConfig.websiteInfo)===null||_b===void 0?void 0:_b.businessType)||'',BuilderConfig_30.wbConfig.__txt("Hotel")).addClass("input-lg").on('keydown',function(e){return _this.onAutoComplete(e)}).on('keyup',function(e){return _this.onAutoComplete(e)}),]),new FlexLayout_12.FlexLayout("column").addClass("form-group").setVisible(!1).addAllChildren([new Label_24.Label("").addClass("control-label").setHtml(__("Upload Your logo")),_this.logo=new TextField_10.TextField("").setType("file").addClass("input-lg"),]),new UIButton_25.UIButton(__("Edit Website"),UIButton_25.UIButton.STYLE_SUCCESS).setButtonSize(UIButton_25.UIButton.SIZE_LARGE).on("click",function(){return _this.createWebsite()}),]),];_this.preloader=(0,jquery_117.default)('<span>').addClass('fa fa-spinner fa-pulse').hide().appendTo(_this.businessTypeGroup.getElem());_this.completionList=(new TemplateChooser_1.CompletionList(_this.businessType.input)).appendTo(_this.businessTypeGroup.getElem());if(!chooser){children.unshift(new FlexLayout_12.FlexLayout("row","space-between","center").addClass("wb-tcw-header").addAllChildren([new TemplateChooser_1.LogoUI(),new TemplateChooser_1.LanguageSelectorUI(),]))}
_this.addAllChildren(children);return _this}
Wizard.prototype.setVisible=function(visible){var _this=this;_super.prototype.setVisible.call(this,visible);if(visible)
setTimeout(function(){return _this.businessName.focus()},300);return this};Wizard.prototype.setTagCompletions=function(tagCompletions){this.tagCompletions=tagCompletions};Wizard.prototype.loadTagCompletions=function(){var _this=this;this.alert.setVisible(!1);this.preloader.show();jquery_117.default.getJSON(BuilderConfig_30.wbConfig.getLnUrl('template/tag-completions',undefined,!0)).then(function(resp){if(!resp.ok||!resp.data){_this.alert.setError(resp.error||'failed getting completions');_this.alert.setVisible(!0);return}
_this.tagCompletions=resp.data}).fail(function(err){_this.alert.setError(err);_this.alert.setVisible(!0)}).always(function(){_this.preloader.hide()})};Wizard.prototype.onAutoComplete=function(e){var _this=this;return this.completionList.handleAutoComplete(e,this.tagCompletions,function(){return _this.createWebsite()})};Wizard.prototype.createWebsite=function(){var _this=this;var hasError=!1;var businessName=this.businessName.getValue();if(businessName.length==0){this.businessNameGroup.addClass("has-error");hasError=!0}else{this.businessNameGroup.removeClass("has-error")}
var businessType=this.businessType.getValue();if(businessType.length==0){this.businessTypeGroup.addClass("has-error");hasError=!0}else{this.businessTypeGroup.removeClass("has-error")}
if(hasError)
return;var formData=new FormData();var logoFiles=this.logo.getElem()[0].files;if(logoFiles&&logoFiles.length>0){formData.append("logo",logoFiles[0])}
formData.append("businessName",businessName);formData.append("businessType",businessType);this.alert.setVisible(!1);Service_57.default.templates.applyTemplateWithDialog(formData,undefined,undefined,this.chooser,this.loader,this.standAlone).fail(function(err){_this.alert.setError(err);_this.alert.setVisible(!0)})};Wizard.prototype.appendTo=function(parent){this._elem.appendTo(parent)};return Wizard}(FlexLayout_12.FlexLayout));exports.Wizard=Wizard});define("js/TemplateChooser",["require","exports","Dialog","js/UIComponent","js/PreloaderOverlay","js/Service","js/ui/ChangeTemplateDialog","js/DropdownBox","js/CustomContainer","js/DefaultUI/LanguageSelector","js/TextField","js/UIButton","js/BuilderEvent","js/CheckBox","jquery","js/core/BuilderConfig","js/util/FlowStepUtil","js/WebsiteImporter","js/CongratsDialog","js/admin/Tags","js/FlexLayout","js/core/Collaboration","js/ui/TemplateChooserWizard","js/PremiumButton"],function(require,exports,Dialog_19,UIComponent_71,PreloaderOverlay_4,Service_58,ChangeTemplateDialog_1,DropdownBox_12,CustomContainer_15,LanguageSelector_1,TextField_11,UIButton_26,BuilderEvent_24,CheckBox_12,jquery_118,BuilderConfig_31,FlowStepUtil_4,WebsiteImporter_1,CongratsDialog_2,Tags_2,FlexLayout_13,Collaboration_8,TemplateChooserWizard_1,PremiumButton_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TemplateChooser=exports.CompletionList=exports.CompletionItem=exports.LanguageSelectorUI=exports.LogoUI=exports.redirectToBuilder=void 0;var changeListeners=[];var TemplateChooserFields=(function(){function TemplateChooserFields(){}
return TemplateChooserFields}());var CategoryDropdown=(function(_super){__extends(CategoryDropdown,_super);function CategoryDropdown(){var _this=_super.call(this)||this;_this.addClass('wb-tpl-cats-mobile');return _this}
CategoryDropdown.prototype.buildInit=function(data,fields){var _this=this;data.change=function(fields){return _this.onChange(fields)};_super.prototype.buildInit.call(this,data,fields);this.chooser=data.chooser};CategoryDropdown.prototype.onChange=function(fields){var item=this.getSelectedItem();if(!item)
return;var original=item.getOriginal();if(typeof original.customContentAppender==='function'){this.chooser.loadCustomContent(original.customContentAppender)}else{this.chooser.loadTemplates(original)}
fields.categoryList.selectItem(item.getId())};CategoryDropdown.prototype.addAllItems=function(items){for(var i=0;i<items.length;i++){if(items[i].id!=='-'){this.addItem(new DropdownBox_12.DropdownBox.Item(items[i].name+(items[i].templateCount!==!1?' ('+items[i].templateCount+')':''),items[i].id,items[i]))}}};return CategoryDropdown}(DropdownBox_12.DropdownBox));function redirectToBuilder(scenarioSpec,params){if(scenarioSpec===void 0){scenarioSpec=''}
if(params===void 0){params={}}
location.href=(BuilderConfig_31.wbConfig.getLnUrl('',params,(scenarioSpec?!1:!0),!0,!0)+(scenarioSpec?('#scenario='+scenarioSpec):''))}
exports.redirectToBuilder=redirectToBuilder;var CategoryList=(function(_super){__extends(CategoryList,_super);function CategoryList(){var _this=_super.call(this)||this;_this.tagsStat=null;_this.items=[];_this.rootSize=(0,jquery_118.default)('<div>').css({textAlign:'center',fontSize:'10px',color:'#999999',display:'block',borderTop:'1px solid #e5e5e5',padding:'5px 0'}).hide().appendTo(_this.getElem());if(BuilderConfig_31.wbConfig.isSuperAdmin){_this.tagsStat=(0,jquery_118.default)('<div>').addClass('wb-tpl-super-admin-block').css({textAlign:'center',fontSize:'12px',color:'#999999',display:'block',padding:'5px 0'}).hide().appendTo(_this.getElem())}
if(BuilderConfig_31.wbConfig.adminMode){_this.privateToggler=new CheckBox_12.default(__('Show private'),!0);_this.privateToggler.getElem().find('span').tooltip({title:__('Private templates are visible only in admin builder mode.')+' '+__('Template becomes private after saving it with %s option checked.').replace('%s','"'+__('Make private')+'"'),placement:'right',container:'body'}).prepend('<span class="glyphicon glyphicon-lock"></span>&nbsp;');_this.privateToggler.onChange(function(){_this.chooser.reloadContents(!0)});_this.privateToggler.getElem().css({borderBottom:'1px solid #e5e5e5',display:'block',padding:'6px'}).prependTo(_this.getElem())}
return _this}
CategoryList.prototype.buildInit=function(data,_fields){this.chooser=data.chooser};CategoryList.prototype.removeAllItems=function(){this.rootSize.detach();if(this.tagsStat)
this.tagsStat.detach();if(this.privateToggler)
this.privateToggler.getElem().detach();this.getElem().empty()};CategoryList.prototype.addAllItems=function(items){this.rootSize.detach();if(this.tagsStat)
this.tagsStat.detach();if(this.privateToggler)
this.privateToggler.getElem().detach();for(var i=0;i<items.length;i++){this.addItem(items[i])}
var elem=this.getElem();elem.append(this.rootSize);if(this.tagsStat)
elem.append(this.tagsStat);if(this.privateToggler)
elem.prepend(this.privateToggler.getElem());};CategoryList.prototype.addItem=function(item){var _this=this;this.items.push(item);var thisItem=item,thisElem=this,aElem;item.elem=(0,jquery_118.default)('<div>');if(item.id==='-'){item.elem.addClass('wb-tpl-cats-separator')}else{item.elem.addClass('wb-tpl-cats-item');aElem=(0,jquery_118.default)('<a>').attr({href:'javascript:void(0)'}).text(item.name).on('click',function(){thisElem.selectItem(thisItem.id);if(typeof thisItem.customContentAppender==='function'){_this.chooser.loadCustomContent(thisItem.customContentAppender)}else{_this.chooser.loadTemplates(thisItem)}
_this.chooser.fields.categoryListCombo.selectItem(_this.chooser.fields.categoryListCombo.getItemById(thisItem.id));return!1});if(item.templateCount!==!1){aElem.append((0,jquery_118.default)('<span>').text('('+item.templateCount+')'))}
if(item.isPrivate)
aElem.append((0,jquery_118.default)('<span>').addClass('glyphicon glyphicon-lock'));item.elem.append(aElem)}
item.elem.appendTo(this.getElem())};CategoryList.prototype.selectItem=function(id){for(var i=0;i<this.items.length;i++){var elem=this.items[i].elem;if(!elem)
continue;if(id===this.items[i].id){elem.addClass('active')}else{elem.removeClass('active')}}};CategoryList.prototype.setSize=function(value){this.rootSize.text(value?value:'');if(value)
this.rootSize.show();else this.rootSize.hide()};CategoryList.prototype.setTagsStat=function(value){if(!BuilderConfig_31.wbConfig.isSuperAdmin)
return;if(this.tagsStat)
this.tagsStat.text(__("Tag filled: ")+value).show();};return CategoryList}(UIComponent_71.UIComponent));function urlEncSp(url){return url.replace(/ /ig,'%20')}
var TemplateList=(function(_super){__extends(TemplateList,_super);function TemplateList(){var _this=_super.call(this)||this;_this.isEmptyBannerVisible=!1;_this.cont=(0,jquery_118.default)('<div>').addClass('wb-tpl-list-body wb-img-auto-quality').appendTo(_this.getElem());_this.emptyBanner=(0,jquery_118.default)('<div>').addClass('wb-tpl-empty-banner').append((0,jquery_118.default)('<span>').addClass('fa fa-search')).append(__('No items found'));_this.emptyContentLabel=(0,jquery_118.default)('<div>').addClass('wb-tpl-action-label').text(__('Random templates'));return _this}
TemplateList.prototype.buildInit=function(data,_fields){this.chooser=data.chooser};TemplateList.prototype.setEmptyBannerVisible=function(visible){if(this.isEmptyBannerVisible===visible)
return;this.isEmptyBannerVisible=visible;if(visible){this.cont.addClass('wb-tpl-empty-banner-wrap').append(this.emptyBanner).append(this.emptyContentLabel)}else{this.emptyBanner.detach();this.emptyContentLabel.detach();this.cont.removeClass('wb-tpl-empty-banner-wrap')}};TemplateList.prototype.removeAllItems=function(){this.cont.empty()};TemplateList.prototype.addAllItems=function(items,enableTagSearch){if(enableTagSearch===void 0){enableTagSearch=!1}
for(var i=0;i<items.length;i++){this.addItem(items[i],enableTagSearch)}};TemplateList.prototype.buildItemCategory=function(item,enableTagSearch){var _a;if(enableTagSearch===void 0){enableTagSearch=!1}
var name='';if(enableTagSearch){var categoriesFromTags=(_a=item.tags)===null||_a===void 0?void 0:_a.category;var catTag=categoriesFromTags?categoriesFromTags[0]:'';if(catTag){for(var _i=0,_b=this.chooser.categories;_i<_b.length;_i++){var category=_b[_i];if(category.nameOri==catTag){name=category.name;break}}}}else{name=__(item.categoryId)}
return name};TemplateList.prototype.addItem=function(item,enableTagSearch){var _this=this;if(enableTagSearch===void 0){enableTagSearch=!1}
var thisItem=item,img,text,selectBtn,remBtn=null,itemElem=(0,jquery_118.default)('<div>').addClass('wb-tpl-list-item');if(item.id)
itemElem.data('__TPL_ID__',item.id);if(typeof item.customContentAppender==='function'){itemElem.appendTo(this.cont);item.customContentAppender(itemElem)}else{itemElem.attr({'aria-haspopup':'true'}).on('touchend',function(){(0,jquery_118.default)(this).parent().children().removeClass('active');(0,jquery_118.default)(this).toggleClass('active');return!1});var btns=(0,jquery_118.default)('<div class="wb-tpl-btns">').append((selectBtn=(0,jquery_118.default)('<button>').addClass('btn btn-success btn-lg').attr({type:'button'}).append((0,jquery_118.default)('<span>').addClass('fa fa-pencil-square-o')).append(__('Select')))).append((0,jquery_118.default)('<a>').addClass('btn btn-default btn-outline btn-xs wb-preview-btn').attr({target:'_blank',href:item.previewUrl}).append((0,jquery_118.default)('<span>').addClass('fa fa-eye')).on('touchend',function(e){e.stopImmediatePropagation()}).append(__('Preview')));if(BuilderConfig_31.wbConfig.adminMode&&item.isPrivate){btns.append((remBtn=(0,jquery_118.default)('<button>').addClass('btn btn-danger btn-sm').attr({type:'button'}).append((0,jquery_118.default)('<span>').addClass('fa fa-trash')).append(__('Delete'))))}
itemElem.append((0,jquery_118.default)('<div>').append((0,jquery_118.default)('<div>').addClass('wb-tpl-list-overlay').append((0,jquery_118.default)('<div>')).append(btns)).append((0,jquery_118.default)('<div/>').addClass('cimg').append(img=(0,jquery_118.default)('<img src=""/>').attr({src:item.thumb}))).append((text=(0,jquery_118.default)('<span/>').text(item.name)))).appendTo(this.cont);if(item.thumb2x){img.attr({srcset:"".concat(urlEncSp(item.thumb),", ").concat(urlEncSp(item.thumb2x)," 2x")})}
img.removeAttr('width').removeAttr('height');if(item.isPrivate)
text.append((0,jquery_118.default)('<span>').addClass('glyphicon glyphicon-lock'));if(item.current){text.append((0,jquery_118.default)('<span>').text(__('(current template)')));itemElem.addClass('current')}
if(item.size)
text.append((0,jquery_118.default)('<span>').css({textAlign:'center',fontSize:'10px',color:(item.sizeSeverity?'#ef5350':'#999999'),fontWeight:(item.sizeSeverity?'bold':'normal'),display:'block'}).text(item.size));if(item.tags&&BuilderConfig_31.wbConfig.isSuperAdmin){var tags=[];for(var _i=0,_a=Object.keys(item.tags);_i<_a.length;_i++){var cat=_a[_i];tags.push(cat[0].toUpperCase()+cat.slice(1)+': '+item.tags[cat].join(', '))}
if(tags.length){itemElem.append((0,jquery_118.default)('<span>').addClass('wb-tpl-super-admin-block').css({fontSize:'10px',color:'#999999',fontWeight:'normal',display:'block',margin:'10px',padding:'5px'}).html(tags.join('<br>')))}}
if(remBtn){remBtn.on('click',function(){return _this.removeTemplate(thisItem.id)})}
if(item.available){selectBtn.on('click touchend',function(){_this.onBtnSelect(thisItem.id);return!1})}else{selectBtn.detach();var hasUpgradeAction_1=BuilderConfig_31.wbConfig.hasUpgradeAction();var premHTML='';if(item.availableInPlans){var plansLink='';if(BuilderConfig_31.wbConfig.isB2C){plansLink=item.availableInPlans.map(function(p){return hasUpgradeAction_1?('<a href="#" class="wb-upgrade-action" target="_blank">'+__(p.name)+'</a>'):__(p.name)}).join(', ')}else{var planNames=[];for(var _b=0,_c=item.availableInPlans;_b<_c.length;_b++){var plan=_c[_b];planNames=planNames.concat(plan.hostingPlanNames)}
plansLink=jquery_118.default.trim(planNames.map(function(name){return hasUpgradeAction_1?('<a href="#" class="wb-upgrade-action" target="_blank">'+name+'</a>'):name}).join(', '))}
premHTML='<div class="wb-tpl-list-upgrade"><div>';if(plansLink){premHTML+='<span>'+__('Available in %s').replace('%s',plansLink)+'</span>'}else if(hasUpgradeAction_1){premHTML+='<span>'+__('Need more builder features?')+'</span>'}else{premHTML+='<span>'+__('Ask administrator to enable this feature')+'</span>'}
if(hasUpgradeAction_1){premHTML+='<div><a class="btn btn-lg btn-success btn-raised wb-upgrade-action" href="#" target="_blank">'+__('Upgrade')+'</a></div>'}
premHTML+='</div></div>'}else{premHTML='<div class="wb-tpl-list-onlypro">'+((BuilderConfig_31.wbConfig.premiumButtonType==='expired')?'<div><span class="exp">'+__('Ask administrator to enable this feature')+'</span></div>':'<div>'+__('Available in %sPremium version%s').replace('%s',hasUpgradeAction_1?'<span class="glyphicon glyphicon-star"></span><span class="txt"><a href="#" class="wb-upgrade-action" target="_blank">':'').replace('%s',hasUpgradeAction_1?'</a></span>':''))+'</div>'}
var btns_1=itemElem.find('.wb-tpl-btns');var premElem=(0,jquery_118.default)(premHTML);for(var _d=0,_e=premElem.find('.wb-upgrade-action').toArray();_d<_e.length;_d++){var el=_e[_d];(0,PremiumButton_2.attachUpgradeAction)(el,!1,'template|'+item.id+'|'+__('Upgrade'))}
premElem.insertBefore(btns_1.children().eq(0));itemElem.find('.wb-tpl-list-overlay').show()}}};TemplateList.prototype.onBtnSelect=function(id){service.applyTemplateWithDialog(id,null,null,this.chooser,this.chooser.fields.loader,this.chooser.isStandAlone,this.chooser.isPublishOnSelect())};TemplateList.prototype.removeTemplate=function(id){var _this=this;if(confirm(__('Are you sure?'))){service.removeTemplate(id,function(){_this.cont.find('.wb-tpl-list-item').each(function(){var itemElem=(0,jquery_118.default)(this);var tplId=itemElem.data('__TPL_ID__');if(tplId===id){itemElem.detach();itemElem.remove}})})}};TemplateList.prototype.onBtnPlay=function(id){var _this=this;service.applyTemplateWithDialog(id,function(){if(_this.chooser.isStandAlone){redirectToBuilder('./1')}else{Service_58.Service.HelpSystemPlayer.loadRemote('.',!0)}},null,this.chooser,this.chooser.fields.loader,this.chooser.isStandAlone)};return TemplateList}(UIComponent_71.UIComponent));var LogoUI=(function(_super){__extends(LogoUI,_super);function LogoUI(){var _this=_super.call(this)||this;_this.addClass('wb-tpl-logo');var url=BuilderConfig_31.wbConfig.getLogoUrl(!0);if(url){_this.css({backgroundImage:"url('".concat(url,"')")})}else{_this.setVisible(!1)}
return _this}
return LogoUI}(CustomContainer_15.CustomContainer));exports.LogoUI=LogoUI;var LogoMobileUI=(function(_super){__extends(LogoMobileUI,_super);function LogoMobileUI(){var _this=_super.call(this)||this;_this.addClass('wb-tpl-logo-mobile');var url=BuilderConfig_31.wbConfig.getLogoMobileUrl();if(url){_this.css({backgroundImage:"url('".concat(url,"')")})}else{_this.setVisible(!1)}
return _this}
return LogoMobileUI}(CustomContainer_15.CustomContainer));var LanguageSelectorUI=(function(_super){__extends(LanguageSelectorUI,_super);function LanguageSelectorUI(){var _this=_super.call(this)||this;var builderApi=Service_58.Service.uiManager.getApiInstance();var languageSelector=new LanguageSelector_1.LanguageSelector(builderApi);_this._elem.append(languageSelector.elem);return _this}
return LanguageSelectorUI}(CustomContainer_15.CustomContainer));exports.LanguageSelectorUI=LanguageSelectorUI;var CloseButton=(function(_super){__extends(CloseButton,_super);function CloseButton(){var _this=_super.call(this)||this;_this.addClass('wb-close');_this.setContent('&times;');return _this}
CloseButton.prototype.buildInit=function(data,_fields){var _this=this;if(typeof data.close==='function'){this.on('click',function(e){return data.close.call(_this,e)})}};return CloseButton}(CustomContainer_15.CustomContainer));var CompletionItem=(function(){function CompletionItem(value,matchLength,prefix){if(prefix===void 0){prefix=''}
this.value=value;var compValue=prefix+'<b>'+value.substring(0,matchLength)+'</b>'+value.substring(matchLength);this.elem=(0,jquery_118.default)('<div>').html(compValue)}
return CompletionItem}());exports.CompletionItem=CompletionItem;var CompletionList=(function(){function CompletionList(input){var _this=this;this.items=[];this.isVisibleValue=!1;this.selectedIdx=-1;this.prefix='';this.previewPrefix=!0;this.mouseSelectFunc=null;this.elem=(0,jquery_118.default)('<div>').addClass('wb-tpl-search-completions').on('click',function(e){return _this.handleMouseSelect(e)});this.input=input}
CompletionList.prototype.onMouseSelect=function(mouseSelectFunc){this.mouseSelectFunc=mouseSelectFunc;return this};CompletionList.prototype.handleMouseSelect=function(e){for(var i=0;i<this.items.length;i++){if(this.items[i].elem[0]===e.target){this.selectedChange(i,!0);break}}
var value=this.getSelected();this.setVisible(!1);if(value.length>0){this.input.val(value+' ');this.input.focus();if(this.mouseSelectFunc)
this.mouseSelectFunc(value);}};CompletionList.prototype.clear=function(prefix){this.selectedIdx=-1;this.elem.empty();this.items=[];this.prefix=prefix};CompletionList.prototype.addEntry=function(value,matchLength){var item=new CompletionItem(value,matchLength,this.previewPrefix?this.prefix:'');this.items.push(item);this.elem.append(item.elem)};CompletionList.prototype.getSelected=function(orFirst){if(orFirst===void 0){orFirst=!1}
if(this.selectedIdx<0){if(orFirst&&this.items.length>0){return this.prefix+this.items[0].value}else{return''}}else{return this.prefix+this.items[this.selectedIdx].value}};CompletionList.prototype.selectedChange=function(val,setAbs){if(setAbs===void 0){setAbs=!1}
var lastIdx=this.selectedIdx;if(this.items.length==0){this.selectedIdx=-1;if(lastIdx>=0&&lastIdx<this.items.length){this.items[lastIdx].elem.removeClass('active')}
return}
if(setAbs){this.selectedIdx=val}else{this.selectedIdx+=val}
if(this.selectedIdx<0)
this.selectedIdx=0;else if(this.selectedIdx>=this.items.length)
this.selectedIdx=this.items.length-1;if(lastIdx>=0&&lastIdx<this.items.length&&lastIdx!=this.selectedIdx){this.items[lastIdx].elem.removeClass('active')}
if(this.selectedIdx>=0&&lastIdx!=this.selectedIdx){this.items[this.selectedIdx].elem.addClass('active')}};CompletionList.prototype.setVisible=function(visible){if(visible===this.isVisibleValue)
return;this.isVisibleValue=visible;this.elem[0].style.display=visible?'block':'none';if(!visible){this.selectedIdx=-1}};CompletionList.prototype.appendTo=function(parent){parent.append(this.elem);return this};CompletionList.prototype.splitValue=function(value){var valueLen=value.length;for(var i=valueLen-1;i>=0;i--){var ch=value.charAt(i);if(ch==' '||ch=='.'||ch==','||ch=='!'||ch=='+'||ch=='\\'||ch=='/'||ch=='*'||ch=='('||ch==')'||ch=='?'||ch=='['||ch==']'){return[value.substring(0,i+1),value.substring(i+1)]}}
return["",value]};CompletionList.prototype.handleAutoComplete=function(e,completions,onSubmit){if(e.type=="keydown"){if(e.keyCode==9||(e.ctrlKey&&e.key=='y')){var selected=this.getSelected(!0);if(selected.length>0)
this.input.val(selected+' ');this.setVisible(!1);e.preventDefault();return!1}else if(e.keyCode==13){var selected=this.getSelected();if(selected.length>0)
this.input.val(selected);this.setVisible(!1);onSubmit();e.preventDefault();return!1}else if(e.keyCode==27){this.setVisible(!1);e.preventDefault();return!1}else if(e.keyCode==37||e.keyCode==39){return!0}else if(e.keyCode==38||(e.ctrlKey&&e.key=='p')){this.selectedChange(-1);e.preventDefault();return!1}else if(e.keyCode==40||(e.ctrlKey&&e.key=='n')){this.selectedChange(1);e.preventDefault();return!1}}else if(e.type=="keyup"){if(e.keyCode==9||e.keyCode==13||e.keyCode==27||e.keyCode==38||e.keyCode==40||(e.ctrlKey&&e.key=='y')||(e.ctrlKey&&e.key=='p')||(e.ctrlKey&&e.key=='n')){e.preventDefault();return!1}else if(e.keyCode==37||e.keyCode==39||e.keyCode==17){return!0}
var valueArr=this.splitValue(this.input.val());var value=valueArr[1].toLowerCase();var valueLen=value.length;this.clear(valueArr[0]);var numResults=0;if(valueLen>0){for(var _i=0,completions_1=completions;_i<completions_1.length;_i++){var tag=completions_1[_i];var name_7=tag.toLowerCase().trim();if(name_7.length>=valueLen&&name_7.substring(0,valueLen)===value){numResults++;this.addEntry(tag,valueLen);if(numResults>=10)
break}}}
this.setVisible(numResults>0)}
return!0};return CompletionList}());exports.CompletionList=CompletionList;var SearchBox=(function(_super){__extends(SearchBox,_super);function SearchBox(){var _this=_super.call(this)||this;_this.chooser=null;_this.lastSentQuery='';_this.addClass('wb-tpl-search');_this._elem.append((0,jquery_118.default)('<span>').addClass('fa fa-search'));_this.input=(0,jquery_118.default)('<input>').addClass('form-control input-lg').attr({type:'text'}).appendTo(_this._elem);_this.input.on('keydown',function(e){return _this.onAutoComplete(e)}).on('keyup',function(e){return _this.onAutoComplete(e)});_this.completionList=(new CompletionList(_this.input)).onMouseSelect(function(){}).appendTo(_this._elem);return _this}
SearchBox.prototype.buildInit=function(data,_fields){var _this=this;if(typeof data.search==='function'){this.input.on('change',function(e){return data.search.call(_this,e)})}
if(data.chooser)
this.chooser=data.chooser};SearchBox.prototype.setPlaceholder=function(placeholder){this.input.attr({placeholder:placeholder})};SearchBox.prototype.onAutoComplete=function(e){var _this=this;if(!this.chooser)
return!0;return this.completionList.handleAutoComplete(e,this.chooser.tagCompletions,function(){return _this.onChange()})};SearchBox.prototype.onChange=function(){if(!this.chooser||this.lastSentQuery===this.input.val())
return;this.lastSentQuery=this.input.val();this.chooser.loadTemplates(null,this.input.val())};SearchBox.prototype.setQuery=function(query){this.lastSentQuery=query;this.input.val(query)};return SearchBox}(CustomContainer_15.CustomContainer));var TemplateChooser=(function(_super){__extends(TemplateChooser,_super);function TemplateChooser(isStandAlone){if(isStandAlone===void 0){isStandAlone=!1}
var _this=_super.call(this,__('Select template'),!0,null,!0)||this;_this.isStandAlone=isStandAlone;_this.contentLoaded=!1;_this.templates=[];_this.categories=[];_this.tagCompletions=[];_this.onResizeCallback=null;_this.fields=new TemplateChooserFields();_this.publishOnSelectCheckbox=null;_this.enableTagSearch=!1;_this.wizardPanel=null;_this.setTitleVisible(!1);_this.setFooterVisible(!1);_this.enableTagSearch=!0;_this.setContent(new Service_58.Service.UIBuilder([{type:PreloaderOverlay_4.PreloaderOverlay,id:'loader',value:100,visible:!1},{type:FlexLayout_13.FlexLayout,styleClass:'wb-tpl-main-title',children:[{type:LanguageSelectorUI},{type:CloseButton,id:'closeButton',close:function(){return _this.setVisible(!1)}}]},{type:FlexLayout_13.FlexLayout,spacing:'field-default',styleClass:'wb-tpl-main-wrap',children:[{type:FlexLayout_13.FlexLayout,direction:'column',styleClass:'wb-tpl-sidebar',children:[{type:LogoUI},{type:LogoMobileUI},{type:CategoryDropdown,id:'categoryListCombo',chooser:_this},{type:CategoryList,id:'categoryList',styleClass:'wb-tpl-cats',css:{height:300},chooser:_this}]},{type:FlexLayout_13.FlexLayout,direction:'column',styleClass:'wb-tpl-main',children:[{type:FlexLayout_13.FlexLayout,justifyContent:'center',ignore:!_this.enableTagSearch,children:[{type:SearchBox,id:'searchBox',chooser:_this,search:function(){}}]},{type:CustomContainer_15.CustomContainer,styleClass:'wb-tpl-action-label',id:'selectLabel',content:__('Select template')},{type:TemplateList,id:'list',styleClass:'wb-tpl-list',css:{height:300},chooser:_this},{type:CustomContainer_15.CustomContainer,id:'content'}]}]}],_this.fields),!0);_this.baseElem.addClass('wb-tpl-dialog');if(_this.isStandAlone){_this.baseElem.addClass('wb-tpl-dialog-standalone')}
return _this}
TemplateChooser.prototype.getDefaultCategory=function(fields,categories){var item=null,params={},parts,i,s;if((s=window.location.search.split('?'))&&s.length===2&&(s=s[1].split('&'))){for(i=0;i<s.length;i++){parts=s[i].split('=');if(parts.length===2)
params[parts[0]]=decodeURIComponent(parts[1]);}}
if(fields&&fields.categoryList&&params.tpl){var ddItem=fields.categoryListCombo.getItemById(params.tpl);if(ddItem)
item=ddItem.getOriginal();}
if(!item){item=(categories.length>0)?categories[0]:null;if(BuilderConfig_31.wbConfig.defaultToTemplateChooserCategory){for(var _i=0,categories_2=categories;_i<categories_2.length;_i++){var c=categories_2[_i];if(c.id==BuilderConfig_31.wbConfig.defaultToTemplateChooserCategory||(c.id=='__wizard__'&&BuilderConfig_31.wbConfig.defaultToTemplateChooserCategory=='__wizard_fs__')){item=c;break}}}}
return item};TemplateChooser.prototype.getCurrentCategoryId=function(){var _a;for(var i=0;i<this.fields.categoryList.items.length;i++){var elem=(_a=this.fields.categoryList.items[i])===null||_a===void 0?void 0:_a.elem;if(!elem)
continue;if(elem.hasClass('active'))
return this.fields.categoryList.items[i].id}
return null};TemplateChooser.prototype.reloadContents=function(keepSelectedCategory){var _this=this;if(keepSelectedCategory===void 0){keepSelectedCategory=!1}
var prevItemId=null;if(keepSelectedCategory)
prevItemId=this.getCurrentCategoryId();this.fields.loader.setVisible(!0);var params={};if(this.fields.categoryList.privateToggler){params.noPrivate=this.fields.categoryList.privateToggler.getValue()?'0':'1'}
if(this.enableTagSearch){params.tagSearch='1'}
if(!BuilderConfig_31.wbConfig.commerceAvailable)
params.exclude='E-commerce';jquery_118.default.getJSON(service.getApiUrl('template/categories',params)).done(function(data){_this.fields.loader.setVisible(!1);if(typeof data==='object'){var importItemAdded=!1;var wizardAdded=!1;var separatorItem={id:'-',name:'',nameOri:'',isPrivate:!1,templateCount:0,virtual:!0,};for(var i=0,c=data.categories.length;i<c;i++){if(!data.categories[i].virtual){data.categories.splice(i,0,separatorItem);if(BuilderConfig_31.wbConfig.enableTemplateChooserWizard){wizardAdded=!0;data.categories.splice(i,0,_this.createWizardCategoryData())}
if(!BuilderConfig_31.wbConfig.hideImport){importItemAdded=!0;data.categories.splice(i,0,_this.createImportCategoryData())}
break}}
if(!BuilderConfig_31.wbConfig.hideImport&&!importItemAdded)
data.categories.push(_this.createImportCategoryData());if(BuilderConfig_31.wbConfig.enableTemplateChooserWizard&&!wizardAdded)
data.categories.push(_this.createWizardCategoryData());_this.categories=data.categories;_this.tagCompletions=data.tagCompletions;if(_this.fields.searchBox&&data.searchPlaceholder){_this.fields.searchBox.setPlaceholder(data.searchPlaceholder)}
_this.fields.categoryList.removeAllItems();_this.fields.categoryListCombo.removeAllItems();_this.fields.categoryList.addAllItems(_this.categories);_this.fields.categoryListCombo.addAllItems(_this.categories);_this.fields.categoryList.setSize('');if(_this.categories.length>0){var selectItem=null;for(var _i=0,_a=_this.categories;_i<_a.length;_i++){var cat=_a[_i];if(cat.id===prevItemId)
selectItem=cat}
if(!selectItem)
selectItem=_this.getDefaultCategory(_this.fields,_this.categories);_this.fields.categoryList.selectItem((selectItem===null||selectItem===void 0?void 0:selectItem.id)||null);_this.fields.categoryListCombo.selectItem(selectItem?_this.fields.categoryListCombo.getItemById(selectItem.id):null);if(data.rootSize)
_this.fields.categoryList.setSize(data.rootSize);_this.fields.categoryList.setTagsStat(data.tagsStat);if(selectItem&&typeof selectItem.customContentAppender==='function'){_this.loadCustomContent(selectItem.customContentAppender)}else{_this.loadTemplates(selectItem)}}}else{console.error('Template category loading format error')}}).fail(function(){_this.fields.loader.setVisible(!1);console.error('Template category loading error')})};TemplateChooser.prototype.createWizardCategoryData=function(){var _this=this;return{id:'__wizard__',name:__('Wizard'),nameOri:__('Wizard'),templateCount:!1,isPrivate:!1,virtual:!0,customContentAppender:function(elem){if(!_this.wizardPanel){_this.wizardPanel=new TemplateChooserWizard_1.Wizard(_this.isStandAlone,_this)}
elem.addClass('wb-template-custom-container').css({display:''}).append(_this.wizardPanel.getElem());_this.wizardPanel.setTagCompletions(_this.tagCompletions);_this.wizardPanel.setVisible(!0)}}};TemplateChooser.prototype.createImportCategoryData=function(){var _this=this;return{id:'__import__',name:__('Website import'),nameOri:'Website import',templateCount:!1,isPrivate:!1,virtual:!0,customContentAppender:function(elem){elem.addClass('wb-template-custom-container').css({display:''});_this.appendImportForm(elem,!0)}}};TemplateChooser.prototype.createImportTemplateData=function(){var _this=this;return{id:'__import__',name:'',categoryId:'',thumb:'',thumb2x:'',previewUrl:'',isPrivate:!1,current:!1,available:!0,customContentAppender:function(elem){_this.appendImportForm(elem,!1)}}};TemplateChooser.prototype.appendImportForm=function(elem,big){var _this=this;if(big===void 0){big=!1}
var input=new TextField_11.TextField('','www.');var button=new UIButton_26.UIButton(__('Import'),UIButton_26.UIButton.STYLE_SUCCESS);button.addClass('btn-lg');if(BuilderConfig_31.wbConfig.enableImport){button.on('click',function(){var url=input.getValue();if(!url)
return;if(!/^https?:\/\//.test(url))
url='http://'+url;_this.setVisible(!1);setTimeout(function(){WebsiteImporter_1.WebsiteImporter.setImportCompleteCallback(function(successVal){var success=successVal;WebsiteImporter_1.WebsiteImporter.setImportCompleteCallback(null);setTimeout(function(){if(success){if(_this.isStandAlone){(0,FlowStepUtil_4.forwardFlowStep)(BuilderConfig_31.wbConfig,BuilderConfig_31.wbConfig.inactiveMode?23:FlowStepUtil_4.FlowStep.ImportWebsite,!0);redirectToBuilder()}else{wb_builder.loadPage(null,!0,function(){(0,FlowStepUtil_4.forwardFlowStep)(BuilderConfig_31.wbConfig,BuilderConfig_31.wbConfig.inactiveMode?23:FlowStepUtil_4.FlowStep.ImportWebsite,!0)})}}else{_this.setVisible(!0)}},500)});WebsiteImporter_1.WebsiteImporter.importWebsite({url:url},1,!0,function(){_this.setVisible(!0)})},500)})}else{button.getElem().attr('disabled','disabled')}
input.getElem().on('keydown',function(e){var key=e.which||e.keyCode;if(key===13){button.trigger('click')}});var cont=(0,jquery_118.default)('<div>').addClass('wb-tpl-list-import');var innerCont=(0,jquery_118.default)('<div>').append((0,jquery_118.default)('<p>').text(__('Import Any Website'))).append(input.getElem()).append((0,jquery_118.default)('<span>').addClass('wb-tpl-list-import-info').text(__('Already have one?')+' '+__('%sImport%s your existing website to Site.pro in 1 click').replace('%s','').replace('%s',''))).append(button.getElem());if(big&&!BuilderConfig_31.wbConfig.enableImport){innerCont.append((0,jquery_118.default)('<div>').text(__('Ask administrator to enable this feature')))}
cont.append(innerCont);elem.append(cont);if(big){input.getElem().addClass('input-lg');cont.addClass('big');(0,jquery_118.default)(window).on('resize',function(){(0,jquery_118.default)('.wb-tpl-list-import.big').css('height',elem.parents('.modal-body').outerHeight()+'px')})}else{cont.on('mouseenter',function(){input.getElem().trigger('focus')});cont.on('mouseleave',function(){input.getElem().trigger('blur')});elem.append((0,jquery_118.default)('<div>').append(cont).append((0,jquery_118.default)('<span>').text(__('Website import'))));(0,jquery_118.default)(window).on('resize',function(){if(!cont.is(":visible"))
return;cont.css('height',Math.ceil(Math.min(cont.width(),462)/462*332)+'px');if(cont.width()*cont.height()<65100){cont.addClass('smaller');cont.find('.btn').removeClass('btn-lg')}else{cont.removeClass('smaller');cont.find('.btn').addClass('btn-lg')}})}};TemplateChooser.prototype.loadTemplates=function(category,query){var _this=this;if(query===void 0){query=''}
var categoryId=null;if(category){categoryId=category.id;if(this.fields.searchBox)
this.fields.searchBox.setQuery('');}else{this.fields.categoryList.selectItem(null);this.fields.categoryListCombo.selectItem(null)}
if(this.fields.searchBox)
this.fields.searchBox.setVisible(!0);this.fields.selectLabel.setVisible(!0);this.fields.loader.setVisible(!0);var params={qty:''+(BuilderConfig_31.wbConfig.enableImport?5:6),};if(this.fields.categoryList.privateToggler){params.noPrivate=this.fields.categoryList.privateToggler.getValue()?'0':'1'}
if(!BuilderConfig_31.wbConfig.commerceAvailable){params.exclude='E-commerce'}
if(this.enableTagSearch){params.query=categoryId||query}
jquery_118.default.getJSON(service.getApiUrl('template/list/'+(categoryId||''),params)).done(function(data){_this.fields.loader.setVisible(!1);if(typeof data==='object'){_this.templates=data.list;var isEmpty=_this.templates.length==0;if(isEmpty){_this.templates=data.other}
if(BuilderConfig_31.wbConfig.enableImport&&!BuilderConfig_31.wbConfig.hideImport&&(categoryId==='rnd'||categoryId==='all'||isEmpty)){_this.templates.push(_this.createImportTemplateData())}
_this.fields.content.getElem().hide();_this.fields.list.getElem().show();_this.fields.list.setEmptyBannerVisible(!1);_this.fields.list.removeAllItems();if(isEmpty){_this.fields.list.setEmptyBannerVisible(!0);_this.fields.selectLabel.setVisible(!1)}else{_this.fields.selectLabel.setVisible(!0)}
_this.fields.list.addAllItems(_this.templates,_this.enableTagSearch);_this.triggerResizeEvent();_this.logTemplateSearch(query,isEmpty?0:_this.templates.length)}else{console.error('Template loading format error');_this.logTemplateSearch(query,-2)}
_this.fields.list.getElem().scrollTop(0)}).fail(function(){_this.fields.loader.setVisible(!1);console.error('Template loading error');_this.logTemplateSearch(query,-1)})};TemplateChooser.prototype.logTemplateSearch=function(query,numResults){if(BuilderConfig_31.wbConfig.isEnterprise||query.length==0)
return;(0,FlowStepUtil_4.forwardFlowStep)(BuilderConfig_31.wbConfig,FlowStepUtil_4.FlowStep.TemplateSearch,!0,{templateSearchQuery:query,templateSearchResults:numResults,})};TemplateChooser.prototype.loadCustomContent=function(contentAppender){if(this.fields.searchBox)
this.fields.searchBox.setVisible(!1);this.fields.selectLabel.setVisible(!1);if(this.wizardPanel)
this.wizardPanel.getElem().detach();this.fields.content.getElem().empty();this.fields.content.getElem().show();this.fields.list.getElem().hide();contentAppender(this.fields.content.getElem())};TemplateChooser.prototype.setVisible=function(visible,noAction,ignoreEvent){var _this=this;var ea=new BuilderEvent_24.VisibilityChangedBuilderEvent(visible);BuilderEvent_24.GlobalEvents.triggerEvent(visible?"templates.show":"templates.hide",ea);if(!ea.defaultPrevented){_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent);if(visible){this.fields.loader.setVisible(!1);if(this.isStandAlone||parseInt(''+wb_builder.pageId,10)<=0){this.fields.closeButton.setVisible(!1)}else{this.fields.closeButton.setVisible(!0)}
if(!this.contentLoaded){this.contentLoaded=!0;this.reloadContents();if(!BuilderConfig_31.wbConfig.isB2C&&!BuilderConfig_31.wbConfig.testMode&&!BuilderConfig_31.wbConfig.adminMode&&!BuilderConfig_31.wbConfig.isComposer){service.checkHostingHasWebsite()}}
if(!this.onResizeCallback){this.onResizeCallback=function(){_this.setMaximised(!0);_this.content.css({padding:0,overflowX:'hidden',overflowY:'auto'});window.requestAnimationFrame(function(){var bounds=_this.content[0].getBoundingClientRect();var clBounds=_this.fields.categoryList.getElem()[0].getBoundingClientRect();var lBounds=_this.fields.list.getElem()[0].getBoundingClientRect();_this.fields.categoryList.css({height:bounds.height-clBounds.top-15});_this.fields.list.css({height:bounds.height-lBounds.top})})}}
this.setMaximised(!0);(0,jquery_118.default)(window).on('resize',this.onResizeCallback);this.triggerResizeEvent()}else{if(this.onResizeCallback)(0,jquery_118.default)(window).off('resize',this.onResizeCallback);}}};TemplateChooser.prototype.triggerResizeEvent=function(){(0,jquery_118.default)(window).trigger('resize');setTimeout(function(){return(0,jquery_118.default)(window).trigger('resize')},100);setTimeout(function(){return(0,jquery_118.default)(window).trigger('resize')},250);setTimeout(function(){return(0,jquery_118.default)(window).trigger('resize')},500)};TemplateChooser.prototype.isPublishOnSelect=function(){return!!this.publishOnSelectCheckbox&&this.publishOnSelectCheckbox.getValue()};return TemplateChooser}(Dialog_19.default));exports.TemplateChooser=TemplateChooser;var TemplateChooserService=(function(){function TemplateChooserService(){}
TemplateChooserService.prototype.getTemplates=function(categoryId){if(categoryId===void 0){categoryId=null}
if(!categoryId)
categoryId='all';return jquery_118.default.getJSON(this.getApiUrl('template/list/'+categoryId))};TemplateChooserService.prototype.checkHostingHasWebsite=function(){var deferred=jquery_118.default.Deferred();jquery_118.default.getJSON(this.getApiUrl('check-hosting-has-website'),function(data){var _a;if(data.success){deferred.resolve(data.has)}else{deferred.reject((_a=data.error)!==null&&_a!==void 0?_a:'unknown error')}});return deferred.promise()};TemplateChooserService.prototype.getApiUrl=function(action,params){return BuilderConfig_31.wbConfig.getLnUrl(action,params,!0)};TemplateChooserService.prototype.applyTemplate=function(templateId,callback,caller,loader,isStandAlone,publishOnSelect){var _this=this;if(callback===void 0){callback=null}
if(caller===void 0){caller=null}
if(loader===void 0){loader=null}
if(isStandAlone===void 0){isStandAlone=!1}
if(publishOnSelect===void 0){publishOnSelect=!1}
var thisCallback=callback;var thisPublishOnSelect=publishOnSelect;if(loader)
loader.setVisible(!0);var deferred=jquery_118.default.Deferred();var clb=function(){(0,Collaboration_8.updateModuleProperties)('SiteModule',{changeTemplate:!0});var req;var isWizard=!1;if(templateId instanceof FormData){isWizard=!0;req=jquery_118.default.ajax({url:_this.getApiUrl('template/select'),type:'POST',data:templateId,contentType:!1,processData:!1,})}else{isWizard=!1;req=jquery_118.default.getJSON(_this.getApiUrl('template/select/'+templateId))}
req.done(function(data){var dataOk=(typeof data==='object'&&data.ok);if(loader&&(!dataOk||!isStandAlone))
loader.setVisible(!1);if(typeof data==='object'){if(data.template){(0,Tags_2.setCurrentTags)(data.template.tags?data.template.tags:{})}
if(dataOk&&isStandAlone){if(data.websiteInfo)
BuilderConfig_31.wbConfig.websiteInfo=data.websiteInfo;(0,FlowStepUtil_4.forwardFlowStep)(BuilderConfig_31.wbConfig,BuilderConfig_31.wbConfig.inactiveMode?22:FlowStepUtil_4.FlowStep.SelectTemplate,!0,(isWizard&&BuilderConfig_31.wbConfig.websiteInfo)?BuilderConfig_31.wbConfig.websiteInfo:undefined).always(function(){if(thisCallback&&(typeof thisCallback==='function')){thisCallback.call(caller)}else{var params={};if(thisPublishOnSelect)
params.publishOnLoad='1';redirectToBuilder('',params)}
deferred.resolve()})}else if(dataOk){if(data.websiteInfo)
BuilderConfig_31.wbConfig.websiteInfo=data.websiteInfo;wb_builder.pageId=data.pageId;wb_builder.template=data.template;wb_builder.meta=data.meta;Service_58.Service.Store.Module.resetInitialLoad();Service_58.Service.Store.Module.load(function(){Service_58.Service.Store.Module.resetInitialLoad()},!0);Service_58.Service.Store.Module.needToTranslateItems=(data.template.categoryId==='E-commerce');Service_58.Service.Blog.Module.resetData();if(caller)
caller.setVisible(!1);setTimeout(function(){wb_builder.loadPage(data.pageId,!0,function(){(0,FlowStepUtil_4.forwardFlowStep)(BuilderConfig_31.wbConfig,BuilderConfig_31.wbConfig.inactiveMode?22:FlowStepUtil_4.FlowStep.SelectTemplate,!0,(isWizard&&BuilderConfig_31.wbConfig.websiteInfo)?BuilderConfig_31.wbConfig.websiteInfo:undefined);if(thisCallback&&(typeof thisCallback==='function'))
thisCallback.call(caller);deferred.resolve();if(thisPublishOnSelect){setTimeout(function(){wb_builder.publish(function(){var congratsDialog=new CongratsDialog_2.CongratsDialog();setTimeout(function(){return congratsDialog.setVisible(!0)},400)})},1000)}})},500);for(var i=0;i<changeListeners.length;i++){changeListeners[i].call(caller)}}else{var msg='Template apply failed';console.error(msg);deferred.reject(data.errorText||msg)}}else{var msg='Template apply format error';console.error(msg);deferred.reject(msg)}(0,Collaboration_8.updateModuleProperties)('SiteModule',{changeTemplateComplete:!0})}).fail(function(err){if(loader)
loader.setVisible(!1);var msg='Template apply error';console.error(msg);deferred.reject(err||msg);(0,Collaboration_8.updateModuleProperties)('SiteModule',{changeTemplateComplete:!0})})};if(wb_builder.bodyInstance&&wb_builder.autoBackupsEnable&&typeof wb_builder.save==='function'){wb_builder.save(!1,clb,null,undefined,undefined,undefined,undefined,undefined,undefined,!0)}else{clb()}
return deferred.promise()};TemplateChooserService.prototype.applyTemplateWithDialog=function(templateId,callback,closeFunc,caller,loader,isStandAlone,publishOnSelect){var _this=this;if(callback===void 0){callback=null}
if(closeFunc===void 0){closeFunc=null}
if(caller===void 0){caller=null}
if(loader===void 0){loader=null}
if(isStandAlone===void 0){isStandAlone=!1}
if(publishOnSelect===void 0){publishOnSelect=!1}
var thisCallback=callback;if(!isStandAlone&&typeof wb_builder.pageId==='string'&&wb_builder.pageId.length>3){var deferred_1=jquery_118.default.Deferred();(0,ChangeTemplateDialog_1.show)().fail(function(){if(typeof closeFunc==='function')
closeFunc.call(_this);deferred_1.reject("show dialog failed")}).then(function(){_this.applyTemplate(templateId,thisCallback,caller,loader,isStandAlone,publishOnSelect).then(function(){return deferred_1.resolve()}).fail(function(err){return deferred_1.reject(err)})});return deferred_1.promise()}else{return this.applyTemplate(templateId,thisCallback,caller,loader,isStandAlone,publishOnSelect)}};TemplateChooserService.prototype.removeTemplate=function(templateId,onDone){jquery_118.default.getJSON(this.getApiUrl('template/tplremove/?id='+encodeURIComponent(templateId))).done(function(data){if(data.ok){if(typeof onDone==='function')
onDone();}else if(data.error){alert(data.error)}})};TemplateChooserService.prototype.addChangeListener=function(func){if(typeof func==='function')
changeListeners.push(func);};TemplateChooserService.prototype.removeChangeListener=function(func){var idx=(typeof func==='function')?changeListeners.indexOf(func):-1;if(idx>=0)
changeListeners.splice(idx,1);};return TemplateChooserService}());var service=new TemplateChooserService();Service_58.Service.templates=service});define("js/ui/ViewportSizeControls",["require","exports","js/Service","js/BuilderEvent","js/CommonTypes","jquery"],function(require,exports,Service_59,BuilderEvent_25,CommonTypes_27,jquery_119){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ViewportSizeControls=void 0;var ViewportSizeControls=(function(){function ViewportSizeControls(builderCanvas){var _this=this;this.builderCanvas=builderCanvas;this.siteElem=null;this.sizeInfo={};this.win=(0,jquery_119.default)(window);this.bodyLeft=0;this.bodyRight=0;this.updateTimeout=0;this.elem=(0,jquery_119.default)('<div>').addClass('wb-viewport-size-ctrl');this.elemRaw=this.elem[0];var maxMode=Service_59.Service.modeManager.getMaxMode();var modes=Service_59.Service.modeManager.getModes();var mode=Service_59.Service.modeManager.getMode();var styleMap={tv:{icon:'desktop',cls:'wide'},desktop:{icon:'laptop',cls:'desktop'},tablet:{icon:'tablet',cls:'tablet'},phone:{icon:'mobile',cls:'mobile'},};var _loop_30=function(mode_1){var cls='wb-viewport-'+((mode_1 in styleMap)?styleMap[mode_1].cls:mode_1);var icon='fa fa-'+((mode_1 in styleMap)?styleMap[mode_1].icon:mode_1);var iconElem=(0,jquery_119.default)('<span>').addClass('wb-viewport-icon '+icon);var warningIconElem=(0,jquery_119.default)('<span>').addClass('wb-viewport-warning-icon fa fa-exclamation-triangle');warningIconElem.attr("title",__("This mode is disabled for floating blocks in settings")).tooltip({placement:"top",container:"body"});var info={mode:mode_1,fitsInViewport:!0,iconHidden:!1,iconElem:iconElem,warningIconElem:warningIconElem,enabled:!1,absoluteEnabled:!0,elem:(0,jquery_119.default)('<div>').addClass(cls).append(warningIconElem,iconElem).attr("title",Service_59.Service.modeManager.getModeWidth(mode_1)+"px").appendTo(this_20.elem),width:((mode_1==Service_59.Service.modeManager.MODE_TV)?0:Service_59.Service.modeManager.getModeWidth(mode_1)),};info.elem.on('click',function(e){return _this.onChangeSize(e,info)});this_20.sizeInfo[mode_1]=info;if(!this_20.lastSize)
this_20.lastSize=info};var this_20=this;for(var _i=0,modes_1=modes;_i<modes_1.length;_i++){var mode_1=modes_1[_i];_loop_30(mode_1)}
this.modes=modes.sort(function(a,b){return Service_59.Service.modeManager.compareModes(a,b)});this.leftBorder=(0,jquery_119.default)('<div>').addClass('wb-viewport-border').hide();this.rightBorder=(0,jquery_119.default)('<div>').addClass('wb-viewport-border').hide();builderCanvas.append(this.leftBorder);builderCanvas.append(this.rightBorder);builderCanvas.append(this.elem);this.updateModeAvailability(!0);BuilderEvent_25.GlobalEvents.on('modes.changed',function(e){if(e.mode in _this.sizeInfo&&e.manual&&!e.isTriggered){_this.onChangeSize(null,_this.sizeInfo[e.mode])}});BuilderEvent_25.GlobalEvents.on('modes.settings.changed',function(e){_this.updateModeAvailability()});BuilderEvent_25.GlobalEvents.on('selection.changed',function(e){_this.updateModeAvailability()});BuilderEvent_25.GlobalEvents.on('site.structure.changed',function(e){_this.updateModeAvailability()});if(mode in this.sizeInfo)
this.onChangeSize(null,this.sizeInfo[mode]);this.win.on('resize',function(){return _this.onResize()});for(var _a=0,_b=[500,3000,4000,5000];_a<_b.length;_a++){var t=_b[_a];setTimeout(function(){return _this.onResize()},t)}}
ViewportSizeControls.prototype.updateModeAvailability=function(initial){var _this=this;if(initial===void 0){initial=!1}
if(this.updateTimeout)
clearTimeout(this.updateTimeout);var updateFunc=function(){_this.updateTimeout=0;var modesEnabled=Service_59.Service.modeManager.getModesEnabled();var showWarningIcons=!1;var selection=Service_59.Service.element.getSelected();for(var id in selection){if(!selection.hasOwnProperty(id))
continue;var element=selection[id];if(element.getChildrenLayout()===CommonTypes_27.ChildrenLayoutType.Absolute||(element.parent&&element.parent.getChildrenLayout()===CommonTypes_27.ChildrenLayoutType.Absolute)){showWarningIcons=!0;break}}
for(var mode in _this.sizeInfo){var info=_this.sizeInfo[mode];info.enabled=Service_59.Service.modeManager.isModeInRange(mode);info.absoluteEnabled=!modesEnabled.hasOwnProperty(mode)||modesEnabled[mode];if(info.enabled){info.elem.removeClass('disabled')}else{info.elem.addClass('disabled')}
if(showWarningIcons&&info.enabled&&!info.absoluteEnabled){info.warningIconElem.removeClass('hidden')}else{info.warningIconElem.addClass('hidden')}}};if(initial)
updateFunc();else this.updateTimeout=setTimeout(updateFunc,0)};ViewportSizeControls.prototype.setSiteElem=function(siteElem){var _this=this;this.siteElem=siteElem;this.onChangeSize(null,this.lastSize);requestAnimationFrame(function(){if(_this.siteElem)
_this.siteElem.addClass('wb-viewport-block');})};ViewportSizeControls.prototype.onResize=function(){var width=this.win.width();var rect=this.builderCanvas.getBounds();var bodyWidth=rect.width;if(width==0||bodyWidth==0)
return;var bodyLeft=rect.left;var bodyRight=width-this.bodyLeft-bodyWidth;if(this.bodyLeft!=bodyLeft||this.bodyRight!=bodyRight){this.bodyLeft=bodyLeft;this.bodyRight=bodyRight;this.elemRaw.style.left=this.bodyLeft+'px';this.elemRaw.style.right=this.bodyRight+'px'}
var prevInfo=null;for(var _i=0,_a=this.modes;_i<_a.length;_i++){var mode=_a[_i];var info=this.sizeInfo[mode];var fits=info.width<bodyWidth;if(fits!=info.fitsInViewport){info.fitsInViewport=fits;if(fits){info.elem.removeClass('wb-viewport-nofit');if(info.width>0&&prevInfo===this.lastSize){this.leftBorder.show();this.rightBorder.show()}}else{info.elem.addClass('wb-viewport-nofit');if(info.width>0&&prevInfo===this.lastSize){this.leftBorder.hide();this.rightBorder.hide()}}}
var hide=(prevInfo&&prevInfo.width>=bodyWidth)?!0:!1;if(hide!=info.iconHidden){info.iconHidden=hide;if(hide){info.iconElem.hide()}else{info.iconElem.show()}}
prevInfo=info}};ViewportSizeControls.prototype.onChangeSize=function(e,info){var _this=this;if(!info.enabled)
return!1;if(this.lastSize&&this.lastSize!==info){this.lastSize.elem.removeClass('active')}
this.lastSize=info;this.lastSize.elem.addClass('active');var css=(info.width>0)?{width:info.width,}:{width:'',};if(this.siteElem){this.siteElem.css(css);var styleClasses=this.siteElem[0].className.split(/\ +/);for(var _i=0,styleClasses_2=styleClasses;_i<styleClasses_2.length;_i++){var cls=styleClasses_2[_i];if(cls.match(/^wb-viewport-mode-.+$/)){this.siteElem.removeClass(cls.trim())}}
this.siteElem.addClass('wb-viewport-mode-'+info.mode)}
var halfWidth=Math.round(info.width/2);if(info.width){this.leftBorder.css({marginLeft:-halfWidth});this.rightBorder.css({marginLeft:halfWidth-1});if(info.fitsInViewport){this.leftBorder.show();this.rightBorder.show()}else{this.leftBorder.hide();this.rightBorder.hide()}
setTimeout(function(){if(info.fitsInViewport){_this.leftBorder.show();_this.rightBorder.show()}else{_this.leftBorder.hide();_this.rightBorder.hide()}},100)}else{this.leftBorder.hide();this.rightBorder.hide()}
Service_59.Service.modeManager.onWindowResize(!0,info.width?info.width:(0,jquery_119.default)(window).width(),!0);if(e)
e.stopPropagation();return!1};ViewportSizeControls.prototype.getControlClientRect=function(){return this.elem[0].getBoundingClientRect()};ViewportSizeControls.prototype.getElem=function(){return this.elem};ViewportSizeControls.prototype.getViewportClientRect=function(){return this.siteElem?this.siteElem[0].getBoundingClientRect():null};return ViewportSizeControls}());exports.ViewportSizeControls=ViewportSizeControls});define("js/ui/PropertiesPanel",["require","exports","js/BuilderEvent","js/Service","js/element/PropertyType","js/ui/Popover","jquery","js/core/BuilderConfig","js/Element"],function(require,exports,BuilderEvent_26,Service_60,PropertyType_10,Popover_15,jquery_120,BuilderConfig_32,Element_14){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.PropertiesPanel=void 0;var PropertiesPanel=(function(){function PropertiesPanel(){this.renderedComponents=null;this.components=[];this.hasObjectsSelected=!1;this.isSubPanel=!1;this.openCategories=PropertyType_10.PropertyType.defaultOpenCategories;this.firstOpenPanel=!1}
PropertiesPanel.prototype.init=function(panel){var _this=this;var elem=this.getElem();panel.add("properties",elem);var body=(0,jquery_120.default)(document.body);elem.on("focusin",function(){body.addClass("wb-properties-focus")}).on("focusout",function(){body.removeClass("wb-properties-focus")}).on("mouseover",function(){body.addClass("wb-properties-over")}).on("mouseout",function(){body.removeClass("wb-properties-over")});BuilderEvent_26.GlobalEvents.on("selection.changed",function(e){if(e.isSecondarySelection)
return;body.removeClass("wb-properties-focus");var selected=Service_60.Service.element.getSelected();var elements=[];var onlyDummy=!0;for(var id in selected){if(!selected.hasOwnProperty(id)||typeof selected[id].getProperties!=="function")
continue;elements.push(selected[id]);if(selected[id].id!='new'){onlyDummy=!1}}
_this.bind(elements);var mobileLimit=485;if(!_this.firstOpenPanel&&elements.length>0&&!panel.isVisible()&&(0,jquery_120.default)(window).width()>mobileLimit&&!onlyDummy){panel.setVisible(!0);_this.firstOpenPanel=!0}
if((0,jquery_120.default)(window).width()<=mobileLimit){panel.blinkToggle(e.op==="select")}});BuilderEvent_26.GlobalEvents.on("languages.update",function(e){for(var _i=0,_a=_this.components;_i<_a.length;_i++){var component=_a[_i];component.invalidate()}})};PropertiesPanel.prototype.getElem=function(){if(!this.elem)
this.render();return this.elem};PropertiesPanel.prototype.render=function(){if(!this.elem){this.elem=(0,jquery_120.default)('<div class="wb-properties-panel" />');this.elem.on("click contextmenu",function(e){(0,Popover_15.closeAll)();wb_builder.api.hideContextMenus();e.stopImmediatePropagation()}).on("mousewheel",function(e){e.stopImmediatePropagation()})}
if(this.isSubPanel)
this.elem.addClass("sub-panel");if(this.renderedComponents!==this.components){if(this.renderedComponents){for(var _i=0,_a=this.renderedComponents;_i<_a.length;_i++){var renderedComponent=_a[_i];if(!this.components||this.components.indexOf(renderedComponent)<0)
renderedComponent.destroy();}}
this.renderedComponents=this.components;this.elem.empty();if(this.components.length){this.elem.append(this.renderTree(this.components))}else if(this.hasObjectsSelected){this.elem.append((0,jquery_120.default)('<div class="wb-panel-message">').text(__("Please select only one element to edit its properties.")))}else{this.elem.append((0,jquery_120.default)('<div class="wb-panel-message">').text(__("No elements selected.")))}}
for(var _b=0,_c=this.components;_b<_c.length;_b++){var component=_c[_b];component.invalidate()}};PropertiesPanel.prototype.renderTree=function(components,groupLabel,level,path){var _this=this;if(groupLabel===void 0){groupLabel=""}
if(level===void 0){level=0}
if(path===void 0){path=""}
var currentGroupPath=null;var currentGroup=[];var groupContainer=(0,jquery_120.default)('<div class="wb-property-group wb-level-'+level+'" />').attr("data-path",path);if(!this.isSubPanel&&(level===1||(level>1&&path.split("/")[level-1][0]==='+'))&&this.openCategories.indexOf(path)<0){groupContainer.addClass("collapsed")}
if(level>0&&(!this.isSubPanel||level>1)){var groupLabelElem=(0,jquery_120.default)("<div class=\"wb-property-group-label\" />").text(groupLabel);if(level===1||(level>1&&path.split("/")[level-1][0]==='+')){groupContainer.addClass('collapsible');var groupCollapseElement=(0,jquery_120.default)('<div class="wb-property-group-collapse">'+'<i class="wb-properties-icon-closed fa fa-caret-right"></i>'+'<i class="wb-properties-icon-open fa fa-caret-down"></i>'+'</div>');groupLabelElem.prepend(groupCollapseElement);groupLabelElem.on("click",function(){var path=groupContainer.data("path");if(groupContainer.is(".collapsed")){groupContainer.removeClass("collapsed");_this.openCategories.push(path);var viewport=_this.elem.parents('.wb-sidebar-item-content');var viewportH=viewport.height();var viewportScroll=viewport.scrollTop();var elementPosition=0;var offsetElem=groupContainer;do{elementPosition+=offsetElem.position().top;offsetElem=offsetElem.offsetParent()}while(offsetElem.get(0).tagName!=='HTML'&&!offsetElem.hasClass('wb-properties-panel'));if(elementPosition<viewportScroll){viewport.scrollTop(elementPosition-20)}else if(elementPosition+groupContainer.height()>viewportScroll+viewportH){viewport.scrollTop(elementPosition+(groupContainer.height()<viewportH?(groupContainer.height()-viewportH):0))}}else{groupContainer.addClass("collapsed");var idx=_this.openCategories.indexOf(path);if(idx>=0)
_this.openCategories.splice(idx,1);}})}
groupContainer.append(groupLabelElem)}
var groupChildren=(0,jquery_120.default)('<div class="wb-property-group-children" />');groupContainer.append(groupChildren);groupContainer.on("componentvisibilitychanged",function(){var visible=!1;groupChildren.children().each(function(){var $this=(0,jquery_120.default)(this);if($this.hasClass("hidden")||$this.css("display")==="none"){return!0}
visible=!0;return!1});if(visible)
groupContainer.removeClass("hidden");else groupContainer.addClass("hidden")});if(!this.isSubPanel&&level===0&&components.length>0){var oc=this.openCategories;var doc=PropertyType_10.PropertyType.defaultOpenCategories;var hasOpen=!1,defaultCat='',firstCat='';for(var _i=0,components_1=components;_i<components_1.length;_i++){var com=components_1[_i];if(!com.propertyType)
continue;var cPath=com.propertyType.path.slice(0,level+1).join('/');if(doc.indexOf(cPath)>=0&&!defaultCat)
defaultCat=cPath;if(!firstCat)
firstCat=cPath;if(oc.indexOf(cPath)>=0){hasOpen=!0;break}}
if(!hasOpen)
oc.push(defaultCat||firstCat);}
for(var _a=0,components_2=components;_a<components_2.length;_a++){var component=components_2[_a];if(!component.propertyType)
continue;if(component.propertyType.path.length===level+1){groupChildren.append(component.getElem().attr("data-property-type",component.propertyType.id))}else{var curPath=component.propertyType.path.slice(0,level+1).join("/");if(curPath!==currentGroupPath){if(currentGroupPath!==null&&currentGroup.length)
groupChildren.append(this.renderTree(currentGroup,PropertyType_10.PropertyType.getCategoryTranslation(currentGroupPath),level+1,currentGroupPath));currentGroupPath=curPath;currentGroup=[]}
currentGroup.push(component)}}
if(currentGroupPath!==null&&currentGroup.length)
groupChildren.append(this.renderTree(currentGroup,PropertyType_10.PropertyType.getCategoryTranslation(currentGroupPath),level+1,currentGroupPath));return groupContainer};PropertiesPanel.prototype.bind=function(objects){var _this=this;var _a;this.unbind(!1);var objUniqTypes=objects.map(function(item){return(item instanceof Element_14.Element&&item.className)}).filter(function(value,index,self){return self.indexOf(value)===index});this.components=[];this.hasObjectsSelected=objects.length>0;var isMultiBinding=objects.length>1&&objUniqTypes.length>1;var components=new Map();for(var _i=0,objects_1=objects;_i<objects_1.length;_i++){var obj=objects_1[_i];var properties=obj.getProperties();for(var propName in properties){if(!properties.hasOwnProperty(propName))
continue;var property=properties[propName];if(!property.type||!property.type.component)
continue;if(property.type.accessLevel==PropertyType_10.PropertyTypeAccess.Admin&&!BuilderConfig_32.wbConfig.adminMode)
continue;if(property.type.accessLevel==PropertyType_10.PropertyTypeAccess.Developer&&!BuilderConfig_32.wbConfig.devDebugMode)
continue;if(property.type.accessLevel==PropertyType_10.PropertyTypeAccess.ComposerOrAdmin&&!BuilderConfig_32.wbConfig.adminMode&&!wb_builder.isComposer){continue}
if(isMultiBinding&&!(property.type.componentSupportsMultipleObjectBindings&&property.type.allowMultipleObjectBindings))
continue;var component=void 0;if(!components.has(property.type)){try{component=property.type.componentFactory?property.type.componentFactory():new property.type.component();component.propertyType=property.type}catch(err){console.error(err);console.error("Failed to create UI component for ".concat(property.type.id," property type (see previous error)"));components.set(property.type,null);continue}
components.set(property.type,component)}
component=components.get(property.type);if(!component)
continue;component.bindProperty(obj,property);if(property.dependencies&&typeof property.dependencies==="object"&&property.dependencies.length){for(var _b=0,_c=property.dependencies;_b<_c.length;_b++){var depName=_c[_b];if(!properties.hasOwnProperty(depName)){var className=obj.className||((_a=Object.getPrototypeOf(obj).constructor)===null||_a===void 0?void 0:_a.name);console.error("Property ".concat(propName," of ").concat(className," depends on non-existing property ").concat(depName,"."));continue}
component.bindDependencyProperty(obj,properties[depName])}}}}
components.forEach(function(component){if(!component)
return;var type=component.propertyType;try{if(typeof component.buildInit==="function")
component.buildInit((type.defaultComponentOptions||{}),{});component.prepareForPropertyPanel().setLabel(type.name);if(type.inlineSize){component.getElem().addClass('wb-property-inline'+(type.inlineSize<12?('-'+type.inlineSize):''))}
_this.components.push(component)}catch(err){console.error(err);console.error("Failed to create UI component for ".concat(type.id," property type (see previous error)"))}});this.components.sort(function(a,b){return PropertyType_10.PropertyType.compare(a.propertyType,b.propertyType)});this.render()};PropertiesPanel.prototype.unbind=function(andRender){if(andRender===void 0){andRender=!0}
for(var _i=0,_a=this.components;_i<_a.length;_i++){var component=_a[_i];component.destroy()}
this.components=[];this.hasObjectsSelected=!1;if(andRender)
this.render();};PropertiesPanel.prototype.getComponentForProperty=function(property){if(property.type&&this.components.length){for(var _i=0,_a=this.components;_i<_a.length;_i++){var component=_a[_i];if(component.propertyType===property.type)
return component}}
return null};PropertiesPanel.prototype.scrollPropertyIntoView=function(property,flash){if(flash===void 0){flash=!1}
var component=this.getComponentForProperty(property);if(component){var elem_2=component.getElem();elem_2.parents(".wb-property-group").removeClass("collapsed");elem_2[0].scrollIntoView();if(flash){setTimeout(function(){elem_2.stop(!0,!1).animate({backgroundColor:'#f8d7da'},60,function(){elem_2.stop(!0,!1).animate({backgroundColor:''},400,function(){elem_2.css({backgroundColor:''})})})},250)}}};return PropertiesPanel}());exports.PropertiesPanel=PropertiesPanel});define("js/UIButton",["require","exports","jquery","js/UIComponent","js/Service"],function(require,exports,jquery_121,UIComponent_72,Service_61){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UIButton=void 0;var UIButton=exports.UIButton=(function(_super){__extends(UIButton,_super);function UIButton(text,style,icon,type){var _this=_super.call(this,((text==='%inherit%')?text:undefined))||this;_this._icon=null;_this._icon2=null;_this._iconElem=null;_this._icon2Elem=null;_this._preloader=null;_this.caretElem=null;_this.menuElem=null;if(text!=='%inherit%'){_this.btnElem=_this._elem;_this._iconElem=(0,jquery_121.default)('<i>');_this._icon2Elem=(0,jquery_121.default)('<i>');_this.setText(text);if(style)
_this.setButtonStyle(style);if(icon)
_this.setIcon(icon);if(type)
_this.setType(type);}
return _this}
UIButton.prototype.buildInit=function(data,fields){var _this=this;var dataMenu=data.menuUp?data.menuUp:data.menu;if(dataMenu&&dataMenu.length>0){this._elem=(0,jquery_121.default)('<div>').addClass('btn-group').append(this.btnElem);if(data.menuUp)
this._elem.addClass('dropup');this.caretElem=(0,jquery_121.default)('<span>').addClass('caret').css({marginLeft:'4px'});this.menuElem=(0,jquery_121.default)('<ul>').addClass('dropdown-menu');if(data.menuWidth)
this.menuElem.css({width:data.menuWidth+'px',minWidth:data.menuWidth+'px'});var _loop_31=function(mi){var miElem=(0,jquery_121.default)('<li>'),miAElem=(0,jquery_121.default)('<a>').attr({href:'javascript:void(0)'}).text(mi.name).appendTo(miElem);if(typeof mi.click==='function'){(function(btn,func){miAElem.on('click',function(){func.call(btn);btn._elem.removeClass('open');return!1})})(this_21,mi.click)}
this_21.menuElem.append(miElem)};var this_21=this;for(var _i=0,dataMenu_1=dataMenu;_i<dataMenu_1.length;_i++){var mi=dataMenu_1[_i];_loop_31(mi)}
this.btnElem.on('click',function(){_this._elem.toggleClass('open')});this.menuElem.appendTo(this._elem)}
if(data.value)
this.setText(data.value);else if(data.text)
this.setText(data.text);if(data.icon)
this.setIcon(data.icon);if(data.icon2)
this.setIcon2(data.icon2);if(data.buttonStyle)
this.setButtonStyle(data.buttonStyle);if(data.buttonSize)
this.setButtonSize(data.buttonSize);if(data.buttonWidth)
this.setButtonWidth(data.buttonWidth);if(data.buttonType)
this.setType(data.buttonType);if(data.borderless)
this.btnElem.css({border:'none'})};UIButton.prototype.setType=function(type){if(type)
this.btnElem.attr({type:type})};UIButton.prototype.setIcon=function(icon){var newIcon=icon?icon:null;if(!this._iconElem||newIcon===this._icon)
return this;if(this._icon)
this._iconElem.removeClass(this._icon);this._icon=newIcon;if(this._icon)
this._iconElem.addClass(this._icon).prependTo(this.btnElem);else this._iconElem.detach();return this};UIButton.prototype.setIcon2=function(icon){var newIcon=icon?icon:null;if(!this._icon2Elem||newIcon===this._icon2)
return;if(this._icon2)
this._icon2Elem.removeClass(this._icon2);this._icon2=newIcon;if(this._icon2)
this._icon2Elem.addClass(this._icon2).appendTo(this.btnElem);else this._icon2Elem.detach()};UIButton.prototype._createElem=function(){return(0,jquery_121.default)('<button>').attr('type','button').addClass('btn btn-default')};UIButton.prototype.setText=function(text){this.btnElem.text((text===null)?'':text);if(this._iconElem){if(text){this._iconElem.css((wb_builder.rtl?{marginLeft:'4px'}:{marginRight:'4px'}))}else{this._iconElem.css({marginLeft:0,marginRight:0})}}
if(this._icon2Elem){if(text){this._icon2Elem.css((wb_builder.rtl?{marginRight:'4px'}:{marginLeft:'4px'}))}else{this._icon2Elem.css({marginLeft:0,marginRight:0})}}
if(this.caretElem){this.caretElem.appendTo(this.btnElem)}
return this};UIButton.prototype.getText=function(){return this.btnElem.text()};UIButton.prototype.setButtonSize=function(size){this.btnElem.removeClass('btn-lg btn-sm btn-xs');if(size===UIButton.SIZE_LARGE){this.btnElem.addClass('btn-lg')}else if(size===UIButton.SIZE_SMALL){this.btnElem.addClass('btn-sm')}else if(size===UIButton.SIZE_TINY){this.btnElem.addClass('btn-xs')}
return this};UIButton.prototype.setButtonStyle=function(style){this.btnElem.removeClass('btn-success btn-danger btn-info btn-warning btn-primary btn-link btn-default');if(style===UIButton.STYLE_DANGER){this.btnElem.addClass('btn-danger')}else if(style===UIButton.STYLE_SUCCESS){this.btnElem.addClass('btn-success')}else if(style===UIButton.STYLE_INFO){this.btnElem.addClass('btn-info')}else if(style===UIButton.STYLE_WARNING){this.btnElem.addClass('btn-warning')}else if(style===UIButton.STYLE_PRIMARY){this.btnElem.addClass('btn-primary')}else if(style===UIButton.STYLE_LINK){this.btnElem.addClass('btn-link')}else if(style===UIButton.STYLE_DEFAULT){this.btnElem.addClass('btn-default')}
return this};UIButton.prototype.getButtonStyle=function(){if(this.btnElem.hasClass('btn-danger')){return UIButton.STYLE_DANGER}else if(this.btnElem.hasClass('btn-success')){return UIButton.STYLE_SUCCESS}else if(this.btnElem.hasClass('btn-info')){return UIButton.STYLE_INFO}else if(this.btnElem.hasClass('btn-warning')){return UIButton.STYLE_WARNING}else if(this.btnElem.hasClass('btn-primary')){return UIButton.STYLE_PRIMARY}else if(this.btnElem.hasClass('btn-link')){return UIButton.STYLE_LINK}else if(this.btnElem.hasClass('btn-default')){return UIButton.STYLE_DEFAULT}
return null};UIButton.prototype.setEnabled=function(enabled){_super.prototype.setEnabled.call(this,enabled);if(enabled){this._elem.removeClass('disabled')}else{this._elem.addClass('disabled')}
return this};UIButton.prototype.setLoading=function(enabled){if(enabled){if(!this._preloader){this._preloader=(0,jquery_121.default)('<span class="icon-wb-spinner ico-spin"></span>');this.btnElem.prepend(this._preloader)}
this._preloader.show();this.setEnabled(!1)}else{if(this._preloader){this._preloader.hide()}
this.setEnabled(!0)}};UIButton.prototype.setBorderless=function(borderless){this.btnElem.css({border:borderless?'none':""})};UIButton.prototype.setButtonWidth=function(percentage){this.btnElem.css({width:percentage?percentage+'%':''})};UIButton.prototype.setLabel=function(label){if(label===void 0){label=null}
if(!label)
label="";this.setText(label);return this};UIButton.supportsMultipleObjectBindings=function(){return!1};UIButton.componentBindsAsButton=function(){return!0};UIButton.prototype.setComponentOptions=function(options){var _this=this;_super.prototype.setComponentOptions.call(this,options);if("icon" in options)
this.setIcon(options.icon);if("buttonStyle" in options)
this.setButtonStyle(options.buttonStyle);if("buttonSize" in options)
this.setButtonSize(options.buttonSize);if("buttonType" in options)
this.setType(options.buttonType);if("borderless" in options)
this.setBorderless(options.borderless);if("buttonWidth" in options)
this.setButtonWidth(options.buttonWidth);if("loading" in options)
this.setLoading(options.loading);if("click" in options){var clickFunc_1=options.click;this.btnElem.off("click").on("click",function(){if(_this.bindings.length){var firstBinding=_this.bindings[0];Service_61.Service.HelpSystemPlayer.notify('item-plugin-'+firstBinding.owner.getClassType()+'-prop-'+firstBinding.property.name+'-click');clickFunc_1.call(firstBinding.owner)}})}};UIButton.STYLE_SUCCESS='success';UIButton.STYLE_INFO='info';UIButton.STYLE_DANGER='danger';UIButton.STYLE_WARNING='warning';UIButton.STYLE_PRIMARY='primary';UIButton.STYLE_DEFAULT='default';UIButton.STYLE_LINK='link';UIButton.SIZE_NORMAL='normal';UIButton.SIZE_LARGE='btn-lg';UIButton.SIZE_SMALL='btn-sm';UIButton.SIZE_TINY='btn-xs';UIButton.TYPE_BUTTON='button';UIButton.TYPE_SUBMIT='submit';return UIButton}(UIComponent_72.UIComponent))});define("js/ui/SubDialog",["require","exports","jquery","js/Service"],function(require,exports,jquery_122,Service_62){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SubDialog=void 0;var SubDialog=(function(){function SubDialog(parentElement,title,content,buttons){if(title===void 0){title=null}
if(content===void 0){content=null}
if(buttons===void 0){buttons=null}
this.buttons={};this.fields={};this.elem=(0,jquery_122.default)('<div class="wb-subdialog"></div>');this.content=(0,jquery_122.default)('<div class="wb-subdialog-content"></div>');this.header=(0,jquery_122.default)('<div class="wb-subdialog-header"></div>');this.body=(0,jquery_122.default)('<div class="wb-subdialog-body"></div>');this.footer=(0,jquery_122.default)('<div class="wb-subdialog-footer"></div>');this.title=(0,jquery_122.default)('<h4></h4>');parentElement.append(this.elem);this.elem.append(this.content);this.content.append(this.header,this.body,this.footer);this.header.append(this.title);if(title!==null)
this.setTitle(title);if(content!==null)
this.setContent(content);if(buttons!==null)
this.setButtons(buttons);}
SubDialog.prototype.setTitle=function(title){this.title.text(title);return this};SubDialog.prototype.setContent=function(content){this.fields={};if(typeof content==="string"){this.body.html(content)}else{this.body.empty();Service_62.default.UIBuilder.buildLayout(content,this.body,this.fields)}
return this};SubDialog.prototype.setButtons=function(buttons){this.footer.empty();this.buttons={};var uiButtons=[];var dlg=this;for(var _i=0,buttons_3=buttons;_i<buttons_3.length;_i++){var sdButton=buttons_3[_i];uiButtons.push({type:"Button",text:sdButton.text,buttonStyle:sdButton.buttonStyle,click:(function(){dlg.setVisible(!1);if(typeof this.click==="function")
this.click();}).bind(sdButton)})}
Service_62.default.UIBuilder.buildLayout(uiButtons,this.footer,this.buttons);return this};SubDialog.prototype.setVisible=function(visible){if(visible)
this.elem.show();else this.elem.hide();return this};SubDialog.prototype.destroy=function(){this.elem.remove()};SubDialog.alert=function(parentElement,title,content){var deferred=jquery_122.default.Deferred();var alertDialog=new SubDialog(parentElement,title,content,[{text:__("OK"),click:function(){deferred.resolve();alertDialog.destroy()}}]);return deferred.promise()};SubDialog.confirm=function(parentElement,title,content,buttons){var deferred=jquery_122.default.Deferred();var confirmDialog;var sdButtons=[];if(buttons===void 0){buttons=[{text:__("No"),buttonStyle:'default'},{text:__("Yes"),buttonStyle:'danger'}]}
var idx=0;var _loop_32=function(confButton){var btnIdx=idx++;sdButtons.push({text:confButton.text,buttonStyle:confButton.buttonStyle,click:function(){deferred.resolve({contentFields:confirmDialog.fields,clickedButtonIndex:btnIdx});confirmDialog.destroy()}})};for(var _i=0,buttons_4=buttons;_i<buttons_4.length;_i++){var confButton=buttons_4[_i];_loop_32(confButton)}
confirmDialog=new SubDialog(parentElement,title,content,sdButtons);return deferred.promise()};return SubDialog}());exports.SubDialog=SubDialog});define("js/ProgressBar",["require","exports","js/UIComponent","jquery"],function(require,exports,UIComponent_73,jquery_123){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ProgressBar=exports.ProgressBarType=void 0;var ProgressBarType;(function(ProgressBarType){ProgressBarType.Default="default";ProgressBarType.Info="info";ProgressBarType.Success="success";ProgressBarType.Warning="warning";ProgressBarType.Danger="danger"})(ProgressBarType||(exports.ProgressBarType=ProgressBarType={}));var ProgressBar=(function(_super){__extends(ProgressBar,_super);function ProgressBar(){var _this=_super.call(this)||this;_this.parts={};return _this}
ProgressBar.prototype._createElem=function(){var elem=(0,jquery_123.default)('<div class="progress wb-progress-bar">');this.container=(0,jquery_123.default)('<div class="wb-progress-bar-cont">').css({"white-space":"nowrap",overflow:"hidden"});elem.append(this.container);return elem};ProgressBar.prototype.setValue=function(value){this.setProgress(ProgressBarType.Default,value)};ProgressBar.prototype.setText=function(text){if(!this.textOver){this.textOver=(0,jquery_123.default)('<div class="wb-progress-bar-text wb-pbt-over">');this.textUnder=(0,jquery_123.default)('<div class="wb-progress-bar-text wb-pbt-under">');this.container.append(this.textOver);this.getElem().append(this.textUnder)}
this.textOver.text(text);this.textUnder.text(text)};ProgressBar.prototype.setProgress=function(type,percent){var key=type;var $bar;var total=0;if(this.parts.hasOwnProperty(key)){$bar=this.parts[key]}else{$bar=(0,jquery_123.default)('<div class="wb-progress-bar-part progress-bar progress-bar-'+type+' progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">');this.container.append($bar);this.parts[key]=$bar}
$bar.attr("aria-valuenow",percent).data("value",percent);for(key in this.parts){if(this.parts.hasOwnProperty(key))
total+=this.parts[key].data("value");}
this.container.css({width:total+"%"});if(total>0){for(key in this.parts){if(this.parts.hasOwnProperty(key))
this.parts[key].css({width:(total?(100*this.parts[key].data("value")/total):0)+"%"})}}};return ProgressBar}(UIComponent_73.UIComponent));exports.ProgressBar=ProgressBar});define("js/TaskProgressDialog",["require","exports","jquery","Dialog","js/Service","js/ProgressBar","js/VerticalLayout","js/FlowLayout","js/util/MonitoringTimer"],function(require,exports,jquery_124,Dialog_20,Service_63,ProgressBar_1,VerticalLayout_35,FlowLayout_22,MonitoringTimer_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TaskProgressDialog=void 0;var TaskProgressStepState;(function(TaskProgressStepState){TaskProgressStepState.Pending="pending";TaskProgressStepState.Active="active";TaskProgressStepState.Done="done"})(TaskProgressStepState||(TaskProgressStepState={}));var TaskProgressFields=(function(){function TaskProgressFields(){}
return TaskProgressFields}());var MonitoringInterval=5000;var TaskProgressDialog=(function(_super){__extends(TaskProgressDialog,_super);function TaskProgressDialog(title){var _this=_super.call(this,title,!0,null,!0)||this;_this.monitorOptions=null;_this.monitorTimer=null;_this.monitorResult=null;_this.tasks={};_this.retryTimer=null;_this.queuedForCancel=!1;_this.isActivatedManually=!1;var uiDef={type:VerticalLayout_35.VerticalLayout,children:[{type:'CustomContainer',id:"preloader",styleClass:"fa fa-spinner fa-spin"},{type:VerticalLayout_35.VerticalLayout,id:"container",children:[]},{type:'CustomContainer',id:"errorMessage",visible:!1,styleClass:'alert alert-danger',tag:'div',content:''},{type:'CustomContainer',id:"regMessage",visible:!1,styleClass:'alert alert-info',tag:'div',content:''},{type:"CustomContainer",id:"message",visible:!1,tag:'div',content:''},{type:'CustomContainer',id:"retryCountdown",visible:!1,styleClass:"text-center",tag:"div",content:""}]};var ui={};_this.content.empty();Service_63.Service.UIBuilder.buildLayout(uiDef,_this.content,ui);_this.preloader=ui.preloader;_this.container=ui.container;_this.errorMessage=ui.errorMessage;_this.regMessage=ui.regMessage;_this.message=ui.message;_this.retryCountdown=ui.retryCountdown;var thisClass=_this;_this.addButton(__("Close"),function(){if((0,jquery_124.default)(this).is(".disabled"))
return;var result=thisClass.requestClose();if(typeof result==="object"){result.then(function(){thisClass.cancel()})}else if(result)
thisClass.cancel();});return _this}
TaskProgressDialog.prototype.requestClose=function(){if(this.monitorOptions&&typeof this.monitorOptions.requestCancel==="function")
return this.monitorOptions.requestCancel.call(this);return _super.prototype.requestClose.call(this)};TaskProgressDialog.prototype.cancel=function(){if(this.monitorTimer){this.queuedForCancel=!0;this.xButton.addClass("hidden");this.buttons.find("button").addClass("disabled")}else{this.onCancel()}};TaskProgressDialog.prototype.reset=function(){this.queuedForCancel=!1;this.preloader.setVisible(!0);this.container.removeAllChildren();this.tasks={};this.monitorResult=null;this.errorMessage.getElem().text("");this.errorMessage.setVisible(!1);this.regMessage.getElem().text("");this.regMessage.setVisible(!1);this.retryCountdown.setVisible(!1);if(this.retryTimer)
this.retryTimer.cancel();this.retryTimer=null};TaskProgressDialog.prototype.monitor=function(options,requestStart){var _this=this;this.reset();this.monitorOptions=options;this.queuedForCancel=!1;if(!options.onCancel){this.xButton.addClass("hidden");this.buttons.find("button").addClass("disabled")}else{this.xButton.removeClass("hidden");this.buttons.find("button").css("white-space","normal").text(__("Cancel")).prepend('<i class="fa fa-times"></i>&nbsp;&nbsp;')}
if(this.monitorTimer!==null)
this.monitorTimer.cancel();this.monitorTimer=new MonitoringTimer_2.MonitoringTimer({timeout:MonitoringInterval,retryTimeout:30000,maxRetries:-1,loop:function(timer,initial){if(!_this.monitorOptions||_this.queuedForCancel){_this.onCancel();return}
var xhr=jquery_124.default.ajax({url:_this.monitorOptions.url+(requestStart?(((_this.monitorOptions.url.indexOf('?')>=0)?'&':'?')+'requestStart=1'):''),data:_this.monitorOptions.data?_this.monitorOptions.data:{},type:"post",dataType:"json",async:!0,success:function(response){_this.preloader.setVisible(!1);if(typeof response.complete!=="boolean"){timer.error(0,"Bad response received",!_this.queuedForCancel);return}
if(response.error){timer.error(0,response.error,!1);return}
if(response.steps){for(var key in response.steps){_this.updateStep(key,response.steps[key])}}
if(response.complete)
timer.done(response);else if(_this.queuedForCancel)
_this.onCancel();else{_this.onProgress(response);timer.scheduleNext()}},error:function(jqXHR,textStatus,errorThrown){if(textStatus==="abort")
return;_this.preloader.setVisible(!1);timer.error(0,errorThrown,!_this.queuedForCancel)}});requestStart=!1;return xhr},success:function(data){_this.onComplete(data)},error:function(err){if(!_this.monitorOptions)
return;_this.monitorResult=!1;if(typeof _this.monitorOptions.onError==="function")
_this.monitorOptions.onError(err.message);else _this.setError(err.message);_this.stopMonitoring()}})};TaskProgressDialog.prototype.onProgress=function(response){if(!this.monitorOptions){this.reset();this.setVisible(!1);return}
if(typeof this.monitorOptions.onProgress==="function")
this.monitorOptions.onProgress(response);};TaskProgressDialog.prototype.onCancel=function(){if(!this.monitorOptions){this.reset();this.setVisible(!1);return}
this.monitorResult=!1;var cancelCallback=this.monitorOptions.onCancel;this.stopMonitoring();this.reset();this.setVisible(!1);if(typeof cancelCallback==="function")
cancelCallback();else if(!this.isActivatedManually&&!this.monitorResult)
wb_builder.initPage();};TaskProgressDialog.prototype.onComplete=function(response){if(!this.monitorOptions)
return;this.monitorResult=!0;if(typeof this.monitorOptions.onComplete==="function")
this.monitorOptions.onComplete(response);this.stopMonitoring()};TaskProgressDialog.prototype.isMonitoring=function(){return this.monitorOptions!==null};TaskProgressDialog.prototype.stopMonitoring=function(){this.queuedForCancel=!1;if(this.monitorTimer){this.monitorTimer.cancel();this.monitorTimer=null}
this.monitorOptions=null;this.xButton.removeClass("hidden");this.buttons.find("button").removeClass("disabled").text(__("Close"))};TaskProgressDialog.prototype.updateStep=function(key,data){var fields;if(!this.tasks.hasOwnProperty(key)){fields=new TaskProgressFields();var progressDef=void 0;if(data.progressType==="string"){progressDef={type:"Label",id:"progress",css:{fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis"}}}else{progressDef={type:"ProgressBar",id:"progress"}}
Service_63.Service.UIBuilder.buildLayout({type:"HorizontalLayout",styleClass:"wb-lay-no-mb",columnWeights:[6,6],columnWeightsSmall:[12,12],css:{marginBottom:10},children:[{type:FlowLayout_22.FlowLayout,styleClass:"wb-lay-no-mb",css:{marginBottom:5},children:[{type:"CustomContainer",id:"icon",styleClass:"fa fa-hourglass",tag:"i",width:30},{type:"Label",id:"text",css:{"font-weight":"normal"},text:data.text},]},{type:"HorizontalLayout",styleClass:"wb-lay-no-mb",css:{minHeight:20,marginBottom:5},children:[progressDef]},]},this.container,fields);this.tasks[key]=fields}else fields=this.tasks[key];fields.text.setText(data.text);if(data.progressType==="string"){fields.progress.setVisible(!0);if(data.progressText)
fields.progress.setSystemTitle(data.progressText);}else{fields.progress.setVisible(data.state!=TaskProgressStepState.Pending);if(data.hasOwnProperty("progress")){fields.progress.setProgress(ProgressBar_1.ProgressBarType.Default,(data.state==TaskProgressStepState.Active)?data.progress:0);fields.progress.setProgress(ProgressBar_1.ProgressBarType.Success,(data.state!=TaskProgressStepState.Active)?data.progress:0)}}
if(data.progressText)
fields.progress.setText(data.progressText);if(data.state==TaskProgressStepState.Pending){fields.icon.getElem().attr("class","fa fa-hourglass-half").css({color:"#AAA"})}else{if(data.state==TaskProgressStepState.Active){fields.icon.addClass("fa-play-circle");fields.icon.getElem().attr("class","fa fa-spinner fa-spin").css({color:"#377BB5"})}else{fields.icon.addClass("fa-check-circle");fields.icon.getElem().attr("class","fa fa-check-circle").css({color:"#0A0"})}}};TaskProgressDialog.prototype.setMessage=function(message,type){if(type===void 0){type="default"}
if(message===null){this.message.setVisible(!1)}else{this.message.setVisible(!0);this.message.setContent(message);this.message.getElem().removeClass("alert-default alert-info alert-warning alert-danger").addClass("alert alert-"+type)}
return this.message.getElem()};TaskProgressDialog.prototype.setError=function(message){this.preloader.setVisible(!1);this.errorMessage.getElem().text(message);this.errorMessage.setVisible(!0);this.regMessage.setVisible(!1);this.message.setVisible(!1)};TaskProgressDialog.prototype.setRegMessage=function(message){var elem=this.regMessage.getElem();elem.empty();if(typeof message==="string")
elem.html(message);else if(message)
elem.append(message);this.regMessage.setVisible(message!==""&&message!==null);return this.regMessage.getElem()};TaskProgressDialog.prototype.retry=function(timeout,data,retriesLeft){var _this=this;if(this.retryTimer)
return;this.retryCountdown.setVisible(!0);var seconds=timeout;var importData=data;var retries=retriesLeft;this.retryTimer=new MonitoringTimer_2.MonitoringTimer({timeout:1000,maxTimeout:1100,loop:function(timer){if(seconds>0){_this.retryCountdown.getElem().text(__("Retrying in %s seconds").replace("%s",seconds.toString()));seconds--;timer.scheduleNext()}else{Service_63.Service.websiteImporter.importWebsite(importData,retries,!1);_this.retryTimer=null;timer.done()}}})};return TaskProgressDialog}(Dialog_20.default));exports.TaskProgressDialog=TaskProgressDialog});define("js/WebsiteImporter",["require","exports","js/TaskProgressDialog","js/Service","js/Confirm","js/UIComponent","js/CustomContainer","jquery","js/core/BuilderConfig","js/util/FlowStepUtil","js/ProgressBar","js/util/MonitoringTimer"],function(require,exports,TaskProgressDialog_1,Service_64,Confirm_2,UIComponent_74,CustomContainer_16,jquery_125,BuilderConfig_33,FlowStepUtil_5,ProgressBar_2,MonitoringTimer_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.WebsiteImporter=exports.WebsiteImporterModule=exports.WebsiteImportVerificationOptionsControl=exports.WebsiteImportOptions=void 0;var IMPORT_RETRY_TIMEOUT=15;var WebsiteImportOptions=(function(){function WebsiteImportOptions(){}
return WebsiteImportOptions}());exports.WebsiteImportOptions=WebsiteImportOptions;var WebsiteImportVerificationOptionsControl=(function(_super){__extends(WebsiteImportVerificationOptionsControl,_super);function WebsiteImportVerificationOptionsControl(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.domainNameSpans=[];_this.domainName="";_this.data=null;_this.error="";return _this}
WebsiteImportVerificationOptionsControl.prototype.buildInit=function(data,fields){var _this=this;if(data.domain)
this.setDomainName(data.domain);this.updateContent();jquery_125.default.ajax({url:WB_IMPORT_VERIFICATION_INFO_URL,dataType:"json",async:!0,success:function(resp){if(resp&&resp.success&&resp.info){_this.data=resp.info}else if(resp.error){_this.error=resp.error}else{_this.error=__("Unknown error")}
_this.updateContent()},error:function(){_this.error="Network error";_this.updateContent()}})};WebsiteImportVerificationOptionsControl.prototype.createBlock=function(title){var blockHead=(0,jquery_125.default)('<p style="font-weight: bold;"/>');var blockLink=(0,jquery_125.default)('<a href="javascript:void(0)">').text(title);var blockCont=(0,jquery_125.default)('<div class="hidden"/>');this._elem.append(blockHead,blockCont);blockHead.append(blockLink);blockHead.append('<i class="fa fa-chevron-right"/>').append('<i class="fa fa-chevron-down hidden"/>').append(document.createTextNode(' ')).append(blockLink);blockLink.on("click touchstart",function(){var parent=(0,jquery_125.default)(this).parent();parent.find(".fa-chevron-right").toggleClass("hidden");parent.find(".fa-chevron-down").toggleClass("hidden");blockCont.toggleClass("hidden")});return blockCont};WebsiteImportVerificationOptionsControl.prototype.updateContent=function(){this._elem.html("");this._elem.append((0,jquery_125.default)('<h4>').text(__("Confirm website ownership")));if(this.error!==""){this._elem.append((0,jquery_125.default)('<div class="alert alert-danger">').text(this.error))}else if(!this.data){this._elem.append('<i class="fa fa-spinner fa-pulse fa-2x" />')}else{this.domainNameSpans=[];this.domainNameSpans.push((0,jquery_125.default)('<span>').text(this.domainName));var blockCont=void 0,ls=void 0,li=void 0;this._elem.append((0,jquery_125.default)('<p class="text-small">').text(__("Select one of the following methods to get confirmation instructions.")));blockCont=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","1").replace("%2$s","HTTP"));blockCont.append((0,jquery_125.default)('<ol>').append((0,jquery_125.default)('<li class="text-small">').text(__("Download file:")).append('<br /><a style="word-break: break-all;" href="'+this.data.tokenFileDataUri+'" download="'+this.data.tokenFileName+'">'+this.data.tokenFileName+'</a>')).append((0,jquery_125.default)('<li class="text-small">').text(__("Upload it to the root folder of the website you are about to import."))).append((0,jquery_125.default)('<li class="text-small">').text(__("Check if it is accessible via URL:")).append('<br />',(0,jquery_125.default)('<code style="word-break: break-all;">').append('http://',this.domainNameSpans[0],'/'+this.data.tokenFileName))));blockCont=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","2").replace("%2$s","META"));blockCont.append((0,jquery_125.default)('<p class="text-small">').text(__("Add meta tag (HTML code) to your website:")));blockCont.append((0,jquery_125.default)('<p class="text-small">').append((0,jquery_125.default)('<code style="word-break: break-all;"/>').text(this.data.tokenMetaTagHtml)));blockCont=this.createBlock(__("Method %1$s (%2$s)").replace("%1$s","3").replace("%2$s","DNS"));blockCont.append((0,jquery_125.default)('<p class="text-small">').text(__("Add following record to your website DNS zone:")));blockCont.append((0,jquery_125.default)('<p class="text-small">').append((0,jquery_125.default)('<code style="word-break: break-all;"/>').text(this.data.tokenDNSRecord)));blockCont.append((0,jquery_125.default)('<p class="text-small">').text(__("Sometimes it may take several minutes for DNS service to update changes in zone.")))}};WebsiteImportVerificationOptionsControl.prototype.setDomainName=function(domainName){this.domainName=domainName;for(var _i=0,_a=this.domainNameSpans;_i<_a.length;_i++){var span=_a[_i];span.text(domainName)}};return WebsiteImportVerificationOptionsControl}(UIComponent_74.UIComponent));exports.WebsiteImportVerificationOptionsControl=WebsiteImportVerificationOptionsControl;var WebsiteImporterModule=exports.WebsiteImporterModule=(function(){function WebsiteImporterModule(){this.importFields={};this.importCompleteCallback=null;this.migrationMode=!1;this.previewReady=!1;this.previewingImport=!1;this.importComplete=!1;this.importNotification=null;this.minimized=!1;this.minimizeButton=null;this.flowStepRegistered=!1;this.registerSuggestionTimeout=0;this.onCancel=null}
WebsiteImporterModule.prototype.resetRetries=function(){this.retriesLeft=0};WebsiteImporterModule.prototype.cancelRegistrationSuggestion=function(){if(this.registerSuggestionTimeout){(0,MonitoringTimer_3.clearTimeoutEx)(this.registerSuggestionTimeout);this.registerSuggestionTimeout=0}};WebsiteImporterModule.prototype.initRegistrationSuggestion=function(){var _this=this;this.cancelRegistrationSuggestion();if(this.migrationMode||!Service_64.Service.RemoteLoginDialog.available())
return;this.registerSuggestionTimeout=(0,MonitoringTimer_3.setTimeoutEx)(function(){if(!_this.taskProgressDialog)
return;_this.taskProgressDialog.setRegMessage((0,jquery_125.default)('<div>'+'<div>'+__("Import may take some time.")+'</div>'+'<div><strong>'+__("It's highly recommended to register while waiting")+'</strong></div>'+(BuilderConfig_33.wbConfig.unbrandedTestMode?('<div>'+'<i class="fa fa-star" style="color: #f68c14; margin-right: 5px;"></i>'+'<span style="display: inline-block; margin-right: 10px;">'+__("Unlimited Storage")+'</span>'+'<i class="fa fa-star" style="color: #f68c14; margin-right: 5px;"></i>'+'<span style="display: inline-block; margin-right: 10px;">'+__("Unlimited Websites")+'</span>'+'<i class="fa fa-star" style="color: #f68c14; margin-right: 5px;"></i>'+'<span style="display: inline-block; margin-right: 10px;">'+__("No Ads")+'</span>'+'<i class="fa fa-star" style="color: #f68c14; margin-right: 5px;"></i>'+'<span style="display: inline-block; margin-right: 10px;">'+__("Free SSL")+'</span>'+'</div>'):'')+'<button class="btn btn-success register-btn" style="margin-top: 10px;">'+__("Register")+'</button>'+'</div>')).on("click",".register-btn",function(){Service_64.Service.RemoteLoginDialog.setVisible(!0,!1,!1,"DemoImport")})},20000)};WebsiteImporterModule.prototype.resetProgress=function(){this.cancelRegistrationSuggestion();this.taskProgressDialog.reset();this.taskProgressDialog.setVisible(!0)};WebsiteImporterModule.prototype.openPreloader=function(){if(!this.taskProgressDialog){this.taskProgressDialog=new TaskProgressDialog_1.TaskProgressDialog(this.migrationMode?__("Migrating to new builder version"):__("Import website"));this.resetProgress()}};WebsiteImporterModule.prototype.setMigrationMode=function(isMigration){this.migrationMode=isMigration};WebsiteImporterModule.prototype.setImportCompleteCallback=function(callback){this.importCompleteCallback=callback};WebsiteImporterModule.prototype.checkUrl=function(url){return(/^https?:\/\/[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?(\.[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?)+(:[0-9]+)?(\/|\?|#|$)/.test(url))};WebsiteImporterModule.prototype.handleImportOnOpen=function(isMigration,func){var _this=this;this.resetRetries();this.setMigrationMode(isMigration);this.setImportCompleteCallback(function(success){_this.setImportCompleteCallback(null);_this.setMigrationMode(!1);func(success)});this.showProgress(!0)};WebsiteImporterModule.prototype.importWebsite=function(data,allowRetryCount,isManual,onCancel){var thisImporter=this;this.lastImportData=data;this.retriesLeft=Math.max(allowRetryCount,0);this.onCancel=onCancel!==null&&onCancel!==void 0?onCancel:null;this.openPreloader();this.resetProgress();if(isManual)
this.taskProgressDialog.isActivatedManually=isManual;jquery_125.default.ajax({url:WB_IMPORT_URL+'?sess='+BuilderConfig_33.wbConfig.sessUniqKey+'&st='+BuilderConfig_33.wbConfig.secureToken,data:data,type:'post',dataType:'json',async:!0,success:function(resp){if(("success" in resp)&&resp.success){if(("reload" in resp)&&resp.reload)
thisImporter.onImportDone({});else thisImporter.showProgress()}else if(("error" in resp)){if(resp.errorCode===4){thisImporter.resetProgress();thisImporter.taskProgressDialog.setVisible(!1);thisImporter.showImportDialog(data.url,!0)}else thisImporter.showError({allowRetry:!1,message:resp.error})}else{thisImporter.showError({allowRetry:!0,message:__("Import service is currently unavailable. Please try again later.")})}},error:function(){thisImporter.showError({allowRetry:!0,message:__("Import service is currently unavailable. Please try again later.")})}})};WebsiteImporterModule.prototype.showProgress=function(requestStart,initialPreviewReadyState){var _this=this;if(requestStart===void 0){requestStart=!1}
if(initialPreviewReadyState===void 0){initialPreviewReadyState=!1}
this.openPreloader();if(!this.taskProgressDialog.isMonitoring()){this.initRegistrationSuggestion();this.previewReady=initialPreviewReadyState;this.previewingImport=!1;this.minimized=!1;this.importComplete=!1;if(this.importCompleteCallback)
this.taskProgressDialog.isActivatedManually=!0;if(this.taskProgressDialog)
this.taskProgressDialog.setTitle(this.migrationMode?__("Migrating to new builder version"):__("Import website"));this.taskProgressDialog.monitor({url:WB_IMPORT_STATUS_URL+'?sess='+BuilderConfig_33.wbConfig.sessUniqKey,onComplete:this.onImportDone.bind(this),onProgress:this.onImportProgress.bind(this),onCancel:this.onImportCancelled.bind(this),onError:this.showError.bind(this),requestCancel:this.requestCancel.bind(this),},requestStart);(0,MonitoringTimer_3.setTimeoutEx)(function(){_this.updateState()},0)}};WebsiteImporterModule.prototype.requestCancel=function(){var _this=this;var def=jquery_125.default.Deferred();if(this.previewReady){if(this.minimized){Confirm_2.Confirm.showDialog(__("Warning"),__("If you cancel import right now, you will be able to edit only first page, but rest of the pages will be lost."),[{title:__("Continue import"),cssClass:"btn-default",func:function(){def.reject()},},{title:__("Import only first page"),cssClass:"btn-danger",func:function(){def.resolve();_this.taskProgressDialog.cancel()},}],0,function(){def.reject()},!0);if(Confirm_2.Confirm.dialog)
Confirm_2.Confirm.dialog.setSizeClass("modal-md");}else{this.taskProgressDialog.confirm(__("Warning"),__("If you cancel import right now, you will be able to edit only first page, but rest of the pages will be lost."),[{text:__("Continue import"),buttonStyle:"default",},{text:__("Import only first page"),buttonStyle:"danger",}]).then(function(result){if((result===null||result===void 0?void 0:result.clickedButtonIndex)===1){def.resolve();_this.taskProgressDialog.cancel()}else{def.reject()}}).fail(function(){def.reject()})}}else{def.resolve()}
return def.promise()};WebsiteImporterModule.prototype.showError=function(error){var _this=this;var _a;this.cancelRegistrationSuggestion();this.previewReady=!1;this.importComplete=!1;this.updateState();(_a=Confirm_2.Confirm.dialog)===null||_a===void 0?void 0:_a.hide();this.openPreloader();if(this.importCompleteCallback){this.taskProgressDialog.setOnClose(function(){_this.taskProgressDialog.setOnClose(null);if(_this.importCompleteCallback){_this.importCompleteCallback(!1)}})}
if(this.taskProgressDialog){this.taskProgressDialog.setVisible(!0);this.taskProgressDialog.setTitle(this.migrationMode?__("Migrating to new builder version"):__("Import website"))}
this.taskProgressDialog.setError(error.message);if(error.allowRetry&&this.lastImportData&&this.retriesLeft>0)
this.taskProgressDialog.retry(IMPORT_RETRY_TIMEOUT,this.lastImportData,this.retriesLeft-1);};WebsiteImporterModule.prototype.onImportCancelled=function(){var _this=this;this.cancelRegistrationSuggestion();if(this.previewReady&&!this.previewingImport){(0,MonitoringTimer_3.setTimeoutEx)(function(){wb_builder.loadPage(null,!0,function(){if(!_this.flowStepRegistered){_this.flowStepRegistered=!0;(0,FlowStepUtil_5.forwardFlowStep)(BuilderConfig_33.wbConfig,BuilderConfig_33.wbConfig.inactiveMode?23:FlowStepUtil_5.FlowStep.ImportWebsite,!0)}})},500)}
this.previewReady=!1;this.previewingImport=!1;this.minimized=!1;this.importComplete=!1;this.updateState();jquery_125.default.ajax({url:WB_IMPORT_CANCEL_URL+'?sess='+BuilderConfig_33.wbConfig.sessUniqKey,async:!0});if(this.importCompleteCallback)
this.importCompleteCallback(!1);};WebsiteImporterModule.prototype.updateImportNotification=function(){};WebsiteImporterModule.prototype.updateState=function(){var _this=this;if(this.previewReady){if(this.minimizeButton===null){this.minimizeButton=this.taskProgressDialog.addHeaderButton("fa fa-window-minimize",function(){_this.taskProgressDialog.setVisible(!1);_this.minimized=!0;if(!_this.previewingImport){_this.previewingImport=!0;(0,MonitoringTimer_3.setTimeoutEx)(function(){wb_builder.loadPage(null,!0,function(){if(!_this.flowStepRegistered){_this.flowStepRegistered=!0;(0,FlowStepUtil_5.forwardFlowStep)(BuilderConfig_33.wbConfig,BuilderConfig_33.wbConfig.inactiveMode?23:FlowStepUtil_5.FlowStep.ImportWebsite,!0)}})},500)}
_this.updateState()})}
if(this.minimized){if(!this.importNotification){var ui={};var thisClass=this;var id=Service_64.Service.notifications.createNotification({type:"default",close:!1,minContentWidth:300,maxContentWidth:300,noPadding:!0,content:{type:"VerticalLayout",styleClass:"pseudo-modal",children:[{type:"CustomContainer",id:"header",styleClass:"modal-header",content:'<button type="button" class="close">&times;</button>'+'<i class="wb-modal-custom-header-button fa fa-window-maximize"></i>'+'<h4 class="modal-title">'+__("Import website")+'</h4>'},{type:"VerticalLayout",styleClass:"modal-body",children:[{type:"VerticalLayout",id:"progressBlock",children:[{type:"ProgressBar",id:"progress"}]},{type:"CustomContainer",id:"text",css:{marginTop:15},content:"<i class=\"fa fa-lock\" style=\"vertical-align:-1px;\"></i>&nbsp;&nbsp;<span style=\"font-size:12px;\">"+__("Editing is locked while importing")+"</span>"},]}]},uiFields:ui});this.importNotification={id:id,ui:ui};ui.header.getElem().find("button").on("click",function(){var result=_this.requestCancel();if(typeof result==="object"){result.then(function(){_this.taskProgressDialog.cancel()})}else if(result)
_this.taskProgressDialog.cancel();});ui.header.getElem().find(".fa").on("click",function(){_this.taskProgressDialog.setVisible(!0);_this.minimized=!1;_this.updateState()});this.importNotification.ui.progress.setText("0%");this.importNotification.ui.progress.setProgress(ProgressBar_2.ProgressBarType.Success,0)}
if("wb_builder" in window&&typeof wb_builder.setEditingLocked==="function")
wb_builder.setEditingLocked(!0);}else{if(this.importNotification){Service_64.Service.notifications.closeNotification(this.importNotification.id);this.importNotification=null}
if("wb_builder" in window&&typeof wb_builder.setEditingLocked==="function")
wb_builder.setEditingLocked(!1);var msgElem=this.taskProgressDialog.setMessage(__("We already imported the first page.")+"<br/>"+__("<a>Minimise</a> dialog and check the page."),"warning");msgElem.find("A").off("click").on("click",function(){if(_this.minimizeButton!=null)
_this.minimizeButton.click();}).attr("href","javascript:void(0)");this.taskProgressDialog.buttons.find("button").css("white-space","normal").text(__("Cancel import and stay with first page")).prepend('<i class="fa fa-times"></i>&nbsp;&nbsp;')}}else{if(this.minimizeButton!==null){this.minimizeButton.remove();this.minimizeButton=null}
if(this.importNotification){Service_64.Service.notifications.closeNotification(this.importNotification.id);this.importNotification=null}
if("wb_builder" in window&&typeof wb_builder.setEditingLocked==="function")
wb_builder.setEditingLocked(!1);this.taskProgressDialog.setMessage(null);if(this.importComplete)
this.taskProgressDialog.buttons.find("button").text(__("Close"));else this.taskProgressDialog.buttons.find("button").css("white-space","normal").text(__("Cancel")).prepend('<i class="fa fa-times"></i>&nbsp;&nbsp;')}};WebsiteImporterModule.prototype.onImportProgress=function(status){if(status.previewAvailable&&!this.previewReady){this.previewReady=!0;if(this.importCompleteCallback&&(!("wb_builder" in window)||typeof wb_builder.setEditingLocked!=="function")){this.importCompleteCallback(!0);this.importCompleteCallback=null}
this.updateState()}
if(this.importNotification&&status.progress){this.importNotification.ui.progress.setText(status.progress+"%");this.importNotification.ui.progress.setProgress(ProgressBar_2.ProgressBarType.Success,status.progress)}};WebsiteImporterModule.prototype.onImportDone=function(status){var _this=this;var _a;this.cancelRegistrationSuggestion();this.previewReady=!1;this.importComplete=!1;this.updateState();(_a=Confirm_2.Confirm.dialog)===null||_a===void 0?void 0:_a.hide();(0,MonitoringTimer_3.setTimeoutEx)(function(){if(!_this.minimized)
_this.taskProgressDialog.setVisible(!1);if(_this.importCompleteCallback)
_this.importCompleteCallback(!0);else{wb_builder.loadPage(null,!0,function(){if(!_this.flowStepRegistered){_this.flowStepRegistered=!0;(0,FlowStepUtil_5.forwardFlowStep)(BuilderConfig_33.wbConfig,BuilderConfig_33.wbConfig.inactiveMode?23:FlowStepUtil_5.FlowStep.ImportWebsite,!0)}})}},500)};WebsiteImporterModule.prototype.onBuilderInit=function(status){if(!status)
return!1;if(status.importing){if(status.importData){this.lastImportData=status.importData;this.retriesLeft=1}
this.showProgress(!1,status.previewing)}else if(status.error)
this.showError(status.error);return!0};WebsiteImporterModule.prototype.getDomain=function(url){var domain=WebsiteImporterModule.DEFAULT_DOMAIN;var matches=url.match(/^(?:https?:\/\/)?([a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?(\.[a-zA-Z0-9\u0080-\uFFFF]([a-zA-Z0-9\u0080-\uFFFF\-]*[a-zA-Z0-9\u0080-\uFFFF])?)+)(?:[:\/?#].*)?$/i);if(matches)
domain=matches[1];return domain};WebsiteImporterModule.prototype.showImportDialog=function(url,showVerificationMethods){var _this=this;if(url===void 0){url=""}
if(showVerificationMethods===void 0){showVerificationMethods=!1}
if("wb_builder" in window&&typeof wb_builder.getEditingLocked==="function"&&wb_builder.getEditingLocked())
return;var thisImporter=this;var $dlg;if(showVerificationMethods){$dlg=(0,jquery_125.default)('<div><div class="website-import-form"></div></div>')}else{$dlg=(0,jquery_125.default)('<div class="wb_change_template_dlg">'+'<div class="website-import-form"></div>'+'<div class="red">'+__("Your current information will be lost once import is completed.")+'</div>'+'</div>')}
Service_64.Service.UIBuilder.buildLayout({type:"VerticalLayout",css:{margin:"10px 0",textAlign:"left"},children:[{type:"Label",text:__("URL of a website to import")},{type:"TextField",id:"importUrl",value:url,attr:{placeholder:"http://..."},on:{"keyup paste cut change":function(){if(_this.importFields.importUrl&&_this.importFields.verification)
_this.importFields.verification.setDomainName(_this.getDomain(_this.importFields.importUrl.getValue()));}}},{type:CustomContainer_16.CustomContainer,css:{marginTop:15},content:(0,jquery_125.default)('<div class="alert alert-danger" style="margin-bottom: 0;"/>').text(__("Unable to confirm that you are owner of %s").replace("%s",this.getDomain(url))),ignore:!showVerificationMethods},{type:WebsiteImportVerificationOptionsControl,id:"verification",css:{marginTop:30,marginBottom:30},domain:this.getDomain(url),ignore:!BuilderConfig_33.wbConfig.importVerification.required,visible:showVerificationMethods||!BuilderConfig_33.wbConfig.importVerification.usesApi},{type:"HorizontalLayout",ignore:!BuilderConfig_33.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Pages"},{type:"TextField",value:10,id:"maxPages"}]},{type:"HorizontalLayout",ignore:!BuilderConfig_33.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Files"},{type:"TextField",value:1000,id:"maxFiles"}]},{type:"HorizontalLayout",ignore:!BuilderConfig_33.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Gallery Size (MB)"},{type:"TextField",value:50,id:"maxGallerySize"}]},{type:"HorizontalLayout",ignore:!BuilderConfig_33.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Image Size (MB)"},{type:"TextField",value:3,id:"maxImageSize"}]},{type:"HorizontalLayout",ignore:!BuilderConfig_33.wbConfig.devTestMode,css:{marginTop:5},children:[{type:"Label",text:"Max Document Size (MB)"},{type:"TextField",value:20,id:"maxDocumentSize"}]}]},$dlg.find(".website-import-form"),this.importFields);var applyBtnId=showVerificationMethods?__("Confirm and import"):__("Yes, import website");Confirm_2.Confirm.showDialog(__("Import"),$dlg,[{title:showVerificationMethods?__('Cancel'):__("No, keep current website"),func:function(){if(_this.onCancel)
_this.onCancel();}},{title:applyBtnId,cssClass:"btn-danger",noClose:!1,validateFunc:(function(){var url=this.importUrl.getValue();this.importUrl.getElem().removeClass("has-error");if(url===""){this.importUrl.getElem().addClass("has-error");return!1}
if(!/^https?:\/\//.test(url))
url="http://"+url;if(!thisImporter.checkUrl(url)){this.importUrl.getElem().addClass("has-error");return!1}
this.importUrl.setValue(url);return!0}).bind(this.importFields),func:(function($dlg,dialog){var data=new WebsiteImportOptions();data.url=this.importUrl.getValue();if(BuilderConfig_33.wbConfig.devTestMode){var val=void 0;val=Math.floor(parseFloat(this.maxPages.getValue()));if(!isNaN(val)&&val>0)
data.maxPages=val;val=Math.floor(parseFloat(this.maxFiles.getValue()));if(!isNaN(val)&&val>=0)
data.maxFiles=val;val=Math.floor(parseFloat(this.maxGallerySize.getValue())*1024*1024);if(!isNaN(val)&&val>=0)
data.maxGallerySize=val;val=Math.floor(parseFloat(this.maxImageSize.getValue())*1024*1024);if(!isNaN(val)&&val>=0)
data.maxImageSize=val;val=Math.floor(parseFloat(this.maxDocumentSize.getValue())*1024*1024);if(!isNaN(val)&&val>=0)
data.maxDocumentSize=val}
if("wb_builder" in window&&typeof wb_builder.save==="function"){dialog.setLoading(!0);wb_builder.save(!1,function(){dialog.setLoading(!1);dialog.setVisible(!1);thisImporter.importWebsite(data,1,!0)},undefined,undefined,undefined,undefined,undefined,undefined,undefined,!0)}else{dialog.setVisible(!1);thisImporter.importWebsite(data,1,!0)}}).bind(this.importFields,$dlg)}]);if(Confirm_2.Confirm.dialog){Confirm_2.Confirm.dialog.setSizeClass("modal-md");Confirm_2.Confirm.dialog.setCenterButtons(!0)}};WebsiteImporterModule.DEFAULT_DOMAIN="your-imported-site.com";return WebsiteImporterModule}());exports.WebsiteImporter=new WebsiteImporterModule();Service_64.Service.websiteImporter=exports.WebsiteImporter});define("js/core/BuilderConfig",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.applyConfig=exports.wbConfig=void 0;var BuilderConfig=(function(){function BuilderConfig(){this.adminMode=!1;this.isSuperAdmin=!1;this.devTestMode=!1;this.devDebugMode=!1;this.testMode=!1;this.isComposer=!1;this.isTestModeByHost=!1;this.hasBetaTag=!1;this.commerceAvailable=!1;this.unbrandedTestMode=!1;this.inactiveMode=!1;this.collaboration=null;this.isShareLinkUser=!1;this.b2b2c=null;this.builderFreePlan=!1;this.enableTemplateChooserWizard=!1;this.defaultToTemplateChooserCategory='';this.ai={visible:!1,enabled:!1,enabledGeneric:!1,sameKey:!1,};this.websiteInfo=null;this.builderUserId=0;this.builderUserName='';this.builderUserAdmin=!1;this.builderIdDomain='';this.baseDomain='';this.websitesUrl='';this.isModRewrite=!0;this.routeGetKey="route";this.httpProtocol=((location.protocol&&location.protocol==='https:')?'https':'http');this.isRtl=!1;this.baseUrl="";this.langSwapBaseUrl="";this.lnBaseUrl="";this.fileBaseUrl="";this.upgradeUrl="";this.flowUrl="";this.jsLibsPath="";this.loginHash="";this.secureToken="";this.sessUniqKey="";this.isB2C=!1;this.planName=null;this.b2cDomainsUrl='';this.b2cShareUrl='';this.b2cHelpUrl='';this.premiumButtonType="";this.isEnterprise=!1;this.whiteLabel={builder:!1,title:null,logo:null,logoMobile:null,defaultLogo:null,defaultLogoNoTheme:null,defaultLogoMobile:null,};this.hideImport=!1;this.enableImport=!1;this.websiteImportStatus=null;this.runningBackendTasks=[];this.importVerification={required:!1,usesApi:!1,};this.forceLocalFonts=!1;this.defaultImagePixelDensity=1;this.locale='';this.langCode='';this.tr={};this.availableLanguages=[];this.availableLanguagesIndex=null}
BuilderConfig.prototype.__txt=function(key){return(key in this.tr)?this.tr[key]:key};BuilderConfig.prototype.getLanguageByLocale=function(locale){if(!locale)
return null;for(var i=0,lang=void 0;(lang=this.availableLanguages[i]);i++){if(lang.locale===locale){return lang}}
return null};BuilderConfig.prototype.getLanguageByCode=function(code){if(!code)
return null;for(var i=0,lang=void 0;(lang=this.availableLanguages[i]);i++){if(lang.code===code){return lang}}
return null};BuilderConfig.prototype.getCountryCode=function(langCode){for(var i=0,lang=void 0;(lang=this.availableLanguages[i]);i++){if(lang.code===langCode){if(lang.countryCode==='us')
return'gb';if(lang.countryCode==='cs')
return'rs';if(lang.countryCode==='ct')
return'es-ct';if(lang.countryCode==='gb')
return'gb-wls';if(lang.countryCode==='gl')
return'gal';if(lang.countryCode==='ae')
return'eg';if(lang.code==='myv')
return'ru-mo';if(lang.code==='ast')
return'es-ast';return lang.countryCode}}
return langCode};BuilderConfig.prototype.getLanguageCodeIndex=function(){if(!this.availableLanguagesIndex){this.availableLanguagesIndex={};for(var i=0,lang=void 0;(lang=exports.wbConfig.availableLanguages[i]);i++){if(lang.code){this.availableLanguagesIndex[lang.code]=lang}}}
return this.availableLanguagesIndex};BuilderConfig.prototype.getUrl=function(route,params,noTs,noLh,noSess){return this.baseUrl+this.getUri(route,params,noTs,noLh,noSess)};BuilderConfig.prototype.getRawUrl=function(route,params){return this.baseUrl+this.getUri(route,params,!0,!0,!0)};BuilderConfig.prototype.getLangSwapUrl=function(langCode,route,params){if(route===void 0){route=''}
return(langCode?this.langSwapBaseUrl.replace('__LANG_SWAP__',langCode):this.baseUrl)+this.getUri(route,params,!0,!0,!0)};BuilderConfig.prototype.getLnUrl=function(route,params,noTs,noLh,noSess){return this.lnBaseUrl+this.getUri(route,params,noTs,noLh,noSess)};BuilderConfig.prototype.getRawLnUrl=function(route,params){return this.getLnUrl(route,params,!0,!0,!0)};BuilderConfig.prototype.getFileUrl=function(path){return this.fileBaseUrl+path};BuilderConfig.prototype.getUri=function(route,params,noTs,noLh,noSess){var uri="";if(!params||typeof(params)!=='object'){params={}}
if(this.isModRewrite){uri+=route?route:""}else if(this.routeGetKey){params[this.routeGetKey]=route;uri+="?"+this.routeGetKey+"="+route}
if(!noTs){params.ts=""+(new Date()).getTime()}
if(!noLh){params.lh=this.loginHash;params.st=this.secureToken}
if(!noSess){params.sess=this.sessUniqKey}
var parts=[];for(var name_8 in params){parts.push(encodeURIComponent(name_8)+'='+encodeURIComponent(params[name_8]))}
var qs=parts.join('&');if(qs.length>0)
uri+=((uri.indexOf('?')>=0)?'&':'?')+qs;return uri};BuilderConfig.prototype.getLoginHash=function(){return this.loginHash};BuilderConfig.prototype.getLogoUrl=function(noTheme){if(noTheme===void 0){noTheme=!1}
return this.whiteLabel.logo?(this.getRawUrl('builder-logo')):((noTheme?this.whiteLabel.defaultLogoNoTheme:this.whiteLabel.defaultLogo)||'')};BuilderConfig.prototype.getLogoMobileUrl=function(){return this.whiteLabel.logoMobile?this.getRawUrl('builder-logo',{'mobile':'1'}):(this.whiteLabel.defaultLogoMobile&&!this.whiteLabel.logo?this.whiteLabel.defaultLogoMobile:'')};BuilderConfig.prototype.hasUpgradeAction=function(){return(this.upgradeUrl||(this.b2b2c&&this.b2b2c.loginUrl))?!0:!1};BuilderConfig.prototype.getB2B2CLoginUrl=function(loginOnly){if(loginOnly===void 0){loginOnly=!1}
if(!this.b2b2c||!this.b2b2c.loginUrl)
return'';return this.b2b2c.loginUrl.replace('__LANG__',this.langCode).replace('__DOMAIN__',this.baseDomain||this.builderIdDomain).replace('__FREE_PLAN__',this.builderFreePlan?'1':'0').replace('__ACTION__',loginOnly?'login':'upgrade').replace('__LH__',this.loginHash)};BuilderConfig.prototype.showB2B2CProfile=function(){return(this.b2b2c&&this.b2b2c.loginUrl&&this.b2b2c.planTier>0&&!this.isShareLinkUser)?!0:!1};return BuilderConfig}());exports.wbConfig=new BuilderConfig();function applyConfig(data){for(var k in data){if(k in exports.wbConfig&&typeof exports.wbConfig[k]!=="function"){exports.wbConfig[k]=data[k]}}
var checkProtoProps=['baseUrl','flowUrl','lnBaseUrl','fileBaseUrl','langSwapBaseUrl'];var proto=exports.wbConfig.httpProtocol+'://';for(var _i=0,checkProtoProps_1=checkProtoProps;_i<checkProtoProps_1.length;_i++){var prop=checkProtoProps_1[_i];if(exports.wbConfig[prop]&&typeof(exports.wbConfig[prop])==='string'&&/^https?:\/\//i.test(exports.wbConfig[prop])){exports.wbConfig[prop]=exports.wbConfig[prop].replace(/^https?:\/\//i,proto)}}}
exports.applyConfig=applyConfig});define("js/element/ResizeHandle",["require","exports","jquery"],function(require,exports,jquery_126){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ResizeHandle=void 0;var ResizeHandle=(function(){function ResizeHandle(elem,rawElements,onStop,noSnapping){if(onStop===void 0){onStop=null}
if(noSnapping===void 0){noSnapping=!1}
var _this=this;this.elem=elem;this.rawElements=rawElements;this.onStop=onStop;this.noSnapping=noSnapping;this.oriPosition={left:0,top:0};this.oriSize={width:0,height:0};this.axis="";this.elements=[];this.isResizing=!1;this.useXAxis=!0;elem.resizableExt({handles:'n, e, s, w, ne, se, sw, nw',extHandles:!0,minWidth:64,minHeight:64,start:function(e,ui){var target=(0,jquery_126.default)(e.originalEvent.target);var axis=(ui.hDirection?"x":"")+(ui.vDirection?"y":"");_this.onResizeStart(ui.originalPosition,ui.originalSize,axis,_this.rawElements);e.stopPropagation()},resize:function(e,ui){_this.onResize(ui.position,ui.size);e.stopPropagation()},stop:function(e,ui){_this.onResizeStop(ui.position,ui.size);e.stopPropagation()},})}
ResizeHandle.prototype.updateElements=function(elements){this.rawElements=elements};ResizeHandle.prototype.setUseXAxis=function(useXAxis){if(!this.useXAxis&&useXAxis){this.useXAxis=!0;this.elem.resizableExt('option','handles','n, e, s, w, ne, se, sw, nw')}else if(this.useXAxis&&!useXAxis){this.useXAxis=!1;this.elem.resizableExt('option','handles','n, s')}};ResizeHandle.prototype.onResizeStart=function(oriPosition,oriSize,axis,elements){if(this.isResizing)
return;this.oriPosition=oriPosition;this.oriSize=oriSize;this.axis=axis;wb_builder.bodyInstance.cacheBounds();this.elements=[];for(var _i=0,elements_15=elements;_i<elements_15.length;_i++){var element=elements_15[_i];this.elements.push({element:element,position:element.getLocation(!0),size:element.getSizeInPixels(),});if(!this.noSnapping)
element.snapHandle.handleResizableStart({type:'resizestart'},{element:element.elem});element.onStartResize()}
this.isResizing=!0};ResizeHandle.prototype.onResizeStop=function(position,size){if(!this.isResizing)
return;this.onResize(position,size,!0);this.isResizing=!1;if(this.onStop)
this.onStop();};ResizeHandle.prototype.onResize=function(position,size,last){if(last===void 0){last=!1}
if(!this.isResizing)
return;var pw=size.width/this.oriSize.width;var ph=size.height/this.oriSize.height;for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];var rpx=elem.position.left-this.oriPosition.left;var rpy=elem.position.top-this.oriPosition.top;var keepCrossAxis=!0;var dx=position.left+rpx*pw;var dy=position.top+rpy*ph;var dw=elem.size.width*pw;var dh=elem.size.height*ph;var isPicture=elem.element.className=='Picture';if(isPicture){keepCrossAxis=!1;if(Math.abs(pw-1)>=Math.abs(ph-1)){dw=elem.size.width*pw;dh=dw*elem.size.height/elem.size.width}else{dh=elem.size.height*ph;dw=dh*elem.size.width/elem.size.height}
if(position.left+size.width<dx+dw){dw=dw-((dx+dw)-(position.left+size.width));dh=dw*elem.size.height/elem.size.width}else if(position.top+size.height<dy+dh){dh=dh-((dy+dh)-(position.top+size.height));dw=dh*elem.size.width/elem.size.height}}
var newPosition={left:dx,top:dy};var newSize={width:(this.axis!=="y"||!keepCrossAxis)?dw:null,height:(this.axis!=="x"||!keepCrossAxis)?dh:null};if(!this.noSnapping){if(last){elem.element.snapHandle.handleResizableStop({type:'resizestop'},{position:newPosition,size:newSize})}else{elem.element.snapHandle.handleResizableResize({type:'resize'},{position:newPosition,size:newSize})}}
elem.element.setLocation(newPosition.left,newPosition.top);elem.element.setSize(newSize.width,newSize.height);elem.element.updateContentSize({originalElement:{axis:isPicture?"xy":this.axis},originalPosition:newPosition,position:newPosition,});if(last){elem.element.onStopResize()}else{elem.element.onResize()}}};return ResizeHandle}());exports.ResizeHandle=ResizeHandle});define("js/element/GroupHandle",["require","exports","jquery","js/Service","js/element/Controls","js/element/ControlsButton","js/element/MovePushHandle","js/ContextMenu","js/element/ResizeHandle","js/UserInput","js/ElementMeasurementHelpers","js/BuilderEvent","js/util/ClipboardApi","js/element/SnapHandle"],function(require,exports,jquery_127,Service_65,Controls_4,ControlsButton_3,MovePushHandle_1,ContextMenu_5,ResizeHandle_1,UserInput_6,ElementMeasurementHelpers_2,BuilderEvent_27,ClipboardApi_1,SnapHandle_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GroupHandle=exports.handleSelect=exports.handleInteract=exports.ungroupElement=exports.groupElements=exports.groupUnhideByElement=exports.groupEdit=exports.updateGroupBounds=exports.unselectGroups=exports.initGroups=exports.getRootGroupId=exports.resolveGroupPath=exports.findGroupById=exports.printGroupStructure=void 0;var groupHandles={};var groupHandleIdx=0;var eventsRegistered=!1;var selectedGroups={};var selectedGroupsCount=0;var groupsEditable={};function printGroupStructure(groups,lvl){if(groups===void 0){groups=null}
if(lvl===void 0){lvl=0}
if(!groups)
groups=groupHandles;for(var groupId in groups){var group=groups[groupId];if(lvl==0&&group.parentGroup)
continue;var cc=lvl,indent='';while(cc>0){cc--;indent+='  '};console.log(indent,group.id,' -> ',group.parentGroup?group.parentGroup.id:null);for(var _i=0,_a=group.elements;_i<_a.length;_i++){var element=_a[_i];console.log(indent+' - ',element.getClassType(),element.id)}
printGroupStructure(group.childGroups,lvl+1)}}
exports.printGroupStructure=printGroupStructure;function findGroupById(id){return(id in groupHandles)?groupHandles[id]:null}
exports.findGroupById=findGroupById;function resolveGroupPath(groupId){var group=groupId?findGroupById(groupId):null;if(group){var path=[];path.push(group.id);while(group.parentGroup){group=group.parentGroup;path.push(group.id)}
return path}
return null}
exports.resolveGroupPath=resolveGroupPath;function getRootGroupId(groupId){var group=groupId?findGroupById(groupId):null;if(group){while(group.parentGroup)
group=group.parentGroup;return group.id}
return null}
exports.getRootGroupId=getRootGroupId;function validElementGroup(element){var groupId=element.getRootGroupId();if(!groupId)
return null;var group=findGroupById(groupId);if(!group){return null}
return group}
function initGroups(elements,incremental){if(incremental===void 0){incremental=!1}
if(!incremental)
dispose();if(!eventsRegistered){eventsRegistered=!0;BuilderEvent_27.GlobalEvents.on('page.load',function(){return updateGroupBounds()});(0,jquery_127.default)(window).on('resize',function(){return updateGroupBounds()})}
if(elements.length==0)
return;var groupIdMappings={};var maxLevel=0;for(var _i=0,elements_16=elements;_i<elements_16.length;_i++){var elem=elements_16[_i];if(!elem.groupPath)
continue;if(maxLevel<elem.groupPath.length)
maxLevel=elem.groupPath.length}
for(var lvl=0;lvl<maxLevel;lvl++){for(var _a=0,elements_17=elements;_a<elements_17.length;_a++){var elem=elements_17[_a];if(!elem.groupPath||elem.groupPath.length<=lvl)
continue;var groupId=elem.groupPath[lvl];var group=null;if(groupId in groupIdMappings){elem.groupPath[lvl]=groupIdMappings[groupId];group=findGroupById(elem.groupPath[lvl]);if(!group)
continue}else{group=new GroupHandle();elem.groupPath[lvl]=groupIdMappings[groupId]=group.id}
if(lvl==0){group.addElement(elem)}else{var childGroup=findGroupById(elem.groupPath[lvl-1]);if(!childGroup)
continue;group.addGroup(childGroup)}}}
for(var _b=0,elements_18=elements;_b<elements_18.length;_b++){var elem=elements_18[_b];elem.groupPath=null}
var m;for(var key in groupHandles){if((m=key.match(/^grp([0-9]+)$/))){var idx=parseInt(m[1],10);if(groupHandleIdx<idx)
groupHandleIdx=idx}
groupHandles[key].setControlsVisible(!0)}
BuilderEvent_27.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_27.SiteStructureChangedBuilderEvent())}
exports.initGroups=initGroups;function dispose(){var ids=[];for(var key in groupHandles){ids.push(key)}
for(var _i=0,ids_1=ids;_i<ids_1.length;_i++){var key=ids_1[_i];groupHandles[key].dispose()}}
function unselectGroups(){for(var key in selectedGroups){selectedGroups[key].setSelected(!1)}}
exports.unselectGroups=unselectGroups;function updateGroupBounds(){var first=!0;for(var key in groupHandles){groupHandles[key].updateBounds(!1,first);first=!1}}
exports.updateGroupBounds=updateGroupBounds;function groupStopEditing(groups,skipGroup,remKeys){for(var groupId in groups){var group=groups[groupId];if(group===skipGroup)
continue;if(group.isEditing()){remKeys.push(groupId);group.setEditing(!1);groupStopEditing(group.childGroups,skipGroup,remKeys)}}}
function groupEdit(group){if(!group||!group.parentGroup){for(var eGroupId in groupsEditable){groupsEditable[eGroupId].setEditing(!1)}
groupsEditable={};if(!group)
return}
groupsEditable[group.id]=group;group.setEditing(!0);if(group.parentGroup){var remKeys=[];groupStopEditing(group.parentGroup.childGroups,group,remKeys);for(var _i=0,remKeys_1=remKeys;_i<remKeys_1.length;_i++){var remKey=remKeys_1[_i];delete groupsEditable[remKey]}}
group.setSelected(!1)}
exports.groupEdit=groupEdit;function groupUnhideByElement(element){var group=validElementGroup(element);if(!group)
return;element.cacheBounds();group.unhide();group.updateBounds()}
exports.groupUnhideByElement=groupUnhideByElement;function groupElements(elements){if(elements.length==0)
return;var groups=[];for(var groupId in selectedGroups){groups.push(selectedGroups[groupId])}
Service_65.Service.element.unselectAll();var freeElements=[];for(var _i=0,elements_19=elements;_i<elements_19.length;_i++){var element=elements_19[_i];var isFree=!0;for(var _a=0,groups_2=groups;_a<groups_2.length;_a++){var group=groups_2[_a];if(group.containsElement(element)){isFree=!1;break}}
if(isFree)
freeElements.push(element);}
var newGroup=new GroupHandle();newGroup.addElements(freeElements,groups);newGroup.setControlsVisible(!0);BuilderEvent_27.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_27.SiteStructureChangedBuilderEvent())}
exports.groupElements=groupElements;function ungroupElement(element,batch){if(batch===void 0){batch=!1}
var group=validElementGroup(element);if(!group){element.groupId=null;element.groupPath=null;return}
group.removeElement(element);if(group.isEmpty())
group.dispose();if(!batch){BuilderEvent_27.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_27.SiteStructureChangedBuilderEvent())}}
exports.ungroupElement=ungroupElement;function handleInteract(element){var group=element.groupId?findGroupById(element.groupId):null;if(!group){groupEdit(null);return!1}
if(group.isEditing())
return!1;groupEdit(null);if(group.isControlsVisible())
return!1;group.setControlsVisible(!0);return!0}
exports.handleInteract=handleInteract;function handleSelect(element){var group=validElementGroup(element);if(!group||group.isEditing())
return!1;group.setSelected(!0);return!0}
exports.handleSelect=handleSelect;Service_65.Service.group={updateGroupBounds:updateGroupBounds,initGroups:initGroups,groupEdit:groupEdit,groupUnhideByElement:groupUnhideByElement,handleSelect:handleSelect,unselectGroups:unselectGroups,getRootGroupId:getRootGroupId,groupElements:groupElements,resolveGroupPath:resolveGroupPath,handleInteract:handleInteract,ungroupElement:ungroupElement,};var GroupHandle=(function(){function GroupHandle(){var _this=this;this.parentGroup=null;this.childGroups={};this.elements=[];this.parent=null;this.selected=!1;this.isLocked=!1;this.isInserted=!1;this.editing=!1;this.zIndex=0;this.id='grp'+(++groupHandleIdx);this.controls=new Controls_4.Controls(!0,!0,undefined,function(selection){var res=_this.controls.elem.resizableExt('instance');if(!res)
return;if(selection){res.attachHandles(selection.getResizeHandles())}else{res.detachHandles()}}).addButton((this.moveBtn=new ControlsButton_3.ControlsButton('wb_move_btn','glyphicon glyphicon-move',ControlsButton_3.ControlsButtonAlign.LEFT_TOP,'move'))).addButton((this.movePushBtn=new ControlsButton_3.ControlsButton('wb_controls_btn','fa fa-sort',ControlsButton_3.ControlsButtonAlign.CENTER_TOP,'ns-resize'))).layout();(this.movePushHandle=new MovePushHandle_1.MovePushHandle(this.elements,!0,wb_builder,function(){_this.updateBounds(!0);_this.setMeasurementHelpersVisible(!1)})).bindToElement(this.movePushBtn.elem);this.controls.setHover(!1);this.controls.setVisible(!0);this.controls.setSelected(!1);this.controls.onDblClick(function(){return groupEdit(_this)});this.moveHandle=new MovePushHandle_1.MovePushHandle(this.elements,!1,wb_builder,function(){_this.updateBounds(!0);_this.setMeasurementHelpersVisible(!1)});if(this.controls.cover){this.moveHandle.bindToElement(this.controls.cover)}
this.controls.elem.on('click',function(e){(0,ContextMenu_5.hideAllContextMenus)();if((_this.parentGroup&&!_this.parentGroup.isEditing())||(!_this.parentGroup&&!_this.isEditing())){groupEdit(null)}
if(_this.parentGroup&&_this.parentGroup.isEditing()){for(var groupId in _this.parentGroup.childGroups){var group=_this.parentGroup.childGroups[groupId];if(group!==_this&&group.isEditing())
group.setEditing(!1);}}
if(!_this.moveHandle.moveStarted){if(!UserInput_6.UserInput.hotKeysMod.ctrl){Service_65.Service.element.unselectAll();_this.setSelected(!0)}else{_this.setSelected(!_this.selected)}}
e.stopPropagation()}).on('mouseover',function(e){_this.setMeasurementHelpersVisible(!0);if(!_this.isSelected())
_this.controls.setHover(!0);e.stopPropagation();return!1}).on('mouseout',function(e){_this.setMeasurementHelpersVisible(!1);if(!_this.isSelected())
_this.controls.setHover(!1);e.stopPropagation();return!1});this.resizeHandle=new ResizeHandle_1.ResizeHandle(this.controls.elem,this.elements,function(){return _this.updateBounds(!0)},!0);this.initContextMenu();groupHandles[this.id]=this;this.updateBounds(!0)}
GroupHandle.prototype.setMeasurementHelpersVisible=function(visible){if(!SnapHandle_2.config.showMeasurementHelpers)
return;if(visible){if(!this.measurementHelpers){this.measurementHelpers=new ElementMeasurementHelpers_2.ElementMeasurementHelpers(this)}
this.measurementHelpers.show()}else if(this.measurementHelpers){this.measurementHelpers.hide();this.measurementHelpers=null}};GroupHandle.prototype.getBounds=function(getOffsetInParent){var bounds=this.controls.getBounds();return __assign(__assign({},bounds),{pageLeft:bounds.pageLeft-window.scrollX,pageTop:bounds.pageTop-window.scrollY})};GroupHandle.prototype.getParentWidth=function(fast){return this.parent?this.parent.getWidthInPixels():0};GroupHandle.prototype.getParentHeight=function(fast){return this.parent?this.parent.getHeightInPixels():0};GroupHandle.prototype.getAffectingElements=function(){var elements=this.parent?this.parent.getChildren():[];var affectingElements=[];for(var _i=0,elements_20=elements;_i<elements_20.length;_i++){var elem=elements_20[_i];var skip=!1;for(var _a=0,_b=this.elements;_a<_b.length;_a++){var localElem=_b[_a];if(localElem!==elem)
continue;skip=!0;break}
if(skip||elem.isHidden()||elem.isHidden(!0))
continue;affectingElements.push(new ElementMeasurementHelpers_2.MeasurableElement(elem))}
return affectingElements};GroupHandle.prototype.dispose=function(){this.setEditing(!1);this.setSelected(!1);var parentGroup=this.parentGroup;if(parentGroup)
parentGroup.removeGroup(this,!1);for(var groupId in this.childGroups){var group=this.childGroups[groupId];this.removeGroup(group,!1);if(parentGroup)
parentGroup.addGroup(group,!1);}
var elements=__spreadArray([],this.elements,!0);for(var _i=0,elements_21=elements;_i<elements_21.length;_i++){var element=elements_21[_i];this.removeElement(element,!1);if(parentGroup)
parentGroup.addElement(element,!1);}
if(parentGroup){parentGroup.updateZIndex();parentGroup.updateElements()}
delete groupHandles[this.id];this.contextMenu.unbind();this.contextMenu.dispose();this.controls.dispose();this.parent=null};GroupHandle.prototype.initContextMenu=function(){var _this=this;var menu=this.contextMenu=new ContextMenu_5.ContextMenu('wb_group_context_menu');menu.addItem('copy',__('Copy'),function(){var data=[],elements=_this.getElements();for(var _i=0,elements_22=elements;_i<elements_22.length;_i++){var elem=elements_22[_i];data.push(elem.buildClipboardData())}(0,ClipboardApi_1.storeItemsToClipboard)(data)},!1,!1,null,'glyphicon glyphicon-list-alt',!0);menu.addItem('paste',__('Paste'),null,!1,!1,null,'glyphicon glyphicon-download-alt');menu.addSeparator();menu.addItem('lock',__('Lock'),function(){wb_builder.setPageModified(!0);_this.setLocked(!_this.isLocked)},!1,!1,null,'glyphicon glyphicon-lock',!1);var groupMi=menu.addItem('group',__('Group'),function(){wb_builder.setPageModified(!0);var elements=[];var selected=Service_65.Service.element.getSelected();for(var k in selected)
elements.push(selected[k]);groupElements(elements)},!1,!1,null,'fa fa-object-group',!1);var ungroupMi=menu.addItem('ungroup',__('Ungroup'),function(){wb_builder.setPageModified(!0);_this.dispose();for(var groupId in selectedGroups)
selectedGroups[groupId].dispose();BuilderEvent_27.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_27.SiteStructureChangedBuilderEvent())},!1,!1,null,'fa fa-object-ungroup',!1);menu.addSeparator();var orderMi=new ContextMenu_5.ContextMenu('');orderMi.addItem('indexMax',__('Bring to front'),function(){return _this.changeOrder('top')},!1,!1,null,'glyphicon glyphicon-arrow-up');orderMi.addItem('indexMin',__('Send to back'),function(){return _this.changeOrder('bottom')},!1,!1,null,'glyphicon glyphicon-arrow-down');orderMi.addItem('indexUp',__('Bring forward'),function(){return _this.changeOrder('up')},!1,!1,null,'glyphicon glyphicon-arrow-up');orderMi.addItem('indexDown',__('Send backwards'),function(){return _this.changeOrder('down')},!1,!1,null,'glyphicon glyphicon-arrow-down');menu.addItem('order',__('Order'),orderMi,!1,!1,null,'glyphicon glyphicon-list');menu.addItem('remove',__('Remove'),null,!1,!1,null,'glyphicon glyphicon-remove',!1);menu.bind(this.movePushBtn.elem,!0);menu.pasiveBind(this.controls.elem);menu.onShow=function(){if(!_this.selected){Service_65.Service.element.unselectAll();_this.setSelected(!0)}
if(_this.parent){Service_65.Service.paste.addPaste(menu,_this.parent,null,!0)}
if(_this.elements.length>0){Service_65.Service.element.updateContextMenuRemove(menu,_this.elements[0])}
var multiple=selectedGroupsCount;var selectedElements=Service_65.Service.element.getSelected();for(var elementId in selectedElements){if(!selectedElements[elementId].groupId){multiple++}}
if(multiple>1){ungroupMi.hide();groupMi.show()}else{groupMi.hide();ungroupMi.show()}}};GroupHandle.prototype.changeOrder=function(dir){if(!this.parent)
return;wb_builder.setPageModified(!0);var sortedElements=__spreadArray([],this.elements,!0);if(dir=='bottom'||dir=='up'){sortedElements.sort(function(a,b){var av=a.getZIndex(),bv=b.getZIndex();return(av==bv)?0:((av>bv)?-1:1)})}else{sortedElements.sort(function(a,b){var av=a.getZIndex(),bv=b.getZIndex();return(av==bv)?0:((av<bv)?-1:1)})}
for(var _i=0,sortedElements_1=sortedElements;_i<sortedElements_1.length;_i++){var elem=sortedElements_1[_i];this.parent.zIndexHandle.changeLayer(elem,dir);this.updateZIndex()}};GroupHandle.prototype.updateBounds=function(noHelpers,noUpdateCache){if(noHelpers===void 0){noHelpers=!1}
if(noUpdateCache===void 0){noUpdateCache=!1}
this.controls.updateBoundsFromElements(this.getElements(),noUpdateCache);if(!noHelpers&&this.measurementHelpers)
this.measurementHelpers.update();};GroupHandle.prototype.updateElements=function(){var elements=this.getElements();this.movePushHandle.updateElements(elements);this.moveHandle.updateElements(elements);this.resizeHandle.updateElements(elements)};GroupHandle.prototype.isControlsVisible=function(){return this.controls.isSelected()};GroupHandle.prototype.setControlsVisible=function(visible){if(visible&&!this.controls.isSelected()){this.updateBounds(!0)}
this.controls.setHover(visible)};GroupHandle.prototype.isEditing=function(){return this.editing};GroupHandle.prototype.setEditing=function(editing){if(!this.editing&&editing){for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.controls.setResizeHandlesVisible(!0)}
this.updateZIndex(!0);this.controls.setOutlineActive(!0);this.editing=!0}else if(this.editing&&!editing){for(var _b=0,_c=this.elements;_b<_c.length;_b++){var elem=_c[_b];elem.controls.setResizeHandlesVisible(!1)}
this.updateZIndex(!1);this.controls.setOutlineActive(!1);this.editing=!1}};GroupHandle.prototype.isSelected=function(){return this.selected};GroupHandle.prototype.setSelected=function(selected,elementsOnly){if(elementsOnly===void 0){elementsOnly=!1}
if(!elementsOnly){this.controls.setSelected(selected);if(selected){for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.setSelected(!1,!0,!1)}
this.controls.setHover(!0);if(!(this.id in selectedGroups)){selectedGroups[this.id]=this;selectedGroupsCount++}}else{this.controls.setHover(!1);if(this.id in selectedGroups){delete selectedGroups[this.id];selectedGroupsCount--}}
this.selected=selected}
for(var _b=0,_c=this.elements;_b<_c.length;_b++){var elem=_c[_b];elem.setSelected(selected,!0,!0)}
for(var groupId in this.childGroups){this.childGroups[groupId].setSelected(selected,!0)}};GroupHandle.prototype.calcZIndex=function(backwards){if(backwards===void 0){backwards=!1}
var zIndex=-1;if(backwards){for(var _i=0,_a=this.elements;_i<_a.length;_i++){var element=_a[_i];if(zIndex<0||element.getZIndex()<=zIndex){zIndex=Math.max(element.getZIndex()-1,0)}}
for(var groupId in this.childGroups){var groupZIndex=this.childGroups[groupId].calcZIndex(backwards);if(zIndex<0||groupZIndex<=zIndex){zIndex=Math.max(groupZIndex-1,0)}}}else{for(var _b=0,_c=this.elements;_b<_c.length;_b++){var element=_c[_b];if(element.getZIndex()>=zIndex)
zIndex=element.getZIndex()+1}
for(var groupId in this.childGroups){var groupZIndex=this.childGroups[groupId].calcZIndex(backwards);if(groupZIndex>=zIndex)
zIndex=groupZIndex+1}}
if(zIndex<0)
zIndex=0;return zIndex};GroupHandle.prototype.updateZIndex=function(backwards){if(backwards===void 0){backwards=!1}
var zIndex=this.calcZIndex(backwards);if(this.zIndex!=zIndex){this.zIndex=zIndex;this.controls.elem.css('zIndex',this.zIndex)}};GroupHandle.prototype.getElements=function(){var elements=__spreadArray([],this.elements,!0);for(var groupId in this.childGroups){var group=this.childGroups[groupId];var groupElements_2=group.getElements();for(var _i=0,groupElements_1=groupElements_2;_i<groupElements_1.length;_i++){var element=groupElements_1[_i];elements.push(element)}}
return elements};GroupHandle.prototype.containsElement=function(element){var elements=this.getElements();return(elements.indexOf(element)>=0)};GroupHandle.prototype.addGroup=function(group,updateThings){if(updateThings===void 0){updateThings=!0}
if(group.parentGroup===this)
return;if(group.parentGroup){group.parentGroup.removeGroup(group)}
group.parentGroup=this;this.childGroups[group.id]=group;if(!this.isInserted){if(group.parent){this.isInserted=!0;this.controls.attach(group.parent.container);this.parent=group.parent}}
if(updateThings){this.updateZIndex();this.updateElements()}};GroupHandle.prototype.addElement=function(element,updateThings){if(updateThings===void 0){updateThings=!0}
var idx=this.elements.indexOf(element);if(idx<0){var group=element.groupId?findGroupById(element.groupId):null;if(group)
group.removeElement(element);element.groupId=this.id;element.controls.setResizeHandlesVisible(!1);this.elements.push(element);if(!this.isInserted){var parent_28=element.getParent();if(parent_28){this.isInserted=!0;this.controls.attach(parent_28.container);this.parent=parent_28}}
if(updateThings){this.updateZIndex();this.updateElements()}}};GroupHandle.prototype.isEmpty=function(){return this.elements.length==0};GroupHandle.prototype.removeGroup=function(group,updateThings){if(updateThings===void 0){updateThings=!0}
if(group.parentGroup!==this)
return;group.parentGroup=null;if(group.id in this.childGroups){delete this.childGroups[group.id]}
if(updateThings){this.updateZIndex();this.updateElements()}};GroupHandle.prototype.removeElement=function(element,updateThings){if(updateThings===void 0){updateThings=!0}
var idx=this.elements.indexOf(element);if(element.groupId==this.id)
element.groupId=null;if(idx>=0){element.controls.setResizeHandlesVisible(!0);this.elements.splice(idx,1)}
if(updateThings){this.updateZIndex();this.updateElements()}};GroupHandle.prototype.addElements=function(elements,groups){var parentId=null;var parentGroup=null,groupParentIdIsSet=!1;for(var _i=0,elements_23=elements;_i<elements_23.length;_i++){var item=elements_23[_i];if(parentId&&item.parent&&parentId!=item.parent.id)
continue;if(item.parent&&item.parent.id)
parentId=item.parent.id;if(!groupParentIdIsSet){var group=item.groupId?findGroupById(item.groupId):null;if(group===this)
continue;groupParentIdIsSet=!0;parentGroup=group}
if((parentGroup&&parentGroup.id!=item.groupId)||(!parentGroup&&item.groupId))
continue;this.addElement(item,!1)}
for(var _a=0,groups_3=groups;_a<groups_3.length;_a++){var item=groups_3[_a];if(parentId&&item.parent&&parentId!=item.parent.id)
continue;if(!groupParentIdIsSet){if(item.parentGroup===this)
continue;groupParentIdIsSet=!0;parentGroup=item.parentGroup}
if(parentGroup!==item.parentGroup)
continue;this.addGroup(item,!1)}
if(parentGroup)
parentGroup.addGroup(this);this.updateZIndex();this.updateElements()};GroupHandle.prototype.onBeforeRemove=function(options){if(this.isLocked){options.preventRemoval=!0;return}
for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.onBeforeRemove(options);if(options.preventRemoval)
return}};GroupHandle.prototype.remove=function(options){if(!options||typeof options!=="object"){console.error("GroupHandle.remove() is called with invalid parameters");return}
for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.remove(options)}
this.dispose()};GroupHandle.prototype.hide=function(){if(this.isLocked)
return;for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.hide(!0,!0,!0)}
this.controls.setVisible(!1)};GroupHandle.prototype.unhide=function(){this.controls.setVisible(!0)};GroupHandle.prototype.setLocked=function(lock){var _this=this;this.isLocked=lock;for(var _i=0,_a=this.elements;_i<_a.length;_i++){var elem=_a[_i];elem.setLocked(lock)}
this.controls.setLocked(lock,function(){return _this.setLocked(!1)});this.contextMenu.setName('lock',lock?__('Unlock'):__('Lock'))};return GroupHandle}());exports.GroupHandle=GroupHandle});define("js/element/MovePushHandle",["require","exports","jquery","js/Service","js/util/EventUtil"],function(require,exports,jquery_128,Service_66,EventUtil_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MovePushHandle=void 0;function subOffset(off1,off2){off1.left-=off2.left;off1.top-=off2.top;return off1}
var commonOnUpInit=!1;var currentItem=null;var startHandle=null;function commonOnMove(e){var _a;if(!startHandle)
return;if(!startHandle.moveStarted){startHandle.start()}
if(!currentItem)
return;var elem=currentItem.element;var parentOffset=currentItem.parentOffset;var others=currentItem.others;var newPos=currentItem.newPos;var mpos=(0,EventUtil_11.posFromEvent)(e);var px=currentItem.useXAxis?(mpos.left-parentOffset.left-currentItem.offset.left):null;var py=mpos.top-parentOffset.top-currentItem.offset.top;if(currentItem.topLimit!==!1&&py<currentItem.topLimit)
py=currentItem.topLimit;elem.setLocation(px,py,!0);var spos={position:elem.getLocation(!0)};elem.snapHandle.handleDraggableDrag({type:'drag'},spos);(_a=spos.position,px=_a.left,py=_a.top);elem.setLocation(px,py,!0);if(currentItem.useXAxis)
newPos.left=px;newPos.top=py;var dx=currentItem.useXAxis?(currentItem.pos.left-px):0;var dy=currentItem.pos.top-py;var reqParentHeight=elem.getHeightInPixels()+py;for(var _i=0,others_1=others;_i<others_1.length;_i++){var oelem=others_1[_i];oelem.newPos.left=oelem.pos.left-dx;oelem.newPos.top=oelem.pos.top-dy;oelem.element.setLocation(oelem.newPos.left,oelem.newPos.top,!0);if(reqParentHeight<(oelem.element.getHeightInPixels()+oelem.newPos.top)){reqParentHeight=oelem.element.getHeightInPixels()+oelem.newPos.top}}
if(currentItem.onChange)
currentItem.onChange();var parent=elem.getParent();if(parent&&currentItem.updateParentSize){parent.updateSize(!1,0,!0);if(currentItem.parentHeight>0){var eParent=parent;var parentHeight=eParent.getHeightInPixels();if(currentItem.parentHeight<reqParentHeight){eParent.setSize(null,reqParentHeight)}else if(parentHeight>currentItem.parentHeight&&parentHeight>reqParentHeight){eParent.setSize(null,Math.max(currentItem.parentHeight,reqParentHeight))}}}
Service_66.Service.group.updateGroupBounds()}
function commonOnUp(e){if(!currentItem){startHandle=null;return}
wb_builder.setPageModified(!0);var parent=currentItem.element.getParent();if(parent)
parent.updateSize();var historyData=[];historyData.push({element:currentItem.element.id,pos:jquery_128.default.extend({},currentItem.pos),newPos:jquery_128.default.extend({},currentItem.newPos)});for(var _i=0,_a=currentItem.others;_i<_a.length;_i++){var oelem=_a[_i];historyData.push({element:oelem.element.id,pos:jquery_128.default.extend({},oelem.pos),newPos:jquery_128.default.extend({},oelem.newPos)})}
wb_builder.historyAdd('moveElements',historyData,function(data){for(var _i=0,_a=data.reverse();_i<_a.length;_i++){var item=_a[_i];var element=window.getElementById(item.element);if(!element){console.error("Unable to undo 'moveElement': element "+item.element+" not found.");continue}
element.setLocation(item.pos.left,item.pos.top)}
Service_66.Service.group.updateGroupBounds()},function(data){for(var _i=0,data_5=data;_i<data_5.length;_i++){var item=data_5[_i];var element=window.getElementById(item.element);if(!element){console.error("Unable to redo 'moveElement': element "+item.element+" not found.");continue}
element.setLocation(item.newPos.left,item.newPos.top)}
Service_66.Service.group.updateGroupBounds()});var elem=currentItem.element;elem.snapHandle.handleDraggableStop({type:'dragstop'},{position:elem.getLocation(!0)});if(currentItem.onChange)
currentItem.onChange();if(currentItem.handle.push){Service_66.Service.element.unselectAll();elem.setControlsVisible(!0)}
currentItem=null;startHandle=null}
var MovePushHandle=(function(){function MovePushHandle(elements,push,builder,onChange){if(push===void 0){push=!1}
if(onChange===void 0){onChange=null}
this.elements=elements;this.push=push;this.builder=builder;this.onChange=onChange;this.moveStarted=!1;this.startEvent=null;this.useXAxis=!1;this.useXAxis=!this.push;if(!commonOnUpInit){commonOnUpInit=!0;this.builder.body.on('mousemove touchmove',function(e){return commonOnMove(e)});this.builder.body.on('mouseup touchend touchcancel',function(e){return commonOnUp(e)})}}
MovePushHandle.prototype.updateElements=function(elements){this.elements=elements};MovePushHandle.prototype.bindToElement=function(elem){var _this=this;elem.on('mousedown touchstart',function(e){return _this.onDown(e)})};MovePushHandle.prototype.setUseXAxis=function(useXAxis){this.useXAxis=useXAxis};MovePushHandle.prototype.onDown=function(e){if(this.elements.length==0||this.elements[0].isLocked)
return;this.moveStarted=!1;this.startEvent=e;startHandle=this;e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();return!1};MovePushHandle.prototype.start=function(){if(!this.startEvent){startHandle=null;return}
this.moveStarted=!0;var e=this.startEvent;wb_builder.bodyInstance.cacheBounds();var element=this.elements[0];if(this.push||!element.isSelected()){Service_66.Service.element.unselectAll()}
element.setSelected(!0,!0,!0);var offset=element.getLocation();var gOffset=element.elem.offset();var mpos=(0,EventUtil_11.posFromEvent)(e);var topLimit=0;var otherLimitTop=offset.top;var otherElements=element.parent?element.parent.getChildren():[];var others=[];for(var i=1;i<this.elements.length;i++){var other=this.elements[i];var otherOffset=other.getLocation();others.push({element:other,pos:otherOffset,newPos:{left:otherOffset.left,top:otherOffset.top}})}
if(this.push){for(var _i=0,otherElements_2=otherElements;_i<otherElements_2.length;_i++){var other=otherElements_2[_i];if(other.isHidden()||other.isHidden(!0))
continue;var otherOffset=other.getLocation();var otherBottom=otherOffset.top+other.getHeightInPixels();if(otherBottom<offset.top&&topLimit<otherBottom){topLimit=otherBottom}
if(otherOffset.top<otherLimitTop)
continue;others.push({element:other,pos:otherOffset,newPos:{left:otherOffset.left,top:otherOffset.top}})}}else{topLimit=!1}
for(var _a=0,others_2=others;_a<others_2.length;_a++){var o=others_2[_a];o.element.setSelected(!0,!0,!0,!0)}
var parent=element.getParent();currentItem={handle:this,onChange:this.onChange,useXAxis:this.useXAxis,updateParentSize:this.push,element:element,others:others,pos:offset,newPos:{left:offset.left,top:offset.top},offset:subOffset(mpos,gOffset),parentOffset:(parent?{left:parent.pageLeft,top:parent.pageTop}:{left:0,top:0}),parentHeight:(parent===null||parent===void 0?void 0:parent.getHeightInPixels())||0,topLimit:topLimit,};element.snapHandle.handleDraggableStart({type:'dragstart'},{position:element.getLocation(!0)})};return MovePushHandle}());exports.MovePushHandle=MovePushHandle});define("js/ui/SelectParentMenu",["require","exports","js/ContextMenu"],function(require,exports,ContextMenu_6){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.SelectParentMenu=void 0;var SelectParentMenu=(function(_super){__extends(SelectParentMenu,_super);function SelectParentMenu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.element=null;return _this}
SelectParentMenu.prototype.update=function(element){var _this=this;this.removeAllItems();this.element=element;var parent=element;var count=0;while(parent){count++;parent=parent.getParent()}
parent=element;var index=0;while(parent){var prop=parent.getSiteTreeNodeProperties();var name_9=(prop&&prop.name)?(__tr(prop.name)+(prop.meta?" <span style=\"color: #999;\">".concat(prop.meta,"</span>"):"")):parent.getClassType();if(!index){name_9+=' ('+__('current')+')'}
var icon=(prop&&prop.icon)?prop.icon:"fa fa-chevron-right";this.insertItemAt(0,"wb-select-parent-".concat(element.id),name_9,function(e,el){return _this.onSelect(el)},!1,!index,parent,icon,!1,(count-index-1)*1.2);index++;parent=parent.getParent()}};SelectParentMenu.prototype.onSelect=function(element){if(this.element&&this.element.isSelected()&&this.element!==element){this.element.setSelected(!1)}
element.setSelected(!0)};return SelectParentMenu}(ContextMenu_6.ContextMenu));exports.SelectParentMenu=SelectParentMenu});define("js/Shape",["require","exports","jquery","js/ElementRegister","js/Element","js/Service","js/BackgroundControl","js/BorderControl","URLControl","js/RoundCornersControl","js/element/PropertyType","js/element/ElementBackground","js/BuilderEvent"],function(require,exports,jquery_129,ElementRegister_16,Element_15,Service_67,BackgroundControl_12,BorderControl_12,URLControl_6,RoundCornersControl_4,PropertyType_11,ElementBackground_3,BuilderEvent_28){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Shape=void 0;var Shape=exports.Shape=(function(_super){__extends(Shape,_super);function Shape(data){var _this=_super.call(this,data)||this;_this.noPhotoBg='ico-tb-shape';_this._link=null;_this._scaleFactors=null;_this.ignoreParentBounds=!0;var oldOpacity=null;if(data.content&&(parseFloat(''+data.content.opacity)||parseFloat(''+data.content.opacity)===0)){oldOpacity=parseFloat(''+data.content.opacity);data.content.opacity=null;delete data.content.opacity}
_this.displayEmptyMessage(!1);_this.shape=(0,jquery_129.default)('<div></div>');_this.shape.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"});_this.container.append(_this.shape);var bgColor=(data.content&&data.content.background&&(typeof data.content.background==='string'))?data.content.background:'#ffffff';_this._background=(data.content&&data.content.background&&(typeof data.content.background==='object'))?data.content.background:{color:bgColor,image:"none",position:"left top",repeat:"repeat",size:"auto auto",attachment:"scroll",css:{background:bgColor+" none repeat scroll left top","background-size":"auto auto"}};_this._border=(data.content&&data.content.border)?data.content.border:{color:"#C0C0C0",style:"solid",weight:5,css:{border:"5px solid #C0C0C0"}};_this._scaleFactors=(data.content&&data.content.scaleFactors)?data.content.scaleFactors:_this._scaleFactors;if(oldOpacity!==null){var oldColor=_this._background.color;var newColor=Shape.applyOldOpacityToColor(oldColor,oldOpacity);_this._background.opacity=oldOpacity*100;if(!_this._background.css)
_this._background.css={};_this._background.css.opacity=oldOpacity;if(oldOpacity<1&&_this._background.image&&_this._background.image!=='none'){_this._background.color='transparent';_this._background.css.background=_this._background.css.background.replace(oldColor,'transparent')}else{_this._background.color=newColor;_this._background.css.background=_this._background.css.background.replace(oldColor,newColor)}
if(typeof _this._border.color==="string"){oldColor=_this._border.color;newColor=Shape.applyOldOpacityToColor(oldColor,oldOpacity);_this._border.color=newColor;if(_this._border.css&&_this._border.css.hasOwnProperty("border"))
_this._border.css.border=_this._border.css.border.replace(oldColor,newColor);}else{var sides=["top","right","bottom","left"];for(var i=0;i<4;i++){oldColor=_this._border.color[i];newColor=Shape.applyOldOpacityToColor(oldColor,oldOpacity);_this._border.color[i]=newColor;if(i===0&&_this._border.css&&_this._border.css.hasOwnProperty("border"))
_this._border.css.border=_this._border.css.border.replace(oldColor,newColor);if(_this._border.css&&_this._border.css.hasOwnProperty("border-"+sides[i]))
_this._border.css["border-"+sides[i]]=_this._border.css["border-"+sides[i]].replace(oldColor,newColor);}}}
_this._borderRadius=(data.content&&data.content.borderRadius)?data.content.borderRadius:{lt:10,rt:10,rb:10,lb:10,differ:!1,css:{"border-radius":"10px","-webkit-border-radius":"10px","-moz-border-radius":"10px"}};_this._link=(data.content&&("link" in data.content)&&data.content.link)?data.content.link:null;_this.updateStyle(!0);return _this}
Object.defineProperty(Shape.prototype,"background",{get:function(){return this._background},set:function(value){this._background=value},enumerable:!1,configurable:!0});Object.defineProperty(Shape.prototype,"border",{get:function(){var brd=(0,BorderControl_12.buildCss)(this._border||null);(0,BorderControl_12.applyRadiusValue)(brd,this._borderRadius);return brd},set:function(value){this._border=__assign({},value);delete this._border.radius;this._borderRadius=(0,BorderControl_12.toRadiusValue)(value)},enumerable:!1,configurable:!0});Object.defineProperty(Shape.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(value){this._borderRadius=value},enumerable:!1,configurable:!0});Object.defineProperty(Shape.prototype,"link",{get:function(){return this._link},set:function(value){this._link=value;BuilderEvent_28.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_28.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(Shape.prototype,"scaleFactors",{get:function(){return this._scaleFactors},set:function(value){this._scaleFactors=value},enumerable:!1,configurable:!0});Shape.applyOldOpacityToColor=function(color,opacity){var res=color;if(/^#(\w{2})(\w{2})(\w{2})$/.test(color)){res='rgba('+parseInt(RegExp.$1,16)+', '+parseInt(RegExp.$2,16)+', '+parseInt(RegExp.$3,16)+', '+opacity+')'}else if(/^rgb\([^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?\)$/.test(color)){res='rgba('+RegExp.$1+', '+RegExp.$2+', '+RegExp.$3+', '+opacity+')'}else if(/^rgba\([^\d]*?(\d+)[^\d]*?(\d+)[^\d]*?(\d+).*?,.*?([\d\.]+).*?\)$/.test(color)){var opct=RegExp.$4*opacity;res='rgba('+RegExp.$1+', '+RegExp.$2+', '+RegExp.$3+', '+opct+')'}
return res};Shape.prototype.getName=function(useType){if(useType===void 0){useType=!1}
if(!this.name||useType){return __('Shape')}
return _super.prototype.getName.call(this)};Shape.prototype.getDataDefaults=function(){return jquery_129.default.extend(_super.prototype.getDataDefaults.call(this),{minWidth:1,minHeight:1})};Shape.prototype.getIcon=function(){return'fa fa-square-o'};Shape.prototype.getUsedMediaGalleryItems=function(){var items=_super.prototype.getUsedMediaGalleryItems.call(this);if(this.background&&this.background.image&&this.background.image!==""&&this.background.image!=="none")
items.push(this.background.image);return items};Shape.prototype.serialize=function(){var data=_super.prototype.serialize.call(this);data.content={background:this.background,border:this._border,borderRadius:this._borderRadius,link:this.link,scaleFactors:this.scaleFactors};return data};Shape.prototype.remove=function(options){var shapeBgVideoElem=this.shape.children('.wb_shape_video_background');(0,BackgroundControl_12.disposeVideoBackground)(shapeBgVideoElem);(0,ElementBackground_3.dispose)(this.shape);_super.prototype.remove.call(this,options)};Shape.prototype.releaseResources=function(options){_super.prototype.releaseResources.call(this,options);var shapeBgVideoElem=this.shape.children('.wb_shape_video_background');(0,BackgroundControl_12.runVideoByBackground)(null,shapeBgVideoElem,this)};Shape.prototype.updateStyle=function(initial,langCode,hardReset){if(initial===void 0){initial=!1}
if(hardReset===void 0){hardReset=!1}
_super.prototype.updateStyle.call(this,initial,langCode);(0,ElementBackground_3.apply)(this,this.background,this.shape,hardReset,'wb_shape_video_background');if(this._border.css)
this.shape.css(this._border.css);if(this._borderRadius.css)
this.shape.css(this._borderRadius.css);};Shape.prototype.updateHierarchyLevel=function(dom,initial){if(dom===void 0){dom=!1}
if(initial===void 0){initial=!1}
_super.prototype.updateHierarchyLevel.call(this,dom,initial);this.updateStyle(initial,undefined,!0)};Shape.prototype.canUseAsBackground=function(){return!0};Shape.prototype.getSupportedSizeUnits=function(){var _a;var sizeW=(_a=_super.prototype.getSupportedSizeUnits.call(this),_a.sizeW),sizeH=_a.sizeH;if(Array.isArray(sizeH)){sizeH.push({suffix:'%',min:1,max:100,precision:2,step:1})}
return{sizeW:sizeW,sizeH:sizeH}};Shape.prototype.supportsFullWidth=function(){return!0};Shape.prototype.comProperties=function(){var thisClass=this,fields=_super.prototype.comProperties.call(this,{size:{minBodyHeight:330},tabs:[{children:[{type:'VerticalLayout',children:[{type:'Label',text:__('Border')},{type:BorderControl_12.BorderControl,id:'border',noTransparent:!1,change:function(){Service_67.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-border-change',thisClass)}}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Rounded corners')},{type:RoundCornersControl_4.RoundCornersControl,id:'borderRadius',change:function(){Service_67.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-borderRadius-change',thisClass)}}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('Background')},{type:BackgroundControl_12.BackgroundControl,id:'background',useSize:!0,useAttachment:!0,useOpacity:!0,allowVideo:!0,change:function(){Service_67.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-background-change',thisClass)}}]},{type:'VerticalLayout',css:{marginTop:15},children:[{type:'Label',text:__('URL')},{type:'LinkSelector',id:'link',multilang:!0}]}]}],callbackFunc:function(fields){thisClass.background=fields.background.getValue();thisClass.border=fields.border.getValue();thisClass.borderRadius=fields.borderRadius.getValue();thisClass.link=fields.link.getValue();thisClass.updateStyle()}});fields.background.setValue(this.background);fields.border.setValue(this._border);fields.borderRadius.setValue(this._borderRadius);fields.link.setValue(this.link);return fields};Shape.prototype.getSiteTreeNodeProperties=function(){var props=_super.prototype.getSiteTreeNodeProperties.call(this);props.hasLink=URLControl_6.default.isActiveLinkValue(this._link);return props};Shape.prototype.onCompositionLoaded=function(){(0,ElementBackground_3.apply)(this,this.background,this.shape,!1,'wb_shape_video_background')};Shape.prototype.getCurrentModeScaleFactor=function(){return this._scaleFactors?this._scaleFactors[Service_67.Service.modeManager.getMode()]/100:1};Shape.prototype.registerProperties=function(){_super.prototype.registerProperties.call(this);this.registerProperty({name:"background",type:PropertyType_11.PropertyType.ShapeElementBackground,uiComponentOptions:{useSize:!0,useAttachment:!0,useOpacity:!0,allowVideo:!0}});this.registerProperty({name:"border",type:PropertyType_11.PropertyType.ShapeElementBgBorder});this.registerProperty({name:"link",type:PropertyType_11.PropertyType.ShapeOnClickLink,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,helpText:this.getParentWithActiveLink()?"warn:"+__("One of parent layout elements has a link applied to the whole block"):""}}});this.registerProperty({name:"individualShadow",type:PropertyType_11.PropertyType.IndividualShadowShape,onChange:function(property,owner){if(!owner.elem||!owner.controls||!owner.elem.data("resizableExt"))
return;owner.updateStyle()},uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}},});this.registerProperty({name:"scaleFactors",type:PropertyType_11.PropertyType.SpacingModeScaleFactors,onChange:function(property,owner){owner.controls.updateMargin(owner.getActualMargins());owner.controls.updatePadding(owner.getActualPadding())},uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}})};Shape.prototype.getContainerForShadow=function(){return this.shape};Shape.pluginName='Shape';return Shape}(Element_15.Element));ElementRegister_16.ElementRegister.registerClass("Shape",Shape)});define("js/Element",["require","exports","js/jquery-builder","js/core/BuilderConfig","js/ElementRegister","js/Service","js/UserInput","ModeManager","js/ContextMenu","Dialog","PropertyDialog","js/BuilderEvent","js/element/Controls","js/element/ControlsButton","js/element/MoveRelativeHandle","js/element/MovePushHandle","js/CommonTypes","js/CheckBox","js/TextField","js/SizeSelector","js/element/SnapHandle","js/SpacingSelector","js/util/HistoryUtil","js/util/ExtendedResizable","js/element/ControlsSelectionBorder","js/ui/SelectParentMenu","js/util/EventUtil","js/element/Properties","js/element/PropertyType","js/ui/CommonalitySelectorControl","js/util/ChangeUpdateUtil","js/util/ElementUtil","js/ui/AnimationControl","js/ui/FlexLayoutControl","js/util/ClipboardApi","js/BackgroundControl","js/util/UID","js/core/Validation","js/Label","js/core/Collaboration"],function(require,exports,jquery_builder_19,BuilderConfig_34,ElementRegister_17,Service_68,UserInput_7,ModeManager_4,ContextMenu_7,Dialog_21,PropertyDialog_7,BuilderEvent_29,Controls_5,ControlsButton_4,MoveRelativeHandle_2,MovePushHandle_2,CommonTypes_28,CheckBox_13,TextField_12,SizeSelector_16,SnapHandle_3,SpacingSelector_4,HistoryUtil_7,ExtendedResizable_2,ControlsSelectionBorder_4,SelectParentMenu_1,EventUtil_12,Properties_1,PropertyType_12,CommonalitySelectorControl_2,ChangeUpdateUtil_5,ElementUtil_3,AnimationControl_3,FlexLayoutControl_6,ClipboardApi_2,BackgroundControl_13,UID_10,Validation_4,Label_25,Collaboration_9){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Mode=exports.Element=void 0;var OnclickJs=new PropertyType_12.PropertyType("advanced/onclickJs",PropertyType_12.PropertyTypeAccess.User,!0,__('onClick JS event'),TextField_12.TextField,void 0,{helpText:__('JavaScript code which will be triggered when mouse-clicking on the element.')});var waitToUpdateTree=new ChangeUpdateUtil_5.ChangeUpdateState(function(){BuilderEvent_29.GlobalEvents.triggerEvent('site.structure.changed',new BuilderEvent_29.SiteStructureChangedBuilderEvent())});var elemIndexById={};var Element=exports.Element=(function(_super){__extends(Element,_super);function Element(data,_initial,virtual,isEditable,preInitCallback){if(_initial===void 0){_initial=!1}
if(virtual===void 0){virtual=!1}
if(isEditable===void 0){isEditable=!0}
var _this=_super.call(this)||this;_this.isEditable=isEditable;_this.parent=null;_this.isControlsVisible=!0;_this.debug=!1;_this.excluded=!1;_this.zIndex=0;_this.cachedWidth=0;_this.cachedHeight=0;_this._width=0;_this._height=0;_this.groupPath=null;_this.groupId=null;_this.oPos=null;_this.comDialog=null;_this.helpText=null;_this.langLabel=null;_this.forceCompactControls=!1;_this.hidden=!1;_this.hiddenResp=!1;_this.index=0;_this.menu=null;_this.menuInitialized=!1;_this._menu=null;_this.startedAsCommon=!1;_this.isCommon=!1;_this.isCommonInherited=!1;_this.selection=null;_this.isResizable=!0;_this.isMovable=!0;_this.isEditableStrict=!0;_this.isRemovable=!0;_this.hideBorder=!1;_this.ctrlOpacity=1;_this.comDlg=null;_this.noPhotoText=__("Double click to change properties");_this.noPhotoBg="ico-tb-picture";_this.contextMenuFirstIndex=0;_this.isLocked=!1;_this.isLockedOpts=null;_this.noOptionsTab=!1;_this.hideNavigation=!1;_this.classNamePropEnabled=!0;_this._isBackgroundElement=!1;_this.translations=null;_this.dropAccepted=!0;_this.dragStartPos=null;_this.virtualElement=!1;_this.isElementPreview=!1;_this.isCustomSaved=!1;_this.ignoreParentBounds=!1;_this.modes={};_this.respBackup=null;_this.modeContextOk={comConfig:!0,hideElem:!0,lock:!0,order:!0,resetSize:!1};_this._anchor=null;_this._elemClassName=null;_this._isInViewport=!1;_this._referenceId=null;_this._isAdminLocked=!1;_this.debugInfo=null;_this.removed=!1;_this._isFullWidth=!1;_this._left=0;_this._top=0;_this.undoing=!1;_this.offsetTop=0;_this.offsetLeft=0;_this.pageTop=0;_this.pageLeft=0;_this.selected=!1;_this.resizing=!1;_this.resizeHOrigin=0;_this.resizeVOrigin=0;_this.sysMinWidth=64;_this.sysMinHeight=64;_this._individualShadow=null;_this._individualMargin=null;_this.flexGrow=0;_this.flexShrink=0;_this._minWidth=0;_this._maxWidth=1200;_this._forcedMinHeight=0;_this._minHeight=0;_this._maxHeight=600;_this._useMinWidth=!1;_this._useMaxWidth=!1;_this._useMinHeight=!1;_this._useMaxHeight=!1;_this.staticPos=null;_this._layoutConstraints=CommonTypes_28.ChildrenLayoutType.Absolute;_this._layoutConstraintsIsSet=!1;_this.moveRelativeHandle=null;_this.hierarchyLevel=0;_this._invalid=!1;_this.keepSize=!1;if(typeof preInitCallback==="function")
preInitCallback.call(_this);_this.virtualElement=(virtual?!0:!1);_this.system=wb_builder;var _data=_this.fillDataWithDefaults((data&&typeof(data)==="object")?data:{});if(typeof _data.isCustomSaved==='boolean')
_this.isCustomSaved=_data.isCustomSaved;if(_data.srcCompositionId)
_this.srcCompositionId=_data.srcCompositionId;if(_data.isCommon)
_this.startedAsCommon=_data.isCommon;if(_data.isAdminLocked&&!BuilderConfig_34.wbConfig.adminMode)
_this.isEditableStrict=!1;if(_data.isElementPreview)
_this.isElementPreview=!0;if(_data.previewCompositionId)
_this.previewCompositionId=_data.previewCompositionId;if(_data.isBackgroundElement)
_this.isBackgroundElement=_data.isBackgroundElement;if(_data.sortOrder)
_this.sortOrder=_data.sortOrder;if(_data.isFullWidth)
_this._isFullWidth=!0;if('isMovable' in _data)
_this.isMovable=_data.isMovable?!0:!1;if('respBackup' in _data&&_data.respBackup)
_this.respBackup=_data.respBackup;if(!Element.hotKeysInitiated&&!_this.isElementPreview){Element.hotKeysInitiated=!0;UserInput_7.UserInput.addHotKey("left",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("right",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("up",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("down",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift+left",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift+right",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift+up",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift+down",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("del",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("backspace",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift++",Element.hotKeysCallback,!0);UserInput_7.UserInput.addHotKey("shift+-",Element.hotKeysCallback,!0)}
_this.includePages=(_data.includePages&&typeof(_data.includePages)==="object")?_data.includePages:{};if(_data.element&&typeof(_data.element)==='object'){_this.elem=_data.element}else{_this.elem=(0,jquery_builder_19.default)('<div></div>')}
_this.rawElem=_this.elem.get(0);var isCopy=(typeof _data._copy==="boolean"&&_data._copy);_this.elem.wbSetClassInstance(_this);if(data&&'_restoreId' in data&&data._restoreId&&typeof data._restoreIndex!=='undefined'){_this.id=data._restoreId;_this.index=data._restoreIndex;if(typeof _data.startedAsCommon==="boolean")
_this.startedAsCommon=_data.startedAsCommon;delete data._restoreId;delete data._restoreIndex}else{_this.index=Element.lastIndex;_this.id=(typeof _data.id==='string'&&_data.id&&!isCopy)?_data.id:UID_10.UID.create();Element.lastIndex++}
_this.rootBlockType=(!isCopy&&typeof _data.rootBlockType==='string')?_data.rootBlockType:null;_this.name=(_data.name&&typeof _data.name==='string')?_data.name:'';if(!_this.isElementPreview){elemIndexById[_this.id]=_this}
_this.elem.attr("data-id",_this.id);_this.elem.addClass("wb_element");if(_this.isElementPreview)
_this.elem.addClass("wb-element-preview");if(_data.groupPath){_this.groupPath=_data.groupPath}else{_this.groupPath=_data.groupId?((typeof _data.groupId==='string')?[_data.groupId]:_data.groupId):null}
_this.moveBtn=new ControlsButton_4.ControlsButton('wb_move_btn','fa fa-arrows',ControlsButton_4.ControlsButtonAlign.LEFT_TOP);_this.movePushBtn=new ControlsButton_4.ControlsButton('wb_move_push_btn','fa fa-sort',ControlsButton_4.ControlsButtonAlign.CENTER_TOP);_this.controls=new Controls_5.Controls(!0,!_this.isAcceptingChildren(),function(type,value,valueType){return _this.handleValueChange(type,value,valueType)},function(selection){var res=_this.elem.resizableExt('instance');if(!res)
return;if(selection){if(_this.getClassType()=='LayoutElement'){var layoutElem=_this;if(layoutElem.isEmpty()&&!layoutElem.getParent()){var builderApi=Service_68.Service.uiManager.getApiInstance();builderApi.addBlockInto(layoutElem,_this.lastClick||jquery_builder_19.default.Event('click'))}}
res.attachHandles(selection.getResizeHandles());_this.elem.find('.wb-ext-resizable-handle').each(function(idx,elem){if(_this.menu instanceof ContextMenu_7.ContextMenu){_this.menu.pasiveBind((0,jquery_builder_19.default)(elem))}})}else{res.detachHandles()}});_this.controls.setSupportPadding(function(){return _this.supportsPadding()});_this.controls.setSupportMargin(function(){return _this.supportsMargin()});_this.controls.setSpacingOverflow(function(){var elem=_this;do{if('allowControlsSpacingOverflow' in elem&&!elem.allowControlsSpacingOverflow()){return!1}
elem=elem.parent}while(elem);return!0});_this.controls.onDblClick(function(e,clickPosition){if(clickPosition!=='center'){var prop=_this.getProperty('individualMargin');if(prop){_this.system.propertiesPanel.scrollPropertyIntoView(prop,!0);var pos=clickPosition.split('-');var propComponent=_this.system.propertiesPanel.getComponentForProperty(prop);if(propComponent&&propComponent instanceof SpacingSelector_4.SpacingSelector)
propComponent.enterEditMode(pos[0],pos[1]);}}},['margin-l','margin-t','margin-r','margin-b','padding-l','padding-t','padding-r','padding-b']);if(_this.isMovable){_this.controls.addButton(_this.moveBtn).addButton(_this.movePushBtn);(new MovePushHandle_2.MovePushHandle([_this],!0,wb_builder)).bindToElement(_this.movePushBtn.elem)}
_this.controls.setAlignmentInfoHandler({parent:function(layout){if(!_this.parent)
return;_this.parent.setLayout(layout)},positionMargins:function(){return _this.getAlignmentToolbarPositionMargins()},});_this.controls.setAlignmentInfo(_this.buildLayoutPair());_this.parentLinkBtn=new ControlsButton_4.ControlsButton('wb_parent_link_btn','fa fa-link',ControlsButton_4.ControlsButtonAlign.LEFT_TOP);_this.parentLinkBtn.setAdditionalVisibilityTestCallback(function(){return!!_this.getParentWithActiveLink()});_this.parentLinkBtn.elem.on("click",function(e){e.stopImmediatePropagation();e.preventDefault();var parent=_this.getParentWithActiveLink();if(parent){Service_68.Service.element.unselectAll();parent.setSelected(!0,!0,!0);var prop=parent.getProperty("link");if(prop)
_this.system.propertiesPanel.scrollPropertyIntoView(prop,!0);}});_this.controls.addButton(_this.parentLinkBtn);_this.controls.addButton((_this.editBtn=new ControlsButton_4.ControlsButton('wb_edit_btn','fa fa-pencil',ControlsButton_4.ControlsButtonAlign.RIGHT_TOP))).layout();_this.snapHandle=new SnapHandle_3.SnapHandle(_this);_this.cover=_this.controls.cover;if(_this.helpText){var helpBtn=new ControlsButton_4.ControlsButton('wb_help_btn','?',ControlsButton_4.ControlsButtonAlign.LEFT_BOTTOM);_this.controls.addButton(helpBtn);helpBtn.elem.tooltip({trigger:'hover',placement:'top',html:!0,title:_this.helpText})}
if(BuilderConfig_34.wbConfig.devDebugMode){_this.debugInfo={id:_this.id};if(_data.hasOwnProperty("debugInfo")){_this.debugInfo=jquery_builder_19.default.extend(!0,_this.debugInfo,_data.debugInfo);delete _data.debugInfo}
if(_this.debugInfo!==null){var debugInfoBtn=new ControlsButton_4.ControlsButton('wb_debug_btn','fa fa-info',ControlsButton_4.ControlsButtonAlign.NONE);_this.controls.addButton(debugInfoBtn);debugInfoBtn.elem.tooltip({trigger:"manual",placement:"bottom",container:"body",html:!1,title:JSON.stringify(_this.debugInfo,null,2),template:'<div class="tooltip debug-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}).on("click touchend",function(){(0,jquery_builder_19.default)(this).tooltip("toggle")})}}
_this.controls.attach(_this.elem);_this.container=(0,jquery_builder_19.default)('<div class="wb_content"></div>');_this.elem.append(_this.container);if(!_this.isEditable||!_this.isEditableStrict){_this.editBtn.setActive(!1)}
var minWidthValid=("minWidth" in _data&&typeof _data.minWidth!=='undefined'&&!!(_data.minWidth+'').match(/^[0-9]+$/));var maxWidthValid=("maxWidth" in _data&&typeof _data.maxWidth!=='undefined'&&!!(_data.maxWidth+'').match(/^[0-9]+$/));var minHeightValid=("minHeight" in _data&&typeof _data.minHeight!=='undefined'&&!!(_data.minHeight+'').match(/^[0-9]+$/));var maxHeightValid=("maxHeight" in _data&&typeof _data.maxHeight!=='undefined'&&!!(_data.maxHeight+'').match(/^[0-9]+$/));_this._individualShadow=("individualShadow" in _data&&typeof _data.individualShadow!=='undefined')?_data.individualShadow:_this._individualShadow;_this._individualMargin=("individualMargin" in _data&&typeof _data.individualMargin!=='undefined')?_data.individualMargin:_this._individualMargin;_this._minWidth=(minWidthValid&&"minWidth" in _data&&typeof _data.minWidth!=='undefined')?_data.minWidth:_this._minWidth;_this._maxWidth=(maxWidthValid&&"maxWidth" in _data&&typeof _data.maxWidth!=='undefined')?_data.maxWidth:_this._maxWidth;_this._minHeight=(minHeightValid&&"minHeight" in _data&&typeof _data.minHeight!=='undefined')?_data.minHeight:_this._minHeight;_this._maxHeight=(maxHeightValid&&"minHeight" in _data&&typeof _data.maxHeight!=='undefined')?_data.maxHeight:_this._maxHeight;_this._useMinWidth=minWidthValid&&("useMinWidth" in _data)&&!!_data.useMinWidth;_this._useMaxWidth=maxWidthValid&&("useMaxWidth" in _data)&&!!_data.useMaxWidth;_this._useMinHeight=minHeightValid&&("useMinHeight" in _data)&&!!_data.useMinHeight;_this._useMaxHeight=maxHeightValid&&("useMaxHeight" in _data)&&!!_data.useMaxHeight;_this.flexGrow=_this.flexShrink=(_data.flexGrow||_data.flexShrink||(_this.flexGrow&&_this.flexShrink))?1:0;_this.controls.updateMargin(_this.getActualMargins());_this.updateResizeMode();if(_this.isElementPreview){_this.isResizable=!1;_this.isEditable=!1;_this.isMovable=!1;_this.isLocked=!0}else{_this.updateCtrlBtnsPos=function(width,height){width=width||this.getWidthInPixels();height=height||this.getHeightInPixels();if(width<74||height<36||this.forceCompactControls){this.controls.setButtonsCompact(!0)}else{this.controls.setButtonsCompact(!1)}};var resizeSpacing_1;var layoutType_1;var beforeResize_1=new(function(){function class_9(){this.min={width:0,height:0};this.max={width:0,height:0};this.height=0}
class_9.prototype.begin=function(elem,size){this.min.width=elem.minWidth;this.min.height=elem.minHeight;this.max.width=elem.maxWidth;this.max.height=elem.maxHeight;this.height=elem._height;this.update(elem,size)};class_9.prototype.update=function(elem,size){if(elem.controls){elem.controls.minMax.setVisible(!0);var minWidth=elem._useMinWidth?elem._minWidth:0;var minHeight=elem._useMinHeight?elem._minHeight:0;elem.controls.minMax.applyMinValue((minWidth>0||minHeight>0)?(minWidth||size.width):0,(minWidth>0||minHeight>0)?(minHeight||size.height):0);var maxWidth=elem._useMaxWidth?elem._maxWidth:0;var maxHeight=elem._useMaxHeight?elem._maxHeight:0;elem.controls.minMax.applyMaxValue((maxWidth>0||maxHeight>0)?(maxWidth||size.width):0,(maxWidth>0||maxHeight>0)?(maxHeight||size.height):0)}};class_9.prototype.end=function(elem){if(elem.controls){elem.controls.minMax.setVisible(!1)}};return class_9}());_this.elem.resizableExt({handles:"n, e, s, w, ne, se, sw, nw",extHandles:!0,minWidth:1,minHeight:1,allowPercentageWidth:!0,allowPercentageHeight:!1,start:function(e,ui){e.preventDefault();_this.resizing=!0;var affectedElements=[_this];_this.elem[0].style.position='';beforeResize_1.begin(_this,ui.size);_this.updateSizeLimits();_this.onStartResize(ui);_this.controls.handleResize(!0,ui.axis);(0,ContextMenu_7.hideAllContextMenus)();ui.data={affectedElements:affectedElements};resizeSpacing_1=__assign({},_this.individualMargin);if(_this.getClassType()=='LayoutElement'){var layoutElem=_this;layoutType_1=layoutElem.getChildrenLayout()}else{layoutType_1=null}
if(!_this.snapHandle.handleResizableStart(e,ui))
return;ui.data.affectedElements=affectedElements.concat(_this.snapHandle.getAdditionalAffectedElements())},resize:function(e,ui){if(ui.data.affectedElements){(0,HistoryUtil_7.createMoveElementsHistoryRecord)(ui.data.affectedElements);delete ui.data.affectedElements}
var clear=!1;if(_this.useMinWidth&&ui.size.width<beforeResize_1.min.width){_this.minWidth=ui.size.width;clear=!0}
if(_this.useMinHeight&&ui.size.height<beforeResize_1.min.height){_this.minHeight=ui.size.height;clear=!0}
if(_this.useMaxWidth&&ui.size.width>beforeResize_1.max.width){_this.maxWidth=ui.size.width;clear=!0}
if(_this.useMaxHeight&&ui.size.height>beforeResize_1.max.height){_this.maxHeight=ui.size.height;clear=!0}
if(clear){_this.updateSizeLimits();ui.clearCache()}
if(!_this.snapHandle.handleResizableResize(e,ui))
return},afterResize:function(e,ui){var tip="target size: "+ui.size.width+" &times; "+ui.size.height;var width=(typeof ui.dynamicSize.width==="number")?ui.dynamicSize.width+"px":ui.dynamicSize.width;var height=(typeof ui.dynamicSize.height==="number")?ui.dynamicSize.height+"px":ui.dynamicSize.height;tip+="<br />setting size: "+width+" &times; "+height;var realWidth=ui.element.outerWidth();var realHeight=ui.element.outerHeight();tip+="<br />real size: "+realWidth+" &times; "+realHeight;wb_builder.bodyInstance.showInfoTip(tip,e.pageX-90,e.pageY);var altSize=!1;if(layoutType_1==CommonTypes_28.ChildrenLayoutType.Horizontal){if(ui.axis=='n'||ui.axis=='s'){_this.useMinHeight=!0;_this.minHeight=ui.size.height;if(!_this.setSize(null,'auto'))
_this.updateContentSize();altSize=!0}}else if(layoutType_1==CommonTypes_28.ChildrenLayoutType.Vertical){if(ui.axis=='n'){_this.handleValueChange(ControlsSelectionBorder_4.SelectionBorderType.TOP,Math.max(((resizeSpacing_1===null||resizeSpacing_1===void 0?void 0:resizeSpacing_1.paddingTop)||0)+ui.delta.top,0),ControlsSelectionBorder_4.ValueType.PADDING);altSize=!0}else if(ui.axis=='s'){if(typeof _this._height==='number'){_this.setSize(null,'auto')}
var fromHeight=0;if(_this.isEmpty()&&typeof beforeResize_1.height==='number'){fromHeight=beforeResize_1.height}
_this.handleValueChange(ControlsSelectionBorder_4.SelectionBorderType.BOTTOM,Math.max(((resizeSpacing_1===null||resizeSpacing_1===void 0?void 0:resizeSpacing_1.paddingBottom)||0)+ui.delta.top+fromHeight,0),ControlsSelectionBorder_4.ValueType.PADDING);altSize=!0}}
if(!altSize){ui.size.width=realWidth;ui.size.height=realHeight;var sizeChanged=(ui.dynamicSize.width!=_this._width||ui.dynamicSize.height!=_this._height);if(_this.isAutoSizeEnabled&&sizeChanged){_this.isAutoSizeEnabled=!1;_this.updateFlex()}
_this.setSize(ui.dynamicSize.width,ui.dynamicSize.height)}
beforeResize_1.update(_this,ui.size);_this.updateContentSize(ui);_this.updateCtrlBtnsPos(ui.size.width,ui.size.height);_this.onLiveResize(ui.size.width,ui.size.height);_this.onResize()},stop:function(e,ui){e.preventDefault();_this.resizing=!1;_this.onStopResize(ui);_this.controls.handleResize(!1,ui.axis);beforeResize_1.end(_this);wb_builder.bodyInstance.hideInfoTip();if(e.skipStopEvent)
return;_this.onResize();if(!_this.snapHandle.handleResizableStop(e,ui))
return},});_this.updateResizeLimits();setTimeout(function(){return _this.updateCtrlBtnsPos()},1000);if(_this.isMovable){_this.moveRelativeHandle=new MoveRelativeHandle_2.MoveRelativeHandle([_this],wb_builder);_this.moveRelativeHandle.setEnabled(!0)}
_this.elem.hover(function(){_this.snapHandle.handleHover(!0)},function(){_this.snapHandle.handleHover(!1)});var touchClick_1=!1,touchMoved_1=!1;if(_this.id!='new'||_this.isMovable)
_this.controls.setInteractHandler(function(e,isDown){if(isDown){touchClick_1=(e.type=='touchstart');touchMoved_1=!1;if(_this.moveRelativeHandle){_this.moveRelativeHandle.triggerDown(e,!_this.canBeMoved())}}else{if(e.type=='touchmove'){touchMoved_1=!0}else if(e.type=='touchend'){if(ExtendedResizable_2.ExtendedResizable.isResizing())
return;if(_this.moveRelativeHandle){var afterMove=_this.moveRelativeHandle.moveStarted;_this.moveRelativeHandle.triggerUp(e);if(afterMove)
return;e.stopPropagation();e.stopImmediatePropagation();if(!touchMoved_1)(0,EventUtil_12.triggerEvent)((0,jquery_builder_19.default)(e.originalEvent.target||_this.elem),'click',e);}}else if(e.type=='click'){var wasSelected=_this.isSelected();_this.cachedWidth=_this.getWidthInPixels();_this.cachedHeight=_this.getHeightInPixels();_this.onClick(e);if(touchClick_1&&wasSelected&&_this.isEditableStrict&&_this.controls.isVisible()&&_this.menu){if(_this.menu.getIsVisible()||_this.menu.isJustHidden()){_this.menu.hide()}else{_this.menu.show(e)}}
_this.onAfterClick(e);e.stopPropagation();e.stopImmediatePropagation();e.preventDefault()}}},!0)}
_this.isCommon=_data.isCommon?!0:!1;_this.isLocked=_data.isLocked?!0:!1;_this.commonalityBackup=_data.commonalityBackup||null;var left=_data.x?(_data.x*1):0;var top=_data.y?(_data.y*1):0;_this.setLocation(left,top,!1,!0);var width=_data.width||200;var height=_data.height||200;if(!_this.supportsAutoSizeFull()&&_this.supportsAutoWidth()&&_this.supportsAutoHeight()){if(width==='auto'&&height==='auto'){width='100%'}else if(width!=='auto'&&height!=='auto'){height='auto'}}
_this.setSize(width,height,!0);if(!_this._isBackgroundElement){_this.setZIndex((_data.zIndex?(_data.zIndex*1):1))}
_this.hiddenResp=_data.hiddenResp?!0:!1;_this.selectParentMenu=new SelectParentMenu_1.SelectParentMenu();if(!_this.isElementPreview&&_this.isEditableStrict&&(_this.id!='new'||_this.isMovable)){_this.setupContextMenu()}
_this.updateContentSize();_this.elem.trigger("mouseout");_this.noPhotoMsg=(0,jquery_builder_19.default)('<div class="wb_caption">').append((0,jquery_builder_19.default)('<div>').append((0,jquery_builder_19.default)('<i>').addClass(_this.noPhotoBg)).append((0,jquery_builder_19.default)('<span>').text(_this.noPhotoText))).hide();_this.elem.append(_this.noPhotoMsg);if(_this.isLocked)
_this.setLocked(_this.isLocked,!0);_this._anchor=(_data&&_data.anchor?_data.anchor:null);_this._elemClassName=(_data&&_data.elemClassName?_data.elemClassName:null);_this._referenceId=(_data&&_data.referenceId?_data.referenceId:null);_this._isAdminLocked=(_data&&_data.isAdminLocked?_data.isAdminLocked:null);if(wb_builder.site)
wb_builder.site.addAnchor(_this);_this.waitToUpdateAnchor=new ChangeUpdateUtil_5.ChangeUpdateState(function(item){if(!wb_builder.site||!item)
return;wb_builder.site.removeAnchor(item.elem,item.anchor);item.anchor=item.elem._anchor;wb_builder.site.addAnchor(item.elem)},{elem:_this,anchor:_this._anchor});_this._animationEffect=(_data&&_data.animationEffect?_data.animationEffect:null);_this._onclickJs=(_data&&_data.onclickJs?_data.onclickJs:null);_this.trackAnimationEffect();_this.onLiveResize(width,height);if(!_this.isEditableStrict){_this.isEditableStrict=!0;_this.setDraggingEnabled(!1);_this.setResizingEnabled(!1,!0);_this.setControlsVisible(!1);_this.setControlsEnabled(!1);_this.isEditableStrict=!1;_this.elem.css({cursor:'default'}).on('mousedown',function(e){e.stopPropagation();return!1}).get(0).oncontextmenu=function(e){e.stopPropagation();return!1}}
_this.updateShow(!0);var baseModeSet=!1;if(_data&&_data.modes){for(var k in _data.modes){_this.modes[k]=_this.modeClass(_data.modes[k])}
if(_this.modes[ModeManager_4.default.MODE_DESKTOP]!==undefined){_this.baseMode=_this.modes[ModeManager_4.default.MODE_DESKTOP];baseModeSet=!0}
_this.switchMode(ModeManager_4.default.getMode(),ModeManager_4.default.getMode(),!0,!1)}
if(!baseModeSet)
_this.baseMode=_this.modeClass();_this.baseMode.setMissing(_this);return _this}
Element.hotKeysCallback=function(e){if(Element.hotKeysDisabled)
return;for(var selIdx in Element.selected){if(Element.selected[selIdx].isBackgroundElement)
return}
if(!(0,jquery_builder_19.default)(e.target).hasClass("focus-hack")){if((0,jquery_builder_19.default)(e.target).is("input")||(0,jquery_builder_19.default)(e.target).is("textarea")||(0,jquery_builder_19.default)(e.target).closest(".modal").length)
return}
var id,elem,key=null,parent=null;if(e.data.hotKey==="up"){key={left:0,top:-1}}else if(e.data.hotKey==="down"){key={left:0,top:+1}}else if(e.data.hotKey==="left"){key={left:-1,top:0}}else if(e.data.hotKey==="right"){key={left:+1,top:0}}else if(e.data.hotKey==="shift+up"){key={left:0,top:-10}}else if(e.data.hotKey==="shift+down"){key={left:0,top:+10}}else if(e.data.hotKey==="shift+left"){key={left:-10,top:0}}else if(e.data.hotKey==="shift+right"){key={left:+10,top:0}}else if(e.data.hotKey==="del"||e.data.hotKey==="backspace"){Service_68.Service.element.removeOrHideElementsWithUserInteraction(Element.selected,wb_builder.pageId,wb_builder.site.currSelLang)}else if(e.data.hotKey==='shift++'||e.data.hotKey==='shift+-'){for(id in Element.selected){elem=Element.selected[id];if(!elem.isEditableStrict)
continue;if(elem.isLocked){continue}
if(!elem.parent)
continue;wb_builder.setPageModified(!0);elem.parent.zIndexHandle.changeLayer(elem,(e.data.hotKey==='shift++'?'up':'down'))}}
if(!key)
return;for(id in Element.selected){elem=Element.selected[id];if(!elem.isEditableStrict)
continue;if(elem.isLocked){continue}
if(!parent)
parent=elem.getParent();var loc=elem.getLocation();if(elem.setLocation(loc.left+key.left,loc.top+key.top)){wb_builder.setPageModified(!0)}}
if(parent)
parent.updateSize();for(id in Element.selected){elem=Element.selected[id];if(!elem.isEditableStrict)
continue;if(elem.isLocked){continue}}
Service_68.Service.group.updateGroupBounds();e.preventDefault();e.stopPropagation()};Element.unselectAll=function(){Service_68.Service.group.unselectGroups();var isSecondarySelection=!1;for(var id in Element.selected){Element.selected[id].setSelected(!1,undefined,undefined,isSecondarySelection);isSecondarySelection=!0}
Element.selected={}};Object.defineProperty(Element.prototype,"nameProp",{get:function(){return this.name},set:function(value){if(this.name!=value){this.name=value;(0,ChangeUpdateUtil_5.waitForChangeEndToUpdate)(waitToUpdateTree)}},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"width",{get:function(){return this._width},set:function(value){this._width=value;if(!this.supportsAutoSizeFull()&&this.supportsAutoWidth()&&this.supportsAutoHeight()){if(value==='auto'&&this._height==='auto'){this.height=this.getWidthInPixels()}else if(value!=='auto'&&this._height!=='auto'){this.height='auto'}}},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"height",{get:function(){return this._height},set:function(value){this._height=value;if(!this.supportsAutoSizeFull()&&this.supportsAutoWidth()&&this.supportsAutoHeight()){if(value==='auto'&&this._width==='auto'){this.width=this.getWidthInPixels()}else if(value!=='auto'&&this._width!=='auto'){this.width='auto'}}},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"commonality",{get:function(){return{isCommon:this.isCommon,includePages:this.includePages}},set:function(value){var needHierarchyUpdate=this.isCommon!==value.isCommon;this.isCommon=value.isCommon;this.includePages=jquery_builder_19.default.extend(!0,{},value.includePages);this.updateShow();if(needHierarchyUpdate)
this.updateHierarchyLevel();BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent())},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"isBackgroundElement",{get:function(){return this._isBackgroundElement},set:function(value){this._isBackgroundElement=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"anchor",{get:function(){return this._anchor},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"anchorProp",{get:function(){return this._anchor},set:function(value){if(this.setNewAnchor(value)){(0,ChangeUpdateUtil_5.waitForChangeEndToUpdate)(waitToUpdateTree);(0,ChangeUpdateUtil_5.waitForChangeEndToUpdate)(this.waitToUpdateAnchor)}},enumerable:!1,configurable:!0});Element.prototype.setNewAnchor=function(value){if(this._anchor==value){return!1}
if(Element._anchorLabel===null){Element._anchorLabel=new Label_25.Label('');Element._anchorLabel.css({color:'#F80',fontWeight:'normal',marginTop:"5px"})}
if(!(0,jquery_builder_19.default)('div[data-property-type="advanced/anchor"] label').length){(0,jquery_builder_19.default)('div[data-property-type="advanced/anchor"]').append(Element._anchorLabel.getElem())}
Element._anchorLabel.setVisible(!1);var data=[];var anchors=wb_builder.site.getAnchors(wb_builder.pageId);for(var i in anchors){var anchor=anchors[i];data.push({id:i,alias:anchor,name:anchor})}
value=(0,Validation_4.normalizeValue)(value);this._anchor=value;var result=(0,Validation_4.validateAnchorField)(value,Element._anchorLabel,data);Element.anchorLastLabel=Element.anchorLastValue=null;if(!result){Element.anchorLastLabel=Element._anchorLabel.getElem();Element.anchorLastValue=value}
return result};Element.prototype.checkAnchorLabel=function(){setTimeout(function(){var value=(0,jquery_builder_19.default)('div[data-property-type="advanced/anchor"] input').val();if(Element.anchorLastLabel&&value==Element.anchorLastValue){(0,jquery_builder_19.default)('div[data-property-type="advanced/anchor"]').append(Element.anchorLastLabel)}},100)};Object.defineProperty(Element.prototype,"elemClassNameProp",{get:function(){return this._elemClassName},set:function(value){this._elemClassName=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"animationEffect",{get:function(){return this._animationEffect},set:function(value){if(value&&('_preview' in value)&&value._preview){if(value._preview in value){this.playAnimation(value[value._preview])}else{this.playAnimation(null)}
delete value._preview}else if(!value){this.playAnimation(null)}
this._animationEffect=value;this.trackAnimationEffect()},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"onclickJs",{get:function(){return this._onclickJs},set:function(value){this._onclickJs=value},enumerable:!1,configurable:!0});Element.prototype.trackAnimationEffect=function(){var _this=this;var onScroll=function(){var rect=_this.elem.get(0).getBoundingClientRect();var isInViewport=(rect.top>=60&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth));if(isInViewport&&_this._isInViewport!==isInViewport&&_this._animationEffect&&_this._animationEffect.normal){_this.playAnimation(_this._animationEffect.normal)}
_this._isInViewport=isInViewport};window.removeEventListener('scroll',onScroll);if(this._animationEffect)
window.addEventListener('scroll',onScroll);};Object.defineProperty(Element.prototype,"referenceId",{get:function(){return this._referenceId},set:function(value){this._referenceId=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"isAdminLocked",{get:function(){return this._isAdminLocked},set:function(value){this._isAdminLocked=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"isFullWidth",{get:function(){return this._isFullWidth},set:function(value){var _a,_b;this._isFullWidth=value;this.updateResizeMode();if((_a=this.parent)===null||_a===void 0?void 0:_a.updateContainment)(_b=this.parent)===null||_b===void 0?void 0:_b.updateContainment(this);},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"left",{get:function(){return this._left},set:function(value){this._left=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"top",{get:function(){return this._top},set:function(value){this._top=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"individualShadow",{get:function(){return this._individualShadow},set:function(value){this._individualShadow=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"individualMargin",{get:function(){return this._individualMargin},set:function(value){this._individualMargin=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"layoutConstraints",{get:function(){return this._layoutConstraints},set:function(value){this._layoutConstraints=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"isAutoSizeEnabled",{get:function(){return!!(this.flexGrow&&this.flexShrink)},set:function(value){this.flexGrow=this.flexShrink=value?1:0},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"useMinWidth",{get:function(){return this._useMinWidth},set:function(value){this._useMinWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"useMinHeight",{get:function(){return this._useMinHeight},set:function(value){this._useMinHeight=value;setTimeout(function(){return wb_builder.bodyInstance.stickyInvalidate()},0)},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"useMaxWidth",{get:function(){return this._useMaxWidth},set:function(value){this._useMaxWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"useMaxHeight",{get:function(){return this._useMaxHeight},set:function(value){this._useMaxHeight=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"minWidth",{get:function(){return this._minWidth},set:function(value){this._minWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"minHeight",{get:function(){return this._minHeight},set:function(value){this._minHeight=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(value){this._maxWidth=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(value){this._maxHeight=value},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"showOnPhone",{get:function(){return!this.getHiddenInMode(ModeManager_4.default.MODE_PHONE)},set:function(value){this.setHiddenInMode(ModeManager_4.default.MODE_PHONE,!value)},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"showOnTablet",{get:function(){return!this.getHiddenInMode(ModeManager_4.default.MODE_TABLET)},set:function(value){this.setHiddenInMode(ModeManager_4.default.MODE_TABLET,!value)},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"showOnDesktop",{get:function(){return!this.getHiddenInMode(ModeManager_4.default.MODE_DESKTOP)},set:function(value){this.setHiddenInMode(ModeManager_4.default.MODE_DESKTOP,!value)},enumerable:!1,configurable:!0});Object.defineProperty(Element.prototype,"showOnTv",{get:function(){return!this.getHiddenInMode(ModeManager_4.default.MODE_TV)},set:function(value){this.setHiddenInMode(ModeManager_4.default.MODE_TV,!value)},enumerable:!1,configurable:!0});Element.prototype.buildLayoutPair=function(){return{id:this.id,parent:(this.parent?new FlexLayoutControl_6.FlexLayoutControlValue(this.parent.getLayout()):null)}};Element.prototype.getAlignmentToolbarPositionMargins=function(){return{top:0,right:0,bottom:0,left:0}};Element.prototype.handleValueChange=function(type,value,valueType){var prop=this.getProperty("individualMargin");if(valueType==ControlsSelectionBorder_4.ValueType.MARGIN&&this.supportsMargin()){prop===null||prop===void 0?void 0:prop.triggerBeforeChange(this,!0);if(!this.individualMargin)
this.individualMargin={sameValues:!1,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,};var d=this.individualMargin;if(type==ControlsSelectionBorder_4.SelectionBorderType.TOP){d.marginTop=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.RIGHT){d.marginRight=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.BOTTOM){d.marginBottom=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.LEFT){d.marginLeft=value}
d.sameValues=!1;prop===null||prop===void 0?void 0:prop.triggerChange(this,!0);this.updateStyle();wb_builder.setPageModified(!0)}else if(valueType==ControlsSelectionBorder_4.ValueType.PADDING&&this.supportsPadding()){prop===null||prop===void 0?void 0:prop.triggerBeforeChange(this,!0);if(!this.individualMargin)
this.individualMargin={sameValues:!1,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,};var d=this.individualMargin;if(type==ControlsSelectionBorder_4.SelectionBorderType.TOP){d.paddingTop=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.RIGHT){d.paddingRight=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.BOTTOM){d.paddingBottom=value}else if(type==ControlsSelectionBorder_4.SelectionBorderType.LEFT){d.paddingLeft=value}
d.sameValues=!1;prop===null||prop===void 0?void 0:prop.triggerChange(this,!0);this.updateResizeLimits();this.updateStyle();wb_builder.setPageModified(!0)}};Element.prototype.getDataDefaults=function(){return{x:0,y:0,width:this.supportsAutoWidth()?"auto":200,height:this.supportsAutoHeight()?"auto":200,minWidth:this.sysMinWidth,minHeight:this.sysMinHeight,maxWidth:1200,maxHeight:600,useMinWidth:!0,useMinHeight:!0,useMaxWidth:!1,useMaxHeight:!1,content:{}}};Element.prototype.fillDataWithDefaults=function(data){var defaults=this.getDataDefaults();this.sysMinWidth=defaults.minWidth||this.sysMinWidth;this.sysMinHeight=defaults.minHeight||this.sysMinWidth;return jquery_builder_19.default.extend(!0,defaults,data)};Element.prototype.__destruct=function(batch,noConfirm){if(batch===void 0){batch=!1}
if(noConfirm===void 0){noConfirm=!1}
if(!this.isElementPreview&&(this.id in elemIndexById)){delete elemIndexById[this.id]}
if(this.comDialog){this.comDialog.removeDialog()}
this.remove({noHistory:!0,batch:batch,noConfirm:noConfirm,ignoreCollaboration:!0})};Element.prototype.getRootGroupId=function(){return this.groupId?Service_68.Service.group.getRootGroupId(this.groupId):null};Element.prototype.canBeMoved=function(){return!0};Element.prototype.updateResizeLimits=function(){if(!this.supportsPadding()||!this.individualMargin)
return;var d=this.individualMargin;this.elem.resizableExt("option","minWidth",d.paddingLeft+d.paddingRight);this.elem.resizableExt("option","minHeight",d.paddingTop+d.paddingBottom)};Element.prototype.supportsAutoWidth=function(){return!1};Element.prototype.supportsAutoHeight=function(){return!1};Element.prototype.supportsAutoSizeFull=function(){return this.supportsAutoWidth()&&this.supportsAutoHeight()};Element.prototype.supportsPadding=function(){return!1};Element.prototype.supportsMargin=function(){return!0};Element.prototype.supportsFullWidth=function(){return!1};Element.prototype.shouldHaveAutoHeight=function(){return(this.supportsAutoHeight()&&(this.getDefaultResizeMode()==Controls_5.ControlsResizeMode.HORIZONTAL||(this.width=='100%'&&this.getClassType()=='Picture')))};Element.prototype.modeClass=function(data){return new Mode(data)};Element.prototype.switchMode=function(fromMode,toMode,initial,manual){if(initial===void 0){initial=!1}
if(manual===void 0){manual=!1}
if(!toMode)
return;var isNew=!1;if(!(fromMode in this.modes)){isNew=!0;this.modes[fromMode]=this.modeClass()}
if(!initial||isNew){this.modes[fromMode].applyFrom(this)}
if(!(toMode in this.modes)){this.modes[toMode]=this.modeClass(this.baseMode)}
if(initial||fromMode!==toMode){this.modes[toMode].applyTo(this,this.baseMode)}
this.controls.updateMargin(this.getActualMargins());this.updateAlignment()};Element.prototype.getUsedMediaGalleryItems=function(){return[]};Element.prototype.getUsedSiteStyles=function(){return[]};Element.prototype.getUsedFonts=function(){return[]};Element.prototype.backupResponsiveData=function(){if(this.respBackup)
return;this.respBackup={width:this.width,height:this.height,useMinWidth:this.useMinWidth,useMaxWidth:this.useMaxWidth,useMinHeight:this.useMinHeight,useMaxHeight:this.useMaxHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,minHeight:this.minHeight,maxHeight:this.maxHeight,isAutoSizeEnabled:this.isAutoSizeEnabled,}};Element.prototype.restoreResponsiveData=function(){if(!this.respBackup)
return;this.width=this.respBackup.width;this.height=this.respBackup.height;this.useMinWidth=this.respBackup.useMinWidth;this.useMaxWidth=this.respBackup.useMaxWidth;this.useMinHeight=this.respBackup.useMinHeight;this.useMaxHeight=this.respBackup.useMaxHeight;this.minWidth=this.respBackup.minWidth;this.maxWidth=this.respBackup.maxWidth;this.minHeight=this.respBackup.minHeight;this.maxHeight=this.respBackup.maxHeight;this.isAutoSizeEnabled=!!(this.respBackup.flexGrow||this.respBackup.flexShrink||this.respBackup.isAutoSizeEnabled);this.respBackup=null};Element.prototype.buildClipboardData=function(){if(this.isBackgroundElement)
return{};return{'text/html':'['+(this.getName()||this.getName(!0))+']','text/plain':JSON.stringify(this.serialize())}};Element.prototype.serialize=function(){var currMode=ModeManager_4.default.getMode();var m={};for(var type in this.modes){if(type===currMode)
this.modes[type].applyFrom(this);m[type]=this.modes[type].serialize()}
this.switchMode(ModeManager_4.default.getMode(),ModeManager_4.default.getMode(),!1,!1);var res={"class":this.getClassType(),id:this.id,parentId:(this.parent?this.parent.id:null),rootBlockType:this.rootBlockType,sortOrder:this.sortOrder,x:this.left,y:this.top,width:this.width,height:this.height,individualShadow:this.individualShadow?__assign({},this.individualShadow):null,individualMargin:this.individualMargin?__assign({},this.individualMargin):null,minWidth:this.minWidth,maxWidth:this.maxWidth,minHeight:this.minHeight,maxHeight:this.maxHeight,useMinWidth:this.useMinWidth,useMaxWidth:this.useMaxWidth,useMinHeight:this.useMinHeight,useMaxHeight:this.useMaxHeight,flexGrow:this.flexGrow,flexShrink:this.flexShrink,anchor:this._anchor,elemClassName:this._elemClassName,animationEffect:this._animationEffect,onclickJs:this._onclickJs,referenceId:this.referenceId,isAdminLocked:this.isAdminLocked,zIndex:this.getZIndex(),content:null,startedAsCommon:!!this.startedAsCommon,isCommon:!!this.isCommon,includePages:this.includePages,commonalityBackup:this.commonalityBackup,isLocked:this.isLocked,isFullWidth:this._isFullWidth,hiddenResp:this.hiddenResp,modes:m,respBackup:this.respBackup};if(this.srcCompositionId)
res.srcCompositionId=this.srcCompositionId;if(this.name)
res.name=this.name;var groupPath=this.groupPath?this.groupPath:(this.groupId?Service_68.Service.group.resolveGroupPath(this.groupId):null);if(groupPath)
res.groupPath=groupPath;return res};Element.prototype.appendRestorationData=function(serializedData){serializedData._restoreId=this.id;serializedData._restoreIndex=this.index};Element.prototype.getClassType=function(){return this.className};Element.prototype.getClassName=function(){return"WB_"+this.className};Element.prototype.handleCtrlKey=function(e){return!0};Element.prototype.onClick=function(e){if(Service_68.Service.textArea.isMousedowned()){Service_68.Service.textArea.resetMousedowned();return}
this.lastClick=e;Dialog_21.default.hideEditors=!0;Service_68.Service.textArea.hideEditors();(0,ContextMenu_7.hideAllContextMenus)();Service_68.Service.uiManager.getManager().closeAll();if(this.isEditableStrict&&!this.system.getEditingLocked()){if(!UserInput_7.UserInput.hotKeysMod.ctrl&&!e.metaKey){if(e.which!=3||!this.selected)
Element.unselectAll();if(!Service_68.Service.group.handleInteract(this)){this.setSelected(!0,!0)}}else if(this.handleCtrlKey(e)){this.setSelected(!this.isSelected())}}};Element.prototype.onAfterClick=function(e){};Element.prototype.onStartResize=function(ui){Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-resize-start',this)};Element.prototype.onStopResize=function(ui){if(this.parent)
this.parent.updateLayoutHeight();Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-resize-end',this)};Element.prototype.onLiveResize=function(width,height){if(typeof width!=="number")
width=this.getWidthInPixels();if(typeof height!=="number")
height=this.getHeightInPixels();this.noPhotoMsg.find('i').css('display',((width*height>=22500&&width>=140&&height>=100)?'block':'none'));this.resizeErrorMessage(width,height)};Element.prototype.onResize=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
if(this.isHidden())
return;var parent=this.getParent();if(parent)
parent.updateSize();if(!onConstruct){wb_builder.setPageModified(!0);if(!this.isElementPreview)(0,Collaboration_9.resizeElement)(this);}
this.elem.trigger("elementresize",[this])};Element.prototype.onCompositionLoaded=function(){};Element.prototype.allowControlsSpacingOverflow=function(){return!0};Element.prototype.onLoaded=function(){return jquery_builder_19.default.when()};Element.prototype.updateStyle=function(initial,langCode){if(initial===void 0){initial=!1}
var css={};if(!this.supportsAutoWidth()||this.isBackgroundElement)
this.container.css("width","100%");if(!this.supportsAutoHeight()||this.isBackgroundElement)
this.container.css("height","100%");if(this.isBackgroundElement){css={left:"",top:"",width:"100%",height:"100%",margin:"",flex:"",minWidth:"",minHeight:"",maxWidth:"",maxHeight:""}}else if(this.layoutConstraints===CommonTypes_28.ChildrenLayoutType.Absolute){css={margin:"",};if(!this.resizing){css.left=this._isFullWidth?0:this.left;css.top=this.top;css.width=this._isFullWidth?'100%':this.width;css.height=this.height}
this.updateSizeLimits()}else{css.left=css.top="";var insideRowChangedToColumn=this.isParentRowAsColumn();if(!this.resizing){if(insideRowChangedToColumn&&typeof this._width!=="number"){if(this.supportsAutoWidth()&&this.parent&&this.parent.getChildrenHorizontalAlign()!==CommonTypes_28.FlexAlignItems.Stretch)
css.width="auto";else css.width="100%"}else css.width=this.width;css.height=this.height;this.updateFlex(css);this.updateSizeLimits()}
this.updateAlignment();var myMargins=this.getActualMargins();if(myMargins&&(myMargins.marginLeft||myMargins.marginRight||myMargins.marginTop||myMargins.marginBottom)){css.margin=myMargins.marginTop+"px "+myMargins.marginRight+"px "+myMargins.marginBottom+"px "+myMargins.marginLeft+"px"}else{css.margin=''}}
this.renderShadow();this.elem.css(css);this.resizeErrorMessage()};Element.prototype.renderShadow=function(){var _a;var container=this.getContainerForShadow();if(!container){return}
container.css('box-shadow','');container.css('text-shadow','');if(this.isBackgroundElement)
return;if(this.individualShadow&&this.individualShadow.css){if(this.individualShadow.css.boxShadow){container.css('box-shadow',this.individualShadow.css.boxShadow)}
if(this.individualShadow.css['box-shadow']){container.css('box-shadow',this.individualShadow.css['box-shadow'])}
if(this.individualShadow.css.textShadow){container.css('text-shadow',(_a=this.individualShadow.css)===null||_a===void 0?void 0:_a.textShadow)}
if(this.individualShadow.css['text-shadow']){container.css('text-shadow',this.individualShadow.css['text-shadow'])}}};Element.prototype.getContainerForShadow=function(){return this.container};Element.prototype.updateFlex=function(cssObject){var css=cssObject?cssObject:this.elem[0].style;css.flex=this.flexGrow+' '+this.flexShrink+' auto'};Element.prototype.updateSizeLimits=function(clear){if(clear===void 0){clear=!1}
var css=this.elem[0].style;if(clear){css.minWidth='';css.minHeight='';css.maxWidth='';css.maxHeight=''}else{var allowMinMaxWidth=this.flexGrow>0||this.flexShrink>0||!(this.width+'').match(/^[0-9.]+$/);var allowMinMaxHeight=this.flexGrow>0||this.flexShrink>0||!(this.height+'').match(/^[0-9.]+$/);var defaultMinWidth="";var defaultMinHeight="";if(this.layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute){defaultMinWidth=this.sysMinWidth+"px";defaultMinHeight=Math.max(this._forcedMinHeight,this.sysMinHeight)+"px";allowMinMaxWidth=!(this.width+'').match(/^[0-9.]+$/);allowMinMaxHeight=!(this.height+'').match(/^[0-9.]+$/)}else if(this._forcedMinHeight>0)
defaultMinHeight=this._forcedMinHeight+"px";css.minWidth=(this.useMinWidth&&allowMinMaxWidth)?this.minWidth+'px':defaultMinWidth;css.minHeight=(this.useMinHeight&&allowMinMaxHeight)?Math.max(this._forcedMinHeight,this.minHeight)+'px':defaultMinHeight;css.maxWidth=(this.useMaxWidth&&allowMinMaxWidth)?this.maxWidth+'px':((this.getLayoutConstraints()!=="absolute")?"100%":"none");css.maxHeight=(this.useMaxHeight&&allowMinMaxHeight)?this.maxHeight+'px':""}};Element.prototype.updateAlignment=function(){if(!this.parent)
return;var parent=this.parent;var idx=parent.getChildIndex(this);var len=parent.getChildren().length;var cAlign=(len%2!=0&&(len-1)/2==idx)?CommonTypes_28.FlexAlignItems.Center:(idx<(len/2))?CommonTypes_28.FlexAlignItems.Start:CommonTypes_28.FlexAlignItems.End;var hAlignVal,vAlignVal;if(this.isParentRowAsColumn()){hAlignVal=parent.getHorizontalAlignment();vAlignVal=CommonTypes_28.FlexAlignItems.Start}else{var hAlign=parent.getHorizontalSpacing();if(hAlign==CommonTypes_28.FlexAlignContent.Center)
hAlignVal=CommonTypes_28.FlexAlignItems.Center;else if(hAlign==CommonTypes_28.FlexAlignContent.Stretch)
hAlignVal=CommonTypes_28.FlexAlignItems.Stretch;else hAlignVal=(hAlign==CommonTypes_28.FlexAlignContent.SpaceBetween||hAlign==CommonTypes_28.FlexAlignContent.SpaceAround||hAlign==CommonTypes_28.FlexAlignContent.SpaceEvenly)?cAlign:(hAlign==CommonTypes_28.FlexAlignContent.End?CommonTypes_28.FlexAlignItems.End:CommonTypes_28.FlexAlignItems.Start);vAlignVal=parent.getVerticalAlignment()}
this.controls.setAlignment(hAlignVal,vAlignVal);this.controls.setAlignmentInfo(this.buildLayoutPair())};Element.prototype.playAnimation=function(anim){var _this=this;this.container.css((0,AnimationControl_3.buildAnimCss)());this.container.removeClass('loop');if(!this.isBackgroundElement&&anim){window.requestAnimationFrame(function(){_this.container.css((0,AnimationControl_3.buildAnimCss)(anim));if(anim.loop){_this.container.addClass('loop')}else{_this.container.removeClass('loop')}})}};Element.prototype.getLayoutConstraints=function(){return this.layoutConstraints};Element.prototype.setLayoutConstraints=function(layoutType,initial){if(initial===void 0){initial=!1}
if(this._layoutConstraints===layoutType&&this._layoutConstraintsIsSet)
return;if(initial)
this._layoutConstraints=layoutType;else this.layoutConstraints=layoutType;this._layoutConstraintsIsSet=!0;if(layoutType===CommonTypes_28.ChildrenLayoutType.Absolute){this.movePushBtn.setActive(!0)}else{this.movePushBtn.setActive(!1);Service_68.Service.group.ungroupElement(this)}
this.baseMode.setMissing(this);var mode=ModeManager_4.default.getMode();if(this.parent&&(mode in this.modes)){this.modes[mode].applyTo(this,this.baseMode)}
if(this.parent&&this.parent.controls){this.setDebugLinesVisible(this.parent.controls.isDebugLinesVisible())}
this.controls.updateDebugLines(this.hierarchyLevel,this._layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute)};Element.prototype.isParentRowAsColumn=function(){if(!this.parent)
return!1;return this.parent.getChildrenLayout()===CommonTypes_28.ChildrenLayoutType.Horizontal&&!this.parent.isChildrenLayoutHorizontalNow()};Element.prototype.getActualMargins=function(){var margins=this.individualMargin?__assign({},this.individualMargin):null;if(margins&&this.isParentRowAsColumn()){margins.marginLeft=margins.marginRight=0}
if(margins){var factor=this.getCurrentModeScaleFactor();margins.marginTop=Math.round(margins.marginTop*factor);margins.marginRight=Math.round(margins.marginRight*factor);margins.marginBottom=Math.round(margins.marginBottom*factor);margins.marginLeft=Math.round(margins.marginLeft*factor)}
return margins};Element.prototype.getActualPadding=function(){var padding=__assign({},this._individualMargin);padding.paddingTop=Math.round(padding.paddingTop||0);padding.paddingRight=Math.round(padding.paddingRight||0);padding.paddingBottom=Math.round(padding.paddingBottom||0);padding.paddingLeft=Math.round(padding.paddingLeft||0);var factor=this.getCurrentModeScaleFactor();padding.paddingTop=Math.round(padding.paddingTop*factor);padding.paddingRight=Math.round(padding.paddingRight*factor);padding.paddingBottom=Math.round(padding.paddingBottom*factor);padding.paddingLeft=Math.round(padding.paddingLeft*factor);return padding};Element.prototype.getCurrentModeScaleFactor=function(){return 1};Element.prototype.setLocked=function(lock,initial){var _this=this;if(initial===void 0){initial=!1}
if(!this.isEditableStrict)
return;if(lock){this.isLocked=!0;if(!initial)
this.setSelected(!1);if(this.moveRelativeHandle)
this.moveRelativeHandle.setEnabled(!1);if(this.isResizable)
this.elem.resizableExt("disable");this.controls.setLocked(!0,function(){return _this.setLocked(!1)});this.elem.css("opacity",1);this.elem.addClass('wb_element_locked')}else{this.isLocked=!1;if(!initial)
this.setSelected(this.isSelected());if(this.moveRelativeHandle)
this.moveRelativeHandle.setEnabled(!0);if(this.isResizable)
this.elem.resizableExt("enable");this.controls.setLocked(!1);this.elem.css("opacity","");this.elem.removeClass('wb_element_locked')}};Element.prototype.updateResizeMode=function(){this.controls.setResizeMode((this.isEditableStrict)?this.getDefaultResizeMode():Controls_5.ControlsResizeMode.NONE)};Element.prototype.getDefaultResizeMode=function(){return this._isFullWidth?Controls_5.ControlsResizeMode.FULL_WIDTH:Controls_5.ControlsResizeMode.ALL};Element.prototype.updateContentSize=function(_ui){};Element.prototype.getName=function(useType){if(useType===void 0){useType=!1}
return(this.name&&!useType)?this.name:this.getClassType()};Element.prototype.getIcon=function(){return null};Element.prototype.getMaxPossibleHeight=function(){return 9999};Element.prototype.getEmtyMessageText=function(){return this.noPhotoText};Element.prototype.getEmtyMessageImage=function(){return this.noPhotoBg};Element.prototype.setEmptyMessageText=function(text){this.noPhotoText=text;this.noPhotoMsg.find('span').html(text)};Element.prototype.setEmptyMessageImage=function(image){this.noPhotoBg=image;this.noPhotoMsg.find('i').attr('class',image)};Element.prototype.displayEmptyMessage=function(display,noText,forceShowIcon){if(noText===void 0){noText=!1}
if(forceShowIcon===void 0){forceShowIcon=!1}
if(display){this.noPhotoMsg.css("display",noText?"none":"block");if(forceShowIcon)
this.noPhotoMsg.find('i').css('display','block');}else{this.noPhotoMsg.css("display","none")}};Element.prototype.setErrorMessage=function(error){this.errorMessageText=error;this.displayErrorMessage(!0);this.errorMessage.find('.wb_caption_error_text').text(error)};Element.prototype.displayErrorMessage=function(display){if(display){if(!this.errorMessage){this.errorMessage=(0,jquery_builder_19.default)('<div class="wb_caption_error">').append((0,jquery_builder_19.default)('<div class="caption_error">').append((0,jquery_builder_19.default)('<i>').addClass(this.getIcon()||'')).append('<br />').append((0,jquery_builder_19.default)('<span>').addClass('wb_caption_error_name').text(this.getName())).append('<br />').append((0,jquery_builder_19.default)('<span>').addClass('wb_caption_error_text').text(this.errorMessageText))).hide();this.elem.append(this.errorMessage)}
this.errorMessage.css("display","block")}else if(this.errorMessage){this.errorMessage.css("display","none")}};Element.prototype.resizeErrorMessage=function(width,height){var _this=this;if(this.errorMessage){if(typeof width!=="number")
width=this.getWidthInPixels();if(typeof height!=="number")
height=this.getHeightInPixels();var icon=this.errorMessage.find('i');var errorName=this.errorMessage.find('.wb_caption_error_name');var errorText=this.errorMessage.find('.wb_caption_error_text');if(this.elem.parents('body').length){var availableHeight=0;if((width>=90&&height>=60)){availableHeight=Math.min(height-errorName.height()-errorText.height(),width,70)*0.9;errorName.css({display:'inline-block'});errorText.css({display:'inline-block'})}else{availableHeight=Math.min(height,width,70);errorName.css({display:'none'});errorText.css({display:'none'})}
icon.css({lineHeight:availableHeight+'px',width:availableHeight+'px',fontSize:(availableHeight*0.8)+'px',})}else{setTimeout(function(){_this.resizeErrorMessage(width,height)},100)}}};Element.prototype.onContextMenu=function(){if(!this.menu||this.system.getEditingLocked()||this.isBackgroundElement)
return;Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-context-menu',this)};Element.prototype.setResizingEnabled=function(enabled,destroy){if(destroy===void 0){destroy=!1}
if(this.isElementPreview)
return;if(!this.isEditableStrict)
return;if(enabled){this.elem.resizableExt("enable")}else{this.elem.resizableExt("disable");this.elem.css('opacity',1);if(destroy){this.isResizable=!1;this.elem.resizableExt("destroy")}}};Element.prototype.setDraggingEnabled=function(enabled){if(this.isElementPreview||!this.isMovable||!this.moveRelativeHandle||!this.isEditableStrict||this.isLocked||this.layoutConstraints!=CommonTypes_28.ChildrenLayoutType.Absolute)
return;this.moveRelativeHandle.setEnabled(enabled)};Element.prototype.setControlsEnabled=function(enabled){if(!this.isEditableStrict)
return;if(enabled){this.controls.setVisible(!0)}else{this.controls.setVisible(!1)}};Element.prototype.setControlsVisible=function(visible){if(!this.isEditableStrict)
return;if(visible&&!this.isElementPreview){this.isControlsVisible=!0;this.controls.setHover(!0)}else{this.isControlsVisible=!1;this.controls.setHover(!1)}};Element.prototype.canUseAsBackground=function(){return!1};Element.prototype.getSupportedSizeUnits=function(){var sizeW=[{suffix:'',label:'px'},{suffix:'%',min:1,max:100,precision:2,step:1}];var sizeH=[{suffix:'',label:'px'}];if(this.supportsAutoWidth())
sizeW.push({fixedValue:'auto',label:__('auto')});if(this.supportsAutoHeight())
sizeH.push({fixedValue:'auto',label:__('auto')});return{sizeW:sizeW,sizeH:sizeH}};Element.prototype.comProperties=function(uiDef){var _this=this;if(!this.isEditableStrict)
return{};var thisClass=this;var fields;if(!this.comDialog){var sizeUnits=this.getSupportedSizeUnits();var applyFunc=void 0,cancelFunc=void 0;var chkFunc=void 0,baseUiDef_1={size:{minBodyHeight:(this.isResizable?330:220)},noScroll:!0,tabs:[{name:__('Options'),options:!0,priority:100,children:[{type:'HorizontalLayout',children:[{type:'VerticalLayout',children:[{type:'VerticalLayout',id:'individualMarginBlock',css:{marginBottom:15},children:[{type:'Label',text:[(this.supportsMargin()?__('Margin'):''),(this.supportsPadding()?__('Padding'):'')].filter(function(item){return item}).join('/')},{type:SpacingSelector_4.SpacingSelector,id:'individualMargin',noPadding:!this.supportsPadding(),noMargin:!this.supportsMargin(),allowNegativeMargin:!0}]},{type:'VerticalLayout',id:'sizeBlock',visible:(this.isResizable),children:[{type:'Label',text:__('Size')},{type:'FlowLayout',verticalAlign:'middle',id:"sizeWCont",children:[{type:'Label',text:__('Width'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'sizeW',min:1,precision:0,step:1,noFixedWidth:!0,small:!0,css:{width:140},unitsWidth:50,units:sizeUnits.sizeW,unitConverter:function(value,fromUnit,toUnit){var conversion=0;if("fixedValue" in fromUnit){value=_this.getWidthInPixels();if("suffix" in toUnit&&toUnit.suffix==="")
conversion=-1}else if("suffix" in toUnit&&toUnit.suffix==="")
conversion=1;var parent=_this.getParent();if(parent){var parentSize=parent.getWidthInPixels();if(parentSize){if(conversion===0){value=100*value/parentSize}else if(conversion===1){value=value*parentSize/100}}}
return value},init:function(){if(thisClass.elem.hasClass('wb-ext-resizable')&&!thisClass.elem.resizableExt('option','disabled')){var handles=thisClass.elem.resizableExt('option','handles');var handlesArr=handles.split(/,\ ?/);var widthDisabled=!0;for(var i in handlesArr){var h=handlesArr[i];if(h==='e'||h==='se'||h==='sw'||h==='w'||h==='ne'||h==='nw')
widthDisabled=!1}
if(widthDisabled)
this.setEnabled(!1);}},change:function(){_this.updateComPropertiesInterface();Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-sizeW-change',_this)}}],css:(wb_builder.rtl?{marginLeft:'30px',textAlign:'left'}:{marginRight:'0',textAlign:'right'})},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'Label',text:__('Height'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'sizeH',min:1,precision:0,step:1,noFixedWidth:!0,small:!0,css:{width:140},unitsWidth:50,units:sizeUnits.sizeH,unitConverter:function(value,fromUnit,toUnit){var conversion=0;if("fixedValue" in fromUnit){value=_this.getHeightInPixels();if("suffix" in toUnit&&toUnit.suffix==="")
conversion=-1}else if("suffix" in toUnit&&toUnit.suffix==="")
conversion=1;var parent=_this.getParent();if(parent){var parentSize=parent.getHeightInPixels();if(parentSize){if(conversion===0){value=100*value/parentSize}else if(conversion===1){value=value*parentSize/100}}}
return value},init:function(){if(thisClass.elem.hasClass('wb-ext-resizable')&&!thisClass.elem.resizableExt('option','disabled')){var handles=thisClass.elem.resizableExt('option','handles');var handlesArr=handles.split(/,\ ?/);var heightDisabled=!0;for(var i in handlesArr){var h=handlesArr[i];if(h==='s'||h==='se'||h==='sw'||h==='n'||h==='ne'||h==='nw')
heightDisabled=!1}
if(heightDisabled)
this.setEnabled(!1);}},change:function(){_this.updateComPropertiesInterface();Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+_this.getClassType()+'-prop-sizeH-change',_this)}}],css:(wb_builder.rtl?{marginLeft:'30px',marginTop:7,textAlign:'left'}:{marginRight:'0',marginTop:7,textAlign:'right'})},{type:'FlowLayout',id:'flexBlock',verticalAlign:'middle',children:[{type:'CheckBox',id:"flexResize",label:__("Allow to adjust size automatically"),change:this.updateComPropertiesInterface.bind(this)},],css:(wb_builder.rtl?{textAlign:'left',marginTop:(this.isResizable?15:0)}:{textAlign:'right',marginTop:(this.isResizable?15:0)})},]},{type:'VerticalLayout',id:'positionBlock',css:{marginTop:(this.isResizable?15:0)},children:[{type:'Label',text:__('Position')},{type:'FlowLayout',verticalAlign:'middle',id:"locXCont",children:[{type:'Label',text:__('From Left'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:'TextField',id:'locX',css:{width:60},styleClass:'input-sm',change:function(){Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-locX-change',thisClass)}},{type:'Label',text:' px',css:{marginBottom:'0px',fontWeight:'normal'}}],css:(wb_builder.rtl?{marginLeft:'30px',textAlign:'left'}:{marginRight:'30px',textAlign:'right'})},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'Label',text:__('From Top'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:'TextField',id:'locY',css:{width:60},styleClass:'input-sm',change:function(){Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-locY-change',thisClass)}},{type:'Label',text:' px',css:{marginBottom:'0px',fontWeight:'normal'}}],css:(wb_builder.rtl?{marginLeft:'30px',marginTop:7,textAlign:'left'}:{marginRight:'30px',marginTop:7,textAlign:'right'})}]},{type:'VerticalLayout',id:'minSizeBlock',css:{marginTop:(this.isResizable?15:0)},children:[{type:'Label',text:__('Minimum size')},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'CheckBox',id:"useMinWidth",change:this.updateComPropertiesInterface.bind(this)},{type:'Label',text:__('Width'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'minWidth',min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:(wb_builder.rtl?{marginLeft:'30px',textAlign:'left'}:{marginRight:'30px',textAlign:'right'})},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'CheckBox',id:"useMinHeight",change:this.updateComPropertiesInterface.bind(this)},{type:'Label',text:__('Height'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'minHeight',min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:(wb_builder.rtl?{marginLeft:'30px',marginTop:7,textAlign:'left'}:{marginRight:'30px',marginTop:7,textAlign:'right'})}]},{type:'VerticalLayout',id:'maxSizeBlock',css:{marginTop:(this.isResizable?15:0)},children:[{type:'Label',text:__('Maximum size')},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'CheckBox',id:"useMaxWidth",change:this.updateComPropertiesInterface.bind(this)},{type:'Label',text:__('Width'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'maxWidth',min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:(wb_builder.rtl?{marginLeft:'30px',textAlign:'left'}:{marginRight:'30px',textAlign:'right'})},{type:'FlowLayout',verticalAlign:'middle',children:[{type:'CheckBox',id:"useMaxHeight",change:this.updateComPropertiesInterface.bind(this)},{type:'Label',text:__('Height'),css:{marginBottom:'0px',fontWeight:'normal'}},{type:SizeSelector_16.SizeSelector,id:'maxHeight',min:0,step:1,precision:0,units:"px",noFixedWidth:!0,small:!0,css:{width:110}}],css:(wb_builder.rtl?{marginLeft:'30px',marginTop:7,textAlign:'left'}:{marginRight:'30px',marginTop:7,textAlign:'right'})}]},{type:'VerticalLayout',id:'anchorBlock',css:{marginTop:15},children:[{type:'Label',text:__('Anchor name'),helpText:__('Specify anchor name if you want to create a link to this element. For example if you specify value "apple" then you will be able to access this element with URL "yourwebsite.com/page-alias/#apple".')},{type:'TextField',id:'anchorName',change:function(){var value=this.getValue();value=value.replace(/^\s*(.+?)\s*$/i,'$1');this.setValue(value)}}]},{type:'VerticalLayout',id:'classNameBlock',css:{marginTop:15},children:[{type:'Label',text:__('Class name'),helpText:__('Specify class name only if you need to access this element per your custom %s code.').replace('%s','CSS/JavaScript')},{type:'TextField',id:'elemClassName',change:function(){var value=this.getValue();value=value.replace(/^\s*(.+?)\s*$/i,'$1');this.setValue(value)}}]},{type:'VerticalLayout',id:'referenceIdBlock',ignore:!BuilderConfig_34.wbConfig.adminMode,css:{marginTop:15},children:[{type:'Label',text:__('Reference ID'),helpText:__('Element ID for use with website creation %sAPIs%s').replace('%s','<a href="https://site.pro/docs/api/#websites/create" target="_blank" style="text-decoration: underline;">').replace('%s','</a>')},{type:'TextField',id:'referenceId',change:function(){var value=this.getValue();value=value.replace(/^\s*(.+?)\s*$/i,'$1');this.setValue(value)}}]},{type:'FlowLayout',id:'isAdminLockedBlock',ignore:!BuilderConfig_34.wbConfig.adminMode,css:{marginTop:15},children:[{type:'CheckBox',id:'isAdminLocked',label:__('Locked by admin'),helpText:'<div style="min-width: 180px;">'+__('If enabled, it will block element editing and deleting for clients who chooses this template.')+'<br />'+__('Be careful with this option. Enable it only if you 100% sure you want this element stay forever on all your clients\' websites.')+'</div>'}]}]},{type:'VerticalLayout',children:[{type:'Label',text:__('Show object')},{type:'CheckBox',id:"showOnPhone",label:__("Show on phone")},{type:'CheckBox',id:"showOnTablet",label:__("Show on tablet")},{type:'CheckBox',id:"showOnDesktop",label:__("Show on desktop")},{type:'CheckBox',id:"showOnTv",label:__("Show on wide screen"),css:{marginBottom:15}},{type:CommonalitySelectorControl_2.CommonalitySelectorControl,id:'commonality'},]}]}]}],buttons:[{name:__('Cancel'),click:cancelFunc=function(){if('cancelFunc' in baseUiDef_1&&typeof(baseUiDef_1.cancelFunc)==='function'){baseUiDef_1.cancelFunc.call(this,fields)}
if(thisClass.comDialog)
thisClass.comDialog.hide();}},{name:__('Apply'),primary:!0,click:applyFunc=function(){wb_builder.setPageModified(!0);Properties_1.Property.beginUserInteraction();wb_builder.site.removeAnchor(thisClass);thisClass._anchor=fields.anchorName.getValue();thisClass._elemClassName=fields.elemClassName.getValue();if(fields.referenceId){thisClass.referenceId=fields.referenceId.getValue()}
if(fields.isAdminLocked){thisClass.isAdminLocked=fields.isAdminLocked.getValue()}
var oldIsCommon=thisClass.isCommon;thisClass.commonality=fields.commonality.getValue();wb_builder.site.addAnchor(thisClass);var spacing=fields.individualMargin.getValue();thisClass.individualMargin=Object.assign({},thisClass.supportsPadding()?{paddingTop:spacing.paddingTop,paddingRight:spacing.paddingRight,paddingBottom:spacing.paddingBottom,paddingLeft:spacing.paddingLeft}:{},thisClass.supportsMargin()?{marginTop:spacing.marginTop,marginRight:spacing.marginRight,marginBottom:spacing.marginBottom,marginLeft:spacing.marginLeft,}:{});thisClass.updateResizeLimits();if(thisClass.supportsMargin())
thisClass.controls.updateMargin(thisClass.getActualMargins());if(thisClass.supportsPadding()){thisClass.controls.updatePadding(thisClass.getActualPadding())}
thisClass.isAutoSizeEnabled=fields.flexResize.getValue();thisClass.useMinWidth=!!fields.useMinWidth.getValue();thisClass.useMinHeight=!!fields.useMinHeight.getValue();thisClass.useMaxWidth=!!fields.useMaxWidth.getValue();thisClass.useMaxHeight=!!fields.useMaxHeight.getValue();thisClass.minWidth=fields.minWidth.getValue();thisClass.minHeight=fields.minHeight.getValue();thisClass.maxWidth=fields.maxWidth.getValue();thisClass.maxHeight=fields.maxHeight.getValue();thisClass.updateSizeLimits();thisClass.setLocation(parseInt(fields.locX.getValue(),10),parseInt(fields.locY.getValue(),10));if(thisClass.isResizable)
thisClass.setSize(fields.sizeW.getValue(),fields.sizeH.getValue());thisClass.onResize();thisClass.updateResizeMode();if('callbackFunc' in baseUiDef_1&&typeof(baseUiDef_1.callbackFunc)==='function'){baseUiDef_1.callbackFunc.call(this,fields)}
thisClass.updateShow();if(thisClass.comDialog)
thisClass.comDialog.hide();if(thisClass.isCommon!==oldIsCommon&&thisClass.menu&&thisClass.menuInitialized)
Element.updateContextMenuRemove(thisClass.menu,thisClass);thisClass.showOnPhone=fields.showOnPhone.getValue();thisClass.showOnTablet=fields.showOnTablet.getValue();thisClass.showOnDesktop=fields.showOnDesktop.getValue();thisClass.showOnTv=fields.showOnTv.getValue();thisClass.onLiveResize();Properties_1.Property.endUserInteraction();BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent());Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-apply',thisClass);Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-close',thisClass)}}]};var initFunc=null;if((typeof uiDef==='object')&&uiDef&&('init' in uiDef)&&(typeof uiDef.init==='function')){initFunc=uiDef.init;uiDef.init=null}
var closeFunc=null;if((typeof uiDef==='object')&&uiDef&&('close' in uiDef)&&(typeof uiDef.close==='function')){closeFunc=uiDef.close;uiDef.close=null}
this.comDialog=new PropertyDialog_7.default(__('Properties'),Service_68.Service.UIBuilder.extendDefinition(baseUiDef_1,uiDef||{}));if(initFunc)
initFunc.call(this,this.comDialog.fields);this.comDialog.onClose=function(){if(closeFunc&&thisClass.comDialog)
closeFunc.call(thisClass.comDialog,thisClass.comDialog.fields);Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-edit-end',thisClass);Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-close',thisClass)};this.comDialog._cancelFunc=cancelFunc;this.comDialog._applyFunc=applyFunc;this.comDialog.tabbedPane.onChange=function(a,b,tabDef){if(tabDef&&tabDef.type){Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+thisClass.getClassType()+'-prop-tab-'+tabDef.type,thisClass)}}}
fields=this.comDialog.fields;fields.anchorName.setText(this._anchor||'');fields.elemClassName.setText(this._elemClassName||'');if(fields.referenceId){fields.referenceId.setText(this.referenceId||'')}
if(fields.isAdminLocked){fields.isAdminLocked.setValue(this.isAdminLocked||!1)}
fields.commonality.setValue(this.commonality);fields.sizeBlock.setVisible(!this.isBackgroundElement);if(this.layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute){fields.positionBlock.setVisible(!this.isBackgroundElement);fields.individualMarginBlock.setVisible(!1);fields.minSizeBlock.setVisible(!1);fields.maxSizeBlock.setVisible(!1);fields.flexBlock.setVisible(!1)}else{fields.positionBlock.setVisible(!1);fields.individualMarginBlock.setVisible(!this.isBackgroundElement);var isDynamic=this.isSizeDynamic();fields.minSizeBlock.setVisible(!this.isBackgroundElement&&isDynamic);fields.maxSizeBlock.setVisible(!this.isBackgroundElement&&isDynamic);fields.flexBlock.setVisible(!this.isBackgroundElement)}
fields.individualMargin.setValue(jquery_builder_19.default.extend({},this.individualMargin));fields.flexResize.setValue(this.isAutoSizeEnabled);fields.useMinWidth.setValue(this.useMinWidth);fields.minWidth.setEnabled(this.useMinWidth);fields.minWidth.setValue(this.minWidth);fields.useMinHeight.setValue(this.useMinHeight);fields.minHeight.setEnabled(this.useMinHeight);fields.minHeight.setValue(this.minHeight);fields.useMaxWidth.setValue(this.useMaxWidth);fields.maxWidth.setEnabled(this.useMaxWidth);fields.maxWidth.setValue(this.maxWidth);fields.useMaxHeight.setValue(this.useMaxHeight);fields.maxHeight.setEnabled(this.useMaxHeight);fields.maxHeight.setValue(this.maxHeight);fields.showOnPhone.setValue(this.showOnPhone);fields.showOnTablet.setValue(this.showOnTablet);fields.showOnDesktop.setValue(this.showOnDesktop);fields.showOnTv.setValue(this.showOnTv);var loc=this.getLocation();fields.locX.setValue(Math.round(loc.left));fields.locY.setValue(Math.round(loc.top));if(this.isResizable){var size=this.getSize();fields.sizeW.setValue(size.width);fields.sizeH.setValue(size.height)}
this.comDialog.tabbedPane.setLocked(!1);this.comDialog.setTabbedPaneVisible(!0);if((this.virtualElement&&this.comDialog.optionsTab)||this.noOptionsTab){this.comDialog.tabbedPane.setTabVisible(this.comDialog.optionsTab,!1)}
Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-edit-start',this);Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-prop-open',this);this.comDialog.show();return fields};Element.prototype.updateComPropertiesInterface=function(){if(!this.comDialog)
return;var fields=this.comDialog.fields;var isDynamic=(this.layoutConstraints!==CommonTypes_28.ChildrenLayoutType.Absolute&&fields.flexResize.getValue())||typeof fields.sizeW.getValue()!=="number"||typeof fields.sizeH.getValue()!=="number";fields.minSizeBlock.setVisible(!this.isBackgroundElement&&isDynamic);fields.maxSizeBlock.setVisible(!this.isBackgroundElement&&isDynamic);fields.minWidth.setEnabled(fields.useMinWidth.getValue());fields.minHeight.setEnabled(fields.useMinHeight.getValue());fields.maxWidth.setEnabled(fields.useMaxWidth.getValue());fields.maxHeight.setEnabled(fields.useMaxHeight.getValue())};Element.prototype.comPropertiesField=function(field){if(!this.comDialog){var property=this.getProperty(field);if(property)
return this.system.propertiesPanel.getComponentForProperty(property);return null}
return this.comDialog.propertyDialogField(field)};Element.prototype.closeComProperties=function(){if(!this.comDialog)
return;this.comDialog.propertyDialogClose()};Element.prototype.applyComProperties=function(type){if(!this.comDialog)
return;this.comDialog.propertyDialogApply()};Element.prototype.duplicateElement=function(before,single,noChildren){if(before===void 0){before=!1}
if(single===void 0){single=!1}
if(noChildren===void 0){noChildren=!1}
var groups={};var historyQueue=[];var queueElement=function(elem,noChildren){var parent=elem.getParent();if(!parent||parent.getClassType()!=='LayoutElement')
return;var parentId=parent.id;if(!groups.hasOwnProperty(parentId))
groups[parentId]={parent:parent,indexes:{},elements:[],data:[]};groups[parentId].elements.push(elem);var elemData=elem.serialize();if(noChildren&&elemData.content&&'children' in elemData.content){elemData.content.children=[]}
groups[parentId].data.push(elemData);groups[parentId].indexes[elem.id]=parent.getChildIndex(elem)};var duplicateElements=function(group,before){var duplicates=[];group.elements=group.elements.sort(function(a,b){return(group.indexes[a.id]<group.indexes[b.id])?-1:1});group.data=group.data.sort(function(a,b){return(group.indexes[a.id]<group.indexes[b.id])?-1:1});for(var _i=0,_a=group.data;_i<_a.length;_i++){var data=_a[_i];delete data.id;data._copy=!0;data.anchor=null;ElementRegister_17.ElementRegister.createElement(data["class"],data,!1,!1,function(duplicate){duplicates.push(duplicate)})}
var lastElement=group.elements[group.elements.length-1];for(var _b=0,duplicates_1=duplicates;_b<duplicates_1.length;_b++){var duplicate=duplicates_1[_b];group.parent.addChild(duplicate,!1,!1,lastElement,!before);duplicate.onResize(!0);duplicate.updateStyle(!0);historyQueue.push(duplicate);lastElement=duplicate}};if(!single&&this.isSelected()){for(var k in Element.selected){var elem=Element.selected[k];if(elem){var skip=!1;for(var parent_29=elem.getParent();parent_29;parent_29=parent_29.getParent()){if(parent_29 instanceof Element&&parent_29.isSelected()){skip=!0;break}}
if(!skip)
queueElement(Element.selected[k],noChildren);}}}else{queueElement(this,noChildren)}
for(var parentId in groups){if(!groups.hasOwnProperty(parentId))
continue;duplicateElements(groups[parentId],before)}
if(historyQueue.length)(0,HistoryUtil_7.createAddElementsHistoryRecord)(historyQueue);};Element.prototype.setAsBackground=function(){var parent=this.parent;if(!parent||!("backgroundElement" in parent))
return;var currentBg=parent.backgroundElement;wb_builder.historyAdd('setAsBackground',{element:this.id,index:parent.getChildIndex(this),parent:parent.id,bgElement:currentBg?new ElementRegister_17.ElementRestorationData(currentBg):null,},function(data){var element=window.getElementById(data.element);var parent=window.getElementById(data.parent);if(!element||!parent){console.error("Unable to undo 'setAsBackground': related elements not found.");return}
element.setParent(null);parent.addChild(element,!1,!1,parent.getChildAt(data.index));if(data.bgElement){var bgElement=data.bgElement.restore();if(bgElement){bgElement.setParent(null);parent.backgroundElement=bgElement;bgElement.updateStyle();BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent())}}else{parent.backgroundElement=null;BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent())}
parent.updateStyle();data.bgElement=null},function(data){var element=window.getElementById(data.element);var parent=window.getElementById(data.parent);if(!element||!parent){console.error("Unable to redo 'setAsBackground': related elements not found.");return}
var currentBg=parent.backgroundElement;data.bgElement=currentBg?new ElementRegister_17.ElementRestorationData(currentBg):null;data.index=parent.getChildIndex(element);element.setSelected(!1);parent.removeChild(element);parent.backgroundElement=element;parent.updateStyle();BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent())});this.setSelected(!1);parent.removeChild(this);parent.backgroundElement=this;parent.updateStyle();BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent());Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-setAsBg',this)};Element.prototype.setupContextMenu=function(){var _this=this;this.menuInitialized=!1;this.menu=new ContextMenu_7.ContextMenu("wb_element_contextmenu"+this.index);this.menu.bind(this.editBtn.elem);this.menu.pasiveBind(this.controls.elem);this.menu.onShow=function(ctxMenu,e){if(_this.system.getEditingLocked())
return!1;if(!_this.menuInitialized){_this.menuInitialized=!0;_this.initContextMenu();Element.updateContextMenuRemove(ctxMenu,_this)}
if(!_this.isSelected()){Element.unselectAll();Service_68.Service.textArea.hideEditors();_this.setSelected(!0)}
_this.updateContextMenu((e&&e.currentTarget&&(0,jquery_builder_19.default)(e.currentTarget).hasClass('wb-tree-view-item-content')));var ea=new BuilderEvent_29.ContextMenuEvent(ctxMenu,(e?e.pageX:0),(e?e.pageY:0),_this);BuilderEvent_29.GlobalEvents.triggerEvent('contextmenu.show',ea);return!0}};Element.prototype.initContextMenu=function(){var _this=this;if(!this.menu)
return;var menu=this.menu;var thisClass=this;menu.addItem("selectParentMenu",__("Select parent"),this.selectParentMenu,!1,!1,null,"fa fa-sitemap");if(wb_builder.isTouchDevice){menu.addItem("deselect",__("Deselect all"),function(){Service_68.Service.element.unselectAll()},!1,!1,null,"fa fa-mouse-pointer")}
menu.addSeparator();menu.addItem("duplicateElements",__("Duplicate"),function(){_this.duplicateElement()},!1,!1,null,"fa fa-clone",!0);menu.addItem("copy",__("Copy"),function(){var obj;if(thisClass.isSelected()){var parent=thisClass.getParent(),otherParent;if(!parent)
return;obj=[];for(var k in Element.selected){var elem=Element.selected[k];if(elem&&(otherParent=elem.getParent())&&otherParent.id===parent.id){obj.push(elem.buildClipboardData())}}(0,ClipboardApi_2.storeItemsToClipboard)(obj)}else{obj=thisClass.buildClipboardData();(0,ClipboardApi_2.storeItemsToClipboard)([obj])}},!1,!1,null,"fa fa-files-o",!0);menu.addItem("paste",__("Paste"),null,!1,!1,null,"fa fa-clipboard");menu.addSeparator();menu.addItem("lock",__("Lock"),function(){wb_builder.setPageModified(!0);var lock=!_this.isLocked;var elements=[];if(thisClass.isSelected()){for(var k in Element.selected){var elem=Element.selected[k];if(elem)
elements.push(elem);}}else{elements.push(_this)}(0,HistoryUtil_7.createLockingChangeHistoryRecord)(elements);for(var _i=0,elements_24=elements;_i<elements_24.length;_i++){var elem=elements_24[_i];elem.setLocked(lock)}},!1,!1,null,"glyphicon glyphicon-lock",!0);var saveHistoryState=function(){var k,el,selElements=[];for(k in Element.selected){el=Element.selected[k];if(el.isLocked)
continue;selElements.push(el)}(0,HistoryUtil_7.createMoveElementsHistoryRecord)(selElements)};var alignSubmenu=new ContextMenu_7.ContextMenu();alignSubmenu.addItem("alignLeft",__("Left"),function(){wb_builder.setPageModified(!0);saveHistoryState();var commonValue=null;Service_68.Service.element.eachSelected(function(){var x=this.getLocation().left;commonValue=(commonValue===null)?x:Math.min(x,commonValue)}).eachSelected(function(){if(!this.isLocked){this.setLocation(commonValue,null);this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-left");alignSubmenu.addItem("alignVertical",__("Middle (vertical)"),function(){wb_builder.setPageModified(!0);saveHistoryState();var minLeft=null,maxLeft=null;Service_68.Service.element.eachSelected(function(){var w=this.getWidthInPixels();var l=this.getLocation().left;var r=w+l;if(maxLeft===null||maxLeft<r){maxLeft=r}
if(minLeft===null||minLeft>l){minLeft=l}}).eachSelected(function(){if(!this.isLocked){this.setLocation((minLeft+(maxLeft-minLeft-this.getWidthInPixels())/2),null);this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-vertical");alignSubmenu.addItem("alignRight",__("Right"),function(){wb_builder.setPageModified(!0);saveHistoryState();var commonValue=null;Service_68.Service.element.eachSelected(function(){var x=this.getLocation().left+this.getWidthInPixels();commonValue=(commonValue===null)?x:Math.max(x,commonValue)}).eachSelected(function(){if(!this.isLocked){this.setLocation(commonValue-this.getWidthInPixels(),null);this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-right");alignSubmenu.addItem("alignTop",__("Top"),function(){wb_builder.setPageModified(!0);saveHistoryState();var commonValue=null;Service_68.Service.element.eachSelected(function(){var y=this.getLocation().top;commonValue=(commonValue===null)?y:Math.min(y,commonValue)}).eachSelected(function(){if(!this.isLocked){this.setLocation(null,commonValue);this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-top");alignSubmenu.addItem("alignHorizontal",__("Middle (horizontal)"),function(){wb_builder.setPageModified(!0);saveHistoryState();var commonValue=0;var bestHeight=null;Service_68.Service.element.eachSelected(function(){var h=this.getHeightInPixels();if(bestHeight===null||bestHeight<h){bestHeight=h;commonValue=this.getLocation().top+h/2}}).eachSelected(function(){if(!this.isLocked){this.setLocation(null,Math.floor(commonValue-this.getHeightInPixels()/2));this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-horizontal");alignSubmenu.addItem("alignBottom",__("Bottom"),function(){wb_builder.setPageModified(!0);saveHistoryState();var commonValue=null;Service_68.Service.element.eachSelected(function(){var y=this.getLocation().top+this.getHeightInPixels();commonValue=(commonValue===null)?y:Math.max(y,commonValue)}).eachSelected(function(){if(!this.isLocked){this.setLocation(null,commonValue-this.getHeightInPixels());this.onResize()}})},!1,!1,null,"glyphicon glyphicon-object-align-bottom");menu.addItem("align",__("Align"),alignSubmenu,!1,!1,null,"glyphicon glyphicon-object-align-left","only");var distributeSubmenu=new ContextMenu_7.ContextMenu();distributeSubmenu.addItem("distributeHorizontal",__("Horizontally"),function(){wb_builder.setPageModified(!0);saveHistoryState();var min=null,max=null,total=0;var elementArr=[];Service_68.Service.element.eachSelected(function(){if(this.isLocked)
return;var pos=this.getLocation();var w=this.getWidthInPixels();total+=w;min=(min===null)?pos.left:Math.min(pos.left,min);max=(max===null)?(pos.left+w):Math.max((pos.left+w),max);elementArr.push({elem:this,pos:pos})});if(elementArr.length>2){var separation=Math.floor((max-min-total)/(elementArr.length-1));elementArr.sort(function(a,b){if(a.pos.left===b.pos.left){if(a.pos.top===b.pos.top)
return 0;return(a.pos.top<b.pos.top)?-1:1}
return(a.pos.left<b.pos.left)?-1:1});var prevValue=0,value;for(var i=0;i<elementArr.length;i++){if(i>0){value=prevValue+separation;elementArr[i].elem.setLocation(value,null)}else value=elementArr[i].pos.left;prevValue=value+elementArr[i].elem.getWidthInPixels()}}},!1,!1,null,"glyphicon glyphicon-option-horizontal");distributeSubmenu.addItem("distributeVertical",__("Vertically"),function(){wb_builder.setPageModified(!0);saveHistoryState();var min=null,max=null,total=0;var elementArr=[];Service_68.Service.element.eachSelected(function(){if(this.isLocked)
return;var pos=this.getLocation();var h=this.getHeight();total+=h;min=(min===null)?pos.top:Math.min(pos.top,min);max=(max===null)?(pos.top+h):Math.max((pos.top+h),max);elementArr.push({elem:this,pos:pos})});if(elementArr.length>2){var separation=Math.floor((max-min-total)/(elementArr.length-1));elementArr.sort(function(a,b){if(a.pos.top===b.pos.top){if(a.pos.left===b.pos.left)
return 0;return(a.pos.left<b.pos.left)?-1:1}
return(a.pos.top<b.pos.top)?-1:1});var prevValue=0,value;for(var i=0;i<elementArr.length;i++){if(i>0){value=prevValue+separation;elementArr[i].elem.setLocation(null,value)}else value=elementArr[i].pos.top;prevValue=value+elementArr[i].elem.getHeightInPixels()}}},!1,!1,null,"glyphicon glyphicon-option-vertical");menu.addItem("distribute",__("Distribute"),distributeSubmenu,!1,!1,null,"glyphicon glyphicon-option-horizontal","only");menu.addItem('group',__('Group'),function(){wb_builder.setPageModified(!0);var elements=[];for(var k in Element.selected)
elements.push(Element.selected[k]);Service_68.Service.group.groupElements(elements)},!1,!1,null,'fa fa-object-group','only');if(this.isMovable||!this.parent){var orderMi=new ContextMenu_7.ContextMenu();orderMi.addItem("indexMax",__("Bring to front"),function(){var _a;wb_builder.setPageModified(!0);if(thisClass.parent)
thisClass.parent.zIndexHandle.changeLayer(thisClass,"top");else(_a=wb_builder.getCurrentContextCanvas())===null||_a===void 0?void 0:_a.zIndexHandle.changeLayer(thisClass,"top")},!1,!1,null,"glyphicon glyphicon-arrow-up");orderMi.addItem("indexMin",__("Send to back"),function(){var _a;wb_builder.setPageModified(!0);if(thisClass.parent)
thisClass.parent.zIndexHandle.changeLayer(thisClass,"bottom");else(_a=wb_builder.getCurrentContextCanvas())===null||_a===void 0?void 0:_a.zIndexHandle.changeLayer(thisClass,"bottom")},!1,!1,null,"glyphicon glyphicon-arrow-down");orderMi.addItem("indexUp",__("Bring forward"),function(){var _a;wb_builder.setPageModified(!0);if(thisClass.parent)
thisClass.parent.zIndexHandle.changeLayer(thisClass,"up");else(_a=wb_builder.getCurrentContextCanvas())===null||_a===void 0?void 0:_a.zIndexHandle.changeLayer(thisClass,"up")},!1,!1,null,"glyphicon glyphicon-arrow-up");orderMi.addItem("indexDown",__("Send backwards"),function(){var _a;wb_builder.setPageModified(!0);if(thisClass.parent)
thisClass.parent.zIndexHandle.changeLayer(thisClass,"down");else(_a=wb_builder.getCurrentContextCanvas())===null||_a===void 0?void 0:_a.zIndexHandle.changeLayer(thisClass,"down")},!1,!1,null,"glyphicon glyphicon-arrow-down");menu.addItem("order",__("Order"),orderMi,!1,!1,null,"glyphicon glyphicon-list")}
menu.addItem("remove",__("Remove"),null,!1,!1,null,"glyphicon glyphicon-remove",!0);menu.addSeparator();menu.addItem("setAsBackground",__("Set as background"),function(){return _this.setAsBackground()},!1,!1,null,"fa fa-link");menu.setVisible("setAsBackground",!1)};Element.updateContextMenuRemove=function(menu,item){if(!menu||!wb_builder.site)
return;var submenu=null,submenu2=null;menu.removeItem('remove');var clb=function(ev,single){Service_68.Service.element.removeOrHideElementsWithUserInteraction(item.isSelected()?Element.selected:[item],single?wb_builder.pageId:null,null)};var clbSingle=function(ev){var pc=Object.keys(wb_builder.site.pages).length;clb(ev,(pc>1))};var pagesCount=Object.keys(wb_builder.site.pages).length;var showExtraOpts=item.isCommon&&pagesCount>1;if(wb_builder.site.languages.length>0){submenu=new ContextMenu_7.ContextMenu();submenu.addItem("lang_all",__("From all languages"),clbSingle);if(showExtraOpts){submenu2=new ContextMenu_7.ContextMenu();submenu2.addItem("page_single_lang_all",__("From this page"),clbSingle);submenu2.addItem("page_all_lang_all",__("From all pages"),clb);submenu.setSubmenu("lang_all",submenu2)}
for(var i=0,lang;(lang=wb_builder.site.languages[i]);i++){var lnClb=function(ev,lang,single){if(single===void 0){single=!1}
Service_68.Service.element.removeOrHideElementsWithUserInteraction(item.isSelected()?Element.selected:[item],single?wb_builder.pageId:null,lang.code)};var lnClbSingle=function(ev,lang){lnClb(ev,lang,!0)};submenu.addItem("lang_"+lang.code,'<i class="wb-multi-mi-remove-flag flag-icon-'+BuilderConfig_34.wbConfig.getCountryCode(lang.code)+'"></i>'+lang.name,lnClbSingle,!1,!1,lang,undefined,undefined,!1);if(showExtraOpts){submenu2=new ContextMenu_7.ContextMenu();submenu2.addItem("page_single_lang_"+lang.code,__("From this page"),lnClbSingle,!1,!1,lang);submenu2.addItem("page_all_lang_"+lang.code,__("From all pages"),lnClb,!1,!1,lang);submenu.setSubmenu("lang_"+lang.code,submenu2)}}}else{if(showExtraOpts){submenu=new ContextMenu_7.ContextMenu();submenu.addItem("page_single",__("From this page"),clbSingle);submenu.addItem("page_all",__("From all pages"),clb)}}
menu.insertItemAt(menu.getIndexById('order'),"remove",__("Remove"),clbSingle,!1,!1,null,"glyphicon glyphicon-remove",!0);if(submenu)
menu.setSubmenu('remove',submenu);};Element.prototype.updateContextMenu=function(isSidebar){if(isSidebar===void 0){isSidebar=!1}
if(!this.menu)
return;this.menu.setName("lock",(this.isLocked?__("Unlock"):__("Lock")));var cc=0;for(var id in Element.selected){cc++;if(cc>=2)
break}
if(cc>=2){this.menu.setMultiMode(!0)}else{this.menu.setMultiMode(!1)}
var page=wb_builder.site.getPage(wb_builder.pageId);this.selectParentMenu.update(this);this.menu.setVisible("selectParentMenu",(this.parent&&!isSidebar)?!0:!1);this.menu.setVisible("setAsBackground",this.canUseAsBackground());this.menu.setVisible("modeVisibility",!page||!page.popupMode||!page.popupWidth);this.menu.setVisible('order',this.isZIndexEnabled());if(this.getClassType()=='LayoutElement')
Service_68.Service.paste.addPaste(this.menu,this,this,!0);else if(this.parent)
Service_68.Service.paste.addPaste(this.menu,this.parent,this,!0);else this.menu.setVisible("paste",!1);if(this.layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute){this.menu.setVisible('group',!0);this.menu.setVisible('distribute',!0);this.menu.setVisible('align',!0)}else{this.menu.setVisible('group',!1);this.menu.setVisible('distribute',!1);this.menu.setVisible('align',!1)}
var parent=this.parent;var isRoot=!(parent&&(parent instanceof Element)&&parent.getClassType()=='LayoutElement');var canCopy=!isRoot&&this.getClassType()!="Menu";this.menu.setVisible("copy",canCopy);this.menu.setVisible('duplicateElements',canCopy);this.menu.setVisible('remove',((this.parent||!this.rootBlockType)?!0:!1));this.menu.setVisible('lock',(this.parent?!0:!1));this.menu.fixSeparators()};Element.prototype.setSelected=function(selected,skipGroup,skipFade,isSecondarySelection){if(skipGroup===void 0){skipGroup=!1}
if(skipFade===void 0){skipFade=!1}
if(isSecondarySelection===void 0){isSecondarySelection=!1}
if(!skipGroup&&Service_68.Service.group.handleSelect(this))
return;this.controls.setSelected(selected,isSecondarySelection);if(selected){this.elem.addClass("wb-selected");if(!skipFade&&!isSecondarySelection)
this.controls.setHover(!0);Element.selected[this.id]=this;if(!isSecondarySelection){if(Service_68.Service.HelpSystemPlayer){Service_68.Service.HelpSystemPlayer.notify("item-plugin-"+this.getClassType()+"-select")}(0,jquery_builder_19.default)('<input type="checkbox" class="focus-hack" style="position: fixed;left:-10000px">').appendTo(this.controls.elem).focus()}}else{this.elem.removeClass("wb-selected");this.controls.setHover(!1);delete Element.selected[this.id];this.controls.elem.children('.focus-hack').remove()}
this.selected=selected;BuilderEvent_29.GlobalEvents.triggerEvent("selection.changed",new BuilderEvent_29.SelectionChangedBuilderEvent(this,selected?"select":"deselect",isSecondarySelection));var elem=this;while(elem&&elem.parent){if('setLastSelectedByChild' in elem.parent&&typeof elem.parent.setLastSelectedByChild==='function'){elem.parent.setLastSelectedByChild(elem)}
elem=elem.parent}};Element.prototype.isSelected=function(){return this.selected};Element.prototype.show=function(responsive,updateParentSize,manual){if(responsive===void 0){responsive=!1}
if(updateParentSize===void 0){updateParentSize=!1}
if(manual===void 0){manual=!1}
var changed=this.hiddenResp||this.hidden;if(responsive){this.hiddenResp=!1;if(manual)
wb_builder.setPageModified(!0);}else{this.hidden=!1}
this.updateVisibility();if(changed)
wb_builder.invalidateSiteStructure();};Element.prototype.blink=function(scrollToElement){if(scrollToElement===void 0){scrollToElement=!1}
if(!this.elem||!this.controls)
return;if(scrollToElement){window.scrollTo(window.scrollX,this.elem.offset().top-Service_68.Service.uiManager.getManager().getToolbarHeight()-50)}
this.controls.blink()};Element.prototype.hide=function(responsive,updateParentSize,manual){if(responsive===void 0){responsive=!1}
if(updateParentSize===void 0){updateParentSize=!1}
if(manual===void 0){manual=!1}
var changed=!(this.hiddenResp||this.hidden);if(responsive){this.hiddenResp=!0;if(manual)
wb_builder.setPageModified(!0);}else{this.hidden=!0}
this.updateVisibility(updateParentSize);if(changed)
wb_builder.invalidateSiteStructure();};Element.prototype.setHiddenInMode=function(mode,hidden){if(ModeManager_4.default.getMode()===mode){if(hidden)
this.hide(!0);else this.show(!0)}else{if(!this.modes.hasOwnProperty(mode))
this.modes[mode]=this.modeClass();this.modes[mode].hidden=hidden}};Element.prototype.getHiddenInMode=function(mode){if(ModeManager_4.default.getMode()===mode)
return this.hiddenResp;return(mode in this.modes)&&this.modes[mode].hidden};Element.prototype.updateVisibility=function(updateParentSize){if(updateParentSize===void 0){updateParentSize=!1}
if(this.hiddenResp||this.hidden)
this.elem.addClass("hidden");else this.elem.removeClass("hidden");if(updateParentSize&&this.parent)
this.parent.updateSize();};Element.prototype.isHidden=function(responsive){if(responsive===void 0){responsive=!1}
if(responsive){if(this.hiddenResp)
return!0;else return!1}else{if(this.hidden)
return!0;else return!1}};Element.prototype.updateShow=function(onConstruct){if(onConstruct===void 0){onConstruct=!1}
if(!wb_builder.site)
return;var multiLang=(wb_builder.site.languages.length>0);var wasMultiLang=(wb_builder.site.languages.length==0&&wb_builder.site.currSelLang);var hide=!this.isBackgroundElement&&((multiLang||wasMultiLang)&&!this.isIncludedOnPage(wb_builder.pageId,wb_builder.site.currSelLang));if(wasMultiLang&&hide){this.remove({noHistory:!1,noConfirm:!0});return}
if(hide&&!this.isHidden()){this.hide();if(!onConstruct&&this.parent)
this.parent.updateSize();}else if(!hide&&this.isHidden()){this.show();if(!onConstruct&&this.parent)
this.parent.updateSize();}};Element.prototype.onBeforeRemove=function(options){if(!this.isEditableStrict){options.preventRemoval=!0;return}};Element.prototype.remove=function(options){if(!options||typeof options!=="object"){console.error("Element.remove() is called with invalid parameters");return}
if(this.isElementPreview&&!options.noHistory){options=jquery_builder_19.default.extend({},options,{noHistory:!0})}
if(this.startedAsCommon&&!this.isElementPreview&&(options.ignoreCollaboration||!(0,Collaboration_9.isCollaborationActive)())){wb_builder.excludedElements.push(this.serialize());this.excluded=!0}(0,ContextMenu_7.hideAllContextMenus)();if(!options.noHistory&&!options.isRecursive)(0,HistoryUtil_7.createRemoveElementsHistoryRecord)([this],options);this.releaseResources(options);this.snapHandle.handleStop();this.controls.dispose();if(this.isResizable)
this.elem.resizableExt("destroy");if(!this.excluded&&!this.isElementPreview)
wb_builder.site.removeAnchor(this,undefined,options.batch);if(Element.selected[this.id]){delete Element.selected[this.id];if(!options.batch){BuilderEvent_29.GlobalEvents.triggerEvent("selection.changed",new BuilderEvent_29.SelectionChangedBuilderEvent(this,"deselect"))}}
var parent=this.parent||this.system.bodyInstance;parent.zIndexHandle.remove(this);parent.removeChild(this,options.batch);Service_68.Service.group.ungroupElement(this,options.batch);if(this.menu)
this.menu.dispose();if(this.selectParentMenu)
this.selectParentMenu.dispose();this.removed=!0;this.elem.wbUnsetClassInstance();if(!options.ignoreCollaboration&&!this.isElementPreview){(0,Collaboration_9.removeElement)(this,options.deleteFromAllPages||!1)}
if(this.comDialog){this.comDialog.removeDialog();this.comDialog=null}};Element.prototype.releaseResources=function(options){};Element.prototype.setPageInclusion=function(pageId,langCode,included,noHistory){if(noHistory===void 0){noHistory=!1}
var isCommon=this.isCommon,includePages=jquery_builder_19.default.extend(!0,{},this.includePages),includePagesLen=(Object.keys(includePages).length>0);var commonalityBackup=jquery_builder_19.default.extend(!0,{},this.commonality);var elementRemovedFromEverywhere=!1;var i;var convertNonCommonToCommon=function(allLangsTrueValue){if(isCommon)
return;isCommon=!0;var prevIncludePages=includePages;includePages={};if(typeof allLangsTrueValue==="object")
allLangsTrueValue=jquery_builder_19.default.extend({},allLangsTrueValue);includePages[wb_builder.pageId]=Object.keys(prevIncludePages).length?prevIncludePages:allLangsTrueValue};var convertShowOnAllToShowOnSpecific=function(allLangsTrueValue){if(!isCommon||Object.keys(includePages).length)
return;for(var i_2 in wb_builder.site.pages){if(!wb_builder.site.pages.hasOwnProperty(i_2))
continue;if(typeof allLangsTrueValue==="object")
allLangsTrueValue=jquery_builder_19.default.extend({},allLangsTrueValue);includePages[wb_builder.site.pages[i_2].id]=allLangsTrueValue}};if(wb_builder.site.languages.length>0){var allLangsFalse={},allLangsTrue={};jquery_builder_19.default.each(wb_builder.site.languages,function(){allLangsFalse[this.code]=!1;allLangsTrue[this.code]=!0});var setIncludePagesLangValue=function(pageId,langCode,value){var pid=pageId;if(includePages.hasOwnProperty(pid)){if(typeof includePages[pid]!=="object")
includePages[pid]=jquery_builder_19.default.extend({},includePages[pid]?allLangsTrue:allLangsFalse)}else if(value){includePages[pid]=jquery_builder_19.default.extend({},allLangsFalse)}else{return}
includePages[pid][langCode]=value};if(included){if(!includePagesLen)
return;if(pageId===null){if(langCode===null){isCommon=!0;includePages={}}else{convertNonCommonToCommon(allLangsTrue);for(i in wb_builder.site.pages){if(!wb_builder.site.pages.hasOwnProperty(i))
continue;setIncludePagesLangValue(wb_builder.site.pages[i].id,langCode,!0)}}}else if(!isCommon&&pageId===wb_builder.pageId){if(langCode===null){includePages={}}else{includePages[langCode]=!0}}else{convertNonCommonToCommon(allLangsTrue);if(langCode===null){includePages[pageId]=jquery_builder_19.default.extend({},allLangsTrue)}else{setIncludePagesLangValue(pageId,langCode,!0)}}}else{if(isCommon){convertShowOnAllToShowOnSpecific(allLangsTrue);if(pageId===null){if(langCode===null){elementRemovedFromEverywhere=!0}else{for(i in wb_builder.site.pages){if(!wb_builder.site.pages.hasOwnProperty(i))
continue;setIncludePagesLangValue(wb_builder.site.pages[i].id,langCode,!1)}}}else{if(langCode===null){delete includePages[pageId];if(!Object.keys(includePages).length)
elementRemovedFromEverywhere=!0}else{setIncludePagesLangValue(pageId,langCode,!1)}}}else if(pageId===wb_builder.pageId){if(langCode===null){elementRemovedFromEverywhere=!0}else{if(!includePagesLen)
includePages=allLangsTrue;includePages[langCode]=!1}}else{return}}}else{if(included){if(pageId===null){isCommon=!0;includePages={}}else{convertNonCommonToCommon(!0);includePages[pageId]=!0}}else{if(pageId===null){elementRemovedFromEverywhere=!0}else if(isCommon){convertShowOnAllToShowOnSpecific(!0);delete includePages[pageId];if(!Object.keys(includePages).length){elementRemovedFromEverywhere=!0}}else if(pageId===wb_builder.pageId){elementRemovedFromEverywhere=!0}else{return}}}
if(elementRemovedFromEverywhere){isCommon=!1;includePages={"dummy":!1}}
if(!noHistory){var historyFunc=function(data,type){var element=window.getElementById(data.index);if(!element){console.error("Unable to "+type+" 'hideElementInLang': can't find element "+data.index);return}
this.data={index:data.index,commonality:jquery_builder_19.default.extend(!0,{},element.commonality),};element.commonality=data.commonality};wb_builder.historyAdd('hideElementInLang',{index:this.id,commonality:commonalityBackup,},function(data){historyFunc.call(this,data,'undo')},function(data){historyFunc.call(this,data,'redo')})}
this.isCommon=isCommon;this.includePages=includePages;if(isCommon!==this.isCommon&&this.menu&&this.menuInitialized)
Element.updateContextMenuRemove(this.menu,this);this.updateShow()};Element.prototype.isIncludedOnPage=function(pageId,langCode,isCommon,includePages){isCommon=(isCommon!==undefined)?isCommon:this.isCommon;includePages=(includePages!==undefined)?includePages:this.includePages;return CommonalitySelectorControl_2.CommonalitySelectorControl.isElementVisible(isCommon,includePages,langCode,pageId)};Element.prototype.getInheritedLanguageVisibility=function(){var inherited={};if(this.system.site.languages.length>0){var lang=void 0;var parent_30;for(var _i=0,_a=this.system.site.languages;_i<_a.length;_i++){lang=_a[_i];inherited[lang.code]=!0}
for(parent_30=this.getParent();parent_30&&!parent_30.isCommon;parent_30=parent_30.getParent()){if(!parent_30.includePages||!Object.keys(parent_30.includePages).length)
continue;for(var _b=0,_c=this.system.site.languages;_b<_c.length;_b++){lang=_c[_b];if(!parent_30.includePages.hasOwnProperty(lang.code)||!parent_30.includePages[lang.code])
inherited[lang.code]=!1}}}
return inherited};Element.prototype.setParent=function(parent,initial){var _a,_b;if(initial===void 0){initial=!1}
this.parent=parent?parent:null;this.updateHierarchyLevel(!1,initial);if((_a=this.parent)===null||_a===void 0?void 0:_a.updateContainment)(_b=this.parent)===null||_b===void 0?void 0:_b.updateContainment(this);};Element.prototype.getParent=function(){return this.parent};Element.prototype.getParentWithActiveLink=function(){var parent;for(parent=this.getParent();parent&&typeof parent.getParent==="function";parent=parent.getParent()){if(typeof parent.hasActiveLink==="function"&&parent.hasActiveLink())
return parent}
return null};Element.prototype.getCommonParent=function(){var parent;for(parent=this.getParent();parent&&typeof parent.getParent==="function";parent=parent.getParent()){if(typeof parent.isCommon==="boolean"&&parent.isCommon)
return parent}
return null};Element.prototype.forceMinHeightCss=function(minHeight){this._forcedMinHeight=minHeight;this.updateSizeLimits()};Element.prototype.setSize=function(width,height,initial){if(initial===void 0){initial=!1}
if(width===null&&height===null)
return!1;var changed=!1;if(width){if(this._width!==width){changed=!0;if(initial)
this._width=width;else this.width=width;this.elem.css({width:width,right:""})}}
if(height){if(this._height!==height){changed=!0;if(initial)
this._height=height;else this.height=height;this.elem.css("height",height)}}
if(changed)
this.updateContentSize();return changed};Element.prototype.setLocation=function(left,top,fast,initial){if(fast===void 0){fast=!1}
if(initial===void 0){initial=!1}
var changed=!1;if(left!==!1&&typeof(left)!=="undefined"&&left!==null){if(this._left!==left){changed=!0;if(initial)
this._left=left;else this.left=left}}
if(top!==!1&&typeof(top)!=="undefined"&&top!==null){if(this._top!==top){changed=!0;if(initial)
this._top=top;else this.top=top;this.elem.css("top",top+"px")}}
if(changed)
this.snapHandle.handleUpdate(fast);return changed};Element.prototype.getLocation=function(fast){if(fast===void 0){fast=!1}
return{left:this.left,top:this.top}};Element.prototype.getAbsoluteLocation=function(fast){if(fast===void 0){fast=!1}
var pos=this.getLocation(fast);if(this.parent){this.parent.cacheBounds();pos.left+=this.parent.offsetLeft;pos.top+=this.parent.top}
return pos};Element.prototype.getSize=function(){return{width:this.width,height:this.height,}};Element.prototype.getWidth=function(){return this.width};Element.prototype.getHeight=function(){return this.height};Element.prototype.getSizeInPixels=function(){return{width:(typeof this.width==="number")?this.width:this.elem.outerWidth(),height:(typeof this.height==="number")?this.height:this.elem.outerHeight(),}};Element.prototype.getWidthInPixels=function(){return(typeof this.width==="number")?this.width:this.elem.outerWidth()};Element.prototype.getHeightInPixels=function(){return(typeof this.height==="number")?this.height:this.elem.outerHeight()};Element.prototype.getAnchoredScrollPosition=function(){return Math.floor(this.elem.offset().top-this.system.bodyInstance.getCurrentPaddingTop()-Service_68.Service.uiManager.getManager().getToolbarHeight()-this.system.viewportSizeControls.getElem().outerHeight())};Element.prototype.isSizeDynamic=function(){return(this.layoutConstraints!==CommonTypes_28.ChildrenLayoutType.Absolute&&(this.isAutoSizeEnabled))||typeof this._width!=="number"||typeof this._height!=="number"};Element.prototype.cacheBounds=function(){var _a;var pos=this.elem.position();this._left=pos.left;this._top=pos.top;this.offsetLeft=pos.left+(this.parent?this.parent.offsetLeft:0);this.offsetTop=pos.top+(this.parent?this.parent.offsetTop:0);(_a=this.elem.offset(),this.pageLeft=_a.left,this.pageTop=_a.top)};Element.prototype.getBounds=function(asArray,fast){if(asArray===void 0){asArray=!1}
if(fast===void 0){fast=!1}
var left=this.left,top=this.top;var size=this.getSizeInPixels();if(asArray)
return[left,top,left+size.width,top+size.height];var parent=this.getParent();return{left:left,top:top,width:size.width,height:size.height,left1:left,top1:top,left2:left+size.width,top2:top+size.height,pageLeft:(parent?parent.pageLeft:this.pageLeft-left)+left,pageTop:(parent?parent.pageTop:this.pageTop-top)+top}};Element.prototype.getBoundingRect=function(scrollAware){if(scrollAware===void 0){scrollAware=!1}
return Element.getElementBoundingRect(this.rawElem,scrollAware)};Element.prototype.getContentRect=function(scrollAware){if(scrollAware===void 0){scrollAware=!1}
var bounds=Element.getElementBoundingRect(this.container[0],scrollAware);var padding=this.getContentPadding();if(!padding)
return bounds;var boundsNew={x:bounds.left+padding.paddingLeft,y:bounds.top+padding.paddingTop,left:bounds.left+padding.paddingLeft,top:bounds.top+padding.paddingTop,right:bounds.right-padding.paddingRight,bottom:bounds.bottom-padding.paddingBottom,width:bounds.width-padding.paddingLeft-padding.paddingRight,height:bounds.height-padding.paddingTop-padding.paddingBottom,toJSON:function(){return undefined},};return boundsNew};Element.getElementBoundingRect=function(elem,scrollAware){if(scrollAware===void 0){scrollAware=!1}
var b=elem.getBoundingClientRect();var bounds={x:b.left,y:b.top,left:b.left,top:b.top,right:b.right,bottom:b.bottom,width:b.width,height:b.height,toJSON:function(){return undefined},};if(scrollAware){bounds.x+=window.scrollX;bounds.y+=window.scrollY;bounds.left+=window.scrollX;bounds.top+=window.scrollY;bounds.right+=window.scrollX;bounds.bottom+=window.scrollY}
return bounds};Element.prototype.isZIndexEnabled=function(){return(this.layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute)};Element.prototype.isGlobalZIndex=function(){return!1};Element.prototype.canBeCommon=function(){return!0};Element.prototype.getZIndex=function(){return this.zIndex};Element.prototype.setZIndex=function(index){var idx=0;if(typeof index==='string')
idx=parseInt(index,10);else idx=index;if(isNaN(idx))
idx=0;var changed=this.zIndex!==idx;this.zIndex=idx;this.elem.css("zIndex",(idx>0)?idx:'');if(changed)
BuilderEvent_29.GlobalEvents.triggerEvent("site.structure.changed",new BuilderEvent_29.SiteStructureChangedBuilderEvent());};Element.prototype.makeLocalUrl=function(url){return wb_builder.makeLocalUrl(url)};Element.prototype.makeRelUrl=function(url){return wb_builder.makeRelUrl(url)};Element.truncate=function(string,length,end){if(string===null||string===undefined)
return'';if(typeof(string)==="object")
string=__tr(string);if(typeof(length)==="undefined")
length=20;if(typeof(end)==="undefined")
end='...';var res=string.substring(0,length);if(res!==string)
res+=end;return res};Element.prototype.onReloadTextTags=function(){};Element.prototype.onBeforeSwitchLanguage=function(){};Element.prototype.onSwitchLanguage=function(langCode){this.updateShow();this.updateLangLabel()};Element.prototype.onUpdateLanguages=function(){if(this.menu&&this.menuInitialized)
Element.updateContextMenuRemove(this.menu,this);this.updateLangLabel()};Element.prototype.addLangLabel=function(){if(!this.langLabel){this.controls.addButton((this.langLabel=new ControlsButton_4.ControlsButton('wb_lang_label',null,ControlsButton_4.ControlsButtonAlign.RIGHT_TOP)));this.langLabel.setActive(!1)}
this.updateLangLabel()};Element.prototype.updateLangLabel=function(){if(this.langLabel){if(wb_builder.site.languages.length){this.langLabel.setActive(!0)}else{this.langLabel.setActive(!1)}
if(wb_builder.site.currSelLang){this.langLabel.setLabel(wb_builder.site.currSelLang)}}};Element.prototype.setDebugLinesVisible=function(visible){this.controls.setDebugLinesVisible(visible)};Element.prototype.updateHierarchyLevel=function(dom,initial){var _a,_b;if(dom===void 0){dom=!1}
if(initial===void 0){initial=!1}
this.hierarchyLevel=this.parent?this.parent.getHierarchyLevel()+1:0;this.controls.updateDebugLines(this.hierarchyLevel,this.layoutConstraints==CommonTypes_28.ChildrenLayoutType.Absolute);if(this.parent&&(this.parent.isCommon||this.parent.isCommonInherited)){if(!this.isCommonInherited){if(this.isCommon){this.commonalityBackup=jquery_builder_19.default.extend(!0,{},this.commonality);var newCommonality={isCommon:!1,includePages:{}};var pid=wb_builder.pageId;if(this.includePages&&this.includePages.hasOwnProperty(pid)){if(typeof this.includePages[pid]==="object")
newCommonality.includePages=this.includePages[pid];else if(this.includePages[pid]===!1&&wb_builder.site.languages.length){for(var _i=0,_c=wb_builder.site.languages;_i<_c.length;_i++){var lang=_c[_i];newCommonality.includePages[lang.code]=!1}}}
this.isCommonInherited=!0;this.commonality=newCommonality}else(_a=this.getProperty("commonality"))===null||_a===void 0?void 0:_a.triggerChange(this,!1)}
this.isCommonInherited=!0}else{if(this.isCommonInherited){if(this.commonalityBackup){this.isCommonInherited=!1;this.commonality=this.commonalityBackup;this.commonalityBackup=null}else(_b=this.getProperty("commonality"))===null||_b===void 0?void 0:_b.triggerChange(this,!1)}
this.isCommonInherited=!1}};Element.prototype.getHierarchyLevel=function(){return this.hierarchyLevel};Element.prototype.getChildrenLayout=function(){return CommonTypes_28.ChildrenLayoutType.Unknown};Element.prototype.isChildrenLayoutHorizontalNow=function(){return!1};Element.prototype.getContentPadding=function(){return null};Element.prototype.scrollIntoView=function(fancy){if(fancy===void 0){fancy=!1}
var elem=this.elem.get(0);if(fancy){try{elem.scrollIntoView({block:'center',inline:'center',behavior:'smooth'})}catch(ignored){try{elem.scrollIntoView({block:'center',inline:'center'})}catch(ignored){elem.scrollIntoView(!1)}}}else{var bounds=elem.getBoundingClientRect();if(bounds.top<0){elem.scrollIntoView()}else if(bounds.bottom>(0,jquery_builder_19.default)(window).height()){elem.scrollIntoView(!1)}}};Element.prototype.getSiteTreeNodeProperties=function(){return{icon:this.getIcon(),name:this.getName(),title:this.getName(!0),color:(this.hiddenResp||this.hidden)?'#AAA':null,meta:(this._anchor?' #'+this._anchor:''),isGrouped:this.groupId?!0:!1,isHidden:(this.hiddenResp||this.hidden)?!0:!1,isCommon:this.isCommon,isCommonInAllPages:this.isCommon&&Object.keys(this.includePages).length===0,isCommonInherited:this.isCommonInherited,isBackgroundElement:this.isBackgroundElement,}};Element.prototype.getSiteTreeNodeChildren=function(){return[]};Element.prototype.isAcceptingChildren=function(){return!1};Element.prototype.getSiteTreeNodeMenu=function(){if(this.isBackgroundElement)
return null;return this.menu};Element.prototype.revalidate=function(){var val=_super.prototype.revalidate.call(this);if(val.elem)
val.updateStyle();return this};Element.prototype.onBeforePropertyChange=function(property,isUserAction){if(this.system)
this.system.historyBeforeElementPropertyChange(this,property,isUserAction);};Element.prototype.onPropertyChanged=function(property,isUserAction){this.invalidate();if(isUserAction){var val={};val[property.name]=property.get(this);(0,Collaboration_9.updateElementProperties)(this,val)}
if(this.system)
this.system.historyAfterElementPropertyChange(this,property,isUserAction);if(Service_68.Service.HelpSystemPlayer)
Service_68.Service.HelpSystemPlayer.notify('item-plugin-'+this.getClassType()+'-prop-'+property.name+'-change',this);};Element.prototype.registerProperties=function(){this.registerProperty({name:"isBackgroundElement"});this.registerProperty({name:"layoutConstraints"});this.registerProperty({name:"referenceId",type:PropertyType_12.PropertyType.ReferenceId});this.registerProperty({name:"isAdminLocked",type:PropertyType_12.PropertyType.IsAdminLocked});this.registerProperty({name:"isFullWidth",type:FullWidthControl,dependencies:["isBackgroundElement","layoutConstraints"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints===CommonTypes_28.ChildrenLayoutType.Absolute&&this.supportsFullWidth()}}});this.registerProperty({name:"left",type:PropertyType_12.PropertyType.ElementPositionLeft,dependencies:["isBackgroundElement","layoutConstraints","isFullWidth"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints===CommonTypes_28.ChildrenLayoutType.Absolute&&!this._isFullWidth}}});this.registerProperty({name:"top",type:PropertyType_12.PropertyType.ElementPositionTop,dependencies:["isBackgroundElement","layoutConstraints"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints===CommonTypes_28.ChildrenLayoutType.Absolute}}});var widthUnitConverter=function(value,fromUnit,toUnit){var conversion=0;if("fixedValue" in fromUnit){value=this.getWidthInPixels();if("suffix" in toUnit&&toUnit.suffix==="")
conversion=-1}else if("suffix" in toUnit&&toUnit.suffix==="")
conversion=1;var parent=this.getParent();if(parent){var parentSize=parent.getWidthInPixels();if(parentSize){if(conversion===0){value=100*value/parentSize}else if(conversion===1){value=value*parentSize/100}}}
return value};var heightUnitConverter=function(value,fromUnit,toUnit){var conversion=0;if("fixedValue" in fromUnit){value=this.getHeightInPixels();if("suffix" in toUnit&&toUnit.suffix==="")
conversion=-1}else if("suffix" in toUnit&&toUnit.suffix==="")
conversion=1;var parent=this.getParent();if(parent){var parentSize=parent.getHeightInPixels();if(parentSize){if(conversion===0){value=100*value/parentSize}else if(conversion===1){value=value*parentSize/100}}}
return value};var isMinMaxVisible=function(sizeValue,type){if(type===void 0){type='other'}
var byType=!0;if(type=='minWidth'&&(!this.useMinWidth||this._isFullWidth))
byType=!1;if(type=='maxWidth'&&(!this.useMaxWidth||this._isFullWidth))
byType=!1;if(type=='minHeight'&&!this.useMinHeight)
byType=!1;if(type=='maxHeight'&&!this.useMaxHeight)
byType=!1;return!this.isBackgroundElement&&byType&&((this.isAutoSizeEnabled&&this.layoutConstraints!==CommonTypes_28.ChildrenLayoutType.Absolute)||typeof sizeValue!=="number")};this.registerProperty({name:"width",type:PropertyType_12.PropertyType.ElementWidth,dependencies:['isAutoSizeEnabled','isFullWidth'],uiComponentOptions:function(){var widthDisabled=!0;if(this.elem.hasClass('wb-ext-resizable')&&!this.elem.resizableExt('option','disabled')){var handles=this.elem.resizableExt('option','handles');var handlesArr=handles.split(/,\ ?/);for(var i in handlesArr){var h=handlesArr[i];if(h==='e'||h==='se'||h==='sw'||h==='w'||h==='ne'||h==='nw')
widthDisabled=!1}}
var sizeUnits=this.getSupportedSizeUnits();return{visible:!this.isBackgroundElement&&(this.layoutConstraints!==CommonTypes_28.ChildrenLayoutType.Absolute||!this._isFullWidth),enabled:!widthDisabled&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock()),helpText:((this.isAutoSizeEnabled&&this.width!='auto')?('warn:'+__('Allow to adjust size automatically')+': '+__('Active')):''),min:1,precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:sizeUnits.sizeW,unitConverter:widthUnitConverter.bind(this),unitsDropdownAlignment:'right',}}});this.registerProperty({name:"height",type:PropertyType_12.PropertyType.ElementHeight,uiComponentOptions:function(){var heightDisabled=!0;if(this.elem.hasClass('wb-ext-resizable')&&!this.elem.resizableExt('option','disabled')){var handles=this.elem.resizableExt('option','handles');var handlesArr=handles.split(/,\ ?/);for(var i in handlesArr){var h=handlesArr[i];if(h==='s'||h==='se'||h==='sw'||h==='n'||h==='ne'||h==='nw')
heightDisabled=!1}}
var sizeUnits=this.getSupportedSizeUnits();return{visible:!this.isBackgroundElement,enabled:!heightDisabled&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock()),min:1,max:this.getMaxPossibleHeight(),precision:0,step:1,fixedWidth:90,small:!0,hideSpinner:!0,unitsWidth:47,units:sizeUnits.sizeH,unitConverter:heightUnitConverter.bind(this),unitsDropdownAlignment:'right',}}});this.registerProperty({name:"isAutoSizeEnabled",type:PropertyType_12.PropertyType.IsAutoSizeEnabled,dependencies:["isBackgroundElement","layoutConstraints","width","height"],uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.layoutConstraints!==CommonTypes_28.ChildrenLayoutType.Absolute,enabled:!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"useMinWidth",type:PropertyType_12.PropertyType.UseMinWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","isFullWidth"],uiComponentOptions:function(){return{visible:isMinMaxVisible.call(this,this.width)&&!this._isFullWidth,enabled:!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"useMinHeight",type:PropertyType_12.PropertyType.UseMinHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:isMinMaxVisible.call(this,this.height),enabled:!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"useMaxWidth",type:PropertyType_12.PropertyType.UseMaxWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","isFullWidth"],uiComponentOptions:function(){return{visible:isMinMaxVisible.call(this,this.width)&&!this._isFullWidth,enabled:!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"useMaxHeight",type:PropertyType_12.PropertyType.UseMaxHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled"],uiComponentOptions:function(){return{visible:isMinMaxVisible.call(this,this.height),enabled:!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"minWidth",type:PropertyType_12.PropertyType.MinWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMinWidth","isFullWidth"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:'px',visible:isMinMaxVisible.call(this,this.width,'minWidth'),enabled:this.useMinWidth&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"minHeight",type:PropertyType_12.PropertyType.MinHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMinHeight"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:'px',visible:isMinMaxVisible.call(this,this.height,'minHeight'),enabled:this.useMinHeight&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"maxWidth",type:PropertyType_12.PropertyType.MaxWidth,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMaxWidth","isFullWidth"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:'px',visible:isMinMaxVisible.call(this,this.width,'maxWidth'),enabled:this.useMaxWidth&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"maxHeight",type:PropertyType_12.PropertyType.MaxHeight,dependencies:["isBackgroundElement","layoutConstraints","width","height","isAutoSizeEnabled","useMaxHeight"],uiComponentOptions:function(){return{small:!0,hideSpinner:!0,unitsWidth:25,units:'px',visible:isMinMaxVisible.call(this,this.height,'maxHeight'),enabled:this.useMaxHeight&&!(this.getClassType()==='LayoutElement'&&this.isMainPopupBlock())}}});this.registerProperty({name:"individualMargin",type:PropertyType_12.PropertyType.IndividualMargin,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,usePadding:this.supportsPadding(),useMargin:this.supportsMargin(),}},onChange:function(property,owner){if(!owner.elem||!owner.controls||!owner.elem.data("resizableExt"))
return;owner.updateResizeLimits();if(owner.supportsMargin())
owner.controls.updateMargin(owner.getActualMargins());if(owner.supportsPadding())
owner.controls.updatePadding(owner.getActualPadding());}});this.registerProperty({name:"showOnPhone",type:PropertyType_12.PropertyType.VisibilityShowOnPhone,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"showOnTablet",type:PropertyType_12.PropertyType.VisibilityShowOnTablet,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"showOnDesktop",type:PropertyType_12.PropertyType.VisibilityShowOnDesktop,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"showOnTv",type:PropertyType_12.PropertyType.VisibilityShowOnTv,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"commonality",type:PropertyType_12.PropertyType.VisibilityPagesLanguages,uiComponentOptions:function(){var inherited=this.getInheritedLanguageVisibility();for(var code in inherited){if(inherited.hasOwnProperty(code)&&inherited[code])
delete inherited[code]}
return{visible:!this.isBackgroundElement,isInherited:this.isCommonInherited,}}});this.registerProperty({name:"anchorProp",type:PropertyType_12.PropertyType.Anchor,uiComponentOptions:function(){this.checkAnchorLabel();return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"elemClassNameProp",type:PropertyType_12.PropertyType.ElemClassName,uiComponentOptions:function(){return{enabled:this.classNamePropEnabled,visible:!this.isBackgroundElement,}}});this.registerProperty({name:"nameProp",type:PropertyType_12.PropertyType.Name,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"animationEffect",type:PropertyType_12.PropertyType.Animation,uiComponentOptions:function(){return{visible:!this.isBackgroundElement,}}});this.registerProperty({name:"onclickJs",type:OnclickJs,uiComponentOptions:function(){return{visible:!this.isBackgroundElement&&this.supportsOnClickJs()}}})};Element.prototype.supportsOnClickJs=function(){return!0};Element.pluginName='Element';Element.lastIndex=0;Element.hotKeysInitiated=!1;Element.hotKeysDisabled=!1;Element.selected={};Element._anchorLabel=null;Element.anchorLastLabel=null;Element.anchorLastValue=null;return Element}(Properties_1.BaseObject));var FullWidthControl=new PropertyType_12.PropertyType('position/size/fullWidth',PropertyType_12.PropertyTypeAccess.User,!0,__('Full screen width'),CheckBox_13.default);ElementRegister_17.ElementRegister.registerClass("Element",Element);function flattenElement(parent,elem,parentBounds,stage,group){if(stage==0){var elemData=elem.serialize();if(elemData.content.background&&(0,BackgroundControl_13.isSet)(elemData.content.background)){var b=elem.getBoundingRect();ElementRegister_17.ElementRegister.createElementOrComposition('Shape',[{x:b.left-parentBounds.left,y:b.top-parentBounds.top,width:b.width,height:b.height,content:{background:elemData.content.background,border:elemData.content.border,borderRadius:{lt:0,rt:0,rb:0,lb:0},},individualShadow:elemData.individualShadow,}],function(result){parent.addChild(result[0]);group.push(result[0])})}}
for(var _i=0,_a=elem.getChildren();_i<_a.length;_i++){var ch=_a[_i];if(ch.getClassType()=='LayoutElement'){flattenElement(parent,ch,parentBounds,stage,group)}else if(stage==0){var b=ch.getBoundingRect();ch.setLocation(b.left-parentBounds.left,b.top-parentBounds.top);ch.setSize(b.width,b.height);group.push(ch)}else if(stage==1){parent.addChild(ch)}}
if(stage==1)
parent.removeChild(elem);}
Service_68.Service.element={unselectAll:Element.unselectAll,truncate:Element.truncate,updateContextMenuRemove:Element.updateContextMenuRemove,Element:Element,findById:function(id){return(id in elemIndexById)?elemIndexById[id]:null},getSelected:function(){return Element.selected},getSelectedCount:function(){var count=0;for(var i in Element.selected)
if(Element.selected.hasOwnProperty(i))
count++;return count},eachSelected:function(callback){for(var i in Element.selected)
if(Element.selected.hasOwnProperty(i))
callback.call(Element.selected[i]);return Service_68.Service.element},getUsedMediaGalleryItems:function(elements){if(!elements)
elements=wb_builder.bodyInstance.getContentElements();elements=elements.slice();var index={},items,j,element;while(elements.length){element=elements.pop();if(element instanceof Element){items=element.getUsedMediaGalleryItems();for(j=0;j<items.length;j++){if(items[j])
index[items[j]]=!0}}
if("backgroundElement" in element){var bgElement=element.backgroundElement;if(bgElement)
elements.push(bgElement);}
if("getChildren" in element)
elements=elements.concat(element.getChildren());}
return Object.keys(index)},getUsedSiteStyles:function(elements){if(!elements)
elements=wb_builder.bodyInstance.getContentElements();elements=elements.slice();var index={},items,j,element;while(elements.length){element=elements.pop();if(element instanceof Element){items=element.getUsedSiteStyles();for(j=0;j<items.length;j++){if(items[j])
index[items[j]]=!0}}
if("backgroundElement" in element){var bgElement=element.backgroundElement;if(bgElement)
elements.push(bgElement);}
if("getChildren" in element)
elements=elements.concat(element.getChildren());}
return Object.keys(index)},getUsedFonts:function(elements){if(!elements)
elements=wb_builder.bodyInstance.getContentElements();elements=elements.slice();var index={},items,j,element;while(elements.length){element=elements.pop();if(element instanceof Element){items=element.getUsedFonts();for(j=0;j<items.length;j++){if(items[j])
index[items[j]]=!0}}
if("backgroundElement" in element){var bgElement=element.backgroundElement;if(bgElement)
elements.push(bgElement);}
if("getChildren" in element)
elements=elements.concat(element.getChildren());}
return Object.keys(index)},resetIdentifierIndex:function(){Element.lastIndex=0},buildDummy:function(icon,name,width,height,helper){if(width===void 0){width=100}
if(height===void 0){height=100}
if(helper===void 0){helper=!1}
var dummy=new Element({'class':'Element',id:'new',name:name,content:{},width:width,height:height,isMovable:!1,});if(icon)
dummy.setEmptyMessageImage(icon);if(name)
dummy.setEmptyMessageText(name);dummy.displayEmptyMessage(!0,!1,!0);dummy.setResizingEnabled(!1,!0);dummy.controls.setOutlineActive(!0);dummy.controls.setResizeHandlesVisible(!1);dummy.controls.setButtonsVisible(!1);dummy.elem.addClass("wb-drag-helper");if(helper){dummy.elem.css({width:width,height:height,})}
return dummy},replaceDummy:function(dummy,items){var parent=dummy.getParent();if(!parent)
return;var replaceItems=function(items,isWrapped){wb_builder.historyBeginGroup();if(!parent)
return;for(var id in Element.selected){Element.selected[id].setSelected(!1)}
var itemsToDeconstruct=[];var itemsToKeep=[];for(var _i=0,items_9=items;_i<items_9.length;_i++){var item=items_9[_i];var keep=!0;parent.addChild(item,!1,!1,dummy,!1);if(parent.getChildrenLayout()==CommonTypes_28.ChildrenLayoutType.Absolute){item.setLocation(dummy.left,dummy.top);if(item.getClassType()=='LayoutElement'){itemsToDeconstruct.push(item);keep=!1}}else{if(item.getClassType()=='Picture'){for(var _a=0,_b=parent.getChildren();_a<_b.length;_a++){var it=_b[_a];if(it===item)
continue;if(it.getClassType()=='Picture'){item.useMaxWidth=it.useMaxWidth;item.useMaxHeight=it.useMaxHeight;item.useMinWidth=it.useMinWidth;item.useMinHeight=it.useMinHeight;item.maxWidth=it.maxWidth;item.maxHeight=it.maxHeight;item.minWidth=it.minWidth;item.minHeight=it.minHeight;item.width=it.width;item.height='auto';item.flexGrow=it.flexGrow;item.flexShrink=it.flexShrink;item.keepSize=!0;break}}}
if(parent.getChildren().length>1){var itemIdx=parent.getChildIndex(item);var it=parent.getChildAt((itemIdx>0)?itemIdx-1:itemIdx+1);if(it&&(it.individualMargin||item.individualMargin)){var srcMargin=it.individualMargin||{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,};if(!item.individualMargin)
item.individualMargin={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,};item.individualMargin.marginTop=srcMargin.marginTop;item.individualMargin.marginRight=srcMargin.marginRight;item.individualMargin.marginBottom=srcMargin.marginBottom;item.individualMargin.marginLeft=srcMargin.marginLeft;if(typeof item.scaleFactors!=='undefined'&&typeof it.scaleFactors!=='undefined'){item.scaleFactors=it.scaleFactors}
item.controls.updateMargin(item.getActualMargins());var type=item.getClassType();if(type==it.getClassType()&&(type=='LayoutElement'||type=='Button')){var srcPadding=it.individualMargin;var padding=item.individualMargin;if(srcPadding&&srcPadding){padding.paddingTop=srcPadding.paddingTop;padding.paddingRight=srcPadding.paddingRight;padding.paddingBottom=srcPadding.paddingBottom;padding.paddingLeft=srcPadding.paddingLeft}
item.controls.updatePadding(item.getActualPadding())}(0,Collaboration_9.updateElementProperties)(item,{individualMargin:item.individualMargin})}}}
item.updateStyle();if(keep)
itemsToKeep.push(item);if(isWrapped){for(var _c=0,_d=item.getChildren();_c<_d.length;_c++){var it=_d[_c];it.setSelected(!0)}}else{item.setSelected(!0)}}
dummy.remove({noHistory:!0});if(!items.length){var history_1=wb_builder.historyGetLatestRecord();if(history_1&&history_1.type==="wrapElement"){wb_builder.historyUndo()}}
if(itemsToDeconstruct.length>0){window.requestAnimationFrame(function(){for(var _i=0,itemsToDeconstruct_1=itemsToDeconstruct;_i<itemsToDeconstruct_1.length;_i++){var elem=itemsToDeconstruct_1[_i];var parent_31=elem.getParent();if(parent_31){var group=[];var bounds=parent_31.getBoundingRect();flattenElement(parent_31,elem,bounds,0,group);flattenElement(parent_31,elem,bounds,1,group);Service_68.Service.group.groupElements(group);for(var _a=0,group_1=group;_a<group_1.length;_a++){var e=group_1[_a];itemsToKeep.push(e)}}}(0,HistoryUtil_7.createAddElementsHistoryRecord)(itemsToKeep);wb_builder.historyEndGroup()})}else{(0,HistoryUtil_7.createAddElementsHistoryRecord)(itemsToKeep);wb_builder.historyEndGroup()}};(0,ElementUtil_3.tryWrapElements)(items,parent).done(function(wrapper){if(wrapper)
replaceItems([wrapper],!0);}).fail(function(){return replaceItems(items,!1)})},prepareElementsForRemovalWithUserInteraction:function(elements,noHistory){var deferred=jquery_builder_19.default.Deferred();var options={noHistory:noHistory,requiredConfirmations:{}};if(!elements.length){deferred.resolve(options);return deferred.promise()}
for(var _i=0,elements_25=elements;_i<elements_25.length;_i++){var element=elements_25[_i];element.onBeforeRemove(options)}
if(options.preventRemoval){deferred.reject();return deferred.promise()}
var deferredConfirmation=jquery_builder_19.default.Deferred();var confirmationPromise=deferredConfirmation.promise();if(options.requiredConfirmations&&Object.keys(options.requiredConfirmations).length){var isFirst=!0;var _loop_33=function(k){if(!options.requiredConfirmations.hasOwnProperty(k))
return"continue";var confirmation=options.requiredConfirmations[k];if(isFirst)
isFirst=!1;else confirmationPromise=confirmationPromise.then(function(){return(0,CommonTypes_28.waitForModalToFullyHide)(500)});confirmationPromise=confirmationPromise.then(function(){return confirmation()})};for(var k in options.requiredConfirmations){_loop_33(k)}}
confirmationPromise.then(function(){if(options.preventRemoval)
deferred.reject();else deferred.resolve(options)}).fail(function(){deferred.reject()});deferredConfirmation.resolve();return deferred.promise()},removeElementsWithUserInteraction:function(elements,noHistory){if(noHistory===void 0){noHistory=!1}
var _elements=__spreadArray([],elements,!0);return Service_68.Service.element.prepareElementsForRemovalWithUserInteraction(_elements,noHistory).then(function(options){if(!options.noHistory&&_elements.length>1)
wb_builder.historyBeginGroup();for(var _i=0,_elements_1=_elements;_i<_elements_1.length;_i++){var element=_elements_1[_i];element.remove(options)}
if(!options.noHistory&&_elements.length>1)
wb_builder.historyEndGroup();})},removeOrHideElementsWithUserInteraction:function(elements,fromPage,fromLanguage,noHistory){if(fromPage===void 0){fromPage=null}
if(fromLanguage===void 0){fromLanguage=null}
if(noHistory===void 0){noHistory=!1}
var hideQueue=[];var removeQueue=[];var isMultiLang=wb_builder.site.languages.length>0;if(!isMultiLang)
fromLanguage=null;if(!Array.isArray(elements)){var arr=[];for(var id in elements){if(elements.hasOwnProperty(id))
arr.push(elements[id]);}
elements=arr}
for(var _i=0,elements_26=elements;_i<elements_26.length;_i++){var elem=elements_26[_i];if(!elem.isEditableStrict||(!elem.parent&&elem.rootBlockType))
continue;if(elem.isLocked){continue}
var builder=elem.system||wb_builder;var currentPid=builder.pageId;var remove=!0;if(fromPage&&fromPage!==builder.pageId){if(!elem.isCommon)
continue;remove=!1}else if(fromLanguage){var includePages=elem.includePages;var langData=null;if(elem.isCommon){var includedEverywhere=!includePages||!Object.keys(includePages).length;langData=(includePages&&includePages.hasOwnProperty(currentPid))?includePages[currentPid]:includedEverywhere}else{langData=includePages}
if(typeof langData==="number")
langData=!!langData;if(langData!==!1){var includedInAllLanguages=langData===null||langData===!0||(typeof langData==="number"&&langData)||(typeof langData==="object"&&!Object.keys(includePages).length);for(var _a=0,_b=builder.site.languages;_a<_b.length;_a++){var lang=_b[_a];if(lang.code===fromLanguage)
continue;if(langData&&!includedInAllLanguages&&(!langData.hasOwnProperty(lang.code)||!langData[lang.code]))
continue;remove=!1;break}}}
if(remove){if(elem.isCommon)
hideQueue.push(elem);removeQueue.push(elem)}else{hideQueue.push(elem)}
elem.setSelected(!0)}
var deleteFromAllPages=!fromPage;return Service_68.Service.element.prepareElementsForRemovalWithUserInteraction(removeQueue,noHistory).then(function(options){var noHistory=options.noHistory;if(!noHistory)
wb_builder.historyBeginGroup();wb_builder.setPageModified(!0);for(var _i=0,hideQueue_1=hideQueue;_i<hideQueue_1.length;_i++){var elem=hideQueue_1[_i];elem.setPageInclusion(fromPage,fromLanguage,!1,noHistory)}
for(var _a=0,removeQueue_1=removeQueue;_a<removeQueue_1.length;_a++){var elem=removeQueue_1[_a];elem.setSelected(!1);options.deleteFromAllPages=deleteFromAllPages;elem.remove(options)}
if(!noHistory)
wb_builder.historyEndGroup();})}};var Mode=(function(){function Mode(data){this.hidden=!1;if(data)
this.deserialize(data);};Mode.prototype.deserialize=function(data){this.hidden=data.hidden;this.x=data.x;this.y=data.y;this.width=data.width;this.height=data.height;this.zIndex=data.zIndex};Mode.prototype.isElemAbsolute=function(elem){return(elem.parent?!0:!1)&&!elem.isBackgroundElement&&(elem.getLayoutConstraints()==CommonTypes_28.ChildrenLayoutType.Absolute||(elem.getClassType()=='LayoutElement'&&elem.getChildrenLayout()==CommonTypes_28.ChildrenLayoutType.Absolute))};Mode.prototype.copy=function(mode){this.deserialize(mode.serialize())};Mode.prototype.setMissing=function(elem){if(this.isElemAbsolute(elem)){if(elem.left!=0||elem.top!=0){if(this.x===undefined)
this.x=elem.left;if(this.y===undefined)
this.y=elem.top}
if(this.width===undefined)
this.width=elem.width;if(this.height===undefined)
this.height=elem.height;if(this.zIndex===undefined)
this.zIndex=elem.zIndex}};Mode.prototype.applyFrom=function(elem){elem.getBounds();var abs=this.isElemAbsolute(elem);this.hidden=elem.isHidden(!0);this.x=abs?elem.left:undefined;this.y=abs?elem.top:undefined;this.width=abs?elem.width:undefined;this.height=abs?elem.height:undefined;this.zIndex=abs?elem.zIndex:undefined};Mode.prototype.applyTo=function(elem,defaultsMode){if(this.hidden)
elem.hide(!0);else elem.show(!0);if(!elem.supportsAutoSizeFull()&&elem.supportsAutoWidth()&&elem.supportsAutoHeight()){if(this.width!=='auto'&&this.height!=='auto'){this.height='auto'}}
if(this.isElemAbsolute(elem)){if(defaultsMode instanceof Mode)
defaultsMode.setMissing(elem);elem.left=(this.x===undefined)?(defaultsMode.x||0):this.x;elem.top=(this.y===undefined)?(defaultsMode.y||0):this.y;elem.width=this.width||(defaultsMode.width||'100%');if(elem.shouldHaveAutoHeight()){elem.height='auto'}else{elem.height=this.height||(defaultsMode.height||'100px')}}};Mode.prototype.serialize=function(){return{hidden:this.hidden,x:this.x,y:this.y,width:this.width,height:this.height,zIndex:this.zIndex,}};return Mode}());exports.Mode=Mode;window.wbs=function(index){if(index===void 0){index=0}
for(var id in Element.selected){if(!Element.selected.hasOwnProperty(id))
continue;if(--index<0)
return Element.selected[id]}
return null}});define("js/jquery-builder",["require","exports","jquery"],function(require,exports,jquery_130){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=jquery_130.default});define("js/UIComponent",["require","exports","js/jquery-builder","js/core/BuilderConfig","js/element/Properties","js/ToolTipControl"],function(require,exports,jquery_builder_20,BuilderConfig_35,Properties_2,ToolTipControl_5){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.UIComponent=void 0;var UIComponent=exports.UIComponent=(function(){function UIComponent(tagType){this._enabled=!0;this._control=null;this._tooltipIsSet=!1;this._labelText=null;this._moreInfo=null;this._moreInfoElem=null;this._helpText=null;this._validateText=null;this._labelStyle={};this._labelElem=null;this._helpTextElem=null;this._validateTextElem=null;this._labelContElem=null;this._descriptionText=null;this._descriptionTextElem=null;this._invalid=!1;this._revalidating=!1;this._destroyed=!1;this._isVisible=!0;this.errorElem=null;this.errorText='';this.bindings=[];this.bindingsBySubType={};this.dependencyBindings=[];this._propertyType=null;this._instanceIndex=UIComponent.nextInstanceIndex++;if(tagType==='%inherit%')
return;if(tagType)
this.tagType=tagType;this._elem=this._createElem();this.invalidate()}
Object.defineProperty(UIComponent.prototype,"propertyType",{get:function(){return this._propertyType},set:function(value){this._propertyType=value;if(this._control)
this._control.propertyType=value},enumerable:!1,configurable:!0});UIComponent.prototype._createElem=function(){return(0,jquery_builder_20.default)('<'+(this.tagType?this.tagType:'div')+'>')};UIComponent.prototype._createLabelContainerElem=function(){var labelContainer=(0,jquery_builder_20.default)('<div class="wb-component-label-cont">');this._elem.prepend(labelContainer);return labelContainer};UIComponent.prototype.getElem=function(){return this._elem};UIComponent.prototype.setComponentOptions=function(options){if("enabled" in options)
this.setEnabled(!!options.enabled);if("visible" in options)
this.setVisible(!!options.visible);if("label" in options)
this.setLabel(options.label);if("moreInfo" in options)
this.setMoreInfo(options.moreInfo||null);if("helpText" in options)
this.setHelpText(options.helpText,("helpTextPlacement" in options)?options.helpTextPlacement:void 0);if("validateText" in options)
this.setValidateText(options.validateText,("validateTextPlacement" in options)?options.validateTextPlacement:void 0);if("descriptionText" in options)
this.setDescriptionText(options.descriptionText);if(this._control&&typeof this._control.setComponentOptions==="function")
this._control.setComponentOptions(options);};UIComponent.prototype.prepareForPropertyPanel=function(){if(!this._elem){if(!this._control)
throw new Error("UI Component doesn't have DOM element or it is stored into a wrong variable.");else throw new Error("UI Component doesn't have DOM element. If this component class actually extends UIComponent, then it must not be wrapped by PropertyType component factory function.")}
if(this._control&&typeof this._control.prepareForPropertyPanel==="function")
this._control.prepareForPropertyPanel();this._elem.addClass("wb-property");return this};UIComponent.prototype.bindProperty=function(obj,property){if(this._propertyType&&this._propertyType!==property.type)
throw new Error("Can't bind property that has an incompatible property type");var binding=new Properties_2.PropertyUIBinding(obj,property,this,this.onPropertyChanged);var subType=property.subType||"";if(!this.bindingsBySubType.hasOwnProperty(subType))
this.bindingsBySubType[subType]=[];this.bindingsBySubType[subType].push(binding);this.bindings.push(binding);this.invalidate()};UIComponent.prototype.bindDependencyProperty=function(obj,property){this.dependencyBindings.push(new Properties_2.PropertyUIBinding(obj,property,this,this.onDependencyPropertyChanged));this.invalidate()};UIComponent.prototype.unbindAllProperties=function(){for(var _i=0,_a=this.bindings;_i<_a.length;_i++){var binding=_a[_i];binding.destroy()}
for(var _b=0,_c=this.dependencyBindings;_b<_c.length;_b++){var binding=_c[_b];binding.destroy()}
this.bindings=[];this.bindingsBySubType={};this.dependencyBindings=[];if(this._control){this._control.bindings=this.bindings;this._control.bindingsBySubType=this.bindingsBySubType;this._control.dependencyBindings=this.dependencyBindings}
this.invalidate()};UIComponent.prototype.callForOneBinding=function(func){for(var _i=0,_a=this.bindings;_i<_a.length;_i++){var b=_a[_i];return func.call(b.owner)}
return func()};UIComponent.prototype.onPropertyChanged=function(property,owner){this.invalidate();if(this._control&&typeof this._control.onPropertyChanged==="function")
this._control.onPropertyChanged(property,owner);};UIComponent.prototype.onDependencyPropertyChanged=function(property,owner){this.invalidate();if(this._control&&typeof this._control.onDependencyPropertyChanged==="function")
this._control.onDependencyPropertyChanged(property,owner);};UIComponent.prototype.getCombinedBindingsOptions=function(){if(this._control&&typeof this._control.getCombinedBindingsOptions==="function")
return this._control.getCombinedBindingsOptions();if(!this.bindings.length)
return null;return this.bindings[0].getUIComponentOptions()};UIComponent.prototype.getCombinedBindingsValue=function(){if(!this.bindings.length||(this._propertyType&&this._propertyType.isButton))
return null;if(this._control&&typeof this._control.getCombinedBindingsValue==="function")
return this._control.getCombinedBindingsValue();return{value:this.bindings[0].getValue(),multipleValues:!1,}};UIComponent.prototype.setCombinedBindingsValue=function(valueInfo){if(this._propertyType&&this._propertyType.isButton)
return;if(this._control&&typeof this._control.setCombinedBindingsValue==="function")
this._control.setCombinedBindingsValue(valueInfo);else this.setValue(valueInfo.value)};UIComponent.prototype.onValueChanged=function(ignoreRevalidating){if(ignoreRevalidating===void 0){ignoreRevalidating=!1}
if(!this.bindings.length||(!ignoreRevalidating&&this._revalidating)||(this._propertyType&&this._propertyType.isButton))
return;if(this._control&&typeof this._control._onValueChangedOverride==="function"){this._control._onValueChangedOverride();return}
var value=this.getValue();var isObject=(value&&typeof value==="object");var isArray=isObject&&Array.isArray(value);for(var _i=0,_a=this.bindings;_i<_a.length;_i++){var binding=_a[_i];binding.setValue(isObject?jquery_builder_20.default.extend(!0,isArray?[]:{},value):value,!0)}};UIComponent.prototype.invalidate=function(){var _this=this;if(!this._destroyed&&!this._invalid){this._invalid=!0;requestAnimationFrame(function(){if(_this._destroyed)
return;_this._invalid=!1;_this._revalidating=!0;if(_this._control)
_this._control._revalidating=!0;_this.revalidate();_this._revalidating=!1;if(_this._control)
_this._control._revalidating=!1})}
return this};UIComponent.prototype.revalidate=function(){this._invalid=!1;var options=this.getCombinedBindingsOptions();if(options)
this.setComponentOptions(options);var valueInfo=this.getCombinedBindingsValue();if(valueInfo)
this.setCombinedBindingsValue(valueInfo);if(BuilderConfig_35.wbConfig.adminMode&&this.propertyType&&!this.propertyType.isElementReference&&this.bindings.length==1&&("getClassType" in this.bindings[0].owner)){var title="";title+="Help subject: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"[0]\n";if(this.propertyType.isButton)
title+="Help objective: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"-click\n";else{title+="Help objective: item-plugin-"+this.bindings[0].owner.getClassType()+"-prop-"+this.bindings[0].property.name+"-change\n";try{title+="Help defaultContent: {\"value\": "+JSON.stringify(this.bindings[0].property.serialize(this.bindings[0].owner),null,2)+"}\n"}catch(err){console.error(err);console.error("Unable to generate defaultContent for ".concat(this.bindings[0].property.name))}}
this.getElem().attr("title",title)}
if(this._control&&typeof this._control.revalidate==="function")
this._control.revalidate();};UIComponent.prototype.destroy=function(){if(this._control&&typeof this._control.destroy==="function")
this._control.destroy();if(this._helpTextElem){this._helpTextElem.remove();this._helpTextElem=null}
if(this._validateTextElem){this._validateTextElem.remove();this._validateTextElem=null}
this._destroyed=!0;this.unbindAllProperties();this._elem.remove()};UIComponent.prototype.css=function(css){if(this._elem)
this._elem.css(css);return this};UIComponent.prototype.addClass=function(cls){if(this._elem)
this._elem.addClass(cls);return this};UIComponent.prototype.removeClass=function(cls){if(this._elem)
this._elem.removeClass(cls);return this};UIComponent.prototype.isVisible=function(){return this._isVisible};UIComponent.prototype.setVisible=function(visible){if(this._elem){this._isVisible=visible;if(visible){this._elem[0].style.display=''}else{this._elem[0].style.display='none'}
this._elem.trigger("componentvisibilitychanged")}
return this};UIComponent.prototype.setEnabled=function(enabled){this._enabled=enabled?!0:!1};UIComponent.prototype.isEnabled=function(){return this._enabled};UIComponent.prototype.setTitle=function(title){if(title){this._elem.attr('title',title)}else{this._elem.removeAttr('title')}
return this};UIComponent.prototype.setLabelStyle=function(css){this._labelStyle=css;if(this._labelElem)
this._labelElem.css(css);};UIComponent.prototype.setLabel=function(label){if(label===void 0){label=null}
if(this._labelText!==label){if(label===null||label===""){if(this._labelElem){this._labelElem.remove();this._labelElem=null}
if(this._labelContElem&&!this._helpTextElem){this._labelContElem.remove();this._labelContElem=null}}else{if(!this._labelContElem)
this._labelContElem=this._createLabelContainerElem();if(!this._labelElem){this._labelElem=(0,jquery_builder_20.default)('<span class="wb-component-label"/>').css(this._labelStyle);this._labelContElem.prepend(this._labelElem)}
this._labelElem.text(label);this._labelElem.attr("title",label)}
this._labelText=label}
return this};UIComponent.prototype.getLabel=function(){return this._labelText};UIComponent.prototype.setError=function(message){if(this.errorText==message)
return;this.errorText=message;if(this.errorText&&!this.errorElem){this.errorElem=(0,jquery_builder_20.default)('<div class="wb-component-error"/>').appendTo(this._elem)}
if(this.errorElem)
this.errorElem.text(this.errorText);};UIComponent.prototype.setMoreInfo=function(moreInfo){var _this=this;if(this._moreInfo===moreInfo||!this._labelElem)
return this;this._moreInfo=moreInfo;if(this._moreInfoElem&&!moreInfo){this._moreInfoElem.remove();this._moreInfoElem=null}else{if(!this._moreInfoElem)
this._moreInfoElem=(0,jquery_builder_20.default)('<span>').append(' (').append((0,jquery_builder_20.default)('<a>').attr('href','javascript:void(0)').text(__('Settings'))).append(')').appendTo(this._labelElem);this._moreInfoElem.children('a').off('click').on('click',function(){if(typeof moreInfo==='function')
_this.callForOneBinding(moreInfo);})}
return this};UIComponent.prototype.setHelpText=function(helpText,placement){var _a;if(helpText===void 0){helpText=null}
if(placement===void 0){placement="top"}
if(this._helpText!==helpText){if(helpText===null||helpText===""){if(this._helpTextElem){this._helpTextElem.remove();this._helpTextElem=null}
if(this._labelContElem&&!this._labelElem){this._labelContElem.remove();this._labelContElem=null}}else{var text=(_a=(0,ToolTipControl_5.parseHelpText)(helpText),_a.text),icon=_a.icon;if(!this._labelContElem)
this._labelContElem=this._createLabelContainerElem();if(!this._helpTextElem){this._helpTextElem=new ToolTipControl_5.ToolTipControl(icon,text,placement);this._labelContElem.append(this._helpTextElem.elem)}
if(window.hasOwnProperty("wb_builder")&&wb_builder.rtl){if(placement==='left')
placement='right';else if(placement==='right')
placement='left'}
this._helpTextElem.setLabel(icon);this._helpTextElem.setTitle(text,!0);this._helpTextElem.setPlacement(placement)}
this._helpText=helpText}
return this};UIComponent.prototype.setValidateText=function(validateText,placement){if(validateText===void 0){validateText=null}
if(placement===void 0){placement="top"}
if(this._validateText!==validateText){if(validateText===null||validateText===""){if(this._validateTextElem){this._validateTextElem.remove();this._validateTextElem=null}
if(this._labelContElem&&!this._labelElem){this._labelContElem.remove();this._labelContElem=null}}else{var text=validateText;var icon='?';if(validateText.substring(0,5)=='warn:'){text=validateText.substring(5);icon='warn'}else if(validateText.substring(0,6)=='error:'){text=validateText.substring(6);icon='error'}else if(validateText.substring(0,5)=='open:'){text=validateText.substring(5);icon='open'}
if(!this._labelContElem)
this._labelContElem=this._createLabelContainerElem();if(!this._validateTextElem){this._validateTextElem=new ToolTipControl_5.ToolTipControl(icon,text,placement);this._labelContElem.append(this._validateTextElem.elem)}
if(window.hasOwnProperty("wb_builder")&&wb_builder.rtl){if(placement==='left')
placement='right';else if(placement==='right')
placement='left'}
this._validateTextElem.setLabel(icon);this._validateTextElem.setTitle(text,!0);this._validateTextElem.setPlacement(placement)}
this._validateText=validateText}
return this};UIComponent.prototype.setDescriptionText=function(descriptionText){if(descriptionText===void 0){descriptionText=null}
if(this._descriptionText!==descriptionText){if(descriptionText===null||descriptionText===""){if(this._descriptionTextElem){this._descriptionTextElem.remove();this._descriptionTextElem=null}}else{if(!this._descriptionTextElem){this._descriptionTextElem=(0,jquery_builder_20.default)('<div class="wb-component-description"/>');this._elem.append(this._descriptionTextElem)}
this._descriptionTextElem.html(descriptionText)}
this._descriptionText=descriptionText}
return this};UIComponent.prototype.on=function(event,callback){var _this=this;var thisFunc=callback;thisFunc._wrapCallback=function(e){if(_this._enabled)
thisFunc(e);};if(this._elem)
this._elem.on(event,thisFunc._wrapCallback);return this};UIComponent.prototype.off=function(event,callback){if(this._elem)
this._elem.off(event,(callback._wrapCallback?callback._wrapCallback:callback));return this};UIComponent.prototype.setTooltip=function(value,placement,trigger){if(placement===void 0){placement='top'}
if(trigger===void 0){trigger='hover'}
if(this._tooltipIsSet&&!value){this._elem.tooltip('destroy');this._tooltipIsSet=!1;return}
if(value){if(!this._tooltipOpts)
this._tooltipOpts={};if(typeof(value)==='string')
this._tooltipOpts.title=value;this._tooltipOpts.placement=placement||'top';this._tooltipOpts.trigger=trigger||'hover';if(this._tooltipOpts.title){if(this._tooltipIsSet){this._elem.attr('data-original-title',this._tooltipOpts.title)}else{this._elem.tooltip(this._tooltipOpts)}
this._tooltipIsSet=!0}}};UIComponent.prototype.trigger=function(event,extraParameters){if(this._elem)
this._elem.trigger(event,extraParameters);return this};UIComponent.prototype.focus=function(){if(this._elem)
this._elem.trigger('focus');if(this._control&&('focus' in this._control)&&typeof this._control.focus==='function'){this._control.focus.call(this._control)}};UIComponent.prototype.getWrappedControl=function(){return this._control};UIComponent.wrapControl=function(control){var el=new UIComponent();el._control=control;el._elem=control.elem;el.getValue=function(){return this._control.getValue()};el.setValue=function(value){this._control.setValue(value)};el.setEnabled=function(enabled){UIComponent.prototype.setEnabled.call(this,enabled);if(this._control&&typeof this._control.setEnabled==="function"){this._control.setEnabled(enabled)}};el._control._componentWrapper=el;el._control.bindings=el.bindings;el._control.bindingsBySubType=el.bindingsBySubType;el._control.dependencyBindings=el.dependencyBindings;el._control.propertyType=el.propertyType;var ctl=control;if("onValueChanged" in ctl)
ctl._onValueChangedOverride=ctl.onValueChanged;ctl.onValueChanged=el.onValueChanged.bind(el);return el};UIComponent.nextInstanceIndex=0;return UIComponent}())});define("js/core/KeepAliveManager",["require","exports","MsgDialog","jquery","js/RemoteLoginDialog","js/core/BuilderConfig"],function(require,exports,MsgDialog_4,jquery_131,RemoteLoginDialog_2,BuilderConfig_36){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=exports.verifySession=exports.moreThanOneBuilder=void 0;var sessionIntId=0;var lastCheck=0;var staticMsgDlg=null;function moreThanOneBuilder(){if(!staticMsgDlg){staticMsgDlg=new MsgDialog_4.default(undefined,undefined,null,null,!0);staticMsgDlg.setTitle(__("Warning"));staticMsgDlg.setMessage(__('We have noticed that there is currently another builder opened in the same browser. Please use different browsers for editing several websites at the same time or edit one website after another.<br /><br />If you really need to save this website do the following:<ul><li>Leave this builder open and close other builders;</li><li>Open builder for the website you are currently on in the same browser;</li><li>Return to this builder;</il><li>Click on "Stay on this page" and click "Save".'),null,"block");staticMsgDlg.removeAllButtons();staticMsgDlg.addButton(__("Stay on this page"),function(){return staticMsgDlg===null||staticMsgDlg===void 0?void 0:staticMsgDlg.setVisible(!1)},!1,"btn-danger");staticMsgDlg.addButton(__("Close builder"),function(){wb_builder.setPageModified(!1);var wnd=window.open('about:blank','_self');if(wnd)
wnd.close();},!1,"btn-success")}
staticMsgDlg.setVisible(!0)}
exports.moreThanOneBuilder=moreThanOneBuilder;function showSessionEndedMessage(){if(!staticMsgDlg){staticMsgDlg=new MsgDialog_4.default(undefined,undefined,null,null,!0);staticMsgDlg.setTitle(__("Warning"));staticMsgDlg.setMessage('','<span class="fa fa-exclamation-triangle"></span> '+__('Your session has expired'),"warning");staticMsgDlg.removeAllButtons();staticMsgDlg.addButton(__("Reload the page"),function(){wb_builder.setPageModified(!1);location.href=BuilderConfig_36.wbConfig.getRawLnUrl('')},!1,"btn-success")}
staticMsgDlg.setVisible(!0)}
function verifySession(func){if(RemoteLoginDialog_2.RemoteLoginDialog.isProcessing())
return;lastCheck=(new Date()).getTime();var url=BuilderConfig_36.wbConfig.getLnUrl('session_keep_alive');var headers={};jquery_131.default.ajax({url:url,method:'GET',headers:headers,success:function(data,status,jqXHR){var res=!0;if(data.error&&data.error==='another-builder'){clearInterval(sessionIntId);moreThanOneBuilder();res=!1}
if(jqXHR.status==403)
showSessionEndedMessage();if(typeof func==='function')
func(res,!0);},error:function(jqXHR){if(jqXHR.status==403)
showSessionEndedMessage();if(typeof func==='function')
func(!1,!1);}})}
exports.verifySession=verifySession;function init(){sessionIntId=setInterval(function(){return verifySession()},60000);window.addEventListener('focus',function(){var limit=(new Date()).getTime()-(300*1000);if(lastCheck<limit)
verifySession();})}
exports.init=init});define("js/FreeGallery",["require","exports","jquery"],function(require,exports,jquery_132){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Module=void 0;var rand=function(from,to){var choices=to-from+1;return Math.floor(Math.random()*choices+from)};var makeUrl=function(baseUrl,params){var qs=Object.keys(params).map(function(i){return i+'='+(params[i]?encodeURIComponent(params[i]):'')}).join('&');return baseUrl+(qs?'?'+qs:'')};var FreeGalleryDef=(function(){function FreeGalleryDef(){this.galleries={};this.current=null}
FreeGalleryDef.prototype.add=function(cls){this.galleries[cls.ID]=cls};FreeGalleryDef.prototype.resetPages=function(){for(var i in this.galleries){this.galleries[i].totalImages=0;this.galleries[i].page=0}};FreeGalleryDef.prototype.takeAnyFree=function(){var useGallery=null;var ids=Object.keys(this.galleries);while(ids.length>0){var idx=rand(0,ids.length-1);var id=ids.splice(idx,1)[0];var gallery=this.galleries[id];if(!gallery.totalPages||gallery.page<gallery.totalPages){useGallery=gallery;break}}
return useGallery};FreeGalleryDef.genOptionsFromArgs=function(args){var res={perPage:(args.perPage?args.perPage:25),forEach:((args.forEach&&(typeof args.forEach==='function'))?args.forEach:function(i,item){}),beforeForEach:((args.beforeForEach&&(typeof args.beforeForEach==='function'))?args.beforeForEach:function(){}),afterForEach:((args.afterForEach&&(typeof args.afterForEach==='function'))?args.afterForEach:function(){}),emptyList:((args.emptyList&&(typeof args.emptyList==='function'))?args.emptyList:function(){})};return res};FreeGalleryDef.prototype.init=function(args){this.options=FreeGalleryDef.genOptionsFromArgs(args);this.resetPages()};FreeGalleryDef.prototype.load=function(searchQuery){this.searchQuery=searchQuery?searchQuery:null;this.current=this.takeAnyFree();if(this.current){this.current.loadGallery(this.options,(this.current.page+1),this.searchQuery);this.current.page++}};FreeGalleryDef.prototype.ifActive=function(callback){var promises=[];for(var id in this.galleries){promises.push(this.galleries[id].isOK())}
jquery_132.default.when.apply(jquery_132.default,promises).done(callback)};return FreeGalleryDef}());var FreeGallery=(function(){function FreeGallery(){this.page=0;this.totalImages=0;this.totalPages=0}
return FreeGallery}());var UnsplashGallery=(function(_super){__extends(UnsplashGallery,_super);function UnsplashGallery(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ID='unsplash';_this.KEY='d7d1134d5a4cb24f6aaca87fc75254aad7f6fad54750e8634e8d18c7353036c7';_this.IMAGES_URL='https://api.unsplash.com/search/photos/';_this.RANDOM_IMAGES_URL='https://api.unsplash.com/photos/';_this.MAX_RETRIES=3;_this.retries=0;return _this}
UnsplashGallery.prototype.url=function(page,query,perPage){if(page===void 0){page=1}
if(query===void 0){query=null}
if(perPage===void 0){perPage=25}
var url;var params={};params.client_id=this.KEY;if(query){params.query=query;url=this.IMAGES_URL}else{url=this.RANDOM_IMAGES_URL}
params.per_page=''+perPage;params.page=''+page;return makeUrl(url,params)};UnsplashGallery.prototype.loadGallery=function(options,page,searchQuery){var _this=this;if(page===void 0){page=1}
if(searchQuery===void 0){searchQuery=null}
var url=this.url(page,searchQuery,options.perPage);jquery_132.default.ajax({url:url,success:function(data){_this.retries=0;var list=searchQuery?data.results:data;_this.totalPages=searchQuery?data.total_pages:1000;_this.totalImages=list.length;if(_this.totalImages){options.beforeForEach();jquery_132.default.each(list,function(i,li){var item={url:li.urls.regular,thumb:li.urls.thumb,name:li.user.name,title:li.user.name};options.forEach(i,item)});options.afterForEach()}else{options.emptyList()}},error:function(){_this.retries++;if(_this.retries<_this.MAX_RETRIES){_this.loadGallery(options,page,searchQuery)}},dataType:'json'})};UnsplashGallery.prototype.isOK=function(){var deferred=jquery_132.default.Deferred();deferred.resolve();return deferred};return UnsplashGallery}(FreeGallery));var PixabayGallery=(function(_super){__extends(PixabayGallery,_super);function PixabayGallery(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ID='pixabay';_this.KEY='8464430-d10ea9b4543afa20b3042ab23';_this.IMAGES_URL='https://pixabay.com/api/';_this.MAX_RETRIES=3;_this.retries=0;return _this}
PixabayGallery.prototype.url=function(page,query,perPage){if(page===void 0){page=1}
if(query===void 0){query=null}
if(perPage===void 0){perPage=25}
var url=this.IMAGES_URL;var params={};params.key=this.KEY;if(query)
params.q=query;params.safesearch='true';params.per_page=''+perPage;params.page=''+page;return makeUrl(url,params)};PixabayGallery.prototype.loadGallery=function(options,page,searchQuery){var _this=this;if(page===void 0){page=1}
if(searchQuery===void 0){searchQuery=null}
var url=this.url(page,searchQuery,options.perPage);jquery_132.default.ajax({url:url,success:function(data){_this.retries=0;var list=data.hits;_this.totalImages=list.length;_this.totalPages=Math.ceil(data.totalHits/(options.perPage?options.perPage:20));if(_this.totalImages){options.beforeForEach();jquery_132.default.each(list,function(i,li){var item={url:li.largeImageURL,thumb:li.previewURL,name:li.user,title:li.tags,width:li.imageWidth||0,height:li.imageHeight||0,size:li.imageSize||0};options.forEach(i,item)});options.afterForEach()}else{options.emptyList()}},error:function(){_this.retries++;if(_this.retries<_this.MAX_RETRIES){_this.loadGallery(options,page,searchQuery)}},dataType:'json'})};PixabayGallery.prototype.isOK=function(){var deferred=jquery_132.default.Deferred();jquery_132.default.ajax({url:this.url(),error:function(){return deferred.reject()},success:function(){return deferred.resolve()},});return deferred};return PixabayGallery}(FreeGallery));exports.Module=new FreeGalleryDef();exports.Module.add(new PixabayGallery())});define("js/ui/AdminFileInfo",["require","exports","js/core/BuilderConfig","js/CustomContainer","js/DropdownBox","js/FlexLayout","jquery","js/Label","js/Service","js/TextField","js/UIButton"],function(require,exports,BuilderConfig_37,CustomContainer_17,DropdownBox_13,FlexLayout_14,jquery_133,Label_26,Service_69,TextField_13,UIButton_27){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AdminFileInfo=void 0;var licensesTypes=[{id:'none',name:'- '+__('None')+' -',format:''},{id:'cc0',name:'CC0',format:'https://unsplash.com/photos/nBtmgIfY0HU'},{id:'own',name:'Own',format:'Site.pro\\Photos\\Own\\Filip\\176.jpg'},{id:'purchased',name:'Purchased',format:'Site.pro\\Photos\\Purchased\\03-poster-mockup-square.psd'},];var AdminFileInfo=(function(_super){__extends(AdminFileInfo,_super);function AdminFileInfo(){var _this=_super.call(this,'column')||this;_this.mediaFile=null;_this.infoBlock=new CustomContainer_17.CustomContainer().addClass('wb-ctrl-info');_this.typeSelector=new DropdownBox_13.DropdownBox().on('change',function(){return _this.updateUI()});_this.urlField=new TextField_13.TextField();_this.downloadBtn=new UIButton_27.UIButton('',UIButton_27.UIButton.STYLE_DEFAULT,'fa fa-download').setTitle(__('Download')).on('click',function(){return _this.download()});_this.saveBtn=new UIButton_27.UIButton('',UIButton_27.UIButton.STYLE_SUCCESS,'fa fa-floppy-o').setTitle(__('Apply')).on('click',function(){return _this.save()});_this.addClass('wb-admin-file-info');_this.setSpacing(10).addAllChildren([new FlexLayout_14.FlexLayout().setSpacing('field-default').addAllChildren([new FlexLayout_14.FlexLayout('column').addAllChildren([new Label_26.Label(__('Original URL')),_this.urlField,]),new FlexLayout_14.FlexLayout('column').addAllChildren([new Label_26.Label(__('License')),_this.typeSelector,]),new FlexLayout_14.FlexLayout('column','flex-end').addAllChildren([new FlexLayout_14.FlexLayout().setSpacing('field-default-sm').addAllChildren([_this.downloadBtn,_this.saveBtn,]),])]).setItemFlex(0,1,1).setItemFlex(1,0,1,'100px'),_this.infoBlock]);_this.typeSelector.reload(licensesTypes);_this.updateUI();return _this}
AdminFileInfo.prototype.updateUI=function(){var _a;var item=(_a=this.typeSelector.getSelectedItem())===null||_a===void 0?void 0:_a.getOriginal();if(item&&item.format){this.infoBlock.setContent('<b>Link format:</b> '+item.format)}else{this.infoBlock.setContent('')}
this.downloadBtn.setEnabled((this.mediaFile&&this.mediaFile.file)?!0:!1);this.saveBtn.setEnabled((this.mediaFile&&this.mediaFile.file)?!0:!1)};AdminFileInfo.prototype.download=function(){if(!this.mediaFile||!this.mediaFile.file)
return;window.open(wb_builder.makeLocalUrl(this.mediaFile.file)+"?ts="+(new Date()).getTime())};AdminFileInfo.prototype.save=function(){var _this=this;if(!this.mediaFile||!this.mediaFile.file)
return;var file=this.mediaFile;this.saveBtn.setEnabled(!1);this.saveBtn.setIcon('fa fa-spinner fa-pulse');jquery_133.default.ajax({url:BuilderConfig_37.wbConfig.getLnUrl('media-save-admin-info'),method:'POST',dataType:'json',contentType:'application/json; charset=utf-8',data:JSON.stringify({path:Service_69.default.mediaLibrary.pathToId(file.file),licensing:{type:this.typeSelector.getValue(),sourceUrl:this.urlField.getValue()}}),success:function(data){if(!data.ok){console.error("Failed saving admin info: "+((data===null||data===void 0?void 0:data.error)||'unknown error'));return}
Service_69.default.mediaLibrary.getPathMeta(file.file,function(meta){var _a;if(meta)
meta.licensing=data.licensing;if(file.file===((_a=_this.mediaFile)===null||_a===void 0?void 0:_a.file))
_this.setValue(file);});_this.saveBtn.setButtonStyle(UIButton_27.UIButton.STYLE_SUCCESS)},error:function(error){console.error("Failed saving admin info: "+error);_this.saveBtn.setButtonStyle(UIButton_27.UIButton.STYLE_DANGER)},complete:function(){_this.saveBtn.setEnabled(!0);_this.saveBtn.setIcon('fa fa-floppy-o')}})};AdminFileInfo.prototype.setValue=function(file){var _this=this;if(file&&file.file){this.mediaFile=file;this.setEnabled(!1);this.urlField.setValue('loading...');this.setVisible(!0);Service_69.default.mediaLibrary.getPathMeta(file.file,function(meta){var _a,_b;var item=_this.typeSelector.getItemById(((_a=meta===null||meta===void 0?void 0:meta.licensing)===null||_a===void 0?void 0:_a.type)||'-')||_this.typeSelector.getItem(0);_this.typeSelector.selectItem(item);_this.urlField.setValue(((_b=meta===null||meta===void 0?void 0:meta.licensing)===null||_b===void 0?void 0:_b.sourceUrl)||'');_this.setEnabled(!0);_this.updateUI()},function(){_this.urlField.setValue('Error: failed');_this.updateUI()})}else{this.mediaFile=null;this.urlField.setValue('');this.setVisible(!1)}};return AdminFileInfo}(FlexLayout_14.FlexLayout));exports.AdminFileInfo=AdminFileInfo});define("js/util/DataUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.arrayUnique=exports.isSet=void 0;function isSet(v){return!(typeof(v)==='undefined'||v===null)}
exports.isSet=isSet;function arrayUnique(arr){var u={},a=[];for(var i=0,l=arr.length;i<l;++i){if(u.hasOwnProperty(arr[i])){continue}
a.push(arr[i]);u[arr[i]]=1}
return a}
exports.arrayUnique=arrayUnique});define("js/ui/GridView",["require","exports","jquery","js/UIComponent"],function(require,exports,jquery_134,UIComponent_75){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.GridView=void 0;var ItemPlaceholder=(function(){function ItemPlaceholder(){this.item=null;this.position={left:-1,top:-1};this.size={width:-1,height:-1};this.markForRemoval=!1;this.inSelectionRange=!1;this.elem=(0,jquery_134.default)('<div class="wb-grid-view-item"></div>')}
ItemPlaceholder.prototype.setPosition=function(left,top){if(this.position.left===left&&this.position.top===top)
return;this.elem.css({left:left,top:top});this.position.left=left;this.position.top=top};ItemPlaceholder.prototype.setSize=function(width,height){if(this.size.width===width&&this.size.height===height)
return;this.elem.css({width:width,height:height});this.size.width=width;this.size.height=height};ItemPlaceholder.prototype.setItem=function(item){if(this.item===item)
return;if(this.item){if("getElem" in this.item)
this.item.getElem().detach();else this.item.detach()}
this.item=item;if(this.item){if("getElem" in this.item)
this.elem.append(this.item.getElem());else this.elem.append(this.item)}};ItemPlaceholder.prototype.setInSelectionRange=function(inRange){if(this.inSelectionRange===inRange)
return;this.inSelectionRange=inRange;if(inRange)
this.elem.addClass("in-selection-range");else this.elem.removeClass("in-selection-range")};return ItemPlaceholder}());var GridView=(function(_super){__extends(GridView,_super);function GridView(tagType){var _this=_super.call(this,tagType)||this;_this.multiselect=!1;_this.itemSpacing={width:10,height:4};_this.itemSize={width:70,height:82};_this.items=[];_this.filteredItems=[];_this.itemsContainerHeight=0;_this.itemPlaceholders=new Map();_this.unusedItemPlaceholders=[];_this.draggingItems=new Set();_this.placeholderFunc=undefined;_this.placeholderVisible=!1;_this.columnCount=0;_this.rowCount=0;_this.viewHeight=0;_this.selectionRange=null;_this.selectionBox=null;_this.autoScrollTimer=0;_this.autoScrollSpeed=0;_this.autoScrollLastTime=0;_this.autoScrollLastEvent=null;_this.dragOverlay=null;_this.dragPreview=null;_this.dropTargetHighlight=null;return _this}
GridView.prototype.destroy=function(){if(this.placeholderFunc){this.placeholderElem.off('click',this.placeholderFunc);this.placeholderFunc=undefined;var elem=this.placeholderElem[0];if(elem.parentNode)
elem.parentNode.removeChild(elem);}
_super.prototype.destroy.call(this)};GridView.prototype.buildInit=function(def,fields){var _a;var _this=this;this._elem.addClass("wb-grid-view");this.scrollArea=(0,jquery_134.default)('<div class="wb-grid-view-scroll-area"></div>');this.scrollArea.on("scroll",function(){_this.updateView()});this._elem.append(this.scrollArea);this.itemsContainer=(0,jquery_134.default)('<div class="wb-grid-view-items"></div>');this.scrollArea.append(this.itemsContainer);_a=this.buildDropPlaceholder(),this.placeholderElem=_a[0],this.placeholderFunc=_a[1];this.multiselect=!!def.multiselect;this.sortCallback=def.onSort;this.filterCallback=def.onFilter;this.placeholderClickCallback=def.onPlaceholderClick;this.selectionChangeCallback=def.onSelectionChange;this.dragCheckCallback=def.dragCheck;this.dragDropCallback=def.onDragDrop;var observer=new ResizeObserver(function(entries){_this.updateView()});observer.observe(this._elem.get(0));var autoScrollFunc=function(){var now=Date.now();var timeDelta=(now-_this.autoScrollLastTime)/1000;_this.autoScrollLastTime=now;if(!timeDelta)
return;try{_this.scrollArea[0].scrollBy({top:timeDelta*_this.autoScrollSpeed*30,behavior:"instant"})}catch(err){_this.scrollArea[0].scrollBy(0,timeDelta*_this.autoScrollSpeed*30)}
if(_this.autoScrollLastEvent)
_this.updateSelectionRange(_this.autoScrollLastEvent);_this.updateView()};this.mouseMoveEventListener=function(e){e.stopImmediatePropagation();e.preventDefault();if(!_this.selectionRange){_this.stopSelection();return}
if(_this.selectionRange.mode==="select"){var rect=_this._elem[0].getBoundingClientRect();_this.autoScrollSpeed=0;if(e.clientY<rect.top){_this.autoScrollSpeed=e.clientY-rect.top}else if(e.clientY>=rect.top+rect.height){_this.autoScrollSpeed=e.clientY-rect.top-rect.height+1}
if(_this.autoScrollSpeed){_this.autoScrollLastEvent=e;if(!_this.autoScrollTimer){_this.autoScrollLastTime=Date.now();_this.autoScrollTimer=setInterval(autoScrollFunc,32)}}else if(_this.autoScrollTimer){clearInterval(_this.autoScrollTimer);_this.autoScrollTimer=0;_this.autoScrollLastEvent=null}}else if(typeof _this.dragCheckCallback==="function"){var highlight=_this.dragCheckCallback(e.target);_this.selectionRange.canDrop=!!highlight;if(_this.dropTargetHighlight!==highlight){if(_this.dropTargetHighlight)(0,jquery_134.default)(_this.dropTargetHighlight).removeClass("wb-grid-view-drop-target");_this.dropTargetHighlight=highlight;if(_this.dropTargetHighlight)(0,jquery_134.default)(_this.dropTargetHighlight).addClass("wb-grid-view-drop-target");}}else{_this.selectionRange.canDrop=!1}
_this.updateSelectionRange(e);_this.updateView()};this.mouseUpEventListener=function(e){e.stopImmediatePropagation();e.preventDefault();var sel=null;if(_this.selectionRange){_this.updateSelectionRange(e);sel=_this.selectionRange}
_this.stopSelection();if(sel&&sel.started){if(sel.mode==="select"){if(_this.columnCount&&sel.startCol<=sel.endCol&&sel.startRow<=sel.endRow){if(!e.ctrlKey&&!e.shiftKey)
_this.clearSelection();for(var i=_this.filteredItems.length-1;i>=0;i--){var col=i%_this.columnCount;var row=Math.floor(i/_this.columnCount);if(col>=sel.startCol&&col<=sel.endCol&&row>=sel.startRow&&row<=sel.endRow){var item=_this.filteredItems[i];if("setSelected" in item)
item.setSelected(!0);}}
if(typeof _this.selectionChangeCallback==="function")
_this.selectionChangeCallback();}}else if(sel.mode==="drag"){if(typeof _this.dragCheckCallback==="function"&&typeof _this.dragDropCallback==="function"){if(_this.dragCheckCallback(e.target))
_this.dragDropCallback(e.target);}}}else{}};this.itemsContainer.on("mousedown",function(e){e.stopImmediatePropagation();e.preventDefault();if(_this.selectionRange||e.which!==1){_this.stopSelection();return}
window.addEventListener("mousemove",_this.mouseMoveEventListener,{capture:!0,passive:!1});window.addEventListener("mouseup",_this.mouseUpEventListener,{capture:!0,passive:!1});var dragMode=typeof _this.dragCheckCallback==="function"&&typeof _this.dragDropCallback==="function";if(dragMode){var activeItem=(0,jquery_134.default)(e.target).closest(".active");dragMode=activeItem.length>0&&_this._elem[0].contains(activeItem[0])}
_this.selectionRange={startX:0,startY:0,endX:0,endY:0,left:0,top:0,right:0,bottom:0,startCol:0,startRow:0,endCol:0,endRow:0,started:e.target===_this.itemsContainer[0],mode:dragMode?"drag":"select",canDrop:!1};_this.updateSelectionRange(e,!0)})};GridView.prototype.stopSelection=function(){if(this.dragPreview){this.dragPreview.empty()}
if(this.dragOverlay){this.dragOverlay.detach()}
if(this.dropTargetHighlight){(0,jquery_134.default)(this.dropTargetHighlight).removeClass("wb-grid-view-drop-target");this.dropTargetHighlight=null}
if(this.autoScrollTimer){clearInterval(this.autoScrollTimer);this.autoScrollTimer=0;this.autoScrollLastEvent=null}
if(!this.selectionRange)
return;var isDragMode=this.selectionRange.mode==="drag";this.selectionRange=null;window.removeEventListener("mousemove",this.mouseMoveEventListener,{capture:!0});window.removeEventListener("mouseup",this.mouseUpEventListener,{capture:!0});if(isDragMode){this.draggingItems.clear();this.update()}else this.updateView()};GridView.prototype.updateSelectionRange=function(e,initial){if(initial===void 0){initial=!1}
if(!this.selectionRange)
return;var rect=this.itemsContainer[0].getBoundingClientRect();this.selectionRange.endX=Math.floor(e.clientX-rect.left);this.selectionRange.endY=Math.floor(e.clientY-rect.top);if(initial){this.selectionRange.startX=this.selectionRange.endX;this.selectionRange.startY=this.selectionRange.endY}
this.selectionRange.left=Math.min(this.selectionRange.startX,this.selectionRange.endX);this.selectionRange.top=Math.min(this.selectionRange.startY,this.selectionRange.endY);this.selectionRange.right=Math.max(this.selectionRange.startX,this.selectionRange.endX);this.selectionRange.bottom=Math.max(this.selectionRange.startY,this.selectionRange.endY);var sx=this.itemSize.width+this.itemSpacing.width;var sy=this.itemSize.height+this.itemSpacing.height;this.selectionRange.startCol=Math.floor((this.selectionRange.left+this.itemSpacing.width)/sx);this.selectionRange.startRow=Math.floor((this.selectionRange.top+this.itemSpacing.height)/sy);this.selectionRange.endCol=Math.floor(this.selectionRange.right/sx);this.selectionRange.endRow=Math.floor(this.selectionRange.bottom/sy);if(!initial&&!this.selectionRange.started){var delta=Math.abs(this.selectionRange.endX-this.selectionRange.startX)+Math.abs(this.selectionRange.endY-this.selectionRange.startY);if(delta>=5){this.selectionRange.started=!0;if(this.selectionRange.mode==="drag"){if(!this.dragOverlay){this.dragOverlay=(0,jquery_134.default)('<div class="wb-grid-view-drag-overlay"></div>')}
if(!this.dragPreview){this.dragPreview=(0,jquery_134.default)('<div class="wb-grid-view-drag-preview"></div>');this.dragOverlay.append(this.dragPreview)}
this.dragPreview.empty();(0,jquery_134.default)(document.body).append(this.dragOverlay);var cnt=0;for(var _i=0,_a=this.filteredItems;_i<_a.length;_i++){var item=_a[_i];if(("isSelected" in item)&&item.isSelected()){this.draggingItems.add(item);if(++cnt<=3)
this.dragPreview.append(item.getElem().clone());}}
this.update();this.dragPreview.find(".active").removeClass("active");this.dragPreview.find(".btn").remove()}}}
if(this.selectionRange.started&&this.selectionRange.mode==="drag"&&this.dragPreview){this.dragPreview.css({left:e.clientX,top:e.clientY})}};GridView.prototype.buildDropPlaceholder=function(){var _this=this;var func;var result=(0,jquery_134.default)('<div>').addClass('wb-layout-element wb_media_library_placeholder').css({position:'absolute',left:0,right:0,top:0,bottom:0,display:'none'}).append((0,jquery_134.default)('<div>').addClass('wb-lednd-msg').append((0,jquery_134.default)('<span>').addClass('fa fa-hand-paper-o wb-drag-in-empty')).append((0,jquery_134.default)('<span>').addClass('wb-drag-in-empty-text').text(__('Drag and drop file here'))).append((0,jquery_134.default)('<div>').addClass('wb-or-in-empty').text('— '+__('OR').toLowerCase()+' —')).append((0,jquery_134.default)('<span>').addClass('fa fa-plus-circle wb-add-in-empty')).append((0,jquery_134.default)('<span>').addClass('wb-add-in-empty-text').text(__('Click to add')))).on('click',func=function(){if(typeof _this.placeholderClickCallback==="function")
_this.placeholderClickCallback();}).appendTo(this._elem);return[result,func]};GridView.prototype.setPlaceholderVisible=function(visible){if(this.placeholderVisible===visible)
return;this.placeholderVisible=visible;this.placeholderElem[0].style.display=visible?'block':'none'};GridView.prototype.setComponentOptions=function(options){_super.prototype.setComponentOptions.call(this,options);this.updateView()};GridView.prototype.getItems=function(){return __spreadArray([],this.items,!0)};GridView.prototype.getFilteredItems=function(){return __spreadArray([],this.filteredItems,!0)};GridView.prototype.addItems=function(items){if(!items.length)
return;if(!this.items.length)
this.items=__spreadArray([],items,!0);else{for(var i=0;i<items.length;i++){var idx=this.items.indexOf(items[i]);if(idx<0)
this.items.push(items[i]);}}
this.update()};GridView.prototype.removeItems=function(items){if(!this.items.length)
return;if(typeof items==="function"){for(var i=this.items.length-1;i>=0;i--){if(items(this.items[i]))
this.items.splice(i,1);}}else{if(!items.length)
return;for(var i=items.length-1;i>=0;i--){var idx=this.items.indexOf(items[i]);if(idx>=0)
this.items.splice(idx,1);}}
this.update()};GridView.prototype.clearItems=function(){if(!this.items.length)
return;this.items=[];this.update()};GridView.prototype.clearSelection=function(){for(var _i=0,_a=this.items;_i<_a.length;_i++){var item=_a[_i];if("setSelected" in item)
item.setSelected(!1);else item.removeClass("active")}};GridView.prototype.setVisible=function(visible){_super.prototype.setVisible.call(this,visible);if(visible)
this.updateView();return this};GridView.prototype.setItemSize=function(size){if(size==="default"||size==="small")
this.setItemSize({width:70,height:82});else if(size==="large")
this.setItemSize({width:140,height:144});else if(typeof size==="object"){this.itemSize=size;this.updateView()}};GridView.prototype.setSortCallback=function(sortFunc){this.sortCallback=sortFunc;this.update()};GridView.prototype.setFilterCallback=function(filterFunc){this.filterCallback=filterFunc;this.update()};GridView.prototype.update=function(){var _this=this;this.filteredItems=this.items.filter(function(item){return!_this.draggingItems.has(item)&&(!("isHidden" in item)||!item.isHidden())&&(_this.filterCallback?_this.filterCallback(item):!0)});if(this.sortCallback)
this.filteredItems=this.filteredItems.sort(this.sortCallback);this.updateView()};GridView.prototype.updateView=function(){if(this.selectionRange&&this.selectionRange.started&&this.selectionRange.mode==="select"){if(!this.selectionBox){this.selectionBox=(0,jquery_134.default)('<div class="wb-grid-view-selection-box"></div>');this.itemsContainer.append(this.selectionBox)}
this.selectionBox.css({left:this.selectionRange.left,top:this.selectionRange.top,width:this.selectionRange.right-this.selectionRange.left,height:this.selectionRange.bottom-this.selectionRange.top});this.selectionBox.removeClass("hidden");this._elem.addClass("selecting")}else if(this.selectionBox){this._elem.removeClass("selecting");this.selectionBox.addClass("hidden")}
if(typeof this.dragCheckCallback==="function"&&typeof this.dragDropCallback==="function"){this._elem.addClass("wb-items-draggable")}else{this._elem.removeClass("wb-items-draggable")}
var width=this.itemsContainer.innerWidth();if(!width){return}
var itemCount=this.filteredItems.length;var columnWidth=this.itemSize.width+this.itemSpacing.width;var rowHeight=this.itemSize.height+this.itemSpacing.height;this.columnCount=Math.max(1,Math.floor((width+this.itemSpacing.width)/columnWidth));this.rowCount=Math.ceil(itemCount/this.columnCount);var height=this.rowCount*rowHeight-this.itemSpacing.height;if(this.itemsContainerHeight!==height){this.itemsContainerHeight=height;this.itemsContainer.css("height",height)}
this.viewHeight=this.scrollArea.innerHeight();var viewScrollPos=this.scrollArea.scrollTop();var firstRowIndex=Math.floor(viewScrollPos/rowHeight);var lastRowIndex=Math.floor((viewScrollPos+this.viewHeight)/rowHeight);var itemsNotFound=[];this.itemPlaceholders.forEach(function(placeholder){placeholder.markForRemoval=!0});for(var rowIdx=firstRowIndex;rowIdx<=lastRowIndex;rowIdx++){for(var colIdx=0;colIdx<this.columnCount;colIdx++){var itemIdx=colIdx+rowIdx*this.columnCount;if(itemIdx>=itemCount){rowIdx=lastRowIndex;break}
var expectedItem=this.filteredItems[itemIdx];var placeholder=this.itemPlaceholders.get(expectedItem);if(placeholder){placeholder.markForRemoval=!1;placeholder.setPosition(colIdx*columnWidth,rowIdx*rowHeight);placeholder.setSize(this.itemSize.width,this.itemSize.height);placeholder.setInSelectionRange(!!this.selectionRange&&this.selectionRange.started&&this.selectionRange.mode==="select"&&("canSelect" in expectedItem)&&expectedItem.canSelect()&&colIdx>=this.selectionRange.startCol&&colIdx<=this.selectionRange.endCol&&rowIdx>=this.selectionRange.startRow&&rowIdx<=this.selectionRange.endRow)}else{itemsNotFound.push([colIdx,rowIdx,expectedItem])}}}
var removePlaceholders=[];this.itemPlaceholders.forEach(function(placeholder,key){if(placeholder.markForRemoval)
removePlaceholders.push(key);});for(var _i=0,itemsNotFound_1=itemsNotFound;_i<itemsNotFound_1.length;_i++){var _a=itemsNotFound_1[_i],colIdx=_a[0],rowIdx=_a[1],expectedItem=_a[2];var placeholder=void 0;if(removePlaceholders.length){var key=removePlaceholders.pop();placeholder=this.itemPlaceholders.get(key);this.itemPlaceholders.delete(key)}else if(this.unusedItemPlaceholders.length){placeholder=this.unusedItemPlaceholders.pop();this.itemsContainer.append(placeholder.elem)}else{placeholder=new ItemPlaceholder();this.itemsContainer.append(placeholder.elem)}
this.itemPlaceholders.set(expectedItem,placeholder);placeholder.setItem(expectedItem);placeholder.setPosition(colIdx*columnWidth,rowIdx*rowHeight);placeholder.setSize(this.itemSize.width,this.itemSize.height);placeholder.setInSelectionRange(!!this.selectionRange&&this.selectionRange.started&&this.selectionRange.mode==="select"&&("canSelect" in expectedItem)&&expectedItem.canSelect()&&colIdx>=this.selectionRange.startCol&&colIdx<=this.selectionRange.endCol&&rowIdx>=this.selectionRange.startRow&&rowIdx<=this.selectionRange.endRow)}
for(var _b=0,removePlaceholders_1=removePlaceholders;_b<removePlaceholders_1.length;_b++){var key=removePlaceholders_1[_b];var placeholder=this.itemPlaceholders.get(key);placeholder.markForRemoval=!1;placeholder.setItem(null);this.unusedItemPlaceholders.push(placeholder);this.itemPlaceholders.delete(key);placeholder.elem.detach()}};GridView.prototype.scrollToTop=function(){var _a;(_a=this.scrollArea)===null||_a===void 0?void 0:_a.scrollTop(0)};GridView.prototype.scrollItemIntoView=function(item){var _a;var idx=this.filteredItems.indexOf(item);if(idx<0)
return;var rowIdx=Math.floor(idx/this.columnCount);(_a=this.scrollArea)===null||_a===void 0?void 0:_a.scrollTop(Math.floor((rowIdx+0.5)*(this.itemSize.height+this.itemSpacing.height)-0.5*this.viewHeight))};return GridView}(UIComponent_75.UIComponent));exports.GridView=GridView});define("js/MediaLibrary",["require","exports","AlertBox","js/BackgroundControl","js/BuilderEvent","js/core/BuilderConfig","js/core/KeepAliveManager","js/CustomContainer","Dialog","js/FlexLayout","js/FreeGallery","jquery","js/Label","js/Service","js/ui/AdminFileInfo","js/UIButton","js/util/DataUtil","js/util/VideoThumbGenerator","js/ui/TreeView","js/Serializable","js/ui/GridView","js/VerticalLayout","Preloader"],function(require,exports,AlertBox_4,BackgroundControl_14,BuilderEvent_30,BuilderConfig_38,KeepAliveManager_1,CustomContainer_18,Dialog_22,FlexLayout_15,FreeGallery_1,jquery_135,Label_27,Service_70,AdminFileInfo_1,UIButton_28,DataUtil,VideoThumbGenerator_2,TreeView_7,Serializable_17,GridView_1,VerticalLayout_36,Preloader_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.MediaLibrary=exports.getFontIconProperty=void 0;var AddCategoryButton=(function(){function AddCategoryButton(library){var _this_1=this;this.library=library;this.isInputMode=!1;this.buttonWrap=(0,jquery_135.default)('<div>');this.newCatBtn=(0,jquery_135.default)('<button>').addClass('btn btn-link').attr({type:'button'}).css({marginLeft:'3px'}).append((0,jquery_135.default)('<i>').addClass('fa fa-plus')).append(' '+__('New Item')).on('click',function(){return _this_1.setInputMode(!0)}).appendTo(this.buttonWrap);this.iInput=(0,jquery_135.default)('<input>').addClass('form-control').attr({type:'text'}).on('keydown',function(e){if(e.keyCode===13)
_this_1.onAddCategory();else if(e.keyCode===27){e.stopPropagation();e.preventDefault();_this_1.setInputMode(!1)}});var confirmBtn=(0,jquery_135.default)('<button>').addClass('btn btn-default').append((0,jquery_135.default)('<span>').addClass('fa fa-plus')).on('click',function(){return _this_1.onAddCategory()});var cancelBtn=(0,jquery_135.default)('<button>').addClass('btn btn-default').append((0,jquery_135.default)('<span>').addClass('fa fa-times')).on('click',function(){return _this_1.setInputMode(!1)});this.iBlock=(0,jquery_135.default)('<div>').addClass('input-group input-group-sm hide').css({margin:'8px 0 0 0'}).append(this.iInput).append((0,jquery_135.default)('<span>').addClass('input-group-btn').append(confirmBtn).append(cancelBtn))}
AddCategoryButton.prototype.appendTo=function(parent){this.buttonWrap.appendTo(parent);this.iBlock.appendTo(parent)};AddCategoryButton.prototype.setInputMode=function(inputMode){if(this.isInputMode==inputMode)
return;this.isInputMode=inputMode;if(inputMode){this.newCatBtn.addClass('hide');this.iBlock.removeClass('hide');this.iInput.focus()}else{this.newCatBtn.removeClass('hide');this.iBlock.addClass('hide');this.iInput.val('')}};AddCategoryButton.prototype.onAddCategory=function(){var cat=jquery_135.default.trim(this.iInput.val());if(cat){this.library.hideMessage();this.library.createCategory(cat)}else this.library.showMessage(__('Field "%s" is required').replace('%s',__('Item Name')),'<i class="fa fa-exclamation-triangle"></i>','error')};return AddCategoryButton}());var MediaLibraryTag=(function(_super){__extends(MediaLibraryTag,_super);function MediaLibraryTag(data){if(data===void 0){data=null}
var _this_1=_super.call(this)||this;_this_1.tag="";_this_1.virtual=!1;_this_1.unused=!1;_this_1.deserialize(data);return _this_1}
return MediaLibraryTag}(Serializable_17.Serializable));var sizePattern=/(\.[^\.]+)$/i;var validSizeTypes=/\.(?:jpg|png|gif)/i;var host=location.host;var Thumb=(function(){function Thumb(type,name,value,onClickCallback,onRemoveCallback){this.type=type;this.name=name;this.value=value;this.onClickCallback=onClickCallback;this.onRemoveCallback=onRemoveCallback;this.wrapperElem=null;this.imgIconElem=null;this.tag='';this.selected=!1;this.hidden=!1;this.data=undefined;this.size='default';this.ts=(new Date()).getTime();this.clickFunc=undefined;this.dblClickFunc=undefined;this.removeFunc=undefined;this.title="";this.unused=null;this.title=this.name}
Thumb.prototype.destroy=function(){if(this.elem){this.elem.remove();if(this.elem[0].parentNode){this.elem[0].parentNode.removeChild(this.elem[0])}}
if(this.clickFunc){this.elem.off('click touchend',this.clickFunc);this.clickFunc=undefined}
if(this.dblClickFunc){this.elem.off('dblclick',this.dblClickFunc);this.dblClickFunc=undefined}
if(this.removeBtn&&this.removeFunc){this.removeBtn.off('click touchend',this.removeFunc);this.removeFunc=undefined}};Thumb.prototype.hasElem=function(){return!!this.elem};Thumb.prototype.getElem=function(){var _this_1=this;if(!this.elem){var lastEvent_1=null;this.elem=(0,jquery_135.default)('<li>').attr("title",this.title).css({display:'inline-block'}).on('click',this.clickFunc=function(e){return _this_1.onClickCallback.call(_this_1,e)}).on('touchstart',function(e){return lastEvent_1=e}).on('touchmove',function(e){return lastEvent_1=null}).on('touchend',function(e){if(lastEvent_1){(_this_1.clickFunc=function(e){return _this_1.onClickCallback.call(_this_1,e)})(e)}}).on('dblclick',this.dblClickFunc=function(e){return e.stopPropagation()});if(this.type=='icon'){this.elem.addClass('thumb-li-icon')}else{this.elem.addClass('thumb-li')}
if(this.selected)
this.elem.addClass("active");if(this.hidden)
this.elem.addClass("hidden");if(this.onRemoveCallback){this.removeBtn=(0,jquery_135.default)('<a>').addClass('btn btn-default btn-xs').attr({href:'javascript:void(0)'}).css({display:'none'}).on('click touchend',this.removeFunc=function(e){var _a;return(_a=_this_1.onRemoveCallback)===null||_a===void 0?void 0:_a.call(_this_1,e)}).append((0,jquery_135.default)('<i>').addClass('glyphicon glyphicon-remove')).appendTo(this.elem);this.elem.hover(function(){return _this_1.removeBtn.css({display:'block'})},function(){return _this_1.removeBtn.css({display:'none'})})}
this.nameElem=(0,jquery_135.default)('<span>').text(this.name);if(this.type=='image'||this.type=='media'){this.wrapperElem=(0,jquery_135.default)('<a>').addClass('thumbnail').attr({href:'javascript:void(0)'}).appendTo(this.elem);this.nameElem.addClass('wb_thumb_name').appendTo(this.elem);if(this.type=='media'){this.imgIconElem=(0,jquery_135.default)('<i>').appendTo(this.wrapperElem)}
this.imgElem=(0,jquery_135.default)('<img>').attr({alt:''}).appendTo(this.wrapperElem)}else if(this.type=='icon'){this.imgElem=(0,jquery_135.default)('<i>').appendTo(this.elem);this.nameElem.appendTo(this.elem)}else if(this.type=='button'){this.elem.addClass('firstThumb');this.wrapperElem=(0,jquery_135.default)('<a>').addClass('thumbnail').attr({href:'javascript:void(0)'}).appendTo(this.elem);this.nameElem.addClass('name');this.imgElem=(0,jquery_135.default)('<i>').addClass('glyphicon glyphicon-plus');var bg=(0,jquery_135.default)('<span class="empty"></span>');var cont=(0,jquery_135.default)('<span class="centered"></span>');this.wrapperElem.append(bg);bg.append(cont);cont.append(this.imgElem,this.nameElem)}
this.updateValueElements()}
return this.elem};Thumb.prototype.updateValueElements=function(){if(!this.elem)
return;var value=this.value;if(this.type=='image'){if(this.size==="large"&&value&&validSizeTypes.test(value.split('?')[0])&&(value.indexOf('/'+host+'/')>=0||value.indexOf('/'+host+':')>=0)&&value.indexOf('/gallery/')>=0){value=value.replace(sizePattern,'_large$1')}
this.imgElem[0].src=value+'?ts='+this.ts}else if(this.type=='media'){var img=this.imgElem[0];var ico=this.imgIconElem?this.imgIconElem[0]:null;if(value.indexOf(':')>=0||value.indexOf('/')>=0||!ico){img.src=value;img.style.display=''}else if(ico){ico.className=value;img.style.display='none'}}else if(this.type=='icon'||this.type=='button'){this.imgElem[0].className=value}};Thumb.prototype.setSize=function(size){if(this.size===size)
return;this.size=size;this.updateValueElements()};Thumb.prototype.setData=function(data){this.data=data};Thumb.prototype.setTag=function(tag){this.tag=tag};Thumb.prototype.setTitle=function(title){var _a;this.title=title;(_a=this.elem)===null||_a===void 0?void 0:_a.attr({title:title})};Thumb.prototype.setValue=function(value){if(value===this.value)
return;this.value=value;this.updateValueElements()};Thumb.prototype.setUnused=function(value){this.unused=value};Thumb.prototype.isUnused=function(){return this.unused===!0};Thumb.prototype.canSelect=function(){return this.type!=="button"};Thumb.prototype.isSelected=function(){return this.selected};Thumb.prototype.setSelected=function(selected){if(this.selected===selected||!this.canSelect())
return;this.selected=selected;if(this.elem){if(selected){this.elem.addClass('active')}else{this.elem.removeClass('active')}}};Thumb.prototype.toggleSelected=function(){this.setSelected(!this.selected)};Thumb.prototype.isHidden=function(){return this.hidden};Thumb.prototype.setHidden=function(hidden){if(this.hidden===hidden)
return;this.hidden=hidden;if(this.elem){if(hidden){this.elem.addClass('hidden')}else{this.elem.removeClass('hidden')}}};return Thumb}());var ThumbList=(function(_super){__extends(ThumbList,_super);function ThumbList(){var _this_1=_super.call(this,'ul')||this;_this_1.thumbs=[];_this_1.moreBtn=null;_this_1.moreBtnFirst=!1;_this_1.library=null;_this_1.thumbSize='default';_this_1.addClass('thumbnails wb_media_library');return _this_1}
ThumbList.prototype.buildInit=function(data,_){var _this_1=this;var type=data.listType||'default';if(type=='icons'){this.addClass('font_awesome_icons').removeClass('thumbnails')}else if(type=='free'){this.moreBtn=new Thumb('button',__('Show more'),'glyphicon glyphicon-plus',function(){if(!_this_1.library)
return;FreeGallery_1.Module.load(_this_1.library.freeGalleryInfo.searchPhrase)});this.getElem().append(this.moreBtn.getElem());this.moreBtn.getElem().fadeIn();this.moreBtnFirst=!1}else if(type=='default'){this.moreBtn=new Thumb('button',__('Add New'),'glyphicon glyphicon-plus',function(){if(!_this_1.library)
return;_this_1.library.triggerUploader()});this.getElem().append(this.moreBtn.getElem());this.moreBtn.getElem().fadeIn();this.moreBtnFirst=!0}};ThumbList.prototype.destroy=function(){if(this._elem[0].parentNode){this._elem[0].parentNode.removeChild(this._elem[0])}
if(this.moreBtn)
this.moreBtn.destroy();this.clearThumbs();this.library=null;_super.prototype.destroy.call(this)};ThumbList.prototype.setLibrary=function(library){this.library=library};ThumbList.prototype.setThumbSize=function(size){if(this.thumbSize===size)
return;var lastSize=this.thumbSize;this.thumbSize=size;this.removeClass('wb-'+lastSize+'-thumbs').addClass('wb-'+size+'-thumbs');for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];thumb.setSize(size)}};ThumbList.prototype.scrollToSelection=function(thumb){if(thumb===void 0){thumb=null}
if(!thumb){for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb_1=_a[_i];if(thumb_1.isHidden()||!thumb_1.isSelected())
continue;break}}
if(thumb){var elem=thumb.getElem()[0];try{elem.scrollIntoView({block:'center',inline:'center',behavior:'smooth'})}catch(ignored){try{elem.scrollIntoView({block:'center',inline:'center'})}catch(ignored){elem.scrollIntoView(!1)}}}};ThumbList.prototype.getNumVisibleThumbs=function(){var result=0;for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];if(!thumb.isHidden())
result++}
return result};ThumbList.prototype.clearFilter=function(){for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];thumb.setHidden(!1)}};ThumbList.prototype.filter=function(func){for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];thumb.setHidden(!func(thumb))}};ThumbList.prototype.clearSelection=function(){this._elem.find('li').removeClass('active');for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];thumb.setSelected(!1)}};ThumbList.prototype.scrollToTop=function(){this.getElem().scrollTop(0)};ThumbList.prototype.sortThumbs=function(thumbs){thumbs.sort(function(a,b){if(a.name.toLowerCase()===b.name.toLowerCase())
return 0;return(a.name.toLowerCase()>b.name.toLowerCase())?1:-1})};ThumbList.prototype.findThumbByValue=function(value){var parts=value.split('/');var pattern=new RegExp(parts[parts.length-1]);for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];if(pattern.test(thumb.value))
return thumb}
return null};ThumbList.prototype.addAllThumbs=function(thumbs,sorted){if(sorted===void 0){sorted=!1}
this.sortThumbs(thumbs);if(sorted){for(var i=thumbs.length-1;i>=0;i--){this.addThumb(thumbs[i],!0)}}else{for(var _i=0,thumbs_1=thumbs;_i<thumbs_1.length;_i++){var thumb=thumbs_1[_i];this.addThumb(thumb)}}};ThumbList.prototype.addThumb=function(thumb,sorted){if(sorted===void 0){sorted=!1}
var refThumb=null;this.thumbs.push(thumb);thumb.setSize(this.thumbSize);if(sorted){this.sortThumbs(this.thumbs);var idx=this.thumbs.indexOf(thumb);if(idx>=0&&(idx+1)<this.thumbs.length){refThumb=this.thumbs[idx+1]}}
if(refThumb){refThumb.getElem().before(thumb.getElem())}else if(this.moreBtn&&!this.moreBtnFirst){this.moreBtn.getElem().before(thumb.getElem())}else{this.getElem().append(thumb.getElem())}};ThumbList.prototype.removeThumb=function(thumb,noStore){if(noStore===void 0){noStore=!1}
var idx=this.thumbs.indexOf(thumb);if(idx>=0){if(!noStore)
this.thumbs.splice(idx,1);thumb.destroy()}};ThumbList.prototype.clearThumbs=function(){for(var _i=0,_a=this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];this.removeThumb(thumb,!0)}
this.thumbs=[]};return ThumbList}(CustomContainer_18.CustomContainer));var ViewChooser=(function(_super){__extends(ViewChooser,_super);function ViewChooser(){var _this_1=_super.call(this,'row','flex-end')||this;_this_1.defaultBtn=new UIButton_28.UIButton('',null,'fa fa-th').on('click',function(){return _this_1.setValue('default')});_this_1.largeBtn=new UIButton_28.UIButton('',null,'fa fa-th-large').on('click',function(){return _this_1.setValue('large')});_this_1.listElem=null;_this_1.value='default';_this_1.lastBtn=null;_this_1.setSpacing(5);_this_1.addAllChildren([_this_1.defaultBtn,_this_1.largeBtn]);_this_1.setValue('default',!0);return _this_1}
ViewChooser.prototype.destroy=function(){this.listElem=null;var elem=this._elem[0];if(elem.parentNode)
elem.parentNode.removeChild(elem);this.defaultBtn.destroy();this.largeBtn.destroy();_super.prototype.destroy.call(this)};ViewChooser.prototype.setListElem=function(elem){this.listElem=elem;this.setValue(this.value,!0)};ViewChooser.prototype.reload=function(){this.setValue(this.value,!0)};ViewChooser.prototype.setValue=function(value,force){if(force===void 0){force=!1}
if(this.value===value&&!force)
return;this.value=value;if(this.lastBtn)
this.lastBtn.removeClass('active');var btn=null;if(value=='default'){btn=this.defaultBtn}else if(value=='large'){btn=this.largeBtn}
if(btn)
btn.addClass('active');this.lastBtn=btn;if(this.listElem){var firstSelected=null;if(this.listElem instanceof GridView_1.GridView){for(var _i=0,_a=this.listElem.getItems();_i<_a.length;_i++){var item=_a[_i];item.setSize(value);if(!firstSelected&&item.isSelected())
firstSelected=item}
this.listElem.setItemSize(value)}else this.listElem.setThumbSize(value);if(firstSelected){if(this.listElem instanceof GridView_1.GridView)
this.listElem.scrollItemIntoView(firstSelected);else this.listElem.scrollToSelection(firstSelected)}else this.listElem.scrollToTop()}};return ViewChooser}(FlexLayout_15.FlexLayout));var SortChooser=(function(_super){__extends(SortChooser,_super);function SortChooser(){var _this_1=_super.call(this,'row','flex-end')||this;_this_1.sortBtn=new UIButton_28.UIButton('',null,'fa fa-sort-amount-asc');_this_1.sortMenu=(0,jquery_135.default)('<div>').addClass('wb-thumbs-sort').append((0,jquery_135.default)('<ul>').append((0,jquery_135.default)('<li>').attr('data-sort','name_asc').addClass('active').append((0,jquery_135.default)('<i>').addClass('fa fa-sort-alpha-asc')).append((0,jquery_135.default)('<span>').text(' Name (ascending)'))).append((0,jquery_135.default)('<li>').attr('data-sort','name_desc').append((0,jquery_135.default)('<i>').addClass('fa fa-sort-alpha-desc')).append((0,jquery_135.default)('<span>').text(' Name (descending)'))).append((0,jquery_135.default)('<li>').attr('data-sort','size_asc').append((0,jquery_135.default)('<i>').addClass('fa fa-sort-numeric-asc')).append((0,jquery_135.default)('<span>').text(' Size (ascending)'))).append((0,jquery_135.default)('<li>').attr('data-sort','size_desc').append((0,jquery_135.default)('<i>').addClass('fa fa-sort-numeric-desc')).append((0,jquery_135.default)('<span>').text(' Size (descending)'))));_this_1.value='name_asc';_this_1.listElem=null;_this_1.setSpacing(5);_this_1.css({margin:'10px 0 0 5px',position:'relative'});_this_1.sortBtn.getElem().on('click',function(){_this_1.sortMenu.toggle()});var _this=_this_1;_this_1.sortMenu.find('li').on('click',function(){_this.sortMenu.find('li').removeClass('active');(0,jquery_135.default)(this).addClass('active');_this.sortMenu.hide();var sort=(0,jquery_135.default)(this).attr('data-sort');_this.setValue(sort)});_this_1._elem.append(_this_1.sortBtn.getElem(),_this_1.sortMenu);return _this_1}
SortChooser.prototype.destroy=function(){this.sortBtn.destroy();this.sortMenu.remove();_super.prototype.destroy.call(this)};SortChooser.prototype.setValue=function(value){var _a;this.value=value;if(!this.listElem)
return;if(this.listElem instanceof GridView_1.GridView){this.listElem.setSortCallback(this.getSortFunc())}else{if(!this.listElem.thumbs.length)
return;(_a=this.listElem)===null||_a===void 0?void 0:_a.thumbs.sort(this.getSortFunc());this.listElem.getElem().find('li:not(.firstThumb)').remove();for(var _i=0,_b=this.listElem.thumbs;_i<_b.length;_i++){var thumb=_b[_i];this.listElem.getElem().append(thumb.getElem())}}};SortChooser.prototype.getSortFunc=function(){switch(this.value){case 'name_desc':return function(a,b){if(!(a instanceof Thumb)||a.type==="button")
return-1;if(!(b instanceof Thumb)||b.type==="button")
return 1;if(a.name.toLowerCase()===b.name.toLowerCase())
return 0;return(a.name.toLowerCase()<b.name.toLowerCase())?1:-1};case 'size_asc':return function(a,b){if(!(a instanceof Thumb)||a.type==="button")
return-1;if(!(b instanceof Thumb)||b.type==="button")
return 1;if(a.data.size===b.data.size)
return 0;return(a.data.size>b.data.size)?1:-1};case 'size_desc':return function(a,b){if(!(a instanceof Thumb)||a.type==="button")
return-1;if(!(b instanceof Thumb)||b.type==="button")
return 1;if(a.data.size===b.data.size)
return 0;return(a.data.size<b.data.size)?1:-1}}
return function(a,b){if(!(a instanceof Thumb)||a.type==="button")
return-1;if(!(b instanceof Thumb)||b.type==="button")
return 1;if(a.name.toLowerCase()===b.name.toLowerCase())
return 0;return(a.name.toLowerCase()>b.name.toLowerCase())?1:-1}};SortChooser.prototype.setListElem=function(elem){this.listElem=elem;this.setValue(this.value)};return SortChooser}(FlexLayout_15.FlexLayout));function getFontIconProperty(data){if(data&&typeof data==='object'){if('faIcon' in data){return{family:'FontAwesome',prefix:'fa fa-',icon:data.faIcon,character:data.faCharacter,xOffset:data.faXOffset,width:data.faWidth,height:data.faHeight,baseLine:data.faBaseLine,fontSize:data.faFontSize,}}
if('icon' in data){return data}}
return null}
exports.getFontIconProperty=getFontIconProperty;var iconClass={'image':'fa fa-file-image-o','video':'fa fa-file-video-o','audio':'fa fa-file-audio-o','msword':'fa fa-file-word-o','excel':'fa fa-file-excel-o','powerpoint':'fa fa-file-powerpoint-o','pdf':'fa fa-file-pdf-o','archive':'fa fa-file-archive-o','text':'fa fa-file-text-o','script':'fa fa-file-code-o','font_woff2':'fa fa-font','font_woff':'fa fa-font','font_otf':'fa fa-font','font_ttf':'fa fa-font','font_eot':'fa fa-font','font_svg':'fa fa-font',};var fileTypes={'image':{extensions:'jpg,jpeg,gif,png,svg,webp,ico'},'video':{extensions:'ogg,mp4,mpeg,avi,flv,mkv,mov,webm'},'audio':{extensions:'mp3,aac,wav,ra,midi,ram,wma,ogg,ape'},'flash':{extensions:'swf'},'msword':{extensions:'doc,docx'},'excel':{extensions:'xls,xlsx,csv'},'powerpoint':{extensions:'ppt,pptx'},'pdf':{extensions:'pdf'},'archive':{extensions:'zip,rar,tar,gz'},'text':{extensions:'txt'},'script':{extensions:'xml'},'font_woff2':{extensions:'woff2'},'font_woff':{extensions:'woff'},'font_otf':{extensions:'otf'},'font_ttf':{extensions:'ttf'},'font_eot':{extensions:'eot'},'font_svg':{extensions:'svg'},};var modes={'all':{title:__('All'),extensions:"jpg,jpeg,gif,png,svg,webp,ico,psd,swf,mp3,aac,wav,ra,midi,ram,wma,ogg,ape,mp4,mpeg,avi,flv,mkv,mov,webm,pdf,docx,doc,xls,xlsx,rtf,ppt,pptx,odt,txt,csv,xml,js,yml,rar,zip,tar,gz,eps,cdr"},'image':{title:__('Images'),extensions:"jpg,jpeg,gif,png,svg,webp",fileTypes:['image']},'video':{title:__('Videos'),extensions:"ogg,mp4,mpeg,avi,flv,mkv,mov,webm",fileTypes:['video']},'image+video':{title:__('Images')+' / '+__('Videos'),extensions:"jpg,jpeg,gif,png,svg,webp,ogg,mp4,mpeg,avi,flv,mkv,mov,webm",fileTypes:['image','video']},'favicon':{title:__('Favicon'),extensions:"jpg,jpeg,gif,png,ico,svg",fileTypes:['image']},'flash':{title:__('Flash'),extensions:"swf",fileTypes:['flash']},'audio':{title:__('Audio'),extensions:"mp3,aac,wav,ra,midi,ram,wma,ogg,ape",fileTypes:['audio']},'font_woff2':{title:__('Font WOFF2'),extensions:"woff2",fileTypes:['font']},'font_woff':{title:__('Font WOFF'),extensions:"woff",fileTypes:['font']},'font_otf':{title:__('Font OTF'),extensions:"otf",fileTypes:['font']},'font_ttf':{title:__('Font TTF'),extensions:"ttf",fileTypes:['font']},'font_eot':{title:__('Font EOT'),extensions:"eot",fileTypes:['font']},'font_svg':{title:__('Font SVG'),extensions:"svg",fileTypes:['font']},};function getIconClass(fileOrType){var type=(fileOrType&&(fileOrType in fileTypes))?fileOrType:getFileType(fileOrType);return(type&&iconClass[type])?iconClass[type]:'fa fa-file-o'}
function getFileType(file){if(file){var ext=file.substring(file.lastIndexOf('.')+1),types=void 0;for(var type in fileTypes){types=fileTypes[type];if(types.extensions.split(',').indexOf(ext.toLowerCase())>-1){return type}}}
return null}
function getModes(){return modes}
var fontIcons=null;var fontIconsCharacterMap={};var fontIconsLoadCallbacks=[];var fontIconsLoadXHR=null;function getFontIcons(onSuccess){if(fontIcons instanceof Array){if(onSuccess)
onSuccess(fontIcons);return}
if(onSuccess)
fontIconsLoadCallbacks.push(onSuccess);if(fontIconsLoadXHR)
return;fontIconsLoadXHR=jquery_135.default.ajax({url:BuilderConfig_38.wbConfig.getLnUrl(wb_builder.getFontAwesomeIconsUri),success:function(data){fontIconsLoadXHR=null;if(typeof data==="object"&&("success" in data)&&data.success){fontIconsCharacterMap={};for(var i=data.icons.length-1;i>=0;i--){if(!fontIconsCharacterMap[data.icons[i].family]){fontIconsCharacterMap[data.icons[i].family]={}}
fontIconsCharacterMap[data.icons[i].family][data.icons[i].character]=data.icons[i]}
fontIcons=data.icons;var fn=void 0;while((fn=fontIconsLoadCallbacks.shift())){fn(fontIcons)}}else{setTimeout(getFontIcons,60000)}},error:function(data){fontIconsLoadXHR=null;setTimeout(getFontIcons,60000)},dataType:"json"})}
function updateFontIconInfo(icon,callback){var updateIcon=icon;var updateCallback=callback;if(icon&&typeof icon==="object"&&(!icon.width||!icon.height)){getFontIcons(function(icons){if(updateIcon.hasOwnProperty("family")&&fontIconsCharacterMap.hasOwnProperty(updateIcon.family)){if(updateIcon.hasOwnProperty("character")&&fontIconsCharacterMap[updateIcon.family].hasOwnProperty(updateIcon.character)){var icon_1=fontIconsCharacterMap[updateIcon.family][updateIcon.character];updateIcon.xOffset=icon_1.x;updateIcon.baseLine=icon_1.y;updateIcon.width=icon_1.w;updateIcon.height=icon_1.h;updateIcon.fontSize=icon_1.s}}
if(typeof updateCallback==="function"){updateCallback.call(window,updateIcon)}})}else if(typeof updateCallback==="function"){updateCallback.call(window,updateIcon)}}
var metaCache={};var metaRetrievalQueue={timer:0,requests:{}};function doErrorCallbacks(requests,data){for(var i in requests){if(!requests.hasOwnProperty(i))
continue;for(var _i=0,_a=requests[i];_i<_a.length;_i++){var pair=_a[_i];if(pair[1])
pair[1](data||'');}}}
function doCallbacks(requests,data){for(var i in requests){if(!requests.hasOwnProperty(i))
continue;var cbData=data?(data.hasOwnProperty(i)?data[i]:undefined):undefined;for(var _i=0,_a=requests[i];_i<_a.length;_i++){var pair=_a[_i];if(pair[0])
pair[0](cbData);}
metaCache[i]=cbData}}
function getPathMeta(path,successCallback,errorCallback,previewCompositionId,ignoreCache){if(ignoreCache===void 0){ignoreCache=!1}
var id;if(previewCompositionId){if(typeof successCallback==='function'){path=(''+path).replace(/^.+\/element_compositions\/[^\/]+\/[^\/]+\/(.+)$/,'$1');id=pathToId(path);var composition=Service_70.Service.ElementComposition.getLazyComposition(previewCompositionId);successCallback((composition&&(id in composition.fileMeta))?composition.fileMeta[id]:{})}
return}
id=pathToId(path);if(metaCache.hasOwnProperty(id)&&metaCache[id]&&!ignoreCache){if(typeof successCallback==='function'){successCallback(metaCache[id])}
return}
if(!metaRetrievalQueue.requests.hasOwnProperty(id)){metaRetrievalQueue.requests[id]=[]}
metaRetrievalQueue.requests[id].push([successCallback,errorCallback]);if(!metaRetrievalQueue.timer){metaRetrievalQueue.timer=setTimeout(function(){metaRetrievalQueue.timer=0;var requests=metaRetrievalQueue.requests;metaRetrievalQueue.requests={};jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl("upload_get_meta"),JSON.stringify({paths:Object.keys(requests)}),function(data){if(data&&(typeof data==='object')){if('error' in data){doErrorCallbacks(requests,data.error)}else{doCallbacks(requests,data.meta)}}else{doErrorCallbacks(requests)}},"json").fail(function(err){return doErrorCallbacks(err)})},0)}}
function setPathMeta(path,meta,successCallback,errorCallback){jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl("upload_set_meta"),JSON.stringify({path:pathToId(path),meta:meta}),function(data){if(data&&(typeof data==='object')){if('error' in data){if(errorCallback)
errorCallback(data.error);}else{metaCache[data.path]=data.meta;var e=new BuilderEvent_30.MediaLibraryMetaChangedBuilderEvent(data.path,data.meta);BuilderEvent_30.GlobalEvents.triggerEvent("media.meta.changed",e);if(successCallback)
successCallback();}}else{if(errorCallback)
errorCallback();}},"json").fail(function(err){if(errorCallback)
errorCallback(err);})}
var dialogs={};function reload(){for(var i in dialogs){if(!dialogs.hasOwnProperty(i))
continue;dialogs[i].loadGallery()}}
function pathToId(path){return path.replace(/^gallery\//,"")}
var freeGalleryActive=!1;function checkFreeGallery(){FreeGallery_1.Module.ifActive(function(){freeGalleryActive=!0})}
var ImagePreview=(function(_super){__extends(ImagePreview,_super);function ImagePreview(){var _this_1=_super.call(this)||this;_this_1.lastUrl='';_this_1.addClass('thumbnail');_this_1.css({marginTop:15,marginBottom:0,minHeight:190,maxHeight:190,overflow:'hidden',textAlign:'center'});_this_1.getElem().append(_this_1.img=(0,jquery_135.default)('<img>').hide()).append(_this_1.video=(0,jquery_135.default)('<video autoplay muted loop>').hide().css({maxHeight:180})).append(_this_1.youtube=(0,jquery_135.default)('<div>').css({position:'relative',height:180})).append(_this_1.prev=(0,jquery_135.default)('<div>').css({textAlign:'center',marginTop:76,color:'#999999'}).text(__('Preview')));return _this_1}
ImagePreview.prototype.setLibrary=function(library){this.library=library};ImagePreview.prototype.setYoutubeVideo=function(videoId){var iframe=this.youtube.children('iframe');if(videoId){if(!iframe.length){iframe=(0,jquery_135.default)('<iframe>').css({height:'100%'});this.youtube.append(iframe)}
iframe.attr('src','https://www.youtube.com/embed/'+videoId);this.youtube.show()}else{iframe.remove();this.youtube.hide()}};ImagePreview.prototype.setImage=function(url,type){if(this.lastUrl&&this.lastUrl===url)
return;var rawImg=this.img[0];var rawVideo=this.video[0];if(url&&url!=='http://'&&url!=='/'){this.library.urlInfo.url=url;if(type==='image'){rawVideo.removeAttribute('src');rawImg.src=this.library.urlInfo.url=url;this.prev.hide();this.video.hide();this.setYoutubeVideo(null);this.img.show();this.css({minHeight:'auto'})}else if(type==='video'){rawImg.src='';this.prev.hide();this.img.hide();var youtubeVideoId=(0,BackgroundControl_14.extractYoutubeId)(url);if(youtubeVideoId){this.video.hide();this.setYoutubeVideo(youtubeVideoId)}else{this.setYoutubeVideo(null);rawVideo.src=this.library.urlInfo.url=url;this.video.show()}
this.css({minHeight:190})}}else{rawImg.src='';rawVideo.removeAttribute('src');this.img.hide();this.video.hide();this.setYoutubeVideo(null);this.prev.show();this.css({minHeight:190})}
this.lastUrl=url;this.library.checkSelected()};return ImagePreview}(CustomContainer_18.CustomContainer));var MediaLibrary=exports.MediaLibrary=(function(_super){__extends(MediaLibrary,_super);function MediaLibrary(title,multi,mode,showTabs,showFontIconTab,showGalleryTab,showFullLibraryButton){if(showGalleryTab===void 0){showGalleryTab=!0}
if(showFullLibraryButton===void 0){showFullLibraryButton=!0}
var _this_1=this;var _a;_this_1=_super.call(this,title)||this;_this_1.tabActive=null;_this_1.categoryManager=new AddCategoryButton(_this_1);_this_1.selectedFiles=[];_this_1.isMultiselect=!1;_this_1.uploaderCounter=0;_this_1.galleryLoaded=!1;_this_1.galleryFilterQuery='';_this_1.alertBox=new AlertBox_4.default();_this_1.mode='all';_this_1.showTabs=!1;_this_1.customContent=null;_this_1.defOriginalValue=null;_this_1.showFontIconTab=!1;_this_1.showGalleryTab=!1;_this_1.showFullLibraryButton=!1;_this_1.filesExist=[];_this_1.freeGalleryInfo={galleryLoading:!1,galleryLoaded:!1,searchPhrase:''};_this_1.fontIconInfo={rendered:!1,searchPhrase:''};_this_1.urlInfo={url:''};_this_1.requiresRevalidation=!0;_this_1._freeGalleryLoaded=!1;_this_1.isScanUnusedError=!1;_this_1.lastRef=null;_this_1.touchTime={};_this_1.scrollToSelectionTimeout=0;var thisClass=_this_1;_this_1.isMultiselect=multi?!0:!1;_this_1.mode=(typeof(mode)==='undefined'||!(mode in modes))?'all':mode;_this_1.showTabs=showTabs?!0:!1;_this_1.showFontIconTab=showFontIconTab?!0:!1;_this_1.showGalleryTab=showGalleryTab?!0:!1;_this_1.showFullLibraryButton=showFullLibraryButton?!0:!1;_this_1.onShown=function(){return _this_1.scrollToSelection()};var filters=modes[_this_1.mode];var hasSidePanel=(_this_1.mode==='image'||_this_1.mode==='image+video');var filterGalleryTimeout=0;var isConfirm=!1;var toAll=null;_this_1.scanUnusedBlock=new VerticalLayout_36.VerticalLayout().addAllChildren([(new VerticalLayout_36.VerticalLayout().css({textAlign:'center'}).addAllChildren([(new Label_27.Label(__('This is a list of files that are not used throughout the website.'))),(new Label_27.Label(__('Scanning all files may take a long time.')))])),(new VerticalLayout_36.VerticalLayout().css({textAlign:'center',marginTop:'10px'}).addAllChildren([(_this_1.scanUnusedButton=new UIButton_28.UIButton(__('Scan'),UIButton_28.UIButton.STYLE_INFO))])),]);_this_1.scanUnusedBlock.getElem().attr('id','scanUnusedBlock');_this_1.scanUnusedPreloader=new Preloader_2.default(__('Scanning unused images')+'...',!1);_this_1.scanUnusedButton.on('click',function(){_this_1.scanUnusedPreloader.reset();_this_1.scanUnusedPreloader.setVisible(!0);_this_1.scanUnusedPreloader.setProgress(0);_this_1.scanUnusedPreloader.clearNotifications();_this_1.scanUnusedPreloader.setMessage('',__('Scanning')+'...');_this_1.scanUnusedPreloader.buttons.find('.btn-default').show();_this_1.updateUnusedCategory();_this_1.scanUnusedPreloader.setCancelCallback(function(){_this_1.cancelUnusedCategory()})});var confirmOwerwrite=function(data,callback){if(isConfirm){setTimeout(function(){confirmOwerwrite(data,callback)},100);return}
var file=data.files[0];var maxSize=wb_builder.maxUploadBackupFileSizeInt;if(file.size>maxSize){thisClass.showMessage(__('File size is larger than allowed')+' ('+__('max')+': '+wb_builder.maxUploadBackupFileSize+')',__("Upload error"),"error");return}
if(thisClass.filesExist.indexOf(file.name)!==-1){if(toAll===!0){thisClass.uploaderCounter++;callback(data);return}else if(toAll===!1){data.files=[];callback(data);return}
isConfirm=!0;thisClass.confirm(__("Confirm"),__("File")+' <strong>'+file.name+'</strong> '+__("already exists")+'. '+__("Are you sure you want to overwrite it?")).then(function(res){var to_all=(0,jquery_135.default)('#to_all');if(to_all.length&&to_all[0].checked){if(!(res===null||res===void 0?void 0:res.clickedButtonIndex)){toAll=!1}else{toAll=!0}}
if(!(res===null||res===void 0?void 0:res.clickedButtonIndex)){data.files=[]}else{thisClass.uploaderCounter++}
callback(data);isConfirm=!1});if(!thisClass.baseElem.find('#to_all').length){thisClass.baseElem.find('.wb-subdialog-body').append("<div style=\"margin-top: 10px;\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"to_all\">\n\t\t\t\t\t\t\t<label for=\"to_all\">"+__("Apply to all")+"</label>\n\t\t\t\t\t\t</div>")}}else{thisClass.uploaderCounter++;callback(data)}};_this_1.setContent(new Service_70.Service.UIBuilder({type:'TabbedPane',id:'tabbedPane',tabs:[{name:__('Template Gallery'),type:'gallery-main',ignore:!_this_1.showGalleryTab,children:[{type:FlexLayout_15.FlexLayout,leftSidebarPair:(hasSidePanel?260:undefined),css:{marginTop:((_this_1.mode==='all')?0:15)},children:[{type:FlexLayout_15.FlexLayout,ignore:!hasSidePanel,direction:'column',children:[{type:FlexLayout_15.FlexLayout,ignore:(_this_1.mode!=='image'&&_this_1.mode!=='image+video'),direction:"column",alignItems:"flex-start",justifyContent:"stretch",styleClass:"wb-tree-background-panel wb-tree-background-panel-sm",children:[{type:(TreeView_7.TreeView),id:'tagMenu',multiselect:!1,allowDraggingItems:!0,showCollapseButtons:!0,maxNameWidth:160,canAcceptItem:function(item,parentItem,refItem,after){if(after===void 0){after=!1}
return parentItem.isRoot()&&(refItem&&(after||refItem.getData().tag!=="")&&(refItem&&!refItem.getData().unused))},onDrop:function(item,parentItem,refItem,after){jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl('move_image_cat'),{cat:item.getData().tag,newIndex:item.getIndex()-1});_this_1.invalidate()},onDelete:function(item){_this_1.confirm(__("Confirm"),__("Remove this category?")).done(function(result){if(result&&result.clickedButtonIndex){_this_1.removeCategory(item.getData().tag,function(){var _a,_b;if(item.getSelected())(_a=_this_1.fields.tagMenu)===null||_a===void 0?void 0:_a.selectFirstItem();(_b=item.getParent())===null||_b===void 0?void 0:_b.removeChild(item)})}})},afterSelect:function(newSelection){_this_1.scanUnusedBlock.setVisible(!1);if(newSelection[0].getData().unused){_this_1.showUnused()}else{_this_1.selectImageCat(newSelection.length?newSelection[0].getData().tag:'',!1)}},itemCountChanged:function(){_this_1.updateDroppable()}},{type:CustomContainer_18.CustomContainer,id:'newTagBtnContainer'},]},{type:'CheckBox',id:'showAllTagsBtn',label:__('Show All Tags'),visible:!1,css:{margin:'10px 0 0 0'},change:function(){if(this.getValue()){wb_builder.setCookie('wb_show_all_tags','Y');thisClass.defOriginalValue=thisClass.customContent;thisClass.customContent=null;thisClass.loadGallery()}else{wb_builder.setCookie('wb_show_all_tags','N');if(!thisClass.customContent&&thisClass.defOriginalValue){thisClass.customContent=thisClass.defOriginalValue}
thisClass.loadGallery()}}}]},{type:'VerticalLayout',flex:(hasSidePanel?undefined:[1,1,'auto']),children:[{type:FlexLayout_15.FlexLayout,justifyContent:'space-between',alignItems:'center',wrap:'wrap',spacing:'field-default-sm',children:[{type:FlexLayout_15.FlexLayout,alignItems:'center',spacing:10,children:[{type:'Label',id:'galMsg',css:{lineHeight:'20px',overflow:'visible',whiteSpace:'nowrap'},text:((_this_1.mode==='image'||_this_1.mode==='favicon')?(_this_1.isMultiselect?__('Select pictures by clicking below or'):__('Select picture below or')):__('Select file below or'))},{type:'Button',buttonStyle:UIButton_28.UIButton.STYLE_INFO,css:{marginTop:'-5px'},attr:{id:_this_1.id+'_uploader'},text:((_this_1.mode==='image'||_this_1.mode==='favicon')?__('Upload New Picture'):__('Upload New File')),init:function(){var extensions=filters.extensions.split(',');var extRegExp=new RegExp('(\\.|\\/)('+extensions.join('|')+')$');thisClass.uploaderForm=(0,jquery_135.default)('<form>').append((0,jquery_135.default)('<input type="file" name="file" multiple="multiple" />').attr('accept','.'+extensions.join(',.')));thisClass.uploader=this.getElem().fileupload({fileInput:thisClass.uploaderForm.find('input'),url:BuilderConfig_38.wbConfig.getLnUrl("upload",{mode:thisClass.mode}),dataType:'json',sequentialUploads:!0,autoProcess:!1,autoUpload:!1,disableImagePreview:!0,disableImageResize:!1,imageMaxWidth:3840,imageMaxHeight:2160,imageOrientation:!0,loadImageMaxFileSize:50000000,maxFileSize:wb_builder.maxUploadFileSize,acceptFileTypes:extRegExp,singleFileUploads:!0})}}]},{type:FlexLayout_15.FlexLayout,alignItems:'center',spacing:10,ignore:(_this_1.mode!=='all'),children:[{type:'Label',text:(__('Show')+':')},{type:'DropdownBox',css:{maxWidth:160},value:_this_1.mode,options:[{name:__('All'),id:'all'},{name:__('Images'),id:'image'},{name:__('Audio'),id:'audio'},{name:__('Video'),id:'video'}],change:function(){thisClass.mode=this.getValue();thisClass.clearGallery();thisClass.loadGallery()}}]},{type:FlexLayout_15.FlexLayout,flex:[1,1,'auto'],children:[{type:'TextField',id:'searchInputGallery',flex:[1,1,'auto'],placeholder:__('Search'),css:{minWidth:'100px'},on:{keyup:function(){if(filterGalleryTimeout)
clearTimeout(filterGalleryTimeout);filterGalleryTimeout=setTimeout(function(){return _this_1.filterGallery()},500)}}},{type:UIButton_28.UIButton,icon:'fa fa-search',css:{marginLeft:'-1px'},click:function(){return _this_1.filterGallery()}}]},{type:ViewChooser,id:'viewChooser',children:[{type:SortChooser,id:'sortChooser',css:{display:'inline-block'}}]},]},{type:(GridView_1.GridView),id:"gallery2",css:{marginTop:'15px'},multiselect:_this_1.isMultiselect,onSelectionChange:function(){_this_1.checkSelected()},onPlaceholderClick:function(){_this_1.triggerUploader()},dragCheck:function(target){var isUnused=(0,jquery_135.default)(target).text()=='Unused'&&(0,jquery_135.default)(target).parent().find('.fa-folder-open-o').length;var itemContent=(0,jquery_135.default)(target).closest(".wb-tree-view-item-outline");return(!itemContent.length||itemContent.closest(".wb-tree-view-item").is(".active")||isUnused)?null:itemContent[0]},onDragDrop:function(target){var _a;console.log('onDragDrop');var jqItem=(0,jquery_135.default)(target).closest(".wb-tree-view-item");(_a=_this_1.fields.tagMenu)===null||_a===void 0?void 0:_a.root.traverse(function(treeItem){if(treeItem.elem[0]===jqItem[0]&&_this_1.fields.gallery2){var images=[];for(var _i=0,_a=_this_1.fields.gallery2.getFilteredItems();_i<_a.length;_i++){var item=_a[_i];if(item.data&&item.isSelected()){images.push(item.data.file.split('?ts=')[0])}}
if(treeItem.getData().unused){return!1}
var tag=treeItem.getData().tag;if(tag==="")
tag="__ALL__";_this_1.moveImages(images,tag);return!1}
return!0})}}]}]},{type:AdminFileInfo_1.AdminFileInfo,id:'adminFileInfo',ignore:!BuilderConfig_38.wbConfig.isSuperAdmin}]},{name:__('Free Gallery'),type:'gallery-free',ignore:!_this_1.showTabs||!freeGalleryActive,init:function(){thisClass.loadFreeContent(this)}},{name:(_this_1.mode==='image+video'?__('Picture / Video URL'):__('Picture URL')),type:'gallery-url',ignore:(!_this_1.showTabs||_this_1.isMultiselect),init:function(){thisClass.loadUrlContent(this)}},{name:__('Font Awesome Icon'),type:'gallery-icons',ignore:(!_this_1.showFontIconTab||_this_1.isMultiselect),init:function(){thisClass.loadFontIconContent(this)}}],change:function(fields){_this_1.hideProgress();var selTab=fields.tabbedPane.getSelectedTabDef();_this_1.tabActive=selTab?(selTab.type||null):null;if(_this_1.tabActive==='gallery-free'&&!_this_1.freeGalleryInfo.galleryLoaded){_this_1.loadFreeGallery()}
_this_1.checkSelected();_this_1.hideMessage()}}),!0);_this_1.dialog.addClass('wb-modal-settings-985');_this_1.alertBox.setVisible(!1);_this_1.content.append(_this_1.alertBox.getElem());if(_this_1.fields.galMsg){_this_1.galMsg=_this_1.fields.galMsg.getElem()}
if(_this_1.fields.newTagBtnContainer){_this_1.categoryManager.appendTo(_this_1.fields.newTagBtnContainer.getElem())}
if(_this_1.fields.gallery2){_this_1.fields.viewChooser.setListElem(_this_1.fields.gallery2);(_a=_this_1.fields.sortChooser)===null||_a===void 0?void 0:_a.setListElem(_this_1.fields.gallery2)}
if(_this_1.fields.urlTypeImage){_this_1.fields.urlTypeImage.setValue(!0);_this_1.updateUrlTabExample()}
if(_this_1.uploader){_this_1.uploader.on('click',function(){return _this_1.triggerUploader()});var isConfirm_1=!1;var toAll_1=null;_this_1.uploader.on('fileuploadchange fileuploaddrop',function(e,data){toAll_1=null});var confirmOwerwrite_1=function(data,callback){if(isConfirm_1){setTimeout(function(){confirmOwerwrite_1(data,callback)},100);return}
var file=data.files[0];var maxSize=wb_builder.maxUploadBackupFileSizeInt;if(file.size>maxSize){thisClass.showMessage(__('File size is larger than allowed')+' ('+__('max')+': '+wb_builder.maxUploadBackupFileSize+')',__("Upload error"),"error");return}
if(thisClass.filesExist.indexOf(file.name)!==-1){if(toAll_1===!0){thisClass.uploaderCounter++;callback(data);return}else if(toAll_1===!1){data.files=[];callback(data);return}
isConfirm_1=!0;thisClass.confirm(__("Confirm"),__("File")+' <strong>'+file.name+'</strong> '+__("already exists")+'. '+__("Are you sure you want to overwrite it?")).then(function(res){var to_all=(0,jquery_135.default)('#to_all');if(to_all.length&&to_all[0].checked){if(!(res===null||res===void 0?void 0:res.clickedButtonIndex)){toAll_1=!1}else{toAll_1=!0}}
if(!(res===null||res===void 0?void 0:res.clickedButtonIndex)){data.files=[]}else{thisClass.uploaderCounter++}
callback(data);isConfirm_1=!1});if(!thisClass.baseElem.find('#to_all').length){thisClass.baseElem.find('.wb-subdialog-body').append("<div style=\"margin-top: 10px;\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"to_all\">\n\t\t\t\t\t\t\t<label for=\"to_all\">"+__("Apply to all")+"</label>\n\t\t\t\t\t\t</div>")}}else{thisClass.uploaderCounter++;callback(data)}};_this_1.uploader.on('fileuploadadd',function(_,data){if(_this_1.uploaderCounter===0){_this_1.hideMessage();_this_1.showProgress(0,!0)}
if(!_this_1.filesExist.length){thisClass.updateFilesExist()}
confirmOwerwrite_1(data,function(data){if(!data.files.length){if(_this_1.uploaderCounter<=0)
_this_1.hideProgress(!1);}else{data.process(function(){var _a;(_a=_this_1.uploader)===null||_a===void 0?void 0:_a.fileupload("process",data)})}})});_this_1.uploader.on("fileuploadprocessdone",function(_,data){data.submit()});_this_1.uploader.on('fileuploadalways fileuploadprocessfail',function(_,data){if(--_this_1.uploaderCounter<=0){_this_1.hideProgress(!1)}});_this_1.uploader.on('fileuploadsubmit',function(_,data){var _a;var item=(_a=_this_1.fields.tagMenu)===null||_a===void 0?void 0:_a.getFirstSelectedItem();if(item){data.formData={tag:item.getData().tag}}
if(!data.files.length){thisClass.hideProgress();return!1}
return!0});_this_1.uploader.on('fileuploadprogressall',function(_,data){var addMsg=_this_1.uploaderCounter?(__('Files left:')+_this_1.uploaderCounter):undefined;_this_1.showProgress(Math.floor(100*(data.total?(data.loaded/data.total):1)),!0,addMsg)});_this_1.uploader.on('fileuploaddone',function(_,data){var _a,_b,_c,_d;if(!_this_1.fields.gallery2)
return;var file=data.files[0];if(thisClass.filesExist.indexOf(file.name)===-1){thisClass.filesExist.push(file.name)}else{_this_1.removeFilesThumbs([file.name])}
var r=data.result;if(typeof r==="object"){if("error" in r){if(r.error.verifySession){(0,KeepAliveManager_1.verifySession)(function(session,req){if(session&&req){_this_1.showMessage(__pr(r.error.message),__("Upload error"),"error")}})}else{_this_1.showMessage(__pr(r.error.message),__("Upload error"),"error")}
_this_1.fields.gallery2.scrollToTop()}else{var fileName=r.result?r.result:data.files[0].name;var thumbDir=(!r.hasOwnProperty("hasThumb")||r.hasThumb)?'thumbs/':'';var thumb=_this_1.buildThumb({url:wb_builder.userGalleryUrl+fileName,file:wb_builder.userGalleryUrl+thumbDir+fileName,name:fileName,width:r.wbWidth||0,height:r.wbHeight||0,size:r.wbSize||data.files[0].size,genThumb:(r.genThumb?!0:!1),external:!1,tag:(_b=(_a=_this_1.fields.tagMenu)===null||_a===void 0?void 0:_a.getFirstSelectedItem())===null||_b===void 0?void 0:_b.getData().tag,},_this_1.fields.gallery2);_this_1.fields.gallery2.addItems([thumb]);_this_1.fields.gallery2.scrollItemIntoView(thumb);thumb.setSelected(!0);_this_1.invalidate();if((_d=(_c=_this_1.fields.tagMenu)===null||_c===void 0?void 0:_c.getFirstSelectedItem())===null||_d===void 0?void 0:_d.getData().unused){_this_1.selectImageCat('',!0)}}}});_this_1.uploader.on('fileuploadprocess',function(_,data){window.prepareAutoScaleOptions(_,data)})}
_this_1.progress=(0,jquery_135.default)('<div class="wb_media_progress_wrap">'+'<div class="wb_media_progress progress">'+'<div class="progress-bar progress-bar-striped active" style="width: 1%;">'+'<span class="sr-only"></span>'+'</div>'+'</div>'+'<div class="status"></div>'+'<div class="status2"></div>'+'</div>');Service_70.Service.templates.addChangeListener(function(){_this_1.requiresRevalidation=!0});var selTab=_this_1.fields.tabbedPane.getSelectedTabDef();_this_1.tabActive=selTab?(selTab.type||null):null;return _this_1}
MediaLibrary.prototype.removeFilesThumbs=function(files){if(!this.fields.gallery2)
return;var names=[];for(var _i=0,files_1=files;_i<files_1.length;_i++){var file=files_1[_i];var parts=file.split('/');names.push(parts[parts.length-1].replace(/-ts\d+/g,''))}
this.fields.gallery2.removeItems(function(thumb){if(thumb.type==="button")
return!1;var tName=thumb.name.replace(/-ts\d+/g,'');return names.indexOf(tName)!==-1})};MediaLibrary.prototype.getTabActive=function(){return this.tabActive};MediaLibrary.prototype.getCheckRemoveData=function(list){var data=[];var elements=wb_builder.bodyInstance.getStringifyElements();for(var _i=0,list_3=list;_i<list_3.length;_i++){var name_10=list_3[_i];var name2=name_10.split('/');name_10=name2[name2.length-1];data.push({filename:name_10,pages:[]});if(wb_builder.bodyInstance.isFileInUseInElements(name_10,elements)){data[data.length-1].pages.push(wb_builder.pageId)}}
return data};MediaLibrary.prototype.confirmRemove=function(data,callback){var _a;var thisClass=this;var removeFiles=[];var toAll=null;var langCode=(_a=BuilderConfig_38.wbConfig.getLanguageByLocale(wb_builder.locale))===null||_a===void 0?void 0:_a.code;var filesNum=data.length;var confirmRemoveItem=function(data,callback){if(!data.length){callback(removeFiles);return}
var file=data[0];data=data.slice(1);if(toAll===!0){removeFiles.push(file.filename);confirmRemoveItem(data,callback);return}else if(toAll===!1){confirmRemoveItem(data,callback);return}
jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl("check_remove",{pageId:wb_builder.pageId}),JSON.stringify(file),function(results){file=results.results;if(!Object.keys(file.pages).length){removeFiles.push(file.filename);confirmRemoveItem(data,callback);return}
var confirmText=__("The file")+' '+'<strong>'+file.filename+'</strong>'+' '+__("is currently being used on pages")+': <br />';confirmText+='<ul style="margin: 10px 0;">';var ind=-1;for(var _i=0,_a=Object.keys(file.pages);_i<_a.length;_i++){var i=_a[_i];ind++;if(ind>1&&Object.keys(file.pages).length>ind){confirmText+='<li>+'+(Object.keys(file.pages).length-2)+' more pages</li>';break}
var pageId=file.pages[parseInt(i)];if(!wb_builder.site.pages[pageId].enabled){continue}
var page_name=wb_builder.site.pages[pageId].name;confirmText+='<li>'+__tr(page_name,langCode,page_name)+'</li>'}
confirmText+='</ul>';confirmText+=__('Are you sure you want to proceed?');thisClass.confirm(__("Confirm"),confirmText).then(function(res){var to_all=(0,jquery_135.default)('#to_all');if(to_all.length&&to_all[0].checked){if(!(res===null||res===void 0?void 0:res.clickedButtonIndex)){toAll=!1}else{toAll=!0}}
if(res===null||res===void 0?void 0:res.clickedButtonIndex){removeFiles.push(file.filename)}
confirmRemoveItem(data,callback)});if(filesNum>1){setTimeout(function(){if(!thisClass.baseElem.find('#to_all').length){thisClass.baseElem.find('.wb-subdialog-body').append("<div style=\"margin-top: 10px;\">\n\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"to_all\">\n\t\t\t\t\t\t\t\t\t<label for=\"to_all\">"+__("Apply to all")+"</label>\n\t\t\t\t\t\t\t\t</div>")}},50)}})};confirmRemoveItem(data,callback)};MediaLibrary.prototype.setSearchInputGalleryMaxWidth=function(width){this.fields.searchInputGallery.getElem().css({width:width})};MediaLibrary.prototype.updateFilesExist=function(){if(this.fields.gallery2){this.filesExist=[];for(var _i=0,_a=this.fields.gallery2.getItems();_i<_a.length;_i++){var thumb=_a[_i];if(thumb.type==="button")
continue;this.filesExist.push(thumb.name.replace(/-ts\d+/g,''))}}};MediaLibrary.prototype.triggerUploader=function(){this.uploaderForm.find('input').trigger('click')};MediaLibrary.prototype.setUrlType=function(type){if(type==='video'){if(this.fields.urlTypeVideo)
this.fields.urlTypeVideo.setValue(!0);}else{if(this.fields.urlTypeImage)
this.fields.urlTypeImage.setValue(!0);}
this.updateUrlTabExample()};MediaLibrary.prototype.setCustomContent=function(customContent){this.customContent=customContent;if(this.fields.showAllTagsBtn){this.fields.showAllTagsBtn.setVisible((this.customContent?!0:!1));if(wb_builder.getCookie('wb_show_all_tags')==='Y'){this.defOriginalValue=this.customContent;this.customContent=null;this.fields.showAllTagsBtn.setValue(!0)}}};MediaLibrary.prototype.updateUrlTabExample=function(){if(!this.fields.urlExample)
return;this.fields.urlExample.getElem().text(__('Example')+': '+(!this.fields.urlTypeImage||this.fields.urlTypeImage.getValue()?'http://www.google.com/images/srpr/logo3w.png':'https://www.youtube.com/watch?v=UF8uR6Z6KLc'))};MediaLibrary.prototype.loadUrlContent=function(content){var _this_1=this;var searchFunc=function(){if(_this_1.fields.urlTypeImage&&!_this_1.fields.urlTypeImage.getValue()){return}
var url=_this_1.fields.urlInput.getValue().trim();if(!url||!url.length||url==="http://"||url==="https://"){return}
if(!/^https?:\/\//i.test(url)){alert(__("Please enter a valid web URL starting with http or https"));return}
var loadedThumb=null;_this_1.buttons.find('.btn-success').hide();_this_1.buttons.find('.btn-danger').hide();_this_1.downloadExternalResources([url],function(thumb){loadedThumb=thumb},function(){_this_1.buttons.find('.btn-success').show();_this_1.buttons.find('.btn-danger').show();if(loadedThumb&&_this_1.fields.gallery2){_this_1.clearSelection();_this_1.fields.tabbedPane.selectTabByType('gallery-main');loadedThumb.setSelected(!0);_this_1.fields.gallery2.addItems([loadedThumb]);_this_1.fields.gallery2.scrollItemIntoView(loadedThumb)}else{alert(__("There was an error while trying to download image from specified URL. Please check if you have entered it correctly."))}})};var allowVideo=(this.mode==='image+video');var changeUrlType=function(fields){_this_1.updateUrlTabExample();fields.imgPreview.setImage('');fields.importButton.setVisible(!fields.urlTypeImage||fields.urlTypeImage.getValue())};Service_70.Service.UIBuilder.buildLayout({type:'VerticalLayout',css:{marginTop:'15px'},children:[{type:'Label',text:__('Picture URL'),ignore:allowVideo},{type:'FlowLayout',ignore:!allowVideo,css:{marginBottom:5},children:[{type:'RadioBox',label:__('Image'),id:'urlTypeImage',group:'urlType',change:changeUrlType},{type:'RadioBox',label:__('Video'),id:'urlTypeVideo',group:'urlType',change:changeUrlType}]},{type:FlexLayout_15.FlexLayout,justifyContent:'stretch',spacing:10,children:[{type:'TextField',id:'urlInput',value:'http://',flex:[1,1,'auto'],init:function(){this.on('keyup',function(e){if(e.keyCode===13)
searchFunc();})},change:function(){_this_1.fields.imgPreview.setImage(_this_1.fields.urlInput.getValue(),((_this_1.fields.urlTypeVideo&&_this_1.fields.urlTypeVideo.getValue())?'video':'image'))}},{type:'Button',id:'importButton',text:__('Import into gallery'),buttonStyle:UIButton_28.UIButton.STYLE_INFO,click:searchFunc}]},{type:'CustomContainer',tag:'span',id:'urlExample',styleClass:'help-block help-block-sm'},{type:ImagePreview,id:'imgPreview'}]},content,this.fields);this.fields.imgPreview.setLibrary(this)};MediaLibrary.prototype.loadUrlImage=function(){if(!this.fields.imgPreview||!this.fields.urlInput)
return;this.fields.imgPreview.setImage(this.fields.urlInput.getValue(),(this.fields.urlTypeVideo&&this.fields.urlTypeVideo.getValue()?'video':'image'))};MediaLibrary.prototype.loadFreeContent=function(content){var _this_1=this;var _a;var searchFunc=function(){_this_1.freeGalleryInfo.searchPhrase=_this_1.fields.searchInput.getValue();_this_1.loadFreeGallery()};if(this.fields.viewChooserFree)
this.fields.viewChooserFree.destroy();if(this.fields.freeGallery)
this.fields.freeGallery.destroy();Service_70.Service.UIBuilder.buildLayout({type:'VerticalLayout',css:{marginTop:'15px'},children:[{type:FlexLayout_15.FlexLayout,justifyContent:'stretch',spacing:10,children:[{type:FlexLayout_15.FlexLayout,flex:[1,1,'auto'],children:[{type:'TextField',id:'searchInput',flex:[1,1,'auto'],placeholder:__('Search'),css:{minWidth:'100px'},on:{keyup:function(e){if(e.keyCode===13)
searchFunc();}}},{type:UIButton_28.UIButton,icon:'fa fa-search',css:{marginLeft:'-1px'},click:searchFunc}]},{type:ViewChooser,id:'viewChooserFree'}]},{type:ThumbList,id:'freeGallery',listType:'free',css:{marginTop:'15px'}}]},content,this.fields);if(this.fields.freeGallery){(_a=this.fields.viewChooserFree)===null||_a===void 0?void 0:_a.setListElem(this.fields.freeGallery);this.fields.freeGallery.setLibrary(this)}};MediaLibrary.prototype.loadFreeGallery=function(noReset){var _this_1=this;if(noReset===void 0){noReset=!1}
if(this.freeGalleryInfo.galleryLoading||!this.fields.freeGallery)
return!1;var gallery=this.fields.freeGallery;this.freeGalleryInfo.galleryLoading=!0;if(!this._freeGalleryLoaded){this._freeGalleryLoaded=!0;var thumbs_2=[];FreeGallery_1.Module.init({perPage:25,beforeForEach:function(){thumbs_2=[]},forEach:function(i,item){var _a;thumbs_2.push(_this_1.buildThumb({file:item.thumb,title:item.title,url:item.url,name:item.name,width:item.width||0,height:item.height||0,size:item.size||0,external:!0},gallery));_this_1.showProgress((i+1)/(((_a=FreeGallery_1.Module.current)===null||_a===void 0?void 0:_a.totalImages)||1)*100,!0)},emptyList:function(){_this_1.showMessage(__("No images found."),'<i class="glyphicon glyphicon-warning-sign"></i>',"error");_this_1.freeGalleryInfo.galleryLoading=!1;_this_1.freeGalleryInfo.galleryLoaded=!0;_this_1.hideProgress()},afterForEach:function(){gallery.addAllThumbs(thumbs_2);thumbs_2=[];_this_1.freeGalleryInfo.galleryLoading=!1;_this_1.freeGalleryInfo.galleryLoaded=!0;_this_1.hideProgress()}})}
if(!noReset){FreeGallery_1.Module.resetPages();gallery.clearThumbs()}
this.showProgress(0,!0);FreeGallery_1.Module.load(this.freeGalleryInfo.searchPhrase);return!0};MediaLibrary.prototype.loadFontIconContent=function(content){var _this_1=this;var _a;var searchFunc=function(){_this_1.fontIconInfo.searchPhrase=_this_1.fields.fontIconSearchInput.getValue();_this_1.renderFontIconGallery()};if(this.fields.viewChooserIcons)
this.fields.viewChooserIcons.destroy();if(this.fields.fontIconGallery)
this.fields.fontIconGallery.destroy();Service_70.Service.UIBuilder.buildLayout({type:'VerticalLayout',css:{marginTop:'15px'},children:[{type:FlexLayout_15.FlexLayout,justifyContent:'stretch',spacing:10,children:[{type:FlexLayout_15.FlexLayout,flex:[1,1,'auto'],children:[{type:'TextField',id:'fontIconSearchInput',flex:[1,1,'auto'],placeholder:__('Search'),css:{minWidth:'100px'},on:{keyup:function(){return searchFunc()}}},{type:UIButton_28.UIButton,icon:'fa fa-search',css:{marginLeft:'-1px'},click:searchFunc}]},{type:ViewChooser,id:'viewChooserIcons'}]},{type:ThumbList,id:'fontIconGallery',listType:'icons',css:{marginTop:'15px'}}]},content,this.fields);this.fontIconInfo.rendered=!1;this.fontIconInfo.searchPhrase="";if(this.fields.fontIconGallery){(_a=this.fields.viewChooserIcons)===null||_a===void 0?void 0:_a.setListElem(this.fields.fontIconGallery);this.fields.fontIconGallery.setLibrary(this)}
getFontIcons(function(){return _this_1.renderFontIconGallery()})};MediaLibrary.prototype.renderFontIconGallery=function(){var _this_1=this;if(!fontIcons||!fontIcons.length||!this.fields.fontIconGallery)
return;var gallery=this.fields.fontIconGallery;if(!this.fontIconInfo.rendered){this.fontIconInfo.rendered=!0;var _loop_34=function(icon){var names=icon.names.map(function(name){return name.toLowerCase()});var thumb=new Thumb('icon',names[0],icon.prefix+icon.names[0],function(e){if(_this_1.isMultiselect){thumb.setSelected(!thumb.isSelected())}else{_this_1.clearSelection();thumb.setSelected(!0)}
_this_1.checkSelected(thumb);e.stopPropagation();if(!_this_1.touchTime[e.type]||_this_1.touchTime[e.type].target!==e.currentTarget){_this_1.touchTime[e.type]={target:e.currentTarget,time:0}}
if(_this_1.touchTime[e.type].time===0){_this_1.touchTime[e.type].time=new Date().getTime()}else{if(((new Date().getTime())-_this_1.touchTime[e.type].time)<800){_this_1.buttons.find(".btn-success").click();_this_1.touchTime[e.type].time=0}else{_this_1.touchTime[e.type].time=new Date().getTime()}}});thumb.setData(icon);thumb.setTitle(names.join("\n"));gallery.addThumb(thumb)};for(var _i=0,fontIcons_1=fontIcons;_i<fontIcons_1.length;_i++){var icon=fontIcons_1[_i];_loop_34(icon)}}
var query=this.fontIconInfo.searchPhrase.toLowerCase();if(query===""){gallery.clearFilter()}else{gallery.filter(function(thumb){var icon=thumb.data;if(!icon)
return!1;if(thumb.isSelected()||icon.character.indexOf(query)>=0){return!0}else{for(var _i=0,_a=icon.names;_i<_a.length;_i++){var name_11=_a[_i];if(name_11.toLowerCase().indexOf(query)>=0)
return!0}
return!1}})}};MediaLibrary.prototype.clearGallery=function(){var _a,_b;this.galleryFilterQuery='';(_a=this.fields.searchInputGallery)===null||_a===void 0?void 0:_a.setValue('');(_b=this.fields.gallery2)===null||_b===void 0?void 0:_b.clearItems();this.galleryLoaded=!1;this.invalidate()};MediaLibrary.prototype.loadGallery=function(){var _this_1=this;this.hideMessage();this.showProgress(0).children(".progress-bar").animate({width:"100%"},10000);this.clearGallery();var thisData=[];jquery_135.default.get(BuilderConfig_38.wbConfig.getLnUrl("upload_list"),{mode:this.mode},function(data){var _a,_b,_c,_d;var reselectTag=null;if(data&&(typeof data==='object')&&('error' in data)){thisData=[];if((_a=data.error)===null||_a===void 0?void 0:_a.verifySession){(0,KeepAliveManager_1.verifySession)(function(session,req){var _a;if(session&&req){_this_1.showMessage(((_a=data.error)===null||_a===void 0?void 0:_a.message)||'Server error','<i class="icon-warning-sign"></i>','error')}})}else{_this_1.showMessage(((_b=data.error)===null||_b===void 0?void 0:_b.message)||'Server error','<i class="icon-warning-sign"></i>','error')}}else if(data&&typeof data==="object"&&DataUtil.isSet(data.list)){thisData=data.list;if(_this_1.fields.tagMenu){_this_1.fields.tagMenu.root.removeAllChildren();_this_1.addImageCat('');_this_1.addImageCat('Unused',!1,!0);if(_this_1.customContent&&(typeof _this_1.customContent==='object')){for(var i in _this_1.customContent){_this_1.addImageCat(i,!0);if(!reselectTag){reselectTag=(_c=_this_1.fields.tagMenu.getFirstSelectedItem())===null||_c===void 0?void 0:_c.getData()}}
thisData=_this_1.filterDataByCustomContent(thisData,_this_1.customContent)}else if(data.tags){reselectTag=((_d=_this_1.fields.tagMenu.getFirstSelectedItem())===null||_d===void 0?void 0:_d.getData())||null;for(var _i=0,_e=data.tags;_i<_e.length;_i++){var tag=_e[_i];if(!tag)
continue;_this_1.addImageCat(tag)}}
_this_1.updateDroppable()}}else{thisData=[];_this_1.showMessage('Server error','<i class="icon-warning-sign"></i>','error')}
_this_1.hideProgress(!1,function(){if(_this_1.fields.gallery2){if(thisData&&(typeof thisData==='object')&&thisData.hasOwnProperty('length')){var thumbs=[new Thumb('button',__('Add New'),'glyphicon glyphicon-plus',function(){_this_1.triggerUploader()})];for(var i=0;i<thisData.length;i++){thumbs.push(_this_1.buildThumb(__assign(__assign({},thisData[i]),{url:wb_builder.userGalleryUrl+thisData[i].name,external:!1}),_this_1.fields.gallery2))}
_this_1.fields.gallery2.clearItems();_this_1.fields.gallery2.addItems(thumbs);_this_1.setSelectedFiles(_this_1.selectedFiles);_this_1.checkSelected();_this_1.fields.viewChooser.reload()}else{_this_1.showMessage(__("No files found."),'<i class="icon-info-sign"></i>',"info")}
if(reselectTag&&reselectTag.unused){_this_1.showUnused()}else{_this_1.selectImageCat(reselectTag?reselectTag.tag:'')}
_this_1.requiresRevalidation=!1}})}).fail(function(){_this_1.hideProgress(!1,function(){if(_this_1.fields.gallery2){_this_1.showMessage(__("File loading failed."),'<i class="icon-warning-sign"></i>',"error")}})});this.galleryLoaded=!0};MediaLibrary.prototype.updateDroppable=function(){};MediaLibrary.prototype.moveImages=function(images,tag){var _this_1=this;var _a;(_a=this.fields.gallery2)===null||_a===void 0?void 0:_a.getItems().map(function(thumb){if(images.indexOf(thumb.value)!==-1){thumb.tag=tag;if(thumb.data){thumb.data.tag=tag}}});jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl('move_images'),JSON.stringify({tag:tag,images:images}),function(){var _a;(_a=_this_1.fields.gallery2)===null||_a===void 0?void 0:_a.update()})};MediaLibrary.prototype.filterDataByCustomContent=function(data,customContent){var customImagesMap={};for(var tag in customContent){for(var _i=0,_a=customContent[tag];_i<_a.length;_i++){var file=_a[_i];var basename=file.split('/').pop();if(basename)
customImagesMap[basename]=tag}}
for(var _b=0,data_6=data;_b<data_6.length;_b++){var dt=data_6[_b];var basename=dt.file.split('/').pop();if(basename&&(basename in customImagesMap)){dt.tag=customImagesMap[basename]}}
return data};MediaLibrary.prototype.checkSelected=function(thumb){if(thumb===void 0){thumb=null}
var selected=this.getSelectedFiles(!0);if(this.fields.adminFileInfo){var sel=selected[0];if(selected.length==1&&sel.file){this.fields.adminFileInfo.setValue(sel)}else{this.fields.adminFileInfo.setValue(null)}}
if(this.tabActive!=='gallery-main'){this.buttons.find('.btn-danger').hide()}
if(!selected.length){this.buttons.find(".btn-success").hide();this.buttons.find('.btn-danger').hide()}else{if((selected.length===1&&!this.isMultiselect)||this.isMultiselect){this.buttons.find(".btn-success").show()}else{this.buttons.find(".btn-success").hide()}
if(this.tabActive=='gallery-main'){this.buttons.find('.btn-danger').show()}}
if(this.tabActive=='gallery-main'&&this.fields.gallery2){var num=0;for(var _i=0,_a=this.fields.gallery2.getItems();_i<_a.length;_i++){var thumb_2=_a[_i];if(!thumb_2.isHidden()&&thumb_2.type!=='button')
num++}
this.fields.gallery2.setPlaceholderVisible(num==0)}
this.scrollToSelection(thumb)};MediaLibrary.prototype.clearSelection=function(){var _a,_b,_c;(_a=this.fields.gallery2)===null||_a===void 0?void 0:_a.clearSelection();(_b=this.fields.freeGallery)===null||_b===void 0?void 0:_b.clearSelection();(_c=this.fields.fontIconGallery)===null||_c===void 0?void 0:_c.clearSelection()};MediaLibrary.prototype.buildThumb=function(imgData,gallery){var _this_1=this;var tag=DataUtil.isSet(imgData.tag)?imgData.tag:null;var name=imgData.name;var url=imgData.file;if(!name){var urlParts=url.split("/");name=urlParts[urlParts.length-1]}
var title=imgData.title||name.replace(/-ts\d+/gi,"");var moreTitle=[];if(imgData.width>0&&imgData.height>0){moreTitle.push(imgData.width+"x"+imgData.height)}
if(imgData.size>0){if(imgData.size>=1024*1024*1024){moreTitle.push((imgData.size/(1024*1024*1024)).toFixed(2)+' GB')}else if(imgData.size>=1024*1024){moreTitle.push((imgData.size/(1024*1024)).toFixed(2)+' MB')}else if(imgData.size>=1024){moreTitle.push((imgData.size/1024).toFixed(2)+' KB')}else{moreTitle.push(imgData.size+'B')}}
if(moreTitle.length>0){title+=' ('+moreTitle.join(', ')+')'}
var iconClass=getIconClass(name);var fileType=getFileType(url);var type='image',value='',canRemove=!imgData.external;if(fileType==='image'){type='image';value=wb_builder.makeLocalUrl(url)}else if(iconClass){type='media';value=iconClass}
var thumb=new Thumb(type,name,value,function(e){if(e.ctrlKey){thumb.toggleSelected();_this_1.checkSelected(thumb)}else{if(_this_1.isMultiselect){thumb.setSelected(!thumb.isSelected())}else{_this_1.clearSelection();thumb.setSelected(!0)}
_this_1.checkSelected(thumb);e.stopPropagation();if(!_this_1.touchTime[e.type]||_this_1.touchTime[e.type].target!==e.currentTarget){_this_1.touchTime[e.type]={target:e.currentTarget,time:0}}
if(_this_1.touchTime[e.type].time===0){_this_1.touchTime[e.type].time=new Date().getTime()}else{if(((new Date().getTime())-_this_1.touchTime[e.type].time)<800){if(!_this_1.isMultiselect){_this_1.clearSelection()}
thumb.setSelected(!0);_this_1.buttons.find(".btn-success").click();_this_1.touchTime[e.type].time=0}else{_this_1.touchTime[e.type].time=new Date().getTime()}}}},(canRemove?function(e){if(confirm(__("Remove this file?"))){var data=_this_1.getCheckRemoveData([name]);_this_1.confirmRemove(data,function(removeFiles){if(!removeFiles.length){return}
jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl("upload_remove"),JSON.stringify({filenames:removeFiles}));if(gallery instanceof GridView_1.GridView)
gallery.removeItems([thumb]);else gallery.removeThumb(thumb);_this_1.updateFilesExist();_this_1.invalidate()})}
e.stopPropagation();return!1}:undefined));thumb.setData(imgData);thumb.setTitle(title);if(tag)
thumb.setTag(tag);if(imgData.genThumb&&thumb.wrapperElem){imgData.genThumb=!1;(0,VideoThumbGenerator_2.generateThumb)(imgData.name,thumb.wrapperElem).done(function(thumbUrl){if(thumbUrl)
thumb.setValue(wb_builder.makeLocalUrl(thumbUrl));})}
return thumb};MediaLibrary.prototype.addButton=function(name,callback,primary,cssClass){var _this_1=this;if(primary===void 0){primary=!1}
if(primary){var thisCallback_1=callback;callback=function(){if(_this_1.tabActive==='gallery-free'){var items=_this_1.getSelectedFiles(),len=items.length;if(len>0){_this_1.buttons.find('.btn-success').hide();_this_1.buttons.find('.btn-danger').hide()}
var items_download=[],items_keep_1=[];for(var i=0;i<len;i++){if(!/^gallery/i.test(items[i])){items_download.push(items[i])}else{items_keep_1.push(items[i])}}
var thumbs_3=[];_this_1.tabActive=null;_this_1.downloadExternalResources(items_download,function(thumb){if(thumb)
thumbs_3.push(thumb);else console.error('Failed downloading external resource')},function(){var _a,_b;if(!_this_1.fields.gallery2)
return;(_b=(_a=_this_1.fields)===null||_a===void 0?void 0:_a.freeGallery)===null||_b===void 0?void 0:_b.clearSelection();_this_1.fields.gallery2.clearSelection();_this_1.buttons.find('.btn-success').show();_this_1.buttons.find('.btn-danger').show();_this_1.fields.tabbedPane.selectTabByType('gallery-main');var gridItems=_this_1.fields.gallery2.getItems();for(var _i=0,items_keep_2=items_keep_1;_i<items_keep_2.length;_i++){var keepItem=items_keep_2[_i];var parts=keepItem.split('/');var pattern=new RegExp(parts[parts.length-1]);for(var _c=0,gridItems_1=gridItems;_c<gridItems_1.length;_c++){var thumb=gridItems_1[_c];if(pattern.test(thumb.value)){thumb.setSelected(!0);break}}}
for(var _d=0,thumbs_4=thumbs_3;_d<thumbs_4.length;_d++){var thumb=thumbs_4[_d];thumb.setSelected(!0)}
_this_1.fields.gallery2.addItems(thumbs_3);if(typeof(thisCallback_1)==='function')
thisCallback_1();})}else{if(typeof(thisCallback_1)==='function')
thisCallback_1();}}}
return _super.prototype.addButton.call(this,name,callback,primary,cssClass)};MediaLibrary.prototype.downloadExternalResources=function(urls,onProgress,onComplete){var _this_1=this;if(!urls||!urls.length){if(typeof onComplete==="function")
onComplete();return}
var downloadItems=urls,progressCallback=onProgress,completeCallback=onComplete;var downloadImage=function(it){if(it===void 0){it=1}
_this_1.showProgress(Math.round((it/downloadItems.length)*100),!0,__('Downloading resources into gallery'));var url=downloadItems[it-1];jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl('upload_download'),{url:url},function(resp){if(!_this_1.fields.gallery2)
return;if(resp.ok&&resp.src&&resp.thumb){var thumb=null;if(resp.existing){var parts=resp.thumb.split('/');var pattern=new RegExp(parts[parts.length-1]);for(var _i=0,_a=_this_1.fields.gallery2.getItems();_i<_a.length;_i++){var item=_a[_i];if(pattern.test(item.value)){thumb=item;break}}}else{thumb=_this_1.buildThumb({url:wb_builder.userGalleryUrl+resp.name,file:resp.thumb,name:resp.name,width:resp.width||0,height:resp.height||0,size:resp.size||0,external:!1},_this_1.fields.gallery2)}
progressCallback(thumb)}else{progressCallback(null)}
if(it===downloadItems.length){_this_1.hideProgress(!0);if(typeof(completeCallback)==='function'){completeCallback()}}else{downloadImage(it+1)}})};downloadImage()};MediaLibrary.prototype.createCategory=function(cat){var _this_1=this;jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl('add_image_cat'),{cat:cat},function(data){if(data.status==='ok'){_this_1.addImageCat(data.cat);_this_1.categoryManager.setInputMode(!1);_this_1.hideMessage()}else{_this_1.showMessage(data.msg,'<i class="fa fa-exclamation-triangle"></i>','error')}})};MediaLibrary.prototype.removeCategory=function(cat,doneFunc){var _this_1=this;return jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl('del_image_cat'),{cat:cat},function(data){if(data.status==='ok'){if(typeof doneFunc==='function')
doneFunc.call(_this_1);_this_1.invalidate();_this_1.hideMessage()}else{_this_1.showMessage(data.msg,'<i class="fa fa-exclamation-triangle"></i>','error')}})};MediaLibrary.prototype.addImageCat=function(tag,virtual,unused){var _this_1=this;if(virtual===void 0){virtual=!1}
if(unused===void 0){unused=!1}
if(!this.fields.tagMenu)
return;var item=this.fields.tagMenu.createItem().setName(tag||__('All')).setIcon(unused?'fa fa-folder-open-o':'fa fa-folder-open').setCollapsible(!!tag&&!unused).setDeletable(!!tag&&!virtual&&!unused).setDraggable(!!tag&&!virtual&&!unused).setData(new MediaLibraryTag({tag:tag,virtual:virtual,unused:unused}));if(this.lastRef===null){this.fields.tagMenu.root.traverse(function(item){if(!unused&&!item.getData().unused){_this_1.lastRef=item}else if(unused){_this_1.lastRef=item}})}
this.fields.tagMenu.root.addChild(item,this.lastRef,!0);this.invalidate();if(!unused){this.lastRef=item}};MediaLibrary.prototype.filterGallery=function(tag){var _a,_b,_c,_d;this.galleryFilterQuery=this.fields.searchInputGallery.getValue();var unused=!1;if(typeof tag==='undefined'){tag=((_b=(_a=this.fields.tagMenu)===null||_a===void 0?void 0:_a.getFirstSelectedItem())===null||_b===void 0?void 0:_b.getData().tag)||'';unused=(_d=(_c=this.fields.tagMenu)===null||_c===void 0?void 0:_c.getFirstSelectedItem())===null||_d===void 0?void 0:_d.getData().unused}
var query=this.galleryFilterQuery.trim().toLowerCase();if(this.fields.gallery2){this.fields.gallery2.setFilterCallback(function(thumb){if(unused)
return thumb.type!=="button"&&thumb.isUnused()&&(query===''||thumb.name.toLowerCase().indexOf(query)>=0);else return thumb.type==="button"||((tag===''||thumb.tag===tag)&&!thumb.isHidden()&&(query===''||thumb.name.toLowerCase().indexOf(query)>=0))})}
this.checkSelected()};MediaLibrary.prototype.showUnused=function(){if(!this.fields.gallery2){return}
this.clearSelection();this.checkSelected(null);this.galleryFilterQuery='';this.fields.searchInputGallery.setValue('');if(this.fields.tagMenu){var foundItem_1=null;this.fields.tagMenu.root.traverse(function(item){if(item.getData().unused){foundItem_1=item;return!1}
return!0});if(foundItem_1){this.fields.tagMenu.setSelection([foundItem_1],!0)}}
for(var _i=0,_a=this.fields.gallery2.getItems();_i<_a.length;_i++){var thumb=_a[_i];thumb.setUnused(!1);thumb.setHidden(!1);if(MediaLibrary.unusedFiles.indexOf(thumb.name)!==-1){thumb.setUnused(!0)}}
this.fields.gallery2.setFilterCallback(function(thumb){return thumb.type!=="button"&&thumb.isUnused()});if(!MediaLibrary.unusedFiles.length){this.fields.gallery2.getElem().find('.wb-grid-view-scroll-area').css({display:'flex',justifyContent:'center',alignItems:'center'});this.fields.gallery2.getElem().find('.wb-grid-view-items').hide();this.scanUnusedBlock.css({marginTop:'0'})}else{this.fields.gallery2.getElem().find('.wb-grid-view-scroll-area').css({display:'block'});this.fields.gallery2.getElem().find('.wb-grid-view-items').show();this.scanUnusedBlock.css({marginTop:'20px'});this.scanUnusedButton.setText(__('Rescan'))}
this.fields.gallery2.getElem().find('.wb-grid-view-scroll-area').append(this.scanUnusedBlock.getElem());this.scanUnusedBlock.setVisible(!0)};MediaLibrary.prototype.selectImageCat=function(tag,selectInTree){if(selectInTree===void 0){selectInTree=!0}
if(this.fields.gallery2){this.scanUnusedBlock.setVisible(!1);this.fields.gallery2.getElem().find('.wb-grid-view-scroll-area').css({display:'block'});this.fields.gallery2.getElem().find('.wb-grid-view-items').show()}
if(selectInTree&&this.fields.tagMenu){var foundItem_2=null;this.fields.tagMenu.root.traverse(function(item){if(item.getData().tag===tag){foundItem_2=item;return!1}
return!0});if(foundItem_2)
this.fields.tagMenu.setSelection([foundItem_2],!0);else{tag="";this.fields.tagMenu.selectFirstItem()}}
this.galleryFilterQuery='';this.fields.searchInputGallery.setValue('');if(this.fields.gallery2){for(var _i=0,_a=this.fields.gallery2.getItems();_i<_a.length;_i++){var thumb=_a[_i];thumb.setHidden(!1)}}
this.filterGallery(tag)};MediaLibrary.prototype.clearFileSelection=function(){this.selectedFiles=[];this.clearSelection()};MediaLibrary.prototype.setSelectedFiles=function(list){var _a,_b;this.clearFileSelection();var selTabType='gallery-main';this.selectedFiles=list;if(list.length){if(this.showTabs&&typeof list[0]==="string"&&/^https?:\/\//i.test(list[0])){this.fields.urlInput.setValue(list[0]);selTabType='gallery-url'}else{if(this.fields.urlInput)
this.fields.urlInput.setValue('http://');selTabType='gallery-main';if(this.fields.gallery2){for(var _i=0,_c=this.fields.gallery2.getItems();_i<_c.length;_i++){var thumb=_c[_i];if(!((_a=thumb.data)===null||_a===void 0?void 0:_a.url))
continue;var url=wb_builder.makeRelUrl(thumb.data.url.split("?")[0]);for(var k in list){var file=list[k];if(list.hasOwnProperty(k)&&(typeof file==="string")&&url===wb_builder.makeRelUrl(file)){thumb.setSelected(!0);selTabType='gallery-main'}}}}
if(this.fields.fontIconGallery){for(var _d=0,_e=this.fields.fontIconGallery.thumbs;_d<_e.length;_d++){var thumb=_e[_d];if(!((_b=thumb.data)===null||_b===void 0?void 0:_b.character))
continue;var icon=thumb.data.character;for(var k in list){var file=list[k];if(list.hasOwnProperty(k)&&(typeof file==="object")&&("character" in file)&&icon===file.character){thumb.setSelected(!0);selTabType='gallery-icons'}}}}}}else if(this.fields.urlInput){this.fields.urlInput.setValue('http://')}
if(!this.showGalleryTab&&!this.showTabs&&!this.isMultiselect&&this.showFontIconTab){selTabType='gallery-icons'}
this.loadUrlImage();var selTab=this.fields.tabbedPane.selectTabByType(selTabType);this.tabActive=(selTab===null||selTab===void 0?void 0:selTab.type)||null;this.checkSelected()};MediaLibrary.prototype.getSelectedFileType=function(){var files=this.getSelectedFiles();var file=files.length?files[0]:null;if(file){if(this.tabActive==='gallery-url'){return(this.fields.urlTypeVideo&&this.fields.urlTypeVideo.getValue())?'video':'image'}else if(this.tabActive==='gallery-icons'){return'image'}else if(typeof file==='string'){return getFileType(file)}}
return null};MediaLibrary.prototype.getSelectedFiles=function(asObject){var _a,_b;if(asObject===void 0){asObject=!1}
var list=[];if(this.tabActive==='gallery-url'&&this.urlInfo.url){this.clearFileSelection();if(asObject){list[list.length]={file:this.urlInfo.url,width:0,height:0,size:0}}else{list[list.length]=this.urlInfo.url}}
if((this.tabActive=='gallery-main'||list.length==0)&&this.fields.gallery2){for(var _i=0,_c=this.fields.gallery2.getItems();_i<_c.length;_i++){var thumb=_c[_i];if(!thumb.isSelected()||!((_a=thumb.data)===null||_a===void 0?void 0:_a.url))
continue;var url=thumb.data.url.split('?');if(asObject){list[list.length]={file:wb_builder.makeRelUrl(url[0]),width:thumb.data.width,height:thumb.data.height,size:thumb.data.size}}else{list[list.length]=wb_builder.makeRelUrl(url[0])}}}
if((this.tabActive=='gallery-free'||list.length==0)&&this.fields.freeGallery){for(var _d=0,_e=this.fields.freeGallery.thumbs;_d<_e.length;_d++){var thumb=_e[_d];if(!thumb.isSelected()||!((_b=thumb.data)===null||_b===void 0?void 0:_b.url))
continue;if(asObject){list[list.length]={file:thumb.data.url,width:thumb.data.width,height:thumb.data.height,size:thumb.data.size}}else{list[list.length]=thumb.data.url}}}
if((this.tabActive=='gallery-icons'||list.length==0)&&this.fields.fontIconGallery){for(var _f=0,_g=this.fields.fontIconGallery.thumbs;_f<_g.length;_f++){var thumb=_g[_f];if(!thumb.isSelected()||!thumb.data)
continue;list.push({family:thumb.data.family,prefix:thumb.data.prefix,icon:thumb.data.names[0],character:thumb.data.character,xOffset:thumb.data.x,baseLine:thumb.data.y,width:thumb.data.w,height:thumb.data.h,fontSize:thumb.data.s})}}
return list};MediaLibrary.prototype.showProgress=function(value,showVal,addMsg){if(showVal===void 0){showVal=!1}
this.progress.find(".progress-bar").stop().css("width",(value*1)+"%");if(showVal){this.progress.find(".progress-bar > span").text((value*1)+"%");this.progress.children(".status").html((value*1)+"%")}
if(addMsg){this.progress.children(".status2").html(addMsg)}
this.dialog.find(".tab-content").fadeTo(0,0.3);this.content.append(this.progress);this.progress.fadeIn();return this.progress};MediaLibrary.prototype.hideProgress=function(instant,callback){var _this_1=this;if(instant===void 0){instant=!1}
var thisCallback=(callback&&typeof(callback)==="function")?callback:null;this.dialog.find(".tab-content").fadeTo(0,1);this.progress.children(".status2").html('');if(instant){this.progress.detach();if(thisCallback)
thisCallback();}else{this.progress.fadeOut({complete:function(){_this_1.progress.detach();if(thisCallback)
thisCallback();}})}
return this.progress};MediaLibrary.prototype.showMessage=function(message,title,type){var _this_1=this;if(title===void 0){title=""}
if(type===void 0){type=""}
var msg=(title?("<strong>"+title+"</strong> "):"")+message;if(msg){if(type=='error')
type=AlertBox_4.default.STYLE_DANGER;msg+='<button class="close">&times;</button>';this.alertBox.setHtml(msg);this.alertBox.setBoxStyle(type||AlertBox_4.default.STYLE_BLOCK);this.alertBox.setVisible(!0);this.alertBox.getElem().css("margin","15px 0 0 0").find(".close").on("click",function(){_this_1.hideMessage()})}else{this.alertBox.setVisible(!1)}};MediaLibrary.prototype.hideMessage=function(){this.showMessage('')};MediaLibrary.prototype.scrollToSelection=function(thumb){var _this_1=this;if(thumb===void 0){thumb=null}
if(!this.isVisible)
return;if(this.scrollToSelectionTimeout)
clearInterval(this.scrollToSelectionTimeout);this.scrollToSelectionTimeout=setTimeout(function(){var _a,_b;if(_this_1.tabActive=='gallery-main'){(_a=_this_1.fields.gallery2)===null||_a===void 0?void 0:_a.scrollItemIntoView(thumb)}else if(_this_1.tabActive=='gallery-icons'){(_b=_this_1.fields.fontIconGallery)===null||_b===void 0?void 0:_b.scrollToSelection(thumb)}},200)};MediaLibrary.prototype.setVisible=function(visible,noAction,ignoreEvent){if(this.uploader)
this.uploader.fileupload(visible?'enable':'disable');if(visible&&(!this.galleryLoaded||this.requiresRevalidation)){this.checkSelected();this.loadGallery()}
_super.prototype.setVisible.call(this,visible,noAction,ignoreEvent)};MediaLibrary.prototype.createDefaultButtons=function(){if(this.mode==="all"||!this.showFullLibraryButton)
return;var fullLibraryLink=(0,jquery_135.default)('<a href="javascript:void(0)" iid="fullMediaLibrary"></a>').addClass('btn btn-default').text(__("Full Media Library")).on("click",function(){var lib=open(__("Upload media"),!1,'all');lib.galMsg.parent().hide();lib.addButton(__("Close"));lib.setVisible(!0);return!1}).css({float:(wb_builder.rtl?'right':'left')});this.buttons.prepend(fullLibraryLink)};MediaLibrary.prototype.invalidate=function(){for(var i in dialogs){dialogs[i].requiresRevalidation=!0}
this.checkSelected()};MediaLibrary.prototype.updateUnusedCategory=function(){var _this_1=this;if(!this.fields.gallery2){return}
var data={url:BuilderConfig_38.wbConfig.getLnUrl("check_unused",{reset:'1'}),method:'post',};this.isScanUnusedError=!1;this.scanUnusedPreloader.monitor(data,function(success,error,response){if(!_this_1.fields.gallery2){return}
MediaLibrary.unusedFiles=[];var elements=wb_builder.bodyInstance.getStringifyElements();for(var _i=0,_a=response.results;_i<_a.length;_i++){var filename=_a[_i];if(!wb_builder.bodyInstance.isFileInUseInElements(filename,elements)){MediaLibrary.unusedFiles.push(filename)}}
var thumbs=_this_1.fields.gallery2.getItems();for(var _b=0,thumbs_5=thumbs;_b<thumbs_5.length;_b++){var thumb=thumbs_5[_b];thumb.setUnused(!1);thumb.setHidden(!1);if(MediaLibrary.unusedFiles.indexOf(thumb.name)!==-1){thumb.setUnused(!0)}}
_this_1.fields.gallery2.setFilterCallback(function(thumb){return thumb.type!=="button"&&thumb.isUnused()});_this_1.scanUnusedPreloader.setVisible(!1);_this_1.showUnused()},!1,!0,function(error){_this_1.isScanUnusedError=!0;_this_1.scanUnusedPreloader.setMessage('',error,'danger');return!0},!1,2000)};MediaLibrary.prototype.cancelUnusedCategory=function(){var _this_1=this;if(this.isScanUnusedError){this.scanUnusedPreloader.setVisible(!1);return}
jquery_135.default.post(BuilderConfig_38.wbConfig.getLnUrl("check_unused",{cancel:'1'}),{},function(){_this_1.scanUnusedPreloader.setVisible(!1)})};MediaLibrary.unusedFiles=[];return MediaLibrary}(Dialog_22.default));function open(title,multi,mode,showTabs,showFontAwesomeTab,customContentClb,showGalleryTab,showFullLibraryButton){if(showTabs===void 0){showTabs=!1}
if(showFontAwesomeTab===void 0){showFontAwesomeTab=!1}
if(showGalleryTab===void 0){showGalleryTab=!0}
if(showFullLibraryButton===void 0){showFullLibraryButton=!0}
var customContent=(typeof customContentClb==='function')?customContentClb():null;var libraryId=mode+":"+(multi?"1":"0")+":"+(showTabs?"1":"0")+":"+(showFontAwesomeTab?"1":"0")+":"+(customContent?HasherUtil.crc32(JSON.stringify(customContent)):"0");if(typeof(dialogs[libraryId])!=="object"){dialogs[libraryId]=new MediaLibrary(title,multi,mode,showTabs,showFontAwesomeTab,showGalleryTab,showFullLibraryButton)}
var dlg=dialogs[libraryId];dlg.setCustomContent(customContent);dlg.setTitle(title);dlg.removeAllButtons();dlg.createDefaultButtons();dlg.clearFileSelection();return dlg}
Service_70.Service.mediaLibrary={open:open,reload:reload,pathToId:pathToId,getPathMeta:getPathMeta,setPathMeta:setPathMeta,getFileType:getFileType,getIconClass:getIconClass,updateFontAwesomeIconInfo:updateFontIconInfo,getModes:getModes,checkFreeGallery:checkFreeGallery,}});define("js/CommonTypes",["require","exports","jquery","js/util/UID"],function(require,exports,jquery_136,UID_11){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.waitForModalToFullyHide=exports.delayPromise=exports.Vector2=exports.convertToPixels=exports.HistoryGroupState=exports.TraverseControl=exports.FlexAlignContent=exports.FlexAlignItems=exports.FlexWrap=exports.ChildrenLayoutType=exports.ContentBlockId=exports.Alignment=void 0;var Alignment;(function(Alignment){Alignment.Left="left";Alignment.Center="center";Alignment.Right="right"})(Alignment||(exports.Alignment=Alignment={}));var ContentBlockId;(function(ContentBlockId){ContentBlockId.Header="header";ContentBlockId.Main="body";ContentBlockId.Footer="footer"})(ContentBlockId||(exports.ContentBlockId=ContentBlockId={}));var ChildrenLayoutType;(function(ChildrenLayoutType){ChildrenLayoutType.Absolute="absolute";ChildrenLayoutType.Horizontal="horizontal";ChildrenLayoutType.Vertical="vertical";ChildrenLayoutType.Unknown="unknown"})(ChildrenLayoutType||(exports.ChildrenLayoutType=ChildrenLayoutType={}));var FlexWrap;(function(FlexWrap){FlexWrap.NoWrap="nowrap";FlexWrap.Wrap="wrap";FlexWrap.WrapReverse="wrap-reverse"})(FlexWrap||(exports.FlexWrap=FlexWrap={}));var FlexAlignItems;(function(FlexAlignItems){FlexAlignItems.Start="flex-start";FlexAlignItems.Center="center";FlexAlignItems.End="flex-end";FlexAlignItems.Stretch="stretch"})(FlexAlignItems||(exports.FlexAlignItems=FlexAlignItems={}));var FlexAlignContent;(function(FlexAlignContent){FlexAlignContent.Start="flex-start";FlexAlignContent.Center="center";FlexAlignContent.End="flex-end";FlexAlignContent.Stretch="stretch";FlexAlignContent.SpaceBetween="space-between";FlexAlignContent.SpaceEvenly="space-evenly";FlexAlignContent.SpaceAround="space-around"})(FlexAlignContent||(exports.FlexAlignContent=FlexAlignContent={}));var TraverseControl;(function(TraverseControl){TraverseControl[TraverseControl.Continue=0]="Continue";TraverseControl[TraverseControl.Break=1]="Break";TraverseControl[TraverseControl.SkipChildren=2]="SkipChildren"})(TraverseControl||(exports.TraverseControl=TraverseControl={}));var HistoryGroupState;(function(HistoryGroupState){HistoryGroupState[HistoryGroupState.NotRecording=0]="NotRecording";HistoryGroupState[HistoryGroupState.GroupStart=1]="GroupStart";HistoryGroupState[HistoryGroupState.Chaining=2]="Chaining"})(HistoryGroupState||(exports.HistoryGroupState=HistoryGroupState={}));function convertToPixels(size,parentSize){if(typeof size==="number")
return size;var val=parseFloat(size);if(isNaN(val))
return 0;if(/px$/.test(size))
parentSize=1;else if(/%$/.test(size))
val=val/100;else if(!/vw$/.test(size)){val=val/100;parentSize=(0,jquery_136.default)(window).width()}else if(!/vh$/.test(size)){val=val/100;parentSize=(0,jquery_136.default)(window).height()}else if(!/em$/.test(size))
return 0;return Math.round(val*parentSize)}
exports.convertToPixels=convertToPixels;var Vector2=(function(){function Vector2(x,y){if(x===void 0){x=0}
if(y===void 0){y=0}
this.set(x,y)}
Vector2.prototype.clone=function(){return new Vector2(this)};Vector2.prototype.set=function(x,y){if(x===void 0){x=0}
if(y===void 0){y=0}
if(x&&typeof x==="object"){this.x=x.x;this.y=x.y}else{this.x=x;this.y=y}
return this};Vector2.prototype.add=function(vec){return new Vector2(this.x+vec.x,this.y+vec.y)};Vector2.prototype.subtract=function(vec){return new Vector2(this.x-vec.x,this.y-vec.y)};Vector2.prototype.mul=function(vec){return new Vector2(this.x*vec.x,this.y*vec.y)};Vector2.prototype.scale=function(scale){return new Vector2(this.x*scale,this.y*scale)};Vector2.prototype.scale2=function(x,y){return new Vector2(this.x*x,this.y*y)};Vector2.prototype.normalize=function(){var len=this.length();if(len){this.x/=len;this.y/=len}
return this};Vector2.prototype.dot=function(vec){return this.x*vec.x+this.y*vec.y};Vector2.prototype.lengthSquare=function(){return this.x*this.x+this.y*this.y};Vector2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};return Vector2}());exports.Vector2=Vector2;function delayPromise(delayMilliseconds){var deferred=jquery_136.default.Deferred();setTimeout(function(){deferred.resolve()},delayMilliseconds);return deferred.promise()}
exports.delayPromise=delayPromise;function waitForModalToFullyHide(timeoutMilliseconds){if(timeoutMilliseconds===void 0){timeoutMilliseconds=0}
var deferred=jquery_136.default.Deferred();var timer=0;var callback=function(){if(timer)
clearTimeout(timer);deferred.resolve()};if(timeoutMilliseconds>0){timer=setTimeout(function(){(0,jquery_136.default)(document).off("hidden.bs.modal",callback);deferred.reject()},timeoutMilliseconds)}(0,jquery_136.default)(document).one("hidden.bs.modal",callback);return deferred.promise()}
exports.waitForModalToFullyHide=waitForModalToFullyHide;UID_11.UID.create()});define("js/store/StoreShippingMethod",["require","exports","js/Serializable"],function(require,exports,Serializable_18){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreShippingMethod=exports.StoreShippingMethodRange=exports.buildTypeList=exports.StoreShippingMethodType=void 0;var StoreShippingMethodType;(function(StoreShippingMethodType){StoreShippingMethodType[StoreShippingMethodType.FREE=0]="FREE";StoreShippingMethodType[StoreShippingMethodType.FLAT_RATE=1]="FLAT_RATE";StoreShippingMethodType[StoreShippingMethodType.BY_WEIGHT=2]="BY_WEIGHT";StoreShippingMethodType[StoreShippingMethodType.BY_SUBTOTAL=3]="BY_SUBTOTAL"})(StoreShippingMethodType||(exports.StoreShippingMethodType=StoreShippingMethodType={}));function buildTypeList(){return[{id:StoreShippingMethodType.FREE,name:__('Free')},{id:StoreShippingMethodType.FLAT_RATE,name:__('Flat rate')},{id:StoreShippingMethodType.BY_WEIGHT,name:__('By weight')},{id:StoreShippingMethodType.BY_SUBTOTAL,name:__('By subtotal')},]}
exports.buildTypeList=buildTypeList;var StoreShippingMethodRange=(function(){function StoreShippingMethodRange(from,to,value){if(from===void 0){from=0}
if(to===void 0){to=0}
if(value===void 0){value=0}
this.from=from;this.to=to;this.value=value;if(isNaN(this.from))
this.from=0;if(isNaN(this.to))
this.to=0;if(isNaN(this.value))
this.value=0}
return StoreShippingMethodRange}());exports.StoreShippingMethodRange=StoreShippingMethodRange;var StoreShippingMethod=(function(_super){__extends(StoreShippingMethod,_super);function StoreShippingMethod(data){if(data===void 0){data=null}
var _this=_super.call(this)||this;_this.id="";_this.name="";_this.description="";_this.destinationZoneId="global";_this.type=StoreShippingMethodType.FREE;_this.ranges=[];_this.estimatedShippingTime={from:0,to:0};_this.deserialize(data);return _this}
return StoreShippingMethod}(Serializable_18.Serializable));exports.StoreShippingMethod=StoreShippingMethod});define("store/js/StoreCartElement",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.addToCart=exports.updateCartCounter=exports.init=exports.cartElements=void 0;exports.cartElements=[];function init(storeCartElementId,cartUrl){var thisCartUrl=cartUrl,cart=$('#'+storeCartElementId).eq(0);if(!/\#/.test(thisCartUrl)){var storeAnchor=findNearestStoreAnchor();if(storeAnchor)
thisCartUrl+=('#'+storeAnchor);}
cart.on('click',function(){location.href=thisCartUrl});exports.cartElements.push({elem:cart,updateView:function(value,noAnim){if(!noAnim){cart.addClass('cartanim');setTimeout(function(){cart.removeClass('cartanim')},1000)}
cart.find('.store-cart-counter').text('('+value+')')}})}
exports.init=init;function updateCartCounter(total,needAnim){if(needAnim===void 0){needAnim=!1}
for(var i=0;i<exports.cartElements.length;i++){exports.cartElements[i].updateView(total,!needAnim)}}
exports.updateCartCounter=updateCartCounter;function addToCart(cartUrl,itemId,quantity,variant,successCallback,doneCallback){if(quantity===void 0){quantity=1}
if(variant===void 0){variant=''}
var _successCallback=successCallback;var _doneCallback=doneCallback;$.get(cartUrl+'add/'+itemId,{quantity:quantity,variant:variant},function(data){updateCartCounter(data.total,!0);if(!data.error&&typeof _successCallback==='function')
_successCallback(data);if(typeof _doneCallback==='function')
_doneCallback(data);}).fail(function(){console.log('Error adding to cart');if(typeof _doneCallback==='function')
_doneCallback();})}
exports.addToCart=addToCart;function findNearestStoreAnchor(){var stores=$('.wb-store');if(stores.length){var anchor=stores.eq(0).find('.wb_anchor');var disableAnchorNav=anchor.attr('data-disable-anchor-nav')?!0:!1;if(!disableAnchorNav)
return anchor.attr('name');}
return null}});define("store/js/StoreModule",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.StoreCartData=exports.CouponType=exports.StoreCartItem=void 0;var StoreCartItem=(function(){function StoreCartItem(name,sku,priceStr,price,qty){this.name=name;this.sku=sku;this.priceStr=priceStr;this.price=price;this.qty=qty}
return StoreCartItem}());exports.StoreCartItem=StoreCartItem;var CouponType;(function(CouponType){CouponType[CouponType.PERCENTAGE=0]="PERCENTAGE";CouponType[CouponType.FIXED_AMOUNT=1]="FIXED_AMOUNT"})(CouponType||(exports.CouponType=CouponType={}));var StoreCartData=(function(){function StoreCartData(){this.items=[];this.subTotalPrice='';this.taxes=[];this.shippingPrice='';this.totalPrice=''}
return StoreCartData}());exports.StoreCartData=StoreCartData});define("store/js/StorePaymentFormsDirective",["require","exports","store/js/StoreModule"],function(require,exports,StoreModule_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.register=void 0;function setPayBtnOverlayVisible(container,visible){if(visible){container.children('div').css('opacity',0.5);var overlay=$('<div class="wb-store-pay-btn-overlay">').append('<div class="ico-spin icon-wb-spinner">');container.append(overlay)}else{container.find('.wb-store-pay-btn-overlay').remove();container.children('div').css('opacity','')}}
function initForm(scope,elem,checkoutUrl,$http){var form=elem.find('form[data-gateway-id]');form.on('submit',function(_e,justSubmit){if(justSubmit)
return!0;var canSubmit=scope.onSubmit();if(typeof canSubmit!=='undefined'&&!canSubmit){scope.$apply();return!1}
if(!checkoutUrl){console.error('Not enough data');return!1}
var gatewayId=form.attr('data-gateway-id'),formData=[],formElements=form[0].elements;for(var i=0;i<formElements.length;i++){var formField=formElements[i],fd=void 0,mlp=void 0;if(formField.value==='{price}'){angular.element(formField).data('isPrice',!0)}
formData.push({name:formField.name,value:formField.value,isPrice:!!angular.element(formField).data('isPrice'),fixedDecimal:((!isNaN(fd=parseInt(angular.element(formField).data('fixedDecimal'),10)))?fd:-1),multiplier:((!isNaN(mlp=parseInt(angular.element(formField).data('multiplier'),10)))?mlp:0)})}
setPayBtnOverlayVisible(elem,!0);$http.post(checkoutUrl.replace('__GATEWAY_ID__',gatewayId),angular.toJson({formData:formData})).then(function(res){var e=new jQuery.Event("submitcomplete");try{form.trigger(e,[res.data])}catch(ex){console.error(ex)}
if(('error' in res.data)&&res.data.error){alert(res.data.error);setPayBtnOverlayVisible(elem,!1);return}
if(('instantRedirectUrl' in res.data)&&res.data.instantRedirectUrl){location.href=res.data.instantRedirectUrl;return}
if(('redirectUrl' in res.data)&&res.data.redirectUrl){form.attr('action',res.data.redirectUrl)}
if(('updateFields' in res.data)&&res.data.updateFields){for(var field in res.data.updateFields){form.find('[name="'+field+'"]').val(res.data.updateFields[field])}}
if(('deleteFields' in res.data)&&res.data.deleteFields){for(var i in res.data.deleteFields){form.find('[name="'+res.data.deleteFields[i]+'"]').remove()}}
if(('createFields' in res.data)&&res.data.createFields){for(var i in res.data.createFields){var input=$(res.data.createFields[i]);var name_12=input.attr('name');form.find('[name="'+name_12+'"]').remove();form.append(res.data.createFields[i])}}
e=new jQuery.Event("beforesend");try{form.trigger(e,[res.data])}catch(ex){console.error(ex)}
if(!e.isDefaultPrevented()&&(!('noSubmit' in res.data)||!res.data.noSubmit)){form.trigger('submit',[!0])}else{setPayBtnOverlayVisible(elem,!1)}}).catch(function(){console.log('Error processing checkout')});return!1})}
function initInquiryFrom(scope,elem,storeData){var form=elem.find('form.wb_form').eq(0);var thisCartItems=(storeData?storeData.items:null);if(!storeData)
return;form.on('submit',function(){var objInput=this.elements.object;var data=new StoreModule_3.StoreCartData();if(thisCartItems)
for(var i=0;i<thisCartItems.length;i++){var item=thisCartItems[i];data.items.push(new StoreModule_3.StoreCartItem(item.name,item.sku,item.priceStr,item.price,item.quantity))}
data.subTotalPrice=''+scope.totals.subTotalPrice;data.taxes=scope.totals.taxes;data.shippingPrice=''+scope.totals.shippingPrice;data.totalPrice=''+scope.totals.totalPrice;objInput.value=JSON.stringify(data);this.submit()});scope.cartCtrl.formVisible=!0}
var selectorInitiated=!1;var lastSelectedButton=null;function handleSelect(elem,buttons,block,__){if(!selectorInitiated){selectorInitiated=!0;buttons.each(function(){var formElem=angular.element(this).find('form').eq(0);var btnElem=angular.element(this).find('button').eq(0);var input=angular.element('<input>').attr({type:'radio',name:'wb-store-pay-options'}).css({margin:'-8px 0 0 0',cursor:'pointer'}).on('click',function(){return btnElem.trigger('click')});btnElem.after(input);formElem.css({display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center'})});var mainButton=angular.element('<button>').addClass('btn btn-success btn-lg').attr({type:'button'}).css({display:'block',margin:'15px auto 0 auto'}).text(__('Order with obligation to pay')).on('click',function(){if(lastSelectedButton)
$(lastSelectedButton.form).trigger('submit');});block.after(mainButton)}
if(lastSelectedButton)
lastSelectedButton.input.checked=!1;var input=elem.find('input[name=wb-store-pay-options]')[0];input.checked=!0;lastSelectedButton={input:input,form:elem.find('form')[0]}}
function modifyButton(elem,storeData,buttons,block){if(storeData.lang!='de')
return;var __=function(m){return(m in storeData.translations)?storeData.translations[m]:m};var btn=elem.find('button').eq(0);btn.attr({type:'button'}).on('click',function(){return handleSelect(elem,buttons,block,__)})}
function register(app,storeData){app.directive('paymentGateways',['$http',function($http){return{restrict:'A',scope:{'paymentGateways':'=','totals':'=','onSubmit':'&','cartCtrl':'='},link:function(scope,element){if(scope.paymentGateways){var buttons_5=element.find('.wb-store-pay-btn');buttons_5.each(function(){modifyButton(angular.element(this),storeData,buttons_5,element);initForm(scope,angular.element(this),storeData.checkoutUrl,$http)})}else{initInquiryFrom(scope,element,storeData)}}}}])}
exports.register=register});define("store/js/StoreCart",["require","exports","store/js/StoreCartElement","store/js/StoreModule","store/js/StorePaymentFormsDirective"],function(require,exports,StoreCartElement_1,StoreModule_4,StorePaymentFormsDirective){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=exports.StoreCartController=exports.StoreCartTotals=void 0;var StoreCartTotals=(function(){function StoreCartTotals(){this.subTotalPrice=new Big(0.0);this.totalPrice=new Big(0.0);this.taxes=[];this.discountPrice=new Big(0.0);this.shippingPrice=new Big(0.0)}
return StoreCartTotals}());exports.StoreCartTotals=StoreCartTotals;var StoreCartController=(function(){function StoreCartController($scope,$element,$http,$timeout,cartUrl,data,itemsUrl){this.$element=$element;this.$http=$http;this.$timeout=$timeout;this.cartUrl=cartUrl;this.data=data;this.itemsUrl=itemsUrl;this.totals=new StoreCartTotals();this.loading=!1;this.flowStep=0;this.hideDeliveryInfo=!0;this.billingFields=[];this.billingInfoErrors=null;this.deliveryInfoErrors=null;this.generalErrors=null;this.shippingMethods=[];this.shippingMethod=null;this.countryIndex={};this.destinationZonesCountriesAreEmpty=!0;this.formVisible=!1;this.hasCoupons=!1;this.coupon=null;this.couponError="";this.CouponType=StoreModule_4.CouponType;this.couponInputValue='';this.couponInputFail=!1;this.userAgreedToTerms=!1;this.storeElem=null;this.anchorElem=null;var scope=$scope;scope.main=this;scope.filterAllowedCountries=this.filterAllowedCountries.bind(this);scope.filterAllowedRegions=this.filterAllowedRegions.bind(this);if(!data.currency)
data.currency={code:'USD',postfix:'',prefix:'$'};if(!data.priceOptions)
data.priceOptions={decimalPoint:'.',decimalPlaces:2,thousandsSeparator:''};for(var _i=0,_a=this.data.countries;_i<_a.length;_i++){var country=_a[_i];this.countryIndex[country.code]=country}
for(var i in this.data.shippingRegionCodes){if(this.data.shippingRegionCodes.hasOwnProperty(i)){this.destinationZonesCountriesAreEmpty=!1;break}}
for(var _b=0,_c=this.data.items;_b<_c.length;_b++){var item=_c[_b];item.quantityInput=item.quantity}
this.hasCoupons=data.hasCoupons;if(data.coupon)
this.coupon=data.coupon;if(data.discountPrice)
this.totals.discountPrice=new Big(data.discountPrice);if(data.billingFields)
this.billingFields=data.billingFields;var self=this;if(!('billingInfoPure' in this.data)){Object.defineProperty(this.data,'billingInfoPure',{get:function(){return self.convertToServerInfo(self.data.billingInfo)},set:function(value){self.data.billingInfo=self.convertToAngularInfo(value)},})}
if(!('deliveryInfoPure' in this.data)){Object.defineProperty(this.data,'deliveryInfoPure',{get:function(){return self.convertToServerInfo(self.data.deliveryInfo)},set:function(value){self.data.deliveryInfo=self.convertToAngularInfo(value)},})}
this.updateTotals()}
StoreCartController.prototype.goBack=function(){if(this.flowStep>0){this.flowStep--;if(this.flowStep<3&&!this.data.billingShippingRequired)
this.flowStep=0;if(this.flowStep==0)
this.updateTotals(!0);}else{location.href=this.data.backUrl}};StoreCartController.prototype.__=function(msg){return(msg in this.data.translations)?this.data.translations[msg]:msg};StoreCartController.prototype.convertToServerInfo=function(obj){var info=JSON.parse(JSON.stringify(obj));function padLeadZero(value){return parseFloat(value)<10?('0'+value):value}
this.billingFields.forEach(function(field,idx){if(field.type==='checkbox'&&typeof obj['wb_input_'+idx]==='object'){info['wb_input_'+idx]=Object.keys(obj['wb_input_'+idx]).map(function(item){return field.settings.options[parseInt(item)]||item})}
if(field.type==='radiobox'){var item=obj['wb_input_'+idx];info['wb_input_'+idx]=(field.settings.options[parseInt(item)]||item)+''}
if(field.type==='range'){var item=obj['wb_input_'+idx];if(item&&item.from&&item.to){info['wb_input_'+idx]=item.from+' - '+item.to}else{info['wb_input_'+idx]=''}}
if(field.type==='date'&&obj['wb_input_'+idx]instanceof Date){var value=obj['wb_input_'+idx];var date=value.getFullYear()+'-'+padLeadZero(value.getMonth()+1)+'-'+padLeadZero(value.getDate());var time=padLeadZero(value.getHours())+':'+padLeadZero(value.getMinutes())+':'+padLeadZero(value.getSeconds());var newValue=[];if(field.settings.dateUseDate)
newValue.push(date);if(field.settings.dateUseTime)
newValue.push(time);info['wb_input_'+idx]=newValue.join(' ')}});return info};StoreCartController.prototype.convertToAngularInfo=function(obj){var info=JSON.parse(JSON.stringify(obj));this.billingFields.forEach(function(field,idx){if(field.type==='checkbox'&&Array.isArray(obj['wb_input_'+idx])){var acc_1={};obj['wb_input_'+idx].forEach(function(item){var idx=field.settings.options.indexOf(item);if(idx>=0)
acc_1[idx]=!0});info['wb_input_'+idx]=acc_1}
if(field.type==='radiobox'){info['wb_input_'+idx]=field.settings.options.indexOf(obj['wb_input_'+idx]+'')}
if(field.type==='range'){var value=obj['wb_input_'+idx];if(typeof value==='string'){var newValue=value.split(' - ');info['wb_input_'+idx]={from:newValue[0],to:newValue[1]}}}
if(field.type==='date'&&typeof obj['wb_input_'+idx]==='string'){info['wb_input'+idx]=new Date(obj['wb_input_'+idx])}});return info};StoreCartController.prototype.getOptionsText=function(source,fieldIdx){var field=this.billingFields[fieldIdx]||null;if(!field)
return'';var options=field.settings.options;var value=source['wb_input_'+fieldIdx];var values=Array.isArray(value)?value:[value];return values.join(', ');return values.map(function(item){return options[item]?(options[item]):null}).filter(function(item){return!!item}).join(', ')};StoreCartController.prototype.checkout=function(){var _this=this;if(this.loading)
return;if(this.data.minOrderPrice&&this.totals.subTotalPrice.lt(this.data.minOrderPrice))
return;if(this.flowStep==0){this.flowStep=this.data.billingShippingRequired?1:3}else if(this.flowStep==1&&this.data.billingShippingRequired){this.loading=!0;this.$http.post(this.cartUrl+'billing-info',angular.toJson({billingInfo:this.data.billingInfoPure,deliveryInfo:this.data.deliveryInfoPure,useSame:this.hideDeliveryInfo,orderComment:this.data.orderComment,userAgreedToTerms:this.userAgreedToTerms})).then(function(res){_this.data.billingInfoPure=res.data.billingInfo;_this.data.deliveryInfoPure=res.data.deliveryInfo;_this.billingInfoErrors=res.data.billingInfoErrors;_this.deliveryInfoErrors=res.data.deliveryInfoErrors;_this.generalErrors=res.data.generalErrors;if(res.data.forceShowDeliveryInfo)
_this.hideDeliveryInfo=!1;_this.applyTotalsResponse(res.data);if(!_this.billingInfoErrors&&!_this.deliveryInfoErrors&&!_this.generalErrors){_this.flowStep=2;var anchor=_this.getAnchorElem();if(anchor.length)
window.scrollTo(0,anchor.offset().top);}}).finally(function(){_this.loading=!1}).catch(function(){console.log('Error updating cart')})}else if(this.flowStep==2&&this.data.billingShippingRequired){this.applyShipping(null,function(){if(_this.shippingMethod||_this.shippingMethods.length==0)
_this.flowStep=3})}};StoreCartController.prototype.onPaymentGatewayFormSubmit=function(){if(this.data.billingShippingRequired||!this.data.termsCheckboxEnabled)
return!0;if(this.userAgreedToTerms){this.generalErrors=null;return!0}
this.generalErrors={__isEmpty:'',userAgreedToTerms:this.__('You must agree to terms and conditions')};return!1};StoreCartController.prototype.getStoreElem=function(){if(this.storeElem===null){this.storeElem=this.$element.parents('.wb-store').eq(0)}
return this.storeElem};StoreCartController.prototype.getAnchorElem=function(){if(this.anchorElem===null){this.anchorElem=this.getStoreElem().children('.wb_anchor').eq(0)}
return this.anchorElem};StoreCartController.prototype.applyTotalsResponse=function(totals){if(totals.items){var oldIdx={};for(var _i=0,_a=this.data.items;_i<_a.length;_i++){var item=_a[_i];oldIdx['_'+item.cartId]=item}
this.data.items=totals.items;for(var _b=0,_c=this.data.items;_b<_c.length;_b++){var item=_c[_b];var idKey='_'+item.cartId;if(!('image' in item)){item.image=(idKey in oldIdx)?oldIdx[idKey].image:''}
item.quantityInput=item.quantity}}
this.updateTotals();this.shippingMethods=totals.shippingMethods?totals.shippingMethods:[];for(var _d=0,_e=this.shippingMethods;_d<_e.length;_d++){var method=_e[_d];if(method.id==totals.shippingMethodId){this.shippingMethod=method;break}}
this.coupon=totals.coupon;this.couponError=totals.couponError;this.totals.subTotalPrice=new Big(totals.subTotalPrice);this.totals.shippingPrice=new Big(totals.shippingPrice);this.totals.taxes=totals.taxes;this.totals.discountPrice=new Big(totals.discountPrice);this.totals.totalPrice=new Big(totals.totalPrice)};StoreCartController.prototype.applyCouponKeypress=function(e,couponCode){if(e.keyCode==13&&couponCode){this.applyCoupon(couponCode)}};StoreCartController.prototype.applyCoupon=function(couponCode){var _this=this;this.coupon=null;this.loading=!0;this.$http.post(this.cartUrl+'calc-totals',angular.toJson({couponCode:couponCode,discountOnly:(this.flowStep==0),})).then(function(res){_this.applyTotalsResponse(res.data);if(!_this.coupon&&_this.couponInputValue){_this.couponInputFail=!0;_this.$timeout(1000).then(function(){_this.couponInputFail=!1})}else{_this.couponInputValue=''}}).finally(function(){_this.loading=!1}).catch(function(){console.log('Error applying coupon')})};StoreCartController.prototype.applyShipping=function(shippingMethod,callback){var _this=this;if(shippingMethod)
this.shippingMethod=shippingMethod;this.loading=!0;this.$http.post(this.cartUrl+'calc-totals',angular.toJson({shippingMethodId:(this.shippingMethod?this.shippingMethod.id:0)})).then(function(res){_this.applyTotalsResponse(res.data);if(typeof callback==='function')
callback.call(_this);}).finally(function(){_this.loading=!1}).catch(function(){console.log('Error updating cart')})};StoreCartController.prototype.getShippingDescription=function(){var _a,_b,_c,_d,_e;if(((_a=this.data)===null||_a===void 0?void 0:_a.lang)&&typeof((_b=this.shippingMethod)===null||_b===void 0?void 0:_b.description)==='object'){return this.shippingMethod.description[(_c=this.data)===null||_c===void 0?void 0:_c.lang]}else if(typeof((_d=this.shippingMethod)===null||_d===void 0?void 0:_d.description)==='string'){return(_e=this.shippingMethod)===null||_e===void 0?void 0:_e.description}
return''};StoreCartController.prototype.changeInfoField=function(field,errorSource){if(!errorSource)
return;if(field in errorSource){delete errorSource[field]}
var isEmpty=!0;for(var k in errorSource){if(k==='__isEmpty')
continue;isEmpty=!1;break}
errorSource.__isEmpty=isEmpty?'1':''};StoreCartController.prototype.getCountry=function(code){return(code&&this.countryIndex.hasOwnProperty(code))?this.countryIndex[code]:null};StoreCartController.prototype.filterAllowedCountries=function(country,index,countries){return this.destinationZonesCountriesAreEmpty||this.data.shippingRegionCodes.hasOwnProperty(country.code)};StoreCartController.prototype.filterAllowedRegions=function(countryCode){var _this=this;return function(region,index,regions){return _this.destinationZonesCountriesAreEmpty||(_this.data.shippingRegionCodes.hasOwnProperty(countryCode)&&(_this.data.shippingRegionCodes[countryCode].length==0||_this.data.shippingRegionCodes[countryCode].indexOf(region.code)>=0))}};StoreCartController.prototype.removeItem=function(item){var _this=this;var idx=this.data.items.indexOf(item);if(idx>=0)
this.data.items.splice(idx,1);this.updateTotals();this.loading=!0;this.$http.get(this.cartUrl+'remove/'+(item.cartId||item.id)).then(function(res){(0,StoreCartElement_1.updateCartCounter)(res.data.total)}).finally(function(){_this.loading=!1}).catch(function(){console.log('Error removing from cart')})};StoreCartController.prototype.changeQuantity=function(item){var _this=this;this.updateTotals();this.loading=!0;item.quantityError='';this.$http.get(this.cartUrl+'update/'+(item.cartId||item.id)+'/'+item.quantity).then(function(res){if(res.data.error&&res.data.quantity!==undefined){item.quantityError=res.data.error;item.quantityInput=item.quantity=res.data.quantity;_this.updateTotals();_this.$timeout(1000).then(function(){return(item.quantityError='')})}(0,StoreCartElement_1.updateCartCounter)(res.data.total)}).finally(function(){_this.loading=!1}).catch(function(){console.log('Error updating cart')})};StoreCartController.prototype.updateTotals=function(clearAdditional){if(clearAdditional===void 0){clearAdditional=!1}
var dp=parseInt(''+this.data.priceOptions.decimalPlaces,10);this.totals.subTotalPrice=new Big(0.0);for(var _i=0,_a=this.data.items;_i<_a.length;_i++){var item=_a[_i];var quantityStr=''+item.quantityInput;var quantity=parseInt(quantityStr,10);if(isNaN(quantity)||quantity<1){item.quantity=quantity=1}else if(!quantityStr.match(/^[0-9]+$/)){item.quantity=quantity}else{item.quantity=item.quantityInput}
var itemTotalPrice=(new Big(quantity)).times(item.price);item.totalPriceStr=this.formatPrice(itemTotalPrice);this.totals.subTotalPrice=this.totals.subTotalPrice.plus(itemTotalPrice)}
this.totals.subTotalPrice=this.totals.subTotalPrice.round(dp);if(clearAdditional){this.totals.shippingPrice=new Big(0.0);this.totals.taxes=[]}
var fullTaxPrice=new Big(0.0);for(var _b=0,_c=this.totals.taxes;_b<_c.length;_b++){var tax=_c[_b];fullTaxPrice.plus(tax.amount)}
this.totals.totalPrice=(new Big(0.0)).plus(this.totals.subTotalPrice).plus(this.totals.shippingPrice).plus(fullTaxPrice).minus(this.totals.discountPrice).round(dp)};StoreCartController.prototype.fmtSMN=function(item,units){var estTimeStr='',estTime=item.estimatedShippingTime;if(estTime&&(estTime.from>0||estTime.to>0)){if(estTime.from===estTime.to){estTimeStr=''+estTime.from}else{estTimeStr=''+estTime.from+' - '+estTime.to}
estTimeStr=' ('+estTimeStr+' '+units+')'}
return item.name+estTimeStr};StoreCartController.prototype.formatPrice=function(price){if(!this.data.currency||!this.data.priceOptions)
return(''+price);var point=this.data.priceOptions.decimalPoint;var places=this.data.priceOptions.decimalPlaces;price=(price+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+price)?0:+price;var isNegative=!1;if(n<0){isNegative=!0;n*=-1}
var precision=!isFinite(+places)?0:Math.abs(places);var sep=(typeof this.data.priceOptions.thousandsSeparator==='undefined')?'':this.data.priceOptions.thousandsSeparator;var dec=(typeof point==='undefined')?'.':point;var toFixedFix=function(n,precision){var k=Math.pow(10,precision);return''+Math.round(n*k)/k};var s=(precision?toFixedFix(n,precision):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)}
if((s[1]||'').length<precision){s[1]=s[1]||'';s[1]+=new Array(precision-s[1].length+1).join('0')}
price=s.join(dec);return((isNegative?'-':'')+this.data.currency.prefix+price+this.data.currency.postfix)};return StoreCartController}());exports.StoreCartController=StoreCartController;var CouponsControl=(function(){function CouponsControl(){this.cart=null}
CouponsControl.prototype.formattedName=function(coupon){if(!this.cart||!coupon)
return coupon?coupon.code:'';var value=(coupon.type==this.cart.CouponType.FIXED_AMOUNT)?this.cart.formatPrice(coupon.value):("".concat(coupon.value,"%"));return"".concat(coupon.code,"\u00A0(-").concat(value,")")};CouponsControl.prototype.isEditable=function(){if(!this.cart)
return!1;return(this.cart.flowStep===0||this.cart.flowStep===2)};CouponsControl.register=function(app){app.component('couponsControl',{bindings:{cart:'=',},controllerAs:'main',controller:[CouponsControl],template:"\n\t\t\t\t<div style=\"display: inline-block; vertical-align: middle; margin-top: -3px;\"\n\t\t\t\t\t\tng-class=\"{'has-error': main.cart.couponInputFail}\"\n\t\t\t\t\t\tng-show=\"!main.cart.coupon\">\n\t\t\t\t\t<div class=\"input-group input-group-sm\">\n\t\t\t\t\t\t<input class=\"form-control input-sm\" type=\"text\"\n\t\t\t\t\t\t\tng-model=\"main.cart.couponInputValue\"\n\t\t\t\t\t\t\tng-keypress=\"main.cart.applyCouponKeypress($event, main.cart.couponInputValue)\"/>\n\t\t\t\t\t\t<span class=\"input-group-btn\">\n\t\t\t\t\t\t\t<button class=\"btn\"\n\t\t\t\t\t\t\t\t\tng-class=\"main.cart.couponInputFail ? ['btn-danger'] : ['btn-default']\"\n\t\t\t\t\t\t\t\t\tng-click=\"main.cart.applyCoupon(main.cart.couponInputValue)\">\n\t\t\t\t\t\t\t\t{{main.cart.__('Apply')}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"alert alert-danger\"\n\t\t\t\t\tstyle=\"display: block; padding: 5px 10px; margin: 5px 0 0 0;\"\n\t\t\t\t\tng-if=\"!main.cart.coupon && main.cart.couponError && main.isEditable()\">\n\t\t\t\t\t{{main.cart.couponError}}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"display: inline-block;\" ng-show=\"main.cart.coupon\">\n\t\t\t\t\t{{main.formattedName(main.cart.coupon)}}&nbsp;\n\t\t\t\t\t<span ng-if=\"main.isEditable()\">\n\t\t\t\t\t\t(<a href=\"javascript:void(0)\"\n\t\t\t\t\t\t\tng-click=\"main.cart.applyCoupon('')\">{{main.cart.__('Remove')}}</a>)\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t"})};return CouponsControl}());function init(storeElementId,cartUrl,storeData,itemsUrl){var app=angular.module('StoreCart',[]);StorePaymentFormsDirective.register(app,storeData);app.controller('StoreCartCtrl',['$scope','$element','$http','$timeout',function($scope,$element,$http,$timeout){new StoreCartController($scope,$element,$http,$timeout,cartUrl,storeData,itemsUrl)}]);CouponsControl.register(app);angular.element(function(){var elem=document.getElementById(storeElementId);if(elem)
angular.bootstrap(elem,['StoreCart']);});app.directive('dateInput',function(dateFilter){return{require:'ngModel',template:'<input></input>',replace:!0,link:function(scope,elm,attrs,ngModelCtrl){var ctrl=null;if(ngModelCtrl){ctrl=Array.isArray(ngModelCtrl)?ngModelCtrl[0]:ngModelCtrl}
if(ctrl){ctrl.$formatters.unshift(function(modelValue){return dateFilter(modelValue,'yyyy-MM-dd')});ctrl.$parsers.unshift(function(viewValue){return viewValue})}},}});app.directive("selectNgFiles",function(){function readFile(file){var deferred=$.Deferred();var reader=new FileReader();reader.onload=function(e){var _a;deferred.resolve({'name':file.name,'data':(_a=e.target)===null||_a===void 0?void 0:_a.result})};reader.onerror=function(e){deferred.reject(e)};reader.readAsDataURL(file);return deferred.promise()}
return{restrict:'A',require:'?ngModel',link:function(scope,elem,attrs,ngModel){if(!ngModel)
return;ngModel.$render=function(){};elem.bind('change',function(e){var element=e.target;$.when.apply($,Array.prototype.slice.call(element.files,0).map(readFile)).done(function(){var values=[];for(var _i=0;_i<arguments.length;_i++){values[_i]=arguments[_i]}
if(element.multiple)
ngModel.$setViewValue(values);else ngModel.$setViewValue((values&&values.length)?values[0]:null)})})}}})}
exports.init=init});define("store/js/StoreDetails",["require","exports","store/js/StoreCartElement"],function(require,exports,StoreCartElement_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=void 0;var galleryBlockInstance=null;var StoreDetailsController=(function(){function StoreDetailsController(data,scope,timeout){var _this=this;this.data=data;this.timeout=timeout;this.inquiryFormVisible=!0;this.showDetailsButtons=!1;this.showNoStock=!1;this.addToCartQuantityVal=1;this.addToCartQuantityErr=!1;this.addToCartQuantityBusy=!1;this.addToCartText='';this.addToCartIcon='';this.addToCartStyle='btn-success';this.isStockManaged=!1;this.variantValueIdx={};this.variants=[];this.variantSelections={};this.variantAvailOpts={};this.variantValueId='';this.variantFullPriceVal='';this.variantPriceVal='';this.variantSkuVal='';this.variantQuantityVal='';this.trAdd='';this.trAdded='';scope.ds=this;this.isStockManaged=data.isStockManaged;if(data.variants&&data.itemVariants){this.variantValueIdx={};this.variantAvailOpts={};for(var _i=0,_a=data.itemVariants;_i<_a.length;_i++){var val=_a[_i];this.variantValueIdx[val.id]=val;var vIdPairs=val.id.split('_');var vKey='';for(var _b=0,vIdPairs_1=vIdPairs;_b<vIdPairs_1.length;_b++){var vIdPair=vIdPairs_1[_b];vKey+=(vKey?'_':'')+vIdPair;this.variantAvailOpts[vKey]=!0}}
this.variants=data.variants;var _loop_35=function(v){if(v.options.length<=0)
return"continue";this_22.variantSelections['#'+v.id]={item:v,option:(v.options.length>0)?v.options[0]:null};scope.$watch(function(){return _this.variantSelections['#'+v.id].option},function(){_this.onVariantChange()})};var this_22=this;for(var _c=0,_d=this.variants;_c<_d.length;_c++){var v=_d[_c];_loop_35(v)}}else{this.showDetailsButtons=!0;this.showNoStock=!0}
this.trAdd=this.addToCartText=this.__('Add to cart');this.trAdded=this.__('Added!')}
StoreDetailsController.build=function(){return['StoreDetailsData','$scope','$timeout',StoreDetailsController]};StoreDetailsController.prototype.onAddToCart=function(){var _this=this;if(this.addToCartQuantityBusy)
return;var quantity=this.addToCartQuantityVal||0;this.addToCartQuantityErr=!1;if(isNaN(quantity)||quantity<1){this.addToCartQuantityErr=!0;return}
this.addToCartQuantityBusy=!0;(0,StoreCartElement_2.addToCart)(this.data.cartUrl,this.data.itemId,quantity,this.variantValueId,function(cartData){return _this.timeout(1).then(function(){if(cartData.total&&!cartData.error){_this.addToCartIcon='fa fa-check-circle';_this.addToCartText=_this.trAdded;_this.addToCartStyle='btn-success';_this.timeout(1000).then(function(){_this.addToCartIcon='';_this.addToCartText=_this.trAdd})}})},function(cartData){return _this.timeout(1).then(function(){if(cartData&&cartData.error){_this.addToCartIcon='';_this.addToCartText=cartData.error;_this.addToCartStyle='btn-danger';_this.timeout(1000).then(function(){_this.addToCartQuantityBusy=!1;_this.addToCartIcon='';_this.addToCartText=_this.trAdd;_this.addToCartStyle='btn-success'})}else{_this.addToCartQuantityBusy=!1}})})};StoreDetailsController.prototype.filterAvailable=function(items){var result=[];for(var _i=0,items_10=items;_i<items_10.length;_i++){var it=items_10[_i];if(it.available)
result.push(it);}
return result};StoreDetailsController.prototype.selectOption=function(variant,opt){this.variantSelections['#'+variant.id].option=opt};StoreDetailsController.prototype.isOptionSelected=function(variant,opt){return this.variantSelections['#'+variant.id].option===opt};StoreDetailsController.prototype.updateVariantOptionAvailability=function(){if(!this.data.itemVariants)
return;var vPairKeyPref='';for(var _i=0,_a=this.variants;_i<_a.length;_i++){var v=_a[_i];var firstAvailOpt=null;for(var _b=0,_c=v.options;_b<_c.length;_b++){var opt=_c[_b];var vPairKey=vPairKeyPref+v.id+':'+opt.id;opt.available=(vPairKey in this.variantAvailOpts);if(!firstAvailOpt&&opt.available)
firstAvailOpt=opt}
var fld=this.variantSelections['#'+v.id];if(fld&&(!fld.option||!fld.option.available)){fld.option=firstAvailOpt}
vPairKeyPref+=v.id+':'+((fld&&fld.option)?fld.option.id:0)+'_'}};StoreDetailsController.prototype.onVariantChange=function(){this.updateVariantOptionAvailability();this.variantValueId='';for(var idKey in this.variantSelections){var fld=this.variantSelections[idKey];this.variantValueId+=(this.variantValueId?'_':'')+fld.item.id+':'+(fld.option?fld.option.id:0)}
this.variantFullPriceVal='—';this.variantPriceVal='—';this.variantSkuVal='—';this.variantQuantityVal='';var values=this.variantValueIdx.hasOwnProperty(this.variantValueId)?this.variantValueIdx[this.variantValueId]:null;if(values){if(galleryBlockInstance){galleryBlockInstance.swapVariantImage(values.image||null)}
this.variantFullPriceVal=values.fullPriceStr||this.variantFullPriceVal;this.variantPriceVal=values.priceStr||this.variantPriceVal;this.variantSkuVal=values.sku||this.variantSkuVal;this.variantQuantityVal=(values.quantity>0)?(''+values.quantity):''}
this.showDetailsButtons=(this.variantPriceVal&&(!this.isStockManaged||this.variantQuantityVal))?!0:!1;this.showNoStock=(this.variantQuantityVal||!values)?!1:!0};StoreDetailsController.prototype.showInquiryForm=function(){this.inquiryFormVisible=!0};StoreDetailsController.prototype.__=function(msg){return(msg in this.data.translations)?this.data.translations[msg]:msg};return StoreDetailsController}());var DetailsBlock=(function(){function DetailsBlock(elem){var _this=this;this.elem=elem;this.galleryBlock=elem.find('.wb-store-imgs-block');this.propertiesBlock=elem.find('.wb-store-properties');this.isRTL=$('html').attr('dir')==='rtl';$(window).on('resize',function(){return _this.updateWidth()})}
DetailsBlock.prototype.updateWidth=function(){var imgBlockWidth=this.galleryBlock.outerWidth(!0);this.propertiesBlock.css(this.isRTL?'margin-right':'margin-left',(imgBlockWidth+5)+'px')};return DetailsBlock}());function init(storeElementId,data){var detailsBlock=new DetailsBlock($('#'+storeElementId).eq(0));var galleryBlock=GalleryBlock.init(detailsBlock.elem.find('.wb-store-imgs-block'),data.imageItems,data.imageResolution);if(galleryBlock)
galleryBlock.onResize(function(){return detailsBlock.updateWidth()});var app=angular.module('StoreDetails',[]);app.factory('StoreDetailsData',function(){return data});app.controller('StoreDetailsCtrl',StoreDetailsController.build());angular.element(function(){var elem=document.getElementById(storeElementId);if(elem)
angular.bootstrap(elem,['StoreDetails']);});detailsBlock.updateWidth()}
exports.init=init;var GalleryBlock=(function(){function GalleryBlock(elem,images,imageResolution){var _this=this;this.imageResolution=imageResolution;this.thumbsElem=null;this.variantThumb=null;this.hasVariant=!1;this.resizeFunc=null;this.linkElem=elem.children('.wb-store-image').css({cursor:'pointer'});this.imageElem=this.linkElem.children('img').length?this.linkElem.children('img'):this.linkElem.children('video');$(window).on('resize',function(){if(_this.imageElem.height()&&!_this.linkElem.children('video').length){_this.linkElem.css({height:_this.imageElem.height()})}});var thumbsBlock=elem.children('.wb-store-alt-images');if(thumbsBlock.length>0){this.thumbsElem=thumbsBlock.find('.wb-store-alt-cont').eq(0);thumbsBlock.find('.arrow-left').on('click',function(){return _this.scrollThumbs('left')});thumbsBlock.find('.arrow-right').on('click',function(){return _this.scrollThumbs('right')});this.thumbs=this.thumbsElem.find('.wb-store-alt-img').get().map(function(elem){return new GalleryThumb($(elem),_this)})}else{this.thumbs=[new GalleryThumb(null,this,this.imageElem.clone())]}
for(var i=0;i<this.thumbs.length;i++){if(images.length>i)
this.thumbs[i].data=images[i]}
var swipeBlock=$('.wb_pswp').eq(0)[0];this.linkElem.on('click',function(){if(_this.linkElem.attr("href")!=="javascript:void(0)"||$(_this).is("[data-is-popup]")||_this.linkElem.find('video').length)
return;var selIndex=0,thumbList=[];for(var _i=0,_a=_this.thumbs;_i<_a.length;_i++){var thumb=_a[_i];if(thumb.isVideoFile(thumb.data.src)){continue}
thumbList.push(thumb)}
if(_this.hasVariant&&_this.variantThumb)
thumbList.unshift(_this.variantThumb);for(var _b=0,thumbList_1=thumbList;_b<thumbList_1.length;_b++){var thumb=thumbList_1[_b];if(thumb.isActive())
break;selIndex++}
var loaded=0;var onGalleryImgReady=function(){loaded++;if(loaded<thumbList.length)
return;(new PhotoSwipe(swipeBlock,PhotoSwipeUI_Default,thumbList.map(function(it){return it.data}),{index:selIndex})).init()};for(var _c=0,thumbList_2=thumbList;_c<thumbList_2.length;_c++){var thumb=thumbList_2[_c];var item=thumb.data;if(!item.w||!item.h){(function(item){var img=new Image();img.onload=function(){item.w=this.width;item.h=this.height;onGalleryImgReady()};img.src=item.src})(item)}else{onGalleryImgReady()}}});this.swapImage(this.thumbs[0])}
GalleryBlock.init=function(elem,images,imageResolution){galleryBlockInstance=new GalleryBlock(elem,images,imageResolution);return galleryBlockInstance};GalleryBlock.get=function(){return galleryBlockInstance};GalleryBlock.prototype.onResize=function(func){this.resizeFunc=func};GalleryBlock.prototype.scrollThumbs=function(direction){if(!this.thumbsElem)
return;var imgList=this.thumbsElem.find('.wb-store-alt-img'),offsetWidth=imgList.eq(0).outerWidth(!0),offsetCont=imgList.eq(0).parent(),currOffset=((/margin-left:[^-\d]*(-*\d+)[^\d]*/i.test(offsetCont.attr('style')))?parseInt(RegExp.$1):0),maxImgsInRow=Math.min(offsetCont.parent().width()/offsetWidth,imgList.length),offset;var leftOffsetLim=0;var rightOffsetLim=-((imgList.length-maxImgsInRow)*offsetWidth);if(direction=='left'){offset=Math.min((currOffset+offsetWidth),leftOffsetLim)}else if(direction=='right'){offset=Math.max((currOffset-offsetWidth),rightOffsetLim)}
offsetCont.css('margin-left',offset+'px')};GalleryBlock.prototype.swapImage=function(thumb){var _this=this;var oldImage=this.imageElem;var newImage=thumb.getImageElem().clone().css('opacity',0);this.linkElem.css({background:'none'});if(newImage.prop("tagName")=='VIDEO'){this.linkElem.css({background:'black'});newImage.css({width:'auto',height:'auto'})}
this.linkElem.append(newImage);oldImage.css('opacity',0);newImage.css('opacity',1);this.imageElem=newImage;var link=newImage.attr('data-link');var target=newImage.attr('data-target');if(link===''||link==='http://'||link==='https://'){link='javascript:void(0)';target='_self'}
if(target==='')
target='_self';this.linkElem.attr('href',link);this.linkElem.attr('target',target);if('initLink' in window&&typeof window.initLink==='function'){window.initLink(this.linkElem)}
newImage.on('load',function(){_this.linkElem.css({height:newImage.height()})});newImage.on('loadeddata',function(){newImage.get(0).controls=!0;newImage.get(0).autoplay=!1;newImage.get(0).muted=!1});oldImage.remove()};GalleryBlock.prototype.swapVariantImage=function(image){var thumb;if(image){if(!this.variantThumb){this.variantThumb=new GalleryThumb(null,this)}
thumb=this.variantThumb;thumb.applyImage(image,this.imageResolution);if(this.thumbsElem)
thumb.attach(this.thumbsElem);this.hasVariant=!0}else{thumb=this.thumbs[0];if(this.variantThumb)
this.variantThumb.attach(null);this.hasVariant=!1}
this.swapImage(thumb);thumb.setActive(!0);if(this.resizeFunc)
this.resizeFunc();};return GalleryBlock}());var GalleryThumb=(function(){function GalleryThumb(elem,gallery,imgElem){if(imgElem===void 0){imgElem=null}
var _this=this;this.data={src:'',w:0,h:0};if(elem){this.elem=elem;this.imageElem=elem.children('img').length?elem.children('img'):elem.children('video')}else{this.elem=$('<div>').addClass('wb-store-alt-img');this.imageElem=imgElem?imgElem:$('<img>').attr({src:'',alt:''});this.elem.append(this.imageElem)}
this.elem.on('click',function(){if(_this.isActive())
return;_this.setActive(!0);gallery.swapImage(_this)})}
GalleryThumb.prototype.isVideoFile=function(src){var tsParts=src.split("?ts=");var extParts=tsParts[0].split(".");var ext=(extParts.length>1)?extParts[(extParts.length-1)]:"";if("mp4,mpeg,avi,flv,mkv,mov".indexOf(ext)>=0){return!0}
return!1};GalleryThumb.prototype.applyImage=function(image,imageResolution){if(!image.data){image.data={src:(image.zoom?image.zoom:((imageResolution in image.image)?image.image[imageResolution]:image.src)),w:0,h:0}}
this.data=image.data;this.imageElem.attr({'src':(imageResolution in image.image)?image.image[imageResolution]:image.src,'data-zoom-href':image.zoom||'','data-link':'','data-target':'','alt':'','title':'',})};GalleryThumb.prototype.attach=function(parent){if(parent)
parent.prepend(this.elem);else this.elem.detach()};GalleryThumb.prototype.getImageElem=function(){return this.imageElem};GalleryThumb.prototype.isActive=function(){return this.elem.hasClass('active')};GalleryThumb.prototype.setActive=function(active){this.elem.parent().children('div').removeClass('active');if(active)
this.elem.addClass('active');};return GalleryThumb}())});define("store/js/StoreList",["require","exports","store/js/StoreCartElement"],function(require,exports,StoreCartElement_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.init=void 0;var ItemData=(function(){function ItemData(elem){this.elem=elem;this.id=elem.attr('data-item-id')||'0';this.hasVariants=((elem.attr('data-has-variants')=='1')?!0:!1);this.elem=elem}
ItemData.prototype.navigateToDetails=function(){this.elem.trigger('click')};return ItemData}());function init(storeElementId,cartUrl,urlAnchor,translations){var store=$('#'+storeElementId).eq(0);var storeList=store.find('.wb-store-list').eq(0);var storeItems=storeList.find('.wb-store-item');var storeFilter=store.find('.wb-store-cat-select');var itemDrag=null,cancelDrag,thisCartUrl=cartUrl;var addToCartButtons=storeItems.find('.wb-store-item-add-to-cart');var buyNowButtons=storeItems.find('.wb-store-item-buy-now');var trAdded=(translations&&('Added!' in translations))?translations['Added!']:null;storeFilter.on('change',function(){location.href=$(this.options[this.selectedIndex]).data('store-url')});storeItems.on('mousedown',function(e){var item=$(this),offset=item.offset();itemDrag={x:(e.pageX-offset.left),y:(e.pageY-offset.top),mX:e.pageX,mY:e.pageY,item:new ItemData(item),helper:null,helperContainer:null};e.stopPropagation();e.preventDefault();return!1}).on('mouseup',cancelDrag=function(e){if(itemDrag){for(var i=0;i<StoreCartElement_3.cartElements.length;i++){var offset=StoreCartElement_3.cartElements[i].elem.offset();var width=StoreCartElement_3.cartElements[i].elem.width();var height=StoreCartElement_3.cartElements[i].elem.height();if(e.pageX>=offset.left&&e.pageX<=(offset.left+width)&&e.pageY>=offset.top&&e.pageY<=(offset.top+height)){if(itemDrag.item.hasVariants){itemDrag.item.navigateToDetails()}else{(0,StoreCartElement_3.addToCart)(thisCartUrl,itemDrag.item.id)}
break}}
if(itemDrag.helperContainer){itemDrag.helperContainer.remove();delete itemDrag.helper;delete itemDrag.helperContainer}
itemDrag=null;e.preventDefault();return!1}
return});addToCartButtons.on('click',function(e){e.stopImmediatePropagation();e.preventDefault();var btn=$(this);var item=new ItemData(btn.closest('.wb-store-item'));if(item.hasVariants){item.navigateToDetails();return}
addToCartButtons.attr('disabled','disabled');buyNowButtons.attr('disabled','disabled');var oldText=btn.html();(0,StoreCartElement_3.addToCart)(thisCartUrl,item.id,1,'',function(cartData){if(cartData.total&&!cartData.error&&trAdded){btn.html('<span class="fa fa-check-circle"></span> '+trAdded);setTimeout(function(){return btn.html(oldText)},1000)}},function(cartData){addToCartButtons.each(function(){if(this===btn.get(0)){var timer=(cartData&&cartData.total&&trAdded)?1000:250;if(cartData.error){btn.text(cartData.error);btn.addClass('btn-danger')}
setTimeout(function(){return btn.removeAttr('disabled').removeClass('btn-danger').html(oldText)},timer)}else{$(this).removeAttr('disabled')}});buyNowButtons.removeAttr('disabled')})});buyNowButtons.on('click',function(e){e.stopImmediatePropagation();e.preventDefault();var btn=$(this);var item=new ItemData(btn.closest('.wb-store-item'));if(item.hasVariants){item.navigateToDetails();return}
addToCartButtons.attr('disabled','disabled');buyNowButtons.attr('disabled','disabled');(0,StoreCartElement_3.addToCart)(thisCartUrl,item.id,1,'',function(){window.location.href=thisCartUrl+urlAnchor},function(cartData){addToCartButtons.removeAttr('disabled');buyNowButtons.removeAttr('disabled');var oldText=btn.html();if(cartData&&cartData.error){btn.text(cartData.error);btn.attr('disabled','disabled').addClass('btn-danger');setTimeout(function(){return btn.removeAttr('disabled').removeClass('btn-danger').html(oldText)},1000)}})});$(document.body).on('mousemove',function(e){var _a;if(!itemDrag)
return;var a=(itemDrag.mX-e.pageX),b=(itemDrag.mY-e.pageY),dist=Math.sqrt(a*a+b*b);if(dist<4)
return;if(!itemDrag.helperContainer){var dragElem=itemDrag.item.elem.clone().css({margin:0});dragElem.find('.wb-store-remove-from-helper').remove();if(dragElem.is('tr')){dragElem=itemDrag.item.elem.closest('table').clone().empty().append(dragElem)}
itemDrag.helperContainer=$('<div>').css({position:'absolute',left:0,top:0,right:0,bottom:0,overflow:'hidden'}).appendTo(document.body);itemDrag.helper=$('<div>').addClass('wb-store-list wb-store-drag-helper').css({position:'absolute',zIndex:99999,left:0,top:0,width:itemDrag.item.elem.width()+10,height:itemDrag.item.elem.height()+10}).append(dragElem).appendTo(itemDrag.helperContainer)}
var rect=document.body.getBoundingClientRect();itemDrag.helperContainer.css({width:rect.width,height:rect.height});(_a=itemDrag.helper)===null||_a===void 0?void 0:_a.css({left:(e.pageX-itemDrag.x),top:(e.pageY-itemDrag.y)});e.preventDefault();return!1});$(document.body).on('mouseup',cancelDrag)}
exports.init=init})